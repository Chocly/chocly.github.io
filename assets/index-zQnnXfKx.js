(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();var Vm={exports:{}},nc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0;function oA(){if(x0)return nc;x0=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,l){var u=null;if(l!==void 0&&(u=""+l),s.key!==void 0&&(u=""+s.key),"key"in s){l={};for(var m in s)m!=="key"&&(l[m]=s[m])}else l=s;return s=l.ref,{$$typeof:a,type:r,key:u,ref:s!==void 0?s:null,props:l}}return nc.Fragment=e,nc.jsx=t,nc.jsxs=t,nc}var C0;function lA(){return C0||(C0=1,Vm.exports=oA()),Vm.exports}var d=lA(),Lm={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0;function cA(){if(A0)return Ve;A0=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function T(B){return B===null||typeof B!="object"?null:(B=w&&B[w]||B["@@iterator"],typeof B=="function"?B:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function x(B,he,H){this.props=B,this.context=he,this.refs=C,this.updater=H||A}x.prototype.isReactComponent={},x.prototype.setState=function(B,he){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,he,"setState")},x.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function I(){}I.prototype=x.prototype;function z(B,he,H){this.props=B,this.context=he,this.refs=C,this.updater=H||A}var L=z.prototype=new I;L.constructor=z,k(L,x.prototype),L.isPureReactComponent=!0;var ne=Array.isArray,oe={H:null,A:null,T:null,S:null,V:null},de=Object.prototype.hasOwnProperty;function O(B,he,H,D,K,Z){return H=Z.ref,{$$typeof:a,type:B,key:he,ref:H!==void 0?H:null,props:Z}}function N(B,he){return O(B.type,he,void 0,void 0,void 0,B.props)}function j(B){return typeof B=="object"&&B!==null&&B.$$typeof===a}function U(B){var he={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(H){return he[H]})}var F=/\/+/g;function $(B,he){return typeof B=="object"&&B!==null&&B.key!=null?U(""+B.key):he.toString(36)}function P(){}function Tt(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(P,P):(B.status="pending",B.then(function(he){B.status==="pending"&&(B.status="fulfilled",B.value=he)},function(he){B.status==="pending"&&(B.status="rejected",B.reason=he)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function ht(B,he,H,D,K){var Z=typeof B;(Z==="undefined"||Z==="boolean")&&(B=null);var V=!1;if(B===null)V=!0;else switch(Z){case"bigint":case"string":case"number":V=!0;break;case"object":switch(B.$$typeof){case a:case e:V=!0;break;case v:return V=B._init,ht(V(B._payload),he,H,D,K)}}if(V)return K=K(B),V=D===""?"."+$(B,0):D,ne(K)?(H="",V!=null&&(H=V.replace(F,"$&/")+"/"),ht(K,he,H,"",function(Ae){return Ae})):K!=null&&(j(K)&&(K=N(K,H+(K.key==null||B&&B.key===K.key?"":(""+K.key).replace(F,"$&/")+"/")+V)),he.push(K)),1;V=0;var ve=D===""?".":D+":";if(ne(B))for(var te=0;te<B.length;te++)D=B[te],Z=ve+$(D,te),V+=ht(D,he,H,Z,K);else if(te=T(B),typeof te=="function")for(B=te.call(B),te=0;!(D=B.next()).done;)D=D.value,Z=ve+$(D,te++),V+=ht(D,he,H,Z,K);else if(Z==="object"){if(typeof B.then=="function")return ht(Tt(B),he,H,D,K);throw he=String(B),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.")}return V}function ae(B,he,H){if(B==null)return B;var D=[],K=0;return ht(B,D,"","",function(Z){return he.call(H,Z,K++)}),D}function me(B){if(B._status===-1){var he=B._result;he=he(),he.then(function(H){(B._status===0||B._status===-1)&&(B._status=1,B._result=H)},function(H){(B._status===0||B._status===-1)&&(B._status=2,B._result=H)}),B._status===-1&&(B._status=0,B._result=he)}if(B._status===1)return B._result.default;throw B._result}var be=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var he=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(he))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function Be(){}return Ve.Children={map:ae,forEach:function(B,he,H){ae(B,function(){he.apply(this,arguments)},H)},count:function(B){var he=0;return ae(B,function(){he++}),he},toArray:function(B){return ae(B,function(he){return he})||[]},only:function(B){if(!j(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Ve.Component=x,Ve.Fragment=t,Ve.Profiler=s,Ve.PureComponent=z,Ve.StrictMode=r,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(B){return oe.H.useMemoCache(B)}},Ve.cache=function(B){return function(){return B.apply(null,arguments)}},Ve.cloneElement=function(B,he,H){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var D=k({},B.props),K=B.key,Z=void 0;if(he!=null)for(V in he.ref!==void 0&&(Z=void 0),he.key!==void 0&&(K=""+he.key),he)!de.call(he,V)||V==="key"||V==="__self"||V==="__source"||V==="ref"&&he.ref===void 0||(D[V]=he[V]);var V=arguments.length-2;if(V===1)D.children=H;else if(1<V){for(var ve=Array(V),te=0;te<V;te++)ve[te]=arguments[te+2];D.children=ve}return O(B.type,K,void 0,void 0,Z,D)},Ve.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:l,_context:B},B},Ve.createElement=function(B,he,H){var D,K={},Z=null;if(he!=null)for(D in he.key!==void 0&&(Z=""+he.key),he)de.call(he,D)&&D!=="key"&&D!=="__self"&&D!=="__source"&&(K[D]=he[D]);var V=arguments.length-2;if(V===1)K.children=H;else if(1<V){for(var ve=Array(V),te=0;te<V;te++)ve[te]=arguments[te+2];K.children=ve}if(B&&B.defaultProps)for(D in V=B.defaultProps,V)K[D]===void 0&&(K[D]=V[D]);return O(B,Z,void 0,void 0,null,K)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(B){return{$$typeof:m,render:B}},Ve.isValidElement=j,Ve.lazy=function(B){return{$$typeof:v,_payload:{_status:-1,_result:B},_init:me}},Ve.memo=function(B,he){return{$$typeof:y,type:B,compare:he===void 0?null:he}},Ve.startTransition=function(B){var he=oe.T,H={};oe.T=H;try{var D=B(),K=oe.S;K!==null&&K(H,D),typeof D=="object"&&D!==null&&typeof D.then=="function"&&D.then(Be,be)}catch(Z){be(Z)}finally{oe.T=he}},Ve.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},Ve.use=function(B){return oe.H.use(B)},Ve.useActionState=function(B,he,H){return oe.H.useActionState(B,he,H)},Ve.useCallback=function(B,he){return oe.H.useCallback(B,he)},Ve.useContext=function(B){return oe.H.useContext(B)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(B,he){return oe.H.useDeferredValue(B,he)},Ve.useEffect=function(B,he,H){var D=oe.H;if(typeof H=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return D.useEffect(B,he)},Ve.useId=function(){return oe.H.useId()},Ve.useImperativeHandle=function(B,he,H){return oe.H.useImperativeHandle(B,he,H)},Ve.useInsertionEffect=function(B,he){return oe.H.useInsertionEffect(B,he)},Ve.useLayoutEffect=function(B,he){return oe.H.useLayoutEffect(B,he)},Ve.useMemo=function(B,he){return oe.H.useMemo(B,he)},Ve.useOptimistic=function(B,he){return oe.H.useOptimistic(B,he)},Ve.useReducer=function(B,he,H){return oe.H.useReducer(B,he,H)},Ve.useRef=function(B){return oe.H.useRef(B)},Ve.useState=function(B){return oe.H.useState(B)},Ve.useSyncExternalStore=function(B,he,H){return oe.H.useSyncExternalStore(B,he,H)},Ve.useTransition=function(){return oe.H.useTransition()},Ve.version="19.1.0",Ve}var R0;function Wp(){return R0||(R0=1,Lm.exports=cA()),Lm.exports}var G=Wp(),Bm={exports:{}},rc={},zm={exports:{}},qm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function uA(){return k0||(k0=1,function(a){function e(ae,me){var be=ae.length;ae.push(me);e:for(;0<be;){var Be=be-1>>>1,B=ae[Be];if(0<s(B,me))ae[Be]=me,ae[be]=B,be=Be;else break e}}function t(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var me=ae[0],be=ae.pop();if(be!==me){ae[0]=be;e:for(var Be=0,B=ae.length,he=B>>>1;Be<he;){var H=2*(Be+1)-1,D=ae[H],K=H+1,Z=ae[K];if(0>s(D,be))K<B&&0>s(Z,D)?(ae[Be]=Z,ae[K]=be,Be=K):(ae[Be]=D,ae[H]=be,Be=H);else if(K<B&&0>s(Z,be))ae[Be]=Z,ae[K]=be,Be=K;else break e}}return me}function s(ae,me){var be=ae.sortIndex-me.sortIndex;return be!==0?be:ae.id-me.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;a.unstable_now=function(){return l.now()}}else{var u=Date,m=u.now();a.unstable_now=function(){return u.now()-m}}var p=[],y=[],v=1,w=null,T=3,A=!1,k=!1,C=!1,x=!1,I=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function ne(ae){for(var me=t(y);me!==null;){if(me.callback===null)r(y);else if(me.startTime<=ae)r(y),me.sortIndex=me.expirationTime,e(p,me);else break;me=t(y)}}function oe(ae){if(C=!1,ne(ae),!k)if(t(p)!==null)k=!0,de||(de=!0,$());else{var me=t(y);me!==null&&ht(oe,me.startTime-ae)}}var de=!1,O=-1,N=5,j=-1;function U(){return x?!0:!(a.unstable_now()-j<N)}function F(){if(x=!1,de){var ae=a.unstable_now();j=ae;var me=!0;try{e:{k=!1,C&&(C=!1,z(O),O=-1),A=!0;var be=T;try{t:{for(ne(ae),w=t(p);w!==null&&!(w.expirationTime>ae&&U());){var Be=w.callback;if(typeof Be=="function"){w.callback=null,T=w.priorityLevel;var B=Be(w.expirationTime<=ae);if(ae=a.unstable_now(),typeof B=="function"){w.callback=B,ne(ae),me=!0;break t}w===t(p)&&r(p),ne(ae)}else r(p);w=t(p)}if(w!==null)me=!0;else{var he=t(y);he!==null&&ht(oe,he.startTime-ae),me=!1}}break e}finally{w=null,T=be,A=!1}me=void 0}}finally{me?$():de=!1}}}var $;if(typeof L=="function")$=function(){L(F)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Tt=P.port2;P.port1.onmessage=F,$=function(){Tt.postMessage(null)}}else $=function(){I(F,0)};function ht(ae,me){O=I(function(){ae(a.unstable_now())},me)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(ae){ae.callback=null},a.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ae?Math.floor(1e3/ae):5},a.unstable_getCurrentPriorityLevel=function(){return T},a.unstable_next=function(ae){switch(T){case 1:case 2:case 3:var me=3;break;default:me=T}var be=T;T=me;try{return ae()}finally{T=be}},a.unstable_requestPaint=function(){x=!0},a.unstable_runWithPriority=function(ae,me){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var be=T;T=ae;try{return me()}finally{T=be}},a.unstable_scheduleCallback=function(ae,me,be){var Be=a.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Be+be:Be):be=Be,ae){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=be+B,ae={id:v++,callback:me,priorityLevel:ae,startTime:be,expirationTime:B,sortIndex:-1},be>Be?(ae.sortIndex=be,e(y,ae),t(p)===null&&ae===t(y)&&(C?(z(O),O=-1):C=!0,ht(oe,be-Be))):(ae.sortIndex=B,e(p,ae),k||A||(k=!0,de||(de=!0,$()))),ae},a.unstable_shouldYield=U,a.unstable_wrapCallback=function(ae){var me=T;return function(){var be=T;T=me;try{return ae.apply(this,arguments)}finally{T=be}}}}(qm)),qm}var I0;function hA(){return I0||(I0=1,zm.exports=uA()),zm.exports}var Fm={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0;function dA(){if(N0)return yn;N0=1;var a=Wp();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(p,y,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:w==null?null:""+w,children:p,containerInfo:y,implementation:v}}var u=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,yn.createPortal=function(p,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(p,y,null,v)},yn.flushSync=function(p){var y=u.T,v=r.p;try{if(u.T=null,r.p=2,p)return p()}finally{u.T=y,r.p=v,r.d.f()}},yn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},yn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},yn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var v=y.as,w=m(v,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,A=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:A}):v==="script"&&r.d.X(p,{crossOrigin:w,integrity:T,fetchPriority:A,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},yn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=m(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},yn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,w=m(v,y.crossOrigin);r.d.L(p,v,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},yn.preloadModule=function(p,y){if(typeof p=="string")if(y){var v=m(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},yn.requestFormReset=function(p){r.d.r(p)},yn.unstable_batchedUpdates=function(p,y){return p(y)},yn.useFormState=function(p,y,v){return u.H.useFormState(p,y,v)},yn.useFormStatus=function(){return u.H.useHostTransitionStatus()},yn.version="19.1.0",yn}var D0;function fA(){if(D0)return Fm.exports;D0=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Fm.exports=dA(),Fm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function mA(){if(j0)return rc;j0=1;var a=hA(),e=Wp(),t=fA();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,c=i;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return m(f),n;if(g===c)return m(f),i;g=g.sibling}throw Error(r(188))}if(o.return!==c.return)o=f,c=g;else{for(var E=!1,S=f.child;S;){if(S===o){E=!0,o=f,c=g;break}if(S===c){E=!0,c=f,o=g;break}S=S.sibling}if(!E){for(S=g.child;S;){if(S===o){E=!0,o=g,c=f;break}if(S===c){E=!0,c=g,o=f;break}S=S.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function y(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=y(n),i!==null)return i;n=n.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),L=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function $(n){return n===null||typeof n!="object"?null:(n=F&&n[F]||n["@@iterator"],typeof n=="function"?n:null)}var P=Symbol.for("react.client.reference");function Tt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===P?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case x:return"Profiler";case C:return"StrictMode";case oe:return"Suspense";case de:return"SuspenseList";case j:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case A:return"Portal";case L:return(n.displayName||"Context")+".Provider";case z:return(n._context.displayName||"Context")+".Consumer";case ne:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case O:return i=n.displayName||null,i!==null?i:Tt(n.type)||"Memo";case N:i=n._payload,n=n._init;try{return Tt(n(i))}catch{}}return null}var ht=Array.isArray,ae=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Be=[],B=-1;function he(n){return{current:n}}function H(n){0>B||(n.current=Be[B],Be[B]=null,B--)}function D(n,i){B++,Be[B]=n.current,n.current=i}var K=he(null),Z=he(null),V=he(null),ve=he(null);function te(n,i){switch(D(V,i),D(Z,n),D(K,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?J_(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=J_(i),n=e0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}H(K),D(K,n)}function Ae(){H(K),H(Z),H(V)}function Fe(n){n.memoizedState!==null&&D(ve,n);var i=K.current,o=e0(i,n.type);i!==o&&(D(Z,n),D(K,o))}function ge(n){Z.current===n&&(H(K),H(Z)),ve.current===n&&(H(ve),Xl._currentValue=be)}var pe=Object.prototype.hasOwnProperty,xe=a.unstable_scheduleCallback,Oe=a.unstable_cancelCallback,We=a.unstable_shouldYield,ye=a.unstable_requestPaint,Me=a.unstable_now,St=a.unstable_getCurrentPriorityLevel,Xe=a.unstable_ImmediatePriority,Te=a.unstable_UserBlockingPriority,nt=a.unstable_NormalPriority,pn=a.unstable_LowPriority,En=a.unstable_IdlePriority,Gt=a.log,xt=a.unstable_setDisableYieldValue,gt=null,Ke=null;function Ie(n){if(typeof Gt=="function"&&xt(n),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(gt,n)}catch{}}var rt=Math.clz32?Math.clz32:Ri,Qc=Math.log,Ld=Math.LN2;function Ri(n){return n>>>=0,n===0?32:31-(Qc(n)/Ld|0)|0}var ki=256,Ii=4194304;function sr(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Cs(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,g=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var S=c&134217727;return S!==0?(c=S&~g,c!==0?f=sr(c):(E&=S,E!==0?f=sr(E):o||(o=S&~n,o!==0&&(f=sr(o))))):(S=c&~g,S!==0?f=sr(S):E!==0?f=sr(E):o||(o=c&~n,o!==0&&(f=sr(o)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:f}function Ni(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Xo(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zo(){var n=ki;return ki<<=1,(ki&4194048)===0&&(ki=256),n}function Jo(){var n=Ii;return Ii<<=1,(Ii&62914560)===0&&(Ii=4194304),n}function Kr(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Qr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function el(n,i,o,c,f,g){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var S=n.entanglements,M=n.expirationTimes,X=n.hiddenUpdates;for(o=E&~o;0<o;){var ie=31-rt(o),le=1<<ie;S[ie]=0,M[ie]=-1;var J=X[ie];if(J!==null)for(X[ie]=null,ie=0;ie<J.length;ie++){var ee=J[ie];ee!==null&&(ee.lane&=-536870913)}o&=~le}c!==0&&vr(n,c,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(E&~i))}function vr(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-rt(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&4194090}function tl(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-rt(o),f=1<<c;f&i|n[c]&i&&(n[c]|=i),o&=~f}}function Ma(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function As(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Oa(){var n=me.p;return n!==0?n:(n=window.event,n===void 0?32:_0(n.type))}function Yc(n,i){var o=me.p;try{return me.p=n,i()}finally{me.p=o}}var bt=Math.random().toString(36).slice(2),$t="__reactFiber$"+bt,Lt="__reactProps$"+bt,$n="__reactContainer$"+bt,nl="__reactEvents$"+bt,Bd="__reactListeners$"+bt,Pa="__reactHandles$"+bt,Wc="__reactResources$"+bt,Di="__reactMarker$"+bt;function Ua(n){delete n[$t],delete n[Lt],delete n[nl],delete n[Bd],delete n[Pa]}function Yr(n){var i=n[$t];if(i)return i;for(var o=n.parentNode;o;){if(i=o[$n]||o[$t]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=a0(n);n!==null;){if(o=n[$t])return o;n=a0(n)}return i}n=o,o=n.parentNode}return null}function _r(n){if(n=n[$t]||n[$n]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function wr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function Tn(n){var i=n[Wc];return i||(i=n[Wc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ot(n){n[Di]=!0}var rl=new Set,Rs={};function or(n,i){Wr(n,i),Wr(n+"Capture",i)}function Wr(n,i){for(Rs[n]=i,n=0;n<i.length;n++)rl.add(i[n])}var Xc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zc={},ji={};function Jc(n){return pe.call(ji,n)?!0:pe.call(Zc,n)?!1:Xc.test(n)?ji[n]=!0:(Zc[n]=!0,!1)}function Va(n,i,o){if(Jc(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function br(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function sn(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}var Mi,eu;function Xr(n){if(Mi===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Mi=i&&i[1]||"",eu=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mi+n+eu}var ks=!1;function Is(n,i){if(!n||ks)return"";ks=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ee){var J=ee}Reflect.construct(n,[],le)}else{try{le.call()}catch(ee){J=ee}n.call(le.prototype)}}else{try{throw Error()}catch(ee){J=ee}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ee){if(ee&&J&&typeof ee.stack=="string")return[ee.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),E=g[0],S=g[1];if(E&&S){var M=E.split(`
`),X=S.split(`
`);for(f=c=0;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;for(;f<X.length&&!X[f].includes("DetermineComponentFrameRoot");)f++;if(c===M.length||f===X.length)for(c=M.length-1,f=X.length-1;1<=c&&0<=f&&M[c]!==X[f];)f--;for(;1<=c&&0<=f;c--,f--)if(M[c]!==X[f]){if(c!==1||f!==1)do if(c--,f--,0>f||M[c]!==X[f]){var ie=`
`+M[c].replace(" at new "," at ");return n.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",n.displayName)),ie}while(1<=c&&0<=f);break}}}finally{ks=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Xr(o):""}function al(n){switch(n.tag){case 26:case 27:case 5:return Xr(n.type);case 16:return Xr("Lazy");case 13:return Xr("Suspense");case 19:return Xr("SuspenseList");case 0:case 15:return Is(n.type,!1);case 11:return Is(n.type.render,!1);case 1:return Is(n.type,!0);case 31:return Xr("Activity");default:return""}}function Ns(n){try{var i="";do i+=al(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Sn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function il(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function zd(n){var i=il(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){c=""+E,g.call(this,E)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ds(n){n._valueTracker||(n._valueTracker=zd(n))}function sl(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=il(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function Oi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var qd=/[\n"\\]/g;function Bt(n){return n.replace(qd,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Pn(n,i,o,c,f,g,E,S){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),i!=null?E==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Sn(i)):n.value!==""+Sn(i)&&(n.value=""+Sn(i)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),i!=null?La(n,E,Sn(i)):o!=null?La(n,E,Sn(o)):c!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+Sn(S):n.removeAttribute("name")}function Pi(n,i,o,c,f,g,E,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;o=o!=null?""+Sn(o):"",i=i!=null?""+Sn(i):o,S||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=S?n.checked:!!c,n.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function La(n,i,o){i==="number"&&Oi(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Zr(n,i,o,c){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Sn(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function dt(n,i,o){if(i!=null&&(i=""+Sn(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Sn(o):""}function Ui(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(r(92));if(ht(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=Sn(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c)}function Kn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Vi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tu(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||Vi.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function ol(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&o[f]!==c&&tu(n,f,c)}else for(var g in i)i.hasOwnProperty(g)&&tu(n,g,i[g])}function ll(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function js(n){return Hd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Jr=null;function Qn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ea=null,ta=null;function cl(n){var i=_r(n);if(i&&(n=i.stateNode)){var o=n[Lt]||null;e:switch(n=i.stateNode,i.type){case"input":if(Pn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Bt(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var f=c[Lt]||null;if(!f)throw Error(r(90));Pn(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&sl(c)}break e;case"textarea":dt(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Zr(n,!!o.multiple,i,!1)}}}var Er=!1;function nu(n,i,o){if(Er)return n(i,o);Er=!0;try{var c=n(i);return c}finally{if(Er=!1,(ea!==null||ta!==null)&&(Yu(),ea&&(i=ea,n=ta,ta=ea=null,cl(i),n)))for(i=0;i<n.length;i++)cl(n[i])}}function Li(n,i){var o=n.stateNode;if(o===null)return null;var c=o[Lt]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yn=!1;if(lr)try{var Bi={};Object.defineProperty(Bi,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",Bi,Bi),window.removeEventListener("test",Bi,Bi)}catch{Yn=!1}var Tr=null,Ba=null,na=null;function ul(){if(na)return na;var n,i=Ba,o=i.length,c,f="value"in Tr?Tr.value:Tr.textContent,g=f.length;for(n=0;n<o&&i[n]===f[n];n++);var E=o-n;for(c=1;c<=E&&i[o-c]===f[g-c];c++);return na=f.slice(n,1<c?1-c:void 0)}function Sr(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function xr(){return!0}function hl(){return!1}function Jt(n){function i(o,c,f,g,E){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?xr:hl,this.isPropagationStopped=hl,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=xr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=xr)},persist:function(){},isPersistent:xr}),i}var st={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ms=Jt(st),zi=v({},st,{view:0,detail:0}),ru=Jt(zi),Os,Ps,Cr,qi=v({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Cr&&(Cr&&n.type==="mousemove"?(Os=n.screenX-Cr.screenX,Ps=n.screenY-Cr.screenY):Ps=Os=0,Cr=n),Os)},movementY:function(n){return"movementY"in n?n.movementY:Ps}}),Wn=Jt(qi),au=v({},qi,{dataTransfer:0}),Gd=Jt(au),Fi=v({},zi,{relatedTarget:0}),Us=Jt(Fi),dl=v({},st,{animationName:0,elapsedTime:0,pseudoElement:0}),Vs=Jt(dl),iu=v({},st,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ls=Jt(iu),$d=v({},st,{data:0}),fl=Jt($d),Hi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},su={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ml(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ou[n])?!!i[n]:!1}function Gi(){return ml}var lu=v({},zi,{key:function(n){if(n.key){var i=Hi[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Sr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?su[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gi,charCode:function(n){return n.type==="keypress"?Sr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Sr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Bs=Jt(lu),cu=v({},qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pl=Jt(cu),ra=v({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gi}),uu=Jt(ra),hu=v({},st,{propertyName:0,elapsedTime:0,pseudoElement:0}),du=Jt(hu),fu=v({},qi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),zs=Jt(fu),xn=v({},st,{newState:0,oldState:0}),mu=Jt(xn),pu=[9,13,27,32],Ar=lr&&"CompositionEvent"in window,h=null;lr&&"documentMode"in document&&(h=document.documentMode);var _=lr&&"TextEvent"in window&&!h,b=lr&&(!Ar||h&&8<h&&11>=h),R=" ",Y=!1;function re(n,i){switch(n){case"keyup":return pu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fe(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ze=!1;function Kt(n,i){switch(n){case"compositionend":return fe(i);case"keypress":return i.which!==32?null:(Y=!0,R);case"textInput":return n=i.data,n===R&&Y?null:n;default:return null}}function Je(n,i){if(Ze)return n==="compositionend"||!Ar&&re(n,i)?(n=ul(),na=Ba=Tr=null,Ze=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return b&&i.locale!=="ko"?null:i.data;default:return null}}var en={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qt(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!en[n.type]:i==="textarea"}function aa(n,i,o,c){ea?ta?ta.push(c):ta=[c]:ea=c,i=th(i,"onChange"),0<i.length&&(o=new Ms("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var on=null,Rr=null;function gl(n){Q_(n,0)}function gu(n){var i=wr(n);if(sl(i))return n}function py(n,i){if(n==="change")return i}var gy=!1;if(lr){var Kd;if(lr){var Qd="oninput"in document;if(!Qd){var yy=document.createElement("div");yy.setAttribute("oninput","return;"),Qd=typeof yy.oninput=="function"}Kd=Qd}else Kd=!1;gy=Kd&&(!document.documentMode||9<document.documentMode)}function vy(){on&&(on.detachEvent("onpropertychange",_y),Rr=on=null)}function _y(n){if(n.propertyName==="value"&&gu(Rr)){var i=[];aa(i,Rr,n,Qn(n)),nu(gl,i)}}function Ux(n,i,o){n==="focusin"?(vy(),on=i,Rr=o,on.attachEvent("onpropertychange",_y)):n==="focusout"&&vy()}function Vx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return gu(Rr)}function Lx(n,i){if(n==="click")return gu(i)}function Bx(n,i){if(n==="input"||n==="change")return gu(i)}function zx(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Un=typeof Object.is=="function"?Object.is:zx;function yl(n,i){if(Un(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!pe.call(i,f)||!Un(n[f],i[f]))return!1}return!0}function wy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function by(n,i){var o=wy(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=wy(o)}}function Ey(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ey(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Ty(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Oi(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Oi(n.document)}return i}function Yd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var qx=lr&&"documentMode"in document&&11>=document.documentMode,qs=null,Wd=null,vl=null,Xd=!1;function Sy(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Xd||qs==null||qs!==Oi(c)||(c=qs,"selectionStart"in c&&Yd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),vl&&yl(vl,c)||(vl=c,c=th(Wd,"onSelect"),0<c.length&&(i=new Ms("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=qs)))}function $i(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Fs={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionrun:$i("Transition","TransitionRun"),transitionstart:$i("Transition","TransitionStart"),transitioncancel:$i("Transition","TransitionCancel"),transitionend:$i("Transition","TransitionEnd")},Zd={},xy={};lr&&(xy=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function Ki(n){if(Zd[n])return Zd[n];if(!Fs[n])return n;var i=Fs[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in xy)return Zd[n]=i[o];return n}var Cy=Ki("animationend"),Ay=Ki("animationiteration"),Ry=Ki("animationstart"),Fx=Ki("transitionrun"),Hx=Ki("transitionstart"),Gx=Ki("transitioncancel"),ky=Ki("transitionend"),Iy=new Map,Jd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jd.push("scrollEnd");function cr(n,i){Iy.set(n,i),or(i,[n])}var Ny=new WeakMap;function Xn(n,i){if(typeof n=="object"&&n!==null){var o=Ny.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Ns(i)},Ny.set(n,i),i)}return{value:n,source:i,stack:Ns(i)}}var Zn=[],Hs=0,ef=0;function yu(){for(var n=Hs,i=ef=Hs=0;i<n;){var o=Zn[i];Zn[i++]=null;var c=Zn[i];Zn[i++]=null;var f=Zn[i];Zn[i++]=null;var g=Zn[i];if(Zn[i++]=null,c!==null&&f!==null){var E=c.pending;E===null?f.next=f:(f.next=E.next,E.next=f),c.pending=f}g!==0&&Dy(o,f,g)}}function vu(n,i,o,c){Zn[Hs++]=n,Zn[Hs++]=i,Zn[Hs++]=o,Zn[Hs++]=c,ef|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function tf(n,i,o,c){return vu(n,i,o,c),_u(n)}function Gs(n,i){return vu(n,null,null,i),_u(n)}function Dy(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&i!==null&&(f=31-rt(o),n=g.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=o|536870912),g):null}function _u(n){if(50<Fl)throw Fl=0,lm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var $s={};function $x(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(n,i,o,c){return new $x(n,i,o,c)}function nf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ia(n,i){var o=n.alternate;return o===null?(o=Vn(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function jy(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function wu(n,i,o,c,f,g){var E=0;if(c=n,typeof n=="function")nf(n)&&(E=1);else if(typeof n=="string")E=QC(n,o,K.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case j:return n=Vn(31,o,i,f),n.elementType=j,n.lanes=g,n;case k:return Qi(o.children,f,g,i);case C:E=8,f|=24;break;case x:return n=Vn(12,o,i,f|2),n.elementType=x,n.lanes=g,n;case oe:return n=Vn(13,o,i,f),n.elementType=oe,n.lanes=g,n;case de:return n=Vn(19,o,i,f),n.elementType=de,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case I:case L:E=10;break e;case z:E=9;break e;case ne:E=11;break e;case O:E=14;break e;case N:E=16,c=null;break e}E=29,o=Error(r(130,n===null?"null":typeof n,"")),c=null}return i=Vn(E,o,i,f),i.elementType=n,i.type=c,i.lanes=g,i}function Qi(n,i,o,c){return n=Vn(7,n,c,i),n.lanes=o,n}function rf(n,i,o){return n=Vn(6,n,null,i),n.lanes=o,n}function af(n,i,o){return i=Vn(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Ks=[],Qs=0,bu=null,Eu=0,Jn=[],er=0,Yi=null,sa=1,oa="";function Wi(n,i){Ks[Qs++]=Eu,Ks[Qs++]=bu,bu=n,Eu=i}function My(n,i,o){Jn[er++]=sa,Jn[er++]=oa,Jn[er++]=Yi,Yi=n;var c=sa;n=oa;var f=32-rt(c)-1;c&=~(1<<f),o+=1;var g=32-rt(i)+f;if(30<g){var E=f-f%5;g=(c&(1<<E)-1).toString(32),c>>=E,f-=E,sa=1<<32-rt(i)+f|o<<f|c,oa=g+n}else sa=1<<g|o<<f|c,oa=n}function sf(n){n.return!==null&&(Wi(n,1),My(n,1,0))}function of(n){for(;n===bu;)bu=Ks[--Qs],Ks[Qs]=null,Eu=Ks[--Qs],Ks[Qs]=null;for(;n===Yi;)Yi=Jn[--er],Jn[er]=null,oa=Jn[--er],Jn[er]=null,sa=Jn[--er],Jn[er]=null}var Cn=null,kt=null,it=!1,Xi=null,kr=!1,lf=Error(r(519));function Zi(n){var i=Error(r(418,""));throw bl(Xn(i,n)),lf}function Oy(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[$t]=n,i[Lt]=c,o){case"dialog":$e("cancel",i),$e("close",i);break;case"iframe":case"object":case"embed":$e("load",i);break;case"video":case"audio":for(o=0;o<Gl.length;o++)$e(Gl[o],i);break;case"source":$e("error",i);break;case"img":case"image":case"link":$e("error",i),$e("load",i);break;case"details":$e("toggle",i);break;case"input":$e("invalid",i),Pi(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Ds(i);break;case"select":$e("invalid",i);break;case"textarea":$e("invalid",i),Ui(i,c.value,c.defaultValue,c.children),Ds(i)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||Z_(i.textContent,o)?(c.popover!=null&&($e("beforetoggle",i),$e("toggle",i)),c.onScroll!=null&&$e("scroll",i),c.onScrollEnd!=null&&$e("scrollend",i),c.onClick!=null&&(i.onclick=nh),i=!0):i=!1,i||Zi(n)}function Py(n){for(Cn=n.return;Cn;)switch(Cn.tag){case 5:case 13:kr=!1;return;case 27:case 3:kr=!0;return;default:Cn=Cn.return}}function _l(n){if(n!==Cn)return!1;if(!it)return Py(n),it=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Sm(n.type,n.memoizedProps)),o=!o),o&&kt&&Zi(n),Py(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){kt=hr(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}kt=null}}else i===27?(i=kt,ni(n.type)?(n=Rm,Rm=null,kt=n):kt=i):kt=Cn?hr(n.stateNode.nextSibling):null;return!0}function wl(){kt=Cn=null,it=!1}function Uy(){var n=Xi;return n!==null&&(Dn===null?Dn=n:Dn.push.apply(Dn,n),Xi=null),n}function bl(n){Xi===null?Xi=[n]:Xi.push(n)}var cf=he(null),Ji=null,la=null;function za(n,i,o){D(cf,i._currentValue),i._currentValue=o}function ca(n){n._currentValue=cf.current,H(cf)}function uf(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function hf(n,i,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var E=f.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=f;for(var M=0;M<i.length;M++)if(S.context===i[M]){g.lanes|=o,S=g.alternate,S!==null&&(S.lanes|=o),uf(g.return,o,n),c||(E=null);break e}g=S.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),uf(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function El(n,i,o,c){n=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var S=f.type;Un(f.pendingProps.value,E.value)||(n!==null?n.push(S):n=[S])}}else if(f===ve.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Xl):n=[Xl])}f=f.return}n!==null&&hf(i,n,o,c),i.flags|=262144}function Tu(n){for(n=n.firstContext;n!==null;){if(!Un(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function es(n){Ji=n,la=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function gn(n){return Vy(Ji,n)}function Su(n,i){return Ji===null&&es(n),Vy(n,i)}function Vy(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},la===null){if(n===null)throw Error(r(308));la=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else la=la.next=i;return o}var Kx=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},Qx=a.unstable_scheduleCallback,Yx=a.unstable_NormalPriority,Yt={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function df(){return{controller:new Kx,data:new Map,refCount:0}}function Tl(n){n.refCount--,n.refCount===0&&Qx(Yx,function(){n.controller.abort()})}var Sl=null,ff=0,Ys=0,Ws=null;function Wx(n,i){if(Sl===null){var o=Sl=[];ff=0,Ys=pm(),Ws={status:"pending",value:void 0,then:function(c){o.push(c)}}}return ff++,i.then(Ly,Ly),i}function Ly(){if(--ff===0&&Sl!==null){Ws!==null&&(Ws.status="fulfilled");var n=Sl;Sl=null,Ys=0,Ws=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Xx(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var By=ae.S;ae.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Wx(n,i),By!==null&&By(n,i)};var ts=he(null);function mf(){var n=ts.current;return n!==null?n:vt.pooledCache}function xu(n,i){i===null?D(ts,ts.current):D(ts,i.pool)}function zy(){var n=mf();return n===null?null:{parent:Yt._currentValue,pool:n}}var xl=Error(r(460)),qy=Error(r(474)),Cu=Error(r(542)),pf={then:function(){}};function Fy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Au(){}function Hy(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(Au,Au),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,$y(n),n;default:if(typeof i.status=="string")i.then(Au,Au);else{if(n=vt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,$y(n),n}throw Cl=i,xl}}var Cl=null;function Gy(){if(Cl===null)throw Error(r(459));var n=Cl;return Cl=null,n}function $y(n){if(n===xl||n===Cu)throw Error(r(483))}var qa=!1;function gf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Fa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ha(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(lt&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=_u(n),Dy(n,null,o),i}return vu(n,c,i,o),_u(n)}function Al(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,tl(n,o)}}function vf(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?f=g=i:g=g.next=i}else f=g=i;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var _f=!1;function Rl(){if(_f){var n=Ws;if(n!==null)throw n}}function kl(n,i,o,c){_f=!1;var f=n.updateQueue;qa=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var M=S,X=M.next;M.next=null,E===null?g=X:E.next=X,E=M;var ie=n.alternate;ie!==null&&(ie=ie.updateQueue,S=ie.lastBaseUpdate,S!==E&&(S===null?ie.firstBaseUpdate=X:S.next=X,ie.lastBaseUpdate=M))}if(g!==null){var le=f.baseState;E=0,ie=X=M=null,S=g;do{var J=S.lane&-536870913,ee=J!==S.lane;if(ee?(et&J)===J:(c&J)===J){J!==0&&J===Ys&&(_f=!0),ie!==null&&(ie=ie.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var De=n,Re=S;J=i;var pt=o;switch(Re.tag){case 1:if(De=Re.payload,typeof De=="function"){le=De.call(pt,le,J);break e}le=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Re.payload,J=typeof De=="function"?De.call(pt,le,J):De,J==null)break e;le=v({},le,J);break e;case 2:qa=!0}}J=S.callback,J!==null&&(n.flags|=64,ee&&(n.flags|=8192),ee=f.callbacks,ee===null?f.callbacks=[J]:ee.push(J))}else ee={lane:J,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ie===null?(X=ie=ee,M=le):ie=ie.next=ee,E|=J;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;ee=S,S=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);ie===null&&(M=le),f.baseState=M,f.firstBaseUpdate=X,f.lastBaseUpdate=ie,g===null&&(f.shared.lanes=0),Za|=E,n.lanes=E,n.memoizedState=le}}function Ky(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Qy(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Ky(o[n],i)}var Xs=he(null),Ru=he(0);function Yy(n,i){n=ga,D(Ru,n),D(Xs,i),ga=n|i.baseLanes}function wf(){D(Ru,ga),D(Xs,Xs.current)}function bf(){ga=Ru.current,H(Xs),H(Ru)}var Ga=0,ze=null,ft=null,zt=null,ku=!1,Zs=!1,ns=!1,Iu=0,Il=0,Js=null,Zx=0;function Pt(){throw Error(r(321))}function Ef(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Un(n[o],i[o]))return!1;return!0}function Tf(n,i,o,c,f,g){return Ga=g,ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ae.H=n===null||n.memoizedState===null?Dv:jv,ns=!1,g=o(c,f),ns=!1,Zs&&(g=Xy(i,o,c,f)),Wy(n),g}function Wy(n){ae.H=Pu;var i=ft!==null&&ft.next!==null;if(Ga=0,zt=ft=ze=null,ku=!1,Il=0,Js=null,i)throw Error(r(300));n===null||tn||(n=n.dependencies,n!==null&&Tu(n)&&(tn=!0))}function Xy(n,i,o,c){ze=n;var f=0;do{if(Zs&&(Js=null),Il=0,Zs=!1,25<=f)throw Error(r(301));if(f+=1,zt=ft=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}ae.H=iC,g=i(o,c)}while(Zs);return g}function Jx(){var n=ae.H,i=n.useState()[0];return i=typeof i.then=="function"?Nl(i):i,n=n.useState()[0],(ft!==null?ft.memoizedState:null)!==n&&(ze.flags|=1024),i}function Sf(){var n=Iu!==0;return Iu=0,n}function xf(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Cf(n){if(ku){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ku=!1}Ga=0,zt=ft=ze=null,Zs=!1,Il=Iu=0,Js=null}function In(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?ze.memoizedState=zt=n:zt=zt.next=n,zt}function qt(){if(ft===null){var n=ze.alternate;n=n!==null?n.memoizedState:null}else n=ft.next;var i=zt===null?ze.memoizedState:zt.next;if(i!==null)zt=i,ft=n;else{if(n===null)throw ze.alternate===null?Error(r(467)):Error(r(310));ft=n,n={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},zt===null?ze.memoizedState=zt=n:zt=zt.next=n}return zt}function Af(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nl(n){var i=Il;return Il+=1,Js===null&&(Js=[]),n=Hy(Js,n,i),i=ze,(zt===null?i.memoizedState:zt.next)===null&&(i=i.alternate,ae.H=i===null||i.memoizedState===null?Dv:jv),n}function Nu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Nl(n);if(n.$$typeof===L)return gn(n)}throw Error(r(438,String(n)))}function Rf(n){var i=null,o=ze.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=ze.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Af(),ze.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=U;return i.index++,o}function ua(n,i){return typeof i=="function"?i(n):i}function Du(n){var i=qt();return kf(i,ft,n)}function kf(n,i,o){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var f=n.baseQueue,g=c.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}i.baseQueue=f=g,c.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{i=f.next;var S=E=null,M=null,X=i,ie=!1;do{var le=X.lane&-536870913;if(le!==X.lane?(et&le)===le:(Ga&le)===le){var J=X.revertLane;if(J===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),le===Ys&&(ie=!0);else if((Ga&J)===J){X=X.next,J===Ys&&(ie=!0);continue}else le={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},M===null?(S=M=le,E=g):M=M.next=le,ze.lanes|=J,Za|=J;le=X.action,ns&&o(g,le),g=X.hasEagerState?X.eagerState:o(g,le)}else J={lane:le,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},M===null?(S=M=J,E=g):M=M.next=J,ze.lanes|=le,Za|=le;X=X.next}while(X!==null&&X!==i);if(M===null?E=g:M.next=S,!Un(g,n.memoizedState)&&(tn=!0,ie&&(o=Ws,o!==null)))throw o;n.memoizedState=g,n.baseState=E,n.baseQueue=M,c.lastRenderedState=g}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function If(n){var i=qt(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,g=i.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do g=n(g,E.action),E=E.next;while(E!==f);Un(g,i.memoizedState)||(tn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,c]}function Zy(n,i,o){var c=ze,f=qt(),g=it;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=i();var E=!Un((ft||f).memoizedState,o);E&&(f.memoizedState=o,tn=!0),f=f.queue;var S=tv.bind(null,c,f,n);if(Dl(2048,8,S,[n]),f.getSnapshot!==i||E||zt!==null&&zt.memoizedState.tag&1){if(c.flags|=2048,eo(9,ju(),ev.bind(null,c,f,o,i),null),vt===null)throw Error(r(349));g||(Ga&124)!==0||Jy(c,i,o)}return o}function Jy(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=ze.updateQueue,i===null?(i=Af(),ze.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function ev(n,i,o,c){i.value=o,i.getSnapshot=c,nv(i)&&rv(n)}function tv(n,i,o){return o(function(){nv(i)&&rv(n)})}function nv(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Un(n,o)}catch{return!0}}function rv(n){var i=Gs(n,2);i!==null&&Fn(i,n,2)}function Nf(n){var i=In();if(typeof n=="function"){var o=n;if(n=o(),ns){Ie(!0);try{o()}finally{Ie(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:n},i}function av(n,i,o,c){return n.baseState=o,kf(n,ft,typeof c=="function"?c:ua)}function eC(n,i,o,c,f){if(Ou(n))throw Error(r(485));if(n=i.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};ae.T!==null?o(!0):g.isTransition=!1,c(g),o=i.pending,o===null?(g.next=i.pending=g,iv(i,g)):(g.next=o.next,i.pending=o.next=g)}}function iv(n,i){var o=i.action,c=i.payload,f=n.state;if(i.isTransition){var g=ae.T,E={};ae.T=E;try{var S=o(f,c),M=ae.S;M!==null&&M(E,S),sv(n,i,S)}catch(X){Df(n,i,X)}finally{ae.T=g}}else try{g=o(f,c),sv(n,i,g)}catch(X){Df(n,i,X)}}function sv(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){ov(n,i,c)},function(c){return Df(n,i,c)}):ov(n,i,o)}function ov(n,i,o){i.status="fulfilled",i.value=o,lv(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,iv(n,o)))}function Df(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,lv(i),i=i.next;while(i!==c)}n.action=null}function lv(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function cv(n,i){return i}function uv(n,i){if(it){var o=vt.formState;if(o!==null){e:{var c=ze;if(it){if(kt){t:{for(var f=kt,g=kr;f.nodeType!==8;){if(!g){f=null;break t}if(f=hr(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){kt=hr(f.nextSibling),c=f.data==="F!";break e}}Zi(c)}c=!1}c&&(i=o[0])}}return o=In(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cv,lastRenderedState:i},o.queue=c,o=kv.bind(null,ze,c),c.dispatch=o,c=Nf(!1),g=Uf.bind(null,ze,!1,c.queue),c=In(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,o=eC.bind(null,ze,f,g,o),f.dispatch=o,c.memoizedState=n,[i,o,!1]}function hv(n){var i=qt();return dv(i,ft,n)}function dv(n,i,o){if(i=kf(n,i,cv)[0],n=Du(ua)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Nl(i)}catch(E){throw E===xl?Cu:E}else c=i;i=qt();var f=i.queue,g=f.dispatch;return o!==i.memoizedState&&(ze.flags|=2048,eo(9,ju(),tC.bind(null,f,o),null)),[c,g,n]}function tC(n,i){n.action=i}function fv(n){var i=qt(),o=ft;if(o!==null)return dv(i,o,n);qt(),i=i.memoizedState,o=qt();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function eo(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=ze.updateQueue,i===null&&(i=Af(),ze.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function ju(){return{destroy:void 0,resource:void 0}}function mv(){return qt().memoizedState}function Mu(n,i,o,c){var f=In();c=c===void 0?null:c,ze.flags|=n,f.memoizedState=eo(1|i,ju(),o,c)}function Dl(n,i,o,c){var f=qt();c=c===void 0?null:c;var g=f.memoizedState.inst;ft!==null&&c!==null&&Ef(c,ft.memoizedState.deps)?f.memoizedState=eo(i,g,o,c):(ze.flags|=n,f.memoizedState=eo(1|i,g,o,c))}function pv(n,i){Mu(8390656,8,n,i)}function gv(n,i){Dl(2048,8,n,i)}function yv(n,i){return Dl(4,2,n,i)}function vv(n,i){return Dl(4,4,n,i)}function _v(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function wv(n,i,o){o=o!=null?o.concat([n]):null,Dl(4,4,_v.bind(null,i,n),o)}function jf(){}function bv(n,i){var o=qt();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Ef(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function Ev(n,i){var o=qt();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Ef(i,c[1]))return c[0];if(c=n(),ns){Ie(!0);try{n()}finally{Ie(!1)}}return o.memoizedState=[c,i],c}function Mf(n,i,o){return o===void 0||(Ga&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=x_(),ze.lanes|=n,Za|=n,o)}function Tv(n,i,o,c){return Un(o,i)?o:Xs.current!==null?(n=Mf(n,o,c),Un(n,i)||(tn=!0),n):(Ga&42)===0?(tn=!0,n.memoizedState=o):(n=x_(),ze.lanes|=n,Za|=n,i)}function Sv(n,i,o,c,f){var g=me.p;me.p=g!==0&&8>g?g:8;var E=ae.T,S={};ae.T=S,Uf(n,!1,i,o);try{var M=f(),X=ae.S;if(X!==null&&X(S,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ie=Xx(M,c);jl(n,i,ie,qn(n))}else jl(n,i,c,qn(n))}catch(le){jl(n,i,{then:function(){},status:"rejected",reason:le},qn())}finally{me.p=g,ae.T=E}}function nC(){}function Of(n,i,o,c){if(n.tag!==5)throw Error(r(476));var f=xv(n).queue;Sv(n,f,i,be,o===null?nC:function(){return Cv(n),o(c)})}function xv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:be},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Cv(n){var i=xv(n).next.queue;jl(n,i,{},qn())}function Pf(){return gn(Xl)}function Av(){return qt().memoizedState}function Rv(){return qt().memoizedState}function rC(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=qn();n=Fa(o);var c=Ha(i,n,o);c!==null&&(Fn(c,i,o),Al(c,i,o)),i={cache:df()},n.payload=i;return}i=i.return}}function aC(n,i,o){var c=qn();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Ou(n)?Iv(i,o):(o=tf(n,i,o,c),o!==null&&(Fn(o,n,c),Nv(o,i,c)))}function kv(n,i,o){var c=qn();jl(n,i,o,c)}function jl(n,i,o,c){var f={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ou(n))Iv(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var E=i.lastRenderedState,S=g(E,o);if(f.hasEagerState=!0,f.eagerState=S,Un(S,E))return vu(n,i,f,0),vt===null&&yu(),!1}catch{}finally{}if(o=tf(n,i,f,c),o!==null)return Fn(o,n,c),Nv(o,i,c),!0}return!1}function Uf(n,i,o,c){if(c={lane:2,revertLane:pm(),action:c,hasEagerState:!1,eagerState:null,next:null},Ou(n)){if(i)throw Error(r(479))}else i=tf(n,o,c,2),i!==null&&Fn(i,n,2)}function Ou(n){var i=n.alternate;return n===ze||i!==null&&i===ze}function Iv(n,i){Zs=ku=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function Nv(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,tl(n,o)}}var Pu={readContext:gn,use:Nu,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt},Dv={readContext:gn,use:Nu,useCallback:function(n,i){return In().memoizedState=[n,i===void 0?null:i],n},useContext:gn,useEffect:pv,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Mu(4194308,4,_v.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Mu(4194308,4,n,i)},useInsertionEffect:function(n,i){Mu(4,2,n,i)},useMemo:function(n,i){var o=In();i=i===void 0?null:i;var c=n();if(ns){Ie(!0);try{n()}finally{Ie(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=In();if(o!==void 0){var f=o(i);if(ns){Ie(!0);try{o(i)}finally{Ie(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=aC.bind(null,ze,n),[c.memoizedState,n]},useRef:function(n){var i=In();return n={current:n},i.memoizedState=n},useState:function(n){n=Nf(n);var i=n.queue,o=kv.bind(null,ze,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:jf,useDeferredValue:function(n,i){var o=In();return Mf(o,n,i)},useTransition:function(){var n=Nf(!1);return n=Sv.bind(null,ze,n.queue,!0,!1),In().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=ze,f=In();if(it){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),vt===null)throw Error(r(349));(et&124)!==0||Jy(c,i,o)}f.memoizedState=o;var g={value:o,getSnapshot:i};return f.queue=g,pv(tv.bind(null,c,g,n),[n]),c.flags|=2048,eo(9,ju(),ev.bind(null,c,g,o,i),null),o},useId:function(){var n=In(),i=vt.identifierPrefix;if(it){var o=oa,c=sa;o=(c&~(1<<32-rt(c)-1)).toString(32)+o,i=""+i+"R"+o,o=Iu++,0<o&&(i+="H"+o.toString(32)),i+=""}else o=Zx++,i=""+i+"r"+o.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:Pf,useFormState:uv,useActionState:uv,useOptimistic:function(n){var i=In();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Uf.bind(null,ze,!0,o),o.dispatch=i,[n,i]},useMemoCache:Rf,useCacheRefresh:function(){return In().memoizedState=rC.bind(null,ze)}},jv={readContext:gn,use:Nu,useCallback:bv,useContext:gn,useEffect:gv,useImperativeHandle:wv,useInsertionEffect:yv,useLayoutEffect:vv,useMemo:Ev,useReducer:Du,useRef:mv,useState:function(){return Du(ua)},useDebugValue:jf,useDeferredValue:function(n,i){var o=qt();return Tv(o,ft.memoizedState,n,i)},useTransition:function(){var n=Du(ua)[0],i=qt().memoizedState;return[typeof n=="boolean"?n:Nl(n),i]},useSyncExternalStore:Zy,useId:Av,useHostTransitionStatus:Pf,useFormState:hv,useActionState:hv,useOptimistic:function(n,i){var o=qt();return av(o,ft,n,i)},useMemoCache:Rf,useCacheRefresh:Rv},iC={readContext:gn,use:Nu,useCallback:bv,useContext:gn,useEffect:gv,useImperativeHandle:wv,useInsertionEffect:yv,useLayoutEffect:vv,useMemo:Ev,useReducer:If,useRef:mv,useState:function(){return If(ua)},useDebugValue:jf,useDeferredValue:function(n,i){var o=qt();return ft===null?Mf(o,n,i):Tv(o,ft.memoizedState,n,i)},useTransition:function(){var n=If(ua)[0],i=qt().memoizedState;return[typeof n=="boolean"?n:Nl(n),i]},useSyncExternalStore:Zy,useId:Av,useHostTransitionStatus:Pf,useFormState:fv,useActionState:fv,useOptimistic:function(n,i){var o=qt();return ft!==null?av(o,ft,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Rf,useCacheRefresh:Rv},to=null,Ml=0;function Uu(n){var i=Ml;return Ml+=1,to===null&&(to=[]),Hy(to,n,i)}function Ol(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Vu(n,i){throw i.$$typeof===w?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Mv(n){var i=n._init;return i(n._payload)}function Ov(n){function i(Q,q){if(n){var W=Q.deletions;W===null?(Q.deletions=[q],Q.flags|=16):W.push(q)}}function o(Q,q){if(!n)return null;for(;q!==null;)i(Q,q),q=q.sibling;return null}function c(Q){for(var q=new Map;Q!==null;)Q.key!==null?q.set(Q.key,Q):q.set(Q.index,Q),Q=Q.sibling;return q}function f(Q,q){return Q=ia(Q,q),Q.index=0,Q.sibling=null,Q}function g(Q,q,W){return Q.index=W,n?(W=Q.alternate,W!==null?(W=W.index,W<q?(Q.flags|=67108866,q):W):(Q.flags|=67108866,q)):(Q.flags|=1048576,q)}function E(Q){return n&&Q.alternate===null&&(Q.flags|=67108866),Q}function S(Q,q,W,se){return q===null||q.tag!==6?(q=rf(W,Q.mode,se),q.return=Q,q):(q=f(q,W),q.return=Q,q)}function M(Q,q,W,se){var Ee=W.type;return Ee===k?ie(Q,q,W.props.children,se,W.key):q!==null&&(q.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===N&&Mv(Ee)===q.type)?(q=f(q,W.props),Ol(q,W),q.return=Q,q):(q=wu(W.type,W.key,W.props,null,Q.mode,se),Ol(q,W),q.return=Q,q)}function X(Q,q,W,se){return q===null||q.tag!==4||q.stateNode.containerInfo!==W.containerInfo||q.stateNode.implementation!==W.implementation?(q=af(W,Q.mode,se),q.return=Q,q):(q=f(q,W.children||[]),q.return=Q,q)}function ie(Q,q,W,se,Ee){return q===null||q.tag!==7?(q=Qi(W,Q.mode,se,Ee),q.return=Q,q):(q=f(q,W),q.return=Q,q)}function le(Q,q,W){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=rf(""+q,Q.mode,W),q.return=Q,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case T:return W=wu(q.type,q.key,q.props,null,Q.mode,W),Ol(W,q),W.return=Q,W;case A:return q=af(q,Q.mode,W),q.return=Q,q;case N:var se=q._init;return q=se(q._payload),le(Q,q,W)}if(ht(q)||$(q))return q=Qi(q,Q.mode,W,null),q.return=Q,q;if(typeof q.then=="function")return le(Q,Uu(q),W);if(q.$$typeof===L)return le(Q,Su(Q,q),W);Vu(Q,q)}return null}function J(Q,q,W,se){var Ee=q!==null?q.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Ee!==null?null:S(Q,q,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case T:return W.key===Ee?M(Q,q,W,se):null;case A:return W.key===Ee?X(Q,q,W,se):null;case N:return Ee=W._init,W=Ee(W._payload),J(Q,q,W,se)}if(ht(W)||$(W))return Ee!==null?null:ie(Q,q,W,se,null);if(typeof W.then=="function")return J(Q,q,Uu(W),se);if(W.$$typeof===L)return J(Q,q,Su(Q,W),se);Vu(Q,W)}return null}function ee(Q,q,W,se,Ee){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Q=Q.get(W)||null,S(q,Q,""+se,Ee);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case T:return Q=Q.get(se.key===null?W:se.key)||null,M(q,Q,se,Ee);case A:return Q=Q.get(se.key===null?W:se.key)||null,X(q,Q,se,Ee);case N:var He=se._init;return se=He(se._payload),ee(Q,q,W,se,Ee)}if(ht(se)||$(se))return Q=Q.get(W)||null,ie(q,Q,se,Ee,null);if(typeof se.then=="function")return ee(Q,q,W,Uu(se),Ee);if(se.$$typeof===L)return ee(Q,q,W,Su(q,se),Ee);Vu(q,se)}return null}function De(Q,q,W,se){for(var Ee=null,He=null,Se=q,ke=q=0,rn=null;Se!==null&&ke<W.length;ke++){Se.index>ke?(rn=Se,Se=null):rn=Se.sibling;var at=J(Q,Se,W[ke],se);if(at===null){Se===null&&(Se=rn);break}n&&Se&&at.alternate===null&&i(Q,Se),q=g(at,q,ke),He===null?Ee=at:He.sibling=at,He=at,Se=rn}if(ke===W.length)return o(Q,Se),it&&Wi(Q,ke),Ee;if(Se===null){for(;ke<W.length;ke++)Se=le(Q,W[ke],se),Se!==null&&(q=g(Se,q,ke),He===null?Ee=Se:He.sibling=Se,He=Se);return it&&Wi(Q,ke),Ee}for(Se=c(Se);ke<W.length;ke++)rn=ee(Se,Q,ke,W[ke],se),rn!==null&&(n&&rn.alternate!==null&&Se.delete(rn.key===null?ke:rn.key),q=g(rn,q,ke),He===null?Ee=rn:He.sibling=rn,He=rn);return n&&Se.forEach(function(oi){return i(Q,oi)}),it&&Wi(Q,ke),Ee}function Re(Q,q,W,se){if(W==null)throw Error(r(151));for(var Ee=null,He=null,Se=q,ke=q=0,rn=null,at=W.next();Se!==null&&!at.done;ke++,at=W.next()){Se.index>ke?(rn=Se,Se=null):rn=Se.sibling;var oi=J(Q,Se,at.value,se);if(oi===null){Se===null&&(Se=rn);break}n&&Se&&oi.alternate===null&&i(Q,Se),q=g(oi,q,ke),He===null?Ee=oi:He.sibling=oi,He=oi,Se=rn}if(at.done)return o(Q,Se),it&&Wi(Q,ke),Ee;if(Se===null){for(;!at.done;ke++,at=W.next())at=le(Q,at.value,se),at!==null&&(q=g(at,q,ke),He===null?Ee=at:He.sibling=at,He=at);return it&&Wi(Q,ke),Ee}for(Se=c(Se);!at.done;ke++,at=W.next())at=ee(Se,Q,ke,at.value,se),at!==null&&(n&&at.alternate!==null&&Se.delete(at.key===null?ke:at.key),q=g(at,q,ke),He===null?Ee=at:He.sibling=at,He=at);return n&&Se.forEach(function(sA){return i(Q,sA)}),it&&Wi(Q,ke),Ee}function pt(Q,q,W,se){if(typeof W=="object"&&W!==null&&W.type===k&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case T:e:{for(var Ee=W.key;q!==null;){if(q.key===Ee){if(Ee=W.type,Ee===k){if(q.tag===7){o(Q,q.sibling),se=f(q,W.props.children),se.return=Q,Q=se;break e}}else if(q.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===N&&Mv(Ee)===q.type){o(Q,q.sibling),se=f(q,W.props),Ol(se,W),se.return=Q,Q=se;break e}o(Q,q);break}else i(Q,q);q=q.sibling}W.type===k?(se=Qi(W.props.children,Q.mode,se,W.key),se.return=Q,Q=se):(se=wu(W.type,W.key,W.props,null,Q.mode,se),Ol(se,W),se.return=Q,Q=se)}return E(Q);case A:e:{for(Ee=W.key;q!==null;){if(q.key===Ee)if(q.tag===4&&q.stateNode.containerInfo===W.containerInfo&&q.stateNode.implementation===W.implementation){o(Q,q.sibling),se=f(q,W.children||[]),se.return=Q,Q=se;break e}else{o(Q,q);break}else i(Q,q);q=q.sibling}se=af(W,Q.mode,se),se.return=Q,Q=se}return E(Q);case N:return Ee=W._init,W=Ee(W._payload),pt(Q,q,W,se)}if(ht(W))return De(Q,q,W,se);if($(W)){if(Ee=$(W),typeof Ee!="function")throw Error(r(150));return W=Ee.call(W),Re(Q,q,W,se)}if(typeof W.then=="function")return pt(Q,q,Uu(W),se);if(W.$$typeof===L)return pt(Q,q,Su(Q,W),se);Vu(Q,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,q!==null&&q.tag===6?(o(Q,q.sibling),se=f(q,W),se.return=Q,Q=se):(o(Q,q),se=rf(W,Q.mode,se),se.return=Q,Q=se),E(Q)):o(Q,q)}return function(Q,q,W,se){try{Ml=0;var Ee=pt(Q,q,W,se);return to=null,Ee}catch(Se){if(Se===xl||Se===Cu)throw Se;var He=Vn(29,Se,null,Q.mode);return He.lanes=se,He.return=Q,He}finally{}}}var no=Ov(!0),Pv=Ov(!1),tr=he(null),Ir=null;function $a(n){var i=n.alternate;D(Wt,Wt.current&1),D(tr,n),Ir===null&&(i===null||Xs.current!==null||i.memoizedState!==null)&&(Ir=n)}function Uv(n){if(n.tag===22){if(D(Wt,Wt.current),D(tr,n),Ir===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Ir=n)}}else Ka()}function Ka(){D(Wt,Wt.current),D(tr,tr.current)}function ha(n){H(tr),Ir===n&&(Ir=null),H(Wt)}var Wt=he(0);function Lu(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Am(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Vf(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:v({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Lf={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=qn(),f=Fa(c);f.payload=i,o!=null&&(f.callback=o),i=Ha(n,f,c),i!==null&&(Fn(i,n,c),Al(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=qn(),f=Fa(c);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Ha(n,f,c),i!==null&&(Fn(i,n,c),Al(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=qn(),c=Fa(o);c.tag=2,i!=null&&(c.callback=i),i=Ha(n,c,o),i!==null&&(Fn(i,n,o),Al(i,n,o))}};function Vv(n,i,o,c,f,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,E):i.prototype&&i.prototype.isPureReactComponent?!yl(o,c)||!yl(f,g):!0}function Lv(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&Lf.enqueueReplaceState(i,i.state,null)}function rs(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=v({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Bu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Bv(n){Bu(n)}function zv(n){console.error(n)}function qv(n){Bu(n)}function zu(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Fv(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Bf(n,i,o){return o=Fa(o),o.tag=3,o.payload={element:null},o.callback=function(){zu(n,i)},o}function Hv(n){return n=Fa(n),n.tag=3,n}function Gv(n,i,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;n.payload=function(){return f(g)},n.callback=function(){Fv(i,o,c)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Fv(i,o,c),typeof f!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function sC(n,i,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&El(i,o,f,!0),o=tr.current,o!==null){switch(o.tag){case 13:return Ir===null?um():o.alternate===null&&It===0&&(It=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===pf?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),dm(n,c,f)),!1;case 22:return o.flags|=65536,c===pf?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),dm(n,c,f)),!1}throw Error(r(435,o.tag))}return dm(n,c,f),um(),!1}if(it)return i=tr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==lf&&(n=Error(r(422),{cause:c}),bl(Xn(n,o)))):(c!==lf&&(i=Error(r(423),{cause:c}),bl(Xn(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Xn(c,o),f=Bf(n.stateNode,c,f),vf(n,f),It!==4&&(It=2)),!1;var g=Error(r(520),{cause:c});if(g=Xn(g,o),ql===null?ql=[g]:ql.push(g),It!==4&&(It=2),i===null)return!0;c=Xn(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Bf(o.stateNode,c,n),vf(o,n),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ja===null||!Ja.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Hv(f),Gv(f,n,o,c),vf(o,f),!1}o=o.return}while(o!==null);return!1}var $v=Error(r(461)),tn=!1;function ln(n,i,o,c){i.child=n===null?Pv(i,null,o,c):no(i,n.child,o,c)}function Kv(n,i,o,c,f){o=o.render;var g=i.ref;if("ref"in c){var E={};for(var S in c)S!=="ref"&&(E[S]=c[S])}else E=c;return es(i),c=Tf(n,i,o,E,g,f),S=Sf(),n!==null&&!tn?(xf(n,i,f),da(n,i,f)):(it&&S&&sf(i),i.flags|=1,ln(n,i,c,f),i.child)}function Qv(n,i,o,c,f){if(n===null){var g=o.type;return typeof g=="function"&&!nf(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,Yv(n,i,g,c,f)):(n=wu(o.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!Qf(n,f)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:yl,o(E,c)&&n.ref===i.ref)return da(n,i,f)}return i.flags|=1,n=ia(g,c),n.ref=i.ref,n.return=i,i.child=n}function Yv(n,i,o,c,f){if(n!==null){var g=n.memoizedProps;if(yl(g,c)&&n.ref===i.ref)if(tn=!1,i.pendingProps=c=g,Qf(n,f))(n.flags&131072)!==0&&(tn=!0);else return i.lanes=n.lanes,da(n,i,f)}return zf(n,i,o,c,f)}function Wv(n,i,o){var c=i.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=g!==null?g.baseLanes|o:o,n!==null){for(f=i.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;i.childLanes=g&~c}else i.childLanes=0,i.child=null;return Xv(n,i,c,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&xu(i,g!==null?g.cachePool:null),g!==null?Yy(i,g):wf(),Uv(i);else return i.lanes=i.childLanes=536870912,Xv(n,i,g!==null?g.baseLanes|o:o,o)}else g!==null?(xu(i,g.cachePool),Yy(i,g),Ka(),i.memoizedState=null):(n!==null&&xu(i,null),wf(),Ka());return ln(n,i,f,o),i.child}function Xv(n,i,o,c){var f=mf();return f=f===null?null:{parent:Yt._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},n!==null&&xu(i,null),wf(),Uv(i),n!==null&&El(n,i,c,!0),null}function qu(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function zf(n,i,o,c,f){return es(i),o=Tf(n,i,o,c,void 0,f),c=Sf(),n!==null&&!tn?(xf(n,i,f),da(n,i,f)):(it&&c&&sf(i),i.flags|=1,ln(n,i,o,f),i.child)}function Zv(n,i,o,c,f,g){return es(i),i.updateQueue=null,o=Xy(i,c,o,f),Wy(n),c=Sf(),n!==null&&!tn?(xf(n,i,g),da(n,i,g)):(it&&c&&sf(i),i.flags|=1,ln(n,i,o,g),i.child)}function Jv(n,i,o,c,f){if(es(i),i.stateNode===null){var g=$s,E=o.contextType;typeof E=="object"&&E!==null&&(g=gn(E)),g=new o(c,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Lf,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=c,g.state=i.memoizedState,g.refs={},gf(i),E=o.contextType,g.context=typeof E=="object"&&E!==null?gn(E):$s,g.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Vf(i,o,E,c),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&Lf.enqueueReplaceState(g,g.state,null),kl(i,c,g,f),Rl(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){g=i.stateNode;var S=i.memoizedProps,M=rs(o,S);g.props=M;var X=g.context,ie=o.contextType;E=$s,typeof ie=="object"&&ie!==null&&(E=gn(ie));var le=o.getDerivedStateFromProps;ie=typeof le=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,ie||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||X!==E)&&Lv(i,g,c,E),qa=!1;var J=i.memoizedState;g.state=J,kl(i,c,g,f),Rl(),X=i.memoizedState,S||J!==X||qa?(typeof le=="function"&&(Vf(i,o,le,c),X=i.memoizedState),(M=qa||Vv(i,o,M,c,J,X,E))?(ie||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=X),g.props=c,g.state=X,g.context=E,c=M):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{g=i.stateNode,yf(n,i),E=i.memoizedProps,ie=rs(o,E),g.props=ie,le=i.pendingProps,J=g.context,X=o.contextType,M=$s,typeof X=="object"&&X!==null&&(M=gn(X)),S=o.getDerivedStateFromProps,(X=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==le||J!==M)&&Lv(i,g,c,M),qa=!1,J=i.memoizedState,g.state=J,kl(i,c,g,f),Rl();var ee=i.memoizedState;E!==le||J!==ee||qa||n!==null&&n.dependencies!==null&&Tu(n.dependencies)?(typeof S=="function"&&(Vf(i,o,S,c),ee=i.memoizedState),(ie=qa||Vv(i,o,ie,c,J,ee,M)||n!==null&&n.dependencies!==null&&Tu(n.dependencies))?(X||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,ee,M),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,ee,M)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ee),g.props=c,g.state=ee,g.context=M,c=ie):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(i.flags|=1024),c=!1)}return g=c,qu(n,i),c=(i.flags&128)!==0,g||c?(g=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&c?(i.child=no(i,n.child,null,f),i.child=no(i,null,o,f)):ln(n,i,o,f),i.memoizedState=g.state,n=i.child):n=da(n,i,f),n}function e_(n,i,o,c){return wl(),i.flags|=256,ln(n,i,o,c),i.child}var qf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ff(n){return{baseLanes:n,cachePool:zy()}}function Hf(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=nr),n}function t_(n,i,o){var c=i.pendingProps,f=!1,g=(i.flags&128)!==0,E;if((E=g)||(E=n!==null&&n.memoizedState===null?!1:(Wt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,n===null){if(it){if(f?$a(i):Ka(),it){var S=kt,M;if(M=S){e:{for(M=S,S=kr;M.nodeType!==8;){if(!S){S=null;break e}if(M=hr(M.nextSibling),M===null){S=null;break e}}S=M}S!==null?(i.memoizedState={dehydrated:S,treeContext:Yi!==null?{id:sa,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},M=Vn(18,null,null,0),M.stateNode=S,M.return=i,i.child=M,Cn=i,kt=null,M=!0):M=!1}M||Zi(i)}if(S=i.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Am(S)?i.lanes=32:i.lanes=536870912,null;ha(i)}return S=c.children,c=c.fallback,f?(Ka(),f=i.mode,S=Fu({mode:"hidden",children:S},f),c=Qi(c,f,o,null),S.return=i,c.return=i,S.sibling=c,i.child=S,f=i.child,f.memoizedState=Ff(o),f.childLanes=Hf(n,E,o),i.memoizedState=qf,c):($a(i),Gf(i,S))}if(M=n.memoizedState,M!==null&&(S=M.dehydrated,S!==null)){if(g)i.flags&256?($a(i),i.flags&=-257,i=$f(n,i,o)):i.memoizedState!==null?(Ka(),i.child=n.child,i.flags|=128,i=null):(Ka(),f=c.fallback,S=i.mode,c=Fu({mode:"visible",children:c.children},S),f=Qi(f,S,o,null),f.flags|=2,c.return=i,f.return=i,c.sibling=f,i.child=c,no(i,n.child,null,o),c=i.child,c.memoizedState=Ff(o),c.childLanes=Hf(n,E,o),i.memoizedState=qf,i=f);else if($a(i),Am(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var X=E.dgst;E=X,c=Error(r(419)),c.stack="",c.digest=E,bl({value:c,source:null,stack:null}),i=$f(n,i,o)}else if(tn||El(n,i,o,!1),E=(o&n.childLanes)!==0,tn||E){if(E=vt,E!==null&&(c=o&-o,c=(c&42)!==0?1:Ma(c),c=(c&(E.suspendedLanes|o))!==0?0:c,c!==0&&c!==M.retryLane))throw M.retryLane=c,Gs(n,c),Fn(E,n,c),$v;S.data==="$?"||um(),i=$f(n,i,o)}else S.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=M.treeContext,kt=hr(S.nextSibling),Cn=i,it=!0,Xi=null,kr=!1,n!==null&&(Jn[er++]=sa,Jn[er++]=oa,Jn[er++]=Yi,sa=n.id,oa=n.overflow,Yi=i),i=Gf(i,c.children),i.flags|=4096);return i}return f?(Ka(),f=c.fallback,S=i.mode,M=n.child,X=M.sibling,c=ia(M,{mode:"hidden",children:c.children}),c.subtreeFlags=M.subtreeFlags&65011712,X!==null?f=ia(X,f):(f=Qi(f,S,o,null),f.flags|=2),f.return=i,c.return=i,c.sibling=f,i.child=c,c=f,f=i.child,S=n.child.memoizedState,S===null?S=Ff(o):(M=S.cachePool,M!==null?(X=Yt._currentValue,M=M.parent!==X?{parent:X,pool:X}:M):M=zy(),S={baseLanes:S.baseLanes|o,cachePool:M}),f.memoizedState=S,f.childLanes=Hf(n,E,o),i.memoizedState=qf,c):($a(i),o=n.child,n=o.sibling,o=ia(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(E=i.deletions,E===null?(i.deletions=[n],i.flags|=16):E.push(n)),i.child=o,i.memoizedState=null,o)}function Gf(n,i){return i=Fu({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Fu(n,i){return n=Vn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function $f(n,i,o){return no(i,n.child,null,o),n=Gf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function n_(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),uf(n.return,i,o)}function Kf(n,i,o,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=f)}function r_(n,i,o){var c=i.pendingProps,f=c.revealOrder,g=c.tail;if(ln(n,i,c.children,o),c=Wt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&n_(n,o,i);else if(n.tag===19)n_(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(D(Wt,c),f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&Lu(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Kf(i,!1,f,o,g);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Lu(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Kf(i,!0,o,null,g);break;case"together":Kf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function da(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Za|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(El(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=ia(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=ia(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Qf(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Tu(n)))}function oC(n,i,o){switch(i.tag){case 3:te(i,i.stateNode.containerInfo),za(i,Yt,n.memoizedState.cache),wl();break;case 27:case 5:Fe(i);break;case 4:te(i,i.stateNode.containerInfo);break;case 10:za(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?($a(i),i.flags|=128,null):(o&i.child.childLanes)!==0?t_(n,i,o):($a(i),n=da(n,i,o),n!==null?n.sibling:null);$a(i);break;case 19:var f=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(El(n,i,o,!1),c=(o&i.childLanes)!==0),f){if(c)return r_(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),D(Wt,Wt.current),c)break;return null;case 22:case 23:return i.lanes=0,Wv(n,i,o);case 24:za(i,Yt,n.memoizedState.cache)}return da(n,i,o)}function a_(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)tn=!0;else{if(!Qf(n,o)&&(i.flags&128)===0)return tn=!1,oC(n,i,o);tn=(n.flags&131072)!==0}else tn=!1,it&&(i.flags&1048576)!==0&&My(i,Eu,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var c=i.elementType,f=c._init;if(c=f(c._payload),i.type=c,typeof c=="function")nf(c)?(n=rs(c,n),i.tag=1,i=Jv(null,i,c,n,o)):(i.tag=0,i=zf(null,i,c,n,o));else{if(c!=null){if(f=c.$$typeof,f===ne){i.tag=11,i=Kv(null,i,c,n,o);break e}else if(f===O){i.tag=14,i=Qv(null,i,c,n,o);break e}}throw i=Tt(c)||c,Error(r(306,i,""))}}return i;case 0:return zf(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,f=rs(c,i.pendingProps),Jv(n,i,c,f,o);case 3:e:{if(te(i,i.stateNode.containerInfo),n===null)throw Error(r(387));c=i.pendingProps;var g=i.memoizedState;f=g.element,yf(n,i),kl(i,c,null,o);var E=i.memoizedState;if(c=E.cache,za(i,Yt,c),c!==g.cache&&hf(i,[Yt],o,!0),Rl(),c=E.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=e_(n,i,c,o);break e}else if(c!==f){f=Xn(Error(r(424)),i),bl(f),i=e_(n,i,c,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(kt=hr(n.firstChild),Cn=i,it=!0,Xi=null,kr=!0,o=Pv(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(wl(),c===f){i=da(n,i,o);break e}ln(n,i,c,o)}i=i.child}return i;case 26:return qu(n,i),n===null?(o=l0(i.type,null,i.pendingProps,null))?i.memoizedState=o:it||(o=i.type,n=i.pendingProps,c=rh(V.current).createElement(o),c[$t]=i,c[Lt]=n,un(c,o,n),Ot(c),i.stateNode=c):i.memoizedState=l0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Fe(i),n===null&&it&&(c=i.stateNode=i0(i.type,i.pendingProps,V.current),Cn=i,kr=!0,f=kt,ni(i.type)?(Rm=f,kt=hr(c.firstChild)):kt=f),ln(n,i,i.pendingProps.children,o),qu(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&it&&((f=c=kt)&&(c=OC(c,i.type,i.pendingProps,kr),c!==null?(i.stateNode=c,Cn=i,kt=hr(c.firstChild),kr=!1,f=!0):f=!1),f||Zi(i)),Fe(i),f=i.type,g=i.pendingProps,E=n!==null?n.memoizedProps:null,c=g.children,Sm(f,g)?c=null:E!==null&&Sm(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=Tf(n,i,Jx,null,null,o),Xl._currentValue=f),qu(n,i),ln(n,i,c,o),i.child;case 6:return n===null&&it&&((n=o=kt)&&(o=PC(o,i.pendingProps,kr),o!==null?(i.stateNode=o,Cn=i,kt=null,n=!0):n=!1),n||Zi(i)),null;case 13:return t_(n,i,o);case 4:return te(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=no(i,null,c,o):ln(n,i,c,o),i.child;case 11:return Kv(n,i,i.type,i.pendingProps,o);case 7:return ln(n,i,i.pendingProps,o),i.child;case 8:return ln(n,i,i.pendingProps.children,o),i.child;case 12:return ln(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,za(i,i.type,c.value),ln(n,i,c.children,o),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,es(i),f=gn(f),c=c(f),i.flags|=1,ln(n,i,c,o),i.child;case 14:return Qv(n,i,i.type,i.pendingProps,o);case 15:return Yv(n,i,i.type,i.pendingProps,o);case 19:return r_(n,i,o);case 31:return c=i.pendingProps,o=i.mode,c={mode:c.mode,children:c.children},n===null?(o=Fu(c,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=ia(n.child,c),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return Wv(n,i,o);case 24:return es(i),c=gn(Yt),n===null?(f=mf(),f===null&&(f=vt,g=df(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),i.memoizedState={parent:c,cache:f},gf(i),za(i,Yt,f)):((n.lanes&o)!==0&&(yf(n,i),kl(i,null,null,o),Rl()),f=n.memoizedState,g=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),za(i,Yt,c)):(c=g.cache,za(i,Yt,c),c!==f.cache&&hf(i,[Yt],o,!0))),ln(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function fa(n){n.flags|=4}function i_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!f0(i)){if(i=tr.current,i!==null&&((et&4194048)===et?Ir!==null:(et&62914560)!==et&&(et&536870912)===0||i!==Ir))throw Cl=pf,qy;n.flags|=8192}}function Hu(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Jo():536870912,n.lanes|=i,so|=i)}function Pl(n,i){if(!it)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ct(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function lC(n,i,o){var c=i.pendingProps;switch(of(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(i),null;case 1:return Ct(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),ca(Yt),Ae(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(_l(i)?fa(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Uy())),Ct(i),null;case 26:return o=i.memoizedState,n===null?(fa(i),o!==null?(Ct(i),i_(i,o)):(Ct(i),i.flags&=-16777217)):o?o!==n.memoizedState?(fa(i),Ct(i),i_(i,o)):(Ct(i),i.flags&=-16777217):(n.memoizedProps!==c&&fa(i),Ct(i),i.flags&=-16777217),null;case 27:ge(i),o=V.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==c&&fa(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return Ct(i),null}n=K.current,_l(i)?Oy(i):(n=i0(f,c,o),i.stateNode=n,fa(i))}return Ct(i),null;case 5:if(ge(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&fa(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return Ct(i),null}if(n=K.current,_l(i))Oy(i);else{switch(f=rh(V.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?f.createElement(o,{is:c.is}):f.createElement(o)}}n[$t]=i,n[Lt]=c;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(un(n,o,c),o){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&fa(i)}}return Ct(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&fa(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(n=V.current,_l(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,f=Cn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[$t]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Z_(n.nodeValue,o)),n||Zi(i)}else n=rh(n).createTextNode(c),n[$t]=i,i.stateNode=n}return Ct(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=_l(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[$t]=i}else wl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ct(i),f=!1}else f=Uy(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(ha(i),i):(ha(i),null)}if(ha(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=c!==null,n=n!==null&&n.memoizedState!==null,o){c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),Hu(i,i.updateQueue),Ct(i),null;case 4:return Ae(),n===null&&_m(i.stateNode.containerInfo),Ct(i),null;case 10:return ca(i.type),Ct(i),null;case 19:if(H(Wt),f=i.memoizedState,f===null)return Ct(i),null;if(c=(i.flags&128)!==0,g=f.rendering,g===null)if(c)Pl(f,!1);else{if(It!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=Lu(n),g!==null){for(i.flags|=128,Pl(f,!1),n=g.updateQueue,i.updateQueue=n,Hu(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)jy(o,n),o=o.sibling;return D(Wt,Wt.current&1|2),i.child}n=n.sibling}f.tail!==null&&Me()>Ku&&(i.flags|=128,c=!0,Pl(f,!1),i.lanes=4194304)}else{if(!c)if(n=Lu(g),n!==null){if(i.flags|=128,c=!0,n=n.updateQueue,i.updateQueue=n,Hu(i,n),Pl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!it)return Ct(i),null}else 2*Me()-f.renderingStartTime>Ku&&o!==536870912&&(i.flags|=128,c=!0,Pl(f,!1),i.lanes=4194304);f.isBackwards?(g.sibling=i.child,i.child=g):(n=f.last,n!==null?n.sibling=g:i.child=g,f.last=g)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Me(),i.sibling=null,n=Wt.current,D(Wt,c?n&1|2:n&1),i):(Ct(i),null);case 22:case 23:return ha(i),bf(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(Ct(i),i.subtreeFlags&6&&(i.flags|=8192)):Ct(i),o=i.updateQueue,o!==null&&Hu(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&H(ts),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ca(Yt),Ct(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function cC(n,i){switch(of(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ca(Yt),Ae(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return ge(i),null;case 13:if(ha(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));wl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return H(Wt),null;case 4:return Ae(),null;case 10:return ca(i.type),null;case 22:case 23:return ha(i),bf(),n!==null&&H(ts),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ca(Yt),null;case 25:return null;default:return null}}function s_(n,i){switch(of(i),i.tag){case 3:ca(Yt),Ae();break;case 26:case 27:case 5:ge(i);break;case 4:Ae();break;case 13:ha(i);break;case 19:H(Wt);break;case 10:ca(i.type);break;case 22:case 23:ha(i),bf(),n!==null&&H(ts);break;case 24:ca(Yt)}}function Ul(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var g=o.create,E=o.inst;c=g(),E.destroy=c}o=o.next}while(o!==f)}}catch(S){yt(i,i.return,S)}}function Qa(n,i,o){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&n)===n){var E=c.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,f=i;var M=o,X=S;try{X()}catch(ie){yt(f,M,ie)}}}c=c.next}while(c!==g)}}catch(ie){yt(i,i.return,ie)}}function o_(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{Qy(i,o)}catch(c){yt(n,n.return,c)}}}function l_(n,i,o){o.props=rs(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){yt(n,i,c)}}function Vl(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){yt(n,i,f)}}function Nr(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){yt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){yt(n,i,f)}else o.current=null}function c_(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){yt(n,n.return,f)}}function Yf(n,i,o){try{var c=n.stateNode;IC(c,n.type,o,i),c[Lt]=i}catch(f){yt(n,n.return,f)}}function u_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ni(n.type)||n.tag===4}function Wf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||u_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ni(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Xf(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=nh));else if(c!==4&&(c===27&&ni(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Xf(n,i,o),n=n.sibling;n!==null;)Xf(n,i,o),n=n.sibling}function Gu(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&ni(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Gu(n,i,o),n=n.sibling;n!==null;)Gu(n,i,o),n=n.sibling}function h_(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);un(i,c,o),i[$t]=n,i[Lt]=o}catch(g){yt(n,n.return,g)}}var ma=!1,Ut=!1,Zf=!1,d_=typeof WeakSet=="function"?WeakSet:Set,nn=null;function uC(n,i){if(n=n.containerInfo,Em=ch,n=Ty(n),Yd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,S=-1,M=-1,X=0,ie=0,le=n,J=null;t:for(;;){for(var ee;le!==o||f!==0&&le.nodeType!==3||(S=E+f),le!==g||c!==0&&le.nodeType!==3||(M=E+c),le.nodeType===3&&(E+=le.nodeValue.length),(ee=le.firstChild)!==null;)J=le,le=ee;for(;;){if(le===n)break t;if(J===o&&++X===f&&(S=E),J===g&&++ie===c&&(M=E),(ee=le.nextSibling)!==null)break;le=J,J=le.parentNode}le=ee}o=S===-1||M===-1?null:{start:S,end:M}}else o=null}o=o||{start:0,end:0}}else o=null;for(Tm={focusedElem:n,selectionRange:o},ch=!1,nn=i;nn!==null;)if(i=nn,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,nn=n;else for(;nn!==null;){switch(i=nn,g=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=i,f=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var De=rs(o.type,f,o.elementType===o.type);n=c.getSnapshotBeforeUpdate(De,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(Re){yt(o,o.return,Re)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Cm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Cm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,nn=n;break}nn=i.return}}function f_(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ya(n,o),c&4&&Ul(5,o);break;case 1:if(Ya(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(E){yt(o,o.return,E)}else{var f=rs(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(E){yt(o,o.return,E)}}c&64&&o_(o),c&512&&Vl(o,o.return);break;case 3:if(Ya(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Qy(n,i)}catch(E){yt(o,o.return,E)}}break;case 27:i===null&&c&4&&h_(o);case 26:case 5:Ya(n,o),i===null&&c&4&&c_(o),c&512&&Vl(o,o.return);break;case 12:Ya(n,o);break;case 13:Ya(n,o),c&4&&g_(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=_C.bind(null,o),UC(n,o))));break;case 22:if(c=o.memoizedState!==null||ma,!c){i=i!==null&&i.memoizedState!==null||Ut,f=ma;var g=Ut;ma=c,(Ut=i)&&!g?Wa(n,o,(o.subtreeFlags&8772)!==0):Ya(n,o),ma=f,Ut=g}break;case 30:break;default:Ya(n,o)}}function m_(n){var i=n.alternate;i!==null&&(n.alternate=null,m_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ua(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Et=null,Nn=!1;function pa(n,i,o){for(o=o.child;o!==null;)p_(n,i,o),o=o.sibling}function p_(n,i,o){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(gt,o)}catch{}switch(o.tag){case 26:Ut||Nr(o,i),pa(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ut||Nr(o,i);var c=Et,f=Nn;ni(o.type)&&(Et=o.stateNode,Nn=!1),pa(n,i,o),Kl(o.stateNode),Et=c,Nn=f;break;case 5:Ut||Nr(o,i);case 6:if(c=Et,f=Nn,Et=null,pa(n,i,o),Et=c,Nn=f,Et!==null)if(Nn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(o.stateNode)}catch(g){yt(o,i,g)}else try{Et.removeChild(o.stateNode)}catch(g){yt(o,i,g)}break;case 18:Et!==null&&(Nn?(n=Et,r0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),tc(n)):r0(Et,o.stateNode));break;case 4:c=Et,f=Nn,Et=o.stateNode.containerInfo,Nn=!0,pa(n,i,o),Et=c,Nn=f;break;case 0:case 11:case 14:case 15:Ut||Qa(2,o,i),Ut||Qa(4,o,i),pa(n,i,o);break;case 1:Ut||(Nr(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&l_(o,i,c)),pa(n,i,o);break;case 21:pa(n,i,o);break;case 22:Ut=(c=Ut)||o.memoizedState!==null,pa(n,i,o),Ut=c;break;default:pa(n,i,o)}}function g_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{tc(n)}catch(o){yt(i,i.return,o)}}function hC(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new d_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new d_),i;default:throw Error(r(435,n.tag))}}function Jf(n,i){var o=hC(n);i.forEach(function(c){var f=wC.bind(null,n,c);o.has(c)||(o.add(c),c.then(f,f))})}function Ln(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],g=n,E=i,S=E;e:for(;S!==null;){switch(S.tag){case 27:if(ni(S.type)){Et=S.stateNode,Nn=!1;break e}break;case 5:Et=S.stateNode,Nn=!1;break e;case 3:case 4:Et=S.stateNode.containerInfo,Nn=!0;break e}S=S.return}if(Et===null)throw Error(r(160));p_(g,E,f),Et=null,Nn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)y_(i,n),i=i.sibling}var ur=null;function y_(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ln(i,n),Bn(n),c&4&&(Qa(3,n,n.return),Ul(3,n),Qa(5,n,n.return));break;case 1:Ln(i,n),Bn(n),c&512&&(Ut||o===null||Nr(o,o.return)),c&64&&ma&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=ur;if(Ln(i,n),Bn(n),c&512&&(Ut||o===null||Nr(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Di]||g[$t]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),un(g,c,o),g[$t]=n,Ot(g),c=g;break e;case"link":var E=h0("link","href",f).get(c+(o.href||""));if(E){for(var S=0;S<E.length;S++)if(g=E[S],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(S,1);break t}}g=f.createElement(c),un(g,c,o),f.head.appendChild(g);break;case"meta":if(E=h0("meta","content",f).get(c+(o.content||""))){for(S=0;S<E.length;S++)if(g=E[S],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(S,1);break t}}g=f.createElement(c),un(g,c,o),f.head.appendChild(g);break;default:throw Error(r(468,c))}g[$t]=n,Ot(g),c=g}n.stateNode=c}else d0(f,n.type,n.stateNode);else n.stateNode=u0(f,c,n.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?d0(f,n.type,n.stateNode):u0(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Yf(n,n.memoizedProps,o.memoizedProps)}break;case 27:Ln(i,n),Bn(n),c&512&&(Ut||o===null||Nr(o,o.return)),o!==null&&c&4&&Yf(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Ln(i,n),Bn(n),c&512&&(Ut||o===null||Nr(o,o.return)),n.flags&32){f=n.stateNode;try{Kn(f,"")}catch(ee){yt(n,n.return,ee)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Yf(n,f,o!==null?o.memoizedProps:f)),c&1024&&(Zf=!0);break;case 6:if(Ln(i,n),Bn(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(ee){yt(n,n.return,ee)}}break;case 3:if(sh=null,f=ur,ur=ah(i.containerInfo),Ln(i,n),ur=f,Bn(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{tc(i.containerInfo)}catch(ee){yt(n,n.return,ee)}Zf&&(Zf=!1,v_(n));break;case 4:c=ur,ur=ah(n.stateNode.containerInfo),Ln(i,n),Bn(n),ur=c;break;case 12:Ln(i,n),Bn(n);break;case 13:Ln(i,n),Bn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(im=Me()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Jf(n,c)));break;case 22:f=n.memoizedState!==null;var M=o!==null&&o.memoizedState!==null,X=ma,ie=Ut;if(ma=X||f,Ut=ie||M,Ln(i,n),Ut=ie,ma=X,Bn(n),c&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||M||ma||Ut||as(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){M=o=i;try{if(g=M.stateNode,f)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=M.stateNode;var le=M.memoizedProps.style,J=le!=null&&le.hasOwnProperty("display")?le.display:null;S.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ee){yt(M,M.return,ee)}}}else if(i.tag===6){if(o===null){M=i;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(ee){yt(M,M.return,ee)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Jf(n,o))));break;case 19:Ln(i,n),Bn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Jf(n,c)));break;case 30:break;case 21:break;default:Ln(i,n),Bn(n)}}function Bn(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if(u_(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,g=Wf(n);Gu(n,g,f);break;case 5:var E=o.stateNode;o.flags&32&&(Kn(E,""),o.flags&=-33);var S=Wf(n);Gu(n,S,E);break;case 3:case 4:var M=o.stateNode.containerInfo,X=Wf(n);Xf(n,X,M);break;default:throw Error(r(161))}}catch(ie){yt(n,n.return,ie)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function v_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;v_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Ya(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)f_(n,i.alternate,i),i=i.sibling}function as(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Qa(4,i,i.return),as(i);break;case 1:Nr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&l_(i,i.return,o),as(i);break;case 27:Kl(i.stateNode);case 26:case 5:Nr(i,i.return),as(i);break;case 22:i.memoizedState===null&&as(i);break;case 30:as(i);break;default:as(i)}n=n.sibling}}function Wa(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,g=i,E=g.flags;switch(g.tag){case 0:case 11:case 15:Wa(f,g,o),Ul(4,g);break;case 1:if(Wa(f,g,o),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(X){yt(c,c.return,X)}if(c=g,f=c.updateQueue,f!==null){var S=c.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)Ky(M[f],S)}catch(X){yt(c,c.return,X)}}o&&E&64&&o_(g),Vl(g,g.return);break;case 27:h_(g);case 26:case 5:Wa(f,g,o),o&&c===null&&E&4&&c_(g),Vl(g,g.return);break;case 12:Wa(f,g,o);break;case 13:Wa(f,g,o),o&&E&4&&g_(f,g);break;case 22:g.memoizedState===null&&Wa(f,g,o),Vl(g,g.return);break;case 30:break;default:Wa(f,g,o)}i=i.sibling}}function em(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Tl(o))}function tm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Tl(n))}function Dr(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)__(n,i,o,c),i=i.sibling}function __(n,i,o,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Dr(n,i,o,c),f&2048&&Ul(9,i);break;case 1:Dr(n,i,o,c);break;case 3:Dr(n,i,o,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Tl(n)));break;case 12:if(f&2048){Dr(n,i,o,c),n=i.stateNode;try{var g=i.memoizedProps,E=g.id,S=g.onPostCommit;typeof S=="function"&&S(E,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(M){yt(i,i.return,M)}}else Dr(n,i,o,c);break;case 13:Dr(n,i,o,c);break;case 23:break;case 22:g=i.stateNode,E=i.alternate,i.memoizedState!==null?g._visibility&2?Dr(n,i,o,c):Ll(n,i):g._visibility&2?Dr(n,i,o,c):(g._visibility|=2,ro(n,i,o,c,(i.subtreeFlags&10256)!==0)),f&2048&&em(E,i);break;case 24:Dr(n,i,o,c),f&2048&&tm(i.alternate,i);break;default:Dr(n,i,o,c)}}function ro(n,i,o,c,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=n,E=i,S=o,M=c,X=E.flags;switch(E.tag){case 0:case 11:case 15:ro(g,E,S,M,f),Ul(8,E);break;case 23:break;case 22:var ie=E.stateNode;E.memoizedState!==null?ie._visibility&2?ro(g,E,S,M,f):Ll(g,E):(ie._visibility|=2,ro(g,E,S,M,f)),f&&X&2048&&em(E.alternate,E);break;case 24:ro(g,E,S,M,f),f&&X&2048&&tm(E.alternate,E);break;default:ro(g,E,S,M,f)}i=i.sibling}}function Ll(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,f=c.flags;switch(c.tag){case 22:Ll(o,c),f&2048&&em(c.alternate,c);break;case 24:Ll(o,c),f&2048&&tm(c.alternate,c);break;default:Ll(o,c)}i=i.sibling}}var Bl=8192;function ao(n){if(n.subtreeFlags&Bl)for(n=n.child;n!==null;)w_(n),n=n.sibling}function w_(n){switch(n.tag){case 26:ao(n),n.flags&Bl&&n.memoizedState!==null&&WC(ur,n.memoizedState,n.memoizedProps);break;case 5:ao(n);break;case 3:case 4:var i=ur;ur=ah(n.stateNode.containerInfo),ao(n),ur=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Bl,Bl=16777216,ao(n),Bl=i):ao(n));break;default:ao(n)}}function b_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function zl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];nn=c,T_(c,n)}b_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)E_(n),n=n.sibling}function E_(n){switch(n.tag){case 0:case 11:case 15:zl(n),n.flags&2048&&Qa(9,n,n.return);break;case 3:zl(n);break;case 12:zl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,$u(n)):zl(n);break;default:zl(n)}}function $u(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];nn=c,T_(c,n)}b_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Qa(8,i,i.return),$u(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,$u(i));break;default:$u(i)}n=n.sibling}}function T_(n,i){for(;nn!==null;){var o=nn;switch(o.tag){case 0:case 11:case 15:Qa(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Tl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,nn=c;else e:for(o=n;nn!==null;){c=nn;var f=c.sibling,g=c.return;if(m_(c),c===o){nn=null;break e}if(f!==null){f.return=g,nn=f;break e}nn=g}}}var dC={getCacheForType:function(n){var i=gn(Yt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},fC=typeof WeakMap=="function"?WeakMap:Map,lt=0,vt=null,Ge=null,et=0,ct=0,zn=null,Xa=!1,io=!1,nm=!1,ga=0,It=0,Za=0,is=0,rm=0,nr=0,so=0,ql=null,Dn=null,am=!1,im=0,Ku=1/0,Qu=null,Ja=null,cn=0,ei=null,oo=null,lo=0,sm=0,om=null,S_=null,Fl=0,lm=null;function qn(){if((lt&2)!==0&&et!==0)return et&-et;if(ae.T!==null){var n=Ys;return n!==0?n:pm()}return Oa()}function x_(){nr===0&&(nr=(et&536870912)===0||it?Zo():536870912);var n=tr.current;return n!==null&&(n.flags|=32),nr}function Fn(n,i,o){(n===vt&&(ct===2||ct===9)||n.cancelPendingCommit!==null)&&(co(n,0),ti(n,et,nr,!1)),Qr(n,o),((lt&2)===0||n!==vt)&&(n===vt&&((lt&2)===0&&(is|=o),It===4&&ti(n,et,nr,!1)),jr(n))}function C_(n,i,o){if((lt&6)!==0)throw Error(r(327));var c=!o&&(i&124)===0&&(i&n.expiredLanes)===0||Ni(n,i),f=c?gC(n,i):hm(n,i,!0),g=c;do{if(f===0){io&&!c&&ti(n,i,0,!1);break}else{if(o=n.current.alternate,g&&!mC(o)){f=hm(n,i,!1),g=!1;continue}if(f===2){if(g=i,n.errorRecoveryDisabledLanes&g)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var S=n;f=ql;var M=S.current.memoizedState.isDehydrated;if(M&&(co(S,E).flags|=256),E=hm(S,E,!1),E!==2){if(nm&&!M){S.errorRecoveryDisabledLanes|=g,is|=g,f=4;break e}g=Dn,Dn=f,g!==null&&(Dn===null?Dn=g:Dn.push.apply(Dn,g))}f=E}if(g=!1,f!==2)continue}}if(f===1){co(n,0),ti(n,i,0,!0);break}e:{switch(c=n,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:ti(c,i,nr,!Xa);break e;case 2:Dn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=im+300-Me(),10<f)){if(ti(c,i,nr,!Xa),Cs(c,0,!0)!==0)break e;c.timeoutHandle=t0(A_.bind(null,c,o,Dn,Qu,am,i,nr,is,so,Xa,g,2,-0,0),f);break e}A_(c,o,Dn,Qu,am,i,nr,is,so,Xa,g,0,-0,0)}}break}while(!0);jr(n)}function A_(n,i,o,c,f,g,E,S,M,X,ie,le,J,ee){if(n.timeoutHandle=-1,le=i.subtreeFlags,(le&8192||(le&16785408)===16785408)&&(Wl={stylesheets:null,count:0,unsuspend:YC},w_(i),le=XC(),le!==null)){n.cancelPendingCommit=le(M_.bind(null,n,i,g,o,c,f,E,S,M,ie,1,J,ee)),ti(n,g,E,!X);return}M_(n,i,g,o,c,f,E,S,M)}function mC(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],g=f.getSnapshot;f=f.value;try{if(!Un(g(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ti(n,i,o,c){i&=~rm,i&=~is,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var g=31-rt(f),E=1<<g;c[g]=-1,f&=~E}o!==0&&vr(n,o,i)}function Yu(){return(lt&6)===0?(Hl(0),!1):!0}function cm(){if(Ge!==null){if(ct===0)var n=Ge.return;else n=Ge,la=Ji=null,Cf(n),to=null,Ml=0,n=Ge;for(;n!==null;)s_(n.alternate,n),n=n.return;Ge=null}}function co(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,DC(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),cm(),vt=n,Ge=o=ia(n.current,null),et=i,ct=0,zn=null,Xa=!1,io=Ni(n,i),nm=!1,so=nr=rm=is=Za=It=0,Dn=ql=null,am=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-rt(c),g=1<<f;i|=n[f],c&=~g}return ga=i,yu(),o}function R_(n,i){ze=null,ae.H=Pu,i===xl||i===Cu?(i=Gy(),ct=3):i===qy?(i=Gy(),ct=4):ct=i===$v?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,zn=i,Ge===null&&(It=1,zu(n,Xn(i,n.current)))}function k_(){var n=ae.H;return ae.H=Pu,n===null?Pu:n}function I_(){var n=ae.A;return ae.A=dC,n}function um(){It=4,Xa||(et&4194048)!==et&&tr.current!==null||(io=!0),(Za&134217727)===0&&(is&134217727)===0||vt===null||ti(vt,et,nr,!1)}function hm(n,i,o){var c=lt;lt|=2;var f=k_(),g=I_();(vt!==n||et!==i)&&(Qu=null,co(n,i)),i=!1;var E=It;e:do try{if(ct!==0&&Ge!==null){var S=Ge,M=zn;switch(ct){case 8:cm(),E=6;break e;case 3:case 2:case 9:case 6:tr.current===null&&(i=!0);var X=ct;if(ct=0,zn=null,uo(n,S,M,X),o&&io){E=0;break e}break;default:X=ct,ct=0,zn=null,uo(n,S,M,X)}}pC(),E=It;break}catch(ie){R_(n,ie)}while(!0);return i&&n.shellSuspendCounter++,la=Ji=null,lt=c,ae.H=f,ae.A=g,Ge===null&&(vt=null,et=0,yu()),E}function pC(){for(;Ge!==null;)N_(Ge)}function gC(n,i){var o=lt;lt|=2;var c=k_(),f=I_();vt!==n||et!==i?(Qu=null,Ku=Me()+500,co(n,i)):io=Ni(n,i);e:do try{if(ct!==0&&Ge!==null){i=Ge;var g=zn;t:switch(ct){case 1:ct=0,zn=null,uo(n,i,g,1);break;case 2:case 9:if(Fy(g)){ct=0,zn=null,D_(i);break}i=function(){ct!==2&&ct!==9||vt!==n||(ct=7),jr(n)},g.then(i,i);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Fy(g)?(ct=0,zn=null,D_(i)):(ct=0,zn=null,uo(n,i,g,7));break;case 5:var E=null;switch(Ge.tag){case 26:E=Ge.memoizedState;case 5:case 27:var S=Ge;if(!E||f0(E)){ct=0,zn=null;var M=S.sibling;if(M!==null)Ge=M;else{var X=S.return;X!==null?(Ge=X,Wu(X)):Ge=null}break t}}ct=0,zn=null,uo(n,i,g,5);break;case 6:ct=0,zn=null,uo(n,i,g,6);break;case 8:cm(),It=6;break e;default:throw Error(r(462))}}yC();break}catch(ie){R_(n,ie)}while(!0);return la=Ji=null,ae.H=c,ae.A=f,lt=o,Ge!==null?0:(vt=null,et=0,yu(),It)}function yC(){for(;Ge!==null&&!We();)N_(Ge)}function N_(n){var i=a_(n.alternate,n,ga);n.memoizedProps=n.pendingProps,i===null?Wu(n):Ge=i}function D_(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Zv(o,i,i.pendingProps,i.type,void 0,et);break;case 11:i=Zv(o,i,i.pendingProps,i.type.render,i.ref,et);break;case 5:Cf(i);default:s_(o,i),i=Ge=jy(i,ga),i=a_(o,i,ga)}n.memoizedProps=n.pendingProps,i===null?Wu(n):Ge=i}function uo(n,i,o,c){la=Ji=null,Cf(i),to=null,Ml=0;var f=i.return;try{if(sC(n,f,i,o,et)){It=1,zu(n,Xn(o,n.current)),Ge=null;return}}catch(g){if(f!==null)throw Ge=f,g;It=1,zu(n,Xn(o,n.current)),Ge=null;return}i.flags&32768?(it||c===1?n=!0:io||(et&536870912)!==0?n=!1:(Xa=n=!0,(c===2||c===9||c===3||c===6)&&(c=tr.current,c!==null&&c.tag===13&&(c.flags|=16384))),j_(i,n)):Wu(i)}function Wu(n){var i=n;do{if((i.flags&32768)!==0){j_(i,Xa);return}n=i.return;var o=lC(i.alternate,i,ga);if(o!==null){Ge=o;return}if(i=i.sibling,i!==null){Ge=i;return}Ge=i=n}while(i!==null);It===0&&(It=5)}function j_(n,i){do{var o=cC(n.alternate,n);if(o!==null){o.flags&=32767,Ge=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Ge=n;return}Ge=n=o}while(n!==null);It=6,Ge=null}function M_(n,i,o,c,f,g,E,S,M){n.cancelPendingCommit=null;do Xu();while(cn!==0);if((lt&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=ef,el(n,o,g,E,S,M),n===vt&&(Ge=vt=null,et=0),oo=i,ei=n,lo=o,sm=g,om=f,S_=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,bC(nt,function(){return L_(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=ae.T,ae.T=null,f=me.p,me.p=2,E=lt,lt|=4;try{uC(n,i,o)}finally{lt=E,me.p=f,ae.T=c}}cn=1,O_(),P_(),U_()}}function O_(){if(cn===1){cn=0;var n=ei,i=oo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=ae.T,ae.T=null;var c=me.p;me.p=2;var f=lt;lt|=4;try{y_(i,n);var g=Tm,E=Ty(n.containerInfo),S=g.focusedElem,M=g.selectionRange;if(E!==S&&S&&S.ownerDocument&&Ey(S.ownerDocument.documentElement,S)){if(M!==null&&Yd(S)){var X=M.start,ie=M.end;if(ie===void 0&&(ie=X),"selectionStart"in S)S.selectionStart=X,S.selectionEnd=Math.min(ie,S.value.length);else{var le=S.ownerDocument||document,J=le&&le.defaultView||window;if(J.getSelection){var ee=J.getSelection(),De=S.textContent.length,Re=Math.min(M.start,De),pt=M.end===void 0?Re:Math.min(M.end,De);!ee.extend&&Re>pt&&(E=pt,pt=Re,Re=E);var Q=by(S,Re),q=by(S,pt);if(Q&&q&&(ee.rangeCount!==1||ee.anchorNode!==Q.node||ee.anchorOffset!==Q.offset||ee.focusNode!==q.node||ee.focusOffset!==q.offset)){var W=le.createRange();W.setStart(Q.node,Q.offset),ee.removeAllRanges(),Re>pt?(ee.addRange(W),ee.extend(q.node,q.offset)):(W.setEnd(q.node,q.offset),ee.addRange(W))}}}}for(le=[],ee=S;ee=ee.parentNode;)ee.nodeType===1&&le.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<le.length;S++){var se=le[S];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}ch=!!Em,Tm=Em=null}finally{lt=f,me.p=c,ae.T=o}}n.current=i,cn=2}}function P_(){if(cn===2){cn=0;var n=ei,i=oo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=ae.T,ae.T=null;var c=me.p;me.p=2;var f=lt;lt|=4;try{f_(n,i.alternate,i)}finally{lt=f,me.p=c,ae.T=o}}cn=3}}function U_(){if(cn===4||cn===3){cn=0,ye();var n=ei,i=oo,o=lo,c=S_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?cn=5:(cn=0,oo=ei=null,V_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ja=null),As(o),i=i.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(gt,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=ae.T,f=me.p,me.p=2,ae.T=null;try{for(var g=n.onRecoverableError,E=0;E<c.length;E++){var S=c[E];g(S.value,{componentStack:S.stack})}}finally{ae.T=i,me.p=f}}(lo&3)!==0&&Xu(),jr(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===lm?Fl++:(Fl=0,lm=n):Fl=0,Hl(0)}}function V_(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Tl(i)))}function Xu(n){return O_(),P_(),U_(),L_()}function L_(){if(cn!==5)return!1;var n=ei,i=sm;sm=0;var o=As(lo),c=ae.T,f=me.p;try{me.p=32>o?32:o,ae.T=null,o=om,om=null;var g=ei,E=lo;if(cn=0,oo=ei=null,lo=0,(lt&6)!==0)throw Error(r(331));var S=lt;if(lt|=4,E_(g.current),__(g,g.current,E,o),lt=S,Hl(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(gt,g)}catch{}return!0}finally{me.p=f,ae.T=c,V_(n,i)}}function B_(n,i,o){i=Xn(o,i),i=Bf(n.stateNode,i,2),n=Ha(n,i,2),n!==null&&(Qr(n,2),jr(n))}function yt(n,i,o){if(n.tag===3)B_(n,n,o);else for(;i!==null;){if(i.tag===3){B_(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ja===null||!Ja.has(c))){n=Xn(o,n),o=Hv(2),c=Ha(i,o,2),c!==null&&(Gv(o,c,i,n),Qr(c,2),jr(c));break}}i=i.return}}function dm(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new fC;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(o)||(nm=!0,f.add(o),n=vC.bind(null,n,i,o),i.then(n,n))}function vC(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,vt===n&&(et&o)===o&&(It===4||It===3&&(et&62914560)===et&&300>Me()-im?(lt&2)===0&&co(n,0):rm|=o,so===et&&(so=0)),jr(n)}function z_(n,i){i===0&&(i=Jo()),n=Gs(n,i),n!==null&&(Qr(n,i),jr(n))}function _C(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),z_(n,o)}function wC(n,i){var o=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(i),z_(n,o)}function bC(n,i){return xe(n,i)}var Zu=null,ho=null,fm=!1,Ju=!1,mm=!1,ss=0;function jr(n){n!==ho&&n.next===null&&(ho===null?Zu=ho=n:ho=ho.next=n),Ju=!0,fm||(fm=!0,TC())}function Hl(n,i){if(!mm&&Ju){mm=!0;do for(var o=!1,c=Zu;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var E=c.suspendedLanes,S=c.pingedLanes;g=(1<<31-rt(42|n)+1)-1,g&=f&~(E&~S),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,G_(c,g))}else g=et,g=Cs(c,c===vt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Ni(c,g)||(o=!0,G_(c,g));c=c.next}while(o);mm=!1}}function EC(){q_()}function q_(){Ju=fm=!1;var n=0;ss!==0&&(NC()&&(n=ss),ss=0);for(var i=Me(),o=null,c=Zu;c!==null;){var f=c.next,g=F_(c,i);g===0?(c.next=null,o===null?Zu=f:o.next=f,f===null&&(ho=o)):(o=c,(n!==0||(g&3)!==0)&&(Ju=!0)),c=f}Hl(n)}function F_(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var E=31-rt(g),S=1<<E,M=f[E];M===-1?((S&o)===0||(S&c)!==0)&&(f[E]=Xo(S,i)):M<=i&&(n.expiredLanes|=S),g&=~S}if(i=vt,o=et,o=Cs(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(ct===2||ct===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Oe(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Ni(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&Oe(c),As(o)){case 2:case 8:o=Te;break;case 32:o=nt;break;case 268435456:o=En;break;default:o=nt}return c=H_.bind(null,n),o=xe(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&Oe(c),n.callbackPriority=2,n.callbackNode=null,2}function H_(n,i){if(cn!==0&&cn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Xu()&&n.callbackNode!==o)return null;var c=et;return c=Cs(n,n===vt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(C_(n,c,i),F_(n,Me()),n.callbackNode!=null&&n.callbackNode===o?H_.bind(null,n):null)}function G_(n,i){if(Xu())return null;C_(n,i,!0)}function TC(){jC(function(){(lt&6)!==0?xe(Xe,EC):q_()})}function pm(){return ss===0&&(ss=Zo()),ss}function $_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:js(""+n)}function K_(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function SC(n,i,o,c,f){if(i==="submit"&&o&&o.stateNode===f){var g=$_((f[Lt]||null).action),E=c.submitter;E&&(i=(i=E[Lt]||null)?$_(i.formAction):E.getAttribute("formAction"),i!==null&&(g=i,E=null));var S=new Ms("action","action",null,c,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ss!==0){var M=E?K_(f,E):new FormData(f);Of(o,{pending:!0,data:M,method:f.method,action:g},null,M)}}else typeof g=="function"&&(S.preventDefault(),M=E?K_(f,E):new FormData(f),Of(o,{pending:!0,data:M,method:f.method,action:g},g,M))},currentTarget:f}]})}}for(var gm=0;gm<Jd.length;gm++){var ym=Jd[gm],xC=ym.toLowerCase(),CC=ym[0].toUpperCase()+ym.slice(1);cr(xC,"on"+CC)}cr(Cy,"onAnimationEnd"),cr(Ay,"onAnimationIteration"),cr(Ry,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(Fx,"onTransitionRun"),cr(Hx,"onTransitionStart"),cr(Gx,"onTransitionCancel"),cr(ky,"onTransitionEnd"),Wr("onMouseEnter",["mouseout","mouseover"]),Wr("onMouseLeave",["mouseout","mouseover"]),Wr("onPointerEnter",["pointerout","pointerover"]),Wr("onPointerLeave",["pointerout","pointerover"]),or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),or("onBeforeInput",["compositionend","keypress","textInput","paste"]),or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function Q_(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var E=c.length-1;0<=E;E--){var S=c[E],M=S.instance,X=S.currentTarget;if(S=S.listener,M!==g&&f.isPropagationStopped())break e;g=S,f.currentTarget=X;try{g(f)}catch(ie){Bu(ie)}f.currentTarget=null,g=M}else for(E=0;E<c.length;E++){if(S=c[E],M=S.instance,X=S.currentTarget,S=S.listener,M!==g&&f.isPropagationStopped())break e;g=S,f.currentTarget=X;try{g(f)}catch(ie){Bu(ie)}f.currentTarget=null,g=M}}}}function $e(n,i){var o=i[nl];o===void 0&&(o=i[nl]=new Set);var c=n+"__bubble";o.has(c)||(Y_(i,n,2,!1),o.add(c))}function vm(n,i,o){var c=0;i&&(c|=4),Y_(o,n,c,i)}var eh="_reactListening"+Math.random().toString(36).slice(2);function _m(n){if(!n[eh]){n[eh]=!0,rl.forEach(function(o){o!=="selectionchange"&&(AC.has(o)||vm(o,!1,n),vm(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[eh]||(i[eh]=!0,vm("selectionchange",!1,i))}}function Y_(n,i,o,c){switch(_0(i)){case 2:var f=eA;break;case 8:f=tA;break;default:f=jm}o=f.bind(null,i,o,n),f=void 0,!Yn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function wm(n,i,o,c,f){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var S=c.stateNode.containerInfo;if(S===f)break;if(E===4)for(E=c.return;E!==null;){var M=E.tag;if((M===3||M===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;S!==null;){if(E=Yr(S),E===null)return;if(M=E.tag,M===5||M===6||M===26||M===27){c=g=E;continue e}S=S.parentNode}}c=c.return}nu(function(){var X=g,ie=Qn(o),le=[];e:{var J=Iy.get(n);if(J!==void 0){var ee=Ms,De=n;switch(n){case"keypress":if(Sr(o)===0)break e;case"keydown":case"keyup":ee=Bs;break;case"focusin":De="focus",ee=Us;break;case"focusout":De="blur",ee=Us;break;case"beforeblur":case"afterblur":ee=Us;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Wn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Gd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=uu;break;case Cy:case Ay:case Ry:ee=Vs;break;case ky:ee=du;break;case"scroll":case"scrollend":ee=ru;break;case"wheel":ee=zs;break;case"copy":case"cut":case"paste":ee=Ls;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=pl;break;case"toggle":case"beforetoggle":ee=mu}var Re=(i&4)!==0,pt=!Re&&(n==="scroll"||n==="scrollend"),Q=Re?J!==null?J+"Capture":null:J;Re=[];for(var q=X,W;q!==null;){var se=q;if(W=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||W===null||Q===null||(se=Li(q,Q),se!=null&&Re.push($l(q,se,W))),pt)break;q=q.return}0<Re.length&&(J=new ee(J,De,null,o,ie),le.push({event:J,listeners:Re}))}}if((i&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",ee=n==="mouseout"||n==="pointerout",J&&o!==Jr&&(De=o.relatedTarget||o.fromElement)&&(Yr(De)||De[$n]))break e;if((ee||J)&&(J=ie.window===ie?ie:(J=ie.ownerDocument)?J.defaultView||J.parentWindow:window,ee?(De=o.relatedTarget||o.toElement,ee=X,De=De?Yr(De):null,De!==null&&(pt=l(De),Re=De.tag,De!==pt||Re!==5&&Re!==27&&Re!==6)&&(De=null)):(ee=null,De=X),ee!==De)){if(Re=Wn,se="onMouseLeave",Q="onMouseEnter",q="mouse",(n==="pointerout"||n==="pointerover")&&(Re=pl,se="onPointerLeave",Q="onPointerEnter",q="pointer"),pt=ee==null?J:wr(ee),W=De==null?J:wr(De),J=new Re(se,q+"leave",ee,o,ie),J.target=pt,J.relatedTarget=W,se=null,Yr(ie)===X&&(Re=new Re(Q,q+"enter",De,o,ie),Re.target=W,Re.relatedTarget=pt,se=Re),pt=se,ee&&De)t:{for(Re=ee,Q=De,q=0,W=Re;W;W=fo(W))q++;for(W=0,se=Q;se;se=fo(se))W++;for(;0<q-W;)Re=fo(Re),q--;for(;0<W-q;)Q=fo(Q),W--;for(;q--;){if(Re===Q||Q!==null&&Re===Q.alternate)break t;Re=fo(Re),Q=fo(Q)}Re=null}else Re=null;ee!==null&&W_(le,J,ee,Re,!1),De!==null&&pt!==null&&W_(le,pt,De,Re,!0)}}e:{if(J=X?wr(X):window,ee=J.nodeName&&J.nodeName.toLowerCase(),ee==="select"||ee==="input"&&J.type==="file")var Ee=py;else if(Qt(J))if(gy)Ee=Bx;else{Ee=Vx;var He=Ux}else ee=J.nodeName,!ee||ee.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?X&&ll(X.elementType)&&(Ee=py):Ee=Lx;if(Ee&&(Ee=Ee(n,X))){aa(le,Ee,o,ie);break e}He&&He(n,J,X),n==="focusout"&&X&&J.type==="number"&&X.memoizedProps.value!=null&&La(J,"number",J.value)}switch(He=X?wr(X):window,n){case"focusin":(Qt(He)||He.contentEditable==="true")&&(qs=He,Wd=X,vl=null);break;case"focusout":vl=Wd=qs=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,Sy(le,o,ie);break;case"selectionchange":if(qx)break;case"keydown":case"keyup":Sy(le,o,ie)}var Se;if(Ar)e:{switch(n){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Ze?re(n,o)&&(ke="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ke="onCompositionStart");ke&&(b&&o.locale!=="ko"&&(Ze||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Ze&&(Se=ul()):(Tr=ie,Ba="value"in Tr?Tr.value:Tr.textContent,Ze=!0)),He=th(X,ke),0<He.length&&(ke=new fl(ke,n,null,o,ie),le.push({event:ke,listeners:He}),Se?ke.data=Se:(Se=fe(o),Se!==null&&(ke.data=Se)))),(Se=_?Kt(n,o):Je(n,o))&&(ke=th(X,"onBeforeInput"),0<ke.length&&(He=new fl("onBeforeInput","beforeinput",null,o,ie),le.push({event:He,listeners:ke}),He.data=Se)),SC(le,n,X,o,ie)}Q_(le,i)})}function $l(n,i,o){return{instance:n,listener:i,currentTarget:o}}function th(n,i){for(var o=i+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Li(n,o),f!=null&&c.unshift($l(n,f,g)),f=Li(n,i),f!=null&&c.push($l(n,f,g))),n.tag===3)return c;n=n.return}return[]}function fo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function W_(n,i,o,c,f){for(var g=i._reactName,E=[];o!==null&&o!==c;){var S=o,M=S.alternate,X=S.stateNode;if(S=S.tag,M!==null&&M===c)break;S!==5&&S!==26&&S!==27||X===null||(M=X,f?(X=Li(o,g),X!=null&&E.unshift($l(o,X,M))):f||(X=Li(o,g),X!=null&&E.push($l(o,X,M)))),o=o.return}E.length!==0&&n.push({event:i,listeners:E})}var RC=/\r\n?/g,kC=/\u0000|\uFFFD/g;function X_(n){return(typeof n=="string"?n:""+n).replace(RC,`
`).replace(kC,"")}function Z_(n,i){return i=X_(i),X_(n)===i}function nh(){}function mt(n,i,o,c,f,g){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Kn(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Kn(n,""+c);break;case"className":br(n,"class",c);break;case"tabIndex":br(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":br(n,o,c);break;case"style":ol(n,c,g);break;case"data":if(i!=="object"){br(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=js(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&mt(n,i,"name",f.name,f,null),mt(n,i,"formEncType",f.formEncType,f,null),mt(n,i,"formMethod",f.formMethod,f,null),mt(n,i,"formTarget",f.formTarget,f,null)):(mt(n,i,"encType",f.encType,f,null),mt(n,i,"method",f.method,f,null),mt(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=js(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=nh);break;case"onScroll":c!=null&&$e("scroll",n);break;case"onScrollEnd":c!=null&&$e("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=js(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":$e("beforetoggle",n),$e("toggle",n),Va(n,"popover",c);break;case"xlinkActuate":sn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":sn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":sn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":sn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":sn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":sn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":sn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":sn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":sn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Va(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Fd.get(o)||o,Va(n,o,c))}}function bm(n,i,o,c,f,g){switch(o){case"style":ol(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof c=="string"?Kn(n,c):(typeof c=="number"||typeof c=="bigint")&&Kn(n,""+c);break;case"onScroll":c!=null&&$e("scroll",n);break;case"onScrollEnd":c!=null&&$e("scrollend",n);break;case"onClick":c!=null&&(n.onclick=nh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rs.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),g=n[Lt]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(i,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):Va(n,o,c)}}}function un(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",n),$e("load",n);var c=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:mt(n,i,g,E,o,null)}}f&&mt(n,i,"srcSet",o.srcSet,o,null),c&&mt(n,i,"src",o.src,o,null);return;case"input":$e("invalid",n);var S=g=E=f=null,M=null,X=null;for(c in o)if(o.hasOwnProperty(c)){var ie=o[c];if(ie!=null)switch(c){case"name":f=ie;break;case"type":E=ie;break;case"checked":M=ie;break;case"defaultChecked":X=ie;break;case"value":g=ie;break;case"defaultValue":S=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,i));break;default:mt(n,i,c,ie,o,null)}}Pi(n,g,S,M,X,E,f,!1),Ds(n);return;case"select":$e("invalid",n),c=E=g=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":g=S;break;case"defaultValue":E=S;break;case"multiple":c=S;default:mt(n,i,f,S,o,null)}i=g,o=E,n.multiple=!!c,i!=null?Zr(n,!!c,i,!1):o!=null&&Zr(n,!!c,o,!0);return;case"textarea":$e("invalid",n),g=f=c=null;for(E in o)if(o.hasOwnProperty(E)&&(S=o[E],S!=null))switch(E){case"value":c=S;break;case"defaultValue":f=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:mt(n,i,E,S,o,null)}Ui(n,c,f,g),Ds(n);return;case"option":for(M in o)if(o.hasOwnProperty(M)&&(c=o[M],c!=null))switch(M){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:mt(n,i,M,c,o,null)}return;case"dialog":$e("beforetoggle",n),$e("toggle",n),$e("cancel",n),$e("close",n);break;case"iframe":case"object":$e("load",n);break;case"video":case"audio":for(c=0;c<Gl.length;c++)$e(Gl[c],n);break;case"image":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"embed":case"source":case"link":$e("error",n),$e("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(c=o[X],c!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:mt(n,i,X,c,o,null)}return;default:if(ll(i)){for(ie in o)o.hasOwnProperty(ie)&&(c=o[ie],c!==void 0&&bm(n,i,ie,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&mt(n,i,S,c,o,null))}function IC(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,E=null,S=null,M=null,X=null,ie=null;for(ee in o){var le=o[ee];if(o.hasOwnProperty(ee)&&le!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":M=le;default:c.hasOwnProperty(ee)||mt(n,i,ee,null,c,le)}}for(var J in c){var ee=c[J];if(le=o[J],c.hasOwnProperty(J)&&(ee!=null||le!=null))switch(J){case"type":g=ee;break;case"name":f=ee;break;case"checked":X=ee;break;case"defaultChecked":ie=ee;break;case"value":E=ee;break;case"defaultValue":S=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,i));break;default:ee!==le&&mt(n,i,J,ee,c,le)}}Pn(n,E,S,M,X,ie,g,f);return;case"select":ee=E=S=J=null;for(g in o)if(M=o[g],o.hasOwnProperty(g)&&M!=null)switch(g){case"value":break;case"multiple":ee=M;default:c.hasOwnProperty(g)||mt(n,i,g,null,c,M)}for(f in c)if(g=c[f],M=o[f],c.hasOwnProperty(f)&&(g!=null||M!=null))switch(f){case"value":J=g;break;case"defaultValue":S=g;break;case"multiple":E=g;default:g!==M&&mt(n,i,f,g,c,M)}i=S,o=E,c=ee,J!=null?Zr(n,!!o,J,!1):!!c!=!!o&&(i!=null?Zr(n,!!o,i,!0):Zr(n,!!o,o?[]:"",!1));return;case"textarea":ee=J=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:mt(n,i,S,null,c,f)}for(E in c)if(f=c[E],g=o[E],c.hasOwnProperty(E)&&(f!=null||g!=null))switch(E){case"value":J=f;break;case"defaultValue":ee=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&mt(n,i,E,f,c,g)}dt(n,J,ee);return;case"option":for(var De in o)if(J=o[De],o.hasOwnProperty(De)&&J!=null&&!c.hasOwnProperty(De))switch(De){case"selected":n.selected=!1;break;default:mt(n,i,De,null,c,J)}for(M in c)if(J=c[M],ee=o[M],c.hasOwnProperty(M)&&J!==ee&&(J!=null||ee!=null))switch(M){case"selected":n.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:mt(n,i,M,J,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in o)J=o[Re],o.hasOwnProperty(Re)&&J!=null&&!c.hasOwnProperty(Re)&&mt(n,i,Re,null,c,J);for(X in c)if(J=c[X],ee=o[X],c.hasOwnProperty(X)&&J!==ee&&(J!=null||ee!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,i));break;default:mt(n,i,X,J,c,ee)}return;default:if(ll(i)){for(var pt in o)J=o[pt],o.hasOwnProperty(pt)&&J!==void 0&&!c.hasOwnProperty(pt)&&bm(n,i,pt,void 0,c,J);for(ie in c)J=c[ie],ee=o[ie],!c.hasOwnProperty(ie)||J===ee||J===void 0&&ee===void 0||bm(n,i,ie,J,c,ee);return}}for(var Q in o)J=o[Q],o.hasOwnProperty(Q)&&J!=null&&!c.hasOwnProperty(Q)&&mt(n,i,Q,null,c,J);for(le in c)J=c[le],ee=o[le],!c.hasOwnProperty(le)||J===ee||J==null&&ee==null||mt(n,i,le,J,c,ee)}var Em=null,Tm=null;function rh(n){return n.nodeType===9?n:n.ownerDocument}function J_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function e0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Sm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var xm=null;function NC(){var n=window.event;return n&&n.type==="popstate"?n===xm?!1:(xm=n,!0):(xm=null,!1)}var t0=typeof setTimeout=="function"?setTimeout:void 0,DC=typeof clearTimeout=="function"?clearTimeout:void 0,n0=typeof Promise=="function"?Promise:void 0,jC=typeof queueMicrotask=="function"?queueMicrotask:typeof n0<"u"?function(n){return n0.resolve(null).then(n).catch(MC)}:t0;function MC(n){setTimeout(function(){throw n})}function ni(n){return n==="head"}function r0(n,i){var o=i,c=0,f=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<c&&8>c){o=c;var E=n.ownerDocument;if(o&1&&Kl(E.documentElement),o&2&&Kl(E.body),o&4)for(o=E.head,Kl(o),E=o.firstChild;E;){var S=E.nextSibling,M=E.nodeName;E[Di]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=S}}if(f===0){n.removeChild(g),tc(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:c=o.charCodeAt(0)-48;else c=0;o=g}while(o);tc(i)}function Cm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Cm(o),Ua(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function OC(n,i,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Di])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=hr(n.nextSibling),n===null)break}return null}function PC(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=hr(n.nextSibling),n===null))return null;return n}function Am(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function UC(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function hr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Rm=null;function a0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function i0(n,i,o){switch(i=rh(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Kl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ua(n)}var rr=new Map,s0=new Set;function ah(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ya=me.d;me.d={f:VC,r:LC,D:BC,C:zC,L:qC,m:FC,X:GC,S:HC,M:$C};function VC(){var n=ya.f(),i=Yu();return n||i}function LC(n){var i=_r(n);i!==null&&i.tag===5&&i.type==="form"?Cv(i):ya.r(n)}var mo=typeof document>"u"?null:document;function o0(n,i,o){var c=mo;if(c&&typeof i=="string"&&i){var f=Bt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),s0.has(f)||(s0.add(f),n={rel:n,crossOrigin:o,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),un(i,"link",n),Ot(i),c.head.appendChild(i)))}}function BC(n){ya.D(n),o0("dns-prefetch",n,null)}function zC(n,i){ya.C(n,i),o0("preconnect",n,i)}function qC(n,i,o){ya.L(n,i,o);var c=mo;if(c&&n&&i){var f='link[rel="preload"][as="'+Bt(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Bt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Bt(o.imageSizes)+'"]')):f+='[href="'+Bt(n)+'"]';var g=f;switch(i){case"style":g=po(n);break;case"script":g=go(n)}rr.has(g)||(n=v({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),rr.set(g,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(Ql(g))||i==="script"&&c.querySelector(Yl(g))||(i=c.createElement("link"),un(i,"link",n),Ot(i),c.head.appendChild(i)))}}function FC(n,i){ya.m(n,i);var o=mo;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Bt(c)+'"][href="'+Bt(n)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=go(n)}if(!rr.has(g)&&(n=v({rel:"modulepreload",href:n},i),rr.set(g,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Yl(g)))return}c=o.createElement("link"),un(c,"link",n),Ot(c),o.head.appendChild(c)}}}function HC(n,i,o){ya.S(n,i,o);var c=mo;if(c&&n){var f=Tn(c).hoistableStyles,g=po(n);i=i||"default";var E=f.get(g);if(!E){var S={loading:0,preload:null};if(E=c.querySelector(Ql(g)))S.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":i},o),(o=rr.get(g))&&km(n,o);var M=E=c.createElement("link");Ot(M),un(M,"link",n),M._p=new Promise(function(X,ie){M.onload=X,M.onerror=ie}),M.addEventListener("load",function(){S.loading|=1}),M.addEventListener("error",function(){S.loading|=2}),S.loading|=4,ih(E,i,c)}E={type:"stylesheet",instance:E,count:1,state:S},f.set(g,E)}}}function GC(n,i){ya.X(n,i);var o=mo;if(o&&n){var c=Tn(o).hoistableScripts,f=go(n),g=c.get(f);g||(g=o.querySelector(Yl(f)),g||(n=v({src:n,async:!0},i),(i=rr.get(f))&&Im(n,i),g=o.createElement("script"),Ot(g),un(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function $C(n,i){ya.M(n,i);var o=mo;if(o&&n){var c=Tn(o).hoistableScripts,f=go(n),g=c.get(f);g||(g=o.querySelector(Yl(f)),g||(n=v({src:n,async:!0,type:"module"},i),(i=rr.get(f))&&Im(n,i),g=o.createElement("script"),Ot(g),un(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function l0(n,i,o,c){var f=(f=V.current)?ah(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=po(o.href),o=Tn(f).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=po(o.href);var g=Tn(f).hoistableStyles,E=g.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,E),(g=f.querySelector(Ql(n)))&&!g._p&&(E.instance=g,E.state.loading=5),rr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},rr.set(n,o),g||KC(f,n,o,E.state))),i&&c===null)throw Error(r(528,""));return E}if(i&&c!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=go(o),o=Tn(f).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function po(n){return'href="'+Bt(n)+'"'}function Ql(n){return'link[rel="stylesheet"]['+n+"]"}function c0(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function KC(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),un(i,"link",o),Ot(i),n.head.appendChild(i))}function go(n){return'[src="'+Bt(n)+'"]'}function Yl(n){return"script[async]"+n}function u0(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+Bt(o.href)+'"]');if(c)return i.instance=c,Ot(c),c;var f=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Ot(c),un(c,"style",f),ih(c,o.precedence,n),i.instance=c;case"stylesheet":f=po(o.href);var g=n.querySelector(Ql(f));if(g)return i.state.loading|=4,i.instance=g,Ot(g),g;c=c0(o),(f=rr.get(f))&&km(c,f),g=(n.ownerDocument||n).createElement("link"),Ot(g);var E=g;return E._p=new Promise(function(S,M){E.onload=S,E.onerror=M}),un(g,"link",c),i.state.loading|=4,ih(g,o.precedence,n),i.instance=g;case"script":return g=go(o.src),(f=n.querySelector(Yl(g)))?(i.instance=f,Ot(f),f):(c=o,(f=rr.get(g))&&(c=v({},o),Im(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ot(f),un(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,ih(c,o.precedence,n));return i.instance}function ih(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,E=0;E<c.length;E++){var S=c[E];if(S.dataset.precedence===i)g=S;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function km(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Im(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var sh=null;function h0(n,i,o){if(sh===null){var c=new Map,f=sh=new Map;f.set(o,c)}else f=sh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[Di]||g[$t]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(i)||"";E=n+E;var S=c.get(E);S?S.push(g):c.set(E,[g])}}return c}function d0(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function QC(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function f0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Wl=null;function YC(){}function WC(n,i,o){if(Wl===null)throw Error(r(475));var c=Wl;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=po(o.href),g=n.querySelector(Ql(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=oh.bind(c),n.then(c,c)),i.state.loading|=4,i.instance=g,Ot(g);return}g=n.ownerDocument||n,o=c0(o),(f=rr.get(f))&&km(o,f),g=g.createElement("link"),Ot(g);var E=g;E._p=new Promise(function(S,M){E.onload=S,E.onerror=M}),un(g,"link",o),i.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=oh.bind(c),n.addEventListener("load",i),n.addEventListener("error",i))}}function XC(){if(Wl===null)throw Error(r(475));var n=Wl;return n.stylesheets&&n.count===0&&Nm(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&Nm(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function oh(){if(this.count--,this.count===0){if(this.stylesheets)Nm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var lh=null;function Nm(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,lh=new Map,i.forEach(ZC,n),lh=null,oh.call(n))}function ZC(n,i){if(!(i.state.loading&4)){var o=lh.get(n);if(o)var c=o.get(null);else{o=new Map,lh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var E=f[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),c=E)}c&&o.set(null,c)}f=i.instance,E=f.getAttribute("data-precedence"),g=o.get(E)||c,g===c&&o.set(null,f),o.set(E,f),this.count++,c=oh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var Xl={$$typeof:L,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function JC(n,i,o,c,f,g,E,S){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kr(0),this.hiddenUpdates=Kr(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function m0(n,i,o,c,f,g,E,S,M,X,ie,le){return n=new JC(n,i,o,E,S,M,X,le),i=1,g===!0&&(i|=24),g=Vn(3,null,null,i),n.current=g,g.stateNode=n,i=df(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:i},gf(g),n}function p0(n){return n?(n=$s,n):$s}function g0(n,i,o,c,f,g){f=p0(f),c.context===null?c.context=f:c.pendingContext=f,c=Fa(i),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Ha(n,c,i),o!==null&&(Fn(o,n,i),Al(o,n,i))}function y0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function Dm(n,i){y0(n,i),(n=n.alternate)&&y0(n,i)}function v0(n){if(n.tag===13){var i=Gs(n,67108864);i!==null&&Fn(i,n,67108864),Dm(n,67108864)}}var ch=!0;function eA(n,i,o,c){var f=ae.T;ae.T=null;var g=me.p;try{me.p=2,jm(n,i,o,c)}finally{me.p=g,ae.T=f}}function tA(n,i,o,c){var f=ae.T;ae.T=null;var g=me.p;try{me.p=8,jm(n,i,o,c)}finally{me.p=g,ae.T=f}}function jm(n,i,o,c){if(ch){var f=Mm(c);if(f===null)wm(n,i,c,uh,o),w0(n,c);else if(rA(f,n,i,o,c))c.stopPropagation();else if(w0(n,c),i&4&&-1<nA.indexOf(n)){for(;f!==null;){var g=_r(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=sr(g.pendingLanes);if(E!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var M=1<<31-rt(E);S.entanglements[1]|=M,E&=~M}jr(g),(lt&6)===0&&(Ku=Me()+500,Hl(0))}}break;case 13:S=Gs(g,2),S!==null&&Fn(S,g,2),Yu(),Dm(g,2)}if(g=Mm(c),g===null&&wm(n,i,c,uh,o),g===f)break;f=g}f!==null&&c.stopPropagation()}else wm(n,i,c,null,o)}}function Mm(n){return n=Qn(n),Om(n)}var uh=null;function Om(n){if(uh=null,n=Yr(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=u(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return uh=n,null}function _0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(St()){case Xe:return 2;case Te:return 8;case nt:case pn:return 32;case En:return 268435456;default:return 32}default:return 32}}var Pm=!1,ri=null,ai=null,ii=null,Zl=new Map,Jl=new Map,si=[],nA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function w0(n,i){switch(n){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":Zl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(i.pointerId)}}function ec(n,i,o,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},i!==null&&(i=_r(i),i!==null&&v0(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function rA(n,i,o,c,f){switch(i){case"focusin":return ri=ec(ri,n,i,o,c,f),!0;case"dragenter":return ai=ec(ai,n,i,o,c,f),!0;case"mouseover":return ii=ec(ii,n,i,o,c,f),!0;case"pointerover":var g=f.pointerId;return Zl.set(g,ec(Zl.get(g)||null,n,i,o,c,f)),!0;case"gotpointercapture":return g=f.pointerId,Jl.set(g,ec(Jl.get(g)||null,n,i,o,c,f)),!0}return!1}function b0(n){var i=Yr(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){n.blockedOn=i,Yc(n.priority,function(){if(o.tag===13){var c=qn();c=Ma(c);var f=Gs(o,c);f!==null&&Fn(f,o,c),Dm(o,c)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function hh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Mm(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Jr=c,o.target.dispatchEvent(c),Jr=null}else return i=_r(o),i!==null&&v0(i),n.blockedOn=o,!1;i.shift()}return!0}function E0(n,i,o){hh(n)&&o.delete(i)}function aA(){Pm=!1,ri!==null&&hh(ri)&&(ri=null),ai!==null&&hh(ai)&&(ai=null),ii!==null&&hh(ii)&&(ii=null),Zl.forEach(E0),Jl.forEach(E0)}function dh(n,i){n.blockedOn===i&&(n.blockedOn=null,Pm||(Pm=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,aA)))}var fh=null;function T0(n){fh!==n&&(fh=n,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){fh===n&&(fh=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if(Om(c||o)===null)continue;break}var g=_r(o);g!==null&&(n.splice(i,3),i-=3,Of(g,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function tc(n){function i(M){return dh(M,n)}ri!==null&&dh(ri,n),ai!==null&&dh(ai,n),ii!==null&&dh(ii,n),Zl.forEach(i),Jl.forEach(i);for(var o=0;o<si.length;o++){var c=si[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<si.length&&(o=si[0],o.blockedOn===null);)b0(o),o.blockedOn===null&&si.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],g=o[c+1],E=f[Lt]||null;if(typeof g=="function")E||T0(o);else if(E){var S=null;if(g&&g.hasAttribute("formAction")){if(f=g,E=g[Lt]||null)S=E.formAction;else if(Om(f)!==null)continue}else S=E.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),T0(o)}}}function Um(n){this._internalRoot=n}mh.prototype.render=Um.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,c=qn();g0(o,c,n,i,null,null)},mh.prototype.unmount=Um.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;g0(n.current,2,null,n,null,null),Yu(),i[$n]=null}};function mh(n){this._internalRoot=n}mh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Oa();n={blockedOn:null,target:n,priority:i};for(var o=0;o<si.length&&i!==0&&i<si[o].priority;o++);si.splice(o,0,n),o===0&&b0(n)}};var S0=e.version;if(S0!=="19.1.0")throw Error(r(527,S0,"19.1.0"));me.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var iA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ph.isDisabled&&ph.supportsFiber)try{gt=ph.inject(iA),Ke=ph}catch{}}return rc.createRoot=function(n,i){if(!s(n))throw Error(r(299));var o=!1,c="",f=Bv,g=zv,E=qv,S=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(S=i.unstable_transitionCallbacks)),i=m0(n,1,!1,null,null,o,c,f,g,E,S,null),n[$n]=i.current,_m(n),new Um(i)},rc.hydrateRoot=function(n,i,o){if(!s(n))throw Error(r(299));var c=!1,f="",g=Bv,E=zv,S=qv,M=null,X=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks),o.formState!==void 0&&(X=o.formState)),i=m0(n,1,!0,i,o??null,c,f,g,E,S,M,X),i.context=p0(null),o=i.current,c=qn(),c=Ma(c),f=Fa(c),f.callback=null,Ha(o,f,c),o=c,i.current.lanes=o,Qr(i,o),jr(i),n[$n]=i.current,_m(n),new mh(i)},rc.version="19.1.0",rc}var M0;function pA(){if(M0)return Bm.exports;M0=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Bm.exports=mA(),Bm.exports}var gA=pA(),ac={},O0;function yA(){if(O0)return ac;O0=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.parse=u,ac.serialize=y;const a=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function u(T,A){const k=new l,C=T.length;if(C<2)return k;const x=(A==null?void 0:A.decode)||v;let I=0;do{const z=T.indexOf("=",I);if(z===-1)break;const L=T.indexOf(";",I),ne=L===-1?C:L;if(z>ne){I=T.lastIndexOf(";",z-1)+1;continue}const oe=m(T,I,z),de=p(T,z,oe),O=T.slice(oe,de);if(k[O]===void 0){let N=m(T,z+1,ne),j=p(T,ne,N);const U=x(T.slice(N,j));k[O]=U}I=ne+1}while(I<C);return k}function m(T,A,k){do{const C=T.charCodeAt(A);if(C!==32&&C!==9)return A}while(++A<k);return k}function p(T,A,k){for(;A>k;){const C=T.charCodeAt(--A);if(C!==32&&C!==9)return A+1}return k}function y(T,A,k){const C=(k==null?void 0:k.encode)||encodeURIComponent;if(!a.test(T))throw new TypeError(`argument name is invalid: ${T}`);const x=C(A);if(!e.test(x))throw new TypeError(`argument val is invalid: ${A}`);let I=T+"="+x;if(!k)return I;if(k.maxAge!==void 0){if(!Number.isInteger(k.maxAge))throw new TypeError(`option maxAge is invalid: ${k.maxAge}`);I+="; Max-Age="+k.maxAge}if(k.domain){if(!t.test(k.domain))throw new TypeError(`option domain is invalid: ${k.domain}`);I+="; Domain="+k.domain}if(k.path){if(!r.test(k.path))throw new TypeError(`option path is invalid: ${k.path}`);I+="; Path="+k.path}if(k.expires){if(!w(k.expires)||!Number.isFinite(k.expires.valueOf()))throw new TypeError(`option expires is invalid: ${k.expires}`);I+="; Expires="+k.expires.toUTCString()}if(k.httpOnly&&(I+="; HttpOnly"),k.secure&&(I+="; Secure"),k.partitioned&&(I+="; Partitioned"),k.priority)switch(typeof k.priority=="string"?k.priority.toLowerCase():void 0){case"low":I+="; Priority=Low";break;case"medium":I+="; Priority=Medium";break;case"high":I+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${k.priority}`)}if(k.sameSite)switch(typeof k.sameSite=="string"?k.sameSite.toLowerCase():k.sameSite){case!0:case"strict":I+="; SameSite=Strict";break;case"lax":I+="; SameSite=Lax";break;case"none":I+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${k.sameSite}`)}return I}function v(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function w(T){return s.call(T)==="[object Date]"}return ac}yA();var P0="popstate";function vA(a={}){function e(r,s){let{pathname:l,search:u,hash:m}=r.location;return up("",{pathname:l,search:u,hash:m},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:bc(s)}return wA(e,t,null,a)}function At(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function pr(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _A(){return Math.random().toString(36).substring(2,10)}function U0(a,e){return{usr:a.state,key:a.key,idx:e}}function up(a,e,t=null,r){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?Lo(e):e,state:t,key:e&&e.key||r||_A()}}function bc({pathname:a="/",search:e="",hash:t=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(a+=t.charAt(0)==="#"?t:"#"+t),a}function Lo(a){let e={};if(a){let t=a.indexOf("#");t>=0&&(e.hash=a.substring(t),a=a.substring(0,t));let r=a.indexOf("?");r>=0&&(e.search=a.substring(r),a=a.substring(0,r)),a&&(e.pathname=a)}return e}function wA(a,e,t,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,u=s.history,m="POP",p=null,y=v();y==null&&(y=0,u.replaceState({...u.state,idx:y},""));function v(){return(u.state||{idx:null}).idx}function w(){m="POP";let x=v(),I=x==null?null:x-y;y=x,p&&p({action:m,location:C.location,delta:I})}function T(x,I){m="PUSH";let z=up(C.location,x,I);y=v()+1;let L=U0(z,y),ne=C.createHref(z);try{u.pushState(L,"",ne)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;s.location.assign(ne)}l&&p&&p({action:m,location:C.location,delta:1})}function A(x,I){m="REPLACE";let z=up(C.location,x,I);y=v();let L=U0(z,y),ne=C.createHref(z);u.replaceState(L,"",ne),l&&p&&p({action:m,location:C.location,delta:0})}function k(x){let I=s.location.origin!=="null"?s.location.origin:s.location.href,z=typeof x=="string"?x:bc(x);return z=z.replace(/ $/,"%20"),At(I,`No window.location.(origin|href) available to create URL for href: ${z}`),new URL(z,I)}let C={get action(){return m},get location(){return a(s,u)},listen(x){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(P0,w),p=x,()=>{s.removeEventListener(P0,w),p=null}},createHref(x){return e(s,x)},createURL:k,encodeLocation(x){let I=k(x);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:T,replace:A,go(x){return u.go(x)}};return C}function Kb(a,e,t="/"){return bA(a,e,t,!1)}function bA(a,e,t,r){let s=typeof e=="string"?Lo(e):e,l=Ca(s.pathname||"/",t);if(l==null)return null;let u=Qb(a);EA(u);let m=null;for(let p=0;m==null&&p<u.length;++p){let y=jA(l);m=NA(u[p],y,r)}return m}function Qb(a,e=[],t=[],r=""){let s=(l,u,m)=>{let p={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};p.relativePath.startsWith("/")&&(At(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length));let y=Ta([r,p.relativePath]),v=t.concat(p);l.children&&l.children.length>0&&(At(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Qb(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:kA(y,l.index),routesMeta:v})};return a.forEach((l,u)=>{var m;if(l.path===""||!((m=l.path)!=null&&m.includes("?")))s(l,u);else for(let p of Yb(l.path))s(l,u,p)}),e}function Yb(a){let e=a.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let u=Yb(r.join("/")),m=[];return m.push(...u.map(p=>p===""?l:[l,p].join("/"))),s&&m.push(...u),m.map(p=>a.startsWith("/")&&p===""?"/":p)}function EA(a){a.sort((e,t)=>e.score!==t.score?t.score-e.score:IA(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var TA=/^:[\w-]+$/,SA=3,xA=2,CA=1,AA=10,RA=-2,V0=a=>a==="*";function kA(a,e){let t=a.split("/"),r=t.length;return t.some(V0)&&(r+=RA),e&&(r+=xA),t.filter(s=>!V0(s)).reduce((s,l)=>s+(TA.test(l)?SA:l===""?CA:AA),r)}function IA(a,e){return a.length===e.length&&a.slice(0,-1).every((r,s)=>r===e[s])?a[a.length-1]-e[e.length-1]:0}function NA(a,e,t=!1){let{routesMeta:r}=a,s={},l="/",u=[];for(let m=0;m<r.length;++m){let p=r[m],y=m===r.length-1,v=l==="/"?e:e.slice(l.length)||"/",w=Bh({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),T=p.route;if(!w&&y&&t&&!r[r.length-1].route.index&&(w=Bh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!w)return null;Object.assign(s,w.params),u.push({params:s,pathname:Ta([l,w.pathname]),pathnameBase:UA(Ta([l,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(l=Ta([l,w.pathnameBase]))}return u}function Bh(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[t,r]=DA(a.path,a.caseSensitive,a.end),s=e.match(t);if(!s)return null;let l=s[0],u=l.replace(/(.)\/+$/,"$1"),m=s.slice(1);return{params:r.reduce((y,{paramName:v,isOptional:w},T)=>{if(v==="*"){let k=m[T]||"";u=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const A=m[T];return w&&!A?y[v]=void 0:y[v]=(A||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:u,pattern:a}}function DA(a,e=!1,t=!0){pr(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let r=[],s="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,m,p)=>(r.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(r.push({paramName:"*"}),s+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":a!==""&&a!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function jA(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pr(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function Ca(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=a.charAt(t);return r&&r!=="/"?null:a.slice(t)||"/"}function MA(a,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof a=="string"?Lo(a):a;return{pathname:t?t.startsWith("/")?t:OA(t,e):e,search:VA(r),hash:LA(s)}}function OA(a,e){let t=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Hm(a,e,t,r){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PA(a){return a.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Wb(a){let e=PA(a);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Xb(a,e,t,r=!1){let s;typeof a=="string"?s=Lo(a):(s={...a},At(!s.pathname||!s.pathname.includes("?"),Hm("?","pathname","search",s)),At(!s.pathname||!s.pathname.includes("#"),Hm("#","pathname","hash",s)),At(!s.search||!s.search.includes("#"),Hm("#","search","hash",s)));let l=a===""||s.pathname==="",u=l?"/":s.pathname,m;if(u==null)m=t;else{let w=e.length-1;if(!r&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),w-=1;s.pathname=T.join("/")}m=w>=0?e[w]:"/"}let p=MA(s,m),y=u&&u!=="/"&&u.endsWith("/"),v=(l||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}var Ta=a=>a.join("/").replace(/\/\/+/g,"/"),UA=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),VA=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,LA=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function BA(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var Zb=["POST","PUT","PATCH","DELETE"];new Set(Zb);var zA=["GET",...Zb];new Set(zA);var Bo=G.createContext(null);Bo.displayName="DataRouter";var od=G.createContext(null);od.displayName="DataRouterState";var Jb=G.createContext({isTransitioning:!1});Jb.displayName="ViewTransition";var qA=G.createContext(new Map);qA.displayName="Fetchers";var FA=G.createContext(null);FA.displayName="Await";var qr=G.createContext(null);qr.displayName="Navigation";var Dc=G.createContext(null);Dc.displayName="Location";var Fr=G.createContext({outlet:null,matches:[],isDataRoute:!1});Fr.displayName="Route";var Xp=G.createContext(null);Xp.displayName="RouteError";function HA(a,{relative:e}={}){At(jc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=G.useContext(qr),{hash:s,pathname:l,search:u}=Mc(a,{relative:e}),m=l;return t!=="/"&&(m=l==="/"?t:Ta([t,l])),r.createHref({pathname:m,search:u,hash:s})}function jc(){return G.useContext(Dc)!=null}function xi(){return At(jc(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(Dc).location}var eE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tE(a){G.useContext(qr).static||G.useLayoutEffect(a)}function bs(){let{isDataRoute:a}=G.useContext(Fr);return a?aR():GA()}function GA(){At(jc(),"useNavigate() may be used only in the context of a <Router> component.");let a=G.useContext(Bo),{basename:e,navigator:t}=G.useContext(qr),{matches:r}=G.useContext(Fr),{pathname:s}=xi(),l=JSON.stringify(Wb(r)),u=G.useRef(!1);return tE(()=>{u.current=!0}),G.useCallback((p,y={})=>{if(pr(u.current,eE),!u.current)return;if(typeof p=="number"){t.go(p);return}let v=Xb(p,JSON.parse(l),s,y.relative==="path");a==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ta([e,v.pathname])),(y.replace?t.replace:t.push)(v,y.state,y)},[e,t,l,s,a])}G.createContext(null);function $A(){let{matches:a}=G.useContext(Fr),e=a[a.length-1];return e?e.params:{}}function Mc(a,{relative:e}={}){let{matches:t}=G.useContext(Fr),{pathname:r}=xi(),s=JSON.stringify(Wb(t));return G.useMemo(()=>Xb(a,JSON.parse(s),r,e==="path"),[a,s,r,e])}function KA(a,e){return nE(a,e)}function nE(a,e,t,r){var z;At(jc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:l}=G.useContext(qr),{matches:u}=G.useContext(Fr),m=u[u.length-1],p=m?m.params:{},y=m?m.pathname:"/",v=m?m.pathnameBase:"/",w=m&&m.route;{let L=w&&w.path||"";rE(y,!w||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let T=xi(),A;if(e){let L=typeof e=="string"?Lo(e):e;At(v==="/"||((z=L.pathname)==null?void 0:z.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${L.pathname}" was given in the \`location\` prop.`),A=L}else A=T;let k=A.pathname||"/",C=k;if(v!=="/"){let L=v.replace(/^\//,"").split("/");C="/"+k.replace(/^\//,"").split("/").slice(L.length).join("/")}let x=!l&&t&&t.matches&&t.matches.length>0?t.matches:Kb(a,{pathname:C});pr(w||x!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),pr(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=ZA(x&&x.map(L=>Object.assign({},L,{params:Object.assign({},p,L.params),pathname:Ta([v,s.encodeLocation?s.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?v:Ta([v,s.encodeLocation?s.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),u,t,r);return e&&I?G.createElement(Dc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},I):I}function QA(){let a=rR(),e=BA(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),t=a instanceof Error?a.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",a),u=G.createElement(G.Fragment,null,G.createElement("p",null," Hey developer "),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:l},"ErrorBoundary")," or"," ",G.createElement("code",{style:l},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:s},t):null,u)}var YA=G.createElement(QA,null),WA=class extends G.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){console.error("React Router caught the following error during render",a,e)}render(){return this.state.error!==void 0?G.createElement(Fr.Provider,{value:this.props.routeContext},G.createElement(Xp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XA({routeContext:a,match:e,children:t}){let r=G.useContext(Bo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),G.createElement(Fr.Provider,{value:a},t)}function ZA(a,e=[],t=null,r=null){if(a==null){if(!t)return null;if(t.errors)a=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)a=t.matches;else return null}let s=a,l=t==null?void 0:t.errors;if(l!=null){let p=s.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);At(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let u=!1,m=-1;if(t)for(let p=0;p<s.length;p++){let y=s[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=p),y.route.id){let{loaderData:v,errors:w}=t,T=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||T){u=!0,m>=0?s=s.slice(0,m+1):s=[s[0]];break}}}return s.reduceRight((p,y,v)=>{let w,T=!1,A=null,k=null;t&&(w=l&&y.route.id?l[y.route.id]:void 0,A=y.route.errorElement||YA,u&&(m<0&&v===0?(rE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,k=null):m===v&&(T=!0,k=y.route.hydrateFallbackElement||null)));let C=e.concat(s.slice(0,v+1)),x=()=>{let I;return w?I=A:T?I=k:y.route.Component?I=G.createElement(y.route.Component,null):y.route.element?I=y.route.element:I=p,G.createElement(XA,{match:y,routeContext:{outlet:p,matches:C,isDataRoute:t!=null},children:I})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?G.createElement(WA,{location:t.location,revalidation:t.revalidation,component:A,error:w,children:x(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):x()},null)}function Zp(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JA(a){let e=G.useContext(Bo);return At(e,Zp(a)),e}function eR(a){let e=G.useContext(od);return At(e,Zp(a)),e}function tR(a){let e=G.useContext(Fr);return At(e,Zp(a)),e}function Jp(a){let e=tR(a),t=e.matches[e.matches.length-1];return At(t.route.id,`${a} can only be used on routes that contain a unique "id"`),t.route.id}function nR(){return Jp("useRouteId")}function rR(){var r;let a=G.useContext(Xp),e=eR("useRouteError"),t=Jp("useRouteError");return a!==void 0?a:(r=e.errors)==null?void 0:r[t]}function aR(){let{router:a}=JA("useNavigate"),e=Jp("useNavigate"),t=G.useRef(!1);return tE(()=>{t.current=!0}),G.useCallback(async(s,l={})=>{pr(t.current,eE),t.current&&(typeof s=="number"?a.navigate(s):await a.navigate(s,{fromRouteId:e,...l}))},[a,e])}var L0={};function rE(a,e,t){!e&&!L0[a]&&(L0[a]=!0,pr(!1,t))}G.memo(iR);function iR({routes:a,future:e,state:t}){return nE(a,void 0,t,e)}function Rn(a){At(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sR({basename:a="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:l=!1}){At(!jc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=a.replace(/^\/*/,"/"),m=G.useMemo(()=>({basename:u,navigator:s,static:l,future:{}}),[u,s,l]);typeof t=="string"&&(t=Lo(t));let{pathname:p="/",search:y="",hash:v="",state:w=null,key:T="default"}=t,A=G.useMemo(()=>{let k=Ca(p,u);return k==null?null:{location:{pathname:k,search:y,hash:v,state:w,key:T},navigationType:r}},[u,p,y,v,w,T,r]);return pr(A!=null,`<Router basename="${u}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:G.createElement(qr.Provider,{value:m},G.createElement(Dc.Provider,{children:e,value:A}))}function oR({children:a,location:e}){return KA(hp(a),e)}function hp(a,e=[]){let t=[];return G.Children.forEach(a,(r,s)=>{if(!G.isValidElement(r))return;let l=[...e,s];if(r.type===G.Fragment){t.push.apply(t,hp(r.props.children,l));return}At(r.type===Rn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),At(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=hp(r.props.children,l)),t.push(u)}),t}var Ah="get",Rh="application/x-www-form-urlencoded";function ld(a){return a!=null&&typeof a.tagName=="string"}function lR(a){return ld(a)&&a.tagName.toLowerCase()==="button"}function cR(a){return ld(a)&&a.tagName.toLowerCase()==="form"}function uR(a){return ld(a)&&a.tagName.toLowerCase()==="input"}function hR(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function dR(a,e){return a.button===0&&(!e||e==="_self")&&!hR(a)}function dp(a=""){return new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((e,t)=>{let r=a[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function fR(a,e){let t=dp(a);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(l=>{t.append(s,l)})}),t}var gh=null;function mR(){if(gh===null)try{new FormData(document.createElement("form"),0),gh=!1}catch{gh=!0}return gh}var pR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gm(a){return a!=null&&!pR.has(a)?(pr(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rh}"`),null):a}function gR(a,e){let t,r,s,l,u;if(cR(a)){let m=a.getAttribute("action");r=m?Ca(m,e):null,t=a.getAttribute("method")||Ah,s=Gm(a.getAttribute("enctype"))||Rh,l=new FormData(a)}else if(lR(a)||uR(a)&&(a.type==="submit"||a.type==="image")){let m=a.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=a.getAttribute("formaction")||m.getAttribute("action");if(r=p?Ca(p,e):null,t=a.getAttribute("formmethod")||m.getAttribute("method")||Ah,s=Gm(a.getAttribute("formenctype"))||Gm(m.getAttribute("enctype"))||Rh,l=new FormData(m,a),!mR()){let{name:y,type:v,value:w}=a;if(v==="image"){let T=y?`${y}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else y&&l.append(y,w)}}else{if(ld(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ah,r=null,s=Rh,u=a}return l&&s==="text/plain"&&(u=l,l=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:l,body:u}}function eg(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}async function yR(a,e){if(a.id in e)return e[a.id];try{let t=await import(a.module);return e[a.id]=t,t}catch(t){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vR(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function _R(a,e,t){let r=await Promise.all(a.map(async s=>{let l=e.routes[s.route.id];if(l){let u=await yR(l,t);return u.links?u.links():[]}return[]}));return TR(r.flat(1).filter(vR).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function B0(a,e,t,r,s,l){let u=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,m=(p,y)=>{var v;return t[y].pathname!==p.pathname||((v=t[y].route.path)==null?void 0:v.endsWith("*"))&&t[y].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,y)=>u(p,y)||m(p,y)):l==="data"?e.filter((p,y)=>{var w;let v=r.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(u(p,y)||m(p,y))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(a,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function wR(a,e,{includeHydrateFallback:t}={}){return bR(a.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function bR(a){return[...new Set(a)]}function ER(a){let e={},t=Object.keys(a).sort();for(let r of t)e[r]=a[r];return e}function TR(a,e){let t=new Set;return new Set(e),a.reduce((r,s)=>{let l=JSON.stringify(ER(s));return t.has(l)||(t.add(l),r.push({key:l,link:s})),r},[])}var SR=new Set([100,101,204,205]);function xR(a,e){let t=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return t.pathname==="/"?t.pathname="_root.data":e&&Ca(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function aE(){let a=G.useContext(Bo);return eg(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function CR(){let a=G.useContext(od);return eg(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var tg=G.createContext(void 0);tg.displayName="FrameworkContext";function iE(){let a=G.useContext(tg);return eg(a,"You must render this element inside a <HydratedRouter> element"),a}function AR(a,e){let t=G.useContext(tg),[r,s]=G.useState(!1),[l,u]=G.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:y,onMouseLeave:v,onTouchStart:w}=e,T=G.useRef(null);G.useEffect(()=>{if(a==="render"&&u(!0),a==="viewport"){let C=I=>{I.forEach(z=>{u(z.isIntersecting)})},x=new IntersectionObserver(C,{threshold:.5});return T.current&&x.observe(T.current),()=>{x.disconnect()}}},[a]),G.useEffect(()=>{if(r){let C=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(C)}}},[r]);let A=()=>{s(!0)},k=()=>{s(!1),u(!1)};return t?a!=="intent"?[l,T,{}]:[l,T,{onFocus:ic(m,A),onBlur:ic(p,k),onMouseEnter:ic(y,A),onMouseLeave:ic(v,k),onTouchStart:ic(w,A)}]:[!1,T,{}]}function ic(a,e){return t=>{a&&a(t),t.defaultPrevented||e(t)}}function RR({page:a,...e}){let{router:t}=aE(),r=G.useMemo(()=>Kb(t.routes,a,t.basename),[t.routes,a,t.basename]);return r?G.createElement(IR,{page:a,matches:r,...e}):null}function kR(a){let{manifest:e,routeModules:t}=iE(),[r,s]=G.useState([]);return G.useEffect(()=>{let l=!1;return _R(a,e,t).then(u=>{l||s(u)}),()=>{l=!0}},[a,e,t]),r}function IR({page:a,matches:e,...t}){let r=xi(),{manifest:s,routeModules:l}=iE(),{basename:u}=aE(),{loaderData:m,matches:p}=CR(),y=G.useMemo(()=>B0(a,e,p,s,r,"data"),[a,e,p,s,r]),v=G.useMemo(()=>B0(a,e,p,s,r,"assets"),[a,e,p,s,r]),w=G.useMemo(()=>{if(a===r.pathname+r.search+r.hash)return[];let k=new Set,C=!1;if(e.forEach(I=>{var L;let z=s.routes[I.route.id];!z||!z.hasLoader||(!y.some(ne=>ne.route.id===I.route.id)&&I.route.id in m&&((L=l[I.route.id])!=null&&L.shouldRevalidate)||z.hasClientLoader?C=!0:k.add(I.route.id))}),k.size===0)return[];let x=xR(a,u);return C&&k.size>0&&x.searchParams.set("_routes",e.filter(I=>k.has(I.route.id)).map(I=>I.route.id).join(",")),[x.pathname+x.search]},[u,m,r,s,y,e,a,l]),T=G.useMemo(()=>wR(v,s),[v,s]),A=kR(v);return G.createElement(G.Fragment,null,w.map(k=>G.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...t})),T.map(k=>G.createElement("link",{key:k,rel:"modulepreload",href:k,...t})),A.map(({key:k,link:C})=>G.createElement("link",{key:k,...C})))}function NR(...a){return e=>{a.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var sE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sE&&(window.__reactRouterVersion="7.5.3")}catch{}function DR({basename:a,children:e,window:t}){let r=G.useRef();r.current==null&&(r.current=vA({window:t,v5Compat:!0}));let s=r.current,[l,u]=G.useState({action:s.action,location:s.location}),m=G.useCallback(p=>{G.startTransition(()=>u(p))},[u]);return G.useLayoutEffect(()=>s.listen(m),[s,m]),G.createElement(sR,{basename:a,children:e,location:l.location,navigationType:l.action,navigator:s})}var oE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Le=G.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:l,replace:u,state:m,target:p,to:y,preventScrollReset:v,viewTransition:w,...T},A){let{basename:k}=G.useContext(qr),C=typeof y=="string"&&oE.test(y),x,I=!1;if(typeof y=="string"&&C&&(x=y,sE))try{let j=new URL(window.location.href),U=y.startsWith("//")?new URL(j.protocol+y):new URL(y),F=Ca(U.pathname,k);U.origin===j.origin&&F!=null?y=F+U.search+U.hash:I=!0}catch{pr(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=HA(y,{relative:s}),[L,ne,oe]=AR(r,T),de=PR(y,{replace:u,state:m,target:p,preventScrollReset:v,relative:s,viewTransition:w});function O(j){e&&e(j),j.defaultPrevented||de(j)}let N=G.createElement("a",{...T,...oe,href:x||z,onClick:I||l?e:O,ref:NR(A,ne),target:p,"data-discover":!C&&t==="render"?"true":void 0});return L&&!C?G.createElement(G.Fragment,null,N,G.createElement(RR,{page:z})):N});Le.displayName="Link";var jR=G.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:l,to:u,viewTransition:m,children:p,...y},v){let w=Mc(u,{relative:y.relative}),T=xi(),A=G.useContext(od),{navigator:k,basename:C}=G.useContext(qr),x=A!=null&&qR(w)&&m===!0,I=k.encodeLocation?k.encodeLocation(w).pathname:w.pathname,z=T.pathname,L=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(z=z.toLowerCase(),L=L?L.toLowerCase():null,I=I.toLowerCase()),L&&C&&(L=Ca(L,C)||L);const ne=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let oe=z===I||!s&&z.startsWith(I)&&z.charAt(ne)==="/",de=L!=null&&(L===I||!s&&L.startsWith(I)&&L.charAt(I.length)==="/"),O={isActive:oe,isPending:de,isTransitioning:x},N=oe?e:void 0,j;typeof r=="function"?j=r(O):j=[r,oe?"active":null,de?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(O):l;return G.createElement(Le,{...y,"aria-current":N,className:j,ref:v,style:U,to:u,viewTransition:m},typeof p=="function"?p(O):p)});jR.displayName="NavLink";var MR=G.forwardRef(({discover:a="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:l,method:u=Ah,action:m,onSubmit:p,relative:y,preventScrollReset:v,viewTransition:w,...T},A)=>{let k=BR(),C=zR(m,{relative:y}),x=u.toLowerCase()==="get"?"get":"post",I=typeof m=="string"&&oE.test(m),z=L=>{if(p&&p(L),L.defaultPrevented)return;L.preventDefault();let ne=L.nativeEvent.submitter,oe=(ne==null?void 0:ne.getAttribute("formmethod"))||u;k(ne||L.currentTarget,{fetcherKey:e,method:oe,navigate:t,replace:s,state:l,relative:y,preventScrollReset:v,viewTransition:w})};return G.createElement("form",{ref:A,method:x,action:C,onSubmit:r?p:z,...T,"data-discover":!I&&a==="render"?"true":void 0})});MR.displayName="Form";function OR(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lE(a){let e=G.useContext(Bo);return At(e,OR(a)),e}function PR(a,{target:e,replace:t,state:r,preventScrollReset:s,relative:l,viewTransition:u}={}){let m=bs(),p=xi(),y=Mc(a,{relative:l});return G.useCallback(v=>{if(dR(v,e)){v.preventDefault();let w=t!==void 0?t:bc(p)===bc(y);m(a,{replace:w,state:r,preventScrollReset:s,relative:l,viewTransition:u})}},[p,m,y,t,r,e,a,s,l,u])}function UR(a){pr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=G.useRef(dp(a)),t=G.useRef(!1),r=xi(),s=G.useMemo(()=>fR(r.search,t.current?null:e.current),[r.search]),l=bs(),u=G.useCallback((m,p)=>{const y=dp(typeof m=="function"?m(s):m);t.current=!0,l("?"+y,p)},[l,s]);return[s,u]}var VR=0,LR=()=>`__${String(++VR)}__`;function BR(){let{router:a}=lE("useSubmit"),{basename:e}=G.useContext(qr),t=nR();return G.useCallback(async(r,s={})=>{let{action:l,method:u,encType:m,formData:p,body:y}=gR(r,e);if(s.navigate===!1){let v=s.fetcherKey||LR();await a.fetch(v,t,s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:y,formMethod:s.method||u,formEncType:s.encType||m,flushSync:s.flushSync})}else await a.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:y,formMethod:s.method||u,formEncType:s.encType||m,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[a,e,t])}function zR(a,{relative:e}={}){let{basename:t}=G.useContext(qr),r=G.useContext(Fr);At(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...Mc(a||".",{relative:e})},u=xi();if(a==null){l.search=u.search;let m=new URLSearchParams(l.search),p=m.getAll("index");if(p.some(v=>v==="")){m.delete("index"),p.filter(w=>w).forEach(w=>m.append("index",w));let v=m.toString();l.search=v?`?${v}`:""}}return(!a||a===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ta([t,l.pathname])),bc(l)}function qR(a,e={}){let t=G.useContext(Jb);At(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=lE("useViewTransitionState"),s=Mc(a,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ca(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Ca(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Bh(s.pathname,u)!=null||Bh(s.pathname,l)!=null}new TextEncoder;[...SR];function FR(){const[a,e]=G.useState([]),[t,r]=G.useState([]),[s,l]=G.useState(!0),[u,m]=G.useState(null),p=[{id:1,name:"Madagascan Dark 72%",maker:"Terroir Artisan",type:"Dark",origin:"Madagascar",cacaoPercentage:72,averageRating:4.8,ratings:186,imageUrl:"https://images.unsplash.com/photo-1599599810769-bcde5a160d32?q=80&w=2069"},{id:2,name:"Sea Salt Caramel",maker:"Wild Coast Chocolate",type:"Dark Milk",origin:"Ecuador",cacaoPercentage:55,averageRating:4.9,ratings:203,imageUrl:"https://images.unsplash.com/photo-1548907040-4d42bfaaa981?q=80&w=2069"},{id:3,name:"Peruvian Single Origin",maker:"Craft Origins",type:"Dark",origin:"Peru",cacaoPercentage:70,averageRating:4.7,ratings:156,imageUrl:"https://images.unsplash.com/photo-1614088685112-0297c8d9e72e?q=80&w=2487"}],y=[{id:"rev1",user:"ChocolateFiend",rating:4.5,text:"The fruity notes in this Madagascar bar are incredible - bright cherry and subtle citrus that lingers beautifully.",date:new Date("2025-04-20"),chocolate:{id:1,name:"Madagascan Dark 72%",maker:"Terroir Artisan",imageUrl:"https://images.unsplash.com/photo-1599599810769-bcde5a160d32?q=80&w=2069"}},{id:"rev2",user:"CocoaExplorer",rating:5,text:"This has to be the most balanced milk chocolate I ever tried. Creamy but not too sweet with complex notes you do not usually find.",date:new Date("2025-04-22"),chocolate:{id:2,name:"Sea Salt Caramel",maker:"Wild Coast Chocolate",imageUrl:"https://images.unsplash.com/photo-1548907040-4d42bfaaa981?q=80&w=2069"}}];G.useEffect(()=>{(async()=>{try{l(!0),setTimeout(()=>{e(p),r(y),l(!1)},1e3)}catch(T){m(T.message),l(!1)}})()},[]);const v=w=>{const T=[],A=Math.floor(w),k=w%1!==0;for(let C=1;C<=5;C++)C<=A?T.push(d.jsx("span",{className:"star filled",children:""},C)):C===A+1&&k?T.push(d.jsx("span",{className:"star half",children:""},C)):T.push(d.jsx("span",{className:"star empty",children:""},C));return T};return s?d.jsx("div",{className:"loading-container",children:d.jsx("p",{children:"Loading..."})}):d.jsxs("div",{className:"home-page",children:[d.jsx("section",{className:"hero-section",children:d.jsx("div",{className:"container",children:d.jsxs("div",{className:"hero-content",children:[d.jsx("h1",{className:"hero-title",children:"Discover Your Perfect Chocolate"}),d.jsx("p",{className:"hero-subtitle",children:"Join our community of chocolate enthusiasts to explore, review, and share the world's finest chocolates"}),d.jsxs("div",{className:"search-container",children:[d.jsx("input",{type:"text",placeholder:"Search for a chocolate, origin, or maker...",className:"search-input"}),d.jsx("button",{className:"search-button",children:"Search"})]}),d.jsxs("div",{className:"hero-actions",children:[d.jsx("a",{href:"/explore",className:"btn btn-primary",children:"Explore Chocolates"}),d.jsx("a",{href:"/join",className:"btn btn-secondary",children:"Join Community"})]})]})})}),d.jsx("section",{className:"stats-section",children:d.jsx("div",{className:"container",children:d.jsxs("div",{className:"stats-wrapper",children:[d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-number",children:"4,823"}),d.jsx("span",{className:"stat-label",children:"Chocolate Lovers"})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-number",children:"1,250+"}),d.jsx("span",{className:"stat-label",children:"Chocolates Reviewed"})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-number",children:"85"}),d.jsx("span",{className:"stat-label",children:"Countries Represented"})]})]})})}),d.jsx("section",{className:"featured-section",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"Featured Chocolates"}),d.jsx("p",{className:"section-subtitle",children:"Exceptional chocolates curated by our community"}),d.jsx("a",{href:"/explore",className:"view-all",children:"View All"})]}),d.jsx("div",{className:"chocolate-cards",children:a.map(w=>d.jsxs("a",{href:`/chocolate/${w.id}`,className:"chocolate-card",children:[d.jsxs("div",{className:"card-image-container",children:[d.jsx("img",{src:w.imageUrl,alt:w.name,className:"card-image"}),d.jsx("div",{className:"card-badge",children:w.type})]}),d.jsxs("div",{className:"card-content",children:[d.jsx("h3",{className:"card-title",children:w.name}),d.jsx("p",{className:"card-maker",children:w.maker}),d.jsxs("div",{className:"card-meta",children:[d.jsx("span",{className:"card-origin",children:w.origin}),d.jsxs("span",{className:"card-percentage",children:[w.cacaoPercentage,"% Cacao"]})]}),d.jsxs("div",{className:"card-rating",children:[d.jsx("div",{className:"rating-stars",children:v(w.averageRating)}),d.jsx("span",{className:"rating-number",children:w.averageRating.toFixed(1)}),d.jsxs("span",{className:"rating-count",children:["(",w.ratings,")"]})]})]})]},w.id))})]})}),d.jsx("section",{className:"categories-section",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"Explore by Category"}),d.jsx("p",{className:"section-subtitle",children:"Find chocolates that match your preferences"})]}),d.jsxs("div",{className:"categories-grid",children:[d.jsxs("a",{href:"/category/dark",className:"category-tile",children:[d.jsx("h3",{className:"category-title",children:"Dark Chocolate"}),d.jsx("p",{className:"category-description",children:"Bold & intense profiles"})]}),d.jsxs("a",{href:"/category/milk",className:"category-tile",children:[d.jsx("h3",{className:"category-title",children:"Milk Chocolate"}),d.jsx("p",{className:"category-description",children:"Creamy & approachable"})]}),d.jsxs("a",{href:"/category/origin",className:"category-tile",children:[d.jsx("h3",{className:"category-title",children:"Single Origin"}),d.jsx("p",{className:"category-description",children:"Distinctive terroir"})]}),d.jsxs("a",{href:"/category/artisan",className:"category-tile",children:[d.jsx("h3",{className:"category-title",children:"Artisan Craft"}),d.jsx("p",{className:"category-description",children:"Small batch excellence"})]})]})]})}),d.jsx("section",{className:"reviews-section",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"Community Reviews"}),d.jsx("p",{className:"section-subtitle",children:"Discover what chocolate lovers are saying"}),d.jsx("a",{href:"/reviews",className:"view-all",children:"View All"})]}),d.jsx("div",{className:"reviews-grid",children:t.map(w=>d.jsxs("div",{className:"review-card",children:[d.jsxs("div",{className:"review-header",children:[d.jsxs("div",{className:"review-user",children:[d.jsx("span",{className:"user-name",children:w.user}),d.jsx("span",{className:"review-date",children:w.date.toLocaleDateString(void 0,{month:"short",day:"numeric"})})]}),d.jsx("div",{className:"review-rating",children:v(w.rating)})]}),d.jsxs("div",{className:"review-chocolate",children:[d.jsx("img",{src:w.chocolate.imageUrl,alt:w.chocolate.name,className:"chocolate-image"}),d.jsxs("div",{className:"chocolate-info",children:[d.jsx("h4",{className:"chocolate-name",children:w.chocolate.name}),d.jsx("p",{className:"chocolate-maker",children:w.chocolate.maker})]})]}),d.jsx("p",{className:"review-text",children:w.text}),d.jsx("a",{href:`/review/${w.id}`,className:"read-more",children:"Read Full Review"})]},w.id))})]})}),d.jsx("section",{className:"how-it-works",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"How Chocly Works"}),d.jsx("p",{className:"section-subtitle",children:"Join our chocolate community in three simple steps"})]}),d.jsxs("div",{className:"steps-container",children:[d.jsxs("div",{className:"step-card",children:[d.jsx("div",{className:"step-number",children:"1"}),d.jsx("h3",{className:"step-title",children:"Discover"}),d.jsx("p",{className:"step-description",children:"Explore our extensive chocolate database and find chocolates based on origin, flavor profile, or maker"})]}),d.jsxs("div",{className:"step-card",children:[d.jsx("div",{className:"step-number",children:"2"}),d.jsx("h3",{className:"step-title",children:"Taste & Rate"}),d.jsx("p",{className:"step-description",children:"Develop your palate by tasting and rating chocolates, tracking your personal chocolate journey"})]}),d.jsxs("div",{className:"step-card",children:[d.jsx("div",{className:"step-number",children:"3"}),d.jsx("h3",{className:"step-title",children:"Connect"}),d.jsx("p",{className:"step-description",children:"Share recommendations, follow fellow chocolate lovers, and join tasting events in your area"})]})]})]})}),d.jsx("section",{className:"cta-section",children:d.jsx("div",{className:"container",children:d.jsxs("div",{className:"cta-content",children:[d.jsx("h2",{className:"cta-title",children:"Ready to join our chocolate community?"}),d.jsx("p",{className:"cta-text",children:"Create a free account to start tracking your tastings, save favorites, and connect with fellow chocolate enthusiasts"}),d.jsxs("div",{className:"cta-buttons",children:[d.jsx("a",{href:"/signup",className:"btn btn-primary",children:"Create Account"}),d.jsx("a",{href:"/explore",className:"btn btn-tertiary",children:"Explore First"})]})]})})})]})}const HR=()=>{};var z0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=function(a){const e=[];let t=0;for(let r=0;r<a.length;r++){let s=a.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<a.length&&(a.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(a.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},GR=function(a){const e=[];let t=0,r=0;for(;t<a.length;){const s=a[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const l=a[t++];e[r++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=a[t++],u=a[t++],m=a[t++],p=((s&7)<<18|(l&63)<<12|(u&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=a[t++],u=a[t++];e[r++]=String.fromCharCode((s&15)<<12|(l&63)<<6|u&63)}}return e.join("")},uE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<a.length;s+=3){const l=a[s],u=s+1<a.length,m=u?a[s+1]:0,p=s+2<a.length,y=p?a[s+2]:0,v=l>>2,w=(l&3)<<4|m>>4;let T=(m&15)<<2|y>>6,A=y&63;p||(A=64,u||(T=64)),r.push(t[v],t[w],t[T],t[A])}return r.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(cE(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):GR(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<a.length;){const l=t[a.charAt(s++)],m=s<a.length?t[a.charAt(s)]:0;++s;const y=s<a.length?t[a.charAt(s)]:64;++s;const w=s<a.length?t[a.charAt(s)]:64;if(++s,l==null||m==null||y==null||w==null)throw new $R;const T=l<<2|m>>4;if(r.push(T),y!==64){const A=m<<4&240|y>>2;if(r.push(A),w!==64){const k=y<<6&192|w;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class $R extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KR=function(a){const e=cE(a);return uE.encodeByteArray(e,!0)},zh=function(a){return KR(a).replace(/\./g,"")},hE=function(a){try{return uE.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=()=>QR().__FIREBASE_DEFAULTS__,WR=()=>{if(typeof process>"u"||typeof z0>"u")return;const a=z0.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},XR=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&hE(a[1]);return e&&JSON.parse(e)},cd=()=>{try{return HR()||YR()||WR()||XR()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},dE=a=>{var e,t;return(t=(e=cd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[a]},fE=a=>{const e=dE(a);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},mE=()=>{var a;return(a=cd())===null||a===void 0?void 0:a.config},pE=a=>{var e;return(e=cd())===null||e===void 0?void 0:e[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=a.iat||0,l=a.sub||a.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},a);return[zh(JSON.stringify(t)),zh(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function e1(){var a;const e=(a=cd())===null||a===void 0?void 0:a.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function n1(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function r1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function a1(){const a=bn();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function i1(){return!e1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s1(){try{return typeof indexedDB=="object"}catch{return!1}}function o1(){return new Promise((a,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),a(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="FirebaseError";class Hr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=l1,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oc.prototype.create)}}class Oc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],u=l?c1(l,r):"Error",m=`${this.serviceName}: ${u} (${s}).`;return new Hr(s,m,r)}}function c1(a,e){return a.replace(u1,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const u1=/\{\$([^}]+)}/g;function h1(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function fs(a,e){if(a===e)return!0;const t=Object.keys(a),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const l=a[s],u=e[s];if(q0(l)&&q0(u)){if(!fs(l,u))return!1}else if(l!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function q0(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(a){const e=[];for(const[t,r]of Object.entries(a))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function cc(a){const e={};return a.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,l]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function uc(a){const e=a.indexOf("?");if(!e)return"";const t=a.indexOf("#",e);return a.substring(e,t>0?t:void 0)}function d1(a,e){const t=new f1(a,e);return t.subscribe.bind(t)}class f1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");m1(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=$m),s.error===void 0&&(s.error=$m),s.complete===void 0&&(s.complete=$m);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function m1(a,e){if(typeof a!="object"||a===null)return!1;for(const t of e)if(t in a&&typeof a[t]=="function")return!0;return!1}function $m(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(a){return a&&a._delegate?a._delegate:a}class yi{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ZR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y1(e))try{this.getOrInitializeService({instanceIdentifier:os})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});r.resolve(l)}catch{}}}}clearInstance(e=os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=os){return this.instances.has(e)}getOptions(e=os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);r===m&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&e(u,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:g1(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=os){return this.component?this.component.multipleInstances?e:os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g1(a){return a===os?void 0:a}function y1(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new p1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Qe||(Qe={}));const _1={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},w1=Qe.INFO,b1={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},E1=(a,e,...t)=>{if(e<a.logLevel)return;const r=new Date().toISOString(),s=b1[e];if(s)console[s](`[${r}]  ${a.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ng{constructor(e){this.name=e,this._logLevel=w1,this._logHandler=E1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const T1=(a,e)=>e.some(t=>a instanceof t);let F0,H0;function S1(){return F0||(F0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function x1(){return H0||(H0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yE=new WeakMap,fp=new WeakMap,vE=new WeakMap,Km=new WeakMap,rg=new WeakMap;function C1(a){const e=new Promise((t,r)=>{const s=()=>{a.removeEventListener("success",l),a.removeEventListener("error",u)},l=()=>{t(fi(a.result)),s()},u=()=>{r(a.error),s()};a.addEventListener("success",l),a.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&yE.set(t,a)}).catch(()=>{}),rg.set(e,a),e}function A1(a){if(fp.has(a))return;const e=new Promise((t,r)=>{const s=()=>{a.removeEventListener("complete",l),a.removeEventListener("error",u),a.removeEventListener("abort",u)},l=()=>{t(),s()},u=()=>{r(a.error||new DOMException("AbortError","AbortError")),s()};a.addEventListener("complete",l),a.addEventListener("error",u),a.addEventListener("abort",u)});fp.set(a,e)}let mp={get(a,e,t){if(a instanceof IDBTransaction){if(e==="done")return fp.get(a);if(e==="objectStoreNames")return a.objectStoreNames||vE.get(a);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fi(a[e])},set(a,e,t){return a[e]=t,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function R1(a){mp=a(mp)}function k1(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=a.call(Qm(this),e,...t);return vE.set(r,e.sort?e.sort():[e]),fi(r)}:x1().includes(a)?function(...e){return a.apply(Qm(this),e),fi(yE.get(this))}:function(...e){return fi(a.apply(Qm(this),e))}}function I1(a){return typeof a=="function"?k1(a):(a instanceof IDBTransaction&&A1(a),T1(a,S1())?new Proxy(a,mp):a)}function fi(a){if(a instanceof IDBRequest)return C1(a);if(Km.has(a))return Km.get(a);const e=I1(a);return e!==a&&(Km.set(a,e),rg.set(e,a)),e}const Qm=a=>rg.get(a);function N1(a,e,{blocked:t,upgrade:r,blocking:s,terminated:l}={}){const u=indexedDB.open(a,e),m=fi(u);return r&&u.addEventListener("upgradeneeded",p=>{r(fi(u.result),p.oldVersion,p.newVersion,fi(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{l&&p.addEventListener("close",()=>l()),s&&p.addEventListener("versionchange",y=>s(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const D1=["get","getKey","getAll","getAllKeys","count"],j1=["put","add","delete","clear"],Ym=new Map;function G0(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(Ym.get(e))return Ym.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=j1.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||D1.includes(t)))return;const l=async function(u,...m){const p=this.transaction(u,s?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),s&&p.done]))[0]};return Ym.set(e,l),l}R1(a=>({...a,get:(e,t,r)=>G0(e,t)||a.get(e,t,r),has:(e,t)=>!!G0(e,t)||a.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(O1(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function O1(a){const e=a.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pp="@firebase/app",$0="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new ng("@firebase/app"),P1="@firebase/app-compat",U1="@firebase/analytics-compat",V1="@firebase/analytics",L1="@firebase/app-check-compat",B1="@firebase/app-check",z1="@firebase/auth",q1="@firebase/auth-compat",F1="@firebase/database",H1="@firebase/data-connect",G1="@firebase/database-compat",$1="@firebase/functions",K1="@firebase/functions-compat",Q1="@firebase/installations",Y1="@firebase/installations-compat",W1="@firebase/messaging",X1="@firebase/messaging-compat",Z1="@firebase/performance",J1="@firebase/performance-compat",ek="@firebase/remote-config",tk="@firebase/remote-config-compat",nk="@firebase/storage",rk="@firebase/storage-compat",ak="@firebase/firestore",ik="@firebase/vertexai",sk="@firebase/firestore-compat",ok="firebase",lk="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="[DEFAULT]",ck={[pp]:"fire-core",[P1]:"fire-core-compat",[V1]:"fire-analytics",[U1]:"fire-analytics-compat",[B1]:"fire-app-check",[L1]:"fire-app-check-compat",[z1]:"fire-auth",[q1]:"fire-auth-compat",[F1]:"fire-rtdb",[H1]:"fire-data-connect",[G1]:"fire-rtdb-compat",[$1]:"fire-fn",[K1]:"fire-fn-compat",[Q1]:"fire-iid",[Y1]:"fire-iid-compat",[W1]:"fire-fcm",[X1]:"fire-fcm-compat",[Z1]:"fire-perf",[J1]:"fire-perf-compat",[ek]:"fire-rc",[tk]:"fire-rc-compat",[nk]:"fire-gcs",[rk]:"fire-gcs-compat",[ak]:"fire-fst",[sk]:"fire-fst-compat",[ik]:"fire-vertex","fire-js":"fire-js",[ok]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Map,uk=new Map,yp=new Map;function K0(a,e){try{a.container.addComponent(e)}catch(t){Aa.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,t)}}function ms(a){const e=a.name;if(yp.has(e))return Aa.debug(`There were multiple attempts to register component ${e}.`),!1;yp.set(e,a);for(const t of qh.values())K0(t,a);for(const t of uk.values())K0(t,a);return!0}function ud(a,e){const t=a.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),a.container.getProvider(e)}function Mn(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mi=new Oc("app","Firebase",hk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=lk;function _E(a,e={}){let t=a;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw mi.create("bad-app-name",{appName:String(s)});if(t||(t=mE()),!t)throw mi.create("no-options");const l=qh.get(s);if(l){if(fs(t,l.options)&&fs(r,l.config))return l;throw mi.create("duplicate-app",{appName:s})}const u=new v1(s);for(const p of yp.values())u.addComponent(p);const m=new dk(t,r,u);return qh.set(s,m),m}function ag(a=gp){const e=qh.get(a);if(!e&&a===gp&&mE())return _E();if(!e)throw mi.create("no-app",{appName:a});return e}function Pr(a,e,t){var r;let s=(r=ck[a])!==null&&r!==void 0?r:a;t&&(s+=`-${t}`);const l=s.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const m=[`Unable to register library "${s}" with version "${e}":`];l&&m.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&m.push("and"),u&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Aa.warn(m.join(" "));return}ms(new yi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="firebase-heartbeat-database",mk=1,Ec="firebase-heartbeat-store";let Wm=null;function wE(){return Wm||(Wm=N1(fk,mk,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(Ec)}catch(t){console.warn(t)}}}}).catch(a=>{throw mi.create("idb-open",{originalErrorMessage:a.message})})),Wm}async function pk(a){try{const t=(await wE()).transaction(Ec),r=await t.objectStore(Ec).get(bE(a));return await t.done,r}catch(e){if(e instanceof Hr)Aa.warn(e.message);else{const t=mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Aa.warn(t.message)}}}async function Q0(a,e){try{const r=(await wE()).transaction(Ec,"readwrite");await r.objectStore(Ec).put(e,bE(a)),await r.done}catch(t){if(t instanceof Hr)Aa.warn(t.message);else{const r=mi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Aa.warn(r.message)}}}function bE(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=1024,yk=30;class vk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wk(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Y0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>yk){const u=bk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Aa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Y0(),{heartbeatsToSend:r,unsentEntries:s}=_k(this._heartbeatsCache.heartbeats),l=zh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Aa.warn(t),""}}}function Y0(){return new Date().toISOString().substring(0,10)}function _k(a,e=gk){const t=[];let r=a.slice();for(const s of a){const l=t.find(u=>u.agent===s.agent);if(l){if(l.dates.push(s.date),W0(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),W0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class wk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s1()?o1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await pk(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Q0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Q0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function W0(a){return zh(JSON.stringify({version:2,heartbeats:a})).length}function bk(a){if(a.length===0)return-1;let e=0,t=a[0].date;for(let r=1;r<a.length;r++)a[r].date<t&&(t=a[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(a){ms(new yi("platform-logger",e=>new M1(e),"PRIVATE")),ms(new yi("heartbeat",e=>new vk(e),"PRIVATE")),Pr(pp,$0,a),Pr(pp,$0,"esm2017"),Pr("fire-js","")}Ek("");var X0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pi,EE;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,N){function j(){}j.prototype=N.prototype,O.D=N.prototype,O.prototype=new j,O.prototype.constructor=O,O.C=function(U,F,$){for(var P=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)P[Tt-2]=arguments[Tt];return N.prototype[F].apply(U,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(O,N,j){j||(j=0);var U=Array(16);if(typeof N=="string")for(var F=0;16>F;++F)U[F]=N.charCodeAt(j++)|N.charCodeAt(j++)<<8|N.charCodeAt(j++)<<16|N.charCodeAt(j++)<<24;else for(F=0;16>F;++F)U[F]=N[j++]|N[j++]<<8|N[j++]<<16|N[j++]<<24;N=O.g[0],j=O.g[1],F=O.g[2];var $=O.g[3],P=N+($^j&(F^$))+U[0]+3614090360&4294967295;N=j+(P<<7&4294967295|P>>>25),P=$+(F^N&(j^F))+U[1]+3905402710&4294967295,$=N+(P<<12&4294967295|P>>>20),P=F+(j^$&(N^j))+U[2]+606105819&4294967295,F=$+(P<<17&4294967295|P>>>15),P=j+(N^F&($^N))+U[3]+3250441966&4294967295,j=F+(P<<22&4294967295|P>>>10),P=N+($^j&(F^$))+U[4]+4118548399&4294967295,N=j+(P<<7&4294967295|P>>>25),P=$+(F^N&(j^F))+U[5]+1200080426&4294967295,$=N+(P<<12&4294967295|P>>>20),P=F+(j^$&(N^j))+U[6]+2821735955&4294967295,F=$+(P<<17&4294967295|P>>>15),P=j+(N^F&($^N))+U[7]+4249261313&4294967295,j=F+(P<<22&4294967295|P>>>10),P=N+($^j&(F^$))+U[8]+1770035416&4294967295,N=j+(P<<7&4294967295|P>>>25),P=$+(F^N&(j^F))+U[9]+2336552879&4294967295,$=N+(P<<12&4294967295|P>>>20),P=F+(j^$&(N^j))+U[10]+4294925233&4294967295,F=$+(P<<17&4294967295|P>>>15),P=j+(N^F&($^N))+U[11]+2304563134&4294967295,j=F+(P<<22&4294967295|P>>>10),P=N+($^j&(F^$))+U[12]+1804603682&4294967295,N=j+(P<<7&4294967295|P>>>25),P=$+(F^N&(j^F))+U[13]+4254626195&4294967295,$=N+(P<<12&4294967295|P>>>20),P=F+(j^$&(N^j))+U[14]+2792965006&4294967295,F=$+(P<<17&4294967295|P>>>15),P=j+(N^F&($^N))+U[15]+1236535329&4294967295,j=F+(P<<22&4294967295|P>>>10),P=N+(F^$&(j^F))+U[1]+4129170786&4294967295,N=j+(P<<5&4294967295|P>>>27),P=$+(j^F&(N^j))+U[6]+3225465664&4294967295,$=N+(P<<9&4294967295|P>>>23),P=F+(N^j&($^N))+U[11]+643717713&4294967295,F=$+(P<<14&4294967295|P>>>18),P=j+($^N&(F^$))+U[0]+3921069994&4294967295,j=F+(P<<20&4294967295|P>>>12),P=N+(F^$&(j^F))+U[5]+3593408605&4294967295,N=j+(P<<5&4294967295|P>>>27),P=$+(j^F&(N^j))+U[10]+38016083&4294967295,$=N+(P<<9&4294967295|P>>>23),P=F+(N^j&($^N))+U[15]+3634488961&4294967295,F=$+(P<<14&4294967295|P>>>18),P=j+($^N&(F^$))+U[4]+3889429448&4294967295,j=F+(P<<20&4294967295|P>>>12),P=N+(F^$&(j^F))+U[9]+568446438&4294967295,N=j+(P<<5&4294967295|P>>>27),P=$+(j^F&(N^j))+U[14]+3275163606&4294967295,$=N+(P<<9&4294967295|P>>>23),P=F+(N^j&($^N))+U[3]+4107603335&4294967295,F=$+(P<<14&4294967295|P>>>18),P=j+($^N&(F^$))+U[8]+1163531501&4294967295,j=F+(P<<20&4294967295|P>>>12),P=N+(F^$&(j^F))+U[13]+2850285829&4294967295,N=j+(P<<5&4294967295|P>>>27),P=$+(j^F&(N^j))+U[2]+4243563512&4294967295,$=N+(P<<9&4294967295|P>>>23),P=F+(N^j&($^N))+U[7]+1735328473&4294967295,F=$+(P<<14&4294967295|P>>>18),P=j+($^N&(F^$))+U[12]+2368359562&4294967295,j=F+(P<<20&4294967295|P>>>12),P=N+(j^F^$)+U[5]+4294588738&4294967295,N=j+(P<<4&4294967295|P>>>28),P=$+(N^j^F)+U[8]+2272392833&4294967295,$=N+(P<<11&4294967295|P>>>21),P=F+($^N^j)+U[11]+1839030562&4294967295,F=$+(P<<16&4294967295|P>>>16),P=j+(F^$^N)+U[14]+4259657740&4294967295,j=F+(P<<23&4294967295|P>>>9),P=N+(j^F^$)+U[1]+2763975236&4294967295,N=j+(P<<4&4294967295|P>>>28),P=$+(N^j^F)+U[4]+1272893353&4294967295,$=N+(P<<11&4294967295|P>>>21),P=F+($^N^j)+U[7]+4139469664&4294967295,F=$+(P<<16&4294967295|P>>>16),P=j+(F^$^N)+U[10]+3200236656&4294967295,j=F+(P<<23&4294967295|P>>>9),P=N+(j^F^$)+U[13]+681279174&4294967295,N=j+(P<<4&4294967295|P>>>28),P=$+(N^j^F)+U[0]+3936430074&4294967295,$=N+(P<<11&4294967295|P>>>21),P=F+($^N^j)+U[3]+3572445317&4294967295,F=$+(P<<16&4294967295|P>>>16),P=j+(F^$^N)+U[6]+76029189&4294967295,j=F+(P<<23&4294967295|P>>>9),P=N+(j^F^$)+U[9]+3654602809&4294967295,N=j+(P<<4&4294967295|P>>>28),P=$+(N^j^F)+U[12]+3873151461&4294967295,$=N+(P<<11&4294967295|P>>>21),P=F+($^N^j)+U[15]+530742520&4294967295,F=$+(P<<16&4294967295|P>>>16),P=j+(F^$^N)+U[2]+3299628645&4294967295,j=F+(P<<23&4294967295|P>>>9),P=N+(F^(j|~$))+U[0]+4096336452&4294967295,N=j+(P<<6&4294967295|P>>>26),P=$+(j^(N|~F))+U[7]+1126891415&4294967295,$=N+(P<<10&4294967295|P>>>22),P=F+(N^($|~j))+U[14]+2878612391&4294967295,F=$+(P<<15&4294967295|P>>>17),P=j+($^(F|~N))+U[5]+4237533241&4294967295,j=F+(P<<21&4294967295|P>>>11),P=N+(F^(j|~$))+U[12]+1700485571&4294967295,N=j+(P<<6&4294967295|P>>>26),P=$+(j^(N|~F))+U[3]+2399980690&4294967295,$=N+(P<<10&4294967295|P>>>22),P=F+(N^($|~j))+U[10]+4293915773&4294967295,F=$+(P<<15&4294967295|P>>>17),P=j+($^(F|~N))+U[1]+2240044497&4294967295,j=F+(P<<21&4294967295|P>>>11),P=N+(F^(j|~$))+U[8]+1873313359&4294967295,N=j+(P<<6&4294967295|P>>>26),P=$+(j^(N|~F))+U[15]+4264355552&4294967295,$=N+(P<<10&4294967295|P>>>22),P=F+(N^($|~j))+U[6]+2734768916&4294967295,F=$+(P<<15&4294967295|P>>>17),P=j+($^(F|~N))+U[13]+1309151649&4294967295,j=F+(P<<21&4294967295|P>>>11),P=N+(F^(j|~$))+U[4]+4149444226&4294967295,N=j+(P<<6&4294967295|P>>>26),P=$+(j^(N|~F))+U[11]+3174756917&4294967295,$=N+(P<<10&4294967295|P>>>22),P=F+(N^($|~j))+U[2]+718787259&4294967295,F=$+(P<<15&4294967295|P>>>17),P=j+($^(F|~N))+U[9]+3951481745&4294967295,O.g[0]=O.g[0]+N&4294967295,O.g[1]=O.g[1]+(F+(P<<21&4294967295|P>>>11))&4294967295,O.g[2]=O.g[2]+F&4294967295,O.g[3]=O.g[3]+$&4294967295}r.prototype.u=function(O,N){N===void 0&&(N=O.length);for(var j=N-this.blockSize,U=this.B,F=this.h,$=0;$<N;){if(F==0)for(;$<=j;)s(this,O,$),$+=this.blockSize;if(typeof O=="string"){for(;$<N;)if(U[F++]=O.charCodeAt($++),F==this.blockSize){s(this,U),F=0;break}}else for(;$<N;)if(U[F++]=O[$++],F==this.blockSize){s(this,U),F=0;break}}this.h=F,this.o+=N},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var N=1;N<O.length-8;++N)O[N]=0;var j=8*this.o;for(N=O.length-8;N<O.length;++N)O[N]=j&255,j/=256;for(this.u(O),O=Array(16),N=j=0;4>N;++N)for(var U=0;32>U;U+=8)O[j++]=this.g[N]>>>U&255;return O};function l(O,N){var j=m;return Object.prototype.hasOwnProperty.call(j,O)?j[O]:j[O]=N(O)}function u(O,N){this.h=N;for(var j=[],U=!0,F=O.length-1;0<=F;F--){var $=O[F]|0;U&&$==N||(j[F]=$,U=!1)}this.g=j}var m={};function p(O){return-128<=O&&128>O?l(O,function(N){return new u([N|0],0>N?-1:0)}):new u([O|0],0>O?-1:0)}function y(O){if(isNaN(O)||!isFinite(O))return w;if(0>O)return x(y(-O));for(var N=[],j=1,U=0;O>=j;U++)N[U]=O/j|0,j*=4294967296;return new u(N,0)}function v(O,N){if(O.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(O.charAt(0)=="-")return x(v(O.substring(1),N));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=y(Math.pow(N,8)),U=w,F=0;F<O.length;F+=8){var $=Math.min(8,O.length-F),P=parseInt(O.substring(F,F+$),N);8>$?($=y(Math.pow(N,$)),U=U.j($).add(y(P))):(U=U.j(j),U=U.add(y(P)))}return U}var w=p(0),T=p(1),A=p(16777216);a=u.prototype,a.m=function(){if(C(this))return-x(this).m();for(var O=0,N=1,j=0;j<this.g.length;j++){var U=this.i(j);O+=(0<=U?U:4294967296+U)*N,N*=4294967296}return O},a.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(k(this))return"0";if(C(this))return"-"+x(this).toString(O);for(var N=y(Math.pow(O,6)),j=this,U="";;){var F=ne(j,N).g;j=I(j,F.j(N));var $=((0<j.g.length?j.g[0]:j.h)>>>0).toString(O);if(j=F,k(j))return $+U;for(;6>$.length;)$="0"+$;U=$+U}},a.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function k(O){if(O.h!=0)return!1;for(var N=0;N<O.g.length;N++)if(O.g[N]!=0)return!1;return!0}function C(O){return O.h==-1}a.l=function(O){return O=I(this,O),C(O)?-1:k(O)?0:1};function x(O){for(var N=O.g.length,j=[],U=0;U<N;U++)j[U]=~O.g[U];return new u(j,~O.h).add(T)}a.abs=function(){return C(this)?x(this):this},a.add=function(O){for(var N=Math.max(this.g.length,O.g.length),j=[],U=0,F=0;F<=N;F++){var $=U+(this.i(F)&65535)+(O.i(F)&65535),P=($>>>16)+(this.i(F)>>>16)+(O.i(F)>>>16);U=P>>>16,$&=65535,P&=65535,j[F]=P<<16|$}return new u(j,j[j.length-1]&-2147483648?-1:0)};function I(O,N){return O.add(x(N))}a.j=function(O){if(k(this)||k(O))return w;if(C(this))return C(O)?x(this).j(x(O)):x(x(this).j(O));if(C(O))return x(this.j(x(O)));if(0>this.l(A)&&0>O.l(A))return y(this.m()*O.m());for(var N=this.g.length+O.g.length,j=[],U=0;U<2*N;U++)j[U]=0;for(U=0;U<this.g.length;U++)for(var F=0;F<O.g.length;F++){var $=this.i(U)>>>16,P=this.i(U)&65535,Tt=O.i(F)>>>16,ht=O.i(F)&65535;j[2*U+2*F]+=P*ht,z(j,2*U+2*F),j[2*U+2*F+1]+=$*ht,z(j,2*U+2*F+1),j[2*U+2*F+1]+=P*Tt,z(j,2*U+2*F+1),j[2*U+2*F+2]+=$*Tt,z(j,2*U+2*F+2)}for(U=0;U<N;U++)j[U]=j[2*U+1]<<16|j[2*U];for(U=N;U<2*N;U++)j[U]=0;return new u(j,0)};function z(O,N){for(;(O[N]&65535)!=O[N];)O[N+1]+=O[N]>>>16,O[N]&=65535,N++}function L(O,N){this.g=O,this.h=N}function ne(O,N){if(k(N))throw Error("division by zero");if(k(O))return new L(w,w);if(C(O))return N=ne(x(O),N),new L(x(N.g),x(N.h));if(C(N))return N=ne(O,x(N)),new L(x(N.g),N.h);if(30<O.g.length){if(C(O)||C(N))throw Error("slowDivide_ only works with positive integers.");for(var j=T,U=N;0>=U.l(O);)j=oe(j),U=oe(U);var F=de(j,1),$=de(U,1);for(U=de(U,2),j=de(j,2);!k(U);){var P=$.add(U);0>=P.l(O)&&(F=F.add(j),$=P),U=de(U,1),j=de(j,1)}return N=I(O,F.j(N)),new L(F,N)}for(F=w;0<=O.l(N);){for(j=Math.max(1,Math.floor(O.m()/N.m())),U=Math.ceil(Math.log(j)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),$=y(j),P=$.j(N);C(P)||0<P.l(O);)j-=U,$=y(j),P=$.j(N);k($)&&($=T),F=F.add($),O=I(O,P)}return new L(F,O)}a.A=function(O){return ne(this,O).h},a.and=function(O){for(var N=Math.max(this.g.length,O.g.length),j=[],U=0;U<N;U++)j[U]=this.i(U)&O.i(U);return new u(j,this.h&O.h)},a.or=function(O){for(var N=Math.max(this.g.length,O.g.length),j=[],U=0;U<N;U++)j[U]=this.i(U)|O.i(U);return new u(j,this.h|O.h)},a.xor=function(O){for(var N=Math.max(this.g.length,O.g.length),j=[],U=0;U<N;U++)j[U]=this.i(U)^O.i(U);return new u(j,this.h^O.h)};function oe(O){for(var N=O.g.length+1,j=[],U=0;U<N;U++)j[U]=O.i(U)<<1|O.i(U-1)>>>31;return new u(j,O.h)}function de(O,N){var j=N>>5;N%=32;for(var U=O.g.length-j,F=[],$=0;$<U;$++)F[$]=0<N?O.i($+j)>>>N|O.i($+j+1)<<32-N:O.i($+j);return new u(F,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,EE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,pi=u}).apply(typeof X0<"u"?X0:typeof self<"u"?self:typeof window<"u"?window:{});var yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TE,hc,SE,kh,vp,xE,CE,AE;(function(){var a,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,b){return h==Array.prototype||h==Object.prototype||(h[_]=b.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof yh=="object"&&yh];for(var _=0;_<h.length;++_){var b=h[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function s(h,_){if(_)e:{var b=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var Y=h[R];if(!(Y in b))break e;b=b[Y]}h=h[h.length-1],R=b[h],_=_(R),_!=R&&_!=null&&e(b,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var b=0,R=!1,Y={next:function(){if(!R&&b<h.length){var re=b++;return{value:_(re,h[re]),done:!1}}return R=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(h){return h||function(){return l(this,function(_,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},m=this||self;function p(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function y(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function v(h,_,b){return h.call.apply(h.bind,arguments)}function w(h,_,b){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,R),h.apply(_,Y)}}return function(){return h.apply(_,arguments)}}function T(h,_,b){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,T.apply(null,arguments)}function A(h,_){var b=Array.prototype.slice.call(arguments,1);return function(){var R=b.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function k(h,_){function b(){}b.prototype=_.prototype,h.aa=_.prototype,h.prototype=new b,h.prototype.constructor=h,h.Qb=function(R,Y,re){for(var fe=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)fe[Ze-2]=arguments[Ze];return _.prototype[Y].apply(R,fe)}}function C(h){const _=h.length;if(0<_){const b=Array(_);for(let R=0;R<_;R++)b[R]=h[R];return b}return[]}function x(h,_){for(let b=1;b<arguments.length;b++){const R=arguments[b];if(p(R)){const Y=h.length||0,re=R.length||0;h.length=Y+re;for(let fe=0;fe<re;fe++)h[Y+fe]=R[fe]}else h.push(R)}}class I{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function z(h){return/^[\s\xa0]*$/.test(h)}function L(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function ne(h){return ne[" "](h),h}ne[" "]=function(){};var oe=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function de(h,_,b){for(const R in h)_.call(b,h[R],R,h)}function O(h,_){for(const b in h)_.call(void 0,h[b],b,h)}function N(h){const _={};for(const b in h)_[b]=h[b];return _}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,_){let b,R;for(let Y=1;Y<arguments.length;Y++){R=arguments[Y];for(b in R)h[b]=R[b];for(let re=0;re<j.length;re++)b=j[re],Object.prototype.hasOwnProperty.call(R,b)&&(h[b]=R[b])}}function F(h){var _=1;h=h.split(":");const b=[];for(;0<_&&h.length;)b.push(h.shift()),_--;return h.length&&b.push(h.join(":")),b}function $(h){m.setTimeout(()=>{throw h},0)}function P(){var h=Be;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class Tt{constructor(){this.h=this.g=null}add(_,b){const R=ht.get();R.set(_,b),this.h?this.h.next=R:this.g=R,this.h=R}}var ht=new I(()=>new ae,h=>h.reset());class ae{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let me,be=!1,Be=new Tt,B=()=>{const h=m.Promise.resolve(void 0);me=()=>{h.then(he)}};var he=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(b){$(b)}var _=ht;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}be=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};m.addEventListener("test",b,_),m.removeEventListener("test",b,_)}catch{}return h}();function Z(h,_){if(D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var b=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(oe){e:{try{ne(_.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(_=null)}}else b=="mouseover"?_=h.fromElement:b=="mouseout"&&(_=h.toElement);this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:V[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Z.aa.h.call(this)}}k(Z,D);var V={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),te=0;function Ae(h,_,b,R,Y){this.listener=h,this.proxy=null,this.src=_,this.type=b,this.capture=!!R,this.ha=Y,this.key=++te,this.da=this.fa=!1}function Fe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ge(h){this.src=h,this.g={},this.h=0}ge.prototype.add=function(h,_,b,R,Y){var re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);var fe=xe(h,_,R,Y);return-1<fe?(_=h[fe],b||(_.fa=!1)):(_=new Ae(_,this.src,re,!!R,Y),_.fa=b,h.push(_)),_};function pe(h,_){var b=_.type;if(b in h.g){var R=h.g[b],Y=Array.prototype.indexOf.call(R,_,void 0),re;(re=0<=Y)&&Array.prototype.splice.call(R,Y,1),re&&(Fe(_),h.g[b].length==0&&(delete h.g[b],h.h--))}}function xe(h,_,b,R){for(var Y=0;Y<h.length;++Y){var re=h[Y];if(!re.da&&re.listener==_&&re.capture==!!b&&re.ha==R)return Y}return-1}var Oe="closure_lm_"+(1e6*Math.random()|0),We={};function ye(h,_,b,R,Y){if(Array.isArray(_)){for(var re=0;re<_.length;re++)ye(h,_[re],b,R,Y);return null}return b=xt(b),h&&h[ve]?h.K(_,b,y(R)?!!R.capture:!1,Y):Me(h,_,b,!1,R,Y)}function Me(h,_,b,R,Y,re){if(!_)throw Error("Invalid event type");var fe=y(Y)?!!Y.capture:!!Y,Ze=En(h);if(Ze||(h[Oe]=Ze=new ge(h)),b=Ze.add(_,b,R,fe,re),b.proxy)return b;if(R=St(),b.proxy=R,R.src=h,R.listener=b,h.addEventListener)K||(Y=fe),Y===void 0&&(Y=!1),h.addEventListener(_.toString(),R,Y);else if(h.attachEvent)h.attachEvent(nt(_.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return b}function St(){function h(b){return _.call(h.src,h.listener,b)}const _=pn;return h}function Xe(h,_,b,R,Y){if(Array.isArray(_))for(var re=0;re<_.length;re++)Xe(h,_[re],b,R,Y);else R=y(R)?!!R.capture:!!R,b=xt(b),h&&h[ve]?(h=h.i,_=String(_).toString(),_ in h.g&&(re=h.g[_],b=xe(re,b,R,Y),-1<b&&(Fe(re[b]),Array.prototype.splice.call(re,b,1),re.length==0&&(delete h.g[_],h.h--)))):h&&(h=En(h))&&(_=h.g[_.toString()],h=-1,_&&(h=xe(_,b,R,Y)),(b=-1<h?_[h]:null)&&Te(b))}function Te(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[ve])pe(_.i,h);else{var b=h.type,R=h.proxy;_.removeEventListener?_.removeEventListener(b,R,h.capture):_.detachEvent?_.detachEvent(nt(b),R):_.addListener&&_.removeListener&&_.removeListener(R),(b=En(_))?(pe(b,h),b.h==0&&(b.src=null,_[Oe]=null)):Fe(h)}}}function nt(h){return h in We?We[h]:We[h]="on"+h}function pn(h,_){if(h.da)h=!0;else{_=new Z(_,this);var b=h.listener,R=h.ha||h.src;h.fa&&Te(h),h=b.call(R,_)}return h}function En(h){return h=h[Oe],h instanceof ge?h:null}var Gt="__closure_events_fn_"+(1e9*Math.random()>>>0);function xt(h){return typeof h=="function"?h:(h[Gt]||(h[Gt]=function(_){return h.handleEvent(_)}),h[Gt])}function gt(){H.call(this),this.i=new ge(this),this.M=this,this.F=null}k(gt,H),gt.prototype[ve]=!0,gt.prototype.removeEventListener=function(h,_,b,R){Xe(this,h,_,b,R)};function Ke(h,_){var b,R=h.F;if(R)for(b=[];R;R=R.F)b.push(R);if(h=h.M,R=_.type||_,typeof _=="string")_=new D(_,h);else if(_ instanceof D)_.target=_.target||h;else{var Y=_;_=new D(R,h),U(_,Y)}if(Y=!0,b)for(var re=b.length-1;0<=re;re--){var fe=_.g=b[re];Y=Ie(fe,R,!0,_)&&Y}if(fe=_.g=h,Y=Ie(fe,R,!0,_)&&Y,Y=Ie(fe,R,!1,_)&&Y,b)for(re=0;re<b.length;re++)fe=_.g=b[re],Y=Ie(fe,R,!1,_)&&Y}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var b=h.g[_],R=0;R<b.length;R++)Fe(b[R]);delete h.g[_],h.h--}}this.F=null},gt.prototype.K=function(h,_,b,R){return this.i.add(String(h),_,!1,b,R)},gt.prototype.L=function(h,_,b,R){return this.i.add(String(h),_,!0,b,R)};function Ie(h,_,b,R){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var Y=!0,re=0;re<_.length;++re){var fe=_[re];if(fe&&!fe.da&&fe.capture==b){var Ze=fe.listener,Kt=fe.ha||fe.src;fe.fa&&pe(h.i,fe),Y=Ze.call(Kt,R)!==!1&&Y}}return Y&&!R.defaultPrevented}function rt(h,_,b){if(typeof h=="function")b&&(h=T(h,b));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:m.setTimeout(h,_||0)}function Qc(h){h.g=rt(()=>{h.g=null,h.i&&(h.i=!1,Qc(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Ld extends H{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Qc(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ri(h){H.call(this),this.h=h,this.g={}}k(Ri,H);var ki=[];function Ii(h){de(h.g,function(_,b){this.g.hasOwnProperty(b)&&Te(_)},h),h.g={}}Ri.prototype.N=function(){Ri.aa.N.call(this),Ii(this)},Ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sr=m.JSON.stringify,Cs=m.JSON.parse,Ni=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function Xo(){}Xo.prototype.h=null;function Zo(h){return h.h||(h.h=h.i())}function Jo(){}var Kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qr(){D.call(this,"d")}k(Qr,D);function el(){D.call(this,"c")}k(el,D);var vr={},tl=null;function Ma(){return tl=tl||new gt}vr.La="serverreachability";function As(h){D.call(this,vr.La,h)}k(As,D);function Oa(h){const _=Ma();Ke(_,new As(_))}vr.STAT_EVENT="statevent";function Yc(h,_){D.call(this,vr.STAT_EVENT,h),this.stat=_}k(Yc,D);function bt(h){const _=Ma();Ke(_,new Yc(_,h))}vr.Ma="timingevent";function $t(h,_){D.call(this,vr.Ma,h),this.size=_}k($t,D);function Lt(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},_)}function $n(){this.g=!0}$n.prototype.xa=function(){this.g=!1};function nl(h,_,b,R,Y,re){h.info(function(){if(h.g)if(re)for(var fe="",Ze=re.split("&"),Kt=0;Kt<Ze.length;Kt++){var Je=Ze[Kt].split("=");if(1<Je.length){var en=Je[0];Je=Je[1];var Qt=en.split("_");fe=2<=Qt.length&&Qt[1]=="type"?fe+(en+"="+Je+"&"):fe+(en+"=redacted&")}}else fe=null;else fe=re;return"XMLHTTP REQ ("+R+") [attempt "+Y+"]: "+_+`
`+b+`
`+fe})}function Bd(h,_,b,R,Y,re,fe){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+Y+"]: "+_+`
`+b+`
`+re+" "+fe})}function Pa(h,_,b,R){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Di(h,b)+(R?" "+R:"")})}function Wc(h,_){h.info(function(){return"TIMEOUT: "+_})}$n.prototype.info=function(){};function Di(h,_){if(!h.g)return _;if(!_)return null;try{var b=JSON.parse(_);if(b){for(h=0;h<b.length;h++)if(Array.isArray(b[h])){var R=b[h];if(!(2>R.length)){var Y=R[1];if(Array.isArray(Y)&&!(1>Y.length)){var re=Y[0];if(re!="noop"&&re!="stop"&&re!="close")for(var fe=1;fe<Y.length;fe++)Y[fe]=""}}}}return sr(b)}catch{return _}}var Ua={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_r;function wr(){}k(wr,Xo),wr.prototype.g=function(){return new XMLHttpRequest},wr.prototype.i=function(){return{}},_r=new wr;function Tn(h,_,b,R){this.j=h,this.i=_,this.l=b,this.R=R||1,this.U=new Ri(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ot}function Ot(){this.i=null,this.g="",this.h=!1}var rl={},Rs={};function or(h,_,b){h.L=1,h.v=Ui(Pn(_)),h.m=b,h.P=!0,Wr(h,null)}function Wr(h,_){h.F=Date.now(),ji(h),h.A=Pn(h.v);var b=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),cl(b.i,"t",R),h.C=0,b=h.j.J,h.h=new Ot,h.g=du(h.j,b?_:null,!h.m),0<h.O&&(h.M=new Ld(T(h.Y,h,h.g),h.O)),_=h.U,b=h.g,R=h.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(ki[0]=Y.toString()),Y=ki);for(var re=0;re<Y.length;re++){var fe=ye(b,Y[re],R||_.handleEvent,!1,_.h||_);if(!fe)break;_.g[fe.key]=fe}_=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Oa(),nl(h.i,h.u,h.A,h.l,h.R,h.m)}Tn.prototype.ca=function(h){h=h.target;const _=this.M;_&&Wn(h)==3?_.j():this.Y(h)},Tn.prototype.Y=function(h){try{if(h==this.g)e:{const Qt=Wn(this.g);var _=this.g.Ba();const aa=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||au(this.g)))){this.J||Qt!=4||_==7||(_==8||0>=aa?Oa(3):Oa(2)),Va(this);var b=this.g.Z();this.X=b;t:if(Xc(this)){var R=au(this.g);h="";var Y=R.length,re=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sn(this),br(this);var fe="";break t}this.h.i=new m.TextDecoder}for(_=0;_<Y;_++)this.h.h=!0,h+=this.h.i.decode(R[_],{stream:!(re&&_==Y-1)});R.length=0,this.h.g+=h,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=b==200,Bd(this.i,this.u,this.A,this.l,this.R,Qt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,Kt=this.g;if((Ze=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Ze)){var Je=Ze;break t}}Je=null}if(b=Je)Pa(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mi(this,b);else{this.o=!1,this.s=3,bt(12),sn(this),br(this);break e}}if(this.P){b=!0;let on;for(;!this.J&&this.C<fe.length;)if(on=Zc(this,fe),on==Rs){Qt==4&&(this.s=4,bt(14),b=!1),Pa(this.i,this.l,null,"[Incomplete Response]");break}else if(on==rl){this.s=4,bt(15),Pa(this.i,this.l,fe,"[Invalid Chunk]"),b=!1;break}else Pa(this.i,this.l,on,null),Mi(this,on);if(Xc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||fe.length!=0||this.h.h||(this.s=1,bt(16),b=!1),this.o=this.o&&b,!b)Pa(this.i,this.l,fe,"[Invalid Chunked Response]"),sn(this),br(this);else if(0<fe.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),Gi(en),en.M=!0,bt(11))}}else Pa(this.i,this.l,fe,null),Mi(this,fe);Qt==4&&sn(this),this.o&&!this.J&&(Qt==4?cu(this.j,this):(this.o=!1,ji(this)))}else Gd(this.g),b==400&&0<fe.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),sn(this),br(this)}}}catch{}finally{}};function Xc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Zc(h,_){var b=h.C,R=_.indexOf(`
`,b);return R==-1?Rs:(b=Number(_.substring(b,R)),isNaN(b)?rl:(R+=1,R+b>_.length?Rs:(_=_.slice(R,R+b),h.C=R+b,_)))}Tn.prototype.cancel=function(){this.J=!0,sn(this)};function ji(h){h.S=Date.now()+h.I,Jc(h,h.I)}function Jc(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Lt(T(h.ba,h),_)}function Va(h){h.B&&(m.clearTimeout(h.B),h.B=null)}Tn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Wc(this.i,this.A),this.L!=2&&(Oa(),bt(17)),sn(this),this.s=2,br(this)):Jc(this,this.S-h)};function br(h){h.j.G==0||h.J||cu(h.j,h)}function sn(h){Va(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,Ii(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Mi(h,_){try{var b=h.j;if(b.G!=0&&(b.g==h||al(b.h,h))){if(!h.K&&al(b.h,h)&&b.G==3){try{var R=b.Da.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var Y=R;if(Y[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<h.F)Bs(b),Vs(b);else break e;ml(b),bt(18)}}else b.za=Y[1],0<b.za-b.T&&37500>Y[2]&&b.F&&b.v==0&&!b.C&&(b.C=Lt(T(b.Za,b),6e3));if(1>=Is(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else ra(b,11)}else if((h.K||b.g==h)&&Bs(b),!z(_))for(Y=b.Da.g.parse(_),_=0;_<Y.length;_++){let Je=Y[_];if(b.T=Je[0],Je=Je[1],b.G==2)if(Je[0]=="c"){b.K=Je[1],b.ia=Je[2];const en=Je[3];en!=null&&(b.la=en,b.j.info("VER="+b.la));const Qt=Je[4];Qt!=null&&(b.Aa=Qt,b.j.info("SVER="+b.Aa));const aa=Je[5];aa!=null&&typeof aa=="number"&&0<aa&&(R=1.5*aa,b.L=R,b.j.info("backChannelRequestTimeoutMs_="+R)),R=b;const on=h.g;if(on){const Rr=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rr){var re=R.h;re.g||Rr.indexOf("spdy")==-1&&Rr.indexOf("quic")==-1&&Rr.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Ns(re,re.h),re.h=null))}if(R.D){const gl=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;gl&&(R.ya=gl,dt(R.I,R.D,gl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-h.F,b.j.info("Handshake RTT: "+b.R+"ms")),R=b;var fe=h;if(R.qa=hu(R,R.J?R.ia:null,R.W),fe.K){Sn(R.h,fe);var Ze=fe,Kt=R.L;Kt&&(Ze.I=Kt),Ze.B&&(Va(Ze),ji(Ze)),R.g=fe}else ou(R);0<b.i.length&&Ls(b)}else Je[0]!="stop"&&Je[0]!="close"||ra(b,7);else b.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?ra(b,7):dl(b):Je[0]!="noop"&&b.l&&b.l.ta(Je),b.v=0)}}Oa(4)}catch{}}var eu=class{constructor(h,_){this.g=h,this.map=_}};function Xr(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ks(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Is(h){return h.h?1:h.g?h.g.size:0}function al(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Ns(h,_){h.g?h.g.add(_):h.h=_}function Sn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Xr.prototype.cancel=function(){if(this.i=il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function il(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const b of h.g.values())_=_.concat(b.D);return _}return C(h.i)}function zd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var _=[],b=h.length,R=0;R<b;R++)_.push(h[R]);return _}_=[],b=0;for(R in h)_[b++]=h[R];return _}function Ds(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var _=[];h=h.length;for(var b=0;b<h;b++)_.push(b);return _}_=[],b=0;for(const R in h)_[b++]=R;return _}}}function sl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var b=Ds(h),R=zd(h),Y=R.length,re=0;re<Y;re++)_.call(void 0,R[re],b&&b[re],h)}var Oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qd(h,_){if(h){h=h.split("&");for(var b=0;b<h.length;b++){var R=h[b].indexOf("="),Y=null;if(0<=R){var re=h[b].substring(0,R);Y=h[b].substring(R+1)}else re=h[b];_(re,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Bt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Bt){this.h=h.h,Pi(this,h.j),this.o=h.o,this.g=h.g,La(this,h.s),this.l=h.l;var _=h.i,b=new Jr;b.i=_.i,_.g&&(b.g=new Map(_.g),b.h=_.h),Zr(this,b),this.m=h.m}else h&&(_=String(h).match(Oi))?(this.h=!1,Pi(this,_[1]||"",!0),this.o=Kn(_[2]||""),this.g=Kn(_[3]||"",!0),La(this,_[4]),this.l=Kn(_[5]||"",!0),Zr(this,_[6]||"",!0),this.m=Kn(_[7]||"")):(this.h=!1,this.i=new Jr(null,this.h))}Bt.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Vi(_,ol,!0),":");var b=this.g;return(b||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Vi(_,ol,!0),"@"),h.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&h.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Vi(b,b.charAt(0)=="/"?Fd:ll,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Vi(b,js)),h.join("")};function Pn(h){return new Bt(h)}function Pi(h,_,b){h.j=b?Kn(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function La(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Zr(h,_,b){_ instanceof Jr?(h.i=_,nu(h.i,h.h)):(b||(_=Vi(_,Hd)),h.i=new Jr(_,h.h))}function dt(h,_,b){h.i.set(_,b)}function Ui(h){return dt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Kn(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Vi(h,_,b){return typeof h=="string"?(h=encodeURI(h).replace(_,tu),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function tu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ol=/[#\/\?@]/g,ll=/[#\?:]/g,Fd=/[#\?]/g,Hd=/[#\?@]/g,js=/#/g;function Jr(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Qn(h){h.g||(h.g=new Map,h.h=0,h.i&&qd(h.i,function(_,b){h.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}a=Jr.prototype,a.add=function(h,_){Qn(this),this.i=null,h=Er(this,h);var b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(_),this.h+=1,this};function ea(h,_){Qn(h),_=Er(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function ta(h,_){return Qn(h),_=Er(h,_),h.g.has(_)}a.forEach=function(h,_){Qn(this),this.g.forEach(function(b,R){b.forEach(function(Y){h.call(_,Y,R,this)},this)},this)},a.na=function(){Qn(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),b=[];for(let R=0;R<_.length;R++){const Y=h[R];for(let re=0;re<Y.length;re++)b.push(_[R])}return b},a.V=function(h){Qn(this);let _=[];if(typeof h=="string")ta(this,h)&&(_=_.concat(this.g.get(Er(this,h))));else{h=Array.from(this.g.values());for(let b=0;b<h.length;b++)_=_.concat(h[b])}return _},a.set=function(h,_){return Qn(this),this.i=null,h=Er(this,h),ta(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},a.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function cl(h,_,b){ea(h,_),0<b.length&&(h.i=null,h.g.set(Er(h,_),C(b)),h.h+=b.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var b=0;b<_.length;b++){var R=_[b];const re=encodeURIComponent(String(R)),fe=this.V(R);for(R=0;R<fe.length;R++){var Y=re;fe[R]!==""&&(Y+="="+encodeURIComponent(String(fe[R]))),h.push(Y)}}return this.i=h.join("&")};function Er(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function nu(h,_){_&&!h.j&&(Qn(h),h.i=null,h.g.forEach(function(b,R){var Y=R.toLowerCase();R!=Y&&(ea(this,R),cl(this,Y,b))},h)),h.j=_}function Li(h,_){const b=new $n;if(m.Image){const R=new Image;R.onload=A(Yn,b,"TestLoadImage: loaded",!0,_,R),R.onerror=A(Yn,b,"TestLoadImage: error",!1,_,R),R.onabort=A(Yn,b,"TestLoadImage: abort",!1,_,R),R.ontimeout=A(Yn,b,"TestLoadImage: timeout",!1,_,R),m.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else _(!1)}function lr(h,_){const b=new $n,R=new AbortController,Y=setTimeout(()=>{R.abort(),Yn(b,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:R.signal}).then(re=>{clearTimeout(Y),re.ok?Yn(b,"TestPingServer: ok",!0,_):Yn(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Y),Yn(b,"TestPingServer: error",!1,_)})}function Yn(h,_,b,R,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),R(b)}catch{}}function Bi(){this.g=new Ni}function Tr(h,_,b){const R=b||"";try{sl(h,function(Y,re){let fe=Y;y(Y)&&(fe=sr(Y)),_.push(R+re+"="+encodeURIComponent(fe))})}catch(Y){throw _.push(R+"type="+encodeURIComponent("_badmap")),Y}}function Ba(h){this.l=h.Ub||null,this.j=h.eb||!1}k(Ba,Xo),Ba.prototype.g=function(){return new na(this.l,this.j)},Ba.prototype.i=function(h){return function(){return h}}({});function na(h,_){gt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(na,gt),a=na.prototype,a.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,xr(this)},a.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||m).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},a.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,xr(this)),this.g&&(this.readyState=3,xr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ul(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function ul(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}a.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Sr(this):xr(this),this.readyState==3&&ul(this)}},a.Ra=function(h){this.g&&(this.response=this.responseText=h,Sr(this))},a.Qa=function(h){this.g&&(this.response=h,Sr(this))},a.ga=function(){this.g&&Sr(this)};function Sr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,xr(h)}a.setRequestHeader=function(h,_){this.u.append(h,_)},a.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=_.next();return h.join(`\r
`)};function xr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function hl(h){let _="";return de(h,function(b,R){_+=R,_+=":",_+=b,_+=`\r
`}),_}function Jt(h,_,b){e:{for(R in b){var R=!1;break e}R=!0}R||(b=hl(b),typeof h=="string"?b!=null&&encodeURIComponent(String(b)):dt(h,_,b))}function st(h){gt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(st,gt);var Ms=/^https?$/i,zi=["POST","PUT"];a=st.prototype,a.Ha=function(h){this.J=h},a.ea=function(h,_,b,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_r.g(),this.v=this.o?Zo(this.o):Zo(_r),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(re){ru(this,re);return}if(h=b||"",b=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var Y in R)b.set(Y,R[Y]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const re of R.keys())b.set(re,R.get(re));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(b.keys()).find(re=>re.toLowerCase()=="content-type"),Y=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(zi,_,void 0))||R||Y||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,fe]of b)this.g.setRequestHeader(re,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qi(this),this.u=!0,this.g.send(h),this.u=!1}catch(re){ru(this,re)}};function ru(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Os(h),Cr(h)}function Os(h){h.A||(h.A=!0,Ke(h,"complete"),Ke(h,"error"))}a.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ke(this,"complete"),Ke(this,"abort"),Cr(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cr(this,!0)),st.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?Ps(this):this.bb())},a.bb=function(){Ps(this)};function Ps(h){if(h.h&&typeof u<"u"&&(!h.v[1]||Wn(h)!=4||h.Z()!=2)){if(h.u&&Wn(h)==4)rt(h.Ea,0,h);else if(Ke(h,"readystatechange"),Wn(h)==4){h.h=!1;try{const fe=h.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var R;if(R=fe===0){var Y=String(h.D).match(Oi)[1]||null;!Y&&m.self&&m.self.location&&(Y=m.self.location.protocol.slice(0,-1)),R=!Ms.test(Y?Y.toLowerCase():"")}b=R}if(b)Ke(h,"complete"),Ke(h,"success");else{h.m=6;try{var re=2<Wn(h)?h.g.statusText:""}catch{re=""}h.l=re+" ["+h.Z()+"]",Os(h)}}finally{Cr(h)}}}}function Cr(h,_){if(h.g){qi(h);const b=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ke(h,"ready");try{b.onreadystatechange=R}catch{}}}function qi(h){h.I&&(m.clearTimeout(h.I),h.I=null)}a.isActive=function(){return!!this.g};function Wn(h){return h.g?h.g.readyState:0}a.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Cs(_)}};function au(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Gd(h){const _={};h=(h.g&&2<=Wn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(z(h[R]))continue;var b=F(h[R]);const Y=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const re=_[Y]||[];_[Y]=re,re.push(b)}O(_,function(R){return R.join(", ")})}a.Ba=function(){return this.m},a.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fi(h,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||_}function Us(h){this.Aa=0,this.i=[],this.j=new $n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fi("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fi("baseRetryDelayMs",5e3,h),this.cb=Fi("retryDelaySeedMs",1e4,h),this.Wa=Fi("forwardChannelMaxRetries",2,h),this.wa=Fi("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Xr(h&&h.concurrentRequestLimit),this.Da=new Bi,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}a=Us.prototype,a.la=8,a.G=1,a.connect=function(h,_,b,R){bt(0),this.W=h,this.H=_||{},b&&R!==void 0&&(this.H.OSID=b,this.H.OAID=R),this.F=this.X,this.I=hu(this,null,this.W),Ls(this)};function dl(h){if(iu(h),h.G==3){var _=h.U++,b=Pn(h.I);if(dt(b,"SID",h.K),dt(b,"RID",_),dt(b,"TYPE","terminate"),Hi(h,b),_=new Tn(h,h.j,_),_.L=2,_.v=Ui(Pn(b)),b=!1,m.navigator&&m.navigator.sendBeacon)try{b=m.navigator.sendBeacon(_.v.toString(),"")}catch{}!b&&m.Image&&(new Image().src=_.v,b=!0),b||(_.g=du(_.j,null),_.g.ea(_.v)),_.F=Date.now(),ji(_)}uu(h)}function Vs(h){h.g&&(Gi(h),h.g.cancel(),h.g=null)}function iu(h){Vs(h),h.u&&(m.clearTimeout(h.u),h.u=null),Bs(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function Ls(h){if(!ks(h.h)&&!h.s){h.s=!0;var _=h.Ga;me||B(),be||(me(),be=!0),Be.add(_,h),h.B=0}}function $d(h,_){return Is(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Lt(T(h.Ga,h,_),pl(h,h.B)),h.B++,!0)}a.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Y=new Tn(this,this.j,h);let re=this.o;if(this.S&&(re?(re=N(re),U(re,this.S)):re=this.S),this.m!==null||this.O||(Y.H=re,re=null),this.P)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var R=this.i[b];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(_+=R,4096<_){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=su(this,Y,_),b=Pn(this.I),dt(b,"RID",h),dt(b,"CVER",22),this.D&&dt(b,"X-HTTP-Session-Id",this.D),Hi(this,b),re&&(this.O?_="headers="+encodeURIComponent(String(hl(re)))+"&"+_:this.m&&Jt(b,this.m,re)),Ns(this.h,Y),this.Ua&&dt(b,"TYPE","init"),this.P?(dt(b,"$req",_),dt(b,"SID","null"),Y.T=!0,or(Y,b,null)):or(Y,b,_),this.G=2}}else this.G==3&&(h?fl(this,h):this.i.length==0||ks(this.h)||fl(this))};function fl(h,_){var b;_?b=_.l:b=h.U++;const R=Pn(h.I);dt(R,"SID",h.K),dt(R,"RID",b),dt(R,"AID",h.T),Hi(h,R),h.m&&h.o&&Jt(R,h.m,h.o),b=new Tn(h,h.j,b,h.B+1),h.m===null&&(b.H=h.o),_&&(h.i=_.D.concat(h.i)),_=su(h,b,1e3),b.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ns(h.h,b),or(b,R,_)}function Hi(h,_){h.H&&de(h.H,function(b,R){dt(_,R,b)}),h.l&&sl({},function(b,R){dt(_,R,b)})}function su(h,_,b){b=Math.min(h.i.length,b);var R=h.l?T(h.l.Na,h.l,h):null;e:{var Y=h.i;let re=-1;for(;;){const fe=["count="+b];re==-1?0<b?(re=Y[0].g,fe.push("ofs="+re)):re=0:fe.push("ofs="+re);let Ze=!0;for(let Kt=0;Kt<b;Kt++){let Je=Y[Kt].g;const en=Y[Kt].map;if(Je-=re,0>Je)re=Math.max(0,Y[Kt].g-100),Ze=!1;else try{Tr(en,fe,"req"+Je+"_")}catch{R&&R(en)}}if(Ze){R=fe.join("&");break e}}}return h=h.i.splice(0,b),_.D=h,R}function ou(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;me||B(),be||(me(),be=!0),Be.add(_,h),h.v=0}}function ml(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Lt(T(h.Fa,h),pl(h,h.v)),h.v++,!0)}a.Fa=function(){if(this.u=null,lu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Lt(T(this.ab,this),h)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Vs(this),lu(this))};function Gi(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function lu(h){h.g=new Tn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Pn(h.qa);dt(_,"RID","rpc"),dt(_,"SID",h.K),dt(_,"AID",h.T),dt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&dt(_,"TO",h.ja),dt(_,"TYPE","xmlhttp"),Hi(h,_),h.m&&h.o&&Jt(_,h.m,h.o),h.L&&(h.g.I=h.L);var b=h.g;h=h.ia,b.L=1,b.v=Ui(Pn(_)),b.m=null,b.P=!0,Wr(b,h)}a.Za=function(){this.C!=null&&(this.C=null,Vs(this),ml(this),bt(19))};function Bs(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function cu(h,_){var b=null;if(h.g==_){Bs(h),Gi(h),h.g=null;var R=2}else if(al(h.h,_))b=_.D,Sn(h.h,_),R=1;else return;if(h.G!=0){if(_.o)if(R==1){b=_.m?_.m.length:0,_=Date.now()-_.F;var Y=h.B;R=Ma(),Ke(R,new $t(R,b)),Ls(h)}else ou(h);else if(Y=_.s,Y==3||Y==0&&0<_.X||!(R==1&&$d(h,_)||R==2&&ml(h)))switch(b&&0<b.length&&(_=h.h,_.i=_.i.concat(b)),Y){case 1:ra(h,5);break;case 4:ra(h,10);break;case 3:ra(h,6);break;default:ra(h,2)}}}function pl(h,_){let b=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(b*=2),b*_}function ra(h,_){if(h.j.info("Error code "+_),_==2){var b=T(h.fb,h),R=h.Xa;const Y=!R;R=new Bt(R||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Pi(R,"https"),Ui(R),Y?Li(R.toString(),b):lr(R.toString(),b)}else bt(2);h.G=0,h.l&&h.l.sa(_),uu(h),iu(h)}a.fb=function(h){h?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function uu(h){if(h.G=0,h.ka=[],h.l){const _=il(h.h);(_.length!=0||h.i.length!=0)&&(x(h.ka,_),x(h.ka,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.ra()}}function hu(h,_,b){var R=b instanceof Bt?Pn(b):new Bt(b);if(R.g!="")_&&(R.g=_+"."+R.g),La(R,R.s);else{var Y=m.location;R=Y.protocol,_=_?_+"."+Y.hostname:Y.hostname,Y=+Y.port;var re=new Bt(null);R&&Pi(re,R),_&&(re.g=_),Y&&La(re,Y),b&&(re.l=b),R=re}return b=h.D,_=h.ya,b&&_&&dt(R,b,_),dt(R,"VER",h.la),Hi(h,R),R}function du(h,_,b){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new st(new Ba({eb:b})):new st(h.pa),_.Ha(h.J),_}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function fu(){}a=fu.prototype,a.ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){};function zs(){}zs.prototype.g=function(h,_){return new xn(h,_)};function xn(h,_){gt.call(this),this.g=new Us(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!z(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!z(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Ar(this)}k(xn,gt),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){dl(this.g)},xn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.u&&(b={},b.__data__=sr(h),h=b);_.i.push(new eu(_.Ya++,h)),_.G==3&&Ls(_)},xn.prototype.N=function(){this.g.l=null,delete this.j,dl(this.g),delete this.g,xn.aa.N.call(this)};function mu(h){Qr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const b in _){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}k(mu,Qr);function pu(){el.call(this),this.status=1}k(pu,el);function Ar(h){this.g=h}k(Ar,fu),Ar.prototype.ua=function(){Ke(this.g,"a")},Ar.prototype.ta=function(h){Ke(this.g,new mu(h))},Ar.prototype.sa=function(h){Ke(this.g,new pu)},Ar.prototype.ra=function(){Ke(this.g,"b")},zs.prototype.createWebChannel=zs.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,AE=function(){return new zs},CE=function(){return Ma()},xE=vr,vp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ua.NO_ERROR=0,Ua.TIMEOUT=8,Ua.HTTP_ERROR=6,kh=Ua,Yr.COMPLETE="complete",SE=Yr,Jo.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",gt.prototype.listen=gt.prototype.K,hc=Jo,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,TE=st}).apply(typeof yh<"u"?yh:typeof self<"u"?self:typeof window<"u"?window:{});const Z0="@firebase/firestore",J0="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new ng("@firebase/firestore");function yo(){return ps.logLevel}function _e(a,...e){if(ps.logLevel<=Qe.DEBUG){const t=e.map(ig);ps.debug(`Firestore (${zo}): ${a}`,...t)}}function Ra(a,...e){if(ps.logLevel<=Qe.ERROR){const t=e.map(ig);ps.error(`Firestore (${zo}): ${a}`,...t)}}function No(a,...e){if(ps.logLevel<=Qe.WARN){const t=e.map(ig);ps.warn(`Firestore (${zo}): ${a}`,...t)}}function ig(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(a="Unexpected state"){const e=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: `+a;throw Ra(e),new Error(e)}function ot(a,e){a||je()}function Ue(a,e){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Hr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Tk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_n.UNAUTHENTICATED))}shutdown(){}}class Sk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xk{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ot(this.o===void 0);let r=this.i;const s=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new Sa;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Sa,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await s(this.currentUser)})},m=p=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Sa)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ot(typeof r.accessToken=="string"),new RE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string"),new _n(e)}}class Ck{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Ak{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Ck(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ew{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rk{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Mn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){ot(this.o===void 0);const r=l=>{l.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.R;return this.R=l.token,_e("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const s=l=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>s(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?s(l):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new ew(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ot(typeof t.token=="string"),this.R=t.token,new ew(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<a;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=kk(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<t&&(r+=e.charAt(s[l]%62))}return r}}function qe(a,e){return a<e?-1:a>e?1:0}function _p(a,e){let t=0;for(;t<a.length&&t<e.length;){const r=a.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return qe(r,s);{const l=kE(),u=Ik(l.encode(tw(a,t)),l.encode(tw(e,t)));return u!==0?u:qe(r,s)}}t+=r>65535?2:1}return qe(a.length,e.length)}function tw(a,e){return a.codePointAt(e)>65535?a.substring(e,e+2):a.substring(e,e+1)}function Ik(a,e){for(let t=0;t<a.length&&t<e.length;++t)if(a[t]!==e[t])return qe(a[t],e[t]);return qe(a.length,e.length)}function Do(a,e,t){return a.length===e.length&&a.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=-62135596800,rw=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*rw);return new Nt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<nw)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rw}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-nw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new Nt(0,0))}static max(){return new Pe(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="__name__";class Mr{constructor(e,t,r){t===void 0?t=0:t>e.length&&je(),r===void 0?r=e.length-t:r>e.length-t&&je(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const l=Mr.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return qe(e.length,t.length)}static compareSegments(e,t){const r=Mr.isNumericId(e),s=Mr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Mr.extractNumericId(e).compare(Mr.extractNumericId(t)):_p(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pi.fromString(e.substring(4,e.length-2))}}class wt extends Mr{construct(e,t,r){return new wt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new wt(t)}static emptyPath(){return new wt([])}}const Nk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Mr{construct(e,t,r){return new dn(e,t,r)}static isValidIdentifier(e){return Nk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aw}static keyField(){return new dn([aw])}static fromServerFormat(e){const t=[];let r="",s=0;const l=()=>{if(r.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const m=e[s];if(m==="\\"){if(s+1===e.length)throw new we(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new we(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,s+=2}else m==="`"?(u=!u,s++):m!=="."||u?(r+=m,s++):(l(),s++)}if(l(),u)throw new we(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(t)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(wt.fromString(e))}static fromName(e){return new Ce(wt.fromString(e).popFirst(5))}static empty(){return new Ce(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new wt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=-1;function Dk(a,e){const t=a.toTimestamp().seconds,r=a.toTimestamp().nanoseconds+1,s=Pe.fromTimestamp(r===1e9?new Nt(t+1,0):new Nt(t,r));return new vi(s,Ce.empty(),e)}function jk(a){return new vi(a.readTime,a.key,Tc)}class vi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new vi(Pe.min(),Ce.empty(),Tc)}static max(){return new vi(Pe.max(),Ce.empty(),Tc)}}function Mk(a,e){let t=a.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(a.documentKey,e.documentKey),t!==0?t:qe(a.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(a){if(a.code!==ce.FAILED_PRECONDITION||a.message!==Ok)throw a;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let s=0,l=0,u=!1;e.forEach(m=>{++s,m.next(()=>{++l,u&&l===s&&t()},p=>r(p))}),u=!0,l===s&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(s=>s?ue.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,l)=>{r.push(t.call(this,s,l))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,s)=>{const l=e.length,u=new Array(l);let m=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(v=>{u[y]=v,++m,m===l&&r(u)},v=>s(v))}})}static doWhile(e,t){return new ue((r,s)=>{const l=()=>{e()===!0?t().next(()=>{l()},s):r()};l()})}}function Uk(a){const e=a.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fo(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}hd.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=-1;function dd(a){return a==null}function Fh(a){return a===0&&1/a==-1/0}function Vk(a){return typeof a=="number"&&Number.isInteger(a)&&!Fh(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="";function Lk(a){let e="";for(let t=0;t<a.length;t++)e.length>0&&(e=iw(e)),e=Bk(a.get(t),e);return iw(e)}function Bk(a,e){let t=e;const r=a.length;for(let s=0;s<r;s++){const l=a.charAt(s);switch(l){case"\0":t+="";break;case NE:t+="";break;default:t+=l}}return t}function iw(a){return a+NE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(a){let e=0;for(const t in a)Object.prototype.hasOwnProperty.call(a,t)&&e++;return e}function Ci(a,e){for(const t in a)Object.prototype.hasOwnProperty.call(a,t)&&e(t,a[t])}function DE(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t){this.comparator=e,this.root=t||hn.EMPTY}insert(e,t){return new Rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vh(this.root,e,this.comparator,!0)}}class vh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,t,r,s,l){this.key=e,this.value=t,this.color=r??hn.RED,this.left=s??hn.EMPTY,this.right=l??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,l){return new hn(e??this.key,t??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,r),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return hn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw je();const e=this.left.check();if(e!==this.right.check())throw je();return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw je()}get value(){throw je()}get color(){throw je()}get left(){throw je()}get right(){throw je()}copy(e,t,r,s,l){return this}insert(e,t,r){return new hn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ow(this.data.getIterator())}getIteratorFrom(e){return new ow(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zt(this.comparator);return t.data=e,t}}class ow{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new Hn([])}unionWith(e){let t=new Zt(dn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new jE("Invalid base64 string: "+l):l}}(e);return new fn(t)}static fromUint8Array(e){const t=function(s){let l="";for(let u=0;u<s.length;++u)l+=String.fromCharCode(s[u]);return l}(e);return new fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const zk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _i(a){if(ot(!!a),typeof a=="string"){let e=0;const t=zk.exec(a);if(ot(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(a);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(a.seconds),nanos:Vt(a.nanos)}}function Vt(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function wi(a){return typeof a=="string"?fn.fromBase64String(a):fn.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="server_timestamp",OE="__type__",PE="__previous_value__",UE="__local_write_time__";function og(a){var e,t;return((t=(((e=a==null?void 0:a.mapValue)===null||e===void 0?void 0:e.fields)||{})[OE])===null||t===void 0?void 0:t.stringValue)===ME}function fd(a){const e=a.mapValue.fields[PE];return og(e)?fd(e):e}function Sc(a){const e=_i(a.mapValue.fields[UE].timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,t,r,s,l,u,m,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y}}const Hh="(default)";class xc{constructor(e,t){this.projectId=e,this.database=t||Hh}static empty(){return new xc("","")}get isDefaultDatabase(){return this.database===Hh}isEqual(e){return e instanceof xc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="__type__",Fk="__max__",_h={mapValue:{}},LE="__vector__",Gh="value";function bi(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?og(a)?4:Gk(a)?9007199254740991:Hk(a)?10:11:je()}function Br(a,e){if(a===e)return!0;const t=bi(a);if(t!==bi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return Sc(a).isEqual(Sc(e));case 3:return function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const u=_i(s.timestampValue),m=_i(l.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return function(s,l){return wi(s.bytesValue).isEqual(wi(l.bytesValue))}(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return function(s,l){return Vt(s.geoPointValue.latitude)===Vt(l.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(l.geoPointValue.longitude)}(a,e);case 2:return function(s,l){if("integerValue"in s&&"integerValue"in l)return Vt(s.integerValue)===Vt(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const u=Vt(s.doubleValue),m=Vt(l.doubleValue);return u===m?Fh(u)===Fh(m):isNaN(u)&&isNaN(m)}return!1}(a,e);case 9:return Do(a.arrayValue.values||[],e.arrayValue.values||[],Br);case 10:case 11:return function(s,l){const u=s.mapValue.fields||{},m=l.mapValue.fields||{};if(sw(u)!==sw(m))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(m[p]===void 0||!Br(u[p],m[p])))return!1;return!0}(a,e);default:return je()}}function Cc(a,e){return(a.values||[]).find(t=>Br(t,e))!==void 0}function jo(a,e){if(a===e)return 0;const t=bi(a),r=bi(e);if(t!==r)return qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(a.booleanValue,e.booleanValue);case 2:return function(l,u){const m=Vt(l.integerValue||l.doubleValue),p=Vt(u.integerValue||u.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(a,e);case 3:return lw(a.timestampValue,e.timestampValue);case 4:return lw(Sc(a),Sc(e));case 5:return _p(a.stringValue,e.stringValue);case 6:return function(l,u){const m=wi(l),p=wi(u);return m.compareTo(p)}(a.bytesValue,e.bytesValue);case 7:return function(l,u){const m=l.split("/"),p=u.split("/");for(let y=0;y<m.length&&y<p.length;y++){const v=qe(m[y],p[y]);if(v!==0)return v}return qe(m.length,p.length)}(a.referenceValue,e.referenceValue);case 8:return function(l,u){const m=qe(Vt(l.latitude),Vt(u.latitude));return m!==0?m:qe(Vt(l.longitude),Vt(u.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return cw(a.arrayValue,e.arrayValue);case 10:return function(l,u){var m,p,y,v;const w=l.fields||{},T=u.fields||{},A=(m=w[Gh])===null||m===void 0?void 0:m.arrayValue,k=(p=T[Gh])===null||p===void 0?void 0:p.arrayValue,C=qe(((y=A==null?void 0:A.values)===null||y===void 0?void 0:y.length)||0,((v=k==null?void 0:k.values)===null||v===void 0?void 0:v.length)||0);return C!==0?C:cw(A,k)}(a.mapValue,e.mapValue);case 11:return function(l,u){if(l===_h.mapValue&&u===_h.mapValue)return 0;if(l===_h.mapValue)return 1;if(u===_h.mapValue)return-1;const m=l.fields||{},p=Object.keys(m),y=u.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let w=0;w<p.length&&w<v.length;++w){const T=_p(p[w],v[w]);if(T!==0)return T;const A=jo(m[p[w]],y[v[w]]);if(A!==0)return A}return qe(p.length,v.length)}(a.mapValue,e.mapValue);default:throw je()}}function lw(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return qe(a,e);const t=_i(a),r=_i(e),s=qe(t.seconds,r.seconds);return s!==0?s:qe(t.nanos,r.nanos)}function cw(a,e){const t=a.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const l=jo(t[s],r[s]);if(l)return l}return qe(t.length,r.length)}function Mo(a){return wp(a)}function wp(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(t){const r=_i(t);return`time(${r.seconds},${r.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?function(t){return wi(t).toBase64()}(a.bytesValue):"referenceValue"in a?function(t){return Ce.fromName(t).toString()}(a.referenceValue):"geoPointValue"in a?function(t){return`geo(${t.latitude},${t.longitude})`}(a.geoPointValue):"arrayValue"in a?function(t){let r="[",s=!0;for(const l of t.values||[])s?s=!1:r+=",",r+=wp(l);return r+"]"}(a.arrayValue):"mapValue"in a?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const u of r)l?l=!1:s+=",",s+=`${u}:${wp(t.fields[u])}`;return s+"}"}(a.mapValue):je()}function Ih(a){switch(bi(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fd(a);return e?16+Ih(e):16;case 5:return 2*a.stringValue.length;case 6:return wi(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,l)=>s+Ih(l),0)}(a.arrayValue);case 10:case 11:return function(r){let s=0;return Ci(r.fields,(l,u)=>{s+=l.length+Ih(u)}),s}(a.mapValue);default:throw je()}}function uw(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function bp(a){return!!a&&"integerValue"in a}function lg(a){return!!a&&"arrayValue"in a}function hw(a){return!!a&&"nullValue"in a}function dw(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Nh(a){return!!a&&"mapValue"in a}function Hk(a){var e,t;return((t=(((e=a==null?void 0:a.mapValue)===null||e===void 0?void 0:e.fields)||{})[VE])===null||t===void 0?void 0:t.stringValue)===LE}function pc(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return Ci(a.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pc(r)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(a.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pc(a.arrayValue.values[t]);return e}return Object.assign({},a)}function Gk(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===Fk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Nh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(t)}setAll(e){let t=dn.emptyPath(),r={},s=[];e.forEach((u,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,r,s),r={},s=[],t=m.popLast()}u?r[m.lastSegment()]=pc(u):s.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,s)}delete(e){const t=this.field(e.popLast());Nh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Br(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Nh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ci(t,(s,l)=>e[s]=l);for(const s of r)delete e[s]}clone(){return new On(pc(this.value))}}function BE(a){const e=[];return Ci(a.fields,(t,r)=>{const s=new dn([t]);if(Nh(r)){const l=BE(r.mapValue).fields;if(l.length===0)e.push(s);else for(const u of l)e.push(s.child(u))}else e.push(s)}),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,t,r,s,l,u,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=l,this.data=u,this.documentState=m}static newInvalidDocument(e){return new wn(e,0,Pe.min(),Pe.min(),Pe.min(),On.empty(),0)}static newFoundDocument(e,t,r,s){return new wn(e,1,t,Pe.min(),r,s,0)}static newNoDocument(e,t){return new wn(e,2,t,Pe.min(),Pe.min(),On.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,Pe.min(),Pe.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t){this.position=e,this.inclusive=t}}function fw(a,e,t){let r=0;for(let s=0;s<a.position.length;s++){const l=e[s],u=a.position[s];if(l.field.isKeyField()?r=Ce.comparator(Ce.fromName(u.referenceValue),t.key):r=jo(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function mw(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let t=0;t<a.position.length;t++)if(!Br(a.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t="asc"){this.field=e,this.dir=t}}function $k(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{}class Ht extends zE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Qk(e,t,r):t==="array-contains"?new Xk(e,r):t==="in"?new Zk(e,r):t==="not-in"?new Jk(e,r):t==="array-contains-any"?new eI(e,r):new Ht(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Yk(e,r):new Wk(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(jo(t,this.value)):t!==null&&bi(this.value)===bi(t)&&this.matchesComparison(jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gr extends zE{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new gr(e,t)}matches(e){return qE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function qE(a){return a.op==="and"}function FE(a){return Kk(a)&&qE(a)}function Kk(a){for(const e of a.filters)if(e instanceof gr)return!1;return!0}function Ep(a){if(a instanceof Ht)return a.field.canonicalString()+a.op.toString()+Mo(a.value);if(FE(a))return a.filters.map(e=>Ep(e)).join(",");{const e=a.filters.map(t=>Ep(t)).join(",");return`${a.op}(${e})`}}function HE(a,e){return a instanceof Ht?function(r,s){return s instanceof Ht&&r.op===s.op&&r.field.isEqual(s.field)&&Br(r.value,s.value)}(a,e):a instanceof gr?function(r,s){return s instanceof gr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((l,u,m)=>l&&HE(u,s.filters[m]),!0):!1}(a,e):void je()}function GE(a){return a instanceof Ht?function(t){return`${t.field.canonicalString()} ${t.op} ${Mo(t.value)}`}(a):a instanceof gr?function(t){return t.op.toString()+" {"+t.getFilters().map(GE).join(" ,")+"}"}(a):"Filter"}class Qk extends Ht{constructor(e,t,r){super(e,t,r),this.key=Ce.fromName(r.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class Yk extends Ht{constructor(e,t){super(e,"in",t),this.keys=$E("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Wk extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=$E("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $E(a,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ce.fromName(r.referenceValue))}class Xk extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lg(t)&&Cc(t.arrayValue,this.value)}}class Zk extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cc(this.value.arrayValue,t)}}class Jk extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Cc(this.value.arrayValue,t)}}class eI extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Cc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,t=null,r=[],s=[],l=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=u,this.endAt=m,this.le=null}}function pw(a,e=null,t=[],r=[],s=null,l=null,u=null){return new tI(a,e,t,r,s,l,u)}function cg(a){const e=Ue(a);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ep(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),dd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Mo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Mo(r)).join(",")),e.le=t}return e.le}function ug(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<a.orderBy.length;t++)if(!$k(a.orderBy[t],e.orderBy[t]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let t=0;t<a.filters.length;t++)if(!HE(a.filters[t],e.filters[t]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!mw(a.startAt,e.startAt)&&mw(a.endAt,e.endAt)}function Tp(a){return Ce.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t=null,r=[],s=[],l=null,u="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=u,this.startAt=m,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function nI(a,e,t,r,s,l,u,m){return new Ho(a,e,t,r,s,l,u,m)}function hg(a){return new Ho(a)}function gw(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function KE(a){return a.collectionGroup!==null}function gc(a){const e=Ue(a);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new Zt(dn.comparator);return u.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new Ac(l,r))}),t.has(dn.keyField().canonicalString())||e.he.push(new Ac(dn.keyField(),r))}return e.he}function Ur(a){const e=Ue(a);return e.Pe||(e.Pe=rI(e,gc(a))),e.Pe}function rI(a,e){if(a.limitType==="F")return pw(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map(s=>{const l=s.dir==="desc"?"asc":"desc";return new Ac(s.field,l)});const t=a.endAt?new $h(a.endAt.position,a.endAt.inclusive):null,r=a.startAt?new $h(a.startAt.position,a.startAt.inclusive):null;return pw(a.path,a.collectionGroup,e,a.filters,a.limit,t,r)}}function Sp(a,e){const t=a.filters.concat([e]);return new Ho(a.path,a.collectionGroup,a.explicitOrderBy.slice(),t,a.limit,a.limitType,a.startAt,a.endAt)}function xp(a,e,t){return new Ho(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,t,a.startAt,a.endAt)}function md(a,e){return ug(Ur(a),Ur(e))&&a.limitType===e.limitType}function QE(a){return`${cg(Ur(a))}|lt:${a.limitType}`}function vo(a){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>GE(s)).join(", ")}]`),dd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Mo(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Mo(s)).join(",")),`Target(${r})`}(Ur(a))}; limitType=${a.limitType})`}function pd(a,e){return e.isFoundDocument()&&function(r,s){const l=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Ce.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(a,e)&&function(r,s){for(const l of gc(r))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0}(a,e)&&function(r,s){for(const l of r.filters)if(!l.matches(s))return!1;return!0}(a,e)&&function(r,s){return!(r.startAt&&!function(u,m,p){const y=fw(u,m,p);return u.inclusive?y<=0:y<0}(r.startAt,gc(r),s)||r.endAt&&!function(u,m,p){const y=fw(u,m,p);return u.inclusive?y>=0:y>0}(r.endAt,gc(r),s))}(a,e)}function aI(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function YE(a){return(e,t)=>{let r=!1;for(const s of gc(a)){const l=iI(s,e,t);if(l!==0)return l;r=r||s.field.isKeyField()}return 0}}function iI(a,e,t){const r=a.field.isKeyField()?Ce.comparator(e.key,t.key):function(l,u,m){const p=u.data.field(l),y=m.data.field(l);return p!==null&&y!==null?jo(p,y):je()}(a.field,e,t);switch(a.dir){case"asc":return r;case"desc":return-1*r;default:return je()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,l]of r)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ci(this.inner,(t,r)=>{for(const[s,l]of r)e(s,l)})}isEmpty(){return DE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=new Rt(Ce.comparator);function ka(){return sI}const WE=new Rt(Ce.comparator);function dc(...a){let e=WE;for(const t of a)e=e.insert(t.key,t);return e}function XE(a){let e=WE;return a.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function cs(){return yc()}function ZE(){return yc()}function yc(){return new Ts(a=>a.toString(),(a,e)=>a.isEqual(e))}const oI=new Rt(Ce.comparator),lI=new Zt(Ce.comparator);function Ye(...a){let e=lI;for(const t of a)e=e.add(t);return e}const cI=new Zt(qe);function uI(){return cI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fh(e)?"-0":e}}function JE(a){return{integerValue:""+a}}function hI(a,e){return Vk(e)?JE(e):dg(a,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this._=void 0}}function dI(a,e,t){return a instanceof Rc?function(s,l){const u={fields:{[OE]:{stringValue:ME},[UE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&og(l)&&(l=fd(l)),l&&(u.fields[PE]=l),{mapValue:u}}(t,e):a instanceof kc?tT(a,e):a instanceof Ic?nT(a,e):function(s,l){const u=eT(s,l),m=yw(u)+yw(s.Ie);return bp(u)&&bp(s.Ie)?JE(m):dg(s.serializer,m)}(a,e)}function fI(a,e,t){return a instanceof kc?tT(a,e):a instanceof Ic?nT(a,e):t}function eT(a,e){return a instanceof Kh?function(r){return bp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class Rc extends gd{}class kc extends gd{constructor(e){super(),this.elements=e}}function tT(a,e){const t=rT(e);for(const r of a.elements)t.some(s=>Br(s,r))||t.push(r);return{arrayValue:{values:t}}}class Ic extends gd{constructor(e){super(),this.elements=e}}function nT(a,e){let t=rT(e);for(const r of a.elements)t=t.filter(s=>!Br(s,r));return{arrayValue:{values:t}}}class Kh extends gd{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function yw(a){return Vt(a.integerValue||a.doubleValue)}function rT(a){return lg(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,t){this.field=e,this.transform=t}}function pI(a,e){return a.field.isEqual(e.field)&&function(r,s){return r instanceof kc&&s instanceof kc||r instanceof Ic&&s instanceof Ic?Do(r.elements,s.elements,Br):r instanceof Kh&&s instanceof Kh?Br(r.Ie,s.Ie):r instanceof Rc&&s instanceof Rc}(a.transform,e.transform)}class gI{constructor(e,t){this.version=e,this.transformResults=t}}class fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dh(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class yd{}function aT(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new sT(a.key,fr.none()):new Uc(a.key,a.data,fr.none());{const t=a.data,r=On.empty();let s=new Zt(dn.comparator);for(let l of e.fields)if(!s.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),s=s.add(l)}return new Ai(a.key,r,new Hn(s.toArray()),fr.none())}}function yI(a,e,t){a instanceof Uc?function(s,l,u){const m=s.value.clone(),p=_w(s.fieldTransforms,l,u.transformResults);m.setAll(p),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(a,e,t):a instanceof Ai?function(s,l,u){if(!Dh(s.precondition,l))return void l.convertToUnknownDocument(u.version);const m=_w(s.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(iT(s)),p.setAll(m),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(a,e,t):function(s,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function vc(a,e,t,r){return a instanceof Uc?function(l,u,m,p){if(!Dh(l.precondition,u))return m;const y=l.value.clone(),v=ww(l.fieldTransforms,p,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(a,e,t,r):a instanceof Ai?function(l,u,m,p){if(!Dh(l.precondition,u))return m;const y=ww(l.fieldTransforms,p,u),v=u.data;return v.setAll(iT(l)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(w=>w.field))}(a,e,t,r):function(l,u,m){return Dh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m}(a,e,t)}function vI(a,e){let t=null;for(const r of a.fieldTransforms){const s=e.data.field(r.field),l=eT(r.transform,s||null);l!=null&&(t===null&&(t=On.empty()),t.set(r.field,l))}return t||null}function vw(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Do(r,s,(l,u)=>pI(l,u))}(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class Uc extends yd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ai extends yd{constructor(e,t,r,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function iT(a){const e=new Map;return a.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=a.data.field(t);e.set(t,r)}}),e}function _w(a,e,t){const r=new Map;ot(a.length===t.length);for(let s=0;s<t.length;s++){const l=a[s],u=l.transform,m=e.data.field(l.field);r.set(l.field,fI(u,m,t[s]))}return r}function ww(a,e,t){const r=new Map;for(const s of a){const l=s.transform,u=t.data.field(s.field);r.set(s.field,dI(l,u,e))}return r}class sT extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _I extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&yI(l,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=vc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=vc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ZE();return this.mutations.forEach(s=>{const l=e.get(s.key),u=l.overlayedDocument;let m=this.applyToLocalView(u,l.mutatedFields);m=t.has(s.key)?null:m;const p=aT(u,m);p!==null&&r.set(s.key,p),u.isValidDocument()||u.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ye())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,(t,r)=>vw(t,r))&&Do(this.baseMutations,e.baseMutations,(t,r)=>vw(t,r))}}class fg{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ot(e.mutations.length===r.length);let s=function(){return oI}();const l=e.mutations;for(let u=0;u<l.length;u++)s=s.insert(l[u].key,r[u].version);return new fg(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,tt;function TI(a){switch(a){case ce.OK:return je();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return je()}}function oT(a){if(a===void 0)return Ra("GRPC error has no .code"),ce.UNKNOWN;switch(a){case Ft.OK:return ce.OK;case Ft.CANCELLED:return ce.CANCELLED;case Ft.UNKNOWN:return ce.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return ce.INTERNAL;case Ft.UNAVAILABLE:return ce.UNAVAILABLE;case Ft.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Ft.NOT_FOUND:return ce.NOT_FOUND;case Ft.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Ft.ABORTED:return ce.ABORTED;case Ft.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Ft.DATA_LOSS:return ce.DATA_LOSS;default:return je()}}(tt=Ft||(Ft={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=new pi([4294967295,4294967295],0);function bw(a){const e=kE().encode(a),t=new EE;return t.update(e),new Uint8Array(t.digest())}function Ew(a){const e=new DataView(a.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new pi([t,r],0),new pi([s,l],0)]}class mg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fc(`Invalid padding: ${t}`);if(r<0)throw new fc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fc(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=pi.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply(pi.fromNumber(r)));return s.compare(SI)===1&&(s=new pi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=bw(e),[r,s]=Ew(t);for(let l=0;l<this.hashCount;l++){const u=this.Ae(r,s,l);if(!this.Re(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new mg(l,s,t);return r.forEach(m=>u.insert(m)),u}insert(e){if(this.Ee===0)return;const t=bw(e),[r,s]=Ew(t);for(let l=0;l<this.hashCount;l++){const u=this.Ae(r,s,l);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,r,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Vc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new vd(Pe.min(),s,new Rt(qe),ka(),Ye())}}class Vc{constructor(e,t,r,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Vc(r,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class lT{constructor(e,t){this.targetId=e,this.ge=t}}class cT{constructor(e,t,r=fn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Tw{constructor(){this.pe=0,this.ye=Sw(),this.we=fn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ye(),t=Ye(),r=Ye();return this.ye.forEach((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:je()}}),new Vc(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=Sw()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ot(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class xI{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ka(),this.$e=wh(),this.Ue=wh(),this.Ke=new Rt(qe)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:je()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const l=s.target;if(Tp(l))if(r===0){const u=new Ce(l.path);this.ze(t,u,wn.newNoDocument(u,Pe.min()))}else ot(r===1);else{const u=this.et(t);if(u!==r){const m=this.tt(e),p=m?this.nt(m,e,u):1;if(p!==0){this.Ye(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:l=0}=t;let u,m;try{u=wi(r).toUint8Array()}catch(p){if(p instanceof jE)return No("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new mg(u,s,l)}catch(p){return No(p instanceof fc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Ee===0?null:m}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(l=>{const u=this.ke.it(),m=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.ze(t,l,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((l,u)=>{const m=this.Xe(u);if(m){if(l.current&&Tp(m.target)){const p=new Ce(m.target.path);this._t(p).has(u)||this.ut(u,p)||this.ze(u,p,wn.newNoDocument(p,e))}l.ve&&(t.set(u,l.Fe()),l.Me())}});let r=Ye();this.Ue.forEach((l,u)=>{let m=!0;u.forEachWhile(p=>{const y=this.Xe(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(l))}),this.Qe.forEach((l,u)=>u.setReadTime(e));const s=new vd(e,t,this.Ke,this.Qe,r);return this.Qe=ka(),this.$e=wh(),this.Ue=wh(),this.Ke=new Rt(qe),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Tw,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Zt(qe),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Zt(qe),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Tw),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function wh(){return new Rt(Ce.comparator)}function Sw(){return new Rt(Ce.comparator)}const CI={asc:"ASCENDING",desc:"DESCENDING"},AI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RI={and:"AND",or:"OR"};class kI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cp(a,e){return a.useProto3Json||dd(e)?e:{value:e}}function Qh(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uT(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function II(a,e){return Qh(a,e.toTimestamp())}function Vr(a){return ot(!!a),Pe.fromTimestamp(function(t){const r=_i(t);return new Nt(r.seconds,r.nanos)}(a))}function pg(a,e){return Ap(a,e).canonicalString()}function Ap(a,e){const t=function(s){return new wt(["projects",s.projectId,"databases",s.database])}(a).child("documents");return e===void 0?t:t.child(e)}function hT(a){const e=wt.fromString(a);return ot(gT(e)),e}function Rp(a,e){return pg(a.databaseId,e.path)}function Xm(a,e){const t=hT(e);if(t.get(1)!==a.databaseId.projectId)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+a.databaseId.projectId);if(t.get(3)!==a.databaseId.database)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+a.databaseId.database);return new Ce(fT(t))}function dT(a,e){return pg(a.databaseId,e)}function NI(a){const e=hT(a);return e.length===4?wt.emptyPath():fT(e)}function kp(a){return new wt(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function fT(a){return ot(a.length>4&&a.get(4)==="documents"),a.popFirst(5)}function xw(a,e,t){return{name:Rp(a,e),fields:t.value.mapValue.fields}}function DI(a,e){let t;if("targetChange"in e){e.targetChange;const r=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:je()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=function(y,v){return y.useProto3Json?(ot(v===void 0||typeof v=="string"),fn.fromBase64String(v||"")):(ot(v===void 0||v instanceof Buffer||v instanceof Uint8Array),fn.fromUint8Array(v||new Uint8Array))}(a,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&function(y){const v=y.code===void 0?ce.UNKNOWN:oT(y.code);return new we(v,y.message||"")}(u);t=new cT(r,s,l,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Xm(a,r.document.name),l=Vr(r.document.updateTime),u=r.document.createTime?Vr(r.document.createTime):Pe.min(),m=new On({mapValue:{fields:r.document.fields}}),p=wn.newFoundDocument(s,l,u,m),y=r.targetIds||[],v=r.removedTargetIds||[];t=new jh(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Xm(a,r.document),l=r.readTime?Vr(r.readTime):Pe.min(),u=wn.newNoDocument(s,l),m=r.removedTargetIds||[];t=new jh([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Xm(a,r.document),l=r.removedTargetIds||[];t=new jh([],l,s,null)}else{if(!("filter"in e))return je();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:l}=r,u=new EI(s,l),m=r.targetId;t=new lT(m,u)}}return t}function jI(a,e){let t;if(e instanceof Uc)t={update:xw(a,e.key,e.value)};else if(e instanceof sT)t={delete:Rp(a,e.key)};else if(e instanceof Ai)t={update:xw(a,e.key,e.data),updateMask:qI(e.fieldMask)};else{if(!(e instanceof _I))return je();t={verify:Rp(a,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,u){const m=u.transform;if(m instanceof Rc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof kc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ic)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Kh)return{fieldPath:u.field.canonicalString(),increment:m.Ie};throw je()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,l){return l.updateTime!==void 0?{updateTime:II(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:je()}(a,e.precondition)),t}function MI(a,e){return a&&a.length>0?(ot(e!==void 0),a.map(t=>function(s,l){let u=s.updateTime?Vr(s.updateTime):Vr(l);return u.isEqual(Pe.min())&&(u=Vr(l)),new gI(u,s.transformResults||[])}(t,e))):[]}function OI(a,e){return{documents:[dT(a,e.path)]}}function PI(a,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=dT(a,s);const l=function(y){if(y.length!==0)return pT(gr.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(y){if(y.length!==0)return y.map(v=>function(T){return{field:_o(T.field),direction:LI(T.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=Cp(a,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ht:t,parent:s}}function UI(a){let e=NI(a.parent);const t=a.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ot(r===1);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(w){const T=mT(w);return T instanceof gr&&FE(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=function(w){return w.map(T=>function(k){return new Ac(wo(k.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(T))}(t.orderBy));let m=null;t.limit&&(m=function(w){let T;return T=typeof w=="object"?w.value:w,dd(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(w){const T=!!w.before,A=w.values||[];return new $h(A,T)}(t.startAt));let y=null;return t.endAt&&(y=function(w){const T=!w.before,A=w.values||[];return new $h(A,T)}(t.endAt)),nI(e,s,u,l,m,"F",p,y)}function VI(a,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mT(a){return a.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=wo(t.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=wo(t.unaryFilter.field);return Ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wo(t.unaryFilter.field);return Ht.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=wo(t.unaryFilter.field);return Ht.create(u,"!=",{nullValue:"NULL_VALUE"});default:return je()}}(a):a.fieldFilter!==void 0?function(t){return Ht.create(wo(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return je()}}(t.fieldFilter.op),t.fieldFilter.value)}(a):a.compositeFilter!==void 0?function(t){return gr.create(t.compositeFilter.filters.map(r=>mT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return je()}}(t.compositeFilter.op))}(a):je()}function LI(a){return CI[a]}function BI(a){return AI[a]}function zI(a){return RI[a]}function _o(a){return{fieldPath:a.canonicalString()}}function wo(a){return dn.fromServerFormat(a.fieldPath)}function pT(a){return a instanceof Ht?function(t){if(t.op==="=="){if(dw(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NAN"}};if(hw(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(dw(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NAN"}};if(hw(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(t.field),op:BI(t.op),value:t.value}}}(a):a instanceof gr?function(t){const r=t.getFilters().map(s=>pT(s));return r.length===1?r[0]:{compositeFilter:{op:zI(t.op),filters:r}}}(a):je()}function qI(a){const e=[];return a.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gT(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t,r,s,l=Pe.min(),u=Pe.min(),m=fn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.Tt=e}}function HI(a){const e=UI({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?xp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.Tn=new $I}addToCollectionParentIndex(e,t){return this.Tn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(vi.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class $I{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Zt(wt.comparator),l=!s.has(r);return this.index[t]=s.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Zt(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yT=41943040;class jn{static withCacheSize(e){return new jn(e,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(yT,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Oo(0)}static Kn(){return new Oo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="LruGarbageCollector",KI=1048576;function Rw([a,e],[t,r]){const s=qe(a,t);return s===0?qe(e,r):s}class QI{constructor(e){this.Hn=e,this.buffer=new Zt(Rw),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Rw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){_e(Aw,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fo(t)?_e(Aw,"Ignoring IndexedDB error during garbage collection: ",t):await qo(t)}await this.er(3e5)})}}class WI{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(hd.ae);const r=new QI(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Cw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cw):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,l,u,m,p,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,u=Date.now(),this.nthSequenceNumber(e,s))).next(w=>(r=w,m=Date.now(),this.removeTargets(e,r,t))).next(w=>(l=w,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(y=Date.now(),yo()<=Qe.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(m-u)+`ms
	Removed ${l} targets in `+(p-m)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:w})))}}function XI(a,e){return new WI(a,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.changes=new Ts(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&vc(r.mutation,s,Hn.empty(),Nt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ye()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ye()){const s=cs();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(l=>{let u=dc();return l.forEach((m,p)=>{u=u.insert(m,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=cs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ye()))}populateOverlays(e,t,r){const s=[];return r.forEach(l=>{t.has(l)||s.push(l)}),this.documentOverlayCache.getOverlays(e,s).next(l=>{l.forEach((u,m)=>{t.set(u,m)})})}computeViews(e,t,r,s){let l=ka();const u=yc(),m=function(){return yc()}();return t.forEach((p,y)=>{const v=r.get(y.key);s.has(y.key)&&(v===void 0||v.mutation instanceof Ai)?l=l.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),vc(v.mutation,y,v.mutation.getFieldMask(),Nt.now())):u.set(y.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,v)=>u.set(y,v)),t.forEach((y,v)=>{var w;return m.set(y,new JI(v,(w=u.get(y))!==null&&w!==void 0?w:null))}),m))}recalculateAndSaveOverlays(e,t){const r=yc();let s=new Rt((u,m)=>u-m),l=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const m of u)m.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let v=r.get(p)||Hn.empty();v=m.applyToLocalView(y,v),r.set(p,v);const w=(s.get(m.batchId)||Ye()).add(p);s=s.insert(m.batchId,w)})}).next(()=>{const u=[],m=s.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,v=p.value,w=ZE();v.forEach(T=>{if(!l.has(T)){const A=aT(t.get(T),r.get(T));A!==null&&w.set(T,A),l=l.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,w))}return ue.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(u){return Ce.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):KE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(l=>{const u=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-l.size):ue.resolve(cs());let m=Tc,p=l;return u.next(y=>ue.forEach(y,(v,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),l.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{p=p.insert(v,T)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,Ye())).next(v=>({batchId:m,changes:XE(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next(r=>{let s=dc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const l=t.collectionGroup;let u=dc();return this.indexManager.getCollectionParents(e,l).next(m=>ue.forEach(m,p=>{const y=function(w,T){return new Ho(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,r,s).next(v=>{v.forEach((w,T)=>{u=u.insert(w,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,s))).next(u=>{l.forEach((p,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,wn.newInvalidDocument(v)))});let m=dc();return u.forEach((p,y)=>{const v=l.get(p);v!==void 0&&vc(v.mutation,y,Hn.empty(),Nt.now()),pd(t,y)&&(m=m.insert(p,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ue.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Vr(s.createTime)}}(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:HI(s.bundledQuery),readTime:Vr(s.readTime)}}(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.overlays=new Rt(Ce.comparator),this.Rr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=cs();return ue.forEach(t,s=>this.getOverlay(e,s).next(l=>{l!==null&&r.set(s,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,l)=>{this.Et(e,t,l)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const s=cs(),l=t.length+1,u=new Ce(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>r&&s.set(p.getKey(),p)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let l=new Rt((y,v)=>y-v);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let v=l.get(y.largestBatchId);v===null&&(v=cs(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const m=cs(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,v)=>m.set(y,v)),!(m.size()>=s)););return ue.resolve(m)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new bI(t,r));let l=this.Rr.get(t);l===void 0&&(l=Ye(),this.Rr.set(t,l)),this.Rr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(){this.Vr=new Zt(an.mr),this.gr=new Zt(an.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new an(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new an(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new Ce(new wt([])),r=new an(t,e),s=new an(t,e+1),l=[];return this.gr.forEachInRange([r,s],u=>{this.wr(u),l.push(u.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Ce(new wt([])),r=new an(t,e),s=new an(t,e+1);let l=Ye();return this.gr.forEachInRange([r,s],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new an(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class an{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Ce.comparator(e.key,t.key)||qe(e.Cr,t.Cr)}static pr(e,t){return qe(e.Cr,t.Cr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Zt(an.mr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new wI(l,t,r,s);this.mutationQueue.push(u);for(const m of s)this.Mr=this.Mr.add(new an(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(u)}lookupMutationBatch(e,t){return ue.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),l=s<0?0:s;return ue.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?sg:this.Fr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new an(t,0),s=new an(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([r,s],u=>{const m=this.Or(u.Cr);l.push(m)}),ue.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zt(qe);return t.forEach(s=>{const l=new an(s,0),u=new an(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,u],m=>{r=r.add(m.Cr)})}),ue.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let l=r;Ce.isDocumentKey(l)||(l=l.child(""));const u=new an(new Ce(l),0);let m=new Zt(qe);return this.Mr.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===s&&(m=m.add(p.Cr)),!0)},u),ue.resolve(this.Br(m))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){ot(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ue.forEach(t.mutations,s=>{const l=new an(s.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new an(t,0),s=this.Mr.firstAfterOrEqual(r);return ue.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e){this.kr=e,this.docs=function(){return new Rt(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),l=s?s.size:0,u=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let r=ka();return t.forEach(s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():wn.newInvalidDocument(s))}),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let l=ka();const u=t.path,m=new Ce(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||Mk(jk(v),r)<=0||(s.has(v.key)||pd(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ue.resolve(l)}getAllFromCollectionGroup(e,t,r,s){je()}qr(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sN(this)}getSize(e){return ue.resolve(this.size)}}class sN extends ZI{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.persistence=e,this.Qr=new Ts(t=>cg(t),ug),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.$r=0,this.Ur=new gg,this.targetCount=0,this.Kr=Oo.Un()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),ue.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.zn(t),ue.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let s=0;const l=[];return this.Qr.forEach((u,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.Qr.delete(u),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),ue.waitFor(l).next(()=>s)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach(u=>{l.push(s.markPotentiallyOrphaned(e,u))}),ue.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new hd(0),this.zr=!1,this.zr=!0,this.jr=new rN,this.referenceDelegate=e(this),this.Hr=new oN(this),this.indexManager=new GI,this.remoteDocumentCache=function(s){return new iN(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new FI(t),this.Yr=new tN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new aN(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){_e("MemoryPersistence","Starting transaction:",e);const s=new lN(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(l=>this.referenceDelegate.Xr(s).next(()=>l)).toPromise().then(l=>(s.raiseOnCommittedEvent(),l))}ei(e,t){return ue.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class lN extends Pk{constructor(e){super(),this.currentSequenceNumber=e}}class yg{constructor(e){this.persistence=e,this.ti=new gg,this.ni=null}static ri(e){return new yg(e)}get ii(){if(this.ni)return this.ni;throw je()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ue.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(l=>this.ii.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.ii,r=>{const s=Ce.fromPath(r);return this.si(e,s).next(l=>{l||t.removeEntry(s,Pe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ue.or([()=>ue.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Yh{constructor(e,t){this.persistence=e,this.oi=new Ts(r=>Lk(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=XI(this,t)}static ri(e,t){return new Yh(e,t)}Zr(){}Xr(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return ue.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(l=>l?ue.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.qr(e,u=>this.ar(e,u,t).next(m=>{m||(r++,l.removeEntry(u,Pe.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ue.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ih(e.data.value)),t}ar(e,t,r){return ue.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return ue.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=Ye(),s=Ye();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new vg(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return i1()?8:Uk(bn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const l={result:null};return this.rs(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.ss(e,t,s,r).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new cN;return this._s(e,t,u).next(m=>{if(l.result=m,this.Xi)return this.us(e,t,u,m.size)})}).next(()=>l.result)}us(e,t,r,s){return r.documentReadCount<this.es?(yo()<=Qe.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ue.resolve()):(yo()<=Qe.DEBUG&&_e("QueryEngine","Query:",vo(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(yo()<=Qe.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ur(t))):ue.resolve())}rs(e,t){if(gw(t))return ue.resolve(null);let r=Ur(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=xp(t,null,"F"),r=Ur(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const u=Ye(...l);return this.ns.getDocuments(e,u).next(m=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.cs(t,m);return this.ls(t,y,u,p.readTime)?this.rs(e,xp(t,null,"F")):this.hs(e,y,t,p)}))})))}ss(e,t,r,s){return gw(t)||s.isEqual(Pe.min())?ue.resolve(null):this.ns.getDocuments(e,r).next(l=>{const u=this.cs(t,l);return this.ls(t,u,r,s)?ue.resolve(null):(yo()<=Qe.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),vo(t)),this.hs(e,u,t,Dk(s,Tc)).next(m=>m))})}cs(e,t){let r=new Zt(YE(e));return t.forEach((s,l)=>{pd(e,l)&&(r=r.add(l))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}_s(e,t,r){return yo()<=Qe.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",vo(t)),this.ns.getDocumentsMatchingQuery(e,t,vi.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="LocalStore",hN=3e8;class dN{constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new Rt(qe),this.Is=new Ts(l=>cg(l),ug),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eN(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function fN(a,e,t,r){return new dN(a,e,t,r)}async function _T(a,e){const t=Ue(a);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(l=>(s=l,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const u=[],m=[];let p=Ye();for(const y of s){u.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of l){m.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(r,p).next(y=>({Rs:y,removedBatchIds:u,addedBatchIds:m}))})})}function mN(a,e){const t=Ue(a);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(m,p,y,v){const w=y.batch,T=w.keys();let A=ue.resolve();return T.forEach(k=>{A=A.next(()=>v.getEntry(p,k)).next(C=>{const x=y.docVersions.get(k);ot(x!==null),C.version.compareTo(x)<0&&(w.applyToRemoteDocument(C,y),C.isValidDocument()&&(C.setReadTime(y.commitVersion),v.addEntry(C)))})}),A.next(()=>m.mutationQueue.removeMutationBatch(p,w))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let p=Ye();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function wT(a){const e=Ue(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function pN(a,e){const t=Ue(a),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const m=[];e.targetChanges.forEach((v,w)=>{const T=s.get(w);if(!T)return;m.push(t.Hr.removeMatchingKeys(l,v.removedDocuments,w).next(()=>t.Hr.addMatchingKeys(l,v.addedDocuments,w)));let A=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?A=A.withResumeToken(fn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,r)),s=s.insert(w,A),function(C,x,I){return C.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=hN?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(T,A,v)&&m.push(t.Hr.updateTargetData(l,A))});let p=ka(),y=Ye();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),m.push(gN(l,u,e.documentUpdates).next(v=>{p=v.Vs,y=v.fs})),!r.isEqual(Pe.min())){const v=t.Hr.getLastRemoteSnapshotVersion(l).next(w=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(v)}return ue.waitFor(m).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.Ts=s,l))}function gN(a,e,t){let r=Ye(),s=Ye();return t.forEach(l=>r=r.add(l)),e.getEntries(a,r).next(l=>{let u=ka();return t.forEach((m,p)=>{const y=l.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(s=s.add(m)),p.isNoDocument()&&p.version.isEqual(Pe.min())?(e.removeEntry(m,p.readTime),u=u.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(m,p)):_e(_g,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)}),{Vs:u,fs:s}})}function yN(a,e){const t=Ue(a);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=sg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vN(a,e){const t=Ue(a);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(l=>l?(s=l,ue.resolve(s)):t.Hr.allocateTargetId(r).next(u=>(s=new di(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function Ip(a,e,t){const r=Ue(a),s=r.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!Fo(u))throw u;_e(_g,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function kw(a,e,t){const r=Ue(a);let s=Pe.min(),l=Ye();return r.persistence.runTransaction("Execute query","readwrite",u=>function(p,y,v){const w=Ue(p),T=w.Is.get(v);return T!==void 0?ue.resolve(w.Ts.get(T)):w.Hr.getTargetData(y,v)}(r,u,Ur(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(u,m.targetId).next(p=>{l=p})}).next(()=>r.Ps.getDocumentsMatchingQuery(u,e,t?s:Pe.min(),t?l:Ye())).next(m=>(_N(r,aI(e),m),{documents:m,gs:l})))}function _N(a,e,t){let r=a.Es.get(e)||Pe.min();t.forEach((s,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),a.Es.set(e,r)}class Iw{constructor(){this.activeTargetIds=uI()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wN{constructor(){this.ho=new Iw,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Iw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="ConnectivityMonitor";class Dw{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){_e(Nw,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){_e(Nw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh=null;function Np(){return bh===null?bh=function(){return 268435456+Math.round(2147483648*Math.random())}():bh++,"0x"+bh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="RestConnection",EN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TN{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===Hh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,t,r,s,l){const u=Np(),m=this.bo(e,t.toUriEncodedString());_e(Zm,`Sending RPC '${e}' ${u}:`,m,r);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,s,l),this.vo(e,m,p,r).then(y=>(_e(Zm,`Received RPC '${e}' ${u}: `,y),y),y=>{throw No(Zm,`RPC '${e}' ${u} failed with error: `,y,"url: ",m,"request:",r),y})}Co(e,t,r,s,l,u){return this.So(e,t,r,s,l)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,l)=>e[l]=s),r&&r.headers.forEach((s,l)=>e[l]=s)}bo(e,t){const r=EN[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class xN extends TN{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const l=Np();return new Promise((u,m)=>{const p=new TE;p.setWithCredentials(!0),p.listenOnce(SE.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case kh.NO_ERROR:const v=p.getResponseJson();_e(vn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),u(v);break;case kh.TIMEOUT:_e(vn,`RPC '${e}' ${l} timed out`),m(new we(ce.DEADLINE_EXCEEDED,"Request time out"));break;case kh.HTTP_ERROR:const w=p.getStatus();if(_e(vn,`RPC '${e}' ${l} failed with status:`,w,"response text:",p.getResponseText()),w>0){let T=p.getResponseJson();Array.isArray(T)&&(T=T[0]);const A=T==null?void 0:T.error;if(A&&A.status&&A.message){const k=function(x){const I=x.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(I)>=0?I:ce.UNKNOWN}(A.status);m(new we(k,A.message))}else m(new we(ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new we(ce.UNAVAILABLE,"Connection failed."));break;default:je()}}finally{_e(vn,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(s);_e(vn,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",y,r,15)})}Wo(e,t,r){const s=Np(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=AE(),m=CE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const v=l.join("");_e(vn,`Creating RPC '${e}' stream ${s}: ${v}`,p);const w=u.createWebChannel(v,p);let T=!1,A=!1;const k=new SN({Fo:x=>{A?_e(vn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(T||(_e(vn,`Opening RPC '${e}' stream ${s} transport.`),w.open(),T=!0),_e(vn,`RPC '${e}' stream ${s} sending:`,x),w.send(x))},Mo:()=>w.close()}),C=(x,I,z)=>{x.listen(I,L=>{try{z(L)}catch(ne){setTimeout(()=>{throw ne},0)}})};return C(w,hc.EventType.OPEN,()=>{A||(_e(vn,`RPC '${e}' stream ${s} transport opened.`),k.Qo())}),C(w,hc.EventType.CLOSE,()=>{A||(A=!0,_e(vn,`RPC '${e}' stream ${s} transport closed`),k.Uo())}),C(w,hc.EventType.ERROR,x=>{A||(A=!0,No(vn,`RPC '${e}' stream ${s} transport errored:`,x),k.Uo(new we(ce.UNAVAILABLE,"The operation could not be completed")))}),C(w,hc.EventType.MESSAGE,x=>{var I;if(!A){const z=x.data[0];ot(!!z);const L=z,ne=(L==null?void 0:L.error)||((I=L[0])===null||I===void 0?void 0:I.error);if(ne){_e(vn,`RPC '${e}' stream ${s} received error:`,ne);const oe=ne.status;let de=function(j){const U=Ft[j];if(U!==void 0)return oT(U)}(oe),O=ne.message;de===void 0&&(de=ce.INTERNAL,O="Unknown error status: "+oe+" with message "+ne.message),A=!0,k.Uo(new we(de,O)),w.close()}else _e(vn,`RPC '${e}' stream ${s} received:`,z),k.Ko(z)}}),C(m,xE.STAT_EVENT,x=>{x.stat===vp.PROXY?_e(vn,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===vp.NOPROXY&&_e(vn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.$o()},0),k}}function Jm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(a){return new kI(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,t,r=1e3,s=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&_e("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="PersistentStream";class ET{constructor(e,t,r,s,l,u,m,p){this.Ti=e,this.n_=r,this.r_=s,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new bT(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Ra(t.toString()),Ra("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new we(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return _e(jw,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(_e(jw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CN extends ET{constructor(e,t,r,s,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=DI(this.serializer,e),r=function(l){if(!("targetChange"in l))return Pe.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Pe.min():u.readTime?Vr(u.readTime):Pe.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=kp(this.serializer),t.addTarget=function(l,u){let m;const p=u.target;if(m=Tp(p)?{documents:OI(l,p)}:{query:PI(l,p).ht},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=uT(l,u.resumeToken);const y=Cp(l,u.expectedCount);y!==null&&(m.expectedCount=y)}else if(u.snapshotVersion.compareTo(Pe.min())>0){m.readTime=Qh(l,u.snapshotVersion.toTimestamp());const y=Cp(l,u.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const r=VI(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=kp(this.serializer),t.removeTarget=e,this.I_(t)}}class AN extends ET{constructor(e,t,r,s,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return ot(!!e.streamToken),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=MI(e.writeResults,e.commitTime),r=Vr(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=kp(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>jI(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{}class kN extends RN{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.So(e,Ap(t,r),s,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(ce.UNKNOWN,l.toString())})}Co(e,t,r,s,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,m])=>this.connection.Co(e,Ap(t,r),s,u,m,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new we(ce.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class IN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ra(t),this.N_=!1):_e("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="RemoteStore";class NN{constructor(e,t,r,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(u=>{r.enqueueAndForget(async()=>{Ss(this)&&(_e(gs,"Restarting streams for network reachability change."),await async function(p){const y=Ue(p);y.W_.add(4),await Lc(y),y.j_.set("Unknown"),y.W_.delete(4),await wd(y)}(this))})}),this.j_=new IN(r,s)}}async function wd(a){if(Ss(a))for(const e of a.G_)await e(!0)}async function Lc(a){for(const e of a.G_)await e(!1)}function TT(a,e){const t=Ue(a);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),Tg(t)?Eg(t):Go(t).c_()&&bg(t,e))}function wg(a,e){const t=Ue(a),r=Go(t);t.K_.delete(e),r.c_()&&ST(t,e),t.K_.size===0&&(r.c_()?r.P_():Ss(t)&&t.j_.set("Unknown"))}function bg(a,e){if(a.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Go(a).y_(e)}function ST(a,e){a.H_.Ne(e),Go(a).w_(e)}function Eg(a){a.H_=new xI({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>a.K_.get(e)||null,it:()=>a.datastore.serializer.databaseId}),Go(a).start(),a.j_.B_()}function Tg(a){return Ss(a)&&!Go(a).u_()&&a.K_.size>0}function Ss(a){return Ue(a).W_.size===0}function xT(a){a.H_=void 0}async function DN(a){a.j_.set("Online")}async function jN(a){a.K_.forEach((e,t)=>{bg(a,e)})}async function MN(a,e){xT(a),Tg(a)?(a.j_.q_(e),Eg(a)):a.j_.set("Unknown")}async function ON(a,e,t){if(a.j_.set("Online"),e instanceof cT&&e.state===2&&e.cause)try{await async function(s,l){const u=l.cause;for(const m of l.targetIds)s.K_.has(m)&&(await s.remoteSyncer.rejectListen(m,u),s.K_.delete(m),s.H_.removeTarget(m))}(a,e)}catch(r){_e(gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wh(a,r)}else if(e instanceof jh?a.H_.We(e):e instanceof lT?a.H_.Ze(e):a.H_.je(e),!t.isEqual(Pe.min()))try{const r=await wT(a.localStore);t.compareTo(r)>=0&&await function(l,u){const m=l.H_.ot(u);return m.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.K_.get(y);v&&l.K_.set(y,v.withResumeToken(p.resumeToken,u))}}),m.targetMismatches.forEach((p,y)=>{const v=l.K_.get(p);if(!v)return;l.K_.set(p,v.withResumeToken(fn.EMPTY_BYTE_STRING,v.snapshotVersion)),ST(l,p);const w=new di(v.target,p,y,v.sequenceNumber);bg(l,w)}),l.remoteSyncer.applyRemoteEvent(m)}(a,t)}catch(r){_e(gs,"Failed to raise snapshot:",r),await Wh(a,r)}}async function Wh(a,e,t){if(!Fo(e))throw e;a.W_.add(1),await Lc(a),a.j_.set("Offline"),t||(t=()=>wT(a.localStore)),a.asyncQueue.enqueueRetryable(async()=>{_e(gs,"Retrying IndexedDB access"),await t(),a.W_.delete(1),await wd(a)})}function CT(a,e){return e().catch(t=>Wh(a,t,e))}async function bd(a){const e=Ue(a),t=Ei(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:sg;for(;PN(e);)try{const s=await yN(e.localStore,r);if(s===null){e.U_.length===0&&t.P_();break}r=s.batchId,UN(e,s)}catch(s){await Wh(e,s)}AT(e)&&RT(e)}function PN(a){return Ss(a)&&a.U_.length<10}function UN(a,e){a.U_.push(e);const t=Ei(a);t.c_()&&t.S_&&t.b_(e.mutations)}function AT(a){return Ss(a)&&!Ei(a).u_()&&a.U_.length>0}function RT(a){Ei(a).start()}async function VN(a){Ei(a).C_()}async function LN(a){const e=Ei(a);for(const t of a.U_)e.b_(t.mutations)}async function BN(a,e,t){const r=a.U_.shift(),s=fg.from(r,e,t);await CT(a,()=>a.remoteSyncer.applySuccessfulWrite(s)),await bd(a)}async function zN(a,e){e&&Ei(a).S_&&await async function(r,s){if(function(u){return TI(u)&&u!==ce.ABORTED}(s.code)){const l=r.U_.shift();Ei(r).h_(),await CT(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),await bd(r)}}(a,e),AT(a)&&RT(a)}async function Mw(a,e){const t=Ue(a);t.asyncQueue.verifyOperationInProgress(),_e(gs,"RemoteStore received new credentials");const r=Ss(t);t.W_.add(3),await Lc(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await wd(t)}async function qN(a,e){const t=Ue(a);e?(t.W_.delete(2),await wd(t)):e||(t.W_.add(2),await Lc(t),t.j_.set("Unknown"))}function Go(a){return a.J_||(a.J_=function(t,r,s){const l=Ue(t);return l.M_(),new CN(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(a.datastore,a.asyncQueue,{xo:DN.bind(null,a),No:jN.bind(null,a),Lo:MN.bind(null,a),p_:ON.bind(null,a)}),a.G_.push(async e=>{e?(a.J_.h_(),Tg(a)?Eg(a):a.j_.set("Unknown")):(await a.J_.stop(),xT(a))})),a.J_}function Ei(a){return a.Y_||(a.Y_=function(t,r,s){const l=Ue(t);return l.M_(),new AN(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(a.datastore,a.asyncQueue,{xo:()=>Promise.resolve(),No:VN.bind(null,a),Lo:zN.bind(null,a),D_:LN.bind(null,a),v_:BN.bind(null,a)}),a.G_.push(async e=>{e?(a.Y_.h_(),await bd(a)):(await a.Y_.stop(),a.U_.length>0&&(_e(gs,`Stopping write stream with ${a.U_.length} pending writes`),a.U_=[]))})),a.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t,r,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new Sa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,l){const u=Date.now()+r,m=new Sg(e,t,u,s,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xg(a,e){if(Ra("AsyncQueue",`${e}: ${a}`),Fo(a))return new we(ce.UNAVAILABLE,`${e}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{static emptySet(e){return new Ao(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ce.comparator(t.key,r.key):(t,r)=>Ce.comparator(t.key,r.key),this.keyedMap=dc(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ao)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ao;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(){this.Z_=new Rt(Ce.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):je():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Po{constructor(e,t,r,s,l,u,m,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,s,l){const u=[];return t.forEach(m=>{u.push({type:0,doc:m})}),new Po(e,t,Ao.emptySet(t),u,r,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class HN{constructor(){this.queries=Pw(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=Ue(t),l=s.queries;s.queries=Pw(),l.forEach((u,m)=>{for(const p of m.ta)p.onError(r)})})(this,new we(ce.ABORTED,"Firestore shutting down"))}}function Pw(){return new Ts(a=>QE(a),md)}async function kT(a,e){const t=Ue(a);let r=3;const s=e.query;let l=t.queries.get(s);l?!l.na()&&e.ra()&&(r=2):(l=new FN,r=e.ra()?0:1);try{switch(r){case 0:l.ea=await t.onListen(s,!0);break;case 1:l.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const m=xg(u,`Initialization of query '${vo(e.query)}' failed`);return void e.onError(m)}t.queries.set(s,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&Cg(t)}async function IT(a,e){const t=Ue(a),r=e.query;let s=3;const l=t.queries.get(r);if(l){const u=l.ta.indexOf(e);u>=0&&(l.ta.splice(u,1),l.ta.length===0?s=e.ra()?0:1:!l.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function GN(a,e){const t=Ue(a);let r=!1;for(const s of e){const l=s.query,u=t.queries.get(l);if(u){for(const m of u.ta)m.oa(s)&&(r=!0);u.ea=s}}r&&Cg(t)}function $N(a,e,t){const r=Ue(a),s=r.queries.get(e);if(s)for(const l of s.ta)l.onError(t);r.queries.delete(e)}function Cg(a){a.ia.forEach(e=>{e.next()})}var Dp,Uw;(Uw=Dp||(Dp={}))._a="default",Uw.Cache="cache";class NT{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Po(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Dp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.key=e}}class jT{constructor(e){this.key=e}}class KN{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ye(),this.mutatedKeys=Ye(),this.ya=YE(e),this.wa=new Ao(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new Ow,s=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,u=s,m=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,y=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,w)=>{const T=s.get(v),A=pd(this.query,w)?w:null,k=!!T&&this.mutatedKeys.has(T.key),C=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let x=!1;T&&A?T.data.isEqual(A.data)?k!==C&&(r.track({type:3,doc:A}),x=!0):this.va(T,A)||(r.track({type:2,doc:A}),x=!0,(p&&this.ya(A,p)>0||y&&this.ya(A,y)<0)&&(m=!0)):!T&&A?(r.track({type:0,doc:A}),x=!0):T&&!A&&(r.track({type:1,doc:T}),x=!0,(p||y)&&(m=!0)),x&&(A?(u=u.add(A),l=C?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{wa:u,Da:r,ls:m,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((v,w)=>function(A,k){const C=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je()}};return C(A)-C(k)}(v.type,w.type)||this.ya(v.doc,w.doc)),this.Ca(r),s=s!=null&&s;const m=t&&!s?this.Fa():[],p=this.pa.size===0&&this.current&&!s?1:0,y=p!==this.ga;return this.ga=p,u.length!==0||y?{snapshot:new Po(this.query,e.wa,l,u,e.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Ow,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ye(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new jT(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new DT(r))}),t}Oa(e){this.fa=e.gs,this.pa=Ye();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Po.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Ag="SyncEngine";class QN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class YN{constructor(e){this.key=e,this.Ba=!1}}class WN{constructor(e,t,r,s,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Ts(m=>QE(m),md),this.qa=new Map,this.Qa=new Set,this.$a=new Rt(Ce.comparator),this.Ua=new Map,this.Ka=new gg,this.Wa={},this.Ga=new Map,this.za=Oo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function XN(a,e,t=!0){const r=LT(a);let s;const l=r.ka.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.Na()):s=await MT(r,e,t,!0),s}async function ZN(a,e){const t=LT(a);await MT(t,e,!0,!1)}async function MT(a,e,t,r){const s=await vN(a.localStore,Ur(e)),l=s.targetId,u=a.sharedClientState.addLocalQueryTarget(l,t);let m;return r&&(m=await JN(a,e,l,u==="current",s.resumeToken)),a.isPrimaryClient&&t&&TT(a.remoteStore,s),m}async function JN(a,e,t,r,s){a.Ha=(w,T,A)=>async function(C,x,I,z){let L=x.view.ba(I);L.ls&&(L=await kw(C.localStore,x.query,!1).then(({documents:O})=>x.view.ba(O,L)));const ne=z&&z.targetChanges.get(x.targetId),oe=z&&z.targetMismatches.get(x.targetId)!=null,de=x.view.applyChanges(L,C.isPrimaryClient,ne,oe);return Lw(C,x.targetId,de.Ma),de.snapshot}(a,w,T,A);const l=await kw(a.localStore,e,!0),u=new KN(e,l.gs),m=u.ba(l.documents),p=Vc.createSynthesizedTargetChangeForCurrentChange(t,r&&a.onlineState!=="Offline",s),y=u.applyChanges(m,a.isPrimaryClient,p);Lw(a,t,y.Ma);const v=new QN(e,t,u);return a.ka.set(e,v),a.qa.has(t)?a.qa.get(t).push(e):a.qa.set(t,[e]),y.snapshot}async function eD(a,e,t){const r=Ue(a),s=r.ka.get(e),l=r.qa.get(s.targetId);if(l.length>1)return r.qa.set(s.targetId,l.filter(u=>!md(u,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ip(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&wg(r.remoteStore,s.targetId),jp(r,s.targetId)}).catch(qo)):(jp(r,s.targetId),await Ip(r.localStore,s.targetId,!0))}async function tD(a,e){const t=Ue(a),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),wg(t.remoteStore,r.targetId))}async function nD(a,e,t){const r=cD(a);try{const s=await function(u,m){const p=Ue(u),y=Nt.now(),v=m.reduce((A,k)=>A.add(k.key),Ye());let w,T;return p.persistence.runTransaction("Locally write mutations","readwrite",A=>{let k=ka(),C=Ye();return p.ds.getEntries(A,v).next(x=>{k=x,k.forEach((I,z)=>{z.isValidDocument()||(C=C.add(I))})}).next(()=>p.localDocuments.getOverlayedDocuments(A,k)).next(x=>{w=x;const I=[];for(const z of m){const L=vI(z,w.get(z.key).overlayedDocument);L!=null&&I.push(new Ai(z.key,L,BE(L.value.mapValue),fr.exists(!0)))}return p.mutationQueue.addMutationBatch(A,y,I,m)}).next(x=>{T=x;const I=x.applyToLocalDocumentSet(w,C);return p.documentOverlayCache.saveOverlays(A,x.batchId,I)})}).then(()=>({batchId:T.batchId,changes:XE(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,m,p){let y=u.Wa[u.currentUser.toKey()];y||(y=new Rt(qe)),y=y.insert(m,p),u.Wa[u.currentUser.toKey()]=y}(r,s.batchId,t),await Bc(r,s.changes),await bd(r.remoteStore)}catch(s){const l=xg(s,"Failed to persist write");t.reject(l)}}async function OT(a,e){const t=Ue(a);try{const r=await pN(t.localStore,e);e.targetChanges.forEach((s,l)=>{const u=t.Ua.get(l);u&&(ot(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.Ba=!0:s.modifiedDocuments.size>0?ot(u.Ba):s.removedDocuments.size>0&&(ot(u.Ba),u.Ba=!1))}),await Bc(t,r,e)}catch(r){await qo(r)}}function Vw(a,e,t){const r=Ue(a);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((l,u)=>{const m=u.view.sa(e);m.snapshot&&s.push(m.snapshot)}),function(u,m){const p=Ue(u);p.onlineState=m;let y=!1;p.queries.forEach((v,w)=>{for(const T of w.ta)T.sa(m)&&(y=!0)}),y&&Cg(p)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rD(a,e,t){const r=Ue(a);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ua.get(e),l=s&&s.key;if(l){let u=new Rt(Ce.comparator);u=u.insert(l,wn.newNoDocument(l,Pe.min()));const m=Ye().add(l),p=new vd(Pe.min(),new Map,new Rt(qe),u,m);await OT(r,p),r.$a=r.$a.remove(l),r.Ua.delete(e),Rg(r)}else await Ip(r.localStore,e,!1).then(()=>jp(r,e,t)).catch(qo)}async function aD(a,e){const t=Ue(a),r=e.batch.batchId;try{const s=await mN(t.localStore,e);UT(t,r,null),PT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Bc(t,s)}catch(s){await qo(s)}}async function iD(a,e,t){const r=Ue(a);try{const s=await function(u,m){const p=Ue(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let v;return p.mutationQueue.lookupMutationBatch(y,m).next(w=>(ot(w!==null),v=w.keys(),p.mutationQueue.removeMutationBatch(y,w))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v)).next(()=>p.localDocuments.getDocuments(y,v))})}(r.localStore,e);UT(r,e,t),PT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Bc(r,s)}catch(s){await qo(s)}}function PT(a,e){(a.Ga.get(e)||[]).forEach(t=>{t.resolve()}),a.Ga.delete(e)}function UT(a,e,t){const r=Ue(a);let s=r.Wa[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function jp(a,e,t=null){a.sharedClientState.removeLocalQueryTarget(e);for(const r of a.qa.get(e))a.ka.delete(r),t&&a.La.Ja(r,t);a.qa.delete(e),a.isPrimaryClient&&a.Ka.br(e).forEach(r=>{a.Ka.containsKey(r)||VT(a,r)})}function VT(a,e){a.Qa.delete(e.path.canonicalString());const t=a.$a.get(e);t!==null&&(wg(a.remoteStore,t),a.$a=a.$a.remove(e),a.Ua.delete(t),Rg(a))}function Lw(a,e,t){for(const r of t)r instanceof DT?(a.Ka.addReference(r.key,e),sD(a,r)):r instanceof jT?(_e(Ag,"Document no longer in limbo: "+r.key),a.Ka.removeReference(r.key,e),a.Ka.containsKey(r.key)||VT(a,r.key)):je()}function sD(a,e){const t=e.key,r=t.path.canonicalString();a.$a.get(t)||a.Qa.has(r)||(_e(Ag,"New document in limbo: "+t),a.Qa.add(r),Rg(a))}function Rg(a){for(;a.Qa.size>0&&a.$a.size<a.maxConcurrentLimboResolutions;){const e=a.Qa.values().next().value;a.Qa.delete(e);const t=new Ce(wt.fromString(e)),r=a.za.next();a.Ua.set(r,new YN(t)),a.$a=a.$a.insert(t,r),TT(a.remoteStore,new di(Ur(hg(t.path)),r,"TargetPurposeLimboResolution",hd.ae))}}async function Bc(a,e,t){const r=Ue(a),s=[],l=[],u=[];r.ka.isEmpty()||(r.ka.forEach((m,p)=>{u.push(r.Ha(p,e,t).then(y=>{var v;if((y||t)&&r.isPrimaryClient){const w=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){s.push(y);const w=vg.Yi(p.targetId,y);l.push(w)}}))}),await Promise.all(u),r.La.p_(s),await async function(p,y){const v=Ue(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ue.forEach(y,T=>ue.forEach(T.Hi,A=>v.persistence.referenceDelegate.addReference(w,T.targetId,A)).next(()=>ue.forEach(T.Ji,A=>v.persistence.referenceDelegate.removeReference(w,T.targetId,A)))))}catch(w){if(!Fo(w))throw w;_e(_g,"Failed to update sequence numbers: "+w)}for(const w of y){const T=w.targetId;if(!w.fromCache){const A=v.Ts.get(T),k=A.snapshotVersion,C=A.withLastLimboFreeSnapshotVersion(k);v.Ts=v.Ts.insert(T,C)}}}(r.localStore,l))}async function oD(a,e){const t=Ue(a);if(!t.currentUser.isEqual(e)){_e(Ag,"User change. New user:",e.toKey());const r=await _T(t.localStore,e);t.currentUser=e,function(l,u){l.Ga.forEach(m=>{m.forEach(p=>{p.reject(new we(ce.CANCELLED,u))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bc(t,r.Rs)}}function lD(a,e){const t=Ue(a),r=t.Ua.get(e);if(r&&r.Ba)return Ye().add(r.key);{let s=Ye();const l=t.qa.get(e);if(!l)return s;for(const u of l){const m=t.ka.get(u);s=s.unionWith(m.view.Sa)}return s}}function LT(a){const e=Ue(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=OT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rD.bind(null,e),e.La.p_=GN.bind(null,e.eventManager),e.La.Ja=$N.bind(null,e.eventManager),e}function cD(a){const e=Ue(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iD.bind(null,e),e}class Xh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_d(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return fN(this.persistence,new uN,e.initialUser,this.serializer)}Xa(e){return new vT(yg.ri,this.serializer)}Za(e){return new wN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xh.provider={build:()=>new Xh};class uD extends Xh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){ot(this.persistence.referenceDelegate instanceof Yh);const r=this.persistence.referenceDelegate.garbageCollector;return new YI(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new vT(r=>Yh.ri(r,t),this.serializer)}}class Mp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=oD.bind(null,this.syncEngine),await qN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HN}()}createDatastore(e){const t=_d(e.databaseInfo.databaseId),r=function(l){return new xN(l)}(e.databaseInfo);return function(l,u,m,p){return new kN(l,u,m,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,l,u,m){return new NN(r,s,l,u,m)}(this.localStore,this.datastore,e.asyncQueue,t=>Vw(this.syncEngine,t,0),function(){return Dw.D()?new Dw:new bN}())}createSyncEngine(e,t){return function(s,l,u,m,p,y,v){const w=new WN(s,l,u,m,p,y);return v&&(w.ja=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const l=Ue(s);_e(gs,"RemoteStore shutting down."),l.W_.add(5),await Lc(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Mp.provider={build:()=>new Mp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ra("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="FirestoreClient";class hD{constructor(e,t,r,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=_n.UNAUTHENTICATED,this.clientId=IE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async u=>{_e(Ti,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(_e(Ti,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=xg(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ep(a,e){a.asyncQueue.verifyOperationInProgress(),_e(Ti,"Initializing OfflineComponentProvider");const t=a.configuration;await e.initialize(t);let r=t.initialUser;a.setCredentialChangeListener(async s=>{r.isEqual(s)||(await _T(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=e}async function Bw(a,e){a.asyncQueue.verifyOperationInProgress();const t=await dD(a);_e(Ti,"Initializing OnlineComponentProvider"),await e.initialize(t,a.configuration),a.setCredentialChangeListener(r=>Mw(e.remoteStore,r)),a.setAppCheckTokenChangeListener((r,s)=>Mw(e.remoteStore,s)),a._onlineComponents=e}async function dD(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){_e(Ti,"Using user provided OfflineComponentProvider");try{await ep(a,a._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ce.FAILED_PRECONDITION||s.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;No("Error using user provided cache. Falling back to memory cache: "+t),await ep(a,new Xh)}}else _e(Ti,"Using default OfflineComponentProvider"),await ep(a,new uD(void 0));return a._offlineComponents}async function zT(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(_e(Ti,"Using user provided OnlineComponentProvider"),await Bw(a,a._uninitializedComponentsProvider._online)):(_e(Ti,"Using default OnlineComponentProvider"),await Bw(a,new Mp))),a._onlineComponents}function fD(a){return zT(a).then(e=>e.syncEngine)}async function qT(a){const e=await zT(a),t=e.eventManager;return t.onListen=XN.bind(null,e.syncEngine),t.onUnlisten=eD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tD.bind(null,e.syncEngine),t}function mD(a,e,t={}){const r=new Sa;return a.asyncQueue.enqueueAndForget(async()=>function(l,u,m,p,y){const v=new BT({next:T=>{v.su(),u.enqueueAndForget(()=>IT(l,w));const A=T.docs.has(m);!A&&T.fromCache?y.reject(new we(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&p&&p.source==="server"?y.reject(new we(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new NT(hg(m.path),v,{includeMetadataChanges:!0,Ta:!0});return kT(l,w)}(await qT(a),a.asyncQueue,e,t,r)),r.promise}function pD(a,e,t={}){const r=new Sa;return a.asyncQueue.enqueueAndForget(async()=>function(l,u,m,p,y){const v=new BT({next:T=>{v.su(),u.enqueueAndForget(()=>IT(l,w)),T.fromCache&&p.source==="server"?y.reject(new we(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new NT(m,v,{includeMetadataChanges:!0,Ta:!0});return kT(l,w)}(await qT(a),a.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(a,e,t){if(!t)throw new we(ce.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function gD(a,e,t,r){if(e===!0&&r===!0)throw new we(ce.INVALID_ARGUMENT,`${a} and ${t} cannot be used together.`)}function qw(a){if(!Ce.isDocumentKey(a))throw new we(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Fw(a){if(Ce.isDocumentKey(a))throw new we(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Ed(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":je()}function zr(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new we(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ed(a);throw new we(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="firestore.googleapis.com",Hw=!0;class Gw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new we(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GT,this.ssl=Hw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Hw;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KI)throw new we(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Td{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Tk;switch(r.type){case"firstParty":return new Ak(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=zw.get(t);r&&(_e("ComponentProvider","Removing Datastore"),zw.delete(t),r.terminate())}(this),Promise.resolve()}}function yD(a,e,t,r={}){var s;const l=(a=zr(a,Td))._getSettings(),u=Object.assign(Object.assign({},l),{emulatorOptions:a._getEmulatorOptions()}),m=`${e}:${t}`;l.host!==GT&&l.host!==m&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},l),{host:m,ssl:!1,emulatorOptions:r});if(!fs(p,u)&&(a._setSettings(p),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=_n.MOCK_USER;else{y=gE(r.mockUserToken,(s=a._app)===null||s===void 0?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new we(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new _n(w)}a._authCredentials=new Sk(new RE(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xs(this.firestore,e,this._query)}}class kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}}class gi extends xs{constructor(e,t,r){super(e,t,hg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new Ce(e))}withConverter(e){return new gi(this.firestore,e,this._path)}}function Xt(a,e,...t){if(a=Dt(a),HT("collection","path",e),a instanceof Td){const r=wt.fromString(e,...t);return Fw(r),new gi(a,null,r)}{if(!(a instanceof kn||a instanceof gi))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(wt.fromString(e,...t));return Fw(r),new gi(a.firestore,null,r)}}function yr(a,e,...t){if(a=Dt(a),arguments.length===1&&(e=IE.newId()),HT("doc","path",e),a instanceof Td){const r=wt.fromString(e,...t);return qw(r),new kn(a,null,new Ce(r))}{if(!(a instanceof kn||a instanceof gi))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(wt.fromString(e,...t));return qw(r),new kn(a.firestore,a instanceof gi?a.converter:null,new Ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="AsyncQueue";class Kw{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new bT(this,"async_queue_retry"),this.Su=()=>{const r=Jm();r&&_e($w,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=Jm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Jm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Sa;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Fo(e))throw e;_e($w,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(u){let m=u.message||"";return u.stack&&(m=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),m}(r);throw Ra("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=Sg.createAndSchedule(this,e,t,r,l=>this.Fu(l));return this.fu.push(s),s}Du(){this.gu&&je()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class $o extends Td{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Kw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kw(e),this._firestoreClient=void 0,await e}}}function vD(a,e){const t=typeof a=="object"?a:ag(),r=typeof a=="string"?a:Hh,s=ud(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const l=fE("firestore");l&&yD(s,...l)}return s}function kg(a){if(a._terminated)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||_D(a),a._firestoreClient}function _D(a){var e,t,r;const s=a._freezeSettings(),l=function(m,p,y,v){return new qk(m,p,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,FT(v.experimentalLongPollingOptions),v.useFetchStreams)}(a._databaseId,((e=a._app)===null||e===void 0?void 0:e.options.appId)||"",a._persistenceKey,s);a._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(a._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),a._firestoreClient=new hD(a._authCredentials,a._appCheckCredentials,a._queue,l,a._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uo(fn.fromBase64String(e))}catch(t){throw new we(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Uo(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==s[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=/^__.*__$/;class bD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ai(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uc(e,this.data,t,this.fieldTransforms)}}class $T{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ai(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function KT(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je()}}class Dg{constructor(e,t,r,s,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Dg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Zh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(KT(this.Lu)&&wD.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class ED{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_d(e)}ju(e,t,r,s=!1){return new Dg({Lu:e,methodName:t,zu:r,path:dn.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cd(a){const e=a._freezeSettings(),t=_d(a._databaseId);return new ED(a._databaseId,!!e.ignoreUndefinedProperties,t)}function QT(a,e,t,r,s,l={}){const u=a.ju(l.merge||l.mergeFields?2:0,e,t,s);Mg("Data must be an object, but it was:",u,r);const m=YT(r,u);let p,y;if(l.merge)p=new Hn(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const w of l.mergeFields){const T=Op(e,w,t);if(!u.contains(T))throw new we(ce.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);XT(v,T)||v.push(T)}p=new Hn(v),y=u.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,y=u.fieldTransforms;return new bD(new On(m),p,y)}class Ad extends xd{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ad}}class jg extends xd{_toFieldTransform(e){return new mI(e.path,new Rc)}isEqual(e){return e instanceof jg}}function TD(a,e,t,r){const s=a.ju(1,e,t);Mg("Data must be an object, but it was:",s,r);const l=[],u=On.empty();Ci(r,(p,y)=>{const v=Og(e,p,t);y=Dt(y);const w=s.Uu(v);if(y instanceof Ad)l.push(v);else{const T=zc(y,w);T!=null&&(l.push(v),u.set(v,T))}});const m=new Hn(l);return new $T(u,m,s.fieldTransforms)}function SD(a,e,t,r,s,l){const u=a.ju(1,e,t),m=[Op(e,r,t)],p=[s];if(l.length%2!=0)throw new we(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)m.push(Op(e,l[T])),p.push(l[T+1]);const y=[],v=On.empty();for(let T=m.length-1;T>=0;--T)if(!XT(y,m[T])){const A=m[T];let k=p[T];k=Dt(k);const C=u.Uu(A);if(k instanceof Ad)y.push(A);else{const x=zc(k,C);x!=null&&(y.push(A),v.set(A,x))}}const w=new Hn(y);return new $T(v,w,u.fieldTransforms)}function xD(a,e,t,r=!1){return zc(t,a.ju(r?4:3,e))}function zc(a,e){if(WT(a=Dt(a)))return Mg("Unsupported field value:",e,a),YT(a,e);if(a instanceof xd)return function(r,s){if(!KT(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(s);l&&s.fieldTransforms.push(l)}(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const l=[];let u=0;for(const m of r){let p=zc(m,s.Ku(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}}(a,e)}return function(r,s){if((r=Dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Nt.fromDate(r);return{timestampValue:Qh(s.serializer,l)}}if(r instanceof Nt){const l=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qh(s.serializer,l)}}if(r instanceof Ig)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Uo)return{bytesValue:uT(s.serializer,r._byteString)};if(r instanceof kn){const l=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw s.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:pg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ng)return function(u,m){return{mapValue:{fields:{[VE]:{stringValue:LE},[Gh]:{arrayValue:{values:u.toArray().map(y=>{if(typeof y!="number")throw m.Wu("VectorValues must only contain numeric values.");return dg(m.serializer,y)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${Ed(r)}`)}(a,e)}function YT(a,e){const t={};return DE(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ci(a,(r,s)=>{const l=zc(s,e.qu(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function WT(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof Nt||a instanceof Ig||a instanceof Uo||a instanceof kn||a instanceof xd||a instanceof Ng)}function Mg(a,e,t){if(!WT(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=Ed(t);throw r==="an object"?e.Wu(a+" a custom object"):e.Wu(a+" "+r)}}function Op(a,e,t){if((e=Dt(e))instanceof Sd)return e._internalPath;if(typeof e=="string")return Og(a,e);throw Zh("Field path arguments must be of type string or ",a,!1,void 0,t)}const CD=new RegExp("[~\\*/\\[\\]]");function Og(a,e,t){if(e.search(CD)>=0)throw Zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,t);try{return new Sd(...e.split("."))._internalPath}catch{throw Zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,t)}}function Zh(a,e,t,r,s){const l=r&&!r.isEmpty(),u=s!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${r}`),u&&(p+=` in document ${s}`),p+=")"),new we(ce.INVALID_ARGUMENT,m+a+p)}function XT(a,e){return a.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,t,r,s,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class AD extends ZT{data(){return super.data()}}function Rd(a,e){return typeof e=="string"?Og(a,e):e instanceof Sd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new we(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pg{}class JT extends Pg{}function eS(a,e,...t){let r=[];e instanceof Pg&&r.push(e),r=r.concat(t),function(l){const u=l.filter(p=>p instanceof Ug).length,m=l.filter(p=>p instanceof kd).length;if(u>1||u>0&&m>0)throw new we(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)a=s._apply(a);return a}class kd extends JT{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new kd(e,t,r)}_apply(e){const t=this._parse(e);return rS(e._query,t),new xs(e.firestore,e.converter,Sp(e._query,t))}_parse(e){const t=Cd(e.firestore);return function(l,u,m,p,y,v,w){let T;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new we(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Yw(w,v);const k=[];for(const C of w)k.push(Qw(p,l,C));T={arrayValue:{values:k}}}else T=Qw(p,l,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Yw(w,v),T=xD(m,u,w,v==="in"||v==="not-in");return Ht.create(y,v,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function tS(a,e,t){const r=e,s=Rd("where",a);return kd._create(s,r,t)}class Ug extends Pg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ug(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:gr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,l){let u=s;const m=l.getFlattenedFilters();for(const p of m)rS(u,p),u=Sp(u,p)}(e._query,t),new xs(e.firestore,e.converter,Sp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vg extends JT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Vg(e,t)}_apply(e){const t=function(s,l,u){if(s.startAt!==null)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ac(l,u)}(e._query,this._field,this._direction);return new xs(e.firestore,e.converter,function(s,l){const u=s.explicitOrderBy.concat([l]);return new Ho(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function nS(a,e="asc"){const t=e,r=Rd("orderBy",a);return Vg._create(r,t)}function Qw(a,e,t){if(typeof(t=Dt(t))=="string"){if(t==="")throw new we(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KE(e)&&t.indexOf("/")!==-1)throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(wt.fromString(t));if(!Ce.isDocumentKey(r))throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uw(a,new Ce(r))}if(t instanceof kn)return uw(a,t._key);throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ed(t)}.`)}function Yw(a,e){if(!Array.isArray(a)||a.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rS(a,e){const t=function(s,l){for(const u of s)for(const m of u.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null}(a.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class kD{convertValue(e,t="none"){switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ci(e,(s,l)=>{r[s]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,s;const l=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Gh].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>Vt(u.doubleValue));return new Ng(l)}convertGeoPoint(e){return new Ig(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=fd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sc(e));default:return null}}convertTimestamp(e){const t=_i(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=wt.fromString(e);ot(gT(r));const s=new xc(r.get(1),r.get(3)),l=new Ce(r.popFirst(5));return s.isEqual(t)||Ra(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(a,e,t){let r;return r=a?a.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iS extends ZT{constructor(e,t,r,s,l,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Rd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Mh extends iS{data(e={}){return super.data(e)}}class ID{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new mc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Mh(this._firestore,this._userDataWriter,r.key,r,new mc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,l){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(m=>{const p=new Mh(s._firestore,s._userDataWriter,m.doc.key,m.doc,new mc(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(m=>l||m.type!==3).map(m=>{const p=new Mh(s._firestore,s._userDataWriter,m.doc.key,m.doc,new mc(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter);let y=-1,v=-1;return m.type!==0&&(y=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),v=u.indexOf(m.doc.key)),{type:ND(m.type),doc:p,oldIndex:y,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ND(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(a){a=zr(a,kn);const e=zr(a.firestore,$o);return mD(kg(e),a._key).then(t=>jD(e,a,t))}class sS extends kD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}function ar(a){a=zr(a,xs);const e=zr(a.firestore,$o),t=kg(e),r=new sS(e);return RD(a._query),pD(t,a._query).then(s=>new ID(e,r,a,s))}function DD(a,e,t){a=zr(a,kn);const r=zr(a.firestore,$o),s=aS(a.converter,e);return Lg(r,[QT(Cd(r),"setDoc",a._key,s,a.converter!==null,t).toMutation(a._key,fr.none())])}function oS(a,e,t,...r){a=zr(a,kn);const s=zr(a.firestore,$o),l=Cd(s);let u;return u=typeof(e=Dt(e))=="string"||e instanceof Sd?SD(l,"updateDoc",a._key,e,t,r):TD(l,"updateDoc",a._key,e),Lg(s,[u.toMutation(a._key,fr.exists(!0))])}function hs(a,e){const t=zr(a.firestore,$o),r=yr(a),s=aS(a.converter,e);return Lg(t,[QT(Cd(a.firestore),"addDoc",r._key,s,a.converter!==null,{}).toMutation(r._key,fr.exists(!1))]).then(()=>r)}function Lg(a,e){return function(r,s){const l=new Sa;return r.asyncQueue.enqueueAndForget(async()=>nD(await fD(r),s,l)),l.promise}(kg(a),e)}function jD(a,e,t){const r=t.docs.get(e._key),s=new sS(a);return new iS(a,s,e._key,r,new mc(t.hasPendingWrites,t.fromCache),e.converter)}function MD(){return new jg("serverTimestamp")}(function(e,t=!0){(function(s){zo=s})(Es),ms(new yi("firestore",(r,{instanceIdentifier:s,options:l})=>{const u=r.getProvider("app").getImmediate(),m=new $o(new xk(r.getProvider("auth-internal")),new Rk(u,r.getProvider("app-check-internal")),function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new we(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xc(y.options.projectId,v)}(u,s),u);return l=Object.assign({useFetchStreams:t},l),m._setSettings(l),m},"PUBLIC").setMultipleInstances(!0)),Pr(Z0,J0,e),Pr(Z0,J0,"esm2017")})();var OD="firebase",PD="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(OD,PD,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="firebasestorage.googleapis.com",cS="storageBucket",UD=2*60*1e3,VD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt extends Hr{constructor(e,t,r=0){super(tp(e),`Firebase Storage: ${t} (${tp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jt;(function(a){a.UNKNOWN="unknown",a.OBJECT_NOT_FOUND="object-not-found",a.BUCKET_NOT_FOUND="bucket-not-found",a.PROJECT_NOT_FOUND="project-not-found",a.QUOTA_EXCEEDED="quota-exceeded",a.UNAUTHENTICATED="unauthenticated",a.UNAUTHORIZED="unauthorized",a.UNAUTHORIZED_APP="unauthorized-app",a.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",a.INVALID_CHECKSUM="invalid-checksum",a.CANCELED="canceled",a.INVALID_EVENT_NAME="invalid-event-name",a.INVALID_URL="invalid-url",a.INVALID_DEFAULT_BUCKET="invalid-default-bucket",a.NO_DEFAULT_BUCKET="no-default-bucket",a.CANNOT_SLICE_BLOB="cannot-slice-blob",a.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",a.NO_DOWNLOAD_URL="no-download-url",a.INVALID_ARGUMENT="invalid-argument",a.INVALID_ARGUMENT_COUNT="invalid-argument-count",a.APP_DELETED="app-deleted",a.INVALID_ROOT_OPERATION="invalid-root-operation",a.INVALID_FORMAT="invalid-format",a.INTERNAL_ERROR="internal-error",a.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jt||(jt={}));function tp(a){return"storage/"+a}function Bg(){const a="An unknown error occurred, please check the error payload for server response.";return new Mt(jt.UNKNOWN,a)}function LD(a){return new Mt(jt.OBJECT_NOT_FOUND,"Object '"+a+"' does not exist.")}function BD(a){return new Mt(jt.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function zD(){const a="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Mt(jt.UNAUTHENTICATED,a)}function qD(){return new Mt(jt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function FD(a){return new Mt(jt.UNAUTHORIZED,"User does not have permission to access '"+a+"'.")}function HD(){return new Mt(jt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function GD(){return new Mt(jt.CANCELED,"User canceled the upload/download.")}function $D(a){return new Mt(jt.INVALID_URL,"Invalid URL '"+a+"'.")}function KD(a){return new Mt(jt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+a+"'.")}function QD(){return new Mt(jt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cS+"' property when initializing the app?")}function YD(){return new Mt(jt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function WD(){return new Mt(jt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function XD(a){return new Mt(jt.UNSUPPORTED_ENVIRONMENT,`${a} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Pp(a){return new Mt(jt.INVALID_ARGUMENT,a)}function uS(){return new Mt(jt.APP_DELETED,"The Firebase app was deleted.")}function ZD(a){return new Mt(jt.INVALID_ROOT_OPERATION,"The operation '"+a+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _c(a,e){return new Mt(jt.INVALID_FORMAT,"String does not match format '"+a+"': "+e)}function sc(a){throw new Mt(jt.INTERNAL_ERROR,"Internal error: "+a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Gn.makeFromUrl(e,t)}catch{return new Gn(e,"")}if(r.path==="")return r;throw KD(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function l(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const u="(/(.*))?$",m=new RegExp("^gs://"+s+u,"i"),p={bucket:1,path:3};function y(ne){ne.path_=decodeURIComponent(ne.path)}const v="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",A=new RegExp(`^https?://${w}/${v}/b/${s}/o${T}`,"i"),k={bucket:1,path:3},C=t===lS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",I=new RegExp(`^https?://${C}/${s}/${x}`,"i"),L=[{regex:m,indices:p,postModify:l},{regex:A,indices:k,postModify:y},{regex:I,indices:{bucket:1,path:2},postModify:y}];for(let ne=0;ne<L.length;ne++){const oe=L[ne],de=oe.regex.exec(e);if(de){const O=de[oe.indices.bucket];let N=de[oe.indices.path];N||(N=""),r=new Gn(O,N),oe.postModify(r);break}}if(r==null)throw $D(e);return r}}class JD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(a,e,t){let r=1,s=null,l=null,u=!1,m=0;function p(){return m===2}let y=!1;function v(...x){y||(y=!0,e.apply(null,x))}function w(x){s=setTimeout(()=>{s=null,a(A,p())},x)}function T(){l&&clearTimeout(l)}function A(x,...I){if(y){T();return}if(x){T(),v.call(null,x,...I);return}if(p()||u){T(),v.call(null,x,...I);return}r<64&&(r*=2);let L;m===1?(m=2,L=0):L=(r+Math.random())*1e3,w(L)}let k=!1;function C(x){k||(k=!0,T(),!y&&(s!==null?(x||(m=2),clearTimeout(s),w(0)):x||(m=1)))}return w(0),l=setTimeout(()=>{u=!0,C(!0)},t),C}function t2(a){a(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(a){return a!==void 0}function r2(a){return typeof a=="object"&&!Array.isArray(a)}function zg(a){return typeof a=="string"||a instanceof String}function Ww(a){return qg()&&a instanceof Blob}function qg(){return typeof Blob<"u"}function Xw(a,e,t,r){if(r<e)throw Pp(`Invalid value for '${a}'. Expected ${e} or greater.`);if(r>t)throw Pp(`Invalid value for '${a}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(a,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${a}`}function hS(a){const e=encodeURIComponent;let t="?";for(const r in a)if(a.hasOwnProperty(r)){const s=e(r)+"="+e(a[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var ds;(function(a){a[a.NO_ERROR=0]="NO_ERROR",a[a.NETWORK_ERROR=1]="NETWORK_ERROR",a[a.ABORT=2]="ABORT"})(ds||(ds={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(a,e){const t=a>=500&&a<600,s=[408,429].indexOf(a)!==-1,l=e.indexOf(a)!==-1;return t||s||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,t,r,s,l,u,m,p,y,v,w,T=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=m,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=w,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,k)=>{this.resolve_=A,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Eh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=m=>{const p=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,y)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const m=l.getErrorCode()===ds.NO_ERROR,p=l.getStatus();if(!m||a2(p,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===ds.ABORT;r(!1,new Eh(!1,null,v));return}const y=this.successCodes_.indexOf(p)!==-1;r(!0,new Eh(y,l))})},t=(r,s)=>{const l=this.resolve_,u=this.reject_,m=s.connection;if(s.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());n2(p)?l(p):l()}catch(p){u(p)}else if(m!==null){const p=Bg();p.serverResponse=m.getErrorText(),this.errorCallback_?u(this.errorCallback_(m,p)):u(p)}else if(s.canceled){const p=this.appDelete_?uS():GD();u(p)}else{const p=HD();u(p)}};this.canceled_?t(!1,new Eh(!1,null,!0)):this.backoffId_=e2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&t2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Eh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function s2(a,e){e!==null&&e.length>0&&(a.Authorization="Firebase "+e)}function o2(a,e){a["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function l2(a,e){e&&(a["X-Firebase-GMPID"]=e)}function c2(a,e){e!==null&&(a["X-Firebase-AppCheck"]=e)}function u2(a,e,t,r,s,l,u=!0){const m=hS(a.urlParams),p=a.url+m,y=Object.assign({},a.headers);return l2(y,e),s2(y,t),o2(y,l),c2(y,r),new i2(p,a.method,y,a.body,a.successCodes,a.additionalRetryCodes,a.handler,a.errorHandler,a.timeout,a.progressCallback,s,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function d2(...a){const e=h2();if(e!==void 0){const t=new e;for(let r=0;r<a.length;r++)t.append(a[r]);return t.getBlob()}else{if(qg())return new Blob(a);throw new Mt(jt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function f2(a,e,t){return a.webkitSlice?a.webkitSlice(e,t):a.mozSlice?a.mozSlice(e,t):a.slice?a.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(a){if(typeof atob>"u")throw XD("base-64");return atob(a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class np{constructor(e,t){this.data=e,this.contentType=t||null}}function p2(a,e){switch(a){case Or.RAW:return new np(dS(e));case Or.BASE64:case Or.BASE64URL:return new np(fS(a,e));case Or.DATA_URL:return new np(y2(e),v2(e))}throw Bg()}function dS(a){const e=[];for(let t=0;t<a.length;t++){let r=a.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<a.length-1&&(a.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=r,u=a.charCodeAt(++t);r=65536|(l&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function g2(a){let e;try{e=decodeURIComponent(a)}catch{throw _c(Or.DATA_URL,"Malformed data URL.")}return dS(e)}function fS(a,e){switch(a){case Or.BASE64:{const s=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(s||l)throw _c(a,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Or.BASE64URL:{const s=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(s||l)throw _c(a,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=m2(e)}catch(s){throw s.message.includes("polyfill")?s:_c(a,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class mS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw _c(Or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=_2(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function y2(a){const e=new mS(a);return e.base64?fS(Or.BASE64,e.rest):g2(e.rest)}function v2(a){return new mS(a).contentType}function _2(a,e){return a.length>=e.length?a.substring(a.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t){let r=0,s="";Ww(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ww(this.data_)){const r=this.data_,s=f2(r,e,t);return s===null?null:new ci(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ci(r,!0)}}static getBlob(...e){if(qg()){const t=e.map(r=>r instanceof ci?r.data_:r);return new ci(d2.apply(null,t))}else{const t=e.map(u=>zg(u)?p2(Or.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let l=0;return t.forEach(u=>{for(let m=0;m<u.length;m++)s[l++]=u[m]}),new ci(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(a){let e;try{e=JSON.parse(a)}catch{return null}return r2(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(a){if(a.length===0)return null;const e=a.lastIndexOf("/");return e===-1?"":a.slice(0,e)}function b2(a,e){const t=e.split("/").filter(r=>r.length>0).join("/");return a.length===0?t:a+"/"+t}function gS(a){const e=a.lastIndexOf("/",a.length-2);return e===-1?a:a.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(a,e){return e}class An{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||E2}}let Th=null;function T2(a){return!zg(a)||a.length<2?a:gS(a)}function yS(){if(Th)return Th;const a=[];a.push(new An("bucket")),a.push(new An("generation")),a.push(new An("metageneration")),a.push(new An("name","fullPath",!0));function e(l,u){return T2(u)}const t=new An("name");t.xform=e,a.push(t);function r(l,u){return u!==void 0?Number(u):u}const s=new An("size");return s.xform=r,a.push(s),a.push(new An("timeCreated")),a.push(new An("updated")),a.push(new An("md5Hash",null,!0)),a.push(new An("cacheControl",null,!0)),a.push(new An("contentDisposition",null,!0)),a.push(new An("contentEncoding",null,!0)),a.push(new An("contentLanguage",null,!0)),a.push(new An("contentType",null,!0)),a.push(new An("metadata","customMetadata",!0)),Th=a,Th}function S2(a,e){function t(){const r=a.bucket,s=a.fullPath,l=new Gn(r,s);return e._makeStorageReference(l)}Object.defineProperty(a,"ref",{get:t})}function x2(a,e,t){const r={};r.type="file";const s=t.length;for(let l=0;l<s;l++){const u=t[l];r[u.local]=u.xform(r,e[u.server])}return S2(r,a),r}function vS(a,e,t){const r=pS(e);return r===null?null:x2(a,r,t)}function C2(a,e,t,r){const s=pS(e);if(s===null||!zg(s.downloadTokens))return null;const l=s.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(y=>{const v=a.bucket,w=a.fullPath,T="/b/"+u(v)+"/o/"+u(w),A=Fg(T,t,r),k=hS({alt:"media",token:y});return A+k})[0]}function A2(a,e){const t={},r=e.length;for(let s=0;s<r;s++){const l=e[s];l.writable&&(t[l.server]=a[l.local])}return JSON.stringify(t)}class _S{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(a){if(!a)throw Bg()}function R2(a,e){function t(r,s){const l=vS(a,s,e);return wS(l!==null),l}return t}function k2(a,e){function t(r,s){const l=vS(a,s,e);return wS(l!==null),C2(l,s,a.host,a._protocol)}return t}function bS(a){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=qD():s=zD():t.getStatus()===402?s=BD(a.bucket):t.getStatus()===403?s=FD(a.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function I2(a){const e=bS(a);function t(r,s){let l=e(r,s);return r.getStatus()===404&&(l=LD(a.path)),l.serverResponse=s.serverResponse,l}return t}function N2(a,e,t){const r=e.fullServerUrl(),s=Fg(r,a.host,a._protocol),l="GET",u=a.maxOperationRetryTime,m=new _S(s,l,k2(a,t),u);return m.errorHandler=I2(e),m}function D2(a,e){return a&&a.contentType||e&&e.type()||"application/octet-stream"}function j2(a,e,t){const r=Object.assign({},t);return r.fullPath=a.path,r.size=e.size(),r.contentType||(r.contentType=D2(null,e)),r}function M2(a,e,t,r,s){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function m(){let L="";for(let ne=0;ne<2;ne++)L=L+Math.random().toString().slice(2);return L}const p=m();u["Content-Type"]="multipart/related; boundary="+p;const y=j2(e,r,s),v=A2(y,t),w="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+p+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+p+"--",A=ci.getBlob(w,r,T);if(A===null)throw YD();const k={name:y.fullPath},C=Fg(l,a.host,a._protocol),x="POST",I=a.maxUploadRetryTime,z=new _S(C,x,R2(a,t),I);return z.urlParams=k,z.headers=u,z.body=A.uploadData(),z.errorHandler=bS(e),z}class O2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ds.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ds.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ds.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw sc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const l in s)s.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,s[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw sc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class P2 extends O2{initXhr(){this.xhr_.responseType="text"}}function ES(){return new P2}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t){this._service=e,t instanceof Gn?this._location=t:this._location=Gn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ys(e,t)}get root(){const e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gS(this._location.path)}get storage(){return this._service}get parent(){const e=w2(this._location.path);if(e===null)return null;const t=new Gn(this._location.bucket,e);return new ys(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw ZD(e)}}function U2(a,e,t){a._throwIfRoot("uploadBytes");const r=M2(a.storage,a._location,yS(),new ci(e,!0),t);return a.storage.makeRequestWithTokens(r,ES).then(s=>({metadata:s,ref:a}))}function V2(a){a._throwIfRoot("getDownloadURL");const e=N2(a.storage,a._location,yS());return a.storage.makeRequestWithTokens(e,ES).then(t=>{if(t===null)throw WD();return t})}function L2(a,e){const t=b2(a._location.path,e),r=new Gn(a._location.bucket,t);return new ys(a.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(a){return/^[A-Za-z]+:\/\//.test(a)}function z2(a,e){return new ys(a,e)}function TS(a,e){if(a instanceof Hg){const t=a;if(t._bucket==null)throw QD();const r=new ys(t,t._bucket);return e!=null?TS(r,e):r}else return e!==void 0?L2(a,e):a}function q2(a,e){if(e&&B2(e)){if(a instanceof Hg)return z2(a,e);throw Pp("To use ref(service, url), the first argument must be a Storage instance.")}else return TS(a,e)}function Zw(a,e){const t=e==null?void 0:e[cS];return t==null?null:Gn.makeFromBucketSpec(t,a)}function F2(a,e,t,r={}){a.host=`${e}:${t}`,a._protocol="http";const{mockUserToken:s}=r;s&&(a._overrideAuthToken=typeof s=="string"?s:gE(s,a.app.options.projectId))}class Hg{constructor(e,t,r,s,l){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=l,this._bucket=null,this._host=lS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=UD,this._maxUploadRetryTime=VD,this._requests=new Set,s!=null?this._bucket=Gn.makeFromBucketSpec(s,this._host):this._bucket=Zw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=Zw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ys(this,e)}_makeRequest(e,t,r,s,l=!0){if(this._deleted)return new JD(uS());{const u=u2(e,this._appId,r,s,t,this._firebaseVersion,l);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Jw="@firebase/storage",eb="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="storage";function xS(a,e,t){return a=Dt(a),U2(a,e,t)}function CS(a){return a=Dt(a),V2(a)}function AS(a,e){return a=Dt(a),q2(a,e)}function H2(a=ag(),e){a=Dt(a);const r=ud(a,SS).getImmediate({identifier:e}),s=fE("storage");return s&&G2(r,...s),r}function G2(a,e,t,r={}){F2(a,e,t,r)}function $2(a,{instanceIdentifier:e}){const t=a.getProvider("app").getImmediate(),r=a.getProvider("auth-internal"),s=a.getProvider("app-check-internal");return new Hg(t,r,s,e,Es)}function K2(){ms(new yi(SS,$2,"PUBLIC").setMultipleInstances(!0)),Pr(Jw,eb,""),Pr(Jw,eb,"esm2017")}K2();function Gg(a,e){var t={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&e.indexOf(r)<0&&(t[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(a);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(a,r[s])&&(t[r[s]]=a[r[s]]);return t}function RS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q2=RS,kS=new Oc("auth","Firebase",RS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new ng("@firebase/auth");function Y2(a,...e){Jh.logLevel<=Qe.WARN&&Jh.warn(`Auth (${Es}): ${a}`,...e)}function Oh(a,...e){Jh.logLevel<=Qe.ERROR&&Jh.error(`Auth (${Es}): ${a}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(a,...e){throw Kg(a,...e)}function mr(a,...e){return Kg(a,...e)}function $g(a,e,t){const r=Object.assign(Object.assign({},Q2()),{[e]:t});return new Oc("auth","Firebase",r).create(e,{appName:a.name})}function xa(a){return $g(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W2(a,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ir(a,"argument-error"),$g(a,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kg(a,...e){if(typeof a!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=a.name),a._errorFactory.create(t,...r)}return kS.create(a,...e)}function Ne(a,e,...t){if(!a)throw Kg(e,...t)}function ba(a){const e="INTERNAL ASSERTION FAILED: "+a;throw Oh(e),new Error(e)}function Ia(a,e){a||ba(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.href)||""}function X2(){return tb()==="http:"||tb()==="https:"}function tb(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(X2()||n1()||"connection"in navigator)?navigator.onLine:!0}function J2(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ia(t>e,"Short delay should be less than long delay!"),this.isMobile=JR()||r1()}get(){return Z2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(a,e){Ia(a.emulator,"Emulator should always be set here");const{url:t}=a.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nj=new qc(3e4,6e4);function Na(a,e){return a.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:a.tenantId}):e}async function Gr(a,e,t,r,s={}){return NS(a,s,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const m=Pc(Object.assign({key:a.config.apiKey},u)).slice(1),p=await a._getAdditionalHeaders();p["Content-Type"]="application/json",a.languageCode&&(p["X-Firebase-Locale"]=a.languageCode);const y=Object.assign({method:e,headers:p},l);return t1()||(y.referrerPolicy="no-referrer"),IS.fetch()(await DS(a,a.config.apiHost,t,m),y)})}async function NS(a,e,t){a._canInitEmulator=!1;const r=Object.assign(Object.assign({},ej),e);try{const s=new aj(a),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Sh(a,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const m=l.ok?u.errorMessage:u.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(a,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Sh(a,"email-already-in-use",u);if(p==="USER_DISABLED")throw Sh(a,"user-disabled",u);const v=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw $g(a,v,y);ir(a,v)}}catch(s){if(s instanceof Hr)throw s;ir(a,"network-request-failed",{message:String(s)})}}async function Fc(a,e,t,r,s={}){const l=await Gr(a,e,t,r,s);return"mfaPendingCredential"in l&&ir(a,"multi-factor-auth-required",{_serverResponse:l}),l}async function DS(a,e,t,r){const s=`${e}${t}?${r}`,l=a,u=l.config.emulator?Qg(a.config,s):`${a.config.apiScheme}://${s}`;return tj.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function rj(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(mr(this.auth,"network-request-failed")),nj.get())})}}function Sh(a,e,t){const r={appName:a.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=mr(a,e,r);return s.customData._tokenResponse=t,s}function nb(a){return a!==void 0&&a.enterprise!==void 0}class ij{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return rj(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sj(a,e){return Gr(a,"GET","/v2/recaptchaConfig",Na(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oj(a,e){return Gr(a,"POST","/v1/accounts:delete",e)}async function ed(a,e){return Gr(a,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lj(a,e=!1){const t=Dt(a),r=await t.getIdToken(e),s=Yg(r);Ne(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:s,token:r,authTime:wc(rp(s.auth_time)),issuedAtTime:wc(rp(s.iat)),expirationTime:wc(rp(s.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function rp(a){return Number(a)*1e3}function Yg(a){const[e,t,r]=a.split(".");if(e===void 0||t===void 0||r===void 0)return Oh("JWT malformed, contained fewer than 3 sections"),null;try{const s=hE(t);return s?JSON.parse(s):(Oh("Failed to decode base64 JWT payload"),null)}catch(s){return Oh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function rb(a){const e=Yg(a);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(a,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Hr&&cj(r)&&a.auth.currentUser===a&&await a.auth.signOut(),r}}function cj({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wc(this.lastLoginAt),this.creationTime=wc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function td(a){var e;const t=a.auth,r=await a.getIdToken(),s=await Vo(a,ed(t,{idToken:r}));Ne(s==null?void 0:s.users.length,t,"internal-error");const l=s.users[0];a._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?jS(l.providerUserInfo):[],m=dj(a.providerData,u),p=a.isAnonymous,y=!(a.email&&l.passwordHash)&&!(m!=null&&m.length),v=p?y:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:m,metadata:new Vp(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(a,w)}async function hj(a){const e=Dt(a);await td(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dj(a,e){return[...a.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function jS(a){return a.map(e=>{var{providerId:t}=e,r=Gg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fj(a,e){const t=await NS(a,{},async()=>{const r=Pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=a.config,u=await DS(a,s,"/v1/token",`key=${l}`),m=await a._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",IS.fetch()(u,{method:"POST",headers:m,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function mj(a,e){return Gr(a,"POST","/v2/accounts:revokeToken",Na(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=rb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:l}=await fj(e,t);this.updateTokensAndExpiration(r,s,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:l}=t,u=new Ro;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Ne(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),l&&(Ne(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(a,e){Ne(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,l=Gg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Vp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Vo(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lj(this,e)}reload(){return hj(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await td(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(xa(this.auth));const e=await this.getIdToken();return await Vo(this,oj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,l,u,m,p,y,v;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(s=t.email)!==null&&s!==void 0?s:void 0,A=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,k=(u=t.photoURL)!==null&&u!==void 0?u:void 0,C=(m=t.tenantId)!==null&&m!==void 0?m:void 0,x=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,I=(y=t.createdAt)!==null&&y!==void 0?y:void 0,z=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:L,emailVerified:ne,isAnonymous:oe,providerData:de,stsTokenManager:O}=t;Ne(L&&O,e,"internal-error");const N=Ro.fromJSON(this.name,O);Ne(typeof L=="string",e,"internal-error"),li(w,e.name),li(T,e.name),Ne(typeof ne=="boolean",e,"internal-error"),Ne(typeof oe=="boolean",e,"internal-error"),li(A,e.name),li(k,e.name),li(C,e.name),li(x,e.name),li(I,e.name),li(z,e.name);const j=new dr({uid:L,auth:e,email:T,emailVerified:ne,displayName:w,isAnonymous:oe,photoURL:k,phoneNumber:A,tenantId:C,stsTokenManager:N,createdAt:I,lastLoginAt:z});return de&&Array.isArray(de)&&(j.providerData=de.map(U=>Object.assign({},U))),x&&(j._redirectEventId=x),j}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ro;s.updateFromServerResponse(t);const l=new dr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await td(l),l}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ne(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?jS(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),m=new Ro;m.updateFromIdToken(r);const p=new dr({uid:s.localId,auth:e,stsTokenManager:m,isAnonymous:u}),y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Vp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Map;function Ea(a){Ia(a instanceof Function,"Expected a class definition");let e=ab.get(a);return e?(Ia(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,ab.set(a,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}MS.type="NONE";const ib=MS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(a,e,t){return`firebase:${a}:${e}:${t}`}class ko{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:l}=this.auth;this.fullUserKey=Ph(this.userKey,s.apiKey,l),this.fullPersistenceKey=Ph("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ed(this.auth,{idToken:e}).catch(()=>{});return t?dr._fromGetAccountInfoResponse(this.auth,t,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ko(Ea(ib),e,r);const s=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=s[0]||Ea(ib);const u=Ph(r,e.config.apiKey,e.name);let m=null;for(const y of t)try{const v=await y._get(u);if(v){let w;if(typeof v=="string"){const T=await ed(e,{idToken:v}).catch(()=>{});if(!T)break;w=await dr._fromGetAccountInfoResponse(e,T,v)}else w=dr._fromJSON(e,v);y!==l&&(m=w),l=y;break}}catch{}const p=s.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ko(l,e,r):(l=p[0],m&&await l._set(u,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new ko(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BS(e))return"Blackberry";if(zS(e))return"Webos";if(PS(e))return"Safari";if((e.includes("chrome/")||US(e))&&!e.includes("edge/"))return"Chrome";if(LS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=a.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function OS(a=bn()){return/firefox\//i.test(a)}function PS(a=bn()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function US(a=bn()){return/crios\//i.test(a)}function VS(a=bn()){return/iemobile/i.test(a)}function LS(a=bn()){return/android/i.test(a)}function BS(a=bn()){return/blackberry/i.test(a)}function zS(a=bn()){return/webos/i.test(a)}function Wg(a=bn()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function pj(a=bn()){var e;return Wg(a)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gj(){return a1()&&document.documentMode===10}function qS(a=bn()){return Wg(a)||LS(a)||zS(a)||BS(a)||/windows phone/i.test(a)||VS(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(a,e=[]){let t;switch(a){case"Browser":t=sb(bn());break;case"Worker":t=`${sb(bn())}-${a}`;break;default:t=a}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Es}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,m)=>{try{const p=e(l);u(p)}catch(p){m(p)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(a,e={}){return Gr(a,"GET","/v2/passwordPolicy",Na(a,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=6;class wj{constructor(e){var t,r,s,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:_j,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,l,u,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(s=p.containsLowercaseLetter)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ob(this),this.idTokenSubscription=new ob(this),this.beforeStateQueue=new yj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ea(t)),this._initializationPromise=this.queue(async()=>{var r,s,l;if(!this._deleted&&(this.persistenceManager=await ko.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ed(this,{idToken:e}),r=await dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Mn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===m)&&(p!=null&&p.user)&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await td(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=J2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(xa(this));const t=e?Dt(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(xa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(xa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ea(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vj(this),t=new wj(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Oc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await mj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ea(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[Ea(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(m,this,"internal-error"),m.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,s);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Y2(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Da(a){return Dt(a)}class ob{constructor(e){this.auth=e,this.observer=null,this.addObserver=d1(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Id={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ej(a){Id=a}function HS(a){return Id.loadJS(a)}function Tj(){return Id.recaptchaEnterpriseScript}function Sj(){return Id.gapiScript}function xj(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class Cj{constructor(){this.enterprise=new Aj}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Aj{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Rj="recaptcha-enterprise",GS="NO_RECAPTCHA";class kj{constructor(e){this.type=Rj,this.auth=Da(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,m)=>{sj(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new ij(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(p=>{m(p)})})}function s(l,u,m){const p=window.grecaptcha;nb(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(GS)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Cj().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(m=>{if(!t&&nb(window.grecaptcha))s(m,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Tj();p.length!==0&&(p+=m),HS(p).then(()=>{s(m,l,u)}).catch(y=>{u(y)})}}).catch(m=>{u(m)})})}}async function lb(a,e,t,r=!1,s=!1){const l=new kj(a);let u;if(s)u=GS;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const m=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:u}):Object.assign(m,{captchaResponse:u}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function nd(a,e,t,r,s){var l;if(!((l=a._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await lb(a,e,t,t==="getOobCode");return r(a,u)}else return r(a,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await lb(a,e,t,t==="getOobCode");return r(a,m)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(a,e){const t=ud(a,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(fs(l,e??{}))return s;ir(s,"already-initialized")}return t.initialize({options:e})}function Nj(a,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ea);e!=null&&e.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Dj(a,e,t){const r=Da(a);Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,l=$S(e),{host:u,port:m}=jj(e),p=m===null?"":`:${m}`,y={url:`${l}//${u}${p}/`},v=Object.freeze({host:u,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ne(fs(y,r.config.emulator)&&fs(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Mj()}function $S(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function jj(a){const e=$S(a),t=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const l=s[1];return{host:l,port:cb(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:cb(u)}}}function cb(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function Mj(){function a(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ba("not implemented")}_getIdTokenResponse(e){return ba("not implemented")}_linkToIdToken(e,t){return ba("not implemented")}_getReauthenticationResolver(e){return ba("not implemented")}}async function Oj(a,e){return Gr(a,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pj(a,e){return Fc(a,"POST","/v1/accounts:signInWithPassword",Na(a,e))}async function Uj(a,e){return Gr(a,"POST","/v1/accounts:sendOobCode",Na(a,e))}async function Vj(a,e){return Uj(a,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(a,e){return Fc(a,"POST","/v1/accounts:signInWithEmailLink",Na(a,e))}async function Bj(a,e){return Fc(a,"POST","/v1/accounts:signInWithEmailLink",Na(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends Xg{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Nc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Nc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nd(e,t,"signInWithPassword",Pj);case"emailLink":return Lj(e,{email:this._email,oobCode:this._password});default:ir(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nd(e,r,"signUpPassword",Oj);case"emailLink":return Bj(e,{idToken:t,email:this._email,oobCode:this._password});default:ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(a,e){return Fc(a,"POST","/v1/accounts:signInWithIdp",Na(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj="http://localhost";class vs extends Xg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,l=Gg(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new vs(r,s);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Io(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Io(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Io(e,t)}buildRequest(){const e={requestUri:zj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Fj(a){const e=cc(uc(a)).link,t=e?cc(uc(e)).deep_link_id:null,r=cc(uc(a)).deep_link_id;return(r?cc(uc(r)).link:null)||r||t||e||a}class Zg{constructor(e){var t,r,s,l,u,m;const p=cc(uc(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(r=p.oobCode)!==null&&r!==void 0?r:null,w=qj((s=p.mode)!==null&&s!==void 0?s:null);Ne(y&&v&&w,"argument-error"),this.apiKey=y,this.operation=w,this.code=v,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=p.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=Fj(e);try{return new Zg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.providerId=Ko.PROVIDER_ID}static credential(e,t){return Nc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Zg.parseLink(t);return Ne(r,"argument-error"),Nc._fromEmailAndCode(e,r.code,r.tenantId)}}Ko.PROVIDER_ID="password";Ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends Jg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Hc{constructor(){super("facebook.com")}static credential(e){return vs._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.FACEBOOK_SIGN_IN_METHOD="facebook.com";_a.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends Hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vs._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return wa.credential(t,r)}catch{return null}}}wa.GOOGLE_SIGN_IN_METHOD="google.com";wa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Hc{constructor(){super("github.com")}static credential(e){return vs._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.GITHUB_SIGN_IN_METHOD="github.com";ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Hc{constructor(){super("twitter.com")}static credential(e,t){return vs._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return hi.credential(t,r)}catch{return null}}}hi.TWITTER_SIGN_IN_METHOD="twitter.com";hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hj(a,e){return Fc(a,"POST","/v1/accounts:signUp",Na(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const l=await dr._fromIdTokenResponse(e,r,s),u=ub(r);return new _s({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=ub(r);return new _s({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function ub(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd extends Hr{constructor(e,t,r,s){var l;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,rd.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new rd(e,t,r,s)}}function KS(a,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(a):t._getIdTokenResponse(a)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?rd._fromErrorAndOperation(a,l,e,r):l})}async function Gj(a,e,t=!1){const r=await Vo(a,e._linkToIdToken(a.auth,await a.getIdToken()),t);return _s._forOperation(a,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $j(a,e,t=!1){const{auth:r}=a;if(Mn(r.app))return Promise.reject(xa(r));const s="reauthenticate";try{const l=await Vo(a,KS(r,s,e,a),t);Ne(l.idToken,r,"internal-error");const u=Yg(l.idToken);Ne(u,r,"internal-error");const{sub:m}=u;return Ne(a.uid===m,r,"user-mismatch"),_s._forOperation(a,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ir(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(a,e,t=!1){if(Mn(a.app))return Promise.reject(xa(a));const r="signIn",s=await KS(a,r,e),l=await _s._fromIdTokenResponse(a,r,s);return t||await a._updateCurrentUser(l.user),l}async function Kj(a,e){return QS(Da(a),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(a){const e=Da(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Qj(a,e,t){const r=Da(a);await nd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Vj)}async function Yj(a,e,t){if(Mn(a.app))return Promise.reject(xa(a));const r=Da(a),u=await nd(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hj).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&YS(a),p}),m=await _s._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(m.user),m}function Wj(a,e,t){return Mn(a.app)?Promise.reject(xa(a)):Kj(Dt(a),Ko.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&YS(a),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xj(a,e){return Gr(a,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zj(a,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Dt(a),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Vo(r,Xj(r.auth,l));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const m=r.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=r.displayName,m.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function Jj(a,e,t,r){return Dt(a).onIdTokenChanged(e,t,r)}function eM(a,e,t){return Dt(a).beforeAuthStateChanged(e,t)}function tM(a,e,t,r){return Dt(a).onAuthStateChanged(e,t,r)}const ad="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ad,"1"),this.storage.removeItem(ad),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM=1e3,rM=10;class XS extends WS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,p)=>{this.notifyListeners(u,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);gj()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,rM):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},nM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}XS.type="LOCAL";const aM=XS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS extends WS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ZS.type="SESSION";const JS=ZS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Nd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:l}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const m=Array.from(u).map(async y=>y(t.origin,l)),p=await iM(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(a="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return a+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,u;return new Promise((m,p)=>{const y=ey("",20);s.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(w){const T=w;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(T.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function oM(a){Lr().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function lM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cM(){var a;return((a=navigator==null?void 0:navigator.serviceWorker)===null||a===void 0?void 0:a.controller)||null}function uM(){return ex()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="firebaseLocalStorageDb",hM=1,id="firebaseLocalStorage",nx="fbase_key";class Gc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Dd(a,e){return a.transaction([id],e?"readwrite":"readonly").objectStore(id)}function dM(){const a=indexedDB.deleteDatabase(tx);return new Gc(a).toPromise()}function Lp(){const a=indexedDB.open(tx,hM);return new Promise((e,t)=>{a.addEventListener("error",()=>{t(a.error)}),a.addEventListener("upgradeneeded",()=>{const r=a.result;try{r.createObjectStore(id,{keyPath:nx})}catch(s){t(s)}}),a.addEventListener("success",async()=>{const r=a.result;r.objectStoreNames.contains(id)?e(r):(r.close(),await dM(),e(await Lp()))})})}async function hb(a,e,t){const r=Dd(a,!0).put({[nx]:e,value:t});return new Gc(r).toPromise()}async function fM(a,e){const t=Dd(a,!1).get(e),r=await new Gc(t).toPromise();return r===void 0?null:r.value}function db(a,e){const t=Dd(a,!0).delete(e);return new Gc(t).toPromise()}const mM=800,pM=3;class rx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>pM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ex()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nd._getInstance(uM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await lM(),!this.activeServiceWorker)return;this.sender=new sM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lp();return await hb(e,ad,"1"),await db(e,ad),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>hb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>fM(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>db(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=Dd(s,!1).getAll();return new Gc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rx.type="LOCAL";const gM=rx;new qc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(a,e){return e?Ea(e):(Ne(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends Xg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Io(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yM(a){return QS(a.auth,new ty(a),a.bypassAuthState)}function vM(a){const{auth:e,user:t}=a;return Ne(t,e,"internal-error"),$j(t,new ty(a),a.bypassAuthState)}async function _M(a){const{auth:e,user:t}=a;return Ne(t,e,"internal-error"),Gj(t,new ty(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t,r,s,l=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:l,error:u,type:m}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yM;case"linkViaPopup":case"linkViaRedirect":return _M;case"reauthViaPopup":case"reauthViaRedirect":return vM;default:ir(this.auth,"internal-error")}}resolve(e){Ia(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ia(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=new qc(2e3,1e4);async function sx(a,e,t){if(Mn(a.app))return Promise.reject(mr(a,"operation-not-supported-in-this-environment"));const r=Da(a);W2(a,e,Jg);const s=ax(r,t);return new us(r,"signInViaPopup",e,s).executeNotNull()}class us extends ix{constructor(e,t,r,s,l){super(e,t,s,l),this.provider=r,this.authWindow=null,this.pollId=null,us.currentPopupAction&&us.currentPopupAction.cancel(),us.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Ia(this.filter.length===1,"Popup operations only handle one event");const e=ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,us.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wM.get())};e()}}us.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="pendingRedirect",Uh=new Map;class EM extends ix{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Uh.get(this.auth._key());if(!e){try{const r=await TM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Uh.set(this.auth._key(),e)}return this.bypassAuthState||Uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TM(a,e){const t=CM(e),r=xM(a);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function SM(a,e){Uh.set(a._key(),e)}function xM(a){return Ea(a._redirectPersistence)}function CM(a){return Ph(bM,a.config.apiKey,a.name)}async function AM(a,e,t=!1){if(Mn(a.app))return Promise.reject(xa(a));const r=Da(a),s=ax(r,e),u=await new EM(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=10*60*1e3;class kM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ox(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(mr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RM&&this.cachedEventUids.clear(),this.cachedEventUids.has(fb(e))}saveEventToCache(e){this.cachedEventUids.add(fb(e)),this.lastProcessedEventTime=Date.now()}}function fb(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function ox({type:a,error:e}){return a==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IM(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ox(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(a,e={}){return Gr(a,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jM=/^https?/;async function MM(a){if(a.config.emulator)return;const{authorizedDomains:e}=await NM(a);for(const t of e)try{if(OM(t))return}catch{}ir(a,"unauthorized-domain")}function OM(a){const e=Up(),{protocol:t,hostname:r}=new URL(e);if(a.startsWith("chrome-extension://")){const u=new URL(a);return u.hostname===""&&r===""?t==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!jM.test(t))return!1;if(DM.test(a))return r===a;const s=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=new qc(3e4,6e4);function mb(){const a=Lr().___jsl;if(a!=null&&a.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let t=0;t<a.CP.length;t++)a.CP[t]=null}}function UM(a){return new Promise((e,t)=>{var r,s,l;function u(){mb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mb(),t(mr(a,"network-request-failed"))},timeout:PM.get()})}if(!((s=(r=Lr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((l=Lr().gapi)===null||l===void 0)&&l.load)u();else{const m=xj("iframefcb");return Lr()[m]=()=>{gapi.load?u():t(mr(a,"network-request-failed"))},HS(`${Sj()}?onload=${m}`).catch(p=>t(p))}}).catch(e=>{throw Vh=null,e})}let Vh=null;function VM(a){return Vh=Vh||UM(a),Vh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=new qc(5e3,15e3),BM="__/auth/iframe",zM="emulator/auth/iframe",qM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HM(a){const e=a.config;Ne(e.authDomain,a,"auth-domain-config-required");const t=e.emulator?Qg(e,zM):`https://${a.config.authDomain}/${BM}`,r={apiKey:e.apiKey,appName:a.name,v:Es},s=FM.get(a.config.apiHost);s&&(r.eid=s);const l=a._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Pc(r).slice(1)}`}async function GM(a){const e=await VM(a),t=Lr().gapi;return Ne(t,a,"internal-error"),e.open({where:document.body,url:HM(a),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qM,dontclear:!0},r=>new Promise(async(s,l)=>{await r.restyle({setHideOnLeave:!1});const u=mr(a,"network-request-failed"),m=Lr().setTimeout(()=>{l(u)},LM.get());function p(){Lr().clearTimeout(m),s(r)}r.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KM=500,QM=600,YM="_blank",WM="http://localhost";class pb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XM(a,e,t,r=KM,s=QM){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const p=Object.assign(Object.assign({},$M),{width:r.toString(),height:s.toString(),top:l,left:u}),y=bn().toLowerCase();t&&(m=US(y)?YM:t),OS(y)&&(e=e||WM,p.scrollbars="yes");const v=Object.entries(p).reduce((T,[A,k])=>`${T}${A}=${k},`,"");if(pj(y)&&m!=="_self")return ZM(e||"",m),new pb(null);const w=window.open(e||"",m,v);Ne(w,a,"popup-blocked");try{w.focus()}catch{}return new pb(w)}function ZM(a,e){const t=document.createElement("a");t.href=a,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM="__/auth/handler",eO="emulator/auth/handler",tO=encodeURIComponent("fac");async function gb(a,e,t,r,s,l){Ne(a.config.authDomain,a,"auth-domain-config-required"),Ne(a.config.apiKey,a,"invalid-api-key");const u={apiKey:a.config.apiKey,appName:a.name,authType:t,redirectUrl:r,v:Es,eventId:s};if(e instanceof Jg){e.setDefaultLanguage(a.languageCode),u.providerId=e.providerId||"",h1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof Hc){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}a.tenantId&&(u.tid=a.tenantId);const m=u;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const p=await a._getAppCheckToken(),y=p?`#${tO}=${encodeURIComponent(p)}`:"";return`${nO(a)}?${Pc(m).slice(1)}${y}`}function nO({config:a}){return a.emulator?Qg(a,eO):`https://${a.authDomain}/${JM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="webStorageSupport";class rO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JS,this._completeRedirectFn=AM,this._overrideRedirectResult=SM}async _openPopup(e,t,r,s){var l;Ia((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await gb(e,t,r,Up(),s);return XM(e,u,ey())}async _openRedirect(e,t,r,s){await this._originValidation(e);const l=await gb(e,t,r,Up(),s);return oM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(Ia(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await GM(e),r=new kM(e);return t.register("authEvent",s=>(Ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ap,{type:ap},s=>{var l;const u=(l=s==null?void 0:s[0])===null||l===void 0?void 0:l[ap];u!==void 0&&t(!!u),ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=MM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qS()||PS()||Wg()}}const aO=rO;var yb="@firebase/auth",vb="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oO(a){ms(new yi("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=r.options;Ne(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:u,authDomain:m,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FS(a)},y=new bj(r,s,l,p);return Nj(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ms(new yi("auth-internal",e=>{const t=Da(e.getProvider("auth").getImmediate());return(r=>new iO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pr(yb,vb,sO(a)),Pr(yb,vb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=5*60,cO=pE("authIdTokenMaxAge")||lO;let _b=null;const uO=a=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>cO)return;const s=t==null?void 0:t.token;_b!==s&&(_b=s,await fetch(a,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function hO(a=ag()){const e=ud(a,"auth");if(e.isInitialized())return e.getImmediate();const t=Ij(a,{popupRedirectResolver:aO,persistence:[gM,aM,JS]}),r=pE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const u=uO(l.toString());eM(t,u,()=>u(t.currentUser)),Jj(t,m=>u(m))}}const s=dE("auth");return s&&Dj(t,`http://${s}`),t}function dO(){var a,e;return(e=(a=document.getElementsByTagName("head"))===null||a===void 0?void 0:a[0])!==null&&e!==void 0?e:document}Ej({loadJS(a){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",a),r.onload=e,r.onerror=s=>{const l=mr("internal-error");l.customData=s,t(l)},r.type="text/javascript",r.charset="UTF-8",dO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oO("Browser");const fO={apiKey:"AIzaSyAMKxVJqQyhB726ZIpqzrnlJwlVMEompzI",authDomain:"chocolate-review-web.firebaseapp.com",projectId:"chocolate-review-web",storageBucket:"chocolate-review-web.firebasestorage.app",messagingSenderId:"40760554846",appId:"1:40760554846:web:af7701c50e3a44c13acbcf",measurementId:"G-CQXWMKJDQW"},ny=_E(fO),ut=vD(ny),lx=H2(ny),Qo=hO(ny),mO=new wa,pO=new _a,ry=Xt(ut,"chocolates");Xt(ut,"makers");Xt(ut,"reviews");const gO=Xt(ut,"tags"),ay=async()=>(await ar(ry)).docs.map(e=>({id:e.id,...e.data()})),yO=async a=>{try{const e=await ar(gO),t={};e.docs.forEach(u=>{const m=u.data();t[u.id]=m.name.toLowerCase()});const s=(await ar(ry)).docs.map(u=>({id:u.id,...u.data()})),l=a.toLowerCase();return s.filter(u=>{const m=u.name&&u.name.toLowerCase().includes(l),p=u.maker&&(typeof u.maker=="string"?u.maker.toLowerCase().includes(l):u.maker.name&&u.maker.name.toLowerCase().includes(l)),y=u.origin&&u.origin.toLowerCase().includes(l),v=u.type&&u.type.toLowerCase().includes(l);let w=!1;return u.tagIds&&Array.isArray(u.tagIds)&&(w=u.tagIds.some(T=>t[T]&&t[T].includes(l))),m||p||y||v||w})}catch(e){throw console.error("Error searching chocolates:",e),e}},vO=async(a,e)=>{let t=null;if(e){const s=AS(lx,`chocolate-images/${Date.now()}_${e.name}`);await xS(s,e),t=await CS(s)}return{id:(await hs(ry,{...a,imageUrl:t,createdAt:new Date,updatedAt:new Date,averageRating:0,reviewCount:0})).id,...a,imageUrl:t}},_O=async(a,e)=>{try{const t=AS(lx,`chocolate-images/${a}_${Date.now()}`);await xS(t,e);const r=await CS(t),s=yr(ut,"chocolates",a);return await oS(s,{imageUrl:r,updatedAt:new Date}),r}catch(t){throw console.error("Error updating chocolate image:",t),t}};function Bp({rating:a,size:e="small",interactive:t=!1,onRatingChange:r}){const s=[],l=u=>{t&&r&&r(u)};for(let u=1;u<=5;u++){let m="star";u<=Math.floor(a)?m+=" filled":u-.5<=a&&(m+=" half-filled"),e==="large"&&(m+=" star-large"),t&&(m+=" interactive"),s.push(d.jsx("span",{className:m,onClick:()=>l(u),children:""},u))}return d.jsx("div",{className:"rating-stars",children:s})}function wO({review:a}){const e=a.createdAt?typeof a.createdAt.toDate=="function"?a.createdAt.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):new Date(a.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return d.jsxs("div",{className:"review-item",children:[d.jsxs("div",{className:"review-header",children:[d.jsx("span",{className:"username",children:a.user||"Anonymous User"}),d.jsx("div",{className:"review-rating-stars",children:d.jsx(Bp,{rating:a.rating})}),e&&d.jsx("span",{className:"review-date",children:e})]}),d.jsx("p",{className:"review-text",children:a.text})]})}function bO(){const{id:a}=$A(),[e,t]=G.useState(null),[r,s]=G.useState([]),[l,u]=G.useState([]),[m,p]=G.useState(!0),[y,v]=G.useState(null),[w,T]=G.useState(0),[A,k]=G.useState("");G.useEffect(()=>{(async()=>{try{p(!0);const ne=yr(ut,"chocolates",a),oe=await Si(ne);if(!oe.exists()){v("Chocolate not found"),p(!1);return}const de={id:oe.id,...oe.data()};if(t(de),de.tagIds&&de.tagIds.length>0){const U=[];for(const F of de.tagIds)try{const $=await Si(yr(ut,"tags",F));$.exists()&&U.push($.data().name)}catch($){console.error("Error fetching tag:",$)}u(U)}const O=eS(Xt(ut,"reviews"),tS("chocolateId","==",a),nS("createdAt","desc")),j=(await ar(O)).docs.map(U=>({id:U.id,...U.data()}));s(j),p(!1)}catch(ne){console.error("Error fetching chocolate details:",ne),v(ne.message),p(!1)}})()},[a]);const C=L=>{T(L)},x=async L=>{if(L.preventDefault(),!currentUser){alert("Please sign in to leave a review");return}if(w===0){alert("Please select a rating");return}alert("Review submission will be implemented in the next phase!")};if(m)return d.jsxs("div",{className:"loading-container",children:[d.jsxs("div",{className:"loading-animation",children:[d.jsx("span",{}),d.jsx("span",{}),d.jsx("span",{})]}),d.jsx("p",{children:"Loading chocolate details..."})]});if(y||!e)return d.jsxs("div",{className:"error",children:["Error: ",y||"Chocolate not found"]});const I=e.flavorProfile||[{name:"Sweet",intensity:3},{name:"Bitter",intensity:3},{name:"Fruity",intensity:0},{name:"Nutty",intensity:0},{name:"Earthy",intensity:0}],z=Array.isArray(e.ingredients)?e.ingredients:typeof e.ingredients=="string"?e.ingredients.split(",").map(L=>L.trim()):[];return d.jsxs("div",{className:"chocolate-detail-page",children:[d.jsx("div",{className:"detail-header",children:d.jsx("div",{className:"container",children:d.jsxs("div",{className:"detail-header-content",children:[d.jsxs("div",{className:"detail-image",children:[d.jsx("img",{src:e.imageUrl||"https://placehold.co/300x300?text=Chocolate",alt:e.name,className:"chocolate-label-image"}),d.jsx("div",{className:"image-caption",children:"Product Label"})]}),d.jsxs("div",{className:"detail-info",children:[d.jsx("h1",{children:e.name}),d.jsx("p",{className:"maker",children:e.maker}),d.jsxs("div",{className:"rating-section",children:[d.jsxs("div",{className:"average-rating",children:[d.jsx("span",{className:"rating-number",children:(e.averageRating||0).toFixed(1)}),d.jsx(Bp,{rating:e.averageRating||0,size:"large"}),d.jsxs("span",{className:"rating-count",children:["(",e.ratings||0," ratings)"]})]}),d.jsxs("div",{className:"user-rating",children:[d.jsx("p",{children:"Your Rating:"}),d.jsx(Bp,{rating:w,size:"large",interactive:!0,onRatingChange:C})]})]}),d.jsxs("div",{className:"chocolate-meta",children:[d.jsxs("div",{className:"meta-item",children:[d.jsx("span",{className:"meta-label",children:"Origin"}),d.jsx("span",{className:"meta-value",children:e.origin||"Various"})]}),d.jsxs("div",{className:"meta-item",children:[d.jsx("span",{className:"meta-label",children:"Cacao"}),d.jsxs("span",{className:"meta-value",children:[e.cacaoPercentage||0,"%"]})]}),d.jsxs("div",{className:"meta-item",children:[d.jsx("span",{className:"meta-label",children:"Type"}),d.jsx("span",{className:"meta-value",children:e.type||"N/A"})]})]}),l.length>0&&d.jsx("div",{className:"chocolate-tags",children:l.map(L=>d.jsx("span",{className:"tag",children:L},L))})]})]})})}),d.jsxs("div",{className:"container",children:[d.jsxs("section",{className:"description-section",children:[d.jsx("h2",{children:"Description"}),d.jsx("p",{children:e.description||"No description available."})]}),d.jsxs("section",{className:"flavor-section",children:[d.jsx("h2",{children:"Flavor Profile"}),d.jsx("div",{className:"flavor-list",children:I.map(L=>d.jsxs("div",{className:"flavor-item",children:[d.jsx("span",{className:"flavor-name",children:L.name}),d.jsx("div",{className:"flavor-bar",children:d.jsx("div",{className:"flavor-level",style:{width:`${(L.intensity||0)*20}%`}})})]},L.name))})]}),d.jsxs("section",{className:"ingredients-section",children:[d.jsx("h2",{children:"Ingredients"}),z.length>0?d.jsx("ul",{className:"ingredients-list",children:z.map((L,ne)=>d.jsx("li",{children:L},ne))}):d.jsx("p",{children:"Ingredients information not available."})]}),e.nutritionalInfo&&d.jsxs("section",{className:"nutrition-section",children:[d.jsx("h2",{children:"Nutritional Information"}),d.jsx("div",{className:"nutrition-info",children:Object.entries(e.nutritionalInfo).map(([L,ne])=>d.jsxs("div",{className:"nutrition-item",children:[d.jsx("span",{className:"nutrition-label",children:L.charAt(0).toUpperCase()+L.slice(1).replace(/([A-Z])/g," $1")}),d.jsx("span",{className:"nutrition-value",children:typeof ne=="number"?ne+(L.includes("calories")?"":"g"):ne})]},L))})]}),d.jsxs("section",{className:"reviews-section",children:[d.jsx("h2",{children:"Reviews"}),r.length>0?d.jsx("div",{className:"reviews-list",children:r.map(L=>d.jsx(wO,{review:L},L.id))}):d.jsx("p",{className:"no-reviews",children:"No reviews yet. Be the first to review this chocolate!"}),d.jsxs("div",{className:"add-review",children:[d.jsx("h3",{children:"Add Your Review"}),d.jsxs("form",{onSubmit:x,children:[d.jsx("textarea",{placeholder:"Share your thoughts on this chocolate...",value:A,onChange:L=>k(L.target.value),required:!0}),d.jsx("button",{type:"submit",className:"submit-review",children:"Submit Review"})]})]})]})]})]})}function cx({chocolate:a,featured:e=!1}){const t=r=>{const s=[],l=Math.floor(r),u=r%1!==0;for(let m=1;m<=5;m++)m<=l?s.push(d.jsx("span",{className:"star full",children:""},m)):m===l+1&&u?s.push(d.jsx("span",{className:"star half",children:""},m)):s.push(d.jsx("span",{className:"star empty",children:""},m));return s};return d.jsxs(Le,{to:`/chocolate/${a.id}`,className:`chocolate-card ${e?"featured":""}`,children:[d.jsxs("div",{className:"image-container",children:[d.jsx("img",{src:a.imageUrl,alt:a.name}),e&&d.jsx("div",{className:"featured-badge",children:d.jsx("span",{children:"Featured"})})]}),d.jsxs("div",{className:"card-content",children:[d.jsx("h3",{className:"card-title",children:a.name}),d.jsx("p",{className:"card-maker",children:a.maker}),d.jsxs("div",{className:"card-details",children:[d.jsx("span",{className:"origin",children:a.origin}),d.jsxs("span",{className:"percentage",children:[a.cacaoPercentage,"% Cacao"]})]}),d.jsxs("div",{className:"card-rating",children:[d.jsx("span",{className:"rating-value",children:a.averageRating.toFixed(1)}),d.jsx("div",{className:"stars",children:t(a.averageRating)}),d.jsxs("span",{className:"rating-count",children:["(",a.ratings,")"]})]})]})]})}function EO(){const[a]=UR(),e=a.get("query")||"",[t,r]=G.useState([]),[s,l]=G.useState(!0),[u,m]=G.useState(null),[p,y]=G.useState("relevance"),[v,w]=G.useState("all");G.useEffect(()=>{(async()=>{if(!e.trim()){r([]),l(!1);return}try{l(!0);const I=await yO(e);r(I),l(!1)}catch(I){console.error("Search error:",I),m(I.message),l(!1)}})()},[e]);const A=[...t.filter(x=>v==="all"?!0:x.type&&x.type.toLowerCase()===v.toLowerCase())].sort((x,I)=>{switch(p){case"rating":return(I.averageRating||0)-(x.averageRating||0);case"cacao-high":return(I.cacaoPercentage||0)-(x.cacaoPercentage||0);case"cacao-low":return(x.cacaoPercentage||0)-(I.cacaoPercentage||0);case"name":return(x.name||"").localeCompare(I.name||"");default:return 0}}),k=x=>{y(x.target.value)},C=x=>{w(x.target.value)};return s?d.jsx("div",{className:"loading",children:"Searching..."}):u?d.jsxs("div",{className:"error",children:["Error: ",u]}):d.jsx("div",{className:"search-results-page",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"search-header",children:[d.jsx("h1",{children:"Search Results"}),e&&d.jsxs("p",{className:"search-query",children:['Showing results for "',e,'"']})]}),t.length>0?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"search-filters",children:[d.jsxs("div",{className:"filter-group",children:[d.jsx("label",{htmlFor:"type-filter",children:"Filter by:"}),d.jsxs("select",{id:"type-filter",value:v,onChange:C,children:[d.jsx("option",{value:"all",children:"All Types"}),d.jsx("option",{value:"dark",children:"Dark Chocolate"}),d.jsx("option",{value:"milk",children:"Milk Chocolate"}),d.jsx("option",{value:"white",children:"White Chocolate"}),d.jsx("option",{value:"ruby",children:"Ruby Chocolate"})]})]}),d.jsxs("div",{className:"filter-group",children:[d.jsx("label",{htmlFor:"sort-by",children:"Sort by:"}),d.jsxs("select",{id:"sort-by",value:p,onChange:k,children:[d.jsx("option",{value:"relevance",children:"Relevance"}),d.jsx("option",{value:"rating",children:"Highest Rating"}),d.jsx("option",{value:"cacao-high",children:"Cacao % (High to Low)"}),d.jsx("option",{value:"cacao-low",children:"Cacao % (Low to High)"}),d.jsx("option",{value:"name",children:"Name (A-Z)"})]})]})]}),d.jsxs("p",{className:"results-count",children:[A.length," chocolate",A.length!==1?"s":""," found"]}),d.jsx("div",{className:"results-grid",children:A.map(x=>d.jsx(cx,{chocolate:x},x.id))})]}):d.jsxs("div",{className:"no-results",children:[d.jsx("p",{children:"No chocolates found matching your search."}),d.jsxs("p",{children:["Try different keywords or ",d.jsx(Le,{to:"/",children:"browse all chocolates"}),"."]})]})]})})}const TO=async(a,e,t)=>{try{const r=await Yj(Qo,a,e);return await Zj(r.user,{displayName:t}),await iy(r.user,{displayName:t}),r.user}catch(r){throw r}},SO=async(a,e)=>{try{return(await Wj(Qo,a,e)).user}catch(t){throw t}},ux=async()=>{try{const a=await sx(Qo,mO);return(await Si(yr(ut,"users",a.user.uid))).exists()||await iy(a.user),a.user}catch(a){throw a}},hx=async()=>{try{const a=await sx(Qo,pO);return(await Si(yr(ut,"users",a.user.uid))).exists()||await iy(a.user),a.user}catch(a){throw a}},iy=async(a,e={})=>{if(!a)return;const t=yr(ut,"users",a.uid);if(!(await Si(t)).exists()){const{displayName:s,email:l,photoURL:u}=a;try{await DD(t,{displayName:s||e.displayName||"",email:l,photoURL:u||"",createdAt:MD(),reviewCount:0,tastingCount:0,favorites:[],badges:["Newcomer"],preferences:{favoriteTypes:[],dietaryRestrictions:[],flavorPreferences:[]},...e})}catch(m){throw console.error("Error creating user profile",m),m}}return dx(a.uid)},dx=async a=>{try{const e=await Si(yr(ut,"users",a));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw e}},xO=async a=>{try{return await Qj(Qo,a),!0}catch(e){throw e}},CO=a=>tM(Qo,a),fx=G.createContext();function AO(){return G.useContext(fx)}function RO({children:a}){const[e,t]=G.useState(null),[r,s]=G.useState(null),[l,u]=G.useState(!0);G.useEffect(()=>CO(async y=>{if(t(y),u(!0),y)try{const v=await dx(y.uid);s(v)}catch(v){console.error("Error loading user profile:",v)}else s(null);u(!1)}),[]);const m={currentUser:e,userProfile:r,loading:l};return d.jsx(fx.Provider,{value:m,children:!l&&a})}const kO=async a=>{try{const e=eS(Xt(ut,"reviews"),tS("userId","==",a),nS("createdAt","desc")),t=await ar(e);return t.empty?IO():t.docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting user reviews:",e),e}},IO=()=>[{id:"sample1",userId:"currentUser",chocolateId:"1",rating:4,text:"This dark chocolate has a wonderful depth of flavor with notes of cherry and a hint of vanilla. The texture is smooth with a clean snap. I particularly enjoyed the long finish that develops additional complexity over time.",createdAt:{toDate:()=>new Date(Date.now()-7*24*60*60*1e3)},chocolate:{id:"1",name:"Valrhona Guanaja 70%",maker:"Valrhona",imageUrl:"https://placehold.co/300x300?text=Chocolate"}},{id:"sample2",userId:"currentUser",chocolateId:"2",rating:5,text:"Absolutely perfect balance of creaminess and cocoa flavor! This milk chocolate has a silky texture that melts beautifully on the tongue. There are subtle caramel notes and a hint of malt that make it incredibly satisfying. Will definitely purchase again.",createdAt:{toDate:()=>new Date(Date.now()-14*24*60*60*1e3)},chocolate:{id:"2",name:"Lindt Excellence Milk Chocolate",maker:"Lindt & Sprngli",imageUrl:"https://placehold.co/300x300?text=Chocolate"}},{id:"sample3",userId:"currentUser",chocolateId:"3",rating:3,text:"An interesting single-origin bar with bright acidity and prominent fruity notes. While the quality is apparent, I found the texture slightly grainy and the finish a bit too acidic for my taste. Still worth trying for chocolate enthusiasts interested in exploring different flavor profiles.",createdAt:{toDate:()=>new Date(Date.now()-30*24*60*60*1e3)},chocolate:{id:"3",name:"Dandelion Madagascar",maker:"Dandelion Chocolate",imageUrl:"https://placehold.co/300x300?text=Chocolate"}}],NO=async a=>{try{const e=await Si(yr(ut,"users",a));if(!e.exists())return[];const t=e.data().favorites||[];if(t.length===0)return DO();const r=[];for(const s of t){const l=await Si(yr(ut,"chocolates",s));l.exists()&&r.push({id:l.id,...l.data()})}return r}catch(e){throw console.error("Error getting favorite chocolates:",e),e}},DO=()=>[{id:"1",name:"Valrhona Guanaja 70%",maker:"Valrhona",type:"Dark",origin:"Blend (South America and Caribbean)",cacaoPercentage:70,averageRating:4.5,ratings:356,imageUrl:"https://placehold.co/300x300?text=Chocolate"},{id:"5",name:"Sea Salt Caramel Crunch",maker:"Coastal Confections",type:"Dark Milk",origin:"Belgium",cacaoPercentage:55,averageRating:4.8,ratings:425,imageUrl:"https://placehold.co/300x300?text=Chocolate"},{id:"3",name:"Dandelion Madagascar",maker:"Dandelion Chocolate",type:"Dark",origin:"Madagascar",cacaoPercentage:70,averageRating:4.7,ratings:178,imageUrl:"https://placehold.co/300x300?text=Chocolate"}],jO=({name:a})=>({Newcomer:d.jsx("svg",{className:"badge-icon newcomer",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,17V16H9V14H13V13H10A1,1 0 0,1 9,12V9A1,1 0 0,1 10,8H11V7H13V8H15V10H11V11H14A1,1 0 0,1 15,12V15A1,1 0 0,1 14,16H13V17H11Z"})}),Reviewer:d.jsx("svg",{className:"badge-icon reviewer",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"})}),Enthusiast:d.jsx("svg",{className:"badge-icon enthusiast",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M16,5V11H21V5M10,11H15V5H10M16,18H21V12H16M10,18H15V12H10M4,18H9V12H4M4,11H9V5H4V11Z"})}),Connoisseur:d.jsx("svg",{className:"badge-icon connoisseur",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,10.84 21.79,9.69 21.39,8.61L19.79,10.21C19.93,10.8 20,11.4 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.6,4 13.2,4.07 13.79,4.21L15.4,2.6C14.31,2.21 13.16,2 12,2M19,2L15,6V7.5L12.45,10.05C12.3,10 12.15,10 12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12C14,11.85 14,11.7 13.95,11.55L16.5,9H18L22,5H19V2M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12H16A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8V6Z"})})})[a]||null;function MO(){var C,x,I,z,L,ne,oe,de,O,N,j,U,F,$,P,Tt,ht,ae,me,be,Be,B,he,H,D,K,Z,V,ve,te,Ae,Fe,ge,pe,xe,Oe,We;const{currentUser:a,userProfile:e}=AO(),[t,r]=G.useState("overview"),[s,l]=G.useState([]),[u,m]=G.useState([]),[p,y]=G.useState(!0),v=bs();G.useEffect(()=>{if(!a&&!p){v("/login");return}(async()=>{try{if(y(!0),a){const[Me,St]=await Promise.all([kO(a.uid),NO(a.uid)]);l(Me),m(St)}}catch(Me){console.error("Error loading user data:",Me)}finally{y(!1)}})()},[a,v,p]);const w=()=>{if(!e)return{};const ye=s.length,Me=s.length,St=ye>0?s.reduce((Gt,xt)=>Gt+xt.rating,0)/ye:0,Xe={};s.forEach(Gt=>{const xt=Gt.chocolate.type;Xe[xt]=(Xe[xt]||0)+1});let Te="None yet",nt=0;Object.entries(Xe).forEach(([Gt,xt])=>{xt>nt&&(nt=xt,Te=Gt)});const pn={};s.forEach(Gt=>{const xt=Gt.chocolate.maker;pn[xt]=(pn[xt]||0)+1});let En="None yet";return nt=0,Object.entries(pn).forEach(([Gt,xt])=>{xt>nt&&(nt=xt,En=Gt)}),{totalReviews:ye,totalTasted:Me,averageRating:St,favoriteType:Te,favoriteMaker:En}},T=()=>e?e.badges||["Newcomer"]:[],A=w(),k=T();return!a||!e?d.jsx("div",{className:"container",children:d.jsxs("div",{className:"profile-not-logged-in",children:[d.jsx("h2",{children:"You need to sign in"}),d.jsx("p",{children:"Please log in or create an account to view your profile."}),d.jsxs("div",{className:"auth-buttons",children:[d.jsx(Le,{to:"/login",className:"auth-button",children:"Log In"}),d.jsx(Le,{to:"/signup",className:"auth-button signup",children:"Sign Up"})]})]})}):d.jsx("div",{className:"profile-page",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"profile-header",children:[d.jsxs("div",{className:"profile-header-main",children:[d.jsx("div",{className:"profile-avatar",children:e.photoURL?d.jsx("img",{src:e.photoURL,alt:e.displayName}):d.jsx("div",{className:"avatar-placeholder",children:e.displayName.charAt(0)})}),d.jsxs("div",{className:"profile-info",children:[d.jsx("h1",{children:e.displayName}),d.jsxs("p",{className:"member-since",children:["Member since ",((C=e.createdAt)==null?void 0:C.toDate().toLocaleDateString())||"Recently"]}),d.jsx("div",{className:"profile-badges",children:k.map(ye=>d.jsxs("div",{className:"badge",children:[d.jsx(jO,{name:ye}),d.jsx("span",{children:ye})]},ye))})]})]}),d.jsx("div",{className:"profile-actions",children:d.jsx("button",{className:"edit-profile-button",children:"Edit Profile"})})]}),d.jsxs("div",{className:"profile-nav",children:[d.jsx("button",{className:`profile-nav-link ${t==="overview"?"active":""}`,onClick:()=>r("overview"),children:"Overview"}),d.jsxs("button",{className:`profile-nav-link ${t==="reviews"?"active":""}`,onClick:()=>r("reviews"),children:["Reviews (",s.length,")"]}),d.jsxs("button",{className:`profile-nav-link ${t==="favorites"?"active":""}`,onClick:()=>r("favorites"),children:["Favorites (",u.length,")"]}),d.jsx("button",{className:`profile-nav-link ${t==="preferences"?"active":""}`,onClick:()=>r("preferences"),children:"Preferences"})]}),d.jsxs("div",{className:"profile-content",children:[t==="overview"&&d.jsxs("div",{className:"overview-tab",children:[d.jsxs("div",{className:"stats-section",children:[d.jsx("h2",{children:"Your Chocolate Journey"}),d.jsxs("div",{className:"stats-grid",children:[d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:A.totalTasted}),d.jsx("div",{className:"stat-label",children:"Chocolates Tasted"})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:A.totalReviews}),d.jsx("div",{className:"stat-label",children:"Reviews Written"})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:A.averageRating.toFixed(1)}),d.jsx("div",{className:"stat-label",children:"Average Rating"})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:u.length}),d.jsx("div",{className:"stat-label",children:"Favorites"})]})]})]}),d.jsxs("div",{className:"profile-sections",children:[d.jsxs("div",{className:"profile-section",children:[d.jsx("div",{className:"section-header",children:d.jsx("h3",{children:"Your Taste Profile"})}),d.jsxs("div",{className:"taste-profile",children:[d.jsxs("div",{className:"taste-item",children:[d.jsx("span",{className:"taste-label",children:"Favorite Chocolate Type:"}),d.jsx("span",{className:"taste-value",children:A.favoriteType})]}),d.jsxs("div",{className:"taste-item",children:[d.jsx("span",{className:"taste-label",children:"Favorite Maker:"}),d.jsx("span",{className:"taste-value",children:A.favoriteMaker})]}),d.jsxs("div",{className:"taste-item",children:[d.jsx("span",{className:"taste-label",children:"Top Flavor Notes:"}),d.jsx("span",{className:"taste-value",children:((I=(x=e.preferences)==null?void 0:x.flavorPreferences)==null?void 0:I.length)>0?e.preferences.flavorPreferences.join(", "):"Not specified yet"})]})]})]}),d.jsxs("div",{className:"profile-section",children:[d.jsx("div",{className:"section-header",children:d.jsx("h3",{children:"Recent Activity"})}),s.length>0?d.jsxs("div",{className:"recent-reviews",children:[s.slice(0,3).map(ye=>d.jsxs("div",{className:"recent-review",children:[d.jsxs(Le,{to:`/chocolate/${ye.chocolate.id}`,className:"review-chocolate",children:[d.jsx("img",{src:ye.chocolate.imageUrl,alt:ye.chocolate.name}),d.jsxs("div",{className:"review-chocolate-info",children:[d.jsx("h4",{children:ye.chocolate.name}),d.jsx("p",{children:ye.chocolate.maker})]})]}),d.jsxs("div",{className:"review-content",children:[d.jsxs("div",{className:"review-rating",children:[[1,2,3,4,5].map(Me=>d.jsx("span",{className:`star ${Me<=ye.rating?"filled":""}`,children:""},Me)),d.jsx("span",{className:"review-date",children:new Date(ye.createdAt.toDate()).toLocaleDateString()})]}),d.jsxs("p",{className:"review-text",children:[ye.text.substring(0,120),"..."]})]})]},ye.id)),d.jsx(Le,{to:"#",onClick:()=>r("reviews"),className:"see-all-link",children:"See all reviews"})]}):d.jsxs("div",{className:"empty-state",children:[d.jsx("p",{children:"You haven't written any reviews yet."}),d.jsx(Le,{to:"/",className:"action-button",children:"Discover Chocolates to Review"})]})]})]}),d.jsxs("div",{className:"recommendations-section",children:[d.jsx("div",{className:"section-header",children:d.jsx("h3",{children:"Recommended For You"})}),d.jsx("div",{className:"recommendation-message",children:d.jsx("p",{children:"Keep reviewing chocolates to get personalized recommendations based on your taste preferences!"})})]})]}),t==="reviews"&&d.jsxs("div",{className:"reviews-tab",children:[d.jsx("div",{className:"section-header",children:d.jsx("h2",{children:"Your Reviews"})}),s.length>0?d.jsx("div",{className:"reviews-list",children:s.map(ye=>d.jsxs("div",{className:"review-card",children:[d.jsxs("div",{className:"review-card-header",children:[d.jsxs(Le,{to:`/chocolate/${ye.chocolate.id}`,className:"review-chocolate",children:[d.jsx("img",{src:ye.chocolate.imageUrl,alt:ye.chocolate.name}),d.jsxs("div",{className:"review-chocolate-info",children:[d.jsx("h3",{children:ye.chocolate.name}),d.jsx("p",{children:ye.chocolate.maker})]})]}),d.jsxs("div",{className:"review-meta",children:[d.jsx("div",{className:"review-rating-large",children:[1,2,3,4,5].map(Me=>d.jsx("span",{className:`star ${Me<=ye.rating?"filled":""}`,children:""},Me))}),d.jsx("div",{className:"review-date",children:new Date(ye.createdAt.toDate()).toLocaleDateString()})]})]}),d.jsx("div",{className:"review-card-body",children:d.jsx("p",{className:"review-text",children:ye.text})}),d.jsxs("div",{className:"review-card-actions",children:[d.jsx("button",{className:"edit-review",children:"Edit"}),d.jsx("button",{className:"delete-review",children:"Delete"})]})]},ye.id))}):d.jsxs("div",{className:"empty-state",children:[d.jsx("p",{children:"You haven't written any reviews yet."}),d.jsx(Le,{to:"/",className:"action-button",children:"Discover Chocolates to Review"})]})]}),t==="favorites"&&d.jsxs("div",{className:"favorites-tab",children:[d.jsx("div",{className:"section-header",children:d.jsx("h2",{children:"Your Favorite Chocolates"})}),u.length>0?d.jsx("div",{className:"favorites-grid",children:u.map(ye=>d.jsxs("div",{className:"favorite-card",children:[d.jsxs(Le,{to:`/chocolate/${ye.id}`,className:"favorite-link",children:[d.jsx("div",{className:"favorite-image",children:d.jsx("img",{src:ye.imageUrl,alt:ye.name})}),d.jsxs("div",{className:"favorite-info",children:[d.jsx("h3",{children:ye.name}),d.jsx("p",{children:ye.maker}),d.jsxs("div",{className:"favorite-details",children:[d.jsx("span",{children:ye.type}),d.jsxs("span",{children:[ye.cacaoPercentage,"% Cacao"]})]}),d.jsxs("div",{className:"favorite-rating",children:[[1,2,3,4,5].map(Me=>d.jsx("span",{className:`star ${Me<=ye.averageRating?"filled":""}`,children:""},Me)),d.jsxs("span",{className:"rating-count",children:["(",ye.ratings,")"]})]})]})]}),d.jsx("button",{className:"remove-favorite",children:"Remove"})]},ye.id))}):d.jsxs("div",{className:"empty-state",children:[d.jsx("p",{children:"You haven't added any favorites yet."}),d.jsx(Le,{to:"/",className:"action-button",children:"Find Chocolates to Love"})]})]}),t==="preferences"&&d.jsxs("div",{className:"preferences-tab",children:[d.jsx("div",{className:"section-header",children:d.jsx("h2",{children:"Taste Preferences"})}),d.jsxs("form",{className:"preferences-form",children:[d.jsxs("div",{className:"preference-section",children:[d.jsx("h3",{children:"Chocolate Types You Enjoy"}),d.jsxs("div",{className:"checkbox-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(L=(z=e.preferences)==null?void 0:z.favoriteTypes)==null?void 0:L.includes("Dark"),onChange:()=>{}}),"Dark Chocolate"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(oe=(ne=e.preferences)==null?void 0:ne.favoriteTypes)==null?void 0:oe.includes("Milk"),onChange:()=>{}}),"Milk Chocolate"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(O=(de=e.preferences)==null?void 0:de.favoriteTypes)==null?void 0:O.includes("White"),onChange:()=>{}}),"White Chocolate"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(j=(N=e.preferences)==null?void 0:N.favoriteTypes)==null?void 0:j.includes("Single Origin"),onChange:()=>{}}),"Single Origin"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(F=(U=e.preferences)==null?void 0:U.favoriteTypes)==null?void 0:F.includes("Flavored"),onChange:()=>{}}),"Flavored/Infused"]})]})]}),d.jsxs("div",{className:"preference-section",children:[d.jsx("h3",{children:"Flavor Notes You Prefer"}),d.jsxs("div",{className:"checkbox-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(P=($=e.preferences)==null?void 0:$.flavorPreferences)==null?void 0:P.includes("Fruity"),onChange:()=>{}}),"Fruity"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(ht=(Tt=e.preferences)==null?void 0:Tt.flavorPreferences)==null?void 0:ht.includes("Nutty"),onChange:()=>{}}),"Nutty"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(me=(ae=e.preferences)==null?void 0:ae.flavorPreferences)==null?void 0:me.includes("Floral"),onChange:()=>{}}),"Floral"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(Be=(be=e.preferences)==null?void 0:be.flavorPreferences)==null?void 0:Be.includes("Spicy"),onChange:()=>{}}),"Spicy"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(he=(B=e.preferences)==null?void 0:B.flavorPreferences)==null?void 0:he.includes("Earthy"),onChange:()=>{}}),"Earthy"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(D=(H=e.preferences)==null?void 0:H.flavorPreferences)==null?void 0:D.includes("Caramel"),onChange:()=>{}}),"Caramel"]})]})]}),d.jsxs("div",{className:"preference-section",children:[d.jsx("h3",{children:"Dietary Preferences"}),d.jsxs("div",{className:"checkbox-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(Z=(K=e.preferences)==null?void 0:K.dietaryRestrictions)==null?void 0:Z.includes("Dairy-Free"),onChange:()=>{}}),"Dairy-Free"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(ve=(V=e.preferences)==null?void 0:V.dietaryRestrictions)==null?void 0:ve.includes("Vegan"),onChange:()=>{}}),"Vegan"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(Ae=(te=e.preferences)==null?void 0:te.dietaryRestrictions)==null?void 0:Ae.includes("Gluten-Free"),onChange:()=>{}}),"Gluten-Free"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(ge=(Fe=e.preferences)==null?void 0:Fe.dietaryRestrictions)==null?void 0:ge.includes("Nut-Free"),onChange:()=>{}}),"Nut-Free"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(xe=(pe=e.preferences)==null?void 0:pe.dietaryRestrictions)==null?void 0:xe.includes("Sugar-Free"),onChange:()=>{}}),"Sugar-Free"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(We=(Oe=e.preferences)==null?void 0:Oe.dietaryRestrictions)==null?void 0:We.includes("Fair Trade"),onChange:()=>{}}),"Fair Trade"]})]})]}),d.jsx("button",{type:"submit",className:"save-preferences",children:"Save Preferences"})]})]})]})]})})}function OO(){const[a,e]=G.useState([]),[t,r]=G.useState(!0),[s,l]=G.useState(null);return G.useEffect(()=>{(async()=>{try{r(!0);const m=await ay();e(m),r(!1)}catch(m){l(m.message),r(!1)}})()},[]),t?d.jsx("div",{className:"loading full-width",children:"Loading chocolates..."}):s?d.jsxs("div",{className:"error full-width",children:["Error: ",s]}):d.jsx("div",{className:"browse-page full-page",children:d.jsxs("div",{className:"container",children:[d.jsx("h1",{children:"All Chocolates"}),d.jsxs("p",{className:"browse-description",children:["Browse our complete collection of ",a.length," chocolates."]}),d.jsx("div",{className:"chocolate-grid",children:a.map(u=>d.jsx(cx,{chocolate:u},u.id))})]})})}function PO(){const[a,e]=G.useState(!1),[t,r]=G.useState(""),[s,l]=G.useState(""),[u,m]=G.useState(!1),p=G.useRef(null),y=bs(),v=async T=>{if(T.preventDefault(),!!t)try{m(!0),l(""),y(`/search?query=${t}`)}catch{l("Could not find a chocolate with this barcode. Please try another.")}finally{m(!1)}},w=T=>{T.target.files[0]&&(m(!0),setTimeout(()=>{r("3017620422003"),m(!1)},1500))};return d.jsxs("div",{className:"barcode-scanner",children:[d.jsx("h2",{children:"Scan Chocolate Barcode"}),d.jsxs("div",{className:"scan-options",children:[d.jsxs("div",{className:"manual-entry",children:[d.jsx("h3",{children:"Enter Barcode Manually"}),d.jsxs("form",{onSubmit:v,children:[d.jsx("input",{type:"text",value:t,onChange:T=>r(T.target.value),placeholder:"Enter barcode number",required:!0}),d.jsx("button",{type:"submit",disabled:u||!t,children:u?"Searching...":"Find Chocolate"})]})]}),d.jsxs("div",{className:"scan-image",children:[d.jsx("h3",{children:"Scan Barcode Image"}),d.jsx("p",{children:"Upload an image of a barcode to scan"}),d.jsx("input",{type:"file",accept:"image/*",onChange:w,ref:p,style:{display:"none"}}),d.jsx("button",{onClick:()=>p.current.click(),disabled:u,children:u?"Processing...":"Upload Barcode Image"}),d.jsx("p",{className:"hint",children:"For a mobile app, we would use the device camera"})]})]}),s&&d.jsx("div",{className:"error-message",children:s})]})}function UO(){return d.jsx("div",{className:"barcode-search-page",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"page-header",children:[d.jsx("h1",{children:"Find Chocolates by Barcode"}),d.jsx("p",{className:"page-description",children:"Scan or enter a barcode to quickly find information about a chocolate product."})]}),d.jsx(PO,{}),d.jsxs("div",{className:"info-section",children:[d.jsx("h2",{children:"About Barcode Scanning"}),d.jsx("p",{children:"Our barcode scanning feature allows you to quickly look up chocolates by their barcode. We use the Open Food Facts database to find products that might not be in our system yet."}),d.jsx("p",{children:"In the future, our mobile app will allow you to scan barcodes directly with your phone's camera!"})]})]})})}function VO(){const[a,e]=G.useState(""),[t,r]=G.useState(""),[s,l]=G.useState(""),[u,m]=G.useState(""),[p,y]=G.useState(""),[v,w]=G.useState(!1),T=bs(),A=()=>(y(""),a.trim()?t.trim()?s.length<6?(y("Password must be at least 6 characters"),!1):s!==u?(y("Passwords do not match"),!1):!0:(y("Please enter your email"),!1):(y("Please enter your name"),!1)),k=async I=>{if(I.preventDefault(),!!A())try{w(!0),await TO(t,s,a),T("/profile")}catch(z){y(z.message)}finally{w(!1)}},C=async()=>{try{w(!0),await ux(),T("/profile")}catch(I){y(I.message)}finally{w(!1)}},x=async()=>{try{w(!0),await hx(),T("/profile")}catch(I){y(I.message)}finally{w(!1)}};return d.jsxs("div",{className:"auth-form-container",children:[d.jsx("h2",{children:"Join the Chocolate Community"}),d.jsx("p",{className:"auth-subtitle",children:"Sign up to review chocolates, track favorites, and get personalized recommendations."}),p&&d.jsx("div",{className:"auth-error",children:p}),d.jsxs("form",{onSubmit:k,className:"auth-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"displayName",children:"Name"}),d.jsx("input",{type:"text",id:"displayName",value:a,onChange:I=>e(I.target.value),required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",value:t,onChange:I=>r(I.target.value),required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"password",children:"Password"}),d.jsx("input",{type:"password",id:"password",value:s,onChange:I=>l(I.target.value),required:!0,minLength:"6"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),d.jsx("input",{type:"password",id:"confirmPassword",value:u,onChange:I=>m(I.target.value),required:!0})]}),d.jsx("button",{type:"submit",className:"auth-button",disabled:v,children:v?"Creating Account...":"Sign Up"})]}),d.jsx("div",{className:"auth-divider",children:d.jsx("span",{children:"or"})}),d.jsxs("div",{className:"social-buttons",children:[d.jsxs("button",{type:"button",className:"social-button google",onClick:C,disabled:v,children:[d.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12.545 10.239v3.821h5.445c-0.712 2.315-2.647 3.972-5.445 3.972-3.332 0-6.033-2.701-6.033-6.032s2.701-6.032 6.033-6.032c1.498 0 2.866 0.549 3.921 1.453l2.814-2.814c-1.79-1.677-4.184-2.702-6.735-2.702-5.522 0-10 4.478-10 10s4.478 10 10 10c8.396 0 10.201-7.835 9.412-11.566l-9.412-0.1z"})}),"Continue with Google"]}),d.jsxs("button",{type:"button",className:"social-button facebook",onClick:x,disabled:v,children:[d.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M13.397 20.997v-8.196h2.765l0.411-3.209h-3.176v-2.044c0-0.926 0.258-1.559 1.587-1.559h1.684v-2.861c-0.82-0.088-1.643-0.13-2.467-0.131-2.446 0-4.13 1.495-4.13 4.231v2.355h-2.777v3.209h2.777v8.202c2.379 0.253 4.268 0.13 3.326-0.003z"})}),"Continue with Facebook"]})]}),d.jsxs("p",{className:"auth-link",children:["Already have an account? ",d.jsx(Le,{to:"/login",children:"Log in"})]})]})}function LO(){const[a,e]=G.useState(""),[t,r]=G.useState(""),[s,l]=G.useState(""),[u,m]=G.useState(""),[p,y]=G.useState(!1),v=bs(),w=async C=>{C.preventDefault();try{y(!0),await SO(a,t),v("/profile")}catch{l("Invalid email or password")}finally{y(!1)}},T=async()=>{try{y(!0),await ux(),v("/profile")}catch(C){l(C.message)}finally{y(!1)}},A=async()=>{try{y(!0),await hx(),v("/profile")}catch(C){l(C.message)}finally{y(!1)}},k=async()=>{if(!a){l("Please enter your email address");return}try{await xO(a),m("Password reset email sent. Check your inbox."),l("")}catch{l("Error sending reset email. Please try again.")}};return d.jsxs("div",{className:"auth-form-container",children:[d.jsx("h2",{children:"Welcome Back"}),d.jsx("p",{className:"auth-subtitle",children:"Log in to continue your chocolate journey"}),s&&d.jsx("div",{className:"auth-error",children:s}),u&&d.jsx("div",{className:"auth-success",children:u}),d.jsxs("form",{onSubmit:w,className:"auth-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",value:a,onChange:C=>e(C.target.value),required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"password",children:"Password"}),d.jsx("input",{type:"password",id:"password",value:t,onChange:C=>r(C.target.value),required:!0})]}),d.jsx("div",{className:"forgot-password",children:d.jsx("button",{type:"button",onClick:k,className:"reset-button",children:"Forgot password?"})}),d.jsx("button",{type:"submit",className:"auth-button",disabled:p,children:p?"Logging in...":"Log In"})]}),d.jsx("div",{className:"auth-divider",children:d.jsx("span",{children:"or"})}),d.jsxs("div",{className:"social-buttons",children:[d.jsxs("button",{type:"button",className:"social-button google",onClick:T,disabled:p,children:[d.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12.545 10.239v3.821h5.445c-0.712 2.315-2.647 3.972-5.445 3.972-3.332 0-6.033-2.701-6.033-6.032s2.701-6.032 6.033-6.032c1.498 0 2.866 0.549 3.921 1.453l2.814-2.814c-1.79-1.677-4.184-2.702-6.735-2.702-5.522 0-10 4.478-10 10s4.478 10 10 10c8.396 0 10.201-7.835 9.412-11.566l-9.412-0.1z"})}),"Continue with Google"]}),d.jsxs("button",{type:"button",className:"social-button facebook",onClick:A,disabled:p,children:[d.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M13.397 20.997v-8.196h2.765l0.411-3.209h-3.176v-2.044c0-0.926 0.258-1.559 1.587-1.559h1.684v-2.861c-0.82-0.088-1.643-0.13-2.467-0.131-2.446 0-4.13 1.495-4.13 4.231v2.355h-2.777v3.209h2.777v8.202c2.379 0.253 4.268 0.13 3.326-0.003z"})}),"Continue with Facebook"]})]}),d.jsxs("p",{className:"auth-link",children:["Don't have an account? ",d.jsx(Le,{to:"/signup",children:"Sign up"})]})]})}function BO(){const[a,e]=G.useState(""),[t,r]=G.useState(!1),s=G.useRef(null),l=bs(),u=p=>{p.preventDefault(),a.trim()&&l(`/search?query=${encodeURIComponent(a)}`)},m=()=>{r(!t)};return G.useEffect(()=>{function p(y){s.current&&!s.current.contains(y.target)&&r(!1)}return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[s]),d.jsx("header",{className:"header",children:d.jsxs("div",{className:"container",children:[d.jsx(Le,{to:"/",className:"logo",children:d.jsx("h1",{children:"Chocly"})}),d.jsxs("form",{className:"search-form",onSubmit:u,children:[d.jsx("input",{type:"text",placeholder:"Search chocolates, makers...",value:a,onChange:p=>e(p.target.value)}),d.jsx("button",{type:"submit",children:"Search"})]}),d.jsxs("div",{className:"nav-container",ref:s,children:[d.jsxs("button",{className:"menu-toggle",onClick:m,children:["Menu",d.jsxs("span",{className:`menu-icon ${t?"open":""}`,children:[d.jsx("span",{}),d.jsx("span",{}),d.jsx("span",{})]})]}),d.jsxs("nav",{className:`nav ${t?"open":""}`,children:[d.jsxs("div",{className:"nav-section",children:[d.jsx("h3",{children:"Browse"}),d.jsx(Le,{to:"/",onClick:()=>r(!1),children:"Home"}),d.jsx(Le,{to:"/browse",onClick:()=>r(!1),children:"All Chocolates"}),d.jsx(Le,{to:"/barcode",onClick:()=>r(!1),children:"Barcode Search"}),d.jsx(Le,{to:"/category/dark",onClick:()=>r(!1),children:"Dark Chocolate"}),d.jsx(Le,{to:"/category/milk",onClick:()=>r(!1),children:"Milk Chocolate"}),d.jsx(Le,{to:"/category/white",onClick:()=>r(!1),children:"White Chocolate"})]}),d.jsxs("div",{className:"nav-section",children:[d.jsx("h3",{children:"Account"}),d.jsx(Le,{to:"/profile",onClick:()=>r(!1),children:"My Profile"}),d.jsx(Le,{to:"/favorites",onClick:()=>r(!1),children:"My Favorites"})]}),d.jsxs("div",{className:"nav-section",children:[d.jsx("h3",{children:"About"}),d.jsx(Le,{to:"/about",onClick:()=>r(!1),children:"About Us"}),d.jsx(Le,{to:"/contact",onClick:()=>r(!1),children:"Contact"})]})]})]})]})})}function zO(){const a=new Date().getFullYear();return d.jsx("footer",{className:"footer",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"footer-content",children:[d.jsxs("div",{className:"footer-logo",children:[d.jsx(Le,{to:"/",className:"logo-link",children:d.jsx("h2",{children:"Chocly"})}),d.jsx("p",{className:"tagline",children:"Discover better chocolate."})]}),d.jsxs("div",{className:"footer-links",children:[d.jsxs("div",{className:"footer-links-column",children:[d.jsx("h3",{children:"Explore"}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(Le,{to:"/browse",children:"All Chocolates"})}),d.jsx("li",{children:d.jsx(Le,{to:"/category/dark",children:"Dark Chocolate"})}),d.jsx("li",{children:d.jsx(Le,{to:"/category/milk",children:"Milk Chocolate"})}),d.jsx("li",{children:d.jsx(Le,{to:"/category/origin",children:"Single Origin"})})]})]}),d.jsxs("div",{className:"footer-links-column",children:[d.jsx("h3",{children:"Account"}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(Le,{to:"/signup",children:"Sign Up"})}),d.jsx("li",{children:d.jsx(Le,{to:"/login",children:"Log In"})}),d.jsx("li",{children:d.jsx(Le,{to:"/profile",children:"My Profile"})}),d.jsx("li",{children:d.jsx(Le,{to:"/favorites",children:"My Favorites"})})]})]}),d.jsxs("div",{className:"footer-links-column",children:[d.jsx("h3",{children:"Company"}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(Le,{to:"/about",children:"About Us"})}),d.jsx("li",{children:d.jsx(Le,{to:"/contact",children:"Contact"})}),d.jsx("li",{children:d.jsx(Le,{to:"/privacy-policy",children:"Privacy Policy"})}),d.jsx("li",{children:d.jsx(Le,{to:"/terms-of-service",children:"Terms of Service"})})]})]})]})]}),d.jsxs("div",{className:"footer-bottom",children:[d.jsxs("p",{className:"copyright",children:[" ",a," Chocly. All rights reserved."]}),d.jsxs("div",{className:"social-icons",children:[d.jsx("a",{href:"#",className:"social-icon instagram","aria-label":"Instagram",children:d.jsx("span",{className:"sr-only",children:"Instagram"})}),d.jsx("a",{href:"#",className:"social-icon twitter","aria-label":"Twitter",children:d.jsx("span",{className:"sr-only",children:"Twitter"})}),d.jsx("a",{href:"#",className:"social-icon facebook","aria-label":"Facebook",children:d.jsx("span",{className:"sr-only",children:"Facebook"})})]})]})]})})}function qO(){const[a,e]=G.useState([]),[t,r]=G.useState(!0),[s,l]=G.useState({});G.useEffect(()=>{(async()=>{try{const p=await ay();p.sort((y,v)=>y.name.localeCompare(v.name)),e(p)}catch(p){console.error("Error fetching chocolates:",p)}finally{r(!1)}})()},[]);const u=async(m,p)=>{l(y=>({...y,[m]:"uploading"}));try{await _O(m,p),l(y=>({...y,[m]:"success"})),e(y=>y.map(v=>v.id===m?{...v,imageUrl:URL.createObjectURL(p)}:v))}catch(y){console.error("Error uploading image:",y),l(v=>({...v,[m]:"error"}))}};return d.jsx("div",{className:"batch-upload-page",children:d.jsxs("div",{className:"container",children:[d.jsx("h1",{children:"Batch Image Upload"}),d.jsx("p",{className:"page-description",children:"Upload label images for multiple chocolates"}),t?d.jsx("div",{className:"loading",children:"Loading chocolates..."}):d.jsx("div",{className:"chocolates-grid",children:a.map(m=>d.jsxs("div",{className:"chocolate-upload-card",children:[d.jsxs("div",{className:"chocolate-info",children:[d.jsx("h3",{children:m.name}),d.jsx("p",{children:m.maker})]}),d.jsx("div",{className:"chocolate-image-container",children:m.imageUrl?d.jsx("img",{src:m.imageUrl,alt:m.name,className:"chocolate-image"}):d.jsx("div",{className:"no-image-placeholder",children:"No label image"})}),d.jsxs("div",{className:"upload-controls",children:[d.jsxs("label",{className:`upload-button ${s[m.id]==="uploading"?"disabled":""}`,children:[m.imageUrl?"Change Image":"Upload Image",d.jsx("input",{type:"file",accept:"image/*",disabled:s[m.id]==="uploading",style:{display:"none"},onChange:p=>{p.target.files&&p.target.files[0]&&u(m.id,p.target.files[0])}})]}),s[m.id]==="uploading"&&d.jsx("span",{className:"status-text uploading",children:"Uploading..."}),s[m.id]==="success"&&d.jsx("span",{className:"status-text success",children:" Uploaded"}),s[m.id]==="error"&&d.jsx("span",{className:"status-text error",children:"Error uploading"})]})]},m.id))})]})})}function FO({onImageSelected:a,currentImageUrl:e=null}){const[t,r]=G.useState(e),[s,l]=G.useState(!1),u=m=>{if(m.target.files&&m.target.files[0]){const p=m.target.files[0],y=new FileReader;y.onload=v=>{r(v.target.result)},y.readAsDataURL(p),a(p)}};return d.jsxs("div",{className:"image-uploader",children:[d.jsx("div",{className:"image-preview-container",children:t?d.jsx("img",{src:t,alt:"Preview",className:"image-preview"}):d.jsx("div",{className:"image-placeholder",children:d.jsx("span",{children:"No Image Selected"})})}),d.jsxs("div",{className:"upload-controls",children:[d.jsxs("label",{className:"upload-button",children:[e?"Change Image":"Upload Label Image",d.jsx("input",{type:"file",accept:"image/*",onChange:u,disabled:s,style:{display:"none"}})]}),s&&d.jsx("span",{className:"uploading-text",children:"Uploading..."})]})]})}const HO=async()=>{console.log("Starting to add initial chocolates...");const a=await ar(Xt(ut,"makers")),e=await ar(Xt(ut,"tags")),t={};a.forEach(u=>{t[u.data().name]=u.id});const r={};e.forEach(u=>{r[u.data().name]=u.id}),console.log("Loaded makers and tags");const s=[{name:"Valrhona Guanaja 70%",makerId:t.Valrhona,type:"Dark",origin:"Blend (South America and Caribbean)",cacaoPercentage:70,description:"A complex dark chocolate with intense bittersweet notes and hints of red fruits and coffee. Renowned among pastry chefs worldwide for its depth of flavor.",ingredients:"Cocoa beans, sugar, cocoa butter, soy lecithin, vanilla extract",tagIds:[r.Dark,r.Fruity,r.Earthy,r["Single Origin"]],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Lindt Excellence 85% Cocoa",makerId:t.Lindt,type:"Dark",origin:"Various African and South American regions",cacaoPercentage:85,description:"A robust dark chocolate with pronounced cocoa flavor, low sweetness, and subtle notes of dried fruit.",ingredients:"Chocolate, cocoa powder, cocoa butter, sugar, vanilla",tagIds:[r.Dark,r.Earthy,r.Woody],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Godiva Signature Dark Chocolate",makerId:t.Godiva,type:"Dark",origin:"Blend (West Africa)",cacaoPercentage:72,description:"A balanced dark chocolate with a smooth melt and refined flavor profile featuring subtle vanilla notes.",ingredients:"Cocoa mass, sugar, cocoa butter, soy lecithin, natural vanilla flavor",tagIds:[r.Dark,r.Vanilla],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Ghirardelli Intense Dark Midnight Reverie",makerId:t.Ghirardelli,type:"Dark",origin:"Blend (South America)",cacaoPercentage:86,description:"An intensely dark chocolate with a full-bodied taste that reveals deep cocoa notes with minimal sweetness.",ingredients:"Unsweetened chocolate, cocoa butter, sugar, milk fat, soy lecithin, vanilla",tagIds:[r.Dark,r.Bittersweet,r.Earthy],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Theo Pure 70% Dark Chocolate",makerId:t["Theo Chocolate"],type:"Dark",origin:"Congo and Peru",cacaoPercentage:70,description:"Ethically sourced organic chocolate with bright fruity notes, a clean finish, and medium intensity.",ingredients:"Cocoa beans, cane sugar, cocoa butter",tagIds:[r.Dark,r.Fruity,r.Organic,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Amedei Porcelana",makerId:t.Amedei,type:"Dark",origin:"Venezuela (Criollo beans)",cacaoPercentage:70,description:"One of the world's most exclusive chocolates, made from rare white Porcelana beans. Offers delicate floral notes with remarkable smoothness.",ingredients:"Cocoa mass, cane sugar, cocoa butter, vanilla",tagIds:[r.Dark,r.Floral,r["Single Origin"],r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Mast Brothers Brooklyn Blend",makerId:t["Mast Brothers"],type:"Dark",origin:"Blend (Dominican Republic, Madagascar, Venezuela)",cacaoPercentage:73,description:"Artisanal chocolate with a distinctive flavor profile featuring notes of dried cherries, tobacco, and leather.",ingredients:"Cacao, cane sugar",tagIds:[r.Dark,r.Fruity,r.Earthy,r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Dandelion Ambanja, Madagascar",makerId:t["Dandelion Chocolate"],type:"Dark",origin:"Madagascar",cacaoPercentage:70,description:"Single-origin chocolate with bright citrus and raspberry notes characteristic of Madagascar beans.",ingredients:"Cocoa beans, cane sugar",tagIds:[r.Dark,r.Fruity,r.Citrus,r.Berry,r["Single Origin"],r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Marou Tien Giang 70%",makerId:t.Marou,type:"Dark",origin:"Tien Giang, Vietnam",cacaoPercentage:70,description:"Made from beans grown in Vietnam's Mekong Delta, offering woody and spice notes with a uniquely Vietnamese character.",ingredients:"Cacao beans, cane sugar, cacao butter",tagIds:[r.Dark,r.Spicy,r.Woody,r["Single Origin"]],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Willie's Cacao Indonesian Black 100%",makerId:t["Willie's Cacao"],type:"Dark",origin:"Sumatran, Indonesia",cacaoPercentage:100,description:"An intense pure cacao experience with no added sugar. Features earthy, tobacco notes with a hint of spice.",ingredients:"Cacao",tagIds:[r.Dark,r.Earthy,r.Spicy,r["Single Origin"],r.Vegan],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Lindt Lindor Milk Chocolate Truffles",makerId:t.Lindt,type:"Milk",origin:"Blend",cacaoPercentage:30,description:"Smooth milk chocolate shell with an irresistibly creamy melting filling.",ingredients:"Sugar, vegetable fat, cocoa butter, milk ingredients, chocolate, soy lecithin, barley malt, artificial flavoring",tagIds:[r.Milk,r.Vanilla],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Valrhona Dulcey Blond Chocolate",makerId:t.Valrhona,type:"Milk",origin:"Blend",cacaoPercentage:32,description:"A distinctive 'blond' chocolate with a unique caramelized flavor profile featuring biscuit notes and a velvety texture.",ingredients:"Sugar, cocoa butter, whole milk powder, dried skimmed milk, whey, butter, soy lecithin, natural vanilla extract",tagIds:[r.Milk,r.Caramel,r.Vanilla],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Godiva White Chocolate Vanilla Bean",makerId:t.Godiva,type:"White",origin:"N/A",cacaoPercentage:0,description:"Luxurious white chocolate infused with real vanilla bean for a rich, creamy flavor profile.",ingredients:"Sugar, cocoa butter, milk powder, soy lecithin, vanilla extract, vanilla beans",tagIds:[r.White,r.Vanilla],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Ghirardelli Milk Chocolate Sea Salt Caramel Squares",makerId:t.Ghirardelli,type:"Milk",origin:"Blend",cacaoPercentage:32,description:"Smooth milk chocolate squares filled with a flowing caramel center and a touch of sea salt.",ingredients:"Sugar, corn syrup, milk chocolate, cocoa butter, milk, soy lecithin, vanilla, salt",tagIds:[r.Milk,r.Caramel],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Theo Salted Almond 70% Dark Chocolate",makerId:t["Theo Chocolate"],type:"Dark",origin:"Blend (Congo and Peru)",cacaoPercentage:70,description:"A crunchy dark chocolate bar with roasted almonds and a hint of sea salt, creating a perfect sweet-savory balance.",ingredients:"Cocoa beans, sugar, almonds, salt",tagIds:[r.Dark,r.Nutty,r.Organic,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0}],l=Xt(ut,"chocolates");for(const u of s)try{if(!u.makerId){console.error(`Missing maker ID for chocolate: ${u.name}`);continue}if(u.tagIds.some(y=>!y)){console.error(`Missing tag IDs for chocolate: ${u.name}`);continue}const p=Nt.now();await hs(l,{...u,createdAt:p,updatedAt:p}),console.log(`Added chocolate: ${u.name}`)}catch(m){console.error(`Error adding ${u.name}:`,m)}console.log("Finished adding initial chocolates")},GO=async()=>{console.log("Starting to add commercial chocolate brands...");const a=await ar(Xt(ut,"makers")),e=await ar(Xt(ut,"tags")),t={};a.forEach(w=>{t[w.data().name]=w.id});const r={};e.forEach(w=>{r[w.data().name]=w.id}),console.log("Loaded makers and tags");const s=[{name:"Hershey's",country:"United States",website:"https://www.hersheys.com"},{name:"Mars",country:"United States",website:"https://www.mars.com"},{name:"Ferrero",country:"Italy",website:"https://www.ferrero.com"},{name:"Nestl",country:"Switzerland",website:"https://www.nestle.com"},{name:"Cadbury",country:"United Kingdom",website:"https://www.cadbury.co.uk"},{name:"Chocolove",country:"United States",website:"https://www.chocolove.com"},{name:"Green & Black's",country:"United Kingdom",website:"https://www.greenandblacks.co.uk"},{name:"Endangered Species",country:"United States",website:"https://www.chocolatebar.com"},{name:"Divine",country:"United Kingdom",website:"https://www.divinechocolate.com"},{name:"Hu",country:"United States",website:"https://hukitchen.com"},{name:"Alter Eco",country:"United States",website:"https://www.alterecofoods.com"},{name:"Ritter Sport",country:"Germany",website:"https://www.ritter-sport.de/en"},{name:"Milka",country:"Switzerland",website:"https://www.milka.com"},{name:"Tony's Chocolonely",country:"Netherlands",website:"https://tonyschocolonely.com"},{name:"Dove",country:"United States",website:"https://www.dovechocolate.com"},{name:"Ghirardelli",country:"United States",website:"https://www.ghirardelli.com"},{name:"Taza",country:"United States",website:"https://www.tazachocolate.com"},{name:"Equal Exchange",country:"United States",website:"https://equalexchange.coop"},{name:"Toblerone",country:"Switzerland",website:"https://www.toblerone.com"},{name:"Guittard",country:"United States",website:"https://www.guittard.com"}],l=Xt(ut,"makers");for(const w of s){if(t[w.name]){console.log(`Maker "${w.name}" already exists, skipping`);continue}try{const T=await hs(l,w);console.log(`Added new maker: ${w.name} with ID: ${T.id}`),t[w.name]=T.id}catch(T){console.error(`Error adding maker ${w.name}:`,T)}}const u=[{name:"Hershey's Milk Chocolate Bar",makerId:t["Hershey's"],type:"Milk",origin:"Blend",cacaoPercentage:11,description:"The classic American milk chocolate bar with a sweet, slightly tangy flavor profile that's instantly recognizable.",ingredients:"Sugar, milk, chocolate, cocoa butter, lactose, milk fat, soy lecithin, PGPR, vanillin",tagIds:[r.Milk],imageUrl:"https://placehold.co/300x300?text=Hershey",averageRating:0,reviewCount:0},{name:"Hershey's Special Dark",makerId:t["Hershey's"],type:"Dark",origin:"Blend",cacaoPercentage:45,description:"A slightly darker chocolate offering from Hershey's with a more pronounced cocoa flavor than their milk chocolate.",ingredients:"Sugar, chocolate, cocoa butter, cocoa processed with alkali, milk fat, soy lecithin, vanillin, milk",tagIds:[r.Dark],imageUrl:"https://placehold.co/300x300?text=HersheyDark",averageRating:0,reviewCount:0},{name:"Cadbury Dairy Milk",makerId:t.Cadbury,type:"Milk",origin:"Blend",cacaoPercentage:26,description:"Smooth, creamy milk chocolate with a distinctive flavor profile and higher milk content than many competitors.",ingredients:"Milk, sugar, cocoa butter, cocoa mass, vegetable fats, emulsifiers, flavourings",tagIds:[r.Milk,r.Creamy],imageUrl:"https://placehold.co/300x300?text=Cadbury",averageRating:0,reviewCount:0},{name:"Mars Bar",makerId:t.Mars,type:"Milk",origin:"Blend",cacaoPercentage:25,description:"Nougat and caramel covered in milk chocolate, creating a sweet, chewy treat with multiple textures.",ingredients:"Sugar, glucose syrup, milk solids, cocoa butter, cocoa mass, vegetable fat, barley malt extract, emulsifier, salt, egg white, natural flavor",tagIds:[r.Milk,r.Caramel],imageUrl:"https://placehold.co/300x300?text=Mars",averageRating:0,reviewCount:0},{name:"Nestl Crunch",makerId:t.Nestl,type:"Milk",origin:"Blend",cacaoPercentage:22,description:"Milk chocolate with crisped rice, creating a distinctive crunchy texture and sweet flavor.",ingredients:"Sugar, chocolate, cocoa butter, milk, crisped rice, soy lecithin, vanillin",tagIds:[r.Milk],imageUrl:"https://placehold.co/300x300?text=Crunch",averageRating:0,reviewCount:0},{name:"Milka Alpine Milk Chocolate",makerId:t.Milka,type:"Milk",origin:"Blend (European)",cacaoPercentage:30,description:"Creamy European milk chocolate with a distinctive flavor from Alpine milk. Smoother and less sweet than American counterparts.",ingredients:"Sugar, cocoa butter, cocoa mass, whey powder, butterfat, emulsifier, hazelnut paste, flavoring",tagIds:[r.Milk,r.Creamy],imageUrl:"https://placehold.co/300x300?text=Milka",averageRating:0,reviewCount:0},{name:"Dove Milk Chocolate",makerId:t.Dove,type:"Milk",origin:"Blend",cacaoPercentage:33,description:"Silky, smooth milk chocolate with a melt-in-your-mouth texture and less sweetness than other mass market brands.",ingredients:"Sugar, cocoa butter, chocolate, skim milk, milk fat, soy lecithin, artificial flavors",tagIds:[r.Milk,r.Creamy],imageUrl:"https://placehold.co/300x300?text=Dove",averageRating:0,reviewCount:0},{name:"Toblerone Milk Chocolate",makerId:t.Toblerone,type:"Milk",origin:"Switzerland",cacaoPercentage:28,description:"Distinctive triangular sections of Swiss milk chocolate with honey and almond nougat pieces.",ingredients:"Sugar, whole milk powder, cocoa butter, cocoa mass, honey, almonds, emulsifier, egg white, vanilla",tagIds:[r.Milk,r.Nutty,r.Honey],imageUrl:"https://placehold.co/300x300?text=Toblerone",averageRating:0,reviewCount:0},{name:"Ritter Sport Milk Chocolate",makerId:t["Ritter Sport"],type:"Milk",origin:"Germany",cacaoPercentage:30,description:"Square-shaped German milk chocolate bar with a distinct snap and creamy flavor.",ingredients:"Sugar, cocoa butter, cocoa mass, whole milk powder, lactose, whey powder, butterfat, soy lecithin, natural vanilla",tagIds:[r.Milk],imageUrl:"https://placehold.co/300x300?text=RitterSport",averageRating:0,reviewCount:0},{name:"Ferrero Rocher",makerId:t.Ferrero,type:"Milk",origin:"Blend",cacaoPercentage:30,description:"Whole hazelnut encased in a thin wafer shell filled with hazelnut cream and covered in milk chocolate and chopped hazelnuts.",ingredients:"Milk chocolate, hazelnuts, sugar, palm oil, wheat flour, whey powder, cocoa powder, soy lecithin, vanillin",tagIds:[r.Milk,r.Nutty],imageUrl:"https://placehold.co/300x300?text=Ferrero",averageRating:0,reviewCount:0}],m=[{name:"Ghirardelli Milk Chocolate",makerId:t.Ghirardelli,type:"Milk",origin:"Blend",cacaoPercentage:31,description:"Smooth, creamy milk chocolate with a more refined flavor profile than mass market options.",ingredients:"Sugar, whole milk powder, cocoa butter, unsweetened chocolate, soy lecithin, vanilla",tagIds:[r.Milk,r.Creamy],imageUrl:"https://placehold.co/300x300?text=Ghirardelli",averageRating:0,reviewCount:0},{name:"Ghirardelli 60% Cacao Dark Chocolate",makerId:t.Ghirardelli,type:"Dark",origin:"Blend",cacaoPercentage:60,description:"Intensely flavorful dark chocolate with a good balance of sweetness and bitterness.",ingredients:"Unsweetened chocolate, sugar, cocoa butter, milk fat, soy lecithin, vanilla",tagIds:[r.Dark,r.Bittersweet],imageUrl:"https://placehold.co/300x300?text=GhirardelliDark",averageRating:0,reviewCount:0},{name:"Chocolove Almonds & Sea Salt in Dark Chocolate",makerId:t.Chocolove,type:"Dark",origin:"Blend",cacaoPercentage:55,description:"Dark chocolate with crunchy almonds and sea salt, featuring a love poem printed inside each wrapper.",ingredients:"Unsweetened chocolate, sugar, cocoa butter, almonds, sea salt, soy lecithin, vanilla",tagIds:[r.Dark,r.Nutty],imageUrl:"https://placehold.co/300x300?text=Chocolove",averageRating:0,reviewCount:0},{name:"Green & Black's Organic Dark 70%",makerId:t["Green & Black's"],type:"Dark",origin:"Blend",cacaoPercentage:70,description:"Intensely rich dark chocolate with a robust flavor profile and smooth finish.",ingredients:"Organic chocolate, organic raw cane sugar, organic cocoa butter, soy lecithin, organic vanilla extract",tagIds:[r.Dark,r.Organic,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=GreenAndBlacks",averageRating:0,reviewCount:0},{name:"Endangered Species Dark Chocolate with Sea Salt & Almonds",makerId:t["Endangered Species"],type:"Dark",origin:"Blend",cacaoPercentage:72,description:"Bold dark chocolate with roasted almonds and a touch of sea salt. Each purchase supports wildlife conservation.",ingredients:"Chocolate liquor, cane sugar, cocoa butter, almonds, sea salt, soy lecithin, vanilla",tagIds:[r.Dark,r.Nutty,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=EndangeredSpecies",averageRating:0,reviewCount:0},{name:"Lindt Excellence 70% Cocoa",makerId:t.Lindt,type:"Dark",origin:"Blend",cacaoPercentage:70,description:"Smooth dark chocolate with well-balanced bitterness and subtle fruity notes.",ingredients:"Chocolate, sugar, cocoa butter, cocoa powder, bourbon vanilla beans",tagIds:[r.Dark,r.Fruity],imageUrl:"https://placehold.co/300x300?text=LindtExcellence",averageRating:0,reviewCount:0},{name:"Divine Dark Chocolate with Mint",makerId:t.Divine,type:"Dark",origin:"Ghana",cacaoPercentage:70,description:"Rich dark chocolate with natural mint oil for a refreshing taste. Made with fair trade cocoa from Ghanaian farmer cooperatives.",ingredients:"Cocoa mass, sugar, cocoa butter, peppermint oil, vanilla",tagIds:[r.Dark,r["Fair Trade"],r["Single Origin"]],imageUrl:"https://placehold.co/300x300?text=Divine",averageRating:0,reviewCount:0},{name:"Tony's Chocolonely Milk Chocolate",makerId:t["Tony's Chocolonely"],type:"Milk",origin:"West Africa",cacaoPercentage:32,description:"Creamy milk chocolate with an irregular chunky shape, committed to slave-free chocolate production.",ingredients:"Sugar, dry whole milk, cocoa butter, cocoa mass, soy lecithin",tagIds:[r.Milk,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=Tonys",averageRating:0,reviewCount:0},{name:"Ritter Sport Dark Chocolate with Whole Hazelnuts",makerId:t["Ritter Sport"],type:"Dark",origin:"Blend",cacaoPercentage:50,description:"German dark chocolate squares filled with whole hazelnuts for a satisfying crunch.",ingredients:"Cocoa mass, sugar, hazelnuts, cocoa butter, butterfat, soy lecithin, natural flavoring",tagIds:[r.Dark,r.Nutty],imageUrl:"https://placehold.co/300x300?text=RitterNuts",averageRating:0,reviewCount:0},{name:"Guittard 64% Semisweet Chocolate Baking Bar",makerId:t.Guittard,type:"Dark",origin:"Blend",cacaoPercentage:64,description:"High-quality semisweet chocolate from a 150-year-old American chocolate maker, equally good for baking or eating.",ingredients:"Cacao beans, pure cane sugar, cocoa butter, sunflower lecithin, vanilla beans",tagIds:[r.Dark,r.Bittersweet],imageUrl:"https://placehold.co/300x300?text=Guittard",averageRating:0,reviewCount:0}],p=[{name:"Theo Pure 70% Dark Chocolate",makerId:t["Theo Chocolate"],type:"Dark",origin:"Blend (Congo, Peru)",cacaoPercentage:70,description:"Organic, fair trade dark chocolate with a complex flavor profile featuring notes of cherry and toasted nuts.",ingredients:"Cocoa beans, cane sugar, cocoa butter, ground vanilla bean",tagIds:[r.Dark,r.Organic,r["Fair Trade"],r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Theo",averageRating:0,reviewCount:0},{name:"Theo Salted Almond 70% Dark Chocolate",makerId:t["Theo Chocolate"],type:"Dark",origin:"Blend (Congo, Peru)",cacaoPercentage:70,description:"Organic dark chocolate with chunks of toasted almonds and a sprinkle of sea salt.",ingredients:"Cocoa beans, cane sugar, almonds, cocoa butter, sea salt, ground vanilla bean",tagIds:[r.Dark,r.Nutty,r.Organic,r["Fair Trade"],r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=TheoAlmond",averageRating:0,reviewCount:0},{name:"Hu Simple Dark Chocolate",makerId:t.Hu,type:"Dark",origin:"Blend",cacaoPercentage:70,description:"Minimally processed dark chocolate made with just three ingredients. Vegan, paleo, and free from refined sugar.",ingredients:"Organic cacao, organic coconut sugar, organic cocoa butter",tagIds:[r.Dark,r.Organic,r.Vegan,r["Gluten-Free"]],imageUrl:"https://placehold.co/300x300?text=Hu",averageRating:0,reviewCount:0},{name:"Hu Cashew Butter + Vanilla Bean Dark Chocolate",makerId:t.Hu,type:"Dark",origin:"Blend",cacaoPercentage:70,description:"Dark chocolate filled with house-made cashew butter and vanilla bean. Vegan-friendly with clean ingredients.",ingredients:"Organic cacao, organic coconut sugar, organic cocoa butter, cashews, vanilla bean",tagIds:[r.Dark,r.Nutty,r.Organic,r.Vegan,r["Gluten-Free"]],imageUrl:"https://placehold.co/300x300?text=HuCashew",averageRating:0,reviewCount:0},{name:"Alter Eco Dark Blackout Organic Chocolate",makerId:t["Alter Eco"],type:"Dark",origin:"Ecuador",cacaoPercentage:85,description:"Intensely dark chocolate with minimal sugar and pronounced cocoa flavor. Organic and fair trade certified.",ingredients:"Cocoa beans, cocoa butter, raw cane sugar, vanilla beans",tagIds:[r.Dark,r.Organic,r["Fair Trade"],r["Single Origin"]],imageUrl:"https://placehold.co/300x300?text=AlterEco",averageRating:0,reviewCount:0},{name:"Taza Stone Ground 70% Dark",makerId:t.Taza,type:"Dark",origin:"Dominican Republic",cacaoPercentage:70,description:"Minimally processed, stone-ground dark chocolate with a distinctively rustic texture and bold flavor.",ingredients:"Organic cacao beans, organic cane sugar, organic cocoa butter",tagIds:[r.Dark,r.Organic,r["Single Origin"],r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Taza",averageRating:0,reviewCount:0},{name:"Dandelion Small Batch Chocolate Madagascar",makerId:t["Dandelion Chocolate"],type:"Dark",origin:"Madagascar",cacaoPercentage:70,description:"Single-origin craft chocolate featuring bright, fruity notes characteristic of Madagascar cacao.",ingredients:"Cocoa beans, cane sugar",tagIds:[r.Dark,r.Fruity,r["Single Origin"],r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Dandelion",averageRating:0,reviewCount:0},{name:"Equal Exchange Organic Very Dark Chocolate",makerId:t["Equal Exchange"],type:"Dark",origin:"Blend (Latin America)",cacaoPercentage:71,description:"Fairly traded dark chocolate with a smooth texture and deep flavor from small-scale farmer cooperatives.",ingredients:"Organic chocolate liquor, organic raw cane sugar, organic cocoa butter, organic vanilla beans",tagIds:[r.Dark,r.Organic,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=EqualExchange",averageRating:0,reviewCount:0},{name:"Valrhona Carabe 66%",makerId:t.Valrhona,type:"Dark",origin:"Blend (Caribbean)",cacaoPercentage:66,description:"Professional-quality dark chocolate with balanced bitterness and notes of dried fruit from selected Caribbean beans.",ingredients:"Cocoa beans, sugar, cocoa butter, soy lecithin, natural vanilla extract",tagIds:[r.Dark,r.Fruity],imageUrl:"https://placehold.co/300x300?text=Valrhona",averageRating:0,reviewCount:0},{name:"Amedei Toscano Black 70%",makerId:t.Amedei,type:"Dark",origin:"Blend",cacaoPercentage:70,description:"Artisanal Italian dark chocolate with perfect balance and complexity from a blend of carefully selected cacao beans.",ingredients:"Cocoa mass, cane sugar, cocoa butter, vanilla",tagIds:[r.Dark,r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Amedei",averageRating:0,reviewCount:0}],y=[...u,...m,...p],v=Xt(ut,"chocolates");for(const w of y)try{if(!w.makerId){console.error(`Missing maker ID for chocolate: ${w.name}`);continue}if(w.tagIds.some(k=>!k)){console.error(`Missing tag IDs for chocolate: ${w.name}`);continue}const A=Nt.now();await hs(v,{...w,createdAt:A,updatedAt:A}),console.log(`Added chocolate: ${w.name}`)}catch(T){console.error(`Error adding ${w.name}:`,T)}console.log("Finished adding commercial chocolates")},$O=async()=>{console.log("Starting to add 100 more commercial chocolates...");const a=await ar(Xt(ut,"makers")),e=await ar(Xt(ut,"tags")),t={};a.forEach(v=>{t[v.data().name]=v.id});const r={};e.forEach(v=>{r[v.data().name]=v.id}),console.log("Loaded makers and tags");const s=[{name:"Godiva Chocolatier",country:"Belgium/USA",website:"https://www.godiva.com"},{name:"Russell Stover",country:"United States",website:"https://www.russellstover.com"},{name:"Whitman's",country:"United States",website:"https://www.russellstover.com/whitman-s"},{name:"Scharffen Berger",country:"United States",website:"https://www.scharffenberger.com"},{name:"Dagoba",country:"United States",website:"https://www.dagobachocolate.com"},{name:"Chuao Chocolatier",country:"United States",website:"https://chuaochocolatier.com"},{name:"Lake Champlain Chocolates",country:"United States",website:"https://www.lakechamplainchocolates.com"},{name:"Vosges Haut-Chocolat",country:"United States",website:"https://www.vosgeschocolate.com"},{name:"Raaka Chocolate",country:"United States",website:"https://www.raakachocolate.com"},{name:"Chocolat Moderne",country:"United States",website:"https://www.chocolatmoderne.com"},{name:"Gourmet Boutique",country:"United States",website:"https://gourmetboutique.com"},{name:"Venchi",country:"Italy",website:"https://us.venchi.com"},{name:"Neuhaus",country:"Belgium",website:"https://www.neuhauschocolate.com"},{name:"Lily's",country:"United States",website:"https://lilys.com"},{name:"Seattle Chocolate",country:"United States",website:"https://www.seattlechocolate.com"},{name:"Pascha",country:"Peru/Canada",website:"https://www.paschachocolate.com"},{name:"Kinder",country:"Italy",website:"https://www.kinder.com"},{name:"Trader Joe's",country:"United States",website:"https://www.traderjoes.com"},{name:"Moonstruck",country:"United States",website:"https://www.moonstruckchocolate.com"},{name:"Whittaker's",country:"New Zealand",website:"https://www.whittakers.co.nz"},{name:"Tcho",country:"United States",website:"https://tcho.com"},{name:"Chocolatier Blue",country:"United States",website:"https://www.chocolatierblue.com"},{name:"Cordial",country:"United States",website:"https://cordialorganics.com"},{name:"Bissinger's",country:"United States",website:"https://www.bissingers.com"},{name:"Valor",country:"Spain",website:"https://www.valor.es"},{name:"Callebaut",country:"Belgium",website:"https://www.callebaut.com"},{name:"Schogetten",country:"Germany",website:"https://www.schogetten.com"},{name:"Reese's",country:"United States",website:"https://www.hersheys.com/reeses/"},{name:"Twix",country:"United States",website:"https://www.twix.com"},{name:"Snickers",country:"United States",website:"https://www.snickers.com"},{name:"Kit Kat",country:"United States/Japan",website:"https://www.kitkat.com"},{name:"Brookside",country:"United States",website:"https://www.brooksidechocolate.com"},{name:"See's Candies",country:"United States",website:"https://www.sees.com"},{name:"Perugina",country:"Italy",website:"https://www.perugina.com"},{name:"Moser Roth",country:"Germany",website:"https://www.aldi.us"}],l=Xt(ut,"makers");for(const v of s){if(t[v.name]){console.log(`Maker "${v.name}" already exists, skipping`);continue}try{const w=await hs(l,v);console.log(`Added new maker: ${v.name} with ID: ${w.id}`),t[v.name]=w.id}catch(w){console.error(`Error adding maker ${v.name}:`,w)}}const u=[{name:"Mint",category:"Flavor"},{name:"Coffee",category:"Flavor"},{name:"Coconut",category:"Flavor"},{name:"Toffee",category:"Flavor"},{name:"Raspberry",category:"Flavor"},{name:"Orange",category:"Flavor"},{name:"Cherry",category:"Flavor"},{name:"Peanut",category:"Flavor"},{name:"Hazelnut",category:"Flavor"},{name:"Almond",category:"Flavor"},{name:"Pecan",category:"Flavor"},{name:"Chili",category:"Flavor"},{name:"Sea Salt",category:"Flavor"},{name:"Crunchy",category:"Texture"},{name:"Filled",category:"Type"},{name:"Sugar-Free",category:"Attribute"},{name:"Limited Edition",category:"Attribute"},{name:"Ruby",category:"Type"},{name:"Semisweet",category:"Type"},{name:"Seasonal",category:"Attribute"}],m=Xt(ut,"tags");for(const v of u){if(r[v.name]){console.log(`Tag "${v.name}" already exists, skipping`);continue}try{const w=await hs(m,v);console.log(`Added new tag: ${v.name} with ID: ${w.id}`),r[v.name]=w.id}catch(w){console.error(`Error adding tag ${v.name}:`,w)}}const p=[{name:"Reese's Peanut Butter Cups",makerId:t["Reese's"],type:"Milk",origin:"United States",cacaoPercentage:25,description:"Iconic milk chocolate cups filled with sweetened peanut butter, creating a perfect balance of sweet and salty flavors.",ingredients:"Milk chocolate (sugar, cocoa butter, chocolate, milk, soy lecithin, PGPR), peanuts, sugar, dextrose, salt, TBHQ",tagIds:[r.Milk,r.Peanut,r.Filled],imageUrl:"https://placehold.co/300x300?text=Reeses",averageRating:0,reviewCount:0},{name:"Kit Kat",makerId:t["Kit Kat"],type:"Milk",origin:"United States",cacaoPercentage:22,description:"Crispy wafer fingers covered in smooth milk chocolate, known for its distinctive snap when broken.",ingredients:"Sugar, wheat flour, cocoa butter, nonfat milk, chocolate, palm kernel oil, lactose, soy lecithin, PGPR, yeast, salt, baking soda, artificial flavor",tagIds:[r.Milk,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=KitKat",averageRating:0,reviewCount:0},{name:"Snickers",makerId:t.Snickers,type:"Milk",origin:"United States",cacaoPercentage:20,description:"Nougat topped with caramel and peanuts, enrobed in milk chocolate. One of the best-selling candy bars in the US.",ingredients:"Milk chocolate, peanuts, corn syrup, sugar, palm oil, skim milk, lactose, salt, egg whites, artificial flavor",tagIds:[r.Milk,r.Peanut,r.Caramel,r.Nutty],imageUrl:"https://placehold.co/300x300?text=Snickers",averageRating:0,reviewCount:0},{name:"Twix",makerId:t.Twix,type:"Milk",origin:"United States",cacaoPercentage:21,description:"Crunchy cookie bars topped with caramel and coated in milk chocolate, usually sold in pairs.",ingredients:"Milk chocolate, enriched wheat flour, sugar, palm oil, corn syrup, skim milk, butter, salt, cocoa powder, soy lecithin, vanilla extract",tagIds:[r.Milk,r.Caramel,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=Twix",averageRating:0,reviewCount:0},{name:"Hershey's Cookies 'n' Creme",makerId:t["Hershey's"],type:"White",origin:"United States",cacaoPercentage:0,description:"White chocolate bar embedded with chocolate cookie pieces for a cookies and cream flavor.",ingredients:"Sugar, vegetable oil, cocoa butter, milk, lactose, chocolate cookie bits, soy lecithin, salt, artificial flavor",tagIds:[r.White,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=HersheyCookies",averageRating:0,reviewCount:0},{name:"Kinder Bueno",makerId:t.Kinder,type:"Milk",origin:"Italy",cacaoPercentage:28,description:"Thin wafer filled with hazelnut cream, covered in milk chocolate with a dark cocoa dusting.",ingredients:"Milk chocolate, sugar, palm oil, hazelnuts, wheat flour, milk powder, chocolate, soy lecithin, vanillin",tagIds:[r.Milk,r.Hazelnut,r.Filled,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=KinderBueno",averageRating:0,reviewCount:0},{name:"Milky Way",makerId:t.Mars,type:"Milk",origin:"United States",cacaoPercentage:23,description:"Chocolate-malt nougat topped with caramel and covered with milk chocolate.",ingredients:"Milk chocolate, corn syrup, sugar, hydrogenated palm kernel oil, skim milk, less than 2% of lactose, salt, egg whites, chocolate, artificial flavor",tagIds:[r.Milk,r.Caramel],imageUrl:"https://placehold.co/300x300?text=MilkyWay",averageRating:0,reviewCount:0},{name:"Butterfinger",makerId:t.Ferrero,type:"Milk",origin:"United States",cacaoPercentage:20,description:"Crispy, flaky peanut butter core covered in milk chocolate with a distinctive orange color.",ingredients:"Corn syrup, sugar, ground roasted peanuts, hydrogenated palm kernel oil, cocoa, molasses, milk, soy lecithin",tagIds:[r.Milk,r.Peanut,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=Butterfinger",averageRating:0,reviewCount:0},{name:"3 Musketeers",makerId:t.Mars,type:"Milk",origin:"United States",cacaoPercentage:22,description:"Fluffy chocolate-flavored nougat covered in milk chocolate, lighter than many other candy bars.",ingredients:"Milk chocolate, corn syrup, sugar, hydrogenated palm kernel oil, cocoa powder, egg whites, artificial flavor, soy lecithin",tagIds:[r.Milk],imageUrl:"https://placehold.co/300x300?text=3Musketeers",averageRating:0,reviewCount:0},{name:"York Peppermint Pattie",makerId:t["Hershey's"],type:"Dark",origin:"United States",cacaoPercentage:50,description:"Strong mint-flavored fondant covered in dark chocolate, known for its refreshing taste.",ingredients:"Sugar, corn syrup, semi-sweet chocolate, invert sugar, egg whites, oil of peppermint",tagIds:[r.Dark,r.Mint,r.Filled],imageUrl:"https://placehold.co/300x300?text=YorkPeppermint",averageRating:0,reviewCount:0},{name:"Lindt Lindor Truffles Assorted",makerId:t.Lindt,type:"Milk",origin:"Switzerland",cacaoPercentage:30,description:"Assorted flavors of the famous smooth-melting chocolate truffles with soft centers.",ingredients:"Sugar, vegetable fats, cocoa butter, milk ingredients, chocolate, soy lecithin, artificial flavors",tagIds:[r.Milk,r.Filled,r.Creamy],imageUrl:"https://placehold.co/300x300?text=LindorAssorted",averageRating:0,reviewCount:0},{name:"Godiva Gold Ballotin",makerId:t["Godiva Chocolatier"],type:"Milk",origin:"Belgium",cacaoPercentage:31,description:"Assorted premium Belgian chocolate pralines in the signature gold box, perfect for gifting.",ingredients:"Sugar, cocoa butter, cocoa mass, whole milk powder, hazelnuts, cream, butter, glucose syrup, invert sugar, soy lecithin",tagIds:[r.Milk,r.Filled,r.Hazelnut],imageUrl:"https://placehold.co/300x300?text=GodivaGold",averageRating:0,reviewCount:0},{name:"Russell Stover Assorted Chocolates",makerId:t["Russell Stover"],type:"Milk",origin:"United States",cacaoPercentage:29,description:"Classic American boxed chocolates with various fillings like caramel, nougat, and fruit creams.",ingredients:"Sugar, corn syrup, chocolate, cocoa butter, milk, cream, butter, egg whites, soy lecithin, vanilla, various flavors",tagIds:[r.Milk,r.Filled],imageUrl:"https://placehold.co/300x300?text=RussellStover",averageRating:0,reviewCount:0},{name:"Ghirardelli Squares Dark Chocolate Mint",makerId:t.Ghirardelli,type:"Dark",origin:"United States",cacaoPercentage:60,description:"Individually wrapped dark chocolate squares with a smooth mint filling.",ingredients:"Semi-sweet chocolate, sugar, cocoa butter, mint filling, milk fat, soy lecithin, vanilla",tagIds:[r.Dark,r.Mint,r.Filled],imageUrl:"https://placehold.co/300x300?text=GhirardelliMint",averageRating:0,reviewCount:0},{name:"Ghirardelli Squares Caramel",makerId:t.Ghirardelli,type:"Milk",origin:"United States",cacaoPercentage:32,description:"Individually wrapped milk chocolate squares with a flowing caramel center.",ingredients:"Milk chocolate, corn syrup, sugar, milk, butter, vanilla, soy lecithin, salt",tagIds:[r.Milk,r.Caramel,r.Filled],imageUrl:"https://placehold.co/300x300?text=GhirardelliCaramel",averageRating:0,reviewCount:0},{name:"Whitman's Sampler",makerId:t["Whitman's"],type:"Milk",origin:"United States",cacaoPercentage:30,description:"Iconic yellow box of assorted chocolates with a guide printed inside the lid, a classic American gift.",ingredients:"Sugar, corn syrup, milk chocolate, cream, cocoa butter, various nuts, fruit concentrates, soy lecithin",tagIds:[r.Milk,r.Filled,r.Nutty],imageUrl:"https://placehold.co/300x300?text=Whitmans",averageRating:0,reviewCount:0},{name:"Brookside Dark Chocolate Acai & Blueberry",makerId:t.Brookside,type:"Dark",origin:"United States",cacaoPercentage:60,description:"Fruit-flavored soft centers covered in dark chocolate, a popular choice for 'better-for-you' indulgence.",ingredients:"Dark chocolate, sugar, fruit juice concentrates (aai, blueberry), corn syrup, citric acid, natural flavors",tagIds:[r.Dark,r.Berry,r.Filled],imageUrl:"https://placehold.co/300x300?text=Brookside",averageRating:0,reviewCount:0},{name:"Ferrero Rocher Collection",makerId:t.Ferrero,type:"Milk",origin:"Italy",cacaoPercentage:30,description:"Assortment of Ferrero Rocher, Raffaello (coconut), and Rondnoir (dark) pralines in gold wrappers.",ingredients:"Milk chocolate, hazelnuts, sugar, palm oil, wheat flour, whey powder, cocoa powder, soy lecithin, vanillin",tagIds:[r.Milk,r.Hazelnut,r.Coconut,r.Filled,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=FerreroCollection",averageRating:0,reviewCount:0},{name:"Ritter Sport Marzipan",makerId:t["Ritter Sport"],type:"Dark",origin:"Germany",cacaoPercentage:50,description:"German dark chocolate square filled with marzipan (almond paste). A traditional European favorite.",ingredients:"Sugar, almonds, cocoa mass, cocoa butter, glucose syrup, invert sugar syrup, sweet whey powder, butterfat, soy lecithin",tagIds:[r.Dark,r.Almond,r.Filled],imageUrl:"https://placehold.co/300x300?text=RitterMarzipan",averageRating:0,reviewCount:0},{name:"Toblerone Dark",makerId:t.Toblerone,type:"Dark",origin:"Switzerland",cacaoPercentage:60,description:"Distinctive triangular dark chocolate bar with honey and almond nougat, a darker version of the classic.",ingredients:"Dark chocolate, sugar, honey, almonds, cocoa butter, egg white, natural flavors",tagIds:[r.Dark,r.Nutty,r.Honey],imageUrl:"https://placehold.co/300x300?text=TobleroneBlack",averageRating:0,reviewCount:0},{name:"Scharffen Berger 70% Cacao Bittersweet",makerId:t["Scharffen Berger"],type:"Dark",origin:"Blend",cacaoPercentage:70,description:"Artisanal dark chocolate with complex fruity notes and balanced acidity. One of America's original craft chocolates.",ingredients:"Cacao beans, sugar, cocoa butter, vanilla beans, soy lecithin",tagIds:[r.Dark,r.Fruity,r.Bittersweet],imageUrl:"https://placehold.co/300x300?text=ScharffenBerger",averageRating:0,reviewCount:0},{name:"Dagoba Organic Lavender Blueberry",makerId:t.Dagoba,type:"Dark",origin:"Blend",cacaoPercentage:59,description:"Organic dark chocolate infused with lavender and blueberry essences for a floral berry flavor.",ingredients:"Organic chocolate, organic cane sugar, organic cocoa butter, organic blueberries, organic lavender, organic vanilla bean",tagIds:[r.Dark,r.Organic,r.Berry,r.Floral],imageUrl:"https://placehold.co/300x300?text=Dagoba",averageRating:0,reviewCount:0},{name:"Chuao Chocolatier Potato Chip",makerId:t["Chuao Chocolatier"],type:"Milk",origin:"United States",cacaoPercentage:41,description:"Gourmet milk chocolate bar with crunchy kettle potato chips and sea salt for a sweet-salty experience.",ingredients:"Milk chocolate, potato chips, sea salt, soy lecithin, vanilla",tagIds:[r.Milk,r.Crunchy,r["Sea Salt"]],imageUrl:"https://placehold.co/300x300?text=ChuaoPotato",averageRating:0,reviewCount:0},{name:"Chuao Chocolatier Spicy Maya",makerId:t["Chuao Chocolatier"],type:"Dark",origin:"United States",cacaoPercentage:60,description:"Spicy dark chocolate inspired by Mayan traditions, featuring cinnamon, pasilla chile, and cayenne pepper.",ingredients:"Dark chocolate, cane sugar, cinnamon, pasilla chile, cayenne pepper, soy lecithin",tagIds:[r.Dark,r.Spicy,r.Chili],imageUrl:"https://placehold.co/300x300?text=ChuaoMaya",averageRating:0,reviewCount:0},{name:"Lily's Dark Chocolate",makerId:t["Lily's"],type:"Dark",origin:"Blend",cacaoPercentage:70,description:"Dark chocolate sweetened with stevia instead of sugar, popular with those limiting sugar intake.",ingredients:"Unsweetened chocolate, stevia extract, erythritol, inulin, cocoa butter, sunflower lecithin, vanilla",tagIds:[r.Dark,r["Sugar-Free"]],imageUrl:"https://placehold.co/300x300?text=Lilys",averageRating:0,reviewCount:0},{name:"Seattle Chocolate Truffle Bar",makerId:t["Seattle Chocolate"],type:"Milk",origin:"United States",cacaoPercentage:34,description:"Smooth, truffle-like textured chocolate bars in various flavors with bright, modern packaging.",ingredients:"Chocolate, cocoa butter, heavy cream, sugar, vanilla, soy lecithin",tagIds:[r.Milk,r.Creamy],imageUrl:"https://placehold.co/300x300?text=SeattleChoc",averageRating:0,reviewCount:0},{name:"Lake Champlain Five Star Bars",makerId:t["Lake Champlain Chocolates"],type:"Milk",origin:"United States",cacaoPercentage:34,description:"Gourmet chocolate bars with generous fillings like caramel, hazelnut, and fruit. Similar to premium candy bars.",ingredients:"Milk chocolate, sugar, cream, butter, caramel, hazelnuts, soy lecithin, vanilla",tagIds:[r.Milk,r.Filled,r.Caramel],imageUrl:"https://placehold.co/300x300?text=LakeChamplain",averageRating:0,reviewCount:0},{name:"Tcho Milk Chocolate",makerId:t.Tcho,type:"Milk",origin:"Blend",cacaoPercentage:39,description:"Higher cacao milk chocolate with caramel and dairy notes, made by a tech-influenced craft chocolate company.",ingredients:"Cacao beans, cane sugar, whole milk powder, cocoa butter, soy lecithin, vanilla beans",tagIds:[r.Milk,r.Caramel,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=Tcho",averageRating:0,reviewCount:0},{name:"Pascha Organic 85% Dark Chocolate",makerId:t.Pascha,type:"Dark",origin:"Peru",cacaoPercentage:85,description:"Allergen-free dark chocolate made in a dedicated facility without common allergens like dairy, nuts, and soy.",ingredients:"Organic cocoa mass, organic cocoa butter, organic cane sugar",tagIds:[r.Dark,r.Organic,r.Vegan,r["Gluten-Free"]],imageUrl:"https://placehold.co/300x300?text=Pascha",averageRating:0,reviewCount:0},{name:"Raaka Virgin Chocolate Bourbon Cask Aged",makerId:t["Raaka Chocolate"],type:"Dark",origin:"Blend",cacaoPercentage:68,description:"Unroasted 'virgin' chocolate made from beans aged in bourbon casks for a unique flavor profile.",ingredients:"Organic cacao beans, organic cane sugar, organic maple sugar, organic cacao butter",tagIds:[r.Dark,r.Organic,r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Raaka",averageRating:0,reviewCount:0},{name:"Reese's Peanut Butter Christmas Trees",makerId:t["Reese's"],type:"Milk",origin:"United States",cacaoPercentage:25,description:"Tree-shaped version of the classic peanut butter cups, available during the holiday season.",ingredients:"Milk chocolate, peanuts, sugar, dextrose, salt, TBHQ, soy lecithin",tagIds:[r.Milk,r.Peanut,r.Seasonal],imageUrl:"https://placehold.co/300x300?text=ReesesTree",averageRating:0,reviewCount:0},{name:"Lindt Gold Bunny",makerId:t.Lindt,type:"Milk",origin:"Switzerland",cacaoPercentage:30,description:"Iconic gold foil-wrapped hollow chocolate bunny, a classic Easter tradition.",ingredients:"Sugar, cocoa butter, milk powder, chocolate, soy lecithin, barley malt, artificial flavoring",tagIds:[r.Milk,r.Seasonal],imageUrl:"https://placehold.co/300x300?text=Lindt",imageUrl:"https://placehold.co/300x300?text=LindtBunny",averageRating:0,reviewCount:0},{name:"Cadbury Creme Egg",makerId:t.Cadbury,type:"Milk",origin:"United Kingdom",cacaoPercentage:26,description:"Egg-shaped milk chocolate shell with a sweet fondant filling that mimics an egg. Hugely popular Easter candy.",ingredients:"Milk chocolate, sugar, corn syrup, high fructose corn syrup, artificial color, egg whites, natural and artificial flavors",tagIds:[r.Milk,r.Filled,r.Seasonal],imageUrl:"https://placehold.co/300x300?text=CremEgg",averageRating:0,reviewCount:0},{name:"Hershey's Kisses Pumpkin Spice",makerId:t["Hershey's"],type:"Milk",origin:"United States",cacaoPercentage:23,description:"Fall seasonal variety of Hershey's Kisses with pumpkin spice flavored creme filling.",ingredients:"Milk chocolate, sugar, vegetable oil, corn syrup, milk, cocoa butter, pumpkin powder, cinnamon, nutmeg, cloves, artificial flavor",tagIds:[r.Milk,r.Filled,r.Seasonal],imageUrl:"https://placehold.co/300x300?text=KissesPumpkin",averageRating:0,reviewCount:0},{name:"Godiva Limited Edition Valentine's Day Heart Box",makerId:t["Godiva Chocolatier"],type:"Milk",origin:"Belgium",cacaoPercentage:31,description:"Heart-shaped luxury gift box with a curated selection of milk and dark chocolates for Valentine's Day.",ingredients:"Sugar, cocoa butter, milk, chocolate liquor, hazelnut paste, butter, soy lecithin, natural and artificial flavors",tagIds:[r.Milk,r.Filled,r.Seasonal,r["Limited Edition"]],imageUrl:"https://placehold.co/300x300?text=GodivaHeart",averageRating:0,reviewCount:0},{name:"Lindt White Chocolate Peppermint Truffles",makerId:t.Lindt,type:"White",origin:"Switzerland",cacaoPercentage:0,description:"Holiday edition white chocolate truffles with peppermint pieces and candy cane-like red streaks.",ingredients:"White chocolate, sugar, vegetable fat, milk ingredients, peppermint oil, soy lecithin, red colorant, natural flavor",tagIds:[r.White,r.Mint,r.Seasonal],imageUrl:"https://placehold.co/300x300?text=LindtPeppermint",averageRating:0,reviewCount:0},{name:"KitKat Pumpkin Pie",makerId:t["Kit Kat"],type:"Milk",origin:"United States",cacaoPercentage:22,description:"Fall limited edition KitKat featuring pumpkin pie flavored white creme coating instead of chocolate.",ingredients:"Sugar, white creme, wheat flour, nonfat milk, vegetable oils, cocoa butter, food starch, corn syrup, spices, artificial flavor",tagIds:[r.Milk,r.Crunchy,r.Seasonal,r["Limited Edition"]],imageUrl:"https://placehold.co/300x300?text=KitKatPumpkin",averageRating:0,reviewCount:0},{name:"M&M's Caramel",makerId:t.Mars,type:"Milk",origin:"United States",cacaoPercentage:23,description:"M&M's with a soft caramel center instead of the traditional chocolate center.",ingredients:"Milk chocolate, sugar, corn syrup, skim milk, cocoa butter, caramel, less than 2% of various ingredients (salt, artificial colors)",tagIds:[r.Milk,r.Caramel,r.Filled],imageUrl:"https://placehold.co/300x300?text=MandMsCaramel",averageRating:0,reviewCount:0},{name:"Ghirardelli Peppermint Bark",makerId:t.Ghirardelli,type:"White",origin:"United States",cacaoPercentage:0,description:"Holiday favorite featuring dark chocolate topped with white chocolate and peppermint pieces.",ingredients:"White chocolate, dark chocolate, sugar, cocoa butter, milk, vanilla, peppermint candy, soy lecithin",tagIds:[r.White,r.Dark,r.Mint,r.Seasonal],imageUrl:"https://placehold.co/300x300?text=GhirardelliMintBark",averageRating:0,reviewCount:0},{name:"Terry's Chocolate Orange",makerId:t.Cadbury,type:"Milk",origin:"United Kingdom",cacaoPercentage:25,description:"Ball of orange-flavored chocolate shaped like an orange and divided into segments. Popular during the holiday season.",ingredients:"Sugar, cocoa butter, cocoa mass, milk, vegetable fats, orange oil, emulsifiers, artificial flavors",tagIds:[r.Milk,r.Orange,r.Seasonal],imageUrl:"https://placehold.co/300x300?text=TerryChocOrange",averageRating:0,reviewCount:0},{name:"See's Assorted Chocolates",makerId:t["See's Candies"],type:"Milk",origin:"United States",cacaoPercentage:31,description:"Classic West Coast assorted boxed chocolates with nuts, caramels, and creams. A traditional American gift box.",ingredients:"Sugar, chocolate, butter, cream, milk, various nuts, corn syrup, soy lecithin, vanilla, salt",tagIds:[r.Milk,r.Filled,r.Nutty],imageUrl:"https://placehold.co/300x300?text=Sees",averageRating:0,reviewCount:0},{name:"See's Nuts & Chews",makerId:t["See's Candies"],type:"Milk",origin:"United States",cacaoPercentage:31,description:"Popular See's assortment featuring only nut and caramel-based chocolates, no soft centers.",ingredients:"Sugar, chocolate, almonds, walnuts, peanuts, pecans, butter, cream, milk, corn syrup, soy lecithin, vanilla, salt",tagIds:[r.Milk,r.Nutty,r.Caramel],imageUrl:"https://placehold.co/300x300?text=SeesNuts",averageRating:0,reviewCount:0},{name:"Godiva Dark Chocolate Assortment",makerId:t["Godiva Chocolatier"],type:"Dark",origin:"Belgium",cacaoPercentage:72,description:"Luxury gift box of dark chocolate pralines, ganaches, and truffles from this premium Belgian brand.",ingredients:"Dark chocolate, cocoa butter, hazelnuts, sugar, cream, butter, vanilla, soy lecithin",tagIds:[r.Dark,r.Filled,r.Hazelnut],imageUrl:"https://placehold.co/300x300?text=GodivaDark",averageRating:0,reviewCount:0},{name:"Neuhaus Belgian Chocolate Collection",makerId:t.Neuhaus,type:"Milk",origin:"Belgium",cacaoPercentage:33,description:"Assorted pralines from the inventor of the Belgian praline, in a luxurious gift box.",ingredients:"Milk chocolate, dark chocolate, white chocolate, hazelnuts, almonds, cream, butter, sugar, vanilla",tagIds:[r.Milk,r.Filled,r.Nutty],imageUrl:"https://placehold.co/300x300?text=Neuhaus",averageRating:0,reviewCount:0},{name:"Venchi Assorted Chocolate Gift Box",makerId:t.Venchi,type:"Dark",origin:"Italy",cacaoPercentage:56,description:"Elegant Italian chocolate assortment featuring gianduia (hazelnut chocolate), cremini, and dark chocolates.",ingredients:"Cocoa mass, sugar, hazelnuts, cocoa butter, whole milk powder, vanilla, soy lecithin",tagIds:[r.Dark,r.Hazelnut,r.Filled],imageUrl:"https://placehold.co/300x300?text=Venchi",averageRating:0,reviewCount:0},{name:"Vosges Haut-Chocolat Exotic Truffle Collection",makerId:t["Vosges Haut-Chocolat"],type:"Dark",origin:"United States/Blend",cacaoPercentage:62,description:"Innovative truffles with unexpected flavors like curry, wasabi, and various herbs and spices.",ingredients:"Dark chocolate, milk chocolate, white chocolate, heavy cream, butter, various spices and herbs, soy lecithin",tagIds:[r.Dark,r.Filled,r.Spicy],imageUrl:"https://placehold.co/300x300?text=Vosges",averageRating:0,reviewCount:0},{name:"Vosges Bacon Chocolate Bar",makerId:t["Vosges Haut-Chocolat"],type:"Milk",origin:"United States",cacaoPercentage:41,description:"Famous gourmet chocolate bar combining smoky bacon with sweet milk chocolate and sea salt.",ingredients:"Milk chocolate, bacon, sea salt, soy lecithin, vanilla",tagIds:[r.Milk,r["Sea Salt"]],imageUrl:"https://placehold.co/300x300?text=VosgesBacon",averageRating:0,reviewCount:0},{name:"Tony's Chocolonely Dark Chocolate Almond Sea Salt",makerId:t["Tony's Chocolonely"],type:"Dark",origin:"Ghana/Ivory Coast",cacaoPercentage:51,description:"Ethically sourced dark chocolate with almonds and sea salt in an irregularly divided bar.",ingredients:"Cocoa mass, sugar, almonds, cocoa butter, sea salt, soy lecithin, vanilla",tagIds:[r.Dark,r.Almond,r["Sea Salt"],r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=TonysAlmond",averageRating:0,reviewCount:0},{name:"Chocolat Moderne Avant-Garde Bar",makerId:t["Chocolat Moderne"],type:"Dark",origin:"Blend",cacaoPercentage:65,description:"Artist-designed bars with unexpected flavor combinations and beautiful transfer designs.",ingredients:"Dark chocolate, cocoa butter, vanilla, natural flavors, sea salt",tagIds:[r.Dark],imageUrl:"https://placehold.co/300x300?text=ChocModerne",averageRating:0,reviewCount:0},{name:"Green & Black's Organic Maya Gold",makerId:t["Green & Black's"],type:"Dark",origin:"Belize",cacaoPercentage:55,description:"Organic dark chocolate infused with orange, cinnamon, nutmeg and vanilla, inspired by traditional Mayan spiced cocoa.",ingredients:"Organic chocolate, organic cane sugar, organic vanilla, orange oil, cinnamon, nutmeg, cloves",tagIds:[r.Dark,r.Organic,r.Orange,r.Spicy],imageUrl:"https://placehold.co/300x300?text=MayaGold",averageRating:0,reviewCount:0},{name:"Moser Roth 70% Cocoa Dark Chocolate",makerId:t["Moser Roth"],type:"Dark",origin:"Blend",cacaoPercentage:70,description:"European-style dark chocolate in individually wrapped portions, sold at an affordable price at ALDI stores.",ingredients:"Cocoa mass, sugar, cocoa butter, soy lecithin, natural vanilla",tagIds:[r.Dark],imageUrl:"https://placehold.co/300x300?text=MoserRoth",averageRating:0,reviewCount:0},{name:"Endangered Species Forest Mint 72% Dark Chocolate",makerId:t["Endangered Species"],type:"Dark",origin:"Blend",cacaoPercentage:72,description:"Smooth dark chocolate infused with mint, with a portion of proceeds supporting wildlife conservation.",ingredients:"Dark chocolate, cane sugar, peppermint oil, soy lecithin, vanilla",tagIds:[r.Dark,r.Mint,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=ForestMint",averageRating:0,reviewCount:0},{name:"Trader Joe's Pound Plus 72% Dark Chocolate",makerId:t["Trader Joe's"],type:"Dark",origin:"Belgium",cacaoPercentage:72,description:"Large block of Belgian dark chocolate at an affordable price, popular for baking and snacking.",ingredients:"Chocolate liquor, sugar, cocoa butter, soy lecithin, vanilla",tagIds:[r.Dark],imageUrl:"https://placehold.co/300x300?text=TJDark",averageRating:0,reviewCount:0},{name:"Trader Joe's Dark Chocolate Peanut Butter Cups",makerId:t["Trader Joe's"],type:"Dark",origin:"United States",cacaoPercentage:58,description:"Cult favorite peanut butter cups with dark chocolate shells and creamy peanut butter filling.",ingredients:"Dark chocolate, peanut butter, sugar, palm oil, salt, soy lecithin",tagIds:[r.Dark,r.Peanut,r.Filled],imageUrl:"https://placehold.co/300x300?text=TJPBCups",averageRating:0,reviewCount:0},{name:"Chocolove Toffee & Almonds in Milk Chocolate",makerId:t.Chocolove,type:"Milk",origin:"Blend",cacaoPercentage:33,description:"Milk chocolate bar with crunchy toffee bits and roasted almonds, with a love poem printed inside the wrapper.",ingredients:"Milk chocolate, cane sugar, cocoa butter, almonds, toffee (sugar, butter), whole milk powder, soy lecithin, vanilla",tagIds:[r.Milk,r.Toffee,r.Almond,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=ChocoloveToffee",averageRating:0,reviewCount:0},{name:"Valor Chocolate con Leche",makerId:t.Valor,type:"Milk",origin:"Spain",cacaoPercentage:33,description:"Classic Spanish milk chocolate with a smooth texture and rich dairy flavor. Popular in Europe.",ingredients:"Sugar, cocoa butter, whole milk powder, cocoa mass, soy lecithin, vanilla",tagIds:[r.Milk],imageUrl:"https://placehold.co/300x300?text=Valor",averageRating:0,reviewCount:0},{name:"Callebaut 811 54.5% Dark Chocolate Callets",makerId:t.Callebaut,type:"Dark",origin:"Blend",cacaoPercentage:54.5,description:"Professional-grade chocolate chips used by pastry chefs for baking and chocolate work.",ingredients:"Cocoa mass, sugar, cocoa butter, soy lecithin, natural vanilla",tagIds:[r.Dark,r.Semisweet],imageUrl:"https://placehold.co/300x300?text=Callebaut",averageRating:0,reviewCount:0},{name:"Perugina Baci",makerId:t.Perugina,type:"Dark",origin:"Italy",cacaoPercentage:51,description:"Iconic Italian 'kisses' with a whole hazelnut topped with chocolate-hazelnut filling and wrapped in dark chocolate.",ingredients:"Dark chocolate, hazelnuts, sugar, cocoa butter, whole milk powder, natural flavors, lecithin",tagIds:[r.Dark,r.Hazelnut,r.Filled],imageUrl:"https://placehold.co/300x300?text=Baci",averageRating:0,reviewCount:0},{name:"Hershey's Milk Chocolate with Almonds",makerId:t["Hershey's"],type:"Milk",origin:"United States",cacaoPercentage:11,description:"Classic Hershey's milk chocolate bar with whole roasted almonds throughout.",ingredients:"Milk chocolate, almonds, cocoa butter, milk, soy lecithin, vanillin",tagIds:[r.Milk,r.Almond],imageUrl:"https://placehold.co/300x300?text=HersheyAlmonds",averageRating:0,reviewCount:0},{name:"Dove Dark Chocolate Promises",makerId:t.Dove,type:"Dark",origin:"United States",cacaoPercentage:55,description:"Individually wrapped dark chocolate squares with messages printed inside each wrapper.",ingredients:"Dark chocolate, cocoa butter, sugar, soy lecithin, vanilla extract",tagIds:[r.Dark],imageUrl:"https://placehold.co/300x300?text=DoveDark",averageRating:0,reviewCount:0},{name:"Hershey's Kisses",makerId:t["Hershey's"],type:"Milk",origin:"United States",cacaoPercentage:11,description:"Iconic teardrop-shaped milk chocolate pieces individually wrapped in foil. An American classic.",ingredients:"Milk chocolate, sugar, milk, cocoa butter, chocolate, soy lecithin, vanillin",tagIds:[r.Milk],imageUrl:"https://placehold.co/300x300?text=Kisses",averageRating:0,reviewCount:0},{name:"M&M's Peanut",makerId:t.Mars,type:"Milk",origin:"United States",cacaoPercentage:23,description:"Peanuts covered in milk chocolate and a candy shell. One of America's favorite candies.",ingredients:"Milk chocolate, peanuts, sugar, corn starch, corn syrup, artificial colors, dextrin, carnuba wax",tagIds:[r.Milk,r.Peanut,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=MandMPeanut",averageRating:0,reviewCount:0},{name:"M&M's Milk Chocolate",makerId:t.Mars,type:"Milk",origin:"United States",cacaoPercentage:23,description:"Small rounds of milk chocolate in a colorful candy shell. One of the world's most recognizable candies.",ingredients:"Milk chocolate, sugar, corn starch, corn syrup, artificial colors, dextrin, carnuba wax",tagIds:[r.Milk,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=MandM",averageRating:0,reviewCount:0},{name:"Hershey's Gold",makerId:t["Hershey's"],type:"White",origin:"United States",cacaoPercentage:0,description:"Caramelized creme bar with peanuts and pretzels. Not technically chocolate (no cocoa), but marketed as part of the Hershey's line.",ingredients:"Sugar, vegetable oil, skim milk, milk, whey, pretzels, peanuts, soy lecithin, salt, TBHQ",tagIds:[r.White,r.Caramel,r.Peanut,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=HersheyGold",averageRating:0,reviewCount:0},{name:"Ghirardelli Milk Chocolate Sea Salt Caramel",makerId:t.Ghirardelli,type:"Milk",origin:"United States",cacaoPercentage:32,description:"Milk chocolate squares with a flowing sea salt caramel filling.",ingredients:"Milk chocolate, sugar, corn syrup, milk, cream, butter, sea salt, soy lecithin",tagIds:[r.Milk,r.Caramel,r.Filled,r["Sea Salt"]],imageUrl:"https://placehold.co/300x300?text=GhirardelliSaltSquare",averageRating:0,reviewCount:0},{name:"Almond Joy",makerId:t["Hershey's"],type:"Milk",origin:"United States",cacaoPercentage:21,description:"Coconut filling topped with whole almonds and covered in milk chocolate.",ingredients:"Corn syrup, milk chocolate, coconut, almonds, sugar, dairy, soy lecithin, salt",tagIds:[r.Milk,r.Coconut,r.Almond,r.Filled],imageUrl:"https://placehold.co/300x300?text=AlmondJoy",averageRating:0,reviewCount:0},{name:"Mounds",makerId:t["Hershey's"],type:"Dark",origin:"United States",cacaoPercentage:40,description:"Coconut filling covered in dark chocolate. Sister product to Almond Joy, but without nuts.",ingredients:"Corn syrup, semi-sweet chocolate, coconut, sugar, dairy, soy lecithin, salt",tagIds:[r.Dark,r.Coconut,r.Filled],imageUrl:"https://placehold.co/300x300?text=Mounds",averageRating:0,reviewCount:0},{name:"Ghirardelli Intense Dark 86% Cacao",makerId:t.Ghirardelli,type:"Dark",origin:"Blend",cacaoPercentage:86,description:"Very dark chocolate with minimal sweetness, intense cocoa flavor and slight fruity notes.",ingredients:"Unsweetened chocolate, cocoa butter, sugar, soy lecithin, vanilla",tagIds:[r.Dark,r.Bittersweet],imageUrl:"https://placehold.co/300x300?text=Ghirardelli86",averageRating:0,reviewCount:0},{name:"Milka Alpine Milk Chocolate with Oreo",makerId:t.Milka,type:"Milk",origin:"Germany",cacaoPercentage:30,description:"Creamy European milk chocolate with crushed Oreo cookie pieces throughout.",ingredients:"Milk chocolate, sugar, cookies (wheat flour, sugar, vegetable fat, cocoa), cocoa butter, whey powder, hazelnuts",tagIds:[r.Milk,r.Creamy,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=MilkaOreo",averageRating:0,reviewCount:0},{name:"Scharffen Berger 82% Extra Dark",makerId:t["Scharffen Berger"],type:"Dark",origin:"Blend (South America)",cacaoPercentage:82,description:"Very dark chocolate with an intense cocoa flavor and complex fruity undertones.",ingredients:"Cacao beans, sugar, cocoa butter, vanilla beans, soy lecithin",tagIds:[r.Dark,r.Bittersweet],imageUrl:"https://placehold.co/300x300?text=Scharffen82",averageRating:0,reviewCount:0},{name:"Whittaker's Dark Ghana",makerId:t["Whittaker's"],type:"Dark",origin:"Ghana",cacaoPercentage:72,description:"New Zealand's popular dark chocolate made with Ghanaian beans, with a clean, intense flavor.",ingredients:"Cocoa beans, sugar, cocoa butter, soy lecithin, vanilla",tagIds:[r.Dark,r["Single Origin"]],imageUrl:"https://placehold.co/300x300?text=Whittakers",averageRating:0,reviewCount:0},{name:"Schogetten Dark Chocolate",makerId:t.Schogetten,type:"Dark",origin:"Germany",cacaoPercentage:50,description:"German chocolate in a unique snap-apart tablet format. Each piece is individually molded.",ingredients:"Sugar, cocoa mass, cocoa butter, butterfat, soy lecithin, natural flavors",tagIds:[r.Dark],imageUrl:"https://placehold.co/300x300?text=Schogetten",averageRating:0,reviewCount:0},{name:"Moonstruck Sea Salt Almond Bark",makerId:t.Moonstruck,type:"Dark",origin:"United States",cacaoPercentage:68,description:"Artisan chocolate bark with roasted almonds, toffee bits and sea salt.",ingredients:"Dark chocolate, almonds, butter toffee (sugar, butter), sea salt, cocoa butter",tagIds:[r.Dark,r.Almond,r.Toffee,r["Sea Salt"]],imageUrl:"https://placehold.co/300x300?text=Moonstruck",averageRating:0,reviewCount:0},{name:"Chocolatier Blue Caramels",makerId:t["Chocolatier Blue"],type:"Dark",origin:"United States",cacaoPercentage:64,description:"Artisanal painted chocolate bonbons with various caramel flavors, known for beautiful jewel-like appearance.",ingredients:"Valrhona dark chocolate, butter, cream, sugar, various natural flavors, glucose",tagIds:[r.Dark,r.Caramel,r.Filled],imageUrl:"https://placehold.co/300x300?text=ChocBlue",averageRating:0,reviewCount:0},{name:"Bissinger's Gummy Pandas",makerId:t["Bissinger's"],type:"Dark",origin:"United States",cacaoPercentage:60,description:"Gourmet dark chocolate-covered fruit gummy candies in the shape of pandas.",ingredients:"Dark chocolate, organic tapioca syrup, organic cane sugar, gelatin, fruit juice, citric acid, natural flavors",tagIds:[r.Dark,r.Fruity,r.Filled],imageUrl:"https://placehold.co/300x300?text=ChocPandas",averageRating:0,reviewCount:0},{name:"Cordial Cherry Cordials",makerId:t.Cordial,type:"Dark",origin:"United States",cacaoPercentage:55,description:"Classic American confection of maraschino cherries in a liquid center surrounded by dark chocolate.",ingredients:"Dark chocolate, cherries, corn syrup, sugar, invertase enzyme, citric acid, natural flavor",tagIds:[r.Dark,r.Cherry,r.Filled],imageUrl:"https://placehold.co/300x300?text=CherryCordials",averageRating:0,reviewCount:0},{name:"Alter Eco Dark Blackout Organic Chocolate",makerId:t["Alter Eco"],type:"Dark",origin:"Ecuador",cacaoPercentage:85,description:"Intensely dark chocolate with minimal sugar and pronounced cocoa flavor. Organic and fair trade certified.",ingredients:"Cocoa beans, cocoa butter, raw cane sugar, vanilla beans",tagIds:[r.Dark,r.Organic,r["Fair Trade"],r["Single Origin"]],imageUrl:"https://placehold.co/300x300?text=AlterEco",averageRating:0,reviewCount:0},{name:"Taza Stone Ground 80% Dark",makerId:t.Taza,type:"Dark",origin:"Blend",cacaoPercentage:80,description:"Very dark stone-ground chocolate with a rustic texture and pure, intense flavor.",ingredients:"Organic cacao beans, organic cane sugar",tagIds:[r.Dark,r.Organic,r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Taza80",averageRating:0,reviewCount:0},{name:"Gourmet Boutique Vegan Dark",makerId:t["Gourmet Boutique"],type:"Dark",origin:"Blend",cacaoPercentage:75,description:"Dairy-free dark chocolate specifically formulated for vegans and those with dairy allergies.",ingredients:"Cocoa liquor, cocoa butter, cane sugar, vanilla extract",tagIds:[r.Dark,r.Vegan,r.Organic],imageUrl:"https://placehold.co/300x300?text=VeganDark",averageRating:0,reviewCount:0},{name:"Tony's Chocolonely Milk Chocolate Caramel Sea Salt",makerId:t["Tony's Chocolonely"],type:"Milk",origin:"West Africa",cacaoPercentage:32,description:"Milk chocolate with caramel and sea salt in an irregularly divided bar, promoting slave-free chocolate.",ingredients:"Sugar, dried whole milk, cocoa butter, cocoa mass, caramel pieces, sea salt, soy lecithin, vanilla",tagIds:[r.Milk,r.Caramel,r["Sea Salt"],r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=TonysSalt",averageRating:0,reviewCount:0},{name:"Dagoba Organic Lavender Blueberry",makerId:t.Dagoba,type:"Dark",origin:"Blend",cacaoPercentage:59,description:"Organic dark chocolate infused with lavender and blueberry essences for a floral berry flavor.",ingredients:"Organic chocolate, organic cane sugar, organic cocoa butter, organic blueberries, organic lavender, organic vanilla bean",tagIds:[r.Dark,r.Organic,r.Berry,r.Floral],imageUrl:"https://placehold.co/300x300?text=Dagoba",averageRating:0,reviewCount:0},{name:"Whittaker's Almond Gold",makerId:t["Whittaker's"],type:"Milk",origin:"New Zealand",cacaoPercentage:33,description:"New Zealand favorite featuring milk chocolate with whole roasted almonds.",ingredients:"Milk chocolate, almonds, cocoa solids, milk solids, emulsifiers, flavor",tagIds:[r.Milk,r.Almond],imageUrl:"https://placehold.co/300x300?text=WhittakersAlmond",averageRating:0,reviewCount:0},{name:"Cadbury Milk Chocolate Caramello",makerId:t.Cadbury,type:"Milk",origin:"United Kingdom",cacaoPercentage:26,description:"Milk chocolate bar with flowing caramel filling in segments.",ingredients:"Milk chocolate, sugar, corn syrup, milk, cocoa butter, natural and artificial flavor, soy lecithin",tagIds:[r.Milk,r.Caramel,r.Filled],imageUrl:"https://placehold.co/300x300?text=Caramello",averageRating:0,reviewCount:0},{name:"Trader Joe's Dark Chocolate Lovers Bar",makerId:t["Trader Joe's"],type:"Dark",origin:"Blend",cacaoPercentage:85,description:"Very dark chocolate bar for serious dark chocolate enthusiasts, with minimal sugar.",ingredients:"Cocoa mass, sugar, cocoa butter, soy lecithin, vanilla",tagIds:[r.Dark,r.Bittersweet],imageUrl:"https://placehold.co/300x300?text=TJLovers",averageRating:0,reviewCount:0},{name:"Perugina Baci Dark",makerId:t.Perugina,type:"Dark",origin:"Italy",cacaoPercentage:70,description:"A darker version of the classic Italian chocolate 'kisses' with hazelnut filling and whole hazelnut topping.",ingredients:"Dark chocolate, hazelnuts, cocoa butter, sugar, cocoa powder, natural flavors, soy lecithin",tagIds:[r.Dark,r.Hazelnut,r.Filled],imageUrl:"https://placehold.co/300x300?text=BaciDark",averageRating:0,reviewCount:0},{name:"Kit Kat Matcha Green Tea",makerId:t["Kit Kat"],type:"White",origin:"Japan",cacaoPercentage:0,description:"Japanese version of Kit Kat with matcha green tea flavored white chocolate coating. Popular as a souvenir from Japan.",ingredients:"White chocolate with matcha powder, wheat flour, sugar, vegetable oil, lactose, cocoa butter, milk powder, green tea powder",tagIds:[r.White,r.Crunchy,r["Limited Edition"]],imageUrl:"https://placehold.co/300x300?text=KitKatMatcha",averageRating:0,reviewCount:0},{name:"Chocolove XOXOX Ruby Chocolate",makerId:t.Chocolove,type:"Ruby",origin:"Blend",cacaoPercentage:47,description:"One of the first widely available ruby chocolate bars in the US market, with a natural pink color and berry notes.",ingredients:"Ruby cocoa beans, sugar, cocoa butter, whole milk powder, soy lecithin, citric acid, natural vanilla",tagIds:[r.Ruby,r.Berry],imageUrl:"https://placehold.co/300x300?text=ChocoloveRuby",averageRating:0,reviewCount:0},{name:"Callebaut Ruby RB1 Chocolate",makerId:t.Callebaut,type:"Ruby",origin:"Blend",cacaoPercentage:47.3,description:"Professional-grade ruby chocolate with naturally occurring pink color and berry notes. Used by pastry chefs.",ingredients:"Ruby cocoa beans, sugar, whole milk powder, cocoa butter, soy lecithin, citric acid, natural vanilla",tagIds:[r.Ruby,r.Berry],imageUrl:"https://placehold.co/300x300?text=CallebautRuby",averageRating:0,reviewCount:0},{name:"Valrhona Ivoire White Chocolate",makerId:t.Valrhona,type:"White",origin:"France",cacaoPercentage:0,description:"Professional-grade white chocolate with a clean, pure flavor and subtle vanilla notes. Popular with pastry chefs.",ingredients:"Cocoa butter, sugar, whole milk powder, soy lecithin, natural vanilla extract",tagIds:[r.White,r.Vanilla],imageUrl:"https://placehold.co/300x300?text=ValrhonaIvoire",averageRating:0,reviewCount:0}],y=Xt(ut,"chocolates");for(const v of p)try{if(!v.makerId){console.error(`Missing maker ID for chocolate: ${v.name}`);continue}if(v.tagIds.some(A=>!A)){console.error(`Missing tag IDs for chocolate: ${v.name}`);continue}const T=Nt.now();await hs(y,{...v,createdAt:T,updatedAt:T}),console.log(`Added chocolate: ${v.name}`)}catch(w){console.error(`Error adding ${v.name}:`,w)}console.log("Finished adding 100 more commercial chocolates")},mx="https://world.openfoodfacts.org/api/v2",KO=async a=>{try{return(await(await fetch(`${mx}/search?categories_tags=chocolates&search_terms=${a}&json=true`)).json()).products}catch(e){throw console.error("Error searching chocolate products:",e),e}},QO=async a=>{try{return(await(await fetch(`${mx}/search?categories_tags=chocolates&brands=${a}&json=true`)).json()).products}catch(e){throw console.error("Error searching by brand:",e),e}},YO=async a=>{try{const e=`${a.name} ${a.maker}`;let t=await KO(e);(!t||t.length===0)&&(t=await QO(a.maker));const r=WO(t,a.name);return r?{...a,barcode:r.code||a.barcode,imageUrl:r.image_url||a.imageUrl,ingredients:a.ingredients||ZO(r.ingredients_text),nutrimentData:r.nutriments||{},additionalImages:r.images||{},openFoodFactsId:r._id}:a}catch(e){return console.error("Error enriching chocolate data:",e),a}},WO=(a,e)=>{if(!a||a.length===0)return null;const t=e.toLowerCase(),r=a.map(s=>{const l=(s.product_name||"").toLowerCase(),u=XO(t,l);return{product:s,score:u}}).sort((s,l)=>l.score-s.score);return r[0].score>.5?r[0].product:null},XO=(a,e)=>{if(!a||!e)return 0;const t=a.split(" "),r=e.split(" ");let s=0;return t.forEach(l=>{r.includes(l)&&s++}),s/Math.max(t.length,r.length)},ZO=a=>a?a.split(",").map(e=>e.trim()):[],JO=async()=>{try{console.log("Starting database enrichment process...");const a=Xt(ut,"chocolates"),e=await ar(a);if(e.empty){console.log("No chocolates found in database.");return}console.log(`Found ${e.size} chocolates to process.`);let t=0,r=0;for(const s of e.docs){const l={id:s.id,...s.data()};if(console.log(`Processing [${++t}/${e.size}]: ${l.name}`),l.barcode&&l.imageUrl){console.log("- Already has barcode and image, skipping");continue}const u=await YO(l);if(JSON.stringify(u)!==JSON.stringify(l)){const m=yr(ut,"chocolates",l.id),{id:p,...y}=u;await oS(m,{...y,updatedAt:new Date}),console.log(`- Updated with barcode: ${u.barcode||"None"}`),console.log(`- Updated with image: ${u.imageUrl?"Yes":"No"}`),r++}else console.log("- No matching data found in Open Food Facts");await new Promise(m=>setTimeout(m,1e3))}console.log(`Enrichment complete! Processed ${t} chocolates, enriched ${r}.`)}catch(a){console.error("Error enriching database:",a)}};var wb,Co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},px={exports:{}},eP=Math.floor,xh=Math.max,bo=Math.min,ip=function(a,e){return e?2*a/e:1},tP=function(a,e){var t,r,s,l,u,m;for(u=[a.length,e.length],t=l=0,m=bo(r=u[0],s=u[1]);0<=m?l<m:l>m;t=0<=m?++l:--l){if(a[t]<e[t])return-1;if(a[t]>e[t])return 1}return r-s},oc=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},nP=function(){function a(e,t,r,s){this.isjunk=e,t==null&&(t=""),r==null&&(r=""),this.autojunk=s==null||s,this.a=this.b=null,this.setSeqs(t,r)}return a.prototype.setSeqs=function(e,t){return this.setSeq1(e),this.setSeq2(t)},a.prototype.setSeq1=function(e){if(e!==this.a)return this.a=e,this.matchingBlocks=this.opcodes=null},a.prototype.setSeq2=function(e){if(e!==this.b)return this.b=e,this.matchingBlocks=this.opcodes=null,this.fullbcount=null,this._chainB()},a.prototype._chainB=function(){var e,t,r,s,l,u,m,p,y,v,w,T,A,k;for(e=this.b,this.b2j=t={},s=v=0,T=e.length;v<T;s=++v)r=e[s],(oc(t,r)?t[r]:t[r]=[]).push(s);if(u={},l=this.isjunk)for(w=0,A=(k=Object.keys(t)).length;w<A;w++)l(r=k[w])&&(u[r]=!0,delete t[r]);if(y={},m=e.length,this.autojunk&&m>=200)for(r in p=eP(m/100)+1,t)t[r].length>p&&(y[r]=!0,delete t[r]);return this.isbjunk=function(C){return oc(u,C)},this.isbpopular=function(C){return oc(y,C)}},a.prototype.findLongestMatch=function(e,t,r,s){var l,u,m,p,y,v,w,T,A,k,C,x,I,z,L,ne,oe,de,O,N,j;for(l=(ne=[this.a,this.b,this.b2j,this.isbjunk])[0],u=ne[1],m=ne[2],T=ne[3],p=(oe=[e,r,0])[0],y=oe[1],v=oe[2],k={},w=I=e;e<=t?I<t:I>t;w=e<=t?++I:--I){for(x={},z=0,L=(de=oc(m,l[w])?m[l[w]]:[]).length;z<L;z++)if(!((A=de[z])<r)){if(A>=s)break;(C=x[A]=(k[A-1]||0)+1)>v&&(p=(O=[w-C+1,A-C+1,C])[0],y=O[1],v=O[2])}k=x}for(;p>e&&y>r&&!T(u[y-1])&&l[p-1]===u[y-1];)p=(N=[p-1,y-1,v+1])[0],y=N[1],v=N[2];for(;p+v<t&&y+v<s&&!T(u[y+v])&&l[p+v]===u[y+v];)v++;for(;p>e&&y>r&&T(u[y-1])&&l[p-1]===u[y-1];)p=(j=[p-1,y-1,v+1])[0],y=j[1],v=j[2];for(;p+v<t&&y+v<s&&T(u[y+v])&&l[p+v]===u[y+v];)v++;return[p,y,v]},a.prototype.getMatchingBlocks=function(){var e,t,r,s,l,u,m,p,y,v,w,T,A,k,C,x,I,z,L,ne,oe,de,O,N,j,U;if(this.matchingBlocks)return this.matchingBlocks;for(z=[[0,k=(de=[this.a.length,this.b.length])[0],0,C=de[1]]],x=[];z.length;)t=(O=z.pop())[0],e=O[1],s=O[2],r=O[3],l=(N=L=this.findLongestMatch(t,e,s,r))[0],p=N[1],(w=N[2])&&(x.push(L),t<l&&s<p&&z.push([t,l,s,p]),l+w<e&&p+w<r&&z.push([l+w,e,p+w,r]));for(x.sort(tP),u=y=T=0,I=[],ne=0,oe=x.length;ne<oe;ne++)m=(j=x[ne])[0],v=j[1],A=j[2],u+T===m&&y+T===v?T+=A:(T&&I.push([u,y,T]),u=(U=[m,v,A])[0],y=U[1],T=U[2]);return T&&I.push([u,y,T]),I.push([k,C,0]),this.matchingBlocks=I},a.prototype.getOpcodes=function(){var e,t,r,s,l,u,m,p,y,v,w,T;if(this.opcodes)return this.opcodes;for(s=l=0,this.opcodes=t=[],p=0,y=(v=this.getMatchingBlocks()).length;p<y;p++)e=(w=v[p])[0],r=w[1],u=w[2],m="",s<e&&l<r?m="replace":s<e?m="delete":l<r&&(m="insert"),m&&t.push([m,s,e,l,r]),s=(T=[e+u,r+u])[0],l=T[1],u&&t.push(["equal",e,s,r,l]);return t},a.prototype.getGroupedOpcodes=function(e){var t,r,s,l,u,m,p,y,v,w,T,A,k,C,x;for(e==null&&(e=3),(t=this.getOpcodes()).length||(t=[["equal",0,1,0,1]]),t[0][0]==="equal"&&(v=(A=t[0])[0],l=A[1],u=A[2],m=A[3],p=A[4],t[0]=[v,xh(l,u-e),u,xh(m,p-e),p]),t[t.length-1][0]==="equal"&&(v=(k=t[t.length-1])[0],l=k[1],u=k[2],m=k[3],p=k[4],t[t.length-1]=[v,l,bo(u,l+e),m,bo(p,m+e)]),y=e+e,s=[],r=[],w=0,T=t.length;w<T;w++)v=(C=t[w])[0],l=C[1],u=C[2],m=C[3],p=C[4],v==="equal"&&u-l>y&&(r.push([v,l,bo(u,l+e),m,bo(p,m+e)]),s.push(r),r=[],l=(x=[xh(l,u-e),xh(m,p-e)])[0],m=x[1]),r.push([v,l,u,m,p]);return!r.length||r.length===1&&r[0][0]==="equal"||s.push(r),s},a.prototype.ratio=function(){var e,t,r,s;for(e=0,t=0,r=(s=this.getMatchingBlocks()).length;t<r;t++)e+=s[t][2];return ip(e,this.a.length+this.b.length)},a.prototype.quickRatio=function(){var e,t,r,s,l,u,m,p,y,v,w;if(!this.fullbcount)for(this.fullbcount=r={},u=0,p=(v=this.b).length;u<p;u++)r[t=v[u]]=(r[t]||0)+1;for(r=this.fullbcount,e={},s=0,m=0,y=(w=this.a).length;m<y;m++)t=w[m],l=oc(e,t)?e[t]:r[t]||0,e[t]=l-1,l>0&&s++;return ip(s,this.a.length+this.b.length)},a.prototype.realQuickRatio=function(){var e,t,r;return r=[this.a.length,this.b.length],ip(bo(e=r[0],t=r[1]),e+t)},a}(),gx={exports:{}};wb=gx,(function(){var a,e,t,r,s,l,u,m,p,y,v,w,T,A,k;t=Math.floor,y=Math.min,e=function(C,x){return C<x?-1:C>x?1:0},p=function(C,x,I,z,L){var ne;if(I==null&&(I=0),L==null&&(L=e),I<0)throw new Error("lo must be non-negative");for(z==null&&(z=C.length);I<z;)L(x,C[ne=t((I+z)/2)])<0?z=ne:I=ne+1;return[].splice.apply(C,[I,I-I].concat(x)),x},l=function(C,x,I){return I==null&&(I=e),C.push(x),A(C,0,C.length-1,I)},s=function(C,x){var I,z;return x==null&&(x=e),I=C.pop(),C.length?(z=C[0],C[0]=I,k(C,0,x)):z=I,z},m=function(C,x,I){var z;return I==null&&(I=e),z=C[0],C[0]=x,k(C,0,I),z},u=function(C,x,I){var z;return I==null&&(I=e),C.length&&I(C[0],x)<0&&(x=(z=[C[0],x])[0],C[0]=z[1],k(C,0,I)),x},r=function(C,x){var I,z,L,ne,oe,de;for(x==null&&(x=e),oe=[],z=0,L=(ne=(function(){de=[];for(var O=0,N=t(C.length/2);0<=N?O<N:O>N;0<=N?O++:O--)de.push(O);return de}).apply(this).reverse()).length;z<L;z++)I=ne[z],oe.push(k(C,I,x));return oe},T=function(C,x,I){var z;if(I==null&&(I=e),(z=C.indexOf(x))!==-1)return A(C,0,z,I),k(C,z,I)},v=function(C,x,I){var z,L,ne,oe,de;if(I==null&&(I=e),!(L=C.slice(0,x)).length)return L;for(r(L,I),ne=0,oe=(de=C.slice(x)).length;ne<oe;ne++)z=de[ne],u(L,z,I);return L.sort(I).reverse()},w=function(C,x,I){var z,L,ne,oe,de,O,N,j,U;if(I==null&&(I=e),10*x<=C.length){if(!(ne=C.slice(0,x).sort(I)).length)return ne;for(L=ne[ne.length-1],oe=0,O=(N=C.slice(x)).length;oe<O;oe++)I(z=N[oe],L)<0&&(p(ne,z,0,null,I),ne.pop(),L=ne[ne.length-1]);return ne}for(r(C,I),U=[],de=0,j=y(x,C.length);0<=j?de<j:de>j;0<=j?++de:--de)U.push(s(C,I));return U},A=function(C,x,I,z){var L,ne,oe;for(z==null&&(z=e),L=C[I];I>x&&z(L,ne=C[oe=I-1>>1])<0;)C[I]=ne,I=oe;return C[I]=L},k=function(C,x,I){var z,L,ne,oe,de;for(I==null&&(I=e),L=C.length,de=x,ne=C[x],z=2*x+1;z<L;)(oe=z+1)<L&&!(I(C[z],C[oe])<0)&&(z=oe),C[x]=C[z],z=2*(x=z)+1;return C[x]=ne,A(C,de,x,I)},a=function(){function C(x){this.cmp=x??e,this.nodes=[]}return C.push=l,C.pop=s,C.replace=m,C.pushpop=u,C.heapify=r,C.updateItem=T,C.nlargest=v,C.nsmallest=w,C.prototype.push=function(x){return l(this.nodes,x,this.cmp)},C.prototype.pop=function(){return s(this.nodes,this.cmp)},C.prototype.peek=function(){return this.nodes[0]},C.prototype.contains=function(x){return this.nodes.indexOf(x)!==-1},C.prototype.replace=function(x){return m(this.nodes,x,this.cmp)},C.prototype.pushpop=function(x){return u(this.nodes,x,this.cmp)},C.prototype.heapify=function(){return r(this.nodes,this.cmp)},C.prototype.updateItem=function(x){return T(this.nodes,x,this.cmp)},C.prototype.clear=function(){return this.nodes=[]},C.prototype.empty=function(){return this.nodes.length===0},C.prototype.size=function(){return this.nodes.length},C.prototype.clone=function(){var x;return(x=new C).nodes=this.nodes.slice(0),x},C.prototype.toArray=function(){return this.nodes.slice(0)},C.prototype.insert=C.prototype.push,C.prototype.top=C.prototype.peek,C.prototype.front=C.prototype.peek,C.prototype.has=C.prototype.contains,C.prototype.copy=C.prototype.clone,C}(),wb.exports=a}).call(Co);var rP=gx.exports,yx=function(e,t){for(var r=-1,s=e==null?0:e.length,l=Array(s);++r<s;)l[r]=t(e[r],r,e);return l},$r=Array.isArray,vx=typeof Co=="object"&&Co&&Co.Object===Object&&Co,aP=vx,iP=typeof self=="object"&&self&&self.Object===Object&&self,ja=aP||iP||Function("return this")(),ws=ja.Symbol,bb=ws,_x=Object.prototype,sP=_x.hasOwnProperty,oP=_x.toString,lc=bb?bb.toStringTag:void 0,lP=function(e){var t=sP.call(e,lc),r=e[lc];try{e[lc]=void 0;var s=!0}catch{}var l=oP.call(e);return s&&(t?e[lc]=r:delete e[lc]),l},cP=Object.prototype.toString,uP=lP,hP=function(e){return cP.call(e)},Eb=ws?ws.toStringTag:void 0,$c=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Eb&&Eb in Object(e)?uP(e):hP(e)},Kc=function(e){return e!=null&&typeof e=="object"},dP=$c,fP=Kc,jd=function(e){return typeof e=="symbol"||fP(e)&&dP(e)=="[object Symbol]"},mP=$r,pP=jd,gP=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yP=/^\w*$/,sy=function(e,t){if(mP(e))return!1;var r=typeof e;return!(r!="number"&&r!="symbol"&&r!="boolean"&&e!=null&&!pP(e))||yP.test(e)||!gP.test(e)||t!=null&&e in Object(t)},oy=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},vP=$c,_P=oy,Tb,wx=function(e){if(!_P(e))return!1;var t=vP(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},sp=ja["__core-js_shared__"],Sb=(Tb=/[^.]+$/.exec(sp&&sp.keys&&sp.keys.IE_PROTO||""))?"Symbol(src)_1."+Tb:"",wP=function(e){return!!Sb&&Sb in e},bP=Function.prototype.toString,bx=function(e){if(e!=null){try{return bP.call(e)}catch{}try{return e+""}catch{}}return""},EP=wx,TP=wP,SP=oy,xP=bx,CP=/^\[object .+?Constructor\]$/,AP=Function.prototype,RP=Object.prototype,kP=AP.toString,IP=RP.hasOwnProperty,NP=RegExp("^"+kP.call(IP).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),DP=function(e){return!(!SP(e)||TP(e))&&(EP(e)?NP:CP).test(xP(e))},jP=function(e,t){return e==null?void 0:e[t]},Yo=function(e,t){var r=jP(e,t);return DP(r)?r:void 0},Md=Yo(Object,"create"),xb=Md,MP=function(){this.__data__=xb?xb(null):{},this.size=0},OP=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},PP=Md,UP=Object.prototype.hasOwnProperty,VP=function(e){var t=this.__data__;if(PP){var r=t[e];return r==="__lodash_hash_undefined__"?void 0:r}return UP.call(t,e)?t[e]:void 0},LP=Md,BP=Object.prototype.hasOwnProperty,zP=Md,qP=MP,FP=OP,HP=VP,GP=function(e){var t=this.__data__;return LP?t[e]!==void 0:BP.call(t,e)},$P=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=zP&&t===void 0?"__lodash_hash_undefined__":t,this};function Eo(a){var e=-1,t=a==null?0:a.length;for(this.clear();++e<t;){var r=a[e];this.set(r[0],r[1])}}Eo.prototype.clear=qP,Eo.prototype.delete=FP,Eo.prototype.get=HP,Eo.prototype.has=GP,Eo.prototype.set=$P;var KP=Eo,QP=function(){this.__data__=[],this.size=0},Ex=function(e,t){return e===t||e!=e&&t!=t},YP=Ex,Od=function(e,t){for(var r=e.length;r--;)if(YP(e[r][0],t))return r;return-1},WP=Od,XP=Array.prototype.splice,ZP=Od,JP=Od,eU=Od,tU=QP,nU=function(e){var t=this.__data__,r=WP(t,e);return!(r<0)&&(r==t.length-1?t.pop():XP.call(t,r,1),--this.size,!0)},rU=function(e){var t=this.__data__,r=ZP(t,e);return r<0?void 0:t[r][1]},aU=function(e){return JP(this.__data__,e)>-1},iU=function(e,t){var r=this.__data__,s=eU(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this};function To(a){var e=-1,t=a==null?0:a.length;for(this.clear();++e<t;){var r=a[e];this.set(r[0],r[1])}}To.prototype.clear=tU,To.prototype.delete=nU,To.prototype.get=rU,To.prototype.has=aU,To.prototype.set=iU;var Pd=To,ly=Yo(ja,"Map"),Cb=KP,sU=Pd,oU=ly,lU=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},Ud=function(e,t){var r=e.__data__;return lU(t)?r[typeof t=="string"?"string":"hash"]:r.map},cU=Ud,uU=Ud,hU=Ud,dU=Ud,fU=function(){this.size=0,this.__data__={hash:new Cb,map:new(oU||sU),string:new Cb}},mU=function(e){var t=cU(this,e).delete(e);return this.size-=t?1:0,t},pU=function(e){return uU(this,e).get(e)},gU=function(e){return hU(this,e).has(e)},yU=function(e,t){var r=dU(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this};function So(a){var e=-1,t=a==null?0:a.length;for(this.clear();++e<t;){var r=a[e];this.set(r[0],r[1])}}So.prototype.clear=fU,So.prototype.delete=mU,So.prototype.get=pU,So.prototype.has=gU,So.prototype.set=yU;var cy=So,Tx=cy;function uy(a,e){if(typeof a!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var t=function(){var r=arguments,s=e?e.apply(this,r):r[0],l=t.cache;if(l.has(s))return l.get(s);var u=a.apply(this,r);return t.cache=l.set(s,u)||l,u};return t.cache=new(uy.Cache||Tx),t}uy.Cache=Tx;var vU=uy,_U=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wU=/\\(\\)?/g,bU=function(e){var t=vU(e,function(s){return r.size===500&&r.clear(),s}),r=t.cache;return t}(function(a){var e=[];return a.charCodeAt(0)===46&&e.push(""),a.replace(_U,function(t,r,s,l){e.push(s?l.replace(wU,"$1"):r||t)}),e}),EU=yx,TU=$r,SU=jd,Ab=ws?ws.prototype:void 0,Rb=Ab?Ab.toString:void 0,xU=function a(e){if(typeof e=="string")return e;if(TU(e))return EU(e,a)+"";if(SU(e))return Rb?Rb.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},CU=xU,AU=$r,RU=sy,kU=bU,IU=function(e){return e==null?"":CU(e)},Sx=function(e,t){return AU(e)?e:RU(e,t)?[e]:kU(IU(e))},NU=jd,Vd=function(e){if(typeof e=="string"||NU(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},DU=Sx,jU=Vd,hy=function(e,t){for(var r=0,s=(t=DU(t,e)).length;e!=null&&r<s;)e=e[jU(t[r++])];return r&&r==s?e:void 0},MU=Pd,OU=Pd,PU=ly,UU=cy,VU=Pd,LU=function(){this.__data__=new MU,this.size=0},BU=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},zU=function(e){return this.__data__.get(e)},qU=function(e){return this.__data__.has(e)},FU=function(e,t){var r=this.__data__;if(r instanceof OU){var s=r.__data__;if(!PU||s.length<199)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new UU(s)}return r.set(e,t),this.size=r.size,this};function xo(a){var e=this.__data__=new VU(a);this.size=e.size}xo.prototype.clear=LU,xo.prototype.delete=BU,xo.prototype.get=zU,xo.prototype.has=qU,xo.prototype.set=FU;var xx=xo,HU=cy,GU=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},$U=function(e){return this.__data__.has(e)};function Lh(a){var e=-1,t=a==null?0:a.length;for(this.__data__=new HU;++e<t;)this.add(a[e])}Lh.prototype.add=Lh.prototype.push=GU,Lh.prototype.has=$U;var KU=Lh,QU=function(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(t(e[r],r,e))return!0;return!1},YU=function(e,t){return e.has(t)},Cx=function(e,t,r,s,l,u){var m=1&r,p=e.length,y=t.length;if(p!=y&&!(m&&y>p))return!1;var v=u.get(e),w=u.get(t);if(v&&w)return v==t&&w==e;var T=-1,A=!0,k=2&r?new KU:void 0;for(u.set(e,t),u.set(t,e);++T<p;){var C=e[T],x=t[T];if(s)var I=m?s(x,C,T,t,e,u):s(C,x,T,e,t,u);if(I!==void 0){if(I)continue;A=!1;break}if(k){if(!QU(t,function(z,L){if(!YU(k,L)&&(C===z||l(C,z,r,s,u)))return k.push(L)})){A=!1;break}}else if(C!==x&&!l(C,x,r,s,u)){A=!1;break}}return u.delete(e),u.delete(t),A},kb=ja.Uint8Array,WU=Ex,XU=Cx,ZU=function(e){var t=-1,r=Array(e.size);return e.forEach(function(s,l){r[++t]=[l,s]}),r},JU=function(e){var t=-1,r=Array(e.size);return e.forEach(function(s){r[++t]=s}),r},Ib=ws?ws.prototype:void 0,op=Ib?Ib.valueOf:void 0,e3=function(e,t,r,s,l,u,m){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new kb(e),new kb(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return WU(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=ZU;case"[object Set]":var y=1&s;if(p||(p=JU),e.size!=t.size&&!y)return!1;var v=m.get(e);if(v)return v==t;s|=2,m.set(e,t);var w=XU(p(e),p(t),s,l,u,m);return m.delete(e),w;case"[object Symbol]":if(op)return op.call(e)==op.call(t)}return!1},t3=function(e,t){for(var r=-1,s=t.length,l=e.length;++r<s;)e[l+r]=t[r];return e},n3=$r,r3=function(e,t,r){var s=t(e);return n3(e)?s:t3(s,r(e))},a3=function(e,t){for(var r=-1,s=e==null?0:e.length,l=0,u=[];++r<s;){var m=e[r];t(m,r,e)&&(u[l++]=m)}return u},i3=function(){return[]},s3=Object.prototype.propertyIsEnumerable,Nb=Object.getOwnPropertySymbols,o3=Nb?function(a){return a==null?[]:(a=Object(a),a3(Nb(a),function(e){return s3.call(a,e)}))}:i3,l3=function(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s},c3=$c,u3=Kc,Db=function(e){return u3(e)&&c3(e)=="[object Arguments]"},h3=Kc,Ax=Object.prototype,d3=Ax.hasOwnProperty,f3=Ax.propertyIsEnumerable,Rx=Db(function(){return arguments}())?Db:function(a){return h3(a)&&d3.call(a,"callee")&&!f3.call(a,"callee")},sd={exports:{}},m3=function(){return!1};(function(a,e){var t=ja,r=m3,s=e&&!e.nodeType&&e,l=s&&a&&!a.nodeType&&a,u=l&&l.exports===s?t.Buffer:void 0,m=(u?u.isBuffer:void 0)||r;a.exports=m})(sd,sd.exports);var p3=/^(?:0|[1-9]\d*)$/,kx=function(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&(r=="number"||r!="symbol"&&p3.test(e))&&e>-1&&e%1==0&&e<t},dy=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},g3=$c,y3=dy,v3=Kc,_t={};_t["[object Float32Array]"]=_t["[object Float64Array]"]=_t["[object Int8Array]"]=_t["[object Int16Array]"]=_t["[object Int32Array]"]=_t["[object Uint8Array]"]=_t["[object Uint8ClampedArray]"]=_t["[object Uint16Array]"]=_t["[object Uint32Array]"]=!0,_t["[object Arguments]"]=_t["[object Array]"]=_t["[object ArrayBuffer]"]=_t["[object Boolean]"]=_t["[object DataView]"]=_t["[object Date]"]=_t["[object Error]"]=_t["[object Function]"]=_t["[object Map]"]=_t["[object Number]"]=_t["[object Object]"]=_t["[object RegExp]"]=_t["[object Set]"]=_t["[object String]"]=_t["[object WeakMap]"]=!1;var _3=function(e){return v3(e)&&y3(e.length)&&!!_t[g3(e)]},Ix=function(e){return function(t){return e(t)}},zp={exports:{}};(function(a,e){var t=vx,r=e&&!e.nodeType&&e,s=r&&a&&!a.nodeType&&a,l=s&&s.exports===r&&t.process,u=function(){try{var m=s&&s.require&&s.require("util").types;return m||l&&l.binding&&l.binding("util")}catch{}}();a.exports=u})(zp,zp.exports);var w3=_3,b3=Ix,jb=zp.exports,Mb=jb&&jb.isTypedArray,Nx=Mb?b3(Mb):w3,E3=l3,T3=Rx,S3=$r,x3=sd.exports,C3=kx,A3=Nx,R3=Object.prototype.hasOwnProperty,k3=function(e,t){var r=S3(e),s=!r&&T3(e),l=!r&&!s&&x3(e),u=!r&&!s&&!l&&A3(e),m=r||s||l||u,p=m?E3(e.length,String):[],y=p.length;for(var v in e)!t&&!R3.call(e,v)||m&&(v=="length"||l&&(v=="offset"||v=="parent")||u&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||C3(v,y))||p.push(v);return p},I3=Object.prototype,N3=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||I3)},D3=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),j3=N3,M3=D3,O3=Object.prototype.hasOwnProperty,P3=wx,U3=dy,fy=function(e){return e!=null&&U3(e.length)&&!P3(e)},V3=k3,L3=function(e){if(!j3(e))return M3(e);var t=[];for(var r in Object(e))O3.call(e,r)&&r!="constructor"&&t.push(r);return t},B3=fy,my=function(e){return B3(e)?V3(e):L3(e)},z3=r3,q3=o3,F3=my,Ob=function(e){return z3(e,F3,q3)},H3=Object.prototype.hasOwnProperty,G3=function(e,t,r,s,l,u){var m=1&r,p=Ob(e),y=p.length;if(y!=Ob(t).length&&!m)return!1;for(var v=y;v--;){var w=p[v];if(!(m?w in t:H3.call(t,w)))return!1}var T=u.get(e),A=u.get(t);if(T&&A)return T==t&&A==e;var k=!0;u.set(e,t),u.set(t,e);for(var C=m;++v<y;){var x=e[w=p[v]],I=t[w];if(s)var z=m?s(I,x,w,t,e,u):s(x,I,w,e,t,u);if(!(z===void 0?x===I||l(x,I,r,s,u):z)){k=!1;break}C||(C=w=="constructor")}if(k&&!C){var L=e.constructor,ne=t.constructor;L==ne||!("constructor"in e)||!("constructor"in t)||typeof L=="function"&&L instanceof L&&typeof ne=="function"&&ne instanceof ne||(k=!1)}return u.delete(e),u.delete(t),k},qp=Yo(ja,"DataView"),Fp=ly,Hp=Yo(ja,"Promise"),Gp=Yo(ja,"Set"),$p=Yo(ja,"WeakMap"),Dx=$c,Wo=bx,$3=Wo(qp),K3=Wo(Fp),Q3=Wo(Hp),Y3=Wo(Gp),W3=Wo($p),ls=Dx;(qp&&ls(new qp(new ArrayBuffer(1)))!="[object DataView]"||Fp&&ls(new Fp)!="[object Map]"||Hp&&ls(Hp.resolve())!="[object Promise]"||Gp&&ls(new Gp)!="[object Set]"||$p&&ls(new $p)!="[object WeakMap]")&&(ls=function(a){var e=Dx(a),t=e=="[object Object]"?a.constructor:void 0,r=t?Wo(t):"";if(r)switch(r){case $3:return"[object DataView]";case K3:return"[object Map]";case Q3:return"[object Promise]";case Y3:return"[object Set]";case W3:return"[object WeakMap]"}return e});var lp=xx,X3=Cx,Z3=e3,J3=G3,Pb=ls,Ub=$r,Vb=sd.exports,eV=Nx,Ch="[object Object]",Lb=Object.prototype.hasOwnProperty,tV=function(e,t,r,s,l,u){var m=Ub(e),p=Ub(t),y=m?"[object Array]":Pb(e),v=p?"[object Array]":Pb(t),w=(y=y=="[object Arguments]"?Ch:y)==Ch,T=(v=v=="[object Arguments]"?Ch:v)==Ch,A=y==v;if(A&&Vb(e)){if(!Vb(t))return!1;m=!0,w=!1}if(A&&!w)return u||(u=new lp),m||eV(e)?X3(e,t,r,s,l,u):Z3(e,t,y,r,s,l,u);if(!(1&r)){var k=w&&Lb.call(e,"__wrapped__"),C=T&&Lb.call(t,"__wrapped__");if(k||C){var x=k?e.value():e,I=C?t.value():t;return u||(u=new lp),l(x,I,r,s,u)}}return!!A&&(u||(u=new lp),J3(e,t,r,s,l,u))},Bb=Kc,jx=function a(e,t,r,s,l){return e===t||(e==null||t==null||!Bb(e)&&!Bb(t)?e!=e&&t!=t:tV(e,t,r,s,a,l))},nV=xx,rV=jx,aV=oy,Mx=function(e){return e==e&&!aV(e)},iV=Mx,sV=my,Ox=function(e,t){return function(r){return r!=null&&r[e]===t&&(t!==void 0||e in Object(r))}},oV=function(e,t,r,s){var l=r.length,u=l;if(e==null)return!u;for(e=Object(e);l--;){var m=r[l];if(m[2]?m[1]!==e[m[0]]:!(m[0]in e))return!1}for(;++l<u;){var p=(m=r[l])[0],y=e[p],v=m[1];if(m[2]){if(y===void 0&&!(p in e))return!1}else{var w=new nV,T;if(!(T===void 0?rV(v,y,3,s,w):T))return!1}}return!0},lV=function(e){for(var t=sV(e),r=t.length;r--;){var s=t[r],l=e[s];t[r]=[s,l,iV(l)]}return t},cV=Ox,uV=hy,hV=Sx,dV=Rx,fV=$r,mV=kx,pV=dy,gV=Vd,yV=function(e,t){return e!=null&&t in Object(e)},vV=function(e,t,r){for(var s=-1,l=(t=hV(t,e)).length,u=!1;++s<l;){var m=gV(t[s]);if(!(u=e!=null&&r(e,m)))break;e=e[m]}return u||++s!=l?u:!!(l=e==null?0:e.length)&&pV(l)&&mV(m,l)&&(fV(e)||dV(e))},_V=jx,wV=function(e,t,r){var s=e==null?void 0:uV(e,t);return s===void 0?r:s},bV=function(e,t){return e!=null&&vV(e,t,yV)},EV=sy,TV=Mx,SV=Ox,xV=Vd,Px=function(e){return e},CV=hy,AV=function(e){return function(t){return t==null?void 0:t[e]}},RV=function(e){return function(t){return CV(t,e)}},kV=sy,IV=Vd,NV=function(e){var t=lV(e);return t.length==1&&t[0][2]?cV(t[0][0],t[0][1]):function(r){return r===e||oV(r,e,t)}},DV=function(e,t){return EV(e)&&TV(t)?SV(xV(e),t):function(r){var s=wV(r,e);return s===void 0&&s===t?bV(r,e):_V(t,s,3)}},jV=Px,MV=$r,OV=function(e){return kV(e)?AV(IV(e)):RV(e)},PV=function(e){return typeof e=="function"?e:e==null?jV:typeof e=="object"?MV(e)?DV(e[0],e[1]):NV(e):OV(e)},UV=function(e){return function(t,r,s){for(var l=-1,u=Object(t),m=s(t),p=m.length;p--;){var y=m[++l];if(r(u[y],y,u)===!1)break}return t}}(),VV=my,LV=fy,BV=function(e,t){return function(r,s){if(r==null)return r;if(!LV(r))return e(r,s);for(var l=r.length,u=-1,m=Object(r);++u<l&&s(m[u],u,m)!==!1;);return r}}(function(e,t){return e&&UV(e,t,VV)}),zV=fy,zb=jd,qV=function(e,t){if(e!==t){var r=e!==void 0,s=e===null,l=e==e,u=zb(e),m=t!==void 0,p=t===null,y=t==t,v=zb(t);if(!p&&!v&&!u&&e>t||u&&m&&y&&!p&&!v||s&&m&&y||!r&&y||!l)return 1;if(!s&&!u&&!v&&e<t||v&&r&&l&&!s&&!u||p&&r&&l||!m&&l||!y)return-1}return 0},cp=yx,FV=hy,HV=PV,GV=function(e,t){var r=-1,s=zV(e)?Array(e.length):[];return BV(e,function(l,u,m){s[++r]=t(l,u,m)}),s},$V=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e},KV=Ix,QV=function(e,t,r){for(var s=-1,l=e.criteria,u=t.criteria,m=l.length,p=r.length;++s<m;){var y=qV(l[s],u[s]);if(y)return s>=p?y:y*(r[s]=="desc"?-1:1)}return e.index-t.index},YV=Px,WV=$r,XV=function(e,t,r){t=t.length?cp(t,function(u){return WV(u)?function(m){return FV(m,u.length===1?u[0]:u)}:u}):[YV];var s=-1;t=cp(t,KV(HV));var l=GV(e,function(u,m,p){return{criteria:cp(t,function(y){return y(u)}),index:++s,value:u}});return $V(l,function(u,m){return QV(u,m,r)})},qb=$r,ZV=function(e,t,r,s){return e==null?[]:(qb(t)||(t=t==null?[]:[t]),qb(r=s?void 0:r)||(r=r==null?[]:[r]),XV(e,t,r))},Kp,va={_intersect:function(e,t){if(!e||!t||e.length===0||t.length===0)return[];if(e.length<100&&t.length<100)return e.filter(s=>t.includes(s));const r=new Set(t);return e.filter(s=>r.has(s))},_intersectWith:function(e,t,r){return e&&t&&e.length!==0&&t.length!==0?e.filter(s=>t.some(l=>r(s,l))):[]},_difference:function(e,t){if(!e)return[];if(!t||t.length===0)return e.slice();if(e.length<100&&t.length<100)return e.filter(s=>!t.includes(s));const r=new Set(t);return e.filter(s=>!r.has(s))},_differenceWith:function(e,t,r){return e?t&&t.length!==0?e.filter(s=>!t.some(l=>r(s,l))):e.slice():[]},_uniq:function(e){return e&&e.length!==0?e.length===1?e.slice():[...new Set(e)]:[]},_uniqWith:function(e,t){if(!e||e.length===0)return[];if(e.length===1)return e.slice();const r=[];e:for(let s=0;s<e.length;s++){const l=e[s];for(let u=0;u<r.length;u++)if(t(l,r[u]))continue e;r.push(l)}return r},_partialRight:function(e){const t=Array.prototype.slice.call(arguments,1);return function(){const r=Array.prototype.slice.call(arguments);return e.apply(this,r.concat(t))}},_forEach:function(e,t){if(e)if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r],r);else{const r=Object.keys(e);for(let s=0;s<r.length;s++)t(e[r[s]],r[s])}},_isArray:Array.isArray};try{Kp=typeof Intl<"u"&&Intl.Collator!==void 0?Intl.Collator("generic",{sensitivity:"base"}):null}catch{typeof console!==void 0&&console.warn("Collator could not be initialized and wouldn't be used")}var Qp,JV=function(e,t,r){var s=[],l=[],u=r&&Kp&&r.useCollator,m=1;if(r&&r.subcost&&typeof r.subcost=="number"&&(m=r.subcost),e===t)return 0;var p,y,v,w,T=Array.from(e),A=Array.from(t),k=T.length,C=A.length;if(k===0)return C;if(C===0)return k;for(var x=0,I=0;x<k;)l[x]=T[x].codePointAt(0),s[x]=++x;if(u)for(;I<C;)for(p=A[I].codePointAt(0),v=I++,y=I,x=0;x<k;x++)w=Kp.compare(String.fromCodePoint(p),String.fromCodePoint(l[x]))===0?v:v+m,v=s[x],y=s[x]=v>y?w>y?y+1:w:w>v?v+1:w;else for(;I<C;)for(p=A[I].codePointAt(0),v=I++,y=I,x=0;x<k;x++)w=p===l[x]?v:v+m,v=s[x],y=s[x]=v>y?w>y?y+1:w:w>v?v+1:w;return y};try{Qp=typeof Intl<"u"&&Intl.Collator!==void 0?Intl.Collator("generic",{sensitivity:"base"}):null}catch{typeof console!==void 0&&console.warn("Collator could not be initialized and wouldn't be used")}var Yp,Fb=function(e,t,r,s){var l=[],u=[],m=r&&Qp&&r.useCollator,p=1;if(r&&r.subcost&&typeof r.subcost=="number"&&(p=r.subcost),e===t)return 0;var y=e.length,v=t.length;if(y===0)return v;if(v===0)return y;if(r&&r.wildcards&&typeof r.wildcards=="string"&&r.wildcards.length>0){var w,T,A,k,C,x;if(r.full_process===!1&&r.processed!==!0){T=(w=r.wildcards[0]).charCodeAt(0);var I="["+function(oe){return oe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(r.wildcards)+"]";if((e=e.replace(new RegExp(I,"g"),w))===(t=t.replace(new RegExp(I,"g"),w)))return 0}else T=(w=r.wildcards[0].toLowerCase()).charCodeAt(0);for(var z=0,L=0;z<y;)u[z]=e.charCodeAt(z),l[z]=++z;if(m)for(;L<v;)for(A=t.charCodeAt(L),C=L++,k=L,z=0;z<y;z++)x=Qp.compare(String.fromCharCode(A),String.fromCharCode(u[z]))===0||A===T||u[z]===T?C:C+p,C=l[z],k=l[z]=C>k?x>k?k+1:x:x>C?C+1:x;else for(;L<v;)for(A=t.charCodeAt(L),C=L++,k=L,z=0;z<y;z++)x=A===u[z]||A===T||u[z]===T?C:C+p,C=l[z],k=l[z]=C>k?x>k?k+1:x:x>C?C+1:x;return k}return s(e,t,r)};try{Yp=typeof Intl<"u"&&Intl.Collator!==void 0?Intl.Collator("generic",{sensitivity:"base"}):null}catch{typeof console!==void 0&&console.warn("Collator could not be initialized and wouldn't be used")}var Hb=function(e,t,r){var s=[],l=[],u=r&&Yp&&r.useCollator,m=1;if(r&&r.subcost&&typeof r.subcost=="number"&&(m=r.subcost),e===t)return 0;var p,y,v,w,T=e.length,A=t.length;if(T===0)return A;if(A===0)return T;for(var k=0,C=0;k<T;)l[k]=e.charCodeAt(k),s[k]=++k;if(u)for(;C<A;)for(p=t.charCodeAt(C),v=C++,y=C,k=0;k<T;k++)w=Yp.compare(String.fromCharCode(p),String.fromCharCode(l[k]))===0?v:v+m,v=s[k],y=s[k]=v>y?w>y?y+1:w:w>v?v+1:w;else for(;C<A;)for(p=t.charCodeAt(C),v=C++,y=C,k=0;k<T;k++)w=p===l[k]?v:v+m,v=s[k],y=s[k]=v>y?w>y?y+1:w:w>v?v+1:w;return y};(function(a,e){if(!a.setImmediate){var t,r=1,s={},l=!1,u=a.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(a);m=m&&m.setTimeout?m:a,{}.toString.call(a.process)==="[object process]"?function(){t=function(w){process.nextTick(function(){y(w)})}}():function(){if(a.postMessage&&!a.importScripts){var w=!0,T=a.onmessage;return a.onmessage=function(){w=!1},a.postMessage("","*"),a.onmessage=T,w}}()?function(){var w="setImmediate$"+Math.random()+"$",T=function(A){A.source===a&&typeof A.data=="string"&&A.data.indexOf(w)===0&&y(+A.data.slice(w.length))};a.addEventListener?a.addEventListener("message",T,!1):a.attachEvent("onmessage",T),t=function(A){a.postMessage(w+A,"*")}}():a.MessageChannel?function(){var w=new MessageChannel;w.port1.onmessage=function(T){y(T.data)},t=function(T){w.port2.postMessage(T)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var w=u.documentElement;t=function(T){var A=u.createElement("script");A.onreadystatechange=function(){y(T),A.onreadystatechange=null,w.removeChild(A),A=null},w.appendChild(A)}}():function(){t=function(w){setTimeout(y,0,w)}}(),m.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var T=new Array(arguments.length-1),A=0;A<T.length;A++)T[A]=arguments[A+1];var k={callback:w,args:T};return s[r]=k,t(r),r++},m.clearImmediate=p}function p(v){delete s[v]}function y(v){if(l)setTimeout(y,0,v);else{var w=s[v];if(w){l=!0;try{(function(A){var k=A.callback,C=A.args;switch(C.length){case 0:k();break;case 1:k(C[0]);break;case 2:k(C[0],C[1]);break;case 3:k(C[0],C[1],C[2]);break;default:k.apply(void 0,C)}})(w)}finally{p(v),l=!1}}}}})(typeof self>"u"?Co:self);var Gb={exports:{}};(function(a){a.exports=function(e,t,r,s){return(a={}).dedupe=function(u,m){var p,y=e(m);if(!t(u)&&typeof u!="object")throw new Error("contains_dupes must be an array or object");if(Object.keys(u).length===0)return typeof console!==void 0&&console.warn("contains_dupes is empty"),[];y.limit&&(typeof console!==void 0&&console.warn("options.limit will be ignored in dedupe"),y.limit=0),y.cutoff&&typeof y.cutoff=="number"||(typeof console!==void 0&&console.warn("Using default cutoff of 70"),y.cutoff=70),y.scorer||(y.scorer=r,typeof console!==void 0&&console.log("Using default scorer 'ratio' for dedupe")),p=y.processor&&typeof y.processor=="function"?y.processor:function(x){return x};var v={};for(var w in u){var T=p(u[w]);if(typeof T!="string"&&!(T instanceof String))throw new Error("Each processed item in dedupe must be a string.");var A=s(T,u,y);y.returnObjects?(A.length===1||(A=A.sort(function(x,I){var z=p(x.choice),L=p(I.choice),ne=z.length,oe=L.length;return ne===oe?z<L?-1:1:oe-ne})),y.keepmap?v[p(A[0].choice)]={item:A[0].choice,key:A[0].key,matches:A}:v[p(A[0].choice)]={item:A[0].choice,key:A[0].key}):(A.length===1||(A=A.sort(function(x,I){var z=p(x[0]),L=p(I[0]),ne=z.length,oe=L.length;return ne===oe?z<L?-1:1:oe-ne})),y.keepmap?v[p(A[0][0])]=[A[0][0],A[0][2],A]:v[p(A[0][0])]=[A[0][0],A[0][2]])}var k=[];for(var C in v)k.push(v[C]);return k},a}})(Gb),function(){var a=nP,e=rP,t=ZV,r=va._intersect,s=va._intersectWith,l=va._difference,u=va._differenceWith,m=va._partialRight,p=va._forEach,y=va._isArray,v=JV,w=Fb,T=Hb,A=function(H,D,K){var Z={},V=Fb,ve=Hb;function te(ge){return ge.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ae(ge){return(typeof ge=="string"||ge instanceof String)&&ge.length>0}Z.validate=Ae,Z.process_and_sort=function(pe){return Ae(pe)?pe.match(/\S+/g).sort().join(" ").trim():""},Z.tokenize=function(pe,xe){if(xe&&xe.wildcards&&D&&K){var Oe=K(V,xe,ve);return D(pe.match(/\S+/g),function(We,ye){return Oe(We,ye)===0})}return H(pe.match(/\S+/g))};const Fe=/[^\p{L}\p{N}]/gu;return Z.full_process=function(pe,xe){if(!(pe instanceof String)&&typeof pe!="string")return"";var Oe;if(xe&&typeof xe=="object"&&xe.wildcards&&typeof xe.wildcards=="string"&&xe.wildcards.length>0){var We=xe.wildcards.toLowerCase();if(pe=pe.toLowerCase(),xe.force_ascii){var ye="[^\0 -|"+te(We)+"]";pe=pe.replace(new RegExp(ye,"g"),"");var Me="["+te(We)+"]",St=We[0];pe=pe.replace(new RegExp(Me,"g"),St);var Xe="[^A-Za-z0-9"+te(We)+"]";Oe=(pe=(pe=pe.replace(new RegExp(Xe,"g")," ")).replace(/_/g," ")).trim()}else{var Te="[^\\p{L}\\p{N}|"+te(We)+"]";pe=pe.replace(new RegExp(Te,"gu")," "),Me="["+te(We)+"]",St=We[0],Oe=(pe=pe.replace(new RegExp(Me,"g"),St)).trim()}}else Oe=xe&&(xe.force_ascii||xe===!0)?(pe=pe.replace(/[^\x00-\x7F]/g,"")).replace(/\W|_/g," ").toLowerCase().trim():pe.replace(Fe," ").toLowerCase().trim();return xe&&xe.collapseWhitespace&&(Oe=Oe.replace(/\s+/g," ")),Oe},Z.clone_and_set_option_defaults=function(ge){if(ge&&ge.isAClone)return ge;var pe={isAClone:!0};if(ge){var xe,Oe=Object.keys(ge);for(xe=0;xe<Oe.length;xe++)pe[Oe[xe]]=ge[Oe[xe]]}return pe.full_process!==!1&&(pe.full_process=!0),pe.force_ascii!==!0&&(pe.force_ascii=!1),pe.normalize!==!1&&pe.astral===!0&&(pe.normalize=!0),pe.collapseWhitespace!==!1&&(pe.collapseWhitespace=!0),pe},Z.isCustomFunc=function(ge){return typeof ge!="function"||ge.name!=="token_set_ratio"&&ge.name!=="partial_token_set_ratio"&&ge.name!=="token_sort_ratio"&&ge.name!=="partial_token_sort_ratio"&&ge.name!=="QRatio"&&ge.name!=="WRatio"&&ge.name!=="distance"&&ge.name!=="partial_ratio"},Z}(va._uniq,va._uniqWith,m),k=A.validate,C=A.process_and_sort,x=A.tokenize,I=A.full_process,z=A.clone_and_set_option_defaults,L=A.isCustomFunc,ne=Gb.exports(z,y,oe,U).dedupe;function oe(H,D,K){var Z=z(K);return H=Z.normalize?H.normalize():H,D=Z.normalize?D.normalize():D,H=Z.full_process?I(H,Z):H,D=Z.full_process?I(D,Z):D,k(H)&&k(D)?be(H,D,Z):0}function de(H,D,K){var Z=z(K);return H=Z.normalize?H.normalize():H,D=Z.normalize?D.normalize():D,H=Z.full_process?I(H,Z):H,D=Z.full_process?I(D,Z):D,k(H)&&k(D)?me(H,D,Z):0}function O(H,D,K){var Z=z(K);return H=Z.normalize?H.normalize():H,D=Z.normalize?D.normalize():D,H=Z.full_process?I(H,Z):H,D=Z.full_process?I(D,Z):D,k(H)&&k(D)?(Z.partial=!0,me(H,D,Z)):0}function N(H,D,K){var Z=z(K);return H=Z.normalize?H.normalize():H,D=Z.normalize?D.normalize():D,H=Z.full_process?I(H,Z):H,D=Z.full_process?I(D,Z):D,k(H)&&k(D)?(Z.proc_sorted||(H=C(H),D=C(D)),be(H,D,Z)):0}function j(H,D,K){var Z=z(K);return H=Z.normalize?H.normalize():H,D=Z.normalize?D.normalize():D,H=Z.full_process?I(H,Z):H,D=Z.full_process?I(D,Z):D,k(H)&&k(D)?(Z.partial=!0,Z.proc_sorted||(H=C(H),D=C(D)),Be(H,D,Z)):0}function U(H,D,K){var Z,V=z(K);if(y(D))Z=D.length;else{if(!(D instanceof Object))throw new Error("Invalid choices");Z=Object.keys(D).length}if(!D||Z===0)return typeof console!==void 0&&console.warn("No choices"),[];if(V.processor&&typeof V.processor!="function")throw new Error("Invalid Processor");if(V.processor||(V.processor=function(Te){return Te}),V.scorer&&typeof V.scorer!="function")throw new Error("Invalid Scorer");V.scorer||(V.scorer=oe);var ve=L(V.scorer);V.cutoff&&typeof V.cutoff=="number"||(V.cutoff=-1);var te=function(Te,nt){return Te};V.full_process&&(te=I,ve||(V.processed=!0));var Ae=!1;ve||(V.astral&&V.normalize&&(V.normalize=!1,String.prototype.normalize?(Ae=!0,H=H.normalize()):typeof console!==void 0&&console.warn("Normalization not supported in your environment")),H=te(H,V),V.full_process=!1,H.length===0&&typeof console!==void 0&&console.warn("Processed query is empty string"));var Fe,ge,pe,xe,Oe=[],We=!1,ye=!1,Me=!1;if(V.scorer.name==="token_sort_ratio"||V.scorer.name==="partial_token_sort_ratio"){var St=C(H);ye=!0}else if(V.scorer.name==="token_set_ratio"||V.scorer.name==="partial_token_set_ratio"){var Xe=x(H,V);Me=!0}return V.returnObjects?(pe=function(Te,nt){return Te.score-nt.score},xe=function(Te,nt){return nt.score-Te.score}):(pe=function(Te,nt){return Te[1]-nt[1]},xe=function(Te,nt){return nt[1]-Te[1]}),p(D,function(Te,nt){V.tokens=void 0,V.proc_sorted=!1,ye?(V.proc_sorted=!0,Te&&Te.proc_sorted?ge=Te.proc_sorted:(ge=te(Ae?V.processor(Te).normalize():V.processor(Te),V),ge=C(ge)),Fe=V.scorer(St,ge,V)):Me?(ge="x",Te&&Te.tokens?(V.tokens=[Xe,Te.tokens],V.trySimple&&(ge=te(V.processor(Te),V))):(ge=te(Ae?V.processor(Te).normalize():V.processor(Te),V),V.tokens=[Xe,x(ge,V)]),Fe=V.scorer(H,ge,V)):ve?(ge=V.processor(Te),Fe=V.scorer(H,ge,V)):(typeof(ge=te(Ae?V.processor(Te).normalize():V.processor(Te),V))=="string"&&ge.length!==0||(We=!0),Fe=V.scorer(H,ge,V)),Fe>V.cutoff&&(V.returnObjects?Oe.push({choice:Te,score:Fe,key:nt}):Oe.push([Te,Fe,nt]))}),We&&typeof console!==void 0&&console.log("One or more choices were empty. (post-processing if applied)"),V.limit&&typeof V.limit=="number"&&V.limit>0&&V.limit<Z&&!V.unsorted?Oe=e.nlargest(Oe,V.limit,pe):V.unsorted||(Oe=Oe.sort(xe)),Oe}function F(H,D,K,Z){var V,ve,te=z(K);typeof K.abortController=="object"&&(V=K.abortController),typeof K.cancelToken=="object"&&(ve=K.cancelToken);var Ae=256;typeof te.asyncLoopOffset=="number"&&(Ae=te.asyncLoopOffset<1?1:te.asyncLoopOffset);var Fe,ge=!1;if(D&&D.length&&y(D))Fe=D.length,ge=!0;else{if(!(D instanceof Object))return void Z(new Error("Invalid choices"));Fe=Object.keys(D).length}if(!D||Fe===0)return typeof console!==void 0&&console.warn("No choices"),void Z(null,[]);if(te.processor&&typeof te.processor!="function")Z(new Error("Invalid Processor"));else if(te.processor||(te.processor=function(Ie){return Ie}),te.scorer&&typeof te.scorer!="function")Z(new Error("Invalid Scorer"));else{te.scorer||(te.scorer=oe);var pe=L(te.scorer);te.cutoff&&typeof te.cutoff=="number"||(te.cutoff=-1);var xe=function(Ie,rt){return Ie};te.full_process&&(xe=I,pe||(te.processed=!0));var Oe=!1;pe||(te.astral&&te.normalize&&(te.normalize=!1,String.prototype.normalize?(Oe=!0,H=H.normalize()):typeof console!==void 0&&console.warn("Normalization not supported in your environment")),H=xe(H,te),te.full_process=!1,H.length===0&&typeof console!==void 0&&console.warn("Processed query is empty string"));var We,ye,Me,St,Xe,Te=[],nt=!1,pn=!1,En=!1;if(te.scorer.name==="token_sort_ratio"||te.scorer.name==="partial_token_sort_ratio"){var Gt=C(H);pn=!0}else if(te.scorer.name==="token_set_ratio"||te.scorer.name==="partial_token_set_ratio"){var xt=x(H,te);En=!0}te.returnObjects?(St=function(Ie,rt){return Ie.score-rt.score},Xe=function(Ie,rt){return rt.score-Ie.score}):(St=function(Ie,rt){return Ie[1]-rt[1]},Xe=function(Ie,rt){return rt[1]-Ie[1]});var gt=Object.keys(D);ge?Ke(0):Ke(gt[0],0)}function Ke(Ie,rt){(ge||D.hasOwnProperty(Ie))&&(te.tokens=void 0,te.proc_sorted=!1,pn?(te.proc_sorted=!0,D[Ie]&&D[Ie].proc_sorted?ye=D[Ie].proc_sorted:(ye=xe(Oe?te.processor(D[Ie]).normalize():te.processor(D[Ie]),te),ye=C(ye)),Me=te.scorer(Gt,ye,te)):En?(ye="x",D[Ie]&&D[Ie].tokens?(te.tokens=[xt,D[Ie].tokens],te.trySimple&&(ye=xe(te.processor(D[Ie]),te))):(ye=xe(Oe?te.processor(D[Ie]).normalize():te.processor(D[Ie]),te),te.tokens=[xt,x(ye,te)]),Me=te.scorer(H,ye,te)):pe?(ye=te.processor(D[Ie]),Me=te.scorer(H,ye,te)):(typeof(ye=xe(Oe?te.processor(D[Ie]).normalize():te.processor(D[Ie]),te))=="string"&&ye.length!==0||(nt=!0),Me=te.scorer(H,ye,te)),We=ge?parseInt(Ie):Ie,Me>te.cutoff&&(te.returnObjects?Te.push({choice:D[Ie],score:Me,key:We}):Te.push([D[Ie],Me,We]))),V&&V.signal.aborted===!0?Z(new Error("aborted")):ve&&ve.canceled===!0?Z(new Error("canceled")):ge&&Ie<D.length-1?Ie%Ae==0?setImmediate(function(){Ke(Ie+1)}):Ke(Ie+1):rt<gt.length-1?rt%Ae==0?setImmediate(function(){Ke(gt[rt+1],rt+1)}):Ke(gt[rt+1],rt+1):(nt&&typeof console!==void 0&&console.log("One or more choices were empty. (post-processing if applied)"),te.limit&&typeof te.limit=="number"&&te.limit>0&&te.limit<Fe&&!te.unsorted?Te=e.nlargest(Te,te.limit,St):te.unsorted||(Te=Te.sort(Xe)),Z(null,Te))}}var $="%*SuperUniqueWildcardKey*%";function P(H,D){var K=H;if(D.astral)var Z=Array.from(K);else Z=K.split("");var V={};if(D.wildcards)for(var ve=0;ve<Z.length;ve++){var te=Z[ve];D.wildcards.indexOf(te)>-1?V[$]?V[$]+=1:V[$]=1:V[te]?V[te]+=1:V[te]=1}else for(ve=0;ve<Z.length;ve++)V[te=Z[ve]]?V[te]+=1:V[te]=1;return V}function Tt(H,D,K){for(var Z=D,V=H.reduce(function(ge,pe){return ge[pe]=P(pe,K),ge},{}),ve=Z.reduce(function(ge,pe){return ge[pe]=P(pe,K),ge},{}),te=[],Ae=0;Z.length&&Ae<H.length;){var Fe=t(Z,function(ge){return pe=V[H[Ae]],xe=ve[ge],Oe=Object.keys(pe),We=Object.keys(xe),ye=r(Oe,We).map(function(Xe){return pe[Xe]*xe[Xe]}).reduce(function(Xe,Te){return Xe+Te},0),Me=Oe.map(function(Xe){return Math.pow(pe[Xe],2)}).reduce(function(Xe,Te){return Xe+Te},0),St=We.map(function(Xe){return Math.pow(xe[Xe],2)}).reduce(function(Xe,Te){return Xe+Te},0),ye/(Math.sqrt(Me)*Math.sqrt(St));var pe,xe,Oe,We,ye,Me,St},"desc")[0];te.push(Fe),Ae++,Z=Z.filter(function(ge){return ge!==Fe})}return te.concat(Z)}function ht(H,D,K,Z){var V=D,ve=Z;return(D.length>Z.length||D.length===Z.length&&(H.length>K.length||[H,K].sort()[0]===K))&&(V=Z,ve=D),[V,ve]}function ae(H,D,K){if(K.tokens)Z=K.tokens[0],V=K.tokens[1];else var Z=x(H,K),V=x(D,K);var ve=ht(H,Z.sort(),D,V.sort()),te=ve[0];const Ae=Tt(te,ve[1],K);return K.partial?Be(te.join(" "),Ae.join(" "),K):be(te.join(" "),Ae.join(" "),K)}function me(H,D,K){if(K.tokens)Z=K.tokens[0],V=K.tokens[1];else var Z=x(H,K),V=x(D,K);if(K.wildcards)var ve=m(w,K,T),te=function(Gt,xt){return ve(Gt,xt)===0},Ae=s(Z,V,te),Fe=u(Z,V,te),ge=u(V,Z,te);else Ae=r(Z,V),Fe=l(Z,V),ge=l(V,Z);var pe=Ae.sort().join(" "),xe=Fe.sort(),Oe=ge.sort();if(K.sortBySimilarity)var We=ht(H,xe,D,Oe),ye=We[0],Me=We[1],St=ye.join(" "),Xe=Tt(ye,Me,K).join(" ");else St=xe.join(" "),Xe=Oe.join(" ");var Te=pe+" "+St,nt=pe+" "+Xe;pe=pe.trim(),Te=Te.trim(),nt=nt.trim();var pn=be;if(K.partial&&(pn=Be,pe.length>0))return 100;var En=[pn(pe,Te,K),pn(pe,nt,K),pn(Te,nt,K)];return K.trySimple&&En.push(pn(H,D,K)),Math.max.apply(null,En)}function be(H,D,K){if(!k(H)||!k(D))return 0;if(K.ratio_alg&&K.ratio_alg==="difflib"){var Z=new a(null,H,D).ratio();return Math.round(100*Z)}var V,ve;return K.subcost===void 0&&(K.subcost=2),K.astral?(V=v(H,D,K),ve=Array.from(H).length+Array.from(D).length):K.wildcards?(V=w(H,D,K,T),ve=H.length+D.length):(V=T(H,D,K),ve=H.length+D.length),Math.round((ve-V)/ve*100)}function Be(H,D,K){if(!k(H)||!k(D))return 0;if(H.length<=D.length)var Z=H,V=D;else Z=D,V=H;for(var ve=new a(null,Z,V).getMatchingBlocks(),te=[],Ae=0;Ae<ve.length;Ae++){var Fe=ve[Ae][1]-ve[Ae][0]>0?ve[Ae][1]-ve[Ae][0]:0,ge=Fe+Z.length,pe=be(Z,V.substring(Fe,ge),K);if(pe>99.5)return 100;te.push(pe)}return Math.max.apply(null,te)}Object.keys||(Object.keys=function(){var H=Object.prototype.hasOwnProperty,D=!{toString:null}.propertyIsEnumerable("toString"),K=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Z=K.length;return function(V){if(typeof V!="object"&&(typeof V!="function"||V===null))throw new TypeError("Object.keys called on non-object");var ve,te,Ae=[];for(ve in V)H.call(V,ve)&&Ae.push(ve);if(D)for(te=0;te<Z;te++)H.call(V,K[te])&&Ae.push(K[te]);return Ae}}());var B=void 0;typeof Promise<"u"&&(B=function(H,D,K){return new Promise(function(Z,V){F(H,D,K,function(ve,te){ve?V(ve):Z(te)})})});var he={distance:function(D,K,Z){var V=z(Z);return D=V.normalize?D.normalize():D,K=V.normalize?K.normalize():K,D=V.full_process?I(D,V):D,K=V.full_process?I(K,V):K,V.subcost===void 0&&(V.subcost=1),V.astral?v(D,K,V):w(D,K,V,T)},ratio:oe,partial_ratio:function(D,K,Z){var V=z(Z);return D=V.normalize?D.normalize():D,K=V.normalize?K.normalize():K,D=V.full_process?I(D,V):D,K=V.full_process?I(K,V):K,k(D)&&k(K)?Be(D,K,V):0},token_set_ratio:de,token_sort_ratio:N,partial_token_set_ratio:O,partial_token_sort_ratio:j,token_similarity_sort_ratio:function(D,K,Z){var V=z(Z);return D=V.normalize?D.normalize():D,K=V.normalize?K.normalize():K,D=V.full_process?I(D,V):D,K=V.full_process?I(K,V):K,k(D)&&k(K)?ae(D,K,V):0},partial_token_similarity_sort_ratio:function(D,K,Z){var V=z(Z);return D=V.normalize?D.normalize():D,K=V.normalize?K.normalize():K,D=V.full_process?I(D,V):D,K=V.full_process?I(K,V):K,k(D)&&k(K)?(V.partial=!0,ae(D,K,V)):0},WRatio:function(D,K,Z){var V=z(Z);if(D=V.normalize?D.normalize():D,K=V.normalize?K.normalize():K,D=V.full_process?I(D,V):D,K=V.full_process?I(K,V):K,V.full_process=!1,!k(D)||!k(K))return 0;var ve=!0,te=.95,Ae=.9,Fe=be(D,K,V),ge=Math.max(D.length,K.length)/Math.min(D.length,K.length);if(ge<1.5&&(ve=!1),ge>8&&(Ae=.6),ve){var pe=Be(D,K,V)*Ae,xe=j(D,K,V)*te*Ae,Oe=O(D,K,V)*te*Ae;return Math.round(Math.max(Fe,pe,xe,Oe))}var We=N(D,K,V)*te,ye=de(D,K,V)*te;return Math.round(Math.max(Fe,We,ye))},full_process:I,extract:U,extractAsync:F,extractAsPromised:B,process_and_sort:C,unique_tokens:x,dedupe:ne};px.exports=he}();var mn=px.exports;mn.distance;const $b=mn.ratio;mn.partial_ratio;mn.token_set_ratio;mn.token_sort_ratio;mn.partial_token_set_ratio;mn.partial_token_sort_ratio;mn.token_similarity_sort_ratio;mn.partial_token_similarity_sort_ratio;mn.WRatio;mn.full_process;mn.extract;mn.extractAsync;mn.extractAsPromised;mn.process_and_sort;mn.unique_tokens;mn.dedupe;const eL=(a,e)=>{let t=0;const r=$b((a.maker||"").toLowerCase(),(e.brands||"").toLowerCase());t+=r/100*40;const s=$b((a.name||"").toLowerCase(),(e.product_name||"").toLowerCase());if(t+=s/100*30,a.cacaoPercentage&&e.cacao_percentage){const l=Math.abs(parseFloat(a.cacaoPercentage)-parseFloat(e.cacao_percentage));l<=2?t+=20:l<=5&&(t+=10)}if(a.type&&e.categories){const l=e.categories.toLowerCase(),u=a.type.toLowerCase();(u.includes("dark")&&l.includes("dark chocolate")||u.includes("milk")&&l.includes("milk chocolate")||u.includes("white")&&l.includes("white chocolate"))&&(t+=10)}return t},tL=async a=>{try{const e=[];a.maker&&e.push(a.maker),a.name&&e.push(a.name),a.type&&e.push(a.type+" chocolate"),a.cacaoPercentage&&e.push(a.cacaoPercentage+"%");const t=encodeURIComponent(e.join(" ")),r=await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${t}&json=1&page_size=5`);if(!r.ok)throw new Error("Failed to fetch from Open Food Facts API");const s=await r.json();return!s.products||s.products.length===0?[]:s.products.map(u=>{const m=eL(a,u);return{offProduct:u,score:m,matchDetails:{ourChocolate:{brand:a.maker,name:a.name,type:a.type,cacaoPercentage:a.cacaoPercentage},offChocolate:{brand:u.brands,name:u.product_name,categories:u.categories,cacaoPercentage:u.cacao_percentage}}}}).sort((u,m)=>m.score-u.score)}catch(e){return console.error("Error finding potential matches:",e),[]}},nL=async a=>{const r={highConfidence:[],mediumConfidence:[],lowConfidence:[],noMatches:[]};for(const s of a){const l=await tL(s);if(l.length===0){r.noMatches.push({ourChocolate:s,potentialMatches:[]});continue}const u=l[0];u.score>=70?r.highConfidence.push({ourChocolate:s,topMatch:u,allMatches:l}):u.score>=40?r.mediumConfidence.push({ourChocolate:s,topMatch:u,allMatches:l}):r.lowConfidence.push({ourChocolate:s,topMatch:u,allMatches:l})}return r},rL=(a,e)=>{const t={...a};return e.code&&(t.barcode=e.code),!t.imageUrl&&e.image_url&&(t.imageUrl=e.image_url),!t.origin&&e.countries&&(t.origin=e.countries),!t.ingredients&&e.ingredients_text&&(t.ingredients=e.ingredients_text.split(",").map(r=>r.trim())),!t.nutritionalInfo&&e.nutriments&&(t.nutritionalInfo={servingSize:e.serving_size||"100g",calories:e.nutriments.energy_value||0,fat:e.nutriments.fat_value||0,sugar:e.nutriments.sugars_value||0,protein:e.nutriments.proteins_value||0}),t.openFoodFactsId=e.code,t};function aL(){const[a,e]=G.useState([]),[t,r]=G.useState(null),[s,l]=G.useState(0),[u,m]=G.useState(!1),[p,y]=G.useState(""),[v,w]=G.useState(10);G.useEffect(()=>{(async()=>{const I=await ay();e(I)})()},[]);const T=async()=>{m(!0),y("Processing batch...");try{const x=s,I=Math.min(x+v,a.length),z=a.slice(x,I),L=await nL(z);r(L),y(`Processed ${z.length} chocolates. Found ${L.highConfidence.length} high confidence matches, ${L.mediumConfidence.length} medium confidence matches, and ${L.lowConfidence.length} low confidence matches.`)}catch(x){console.error("Error processing batch:",x),y(`Error: ${x.message}`)}finally{m(!1)}},A=(x,I)=>{const z=rL(x,I);console.log("Accepted match:",z),l(s+v),r(null)},k=()=>{l(s+v),r(null)},C=x=>{const{ourChocolate:I,topMatch:z}=x,L=z.offProduct;return d.jsxs("div",{className:"match-item",children:[d.jsxs("div",{className:"match-chocolate",children:[d.jsx("h3",{children:I.name}),d.jsxs("p",{children:["Brand: ",I.maker]}),d.jsxs("p",{children:["Type: ",I.type]}),d.jsxs("p",{children:["Cacao: ",I.cacaoPercentage,"%"]}),I.imageUrl&&d.jsx("img",{src:I.imageUrl,alt:I.name,className:"chocolate-image"})]}),d.jsxs("div",{className:"match-arrows",children:[d.jsx("span",{children:""}),d.jsxs("div",{className:"match-score",children:[z.score.toFixed(0),"%"]})]}),d.jsxs("div",{className:"off-chocolate",children:[d.jsx("h3",{children:L.product_name}),d.jsxs("p",{children:["Brand: ",L.brands]}),d.jsxs("p",{children:["Categories: ",L.categories]}),L.image_url&&d.jsx("img",{src:L.image_url,alt:L.product_name,className:"chocolate-image"}),d.jsxs("div",{className:"match-actions",children:[d.jsx("button",{onClick:()=>A(I,L),className:"accept-button",children:"Accept Match"}),d.jsx("button",{onClick:k,className:"reject-button",children:"Reject Match"})]})]})]},I.id)};return d.jsxs("div",{className:"chocolate-matching-tool",children:[d.jsx("h2",{children:"Chocolate Matching Tool"}),d.jsxs("p",{children:["Total chocolates: ",a.length]}),d.jsxs("p",{children:["Current position: ",s," / ",a.length]}),d.jsxs("div",{className:"batch-controls",children:[d.jsxs("label",{children:["Batch size:",d.jsx("input",{type:"number",value:v,onChange:x=>w(parseInt(x.target.value)),min:"1",max:"20"})]}),d.jsx("button",{onClick:T,disabled:u||s>=a.length,children:u?"Processing...":"Process Next Batch"})]}),p&&d.jsx("div",{className:"message",children:p}),t&&d.jsxs("div",{className:"match-results",children:[d.jsx("h3",{children:"High Confidence Matches"}),t.highConfidence.map(C),d.jsx("h3",{children:"Medium Confidence Matches"}),t.mediumConfidence.map(C),d.jsx("h3",{children:"Low Confidence Matches"}),t.lowConfidence.map(C)]})]})}function iL(){const[a,e]=G.useState(!1),[t,r]=G.useState(""),[s,l]=G.useState(""),[u,m]=G.useState({name:"",makerId:"",type:"",origin:"",cacaoPercentage:"",description:"",ingredients:"",barcode:""}),[p,y]=G.useState(null),[v,w]=G.useState(null),[T,A]=G.useState(!1),[k,C]=G.useState(!1),x=de=>{const{name:O,value:N}=de.target;m({...u,[O]:N})},I=de=>{y(de),w(URL.createObjectURL(de))},z=(de,O)=>{y(de),w(O),A(!1)},L=async de=>{de.preventDefault();try{C(!0),r("");const O={name:u.name,makerId:u.makerId,type:u.type,origin:u.origin,cacaoPercentage:parseFloat(u.cacaoPercentage)||0,description:u.description,ingredients:u.ingredients.split(",").map(N=>N.trim()),barcode:u.barcode||null};await vO(O,p),r("Chocolate added successfully!"),m({name:"",makerId:"",type:"",origin:"",cacaoPercentage:"",description:"",ingredients:"",barcode:""}),y(null),w(null)}catch(O){r(`Error adding chocolate: ${O.message}`),console.error("Error adding chocolate:",O)}finally{C(!1)}},ne=async()=>{try{e(!0),r(""),await HO(),r("Successfully added initial chocolates! Check the console for details.")}catch(de){r(`Error adding chocolates: ${de.message}`),console.error("Error in bulk upload:",de)}finally{e(!1)}},oe=async()=>{try{e(!0),l("Enriching database with Open Food Facts data"),r("Starting database enrichment process..."),await JO(),r("Database enrichment complete! Check the console for details.")}catch(de){r(`Error enriching database: ${de.message}`),console.error("Error in database enrichment:",de)}finally{e(!1),l("")}};return d.jsx("div",{className:"admin-page",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"admin-header",children:[d.jsx("h1",{children:"Chocolate Admin Dashboard"}),d.jsxs("div",{className:"admin-links",children:[d.jsx(Le,{to:"/admin/batch-upload",className:"admin-link",children:"Batch Image Upload"}),d.jsx(Le,{to:"/",className:"back-link",children:"Back to Home"})]})]}),d.jsxs("div",{className:"admin-section",children:[d.jsx("h2",{children:"Database Actions"}),d.jsxs("div",{className:"admin-actions",children:[d.jsx("button",{onClick:ne,className:"admin-button primary",disabled:a,children:a?"Adding Chocolates...":"Add Initial Chocolates"}),d.jsx("button",{onClick:GO,className:"admin-button secondary",disabled:a,children:"Add Commercial Chocolates"}),d.jsx("button",{onClick:$O,className:"admin-button secondary",disabled:a,children:"Add 100 More Popular Chocolates"}),t&&d.jsx("div",{className:"message",children:t})]})]}),d.jsxs("div",{className:"admin-section",children:[d.jsx("h2",{children:"Open Food Facts Integration"}),d.jsxs("div",{className:"admin-actions",children:[d.jsx("button",{onClick:oe,className:"admin-button primary",disabled:a,children:a&&s==="Enriching database"?"Enriching Database...":"Enrich Database with Open Food Facts"}),d.jsxs("div",{className:"admin-section",children:[d.jsx("h2",{children:"Chocolate Matching Tool"}),d.jsx("p",{children:"Match your chocolates with Open Food Facts database"}),d.jsx(aL,{})]}),d.jsx("p",{className:"help-text",children:"This will search for matching products in Open Food Facts and update your database with barcodes, images, and additional information."})]})]}),d.jsxs("div",{className:"admin-section",children:[d.jsx("h2",{children:"Add New Chocolate"}),d.jsxs("form",{onSubmit:L,className:"admin-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"name",children:"Chocolate Name"}),d.jsx("input",{type:"text",id:"name",name:"name",value:u.name,onChange:x,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"makerId",children:"Maker"}),d.jsxs("select",{id:"makerId",name:"makerId",value:u.makerId,onChange:x,required:!0,children:[d.jsx("option",{value:"",children:"Select a maker"}),d.jsx("option",{value:"placeholder",children:"Placeholder (connect to real makers later)"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"type",children:"Type"}),d.jsxs("select",{id:"type",name:"type",value:u.type,onChange:x,required:!0,children:[d.jsx("option",{value:"",children:"Select a type"}),d.jsx("option",{value:"Dark",children:"Dark"}),d.jsx("option",{value:"Milk",children:"Milk"}),d.jsx("option",{value:"White",children:"White"}),d.jsx("option",{value:"Ruby",children:"Ruby"}),d.jsx("option",{value:"Flavored",children:"Flavored"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"origin",children:"Origin"}),d.jsx("input",{type:"text",id:"origin",name:"origin",value:u.origin,onChange:x,placeholder:"Country or region of origin"})]}),d.jsxs("div",{className:"form-group full-width",children:[d.jsx("label",{children:"Chocolate Label Image"}),d.jsx("div",{className:"image-options",children:d.jsx("button",{type:"button",className:"toggle-search-button",onClick:()=>A(!T),children:T?"Hide Product Search":"Search Product Database"})}),T&&d.jsx(ProductImageSearch,{onImageSelected:z}),d.jsx(FO,{onImageSelected:I,currentImageUrl:v}),d.jsx("p",{className:"field-helper",children:"Upload a clear image of the chocolate label"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"barcode",children:"Barcode (EAN/UPC)"}),d.jsx("input",{type:"text",id:"barcode",name:"barcode",value:u.barcode||"",onChange:x,placeholder:"Product barcode if available"}),d.jsx("p",{className:"field-helper",children:"For future scanning functionality"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"cacaoPercentage",children:"Cacao Percentage"}),d.jsx("input",{type:"number",id:"cacaoPercentage",name:"cacaoPercentage",value:u.cacaoPercentage,onChange:x,min:"0",max:"100",placeholder:"e.g. 70"})]}),d.jsxs("div",{className:"form-group full-width",children:[d.jsx("label",{htmlFor:"description",children:"Description"}),d.jsx("textarea",{id:"description",name:"description",value:u.description,onChange:x,rows:"4",required:!0})]}),d.jsxs("div",{className:"form-group full-width",children:[d.jsx("label",{htmlFor:"ingredients",children:"Ingredients"}),d.jsx("textarea",{id:"ingredients",name:"ingredients",value:u.ingredients,onChange:x,rows:"2",placeholder:"Comma-separated list of ingredients"})]}),d.jsx("button",{type:"submit",className:"admin-button",disabled:k,children:k?"Adding Chocolate...":"Add Chocolate"})]})]})]})})}function sL(){return d.jsx("div",{className:"about-page",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"about-header",children:[d.jsx("h1",{children:"About Chocly"}),d.jsx("p",{className:"tagline",children:"For the love of all things chocolate"})]}),d.jsxs("section",{className:"about-story",children:[d.jsxs("div",{className:"story-content",children:[d.jsx("h2",{children:"Our Story"}),d.jsx("p",{children:"Chocly was born from a personal journey of discovery and delight. Inspired by the cravings and curiosities of a chocolate-loving wife during pregnancy, our founder embarked on a quest to catalogue favorite bars, explore new and exciting flavors, and research the next must-try indulgence. What began as a loving endeavor has blossomed into Chocly, a platform for all chocolate enthusiasts to share their experiences, learn from others, and navigate the delicious world of premium chocolate together."})]}),d.jsx("div",{className:"story-image",children:d.jsx("div",{className:"image-placeholder",children:d.jsx("span",{children:"Our Founder's Story"})})})]}),d.jsxs("section",{className:"mission-section",children:[d.jsx("div",{className:"mission-overlay"}),d.jsxs("div",{className:"mission-content",children:[d.jsx("h2",{children:"Our Mission"}),d.jsx("p",{className:"mission-statement",children:"To help everyone discover and enjoy better chocolate."}),d.jsx("p",{className:"mission-description",children:"We believe that chocolate is more than just a treatit's an experience, an art form, and a connection to cultures and traditions around the world. Our aim is to make premium chocolate accessible to everyone, creating a community where chocolate lovers can share their discoveries and expand their palates."})]})]}),d.jsxs("section",{className:"values-section",children:[d.jsx("h2",{children:"What Drives Us"}),d.jsxs("div",{className:"values-grid",children:[d.jsxs("div",{className:"value-card",children:[d.jsx("div",{className:"value-icon quality"}),d.jsx("h3",{children:"Quality"}),d.jsx("p",{children:"We champion chocolate crafted with care, highlighting makers who prioritize quality ingredients and ethical practices."})]}),d.jsxs("div",{className:"value-card",children:[d.jsx("div",{className:"value-icon community"}),d.jsx("h3",{children:"Community"}),d.jsx("p",{children:"We believe in the power of shared experiences and diverse perspectives to enrich our chocolate journeys."})]}),d.jsxs("div",{className:"value-card",children:[d.jsx("div",{className:"value-icon discovery"}),d.jsx("h3",{children:"Discovery"}),d.jsx("p",{children:"We're committed to helping people break out of their chocolate comfort zones and discover new favorites."})]}),d.jsxs("div",{className:"value-card",children:[d.jsx("div",{className:"value-icon education"}),d.jsx("h3",{children:"Education"}),d.jsx("p",{children:"We seek to deepen understanding of chocolatefrom bean to barempowering informed choices."})]})]})]}),d.jsxs("section",{className:"team-section",children:[d.jsx("h2",{children:"Meet Our Team"}),d.jsx("p",{className:"team-intro",children:"We're a group of passionate chocolate enthusiasts dedicated to building the best platform for chocolate lovers everywhere."}),d.jsx("div",{className:"team-grid",children:d.jsx("div",{className:"team-placeholder",children:d.jsx("p",{children:"Team photos coming soon!"})})})]}),d.jsxs("section",{className:"join-section",children:[d.jsx("h2",{children:"Join Our Chocolate Revolution"}),d.jsx("p",{children:"Whether you're a casual chocolate enjoyer or a dedicated connoisseur, Chocly is the place for you. Sign up today to start tracking your chocolate journey, sharing your discoveries, and connecting with fellow enthusiasts."}),d.jsxs("div",{className:"cta-buttons",children:[d.jsx("a",{href:"/signup",className:"cta-button primary",children:"Join Chocly"}),d.jsx("a",{href:"/browse",className:"cta-button secondary",children:"Explore Chocolates"})]})]})]})})}function oL(){const[a,e]=G.useState({name:"",email:"",subject:"",message:""}),[t,r]=G.useState(!1),s=u=>{const{name:m,value:p}=u.target;e(y=>({...y,[m]:p}))},l=u=>{u.preventDefault(),console.log("Form submitted:",a),r(!0),e({name:"",email:"",subject:"",message:""}),setTimeout(()=>{r(!1)},5e3)};return d.jsx("div",{className:"contact-page",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"contact-header",children:[d.jsx("h1",{children:"Contact Us"}),d.jsx("p",{className:"tagline",children:"We'd love to hear from you!"})]}),d.jsxs("div",{className:"contact-content",children:[d.jsxs("div",{className:"contact-info",children:[d.jsxs("div",{className:"contact-section",children:[d.jsx("h2",{children:"Get in Touch"}),d.jsx("p",{children:"Have questions about chocolate? Want to suggest a new feature? Or maybe you just want to say hello? We're here for all your chocolate-related inquiries."})]}),d.jsxs("div",{className:"contact-section",children:[d.jsx("h3",{children:"Connect With Us"}),d.jsxs("div",{className:"social-links",children:[d.jsxs("a",{href:"#",className:"social-link",children:[d.jsx("span",{className:"social-icon instagram"}),d.jsx("span",{children:"@chocly"})]}),d.jsxs("a",{href:"#",className:"social-link",children:[d.jsx("span",{className:"social-icon twitter"}),d.jsx("span",{children:"@choclyapp"})]}),d.jsxs("a",{href:"#",className:"social-link",children:[d.jsx("span",{className:"social-icon facebook"}),d.jsx("span",{children:"Chocly"})]})]})]}),d.jsxs("div",{className:"contact-section",children:[d.jsx("h3",{children:"Email Us"}),d.jsx("p",{className:"email-address",children:"hello@chocly.com"}),d.jsx("p",{className:"email-note",children:"We aim to respond to all inquiries within 48 hours."})]}),d.jsx("div",{className:"contact-image",children:d.jsx("div",{className:"image-placeholder",children:d.jsx("span",{children:"Chocly Team"})})})]}),d.jsxs("div",{className:"contact-form-container",children:[d.jsx("h2",{children:"Send Us a Message"}),t&&d.jsx("div",{className:"success-message",children:d.jsx("p",{children:"Thank you for your message! We'll be in touch soon."})}),d.jsxs("form",{className:"contact-form",onSubmit:l,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"name",children:"Your Name"}),d.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:s,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"email",children:"Email Address"}),d.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:s,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"subject",children:"Subject"}),d.jsx("input",{type:"text",id:"subject",name:"subject",value:a.subject,onChange:s,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"message",children:"Your Message"}),d.jsx("textarea",{id:"message",name:"message",value:a.message,onChange:s,rows:"5",required:!0})]}),d.jsx("button",{type:"submit",className:"submit-button",children:"Send Message"})]})]})]}),d.jsxs("div",{className:"faq-section",children:[d.jsx("h2",{children:"Frequently Asked Questions"}),d.jsxs("div",{className:"faq-grid",children:[d.jsxs("div",{className:"faq-item",children:[d.jsx("h3",{children:"How do I create an account?"}),d.jsx("p",{children:'Click the "Sign Up" button in the top right corner of the page and follow the instructions to create your Chocly account.'})]}),d.jsxs("div",{className:"faq-item",children:[d.jsx("h3",{children:"Can I add a chocolate that's not in the database?"}),d.jsx("p",{children:'Absolutely! You can suggest new chocolates to add to our database. Look for the "Add Chocolate" option in your profile menu.'})]}),d.jsxs("div",{className:"faq-item",children:[d.jsx("h3",{children:"How do I leave a review?"}),d.jsx("p",{children:"Navigate to any chocolate's detail page and scroll down to the review section. You can rate the chocolate and share your thoughts there."})]}),d.jsxs("div",{className:"faq-item",children:[d.jsx("h3",{children:"Is Chocly available as a mobile app?"}),d.jsx("p",{children:"We're currently working on mobile apps for iOS and Android. Stay tuned for updates!"})]})]})]})]})})}function lL(){const e=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return d.jsx("div",{className:"legal-page privacy-policy",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"legal-header",children:[d.jsx("h1",{children:"Privacy Policy"}),d.jsxs("p",{className:"last-updated",children:["Last Updated: ",e]})]}),d.jsxs("div",{className:"legal-content",children:[d.jsx("section",{className:"legal-section",children:d.jsx("p",{className:"intro-text",children:"At Chocly, we take your privacy seriously. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website and use our services. Please read this privacy policy carefully. If you do not agree with the terms of this privacy policy, please do not access the site."})}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Information We Collect"}),d.jsx("h3",{children:"Personal Data"}),d.jsx("p",{children:"We may collect personal information that you voluntarily provide to us when you register on our platform, express interest in obtaining information about us or our products and services, participate in activities on the platform, or otherwise contact us. The personal information we collect may include:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Name and contact information (email address, phone number)"}),d.jsx("li",{children:"Account credentials (username, password)"}),d.jsx("li",{children:"Profile information (profile picture, biography)"}),d.jsx("li",{children:"User-generated content (reviews, ratings, comments, uploads)"}),d.jsx("li",{children:"Preferences and interests related to chocolate"})]}),d.jsx("h3",{children:"Automatically Collected Information"}),d.jsx("p",{children:"When you visit our platform, we may automatically collect certain information about your device and your interaction with our platform. This information might include:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Device information (IP address, browser type, operating system)"}),d.jsx("li",{children:"Usage data (pages visited, time spent on pages, links clicked)"}),d.jsx("li",{children:"Location data (country, city)"}),d.jsx("li",{children:"Cookies and similar tracking technologies"})]})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"How We Use Your Information"}),d.jsx("p",{children:"We may use the information we collect for various purposes, including to:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Create and manage your user account"}),d.jsx("li",{children:"Provide and maintain our services"}),d.jsx("li",{children:"Personalize your experience on our platform"}),d.jsx("li",{children:"Process transactions and send related information"}),d.jsx("li",{children:"Respond to your inquiries and provide customer support"}),d.jsx("li",{children:"Send you administrative information, updates, and marketing communications"}),d.jsx("li",{children:"Improve our platform, products, and services"}),d.jsx("li",{children:"Protect against fraudulent, unauthorized, or illegal activity"}),d.jsx("li",{children:"Comply with legal obligations"})]})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Sharing Your Information"}),d.jsx("p",{children:"We may share your information in the following situations:"}),d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("strong",{children:"With Service Providers:"})," We may share your information with third-party vendors, service providers, contractors, or agents who perform services for us."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"For Business Transfers:"})," We may share or transfer your information in connection with, or during negotiations of, any merger, sale of company assets, financing, or acquisition of all or a portion of our business."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"With Your Consent:"})," We may disclose your information for any other purpose with your consent."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"With Other Users:"})," When you share personal information or interact in public areas of the platform, such information may be viewed by all users and may be publicly distributed."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"For Legal Compliance:"})," We may disclose your information where required to do so by law or in response to valid requests by public authorities."]})]})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"User-Generated Content"}),d.jsx("p",{children:"Our platform allows you to upload, post, and share content, including reviews, ratings, comments, and images. Any information you post or share through these activities will be available to other users of the platform and the public. You should be aware that any information you provide in these areas may be read, collected, and used by others who access them."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Storage and Security"}),d.jsx("p",{children:"We use commercially reasonable measures to protect your personal information from unauthorized access, use, or disclosure. However, please be aware that no method of electronic transmission or storage is 100% secure, and we cannot guarantee absolute security of your data."}),d.jsx("p",{children:"We will retain your personal information only for as long as is necessary for the purposes set out in this privacy policy, unless a longer retention period is required or permitted by law."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Your Privacy Rights"}),d.jsx("p",{children:"Depending on your location, you may have certain rights regarding your personal information, including:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"The right to access the personal information we have about you"}),d.jsx("li",{children:"The right to request correction of inaccurate personal information"}),d.jsx("li",{children:"The right to request deletion of your personal information"}),d.jsx("li",{children:"The right to object to processing of your personal information"}),d.jsx("li",{children:"The right to data portability"}),d.jsx("li",{children:"The right to withdraw consent"})]}),d.jsx("p",{children:"To exercise these rights, please contact us using the contact information provided below. Please note that we may ask you to verify your identity before responding to such requests."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Cookies and Similar Technologies"}),d.jsx("p",{children:"We use cookies and similar tracking technologies to collect and use information about you and your interaction with our platform. We use these technologies to collect information about your browsing activities over time and across different websites. You can instruct your browser to refuse all cookies or to indicate when a cookie is being sent. However, if you do not accept cookies, you may not be able to use some portions of our platform."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Children's Privacy"}),d.jsx("p",{children:"Our platform is not intended for individuals under the age of 13. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and you are aware that your child has provided us with personal information, please contact us."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Changes to This Privacy Policy"}),d.jsx("p",{children:'We may update our privacy policy from time to time. We will notify you of any changes by posting the new privacy policy on this page and updating the "Last Updated" date at the top of this policy. You are advised to review this privacy policy periodically for any changes.'})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Contact Us"}),d.jsx("p",{children:"If you have questions or comments about this privacy policy, please contact us at:"}),d.jsxs("p",{className:"contact-info",children:["Email: privacy@chocly.com",d.jsx("br",{}),"Address: 123 Chocolate Lane, Sweet City, CA 94000"]})]})]})]})})}function cL(){const e=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return d.jsx("div",{className:"legal-page terms-of-service",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"legal-header",children:[d.jsx("h1",{children:"Terms of Service"}),d.jsxs("p",{className:"last-updated",children:["Last Updated: ",e]})]}),d.jsxs("div",{className:"legal-content",children:[d.jsx("section",{className:"legal-section",children:d.jsx("p",{className:"intro-text",children:'Welcome to Chocly! These Terms of Service ("Terms") govern your access to and use of the Chocly website and services. Please read these Terms carefully before using our services. By accessing or using our services, you agree to be bound by these Terms and our Privacy Policy.'})}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"1. Acceptance of Terms"}),d.jsx("p",{children:"By accessing or using Chocly, you agree to be bound by these Terms. If you do not agree to all the terms and conditions of this agreement, you may not access or use our services."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"2. Changes to Terms"}),d.jsx("p",{children:'We reserve the right to modify these Terms at any time. We will provide notice of significant changes by posting the updated Terms on this page with a new "Last Updated" date. Your continued use of Chocly after any changes to the Terms constitutes your acceptance of such changes.'})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"3. Account Registration and Security"}),d.jsx("p",{children:"To access certain features of Chocly, you may be required to register for an account. When registering, you agree to provide accurate, current, and complete information. You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account. You agree to notify us immediately of any unauthorized use of your account."}),d.jsx("p",{children:"We reserve the right to suspend or terminate your account at our discretion if we believe that you have violated these Terms or if your account shows signs of fraud, abuse, or suspicious activity."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"4. User Content"}),d.jsx("h3",{children:"4.1 Content Ownership"}),d.jsx("p",{children:'You retain all ownership rights to the content you post, upload, or share on Chocly ("User Content"). By submitting User Content, you grant Chocly a worldwide, non-exclusive, royalty-free, sublicensable, and transferable license to use, reproduce, distribute, prepare derivative works of, display, and perform the User Content in connection with the operation and promotion of Chocly.'}),d.jsx("h3",{children:"4.2 Content Restrictions"}),d.jsx("p",{children:"You agree not to post, upload, or share any User Content that:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Violates any law or regulation"}),d.jsx("li",{children:"Infringes upon the rights of any third party, including intellectual property rights"}),d.jsx("li",{children:"Is false, misleading, defamatory, or deceptive"}),d.jsx("li",{children:"Contains sexually explicit or pornographic material"}),d.jsx("li",{children:"Promotes discrimination, bigotry, racism, or hatred against any individual or group"}),d.jsx("li",{children:"Is threatening, abusive, or harassing toward any individual or group"}),d.jsx("li",{children:"Promotes illegal or harmful activities"}),d.jsx("li",{children:"Contains viruses, malware, or other harmful code"})]}),d.jsx("h3",{children:"4.3 Content Moderation"}),d.jsx("p",{children:"We reserve the right, but have no obligation, to monitor, edit, or remove any User Content that we determine, in our sole discretion, violates these Terms or is otherwise objectionable. We are not responsible for the accuracy, completeness, appropriateness, or legality of User Content."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"5. Intellectual Property Rights"}),d.jsx("p",{children:"The Chocly name, logo, and all related names, logos, product and service names, designs, and slogans are trademarks of Chocly or its affiliates or licensors. You may not use such marks without our prior written permission."}),d.jsx("p",{children:"All content, features, and functionality of Chocly that is not User Content, including but not limited to text, graphics, images, logos, button icons, software, and the compilation thereof, is the exclusive property of Chocly, its licensors, or its content suppliers and is protected by copyright, trademark, and other intellectual property laws."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"6. Prohibited Activities"}),d.jsx("p",{children:"You agree not to engage in any of the following prohibited activities:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Using Chocly for any illegal purpose or in violation of any local, state, national, or international law"}),d.jsx("li",{children:"Impersonating any person or entity, or falsely stating or otherwise misrepresenting your affiliation with a person or entity"}),d.jsx("li",{children:"Interfering with or disrupting the operation of Chocly or the servers or networks connected to Chocly"}),d.jsx("li",{children:"Attempting to gain unauthorized access to Chocly, user accounts, or computer systems or networks connected to Chocly"}),d.jsx("li",{children:"Collecting or storing personal data about other users without their permission"}),d.jsx("li",{children:"Using automated means, including spiders, robots, crawlers, or data mining tools, to download data from Chocly"}),d.jsx("li",{children:"Introducing any viruses, Trojan horses, worms, or other material that is malicious or technologically harmful"})]})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"7. Third-Party Links and Content"}),d.jsx("p",{children:"Chocly may contain links to third-party websites or services that are not owned or controlled by Chocly. We have no control over, and assume no responsibility for, the content, privacy policies, or practices of any third-party websites or services. You further acknowledge and agree that Chocly shall not be responsible or liable, directly or indirectly, for any damage or loss caused or alleged to be caused by or in connection with the use of or reliance on any such content, goods, or services available on or through any such websites or services."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"8. Disclaimer of Warranties"}),d.jsx("p",{children:'Chocly is provided on an "AS IS" and "AS AVAILABLE" basis, without warranties of any kind, either express or implied, including, but not limited to, implied warranties of merchantability, fitness for a particular purpose, non-infringement, or course of performance.'}),d.jsx("p",{children:"We do not warrant that (a) Chocly will function uninterrupted, secure, or available at any particular time or location; (b) any errors or defects will be corrected; (c) Chocly is free of viruses or other harmful components; or (d) the results of using Chocly will meet your requirements."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"9. Limitation of Liability"}),d.jsx("p",{children:"To the maximum extent permitted by applicable law, in no event shall Chocly, its directors, employees, partners, agents, suppliers, or affiliates be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from (a) your access to or use of or inability to access or use Chocly; (b) any conduct or content of any third party on Chocly; (c) any content obtained from Chocly; and (d) unauthorized access, use, or alteration of your transmissions or content, whether based on warranty, contract, tort (including negligence), or any other legal theory, whether or not we have been informed of the possibility of such damage."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"10. Indemnification"}),d.jsx("p",{children:"You agree to defend, indemnify, and hold harmless Chocly, its directors, employees, partners, agents, suppliers, and affiliates from and against any claims, liabilities, damages, judgments, awards, losses, costs, expenses, or fees (including reasonable attorneys' fees) arising out of or relating to your violation of these Terms or your use of Chocly, including, but not limited to, your User Content, any use of Chocly's content, services, and products other than as expressly authorized in these Terms, or your use of any information obtained from Chocly."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"11. Termination"}),d.jsx("p",{children:"We may terminate or suspend your account and bar access to Chocly immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach these Terms."}),d.jsx("p",{children:"If you wish to terminate your account, you may simply discontinue using Chocly or contact us to request account deletion. All provisions of the Terms which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity, and limitations of liability."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"12. Governing Law"}),d.jsx("p",{children:"These Terms shall be governed and construed in accordance with the laws of the State of California, United States, without regard to its conflict of law provisions. Our failure to enforce any right or provision of these Terms will not be considered a waiver of those rights."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"13. Dispute Resolution"}),d.jsx("p",{children:"Any disputes arising out of or relating to these Terms or your use of Chocly shall be resolved through binding arbitration in accordance with the rules of the American Arbitration Association, except that each party retains the right to seek injunctive or other equitable relief in a court of competent jurisdiction to prevent the actual or threatened infringement or misappropriation of intellectual property rights."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"14. Contact Information"}),d.jsx("p",{children:"If you have any questions about these Terms, please contact us at:"}),d.jsxs("p",{className:"contact-info",children:["Email: terms@chocly.com",d.jsx("br",{}),"Address: 123 Chocolate Lane, Sweet City, CA 94000"]})]})]})]})})}function uL(){return d.jsx(DR,{basename:"/chocly/",children:d.jsx(RO,{children:d.jsxs("div",{className:"app",children:[d.jsx(BO,{}),d.jsx("main",{className:"main-content",children:d.jsxs(oR,{children:[d.jsx(Rn,{path:"/",element:d.jsx(FR,{})}),d.jsx(Rn,{path:"/chocolate/:id",element:d.jsx(bO,{})}),d.jsx(Rn,{path:"/search",element:d.jsx(EO,{})}),d.jsx(Rn,{path:"/browse",element:d.jsx(OO,{})}),d.jsx(Rn,{path:"/barcode",element:d.jsx(UO,{})}),d.jsx(Rn,{path:"/profile",element:d.jsx(MO,{})}),d.jsx(Rn,{path:"/signup",element:d.jsx(VO,{})}),d.jsx(Rn,{path:"/login",element:d.jsx(LO,{})}),d.jsx(Rn,{path:"/about",element:d.jsx(sL,{})}),d.jsx(Rn,{path:"/contact",element:d.jsx(oL,{})}),d.jsx(Rn,{path:"/privacy-policy",element:d.jsx(lL,{})}),d.jsx(Rn,{path:"/terms-of-service",element:d.jsx(cL,{})}),d.jsx(Rn,{path:"/admin",element:d.jsx(iL,{})}),d.jsx(Rn,{path:"/admin/batch-upload",element:d.jsx(qO,{})})]})}),d.jsx(zO,{})]})})})}gA.createRoot(document.getElementById("root")).render(d.jsx(G.StrictMode,{children:d.jsx(uL,{})}));
