(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();var Hm={exports:{}},ic={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function pA(){if(M_)return ic;M_=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,l){var u=null;if(l!==void 0&&(u=""+l),s.key!==void 0&&(u=""+s.key),"key"in s){l={};for(var m in s)m!=="key"&&(l[m]=s[m])}else l=s;return s=l.ref,{$$typeof:a,type:r,key:u,ref:s!==void 0?s:null,props:l}}return ic.Fragment=e,ic.jsx=t,ic.jsxs=t,ic}var O_;function yA(){return O_||(O_=1,Hm.exports=pA()),Hm.exports}var d=yA(),Gm={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function vA(){if(P_)return Le;P_=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function T(L){return L===null||typeof L!="object"?null:(L=b&&L[b]||L["@@iterator"],typeof L=="function"?L:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,S={};function x(L,he,H){this.props=L,this.context=he,this.refs=S,this.updater=H||C}x.prototype.isReactComponent={},x.prototype.setState=function(L,he){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,he,"setState")},x.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function I(){}I.prototype=x.prototype;function B(L,he,H){this.props=L,this.context=he,this.refs=S,this.updater=H||C}var G=B.prototype=new I;G.constructor=B,R(G,x.prototype),G.isPureReactComponent=!0;var re=Array.isArray,oe={H:null,A:null,T:null,S:null,V:null},de=Object.prototype.hasOwnProperty;function M(L,he,H,D,K,Z){return H=Z.ref,{$$typeof:a,type:L,key:he,ref:H!==void 0?H:null,props:Z}}function N(L,he){return M(L.type,he,void 0,void 0,void 0,L.props)}function j(L){return typeof L=="object"&&L!==null&&L.$$typeof===a}function U(L){var he={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(H){return he[H]})}var q=/\/+/g;function $(L,he){return typeof L=="object"&&L!==null&&L.key!=null?U(""+L.key):he.toString(36)}function P(){}function St(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(P,P):(L.status="pending",L.then(function(he){L.status==="pending"&&(L.status="fulfilled",L.value=he)},function(he){L.status==="pending"&&(L.status="rejected",L.reason=he)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function ht(L,he,H,D,K){var Z=typeof L;(Z==="undefined"||Z==="boolean")&&(L=null);var V=!1;if(L===null)V=!0;else switch(Z){case"bigint":case"string":case"number":V=!0;break;case"object":switch(L.$$typeof){case a:case e:V=!0;break;case v:return V=L._init,ht(V(L._payload),he,H,D,K)}}if(V)return K=K(L),V=D===""?"."+$(L,0):D,re(K)?(H="",V!=null&&(H=V.replace(q,"$&/")+"/"),ht(K,he,H,"",function(Re){return Re})):K!=null&&(j(K)&&(K=N(K,H+(K.key==null||L&&L.key===K.key?"":(""+K.key).replace(q,"$&/")+"/")+V)),he.push(K)),1;V=0;var ve=D===""?".":D+":";if(re(L))for(var te=0;te<L.length;te++)D=L[te],Z=ve+$(D,te),V+=ht(D,he,H,Z,K);else if(te=T(L),typeof te=="function")for(L=te.call(L),te=0;!(D=L.next()).done;)D=D.value,Z=ve+$(D,te++),V+=ht(D,he,H,Z,K);else if(Z==="object"){if(typeof L.then=="function")return ht(St(L),he,H,D,K);throw he=String(L),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.")}return V}function ae(L,he,H){if(L==null)return L;var D=[],K=0;return ht(L,D,"","",function(Z){return he.call(H,Z,K++)}),D}function me(L){if(L._status===-1){var he=L._result;he=he(),he.then(function(H){(L._status===0||L._status===-1)&&(L._status=1,L._result=H)},function(H){(L._status===0||L._status===-1)&&(L._status=2,L._result=H)}),L._status===-1&&(L._status=0,L._result=he)}if(L._status===1)return L._result.default;throw L._result}var be=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var he=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(he))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Be(){}return Le.Children={map:ae,forEach:function(L,he,H){ae(L,function(){he.apply(this,arguments)},H)},count:function(L){var he=0;return ae(L,function(){he++}),he},toArray:function(L){return ae(L,function(he){return he})||[]},only:function(L){if(!j(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Le.Component=x,Le.Fragment=t,Le.Profiler=s,Le.PureComponent=B,Le.StrictMode=r,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,Le.__COMPILER_RUNTIME={__proto__:null,c:function(L){return oe.H.useMemoCache(L)}},Le.cache=function(L){return function(){return L.apply(null,arguments)}},Le.cloneElement=function(L,he,H){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var D=R({},L.props),K=L.key,Z=void 0;if(he!=null)for(V in he.ref!==void 0&&(Z=void 0),he.key!==void 0&&(K=""+he.key),he)!de.call(he,V)||V==="key"||V==="__self"||V==="__source"||V==="ref"&&he.ref===void 0||(D[V]=he[V]);var V=arguments.length-2;if(V===1)D.children=H;else if(1<V){for(var ve=Array(V),te=0;te<V;te++)ve[te]=arguments[te+2];D.children=ve}return M(L.type,K,void 0,void 0,Z,D)},Le.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},Le.createElement=function(L,he,H){var D,K={},Z=null;if(he!=null)for(D in he.key!==void 0&&(Z=""+he.key),he)de.call(he,D)&&D!=="key"&&D!=="__self"&&D!=="__source"&&(K[D]=he[D]);var V=arguments.length-2;if(V===1)K.children=H;else if(1<V){for(var ve=Array(V),te=0;te<V;te++)ve[te]=arguments[te+2];K.children=ve}if(L&&L.defaultProps)for(D in V=L.defaultProps,V)K[D]===void 0&&(K[D]=V[D]);return M(L,Z,void 0,void 0,null,K)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(L){return{$$typeof:m,render:L}},Le.isValidElement=j,Le.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:me}},Le.memo=function(L,he){return{$$typeof:y,type:L,compare:he===void 0?null:he}},Le.startTransition=function(L){var he=oe.T,H={};oe.T=H;try{var D=L(),K=oe.S;K!==null&&K(H,D),typeof D=="object"&&D!==null&&typeof D.then=="function"&&D.then(Be,be)}catch(Z){be(Z)}finally{oe.T=he}},Le.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},Le.use=function(L){return oe.H.use(L)},Le.useActionState=function(L,he,H){return oe.H.useActionState(L,he,H)},Le.useCallback=function(L,he){return oe.H.useCallback(L,he)},Le.useContext=function(L){return oe.H.useContext(L)},Le.useDebugValue=function(){},Le.useDeferredValue=function(L,he){return oe.H.useDeferredValue(L,he)},Le.useEffect=function(L,he,H){var D=oe.H;if(typeof H=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return D.useEffect(L,he)},Le.useId=function(){return oe.H.useId()},Le.useImperativeHandle=function(L,he,H){return oe.H.useImperativeHandle(L,he,H)},Le.useInsertionEffect=function(L,he){return oe.H.useInsertionEffect(L,he)},Le.useLayoutEffect=function(L,he){return oe.H.useLayoutEffect(L,he)},Le.useMemo=function(L,he){return oe.H.useMemo(L,he)},Le.useOptimistic=function(L,he){return oe.H.useOptimistic(L,he)},Le.useReducer=function(L,he,H){return oe.H.useReducer(L,he,H)},Le.useRef=function(L){return oe.H.useRef(L)},Le.useState=function(L){return oe.H.useState(L)},Le.useSyncExternalStore=function(L,he,H){return oe.H.useSyncExternalStore(L,he,H)},Le.useTransition=function(){return oe.H.useTransition()},Le.version="19.1.0",Le}var U_;function tp(){return U_||(U_=1,Gm.exports=vA()),Gm.exports}var F=tp(),$m={exports:{}},sc={},Km={exports:{}},Qm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function _A(){return V_||(V_=1,function(a){function e(ae,me){var be=ae.length;ae.push(me);e:for(;0<be;){var Be=be-1>>>1,L=ae[Be];if(0<s(L,me))ae[Be]=me,ae[be]=L,be=Be;else break e}}function t(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var me=ae[0],be=ae.pop();if(be!==me){ae[0]=be;e:for(var Be=0,L=ae.length,he=L>>>1;Be<he;){var H=2*(Be+1)-1,D=ae[H],K=H+1,Z=ae[K];if(0>s(D,be))K<L&&0>s(Z,D)?(ae[Be]=Z,ae[K]=be,Be=K):(ae[Be]=D,ae[H]=be,Be=H);else if(K<L&&0>s(Z,be))ae[Be]=Z,ae[K]=be,Be=K;else break e}}return me}function s(ae,me){var be=ae.sortIndex-me.sortIndex;return be!==0?be:ae.id-me.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;a.unstable_now=function(){return l.now()}}else{var u=Date,m=u.now();a.unstable_now=function(){return u.now()-m}}var g=[],y=[],v=1,b=null,T=3,C=!1,R=!1,S=!1,x=!1,I=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function re(ae){for(var me=t(y);me!==null;){if(me.callback===null)r(y);else if(me.startTime<=ae)r(y),me.sortIndex=me.expirationTime,e(g,me);else break;me=t(y)}}function oe(ae){if(S=!1,re(ae),!R)if(t(g)!==null)R=!0,de||(de=!0,$());else{var me=t(y);me!==null&&ht(oe,me.startTime-ae)}}var de=!1,M=-1,N=5,j=-1;function U(){return x?!0:!(a.unstable_now()-j<N)}function q(){if(x=!1,de){var ae=a.unstable_now();j=ae;var me=!0;try{e:{R=!1,S&&(S=!1,B(M),M=-1),C=!0;var be=T;try{t:{for(re(ae),b=t(g);b!==null&&!(b.expirationTime>ae&&U());){var Be=b.callback;if(typeof Be=="function"){b.callback=null,T=b.priorityLevel;var L=Be(b.expirationTime<=ae);if(ae=a.unstable_now(),typeof L=="function"){b.callback=L,re(ae),me=!0;break t}b===t(g)&&r(g),re(ae)}else r(g);b=t(g)}if(b!==null)me=!0;else{var he=t(y);he!==null&&ht(oe,he.startTime-ae),me=!1}}break e}finally{b=null,T=be,C=!1}me=void 0}}finally{me?$():de=!1}}}var $;if(typeof G=="function")$=function(){G(q)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,St=P.port2;P.port1.onmessage=q,$=function(){St.postMessage(null)}}else $=function(){I(q,0)};function ht(ae,me){M=I(function(){ae(a.unstable_now())},me)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(ae){ae.callback=null},a.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ae?Math.floor(1e3/ae):5},a.unstable_getCurrentPriorityLevel=function(){return T},a.unstable_next=function(ae){switch(T){case 1:case 2:case 3:var me=3;break;default:me=T}var be=T;T=me;try{return ae()}finally{T=be}},a.unstable_requestPaint=function(){x=!0},a.unstable_runWithPriority=function(ae,me){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var be=T;T=ae;try{return me()}finally{T=be}},a.unstable_scheduleCallback=function(ae,me,be){var Be=a.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Be+be:Be):be=Be,ae){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=be+L,ae={id:v++,callback:me,priorityLevel:ae,startTime:be,expirationTime:L,sortIndex:-1},be>Be?(ae.sortIndex=be,e(y,ae),t(g)===null&&ae===t(y)&&(S?(B(M),M=-1):S=!0,ht(oe,be-Be))):(ae.sortIndex=L,e(g,ae),R||C||(R=!0,de||(de=!0,$()))),ae},a.unstable_shouldYield=U,a.unstable_wrapCallback=function(ae){var me=T;return function(){var be=T;T=me;try{return ae.apply(this,arguments)}finally{T=be}}}}(Qm)),Qm}var L_;function wA(){return L_||(L_=1,Km.exports=_A()),Km.exports}var Ym={exports:{}},vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function bA(){if(B_)return vn;B_=1;var a=tp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(g,y,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:g,containerInfo:y,implementation:v}}var u=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vn.createPortal=function(g,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(g,y,null,v)},vn.flushSync=function(g){var y=u.T,v=r.p;try{if(u.T=null,r.p=2,g)return g()}finally{u.T=y,r.p=v,r.d.f()}},vn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},vn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},vn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var v=y.as,b=m(v,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:C}):v==="script"&&r.d.X(g,{crossOrigin:b,integrity:T,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},vn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=m(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},vn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,b=m(v,y.crossOrigin);r.d.L(g,v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},vn.preloadModule=function(g,y){if(typeof g=="string")if(y){var v=m(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},vn.requestFormReset=function(g){r.d.r(g)},vn.unstable_batchedUpdates=function(g,y){return g(y)},vn.useFormState=function(g,y,v){return u.H.useFormState(g,y,v)},vn.useFormStatus=function(){return u.H.useHostTransitionStatus()},vn.version="19.1.0",vn}var z_;function EA(){if(z_)return Ym.exports;z_=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Ym.exports=bA(),Ym.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function TA(){if(F_)return sc;F_=1;var a=wA(),e=tp(),t=EA();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(r(188))}function g(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,c=i;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return m(f),n;if(p===c)return m(f),i;p=p.sibling}throw Error(r(188))}if(o.return!==c.return)o=f,c=p;else{for(var E=!1,A=f.child;A;){if(A===o){E=!0,o=f,c=p;break}if(A===c){E=!0,c=f,o=p;break}A=A.sibling}if(!E){for(A=p.child;A;){if(A===o){E=!0,o=p,c=f;break}if(A===c){E=!0,c=p,o=f;break}A=A.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function y(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=y(n),i!==null)return i;n=n.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),G=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function $(n){return n===null||typeof n!="object"?null:(n=q&&n[q]||n["@@iterator"],typeof n=="function"?n:null)}var P=Symbol.for("react.client.reference");function St(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===P?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case x:return"Profiler";case S:return"StrictMode";case oe:return"Suspense";case de:return"SuspenseList";case j:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case C:return"Portal";case G:return(n.displayName||"Context")+".Provider";case B:return(n._context.displayName||"Context")+".Consumer";case re:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case M:return i=n.displayName||null,i!==null?i:St(n.type)||"Memo";case N:i=n._payload,n=n._init;try{return St(n(i))}catch{}}return null}var ht=Array.isArray,ae=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Be=[],L=-1;function he(n){return{current:n}}function H(n){0>L||(n.current=Be[L],Be[L]=null,L--)}function D(n,i){L++,Be[L]=n.current,n.current=i}var K=he(null),Z=he(null),V=he(null),ve=he(null);function te(n,i){switch(D(V,i),D(Z,n),D(K,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?l_(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=l_(i),n=c_(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}H(K),D(K,n)}function Re(){H(K),H(Z),H(V)}function He(n){n.memoizedState!==null&&D(ve,n);var i=K.current,o=c_(i,n.type);i!==o&&(D(Z,n),D(K,o))}function pe(n){Z.current===n&&(H(K),H(Z)),ve.current===n&&(H(ve),ec._currentValue=be)}var ge=Object.prototype.hasOwnProperty,Ce=a.unstable_scheduleCallback,Pe=a.unstable_cancelCallback,Xe=a.unstable_shouldYield,ye=a.unstable_requestPaint,Oe=a.unstable_now,xt=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,Te=a.unstable_UserBlockingPriority,rt=a.unstable_NormalPriority,pn=a.unstable_LowPriority,Sn=a.unstable_IdlePriority,$t=a.log,Ct=a.unstable_setDisableYieldValue,pt=null,Qe=null;function Ne(n){if(typeof $t=="function"&&Ct(n),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(pt,n)}catch{}}var at=Math.clz32?Math.clz32:ji,Xc=Math.log,Gd=Math.LN2;function ji(n){return n>>>=0,n===0?32:31-(Xc(n)/Gd|0)|0}var Mi=256,Oi=4194304;function or(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Rs(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,p=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var A=c&134217727;return A!==0?(c=A&~p,c!==0?f=or(c):(E&=A,E!==0?f=or(E):o||(o=A&~n,o!==0&&(f=or(o))))):(A=c&~p,A!==0?f=or(A):E!==0?f=or(E):o||(o=c&~n,o!==0&&(f=or(o)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,o=i&-i,p>=o||p===32&&(o&4194048)!==0)?i:f}function Pi(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function el(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tl(){var n=Mi;return Mi<<=1,(Mi&4194048)===0&&(Mi=256),n}function nl(){var n=Oi;return Oi<<=1,(Oi&62914560)===0&&(Oi=4194304),n}function Kr(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Qr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function rl(n,i,o,c,f,p){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,O=n.expirationTimes,X=n.hiddenUpdates;for(o=E&~o;0<o;){var ie=31-at(o),le=1<<ie;A[ie]=0,O[ie]=-1;var J=X[ie];if(J!==null)for(X[ie]=null,ie=0;ie<J.length;ie++){var ee=J[ie];ee!==null&&(ee.lane&=-536870913)}o&=~le}c!==0&&vr(n,c,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(E&~i))}function vr(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-at(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&4194090}function al(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-at(o),f=1<<c;f&i|n[c]&i&&(n[c]|=i),o&=~f}}function Ua(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ks(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Va(){var n=me.p;return n!==0?n:(n=window.event,n===void 0?32:R_(n.type))}function Zc(n,i){var o=me.p;try{return me.p=n,i()}finally{me.p=o}}var Et=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Et,Bt="__reactProps$"+Et,Qn="__reactContainer$"+Et,il="__reactEvents$"+Et,$d="__reactListeners$"+Et,La="__reactHandles$"+Et,Jc="__reactResources$"+Et,Ui="__reactMarker$"+Et;function Ba(n){delete n[Kt],delete n[Bt],delete n[il],delete n[$d],delete n[La]}function Yr(n){var i=n[Kt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Qn]||o[Kt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=f_(n);n!==null;){if(o=n[Kt])return o;n=f_(n)}return i}n=o,o=n.parentNode}return null}function _r(n){if(n=n[Kt]||n[Qn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function wr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function xn(n){var i=n[Jc];return i||(i=n[Jc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Pt(n){n[Ui]=!0}var sl=new Set,Is={};function lr(n,i){Wr(n,i),Wr(n+"Capture",i)}function Wr(n,i){for(Is[n]=i,n=0;n<i.length;n++)sl.add(i[n])}var eu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tu={},Vi={};function nu(n){return ge.call(Vi,n)?!0:ge.call(tu,n)?!1:eu.test(n)?Vi[n]=!0:(tu[n]=!0,!1)}function za(n,i,o){if(nu(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function br(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function on(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}var Li,ru;function Xr(n){if(Li===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Li=i&&i[1]||"",ru=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Li+n+ru}var Ns=!1;function Ds(n,i){if(!n||Ns)return"";Ns=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ee){var J=ee}Reflect.construct(n,[],le)}else{try{le.call()}catch(ee){J=ee}n.call(le.prototype)}}else{try{throw Error()}catch(ee){J=ee}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ee){if(ee&&J&&typeof ee.stack=="string")return[ee.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),E=p[0],A=p[1];if(E&&A){var O=E.split(`
`),X=A.split(`
`);for(f=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;f<X.length&&!X[f].includes("DetermineComponentFrameRoot");)f++;if(c===O.length||f===X.length)for(c=O.length-1,f=X.length-1;1<=c&&0<=f&&O[c]!==X[f];)f--;for(;1<=c&&0<=f;c--,f--)if(O[c]!==X[f]){if(c!==1||f!==1)do if(c--,f--,0>f||O[c]!==X[f]){var ie=`
`+O[c].replace(" at new "," at ");return n.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",n.displayName)),ie}while(1<=c&&0<=f);break}}}finally{Ns=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Xr(o):""}function ol(n){switch(n.tag){case 26:case 27:case 5:return Xr(n.type);case 16:return Xr("Lazy");case 13:return Xr("Suspense");case 19:return Xr("SuspenseList");case 0:case 15:return Ds(n.type,!1);case 11:return Ds(n.type.render,!1);case 1:return Ds(n.type,!0);case 31:return Xr("Activity");default:return""}}function js(n){try{var i="";do i+=ol(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Cn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ll(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Kd(n){var i=ll(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){c=""+E,p.call(this,E)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ms(n){n._valueTracker||(n._valueTracker=Kd(n))}function cl(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=ll(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function Bi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Qd=/[\n"\\]/g;function zt(n){return n.replace(Qd,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Un(n,i,o,c,f,p,E,A){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),i!=null?E==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Cn(i)):n.value!==""+Cn(i)&&(n.value=""+Cn(i)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),i!=null?Fa(n,E,Cn(i)):o!=null?Fa(n,E,Cn(o)):c!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+Cn(A):n.removeAttribute("name")}function zi(n,i,o,c,f,p,E,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||i!=null))return;o=o!=null?""+Cn(o):"",i=i!=null?""+Cn(i):o,A||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=A?n.checked:!!c,n.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Fa(n,i,o){i==="number"&&Bi(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Zr(n,i,o,c){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Cn(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function dt(n,i,o){if(i!=null&&(i=""+Cn(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Cn(o):""}function Fi(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(r(92));if(ht(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=Cn(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c)}function Yn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var qi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function au(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||qi.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function ul(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&o[f]!==c&&au(n,f,c)}else for(var p in i)i.hasOwnProperty(p)&&au(n,p,i[p])}function hl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Os(n){return Wd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Jr=null;function Wn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ea=null,ta=null;function dl(n){var i=_r(n);if(i&&(n=i.stateNode)){var o=n[Bt]||null;e:switch(n=i.stateNode,i.type){case"input":if(Un(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+zt(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var f=c[Bt]||null;if(!f)throw Error(r(90));Un(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&cl(c)}break e;case"textarea":dt(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Zr(n,!!o.multiple,i,!1)}}}var Er=!1;function iu(n,i,o){if(Er)return n(i,o);Er=!0;try{var c=n(i);return c}finally{if(Er=!1,(ea!==null||ta!==null)&&(Zu(),ea&&(i=ea,n=ta,ta=ea=null,dl(i),n)))for(i=0;i<n.length;i++)dl(n[i])}}function Hi(n,i){var o=n.stateNode;if(o===null)return null;var c=o[Bt]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xn=!1;if(cr)try{var Gi={};Object.defineProperty(Gi,"passive",{get:function(){Xn=!0}}),window.addEventListener("test",Gi,Gi),window.removeEventListener("test",Gi,Gi)}catch{Xn=!1}var Tr=null,qa=null,na=null;function fl(){if(na)return na;var n,i=qa,o=i.length,c,f="value"in Tr?Tr.value:Tr.textContent,p=f.length;for(n=0;n<o&&i[n]===f[n];n++);var E=o-n;for(c=1;c<=E&&i[o-c]===f[p-c];c++);return na=f.slice(n,1<c?1-c:void 0)}function Sr(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function xr(){return!0}function ml(){return!1}function Jt(n){function i(o,c,f,p,E){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?xr:ml,this.isPropagationStopped=ml,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=xr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=xr)},persist:function(){},isPersistent:xr}),i}var ot={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ps=Jt(ot),$i=v({},ot,{view:0,detail:0}),su=Jt($i),Us,Vs,Cr,Ki=v({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Cr&&(Cr&&n.type==="mousemove"?(Us=n.screenX-Cr.screenX,Vs=n.screenY-Cr.screenY):Vs=Us=0,Cr=n),Us)},movementY:function(n){return"movementY"in n?n.movementY:Vs}}),Zn=Jt(Ki),ou=v({},Ki,{dataTransfer:0}),Xd=Jt(ou),Qi=v({},$i,{relatedTarget:0}),Ls=Jt(Qi),gl=v({},ot,{animationName:0,elapsedTime:0,pseudoElement:0}),Bs=Jt(gl),lu=v({},ot,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),zs=Jt(lu),Zd=v({},ot,{data:0}),pl=Jt(Zd),Yi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=uu[n])?!!i[n]:!1}function Wi(){return yl}var hu=v({},$i,{key:function(n){if(n.key){var i=Yi[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Sr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?cu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wi,charCode:function(n){return n.type==="keypress"?Sr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Sr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Fs=Jt(hu),du=v({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vl=Jt(du),ra=v({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wi}),fu=Jt(ra),mu=v({},ot,{propertyName:0,elapsedTime:0,pseudoElement:0}),gu=Jt(mu),pu=v({},Ki,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),qs=Jt(pu),An=v({},ot,{newState:0,oldState:0}),yu=Jt(An),vu=[9,13,27,32],Ar=cr&&"CompositionEvent"in window,h=null;cr&&"documentMode"in document&&(h=document.documentMode);var _=cr&&"TextEvent"in window&&!h,w=cr&&(!Ar||h&&8<h&&11>=h),k=" ",Y=!1;function ne(n,i){switch(n){case"keyup":return vu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fe(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Je=!1;function Qt(n,i){switch(n){case"compositionend":return fe(i);case"keypress":return i.which!==32?null:(Y=!0,k);case"textInput":return n=i.data,n===k&&Y?null:n;default:return null}}function et(n,i){if(Je)return n==="compositionend"||!Ar&&ne(n,i)?(n=fl(),na=qa=Tr=null,Je=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return w&&i.locale!=="ko"?null:i.data;default:return null}}var en={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yt(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!en[n.type]:i==="textarea"}function aa(n,i,o,c){ea?ta?ta.push(c):ta=[c]:ea=c,i=ah(i,"onChange"),0<i.length&&(o=new Ps("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var ln=null,Rr=null;function _l(n){r_(n,0)}function _u(n){var i=wr(n);if(cl(i))return n}function Sy(n,i){if(n==="change")return i}var xy=!1;if(cr){var Jd;if(cr){var ef="oninput"in document;if(!ef){var Cy=document.createElement("div");Cy.setAttribute("oninput","return;"),ef=typeof Cy.oninput=="function"}Jd=ef}else Jd=!1;xy=Jd&&(!document.documentMode||9<document.documentMode)}function Ay(){ln&&(ln.detachEvent("onpropertychange",Ry),Rr=ln=null)}function Ry(n){if(n.propertyName==="value"&&_u(Rr)){var i=[];aa(i,Rr,n,Wn(n)),iu(_l,i)}}function $x(n,i,o){n==="focusin"?(Ay(),ln=i,Rr=o,ln.attachEvent("onpropertychange",Ry)):n==="focusout"&&Ay()}function Kx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return _u(Rr)}function Qx(n,i){if(n==="click")return _u(i)}function Yx(n,i){if(n==="input"||n==="change")return _u(i)}function Wx(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Vn=typeof Object.is=="function"?Object.is:Wx;function wl(n,i){if(Vn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!ge.call(i,f)||!Vn(n[f],i[f]))return!1}return!0}function ky(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Iy(n,i){var o=ky(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ky(o)}}function Ny(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ny(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Dy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Bi(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Bi(n.document)}return i}function tf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var Xx=cr&&"documentMode"in document&&11>=document.documentMode,Hs=null,nf=null,bl=null,rf=!1;function jy(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;rf||Hs==null||Hs!==Bi(c)||(c=Hs,"selectionStart"in c&&tf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),bl&&wl(bl,c)||(bl=c,c=ah(nf,"onSelect"),0<c.length&&(i=new Ps("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=Hs)))}function Xi(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Gs={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionrun:Xi("Transition","TransitionRun"),transitionstart:Xi("Transition","TransitionStart"),transitioncancel:Xi("Transition","TransitionCancel"),transitionend:Xi("Transition","TransitionEnd")},af={},My={};cr&&(My=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function Zi(n){if(af[n])return af[n];if(!Gs[n])return n;var i=Gs[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in My)return af[n]=i[o];return n}var Oy=Zi("animationend"),Py=Zi("animationiteration"),Uy=Zi("animationstart"),Zx=Zi("transitionrun"),Jx=Zi("transitionstart"),eC=Zi("transitioncancel"),Vy=Zi("transitionend"),Ly=new Map,sf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sf.push("scrollEnd");function ur(n,i){Ly.set(n,i),lr(i,[n])}var By=new WeakMap;function Jn(n,i){if(typeof n=="object"&&n!==null){var o=By.get(n);return o!==void 0?o:(i={value:n,source:i,stack:js(i)},By.set(n,i),i)}return{value:n,source:i,stack:js(i)}}var er=[],$s=0,of=0;function wu(){for(var n=$s,i=of=$s=0;i<n;){var o=er[i];er[i++]=null;var c=er[i];er[i++]=null;var f=er[i];er[i++]=null;var p=er[i];if(er[i++]=null,c!==null&&f!==null){var E=c.pending;E===null?f.next=f:(f.next=E.next,E.next=f),c.pending=f}p!==0&&zy(o,f,p)}}function bu(n,i,o,c){er[$s++]=n,er[$s++]=i,er[$s++]=o,er[$s++]=c,of|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function lf(n,i,o,c){return bu(n,i,o,c),Eu(n)}function Ks(n,i){return bu(n,null,null,i),Eu(n)}function zy(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,p=n.return;p!==null;)p.childLanes|=o,c=p.alternate,c!==null&&(c.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&i!==null&&(f=31-at(o),n=p.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=o|536870912),p):null}function Eu(n){if(50<$l)throw $l=0,mm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Qs={};function tC(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(n,i,o,c){return new tC(n,i,o,c)}function cf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ia(n,i){var o=n.alternate;return o===null?(o=Ln(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Fy(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Tu(n,i,o,c,f,p){var E=0;if(c=n,typeof n=="function")cf(n)&&(E=1);else if(typeof n=="string")E=rA(n,o,K.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case j:return n=Ln(31,o,i,f),n.elementType=j,n.lanes=p,n;case R:return Ji(o.children,f,p,i);case S:E=8,f|=24;break;case x:return n=Ln(12,o,i,f|2),n.elementType=x,n.lanes=p,n;case oe:return n=Ln(13,o,i,f),n.elementType=oe,n.lanes=p,n;case de:return n=Ln(19,o,i,f),n.elementType=de,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case I:case G:E=10;break e;case B:E=9;break e;case re:E=11;break e;case M:E=14;break e;case N:E=16,c=null;break e}E=29,o=Error(r(130,n===null?"null":typeof n,"")),c=null}return i=Ln(E,o,i,f),i.elementType=n,i.type=c,i.lanes=p,i}function Ji(n,i,o,c){return n=Ln(7,n,c,i),n.lanes=o,n}function uf(n,i,o){return n=Ln(6,n,null,i),n.lanes=o,n}function hf(n,i,o){return i=Ln(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Ys=[],Ws=0,Su=null,xu=0,tr=[],nr=0,es=null,sa=1,oa="";function ts(n,i){Ys[Ws++]=xu,Ys[Ws++]=Su,Su=n,xu=i}function qy(n,i,o){tr[nr++]=sa,tr[nr++]=oa,tr[nr++]=es,es=n;var c=sa;n=oa;var f=32-at(c)-1;c&=~(1<<f),o+=1;var p=32-at(i)+f;if(30<p){var E=f-f%5;p=(c&(1<<E)-1).toString(32),c>>=E,f-=E,sa=1<<32-at(i)+f|o<<f|c,oa=p+n}else sa=1<<p|o<<f|c,oa=n}function df(n){n.return!==null&&(ts(n,1),qy(n,1,0))}function ff(n){for(;n===Su;)Su=Ys[--Ws],Ys[Ws]=null,xu=Ys[--Ws],Ys[Ws]=null;for(;n===es;)es=tr[--nr],tr[nr]=null,oa=tr[--nr],tr[nr]=null,sa=tr[--nr],tr[nr]=null}var Rn=null,It=null,st=!1,ns=null,kr=!1,mf=Error(r(519));function rs(n){var i=Error(r(418,""));throw Sl(Jn(i,n)),mf}function Hy(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[Kt]=n,i[Bt]=c,o){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(o=0;o<Ql.length;o++)Ke(Ql[o],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":Ke("invalid",i),zi(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Ms(i);break;case"select":Ke("invalid",i);break;case"textarea":Ke("invalid",i),Fi(i,c.value,c.defaultValue,c.children),Ms(i)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||o_(i.textContent,o)?(c.popover!=null&&(Ke("beforetoggle",i),Ke("toggle",i)),c.onScroll!=null&&Ke("scroll",i),c.onScrollEnd!=null&&Ke("scrollend",i),c.onClick!=null&&(i.onclick=ih),i=!0):i=!1,i||rs(n)}function Gy(n){for(Rn=n.return;Rn;)switch(Rn.tag){case 5:case 13:kr=!1;return;case 27:case 3:kr=!0;return;default:Rn=Rn.return}}function El(n){if(n!==Rn)return!1;if(!st)return Gy(n),st=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Im(n.type,n.memoizedProps)),o=!o),o&&It&&rs(n),Gy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){It=dr(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}It=null}}else i===27?(i=It,ii(n.type)?(n=Mm,Mm=null,It=n):It=i):It=Rn?dr(n.stateNode.nextSibling):null;return!0}function Tl(){It=Rn=null,st=!1}function $y(){var n=ns;return n!==null&&(jn===null?jn=n:jn.push.apply(jn,n),ns=null),n}function Sl(n){ns===null?ns=[n]:ns.push(n)}var gf=he(null),as=null,la=null;function Ha(n,i,o){D(gf,i._currentValue),i._currentValue=o}function ca(n){n._currentValue=gf.current,H(gf)}function pf(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function yf(n,i,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var E=f.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=f;for(var O=0;O<i.length;O++)if(A.context===i[O]){p.lanes|=o,A=p.alternate,A!==null&&(A.lanes|=o),pf(p.return,o,n),c||(E=null);break e}p=A.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=o,p=E.alternate,p!==null&&(p.lanes|=o),pf(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function xl(n,i,o,c){n=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var A=f.type;Vn(f.pendingProps.value,E.value)||(n!==null?n.push(A):n=[A])}}else if(f===ve.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(ec):n=[ec])}f=f.return}n!==null&&yf(i,n,o,c),i.flags|=262144}function Cu(n){for(n=n.firstContext;n!==null;){if(!Vn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function is(n){as=n,la=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function yn(n){return Ky(as,n)}function Au(n,i){return as===null&&is(n),Ky(n,i)}function Ky(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},la===null){if(n===null)throw Error(r(308));la=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else la=la.next=i;return o}var nC=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},rC=a.unstable_scheduleCallback,aC=a.unstable_NormalPriority,Wt={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vf(){return{controller:new nC,data:new Map,refCount:0}}function Cl(n){n.refCount--,n.refCount===0&&rC(aC,function(){n.controller.abort()})}var Al=null,_f=0,Xs=0,Zs=null;function iC(n,i){if(Al===null){var o=Al=[];_f=0,Xs=bm(),Zs={status:"pending",value:void 0,then:function(c){o.push(c)}}}return _f++,i.then(Qy,Qy),i}function Qy(){if(--_f===0&&Al!==null){Zs!==null&&(Zs.status="fulfilled");var n=Al;Al=null,Xs=0,Zs=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function sC(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var Yy=ae.S;ae.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&iC(n,i),Yy!==null&&Yy(n,i)};var ss=he(null);function wf(){var n=ss.current;return n!==null?n:_t.pooledCache}function Ru(n,i){i===null?D(ss,ss.current):D(ss,i.pool)}function Wy(){var n=wf();return n===null?null:{parent:Wt._currentValue,pool:n}}var Rl=Error(r(460)),Xy=Error(r(474)),ku=Error(r(542)),bf={then:function(){}};function Zy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Iu(){}function Jy(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(Iu,Iu),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,tv(n),n;default:if(typeof i.status=="string")i.then(Iu,Iu);else{if(n=_t,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,tv(n),n}throw kl=i,Rl}}var kl=null;function ev(){if(kl===null)throw Error(r(459));var n=kl;return kl=null,n}function tv(n){if(n===Rl||n===ku)throw Error(r(483))}var Ga=!1;function Ef(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function $a(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ka(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ct&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=Eu(n),zy(n,null,o),i}return bu(n,c,i,o),Eu(n)}function Il(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,al(n,o)}}function Sf(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=E:p=p.next=E,o=o.next}while(o!==null);p===null?f=p=i:p=p.next=i}else f=p=i;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var xf=!1;function Nl(){if(xf){var n=Zs;if(n!==null)throw n}}function Dl(n,i,o,c){xf=!1;var f=n.updateQueue;Ga=!1;var p=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var O=A,X=O.next;O.next=null,E===null?p=X:E.next=X,E=O;var ie=n.alternate;ie!==null&&(ie=ie.updateQueue,A=ie.lastBaseUpdate,A!==E&&(A===null?ie.firstBaseUpdate=X:A.next=X,ie.lastBaseUpdate=O))}if(p!==null){var le=f.baseState;E=0,ie=X=O=null,A=p;do{var J=A.lane&-536870913,ee=J!==A.lane;if(ee?(tt&J)===J:(c&J)===J){J!==0&&J===Xs&&(xf=!0),ie!==null&&(ie=ie.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var je=n,ke=A;J=i;var gt=o;switch(ke.tag){case 1:if(je=ke.payload,typeof je=="function"){le=je.call(gt,le,J);break e}le=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=ke.payload,J=typeof je=="function"?je.call(gt,le,J):je,J==null)break e;le=v({},le,J);break e;case 2:Ga=!0}}J=A.callback,J!==null&&(n.flags|=64,ee&&(n.flags|=8192),ee=f.callbacks,ee===null?f.callbacks=[J]:ee.push(J))}else ee={lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ie===null?(X=ie=ee,O=le):ie=ie.next=ee,E|=J;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);ie===null&&(O=le),f.baseState=O,f.firstBaseUpdate=X,f.lastBaseUpdate=ie,p===null&&(f.shared.lanes=0),ti|=E,n.lanes=E,n.memoizedState=le}}function nv(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function rv(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)nv(o[n],i)}var Js=he(null),Nu=he(0);function av(n,i){n=pa,D(Nu,n),D(Js,i),pa=n|i.baseLanes}function Cf(){D(Nu,pa),D(Js,Js.current)}function Af(){pa=Nu.current,H(Js),H(Nu)}var Qa=0,Fe=null,ft=null,Ft=null,Du=!1,eo=!1,os=!1,ju=0,jl=0,to=null,oC=0;function Ut(){throw Error(r(321))}function Rf(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Vn(n[o],i[o]))return!1;return!0}function kf(n,i,o,c,f,p){return Qa=p,Fe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ae.H=n===null||n.memoizedState===null?zv:Fv,os=!1,p=o(c,f),os=!1,eo&&(p=sv(i,o,c,f)),iv(n),p}function iv(n){ae.H=Lu;var i=ft!==null&&ft.next!==null;if(Qa=0,Ft=ft=Fe=null,Du=!1,jl=0,to=null,i)throw Error(r(300));n===null||tn||(n=n.dependencies,n!==null&&Cu(n)&&(tn=!0))}function sv(n,i,o,c){Fe=n;var f=0;do{if(eo&&(to=null),jl=0,eo=!1,25<=f)throw Error(r(301));if(f+=1,Ft=ft=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}ae.H=mC,p=i(o,c)}while(eo);return p}function lC(){var n=ae.H,i=n.useState()[0];return i=typeof i.then=="function"?Ml(i):i,n=n.useState()[0],(ft!==null?ft.memoizedState:null)!==n&&(Fe.flags|=1024),i}function If(){var n=ju!==0;return ju=0,n}function Nf(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Df(n){if(Du){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Du=!1}Qa=0,Ft=ft=Fe=null,eo=!1,jl=ju=0,to=null}function Nn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?Fe.memoizedState=Ft=n:Ft=Ft.next=n,Ft}function qt(){if(ft===null){var n=Fe.alternate;n=n!==null?n.memoizedState:null}else n=ft.next;var i=Ft===null?Fe.memoizedState:Ft.next;if(i!==null)Ft=i,ft=n;else{if(n===null)throw Fe.alternate===null?Error(r(467)):Error(r(310));ft=n,n={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Ft===null?Fe.memoizedState=Ft=n:Ft=Ft.next=n}return Ft}function jf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ml(n){var i=jl;return jl+=1,to===null&&(to=[]),n=Jy(to,n,i),i=Fe,(Ft===null?i.memoizedState:Ft.next)===null&&(i=i.alternate,ae.H=i===null||i.memoizedState===null?zv:Fv),n}function Mu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ml(n);if(n.$$typeof===G)return yn(n)}throw Error(r(438,String(n)))}function Mf(n){var i=null,o=Fe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=Fe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=jf(),Fe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=U;return i.index++,o}function ua(n,i){return typeof i=="function"?i(n):i}function Ou(n){var i=qt();return Of(i,ft,n)}function Of(n,i,o){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var f=n.baseQueue,p=c.pending;if(p!==null){if(f!==null){var E=f.next;f.next=p.next,p.next=E}i.baseQueue=f=p,c.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{i=f.next;var A=E=null,O=null,X=i,ie=!1;do{var le=X.lane&-536870913;if(le!==X.lane?(tt&le)===le:(Qa&le)===le){var J=X.revertLane;if(J===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),le===Xs&&(ie=!0);else if((Qa&J)===J){X=X.next,J===Xs&&(ie=!0);continue}else le={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},O===null?(A=O=le,E=p):O=O.next=le,Fe.lanes|=J,ti|=J;le=X.action,os&&o(p,le),p=X.hasEagerState?X.eagerState:o(p,le)}else J={lane:le,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},O===null?(A=O=J,E=p):O=O.next=J,Fe.lanes|=le,ti|=le;X=X.next}while(X!==null&&X!==i);if(O===null?E=p:O.next=A,!Vn(p,n.memoizedState)&&(tn=!0,ie&&(o=Zs,o!==null)))throw o;n.memoizedState=p,n.baseState=E,n.baseQueue=O,c.lastRenderedState=p}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Pf(n){var i=qt(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,p=i.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do p=n(p,E.action),E=E.next;while(E!==f);Vn(p,i.memoizedState)||(tn=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,c]}function ov(n,i,o){var c=Fe,f=qt(),p=st;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=i();var E=!Vn((ft||f).memoizedState,o);E&&(f.memoizedState=o,tn=!0),f=f.queue;var A=uv.bind(null,c,f,n);if(Ol(2048,8,A,[n]),f.getSnapshot!==i||E||Ft!==null&&Ft.memoizedState.tag&1){if(c.flags|=2048,no(9,Pu(),cv.bind(null,c,f,o,i),null),_t===null)throw Error(r(349));p||(Qa&124)!==0||lv(c,i,o)}return o}function lv(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Fe.updateQueue,i===null?(i=jf(),Fe.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function cv(n,i,o,c){i.value=o,i.getSnapshot=c,hv(i)&&dv(n)}function uv(n,i,o){return o(function(){hv(i)&&dv(n)})}function hv(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Vn(n,o)}catch{return!0}}function dv(n){var i=Ks(n,2);i!==null&&Hn(i,n,2)}function Uf(n){var i=Nn();if(typeof n=="function"){var o=n;if(n=o(),os){Ne(!0);try{o()}finally{Ne(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:n},i}function fv(n,i,o,c){return n.baseState=o,Of(n,ft,typeof c=="function"?c:ua)}function cC(n,i,o,c,f){if(Vu(n))throw Error(r(485));if(n=i.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};ae.T!==null?o(!0):p.isTransition=!1,c(p),o=i.pending,o===null?(p.next=i.pending=p,mv(i,p)):(p.next=o.next,i.pending=o.next=p)}}function mv(n,i){var o=i.action,c=i.payload,f=n.state;if(i.isTransition){var p=ae.T,E={};ae.T=E;try{var A=o(f,c),O=ae.S;O!==null&&O(E,A),gv(n,i,A)}catch(X){Vf(n,i,X)}finally{ae.T=p}}else try{p=o(f,c),gv(n,i,p)}catch(X){Vf(n,i,X)}}function gv(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){pv(n,i,c)},function(c){return Vf(n,i,c)}):pv(n,i,o)}function pv(n,i,o){i.status="fulfilled",i.value=o,yv(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,mv(n,o)))}function Vf(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,yv(i),i=i.next;while(i!==c)}n.action=null}function yv(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function vv(n,i){return i}function _v(n,i){if(st){var o=_t.formState;if(o!==null){e:{var c=Fe;if(st){if(It){t:{for(var f=It,p=kr;f.nodeType!==8;){if(!p){f=null;break t}if(f=dr(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){It=dr(f.nextSibling),c=f.data==="F!";break e}}rs(c)}c=!1}c&&(i=o[0])}}return o=Nn(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vv,lastRenderedState:i},o.queue=c,o=Vv.bind(null,Fe,c),c.dispatch=o,c=Uf(!1),p=qf.bind(null,Fe,!1,c.queue),c=Nn(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,o=cC.bind(null,Fe,f,p,o),f.dispatch=o,c.memoizedState=n,[i,o,!1]}function wv(n){var i=qt();return bv(i,ft,n)}function bv(n,i,o){if(i=Of(n,i,vv)[0],n=Ou(ua)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Ml(i)}catch(E){throw E===Rl?ku:E}else c=i;i=qt();var f=i.queue,p=f.dispatch;return o!==i.memoizedState&&(Fe.flags|=2048,no(9,Pu(),uC.bind(null,f,o),null)),[c,p,n]}function uC(n,i){n.action=i}function Ev(n){var i=qt(),o=ft;if(o!==null)return bv(i,o,n);qt(),i=i.memoizedState,o=qt();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function no(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=Fe.updateQueue,i===null&&(i=jf(),Fe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function Pu(){return{destroy:void 0,resource:void 0}}function Tv(){return qt().memoizedState}function Uu(n,i,o,c){var f=Nn();c=c===void 0?null:c,Fe.flags|=n,f.memoizedState=no(1|i,Pu(),o,c)}function Ol(n,i,o,c){var f=qt();c=c===void 0?null:c;var p=f.memoizedState.inst;ft!==null&&c!==null&&Rf(c,ft.memoizedState.deps)?f.memoizedState=no(i,p,o,c):(Fe.flags|=n,f.memoizedState=no(1|i,p,o,c))}function Sv(n,i){Uu(8390656,8,n,i)}function xv(n,i){Ol(2048,8,n,i)}function Cv(n,i){return Ol(4,2,n,i)}function Av(n,i){return Ol(4,4,n,i)}function Rv(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function kv(n,i,o){o=o!=null?o.concat([n]):null,Ol(4,4,Rv.bind(null,i,n),o)}function Lf(){}function Iv(n,i){var o=qt();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Rf(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function Nv(n,i){var o=qt();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Rf(i,c[1]))return c[0];if(c=n(),os){Ne(!0);try{n()}finally{Ne(!1)}}return o.memoizedState=[c,i],c}function Bf(n,i,o){return o===void 0||(Qa&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=M0(),Fe.lanes|=n,ti|=n,o)}function Dv(n,i,o,c){return Vn(o,i)?o:Js.current!==null?(n=Bf(n,o,c),Vn(n,i)||(tn=!0),n):(Qa&42)===0?(tn=!0,n.memoizedState=o):(n=M0(),Fe.lanes|=n,ti|=n,i)}function jv(n,i,o,c,f){var p=me.p;me.p=p!==0&&8>p?p:8;var E=ae.T,A={};ae.T=A,qf(n,!1,i,o);try{var O=f(),X=ae.S;if(X!==null&&X(A,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ie=sC(O,c);Pl(n,i,ie,qn(n))}else Pl(n,i,c,qn(n))}catch(le){Pl(n,i,{then:function(){},status:"rejected",reason:le},qn())}finally{me.p=p,ae.T=E}}function hC(){}function zf(n,i,o,c){if(n.tag!==5)throw Error(r(476));var f=Mv(n).queue;jv(n,f,i,be,o===null?hC:function(){return Ov(n),o(c)})}function Mv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:be},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Ov(n){var i=Mv(n).next.queue;Pl(n,i,{},qn())}function Ff(){return yn(ec)}function Pv(){return qt().memoizedState}function Uv(){return qt().memoizedState}function dC(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=qn();n=$a(o);var c=Ka(i,n,o);c!==null&&(Hn(c,i,o),Il(c,i,o)),i={cache:vf()},n.payload=i;return}i=i.return}}function fC(n,i,o){var c=qn();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Vu(n)?Lv(i,o):(o=lf(n,i,o,c),o!==null&&(Hn(o,n,c),Bv(o,i,c)))}function Vv(n,i,o){var c=qn();Pl(n,i,o,c)}function Pl(n,i,o,c){var f={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Vu(n))Lv(i,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var E=i.lastRenderedState,A=p(E,o);if(f.hasEagerState=!0,f.eagerState=A,Vn(A,E))return bu(n,i,f,0),_t===null&&wu(),!1}catch{}finally{}if(o=lf(n,i,f,c),o!==null)return Hn(o,n,c),Bv(o,i,c),!0}return!1}function qf(n,i,o,c){if(c={lane:2,revertLane:bm(),action:c,hasEagerState:!1,eagerState:null,next:null},Vu(n)){if(i)throw Error(r(479))}else i=lf(n,o,c,2),i!==null&&Hn(i,n,2)}function Vu(n){var i=n.alternate;return n===Fe||i!==null&&i===Fe}function Lv(n,i){eo=Du=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function Bv(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,al(n,o)}}var Lu={readContext:yn,use:Mu,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut},zv={readContext:yn,use:Mu,useCallback:function(n,i){return Nn().memoizedState=[n,i===void 0?null:i],n},useContext:yn,useEffect:Sv,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Uu(4194308,4,Rv.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Uu(4194308,4,n,i)},useInsertionEffect:function(n,i){Uu(4,2,n,i)},useMemo:function(n,i){var o=Nn();i=i===void 0?null:i;var c=n();if(os){Ne(!0);try{n()}finally{Ne(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=Nn();if(o!==void 0){var f=o(i);if(os){Ne(!0);try{o(i)}finally{Ne(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=fC.bind(null,Fe,n),[c.memoizedState,n]},useRef:function(n){var i=Nn();return n={current:n},i.memoizedState=n},useState:function(n){n=Uf(n);var i=n.queue,o=Vv.bind(null,Fe,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:Lf,useDeferredValue:function(n,i){var o=Nn();return Bf(o,n,i)},useTransition:function(){var n=Uf(!1);return n=jv.bind(null,Fe,n.queue,!0,!1),Nn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=Fe,f=Nn();if(st){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),_t===null)throw Error(r(349));(tt&124)!==0||lv(c,i,o)}f.memoizedState=o;var p={value:o,getSnapshot:i};return f.queue=p,Sv(uv.bind(null,c,p,n),[n]),c.flags|=2048,no(9,Pu(),cv.bind(null,c,p,o,i),null),o},useId:function(){var n=Nn(),i=_t.identifierPrefix;if(st){var o=oa,c=sa;o=(c&~(1<<32-at(c)-1)).toString(32)+o,i=""+i+"R"+o,o=ju++,0<o&&(i+="H"+o.toString(32)),i+=""}else o=oC++,i=""+i+"r"+o.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:Ff,useFormState:_v,useActionState:_v,useOptimistic:function(n){var i=Nn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=qf.bind(null,Fe,!0,o),o.dispatch=i,[n,i]},useMemoCache:Mf,useCacheRefresh:function(){return Nn().memoizedState=dC.bind(null,Fe)}},Fv={readContext:yn,use:Mu,useCallback:Iv,useContext:yn,useEffect:xv,useImperativeHandle:kv,useInsertionEffect:Cv,useLayoutEffect:Av,useMemo:Nv,useReducer:Ou,useRef:Tv,useState:function(){return Ou(ua)},useDebugValue:Lf,useDeferredValue:function(n,i){var o=qt();return Dv(o,ft.memoizedState,n,i)},useTransition:function(){var n=Ou(ua)[0],i=qt().memoizedState;return[typeof n=="boolean"?n:Ml(n),i]},useSyncExternalStore:ov,useId:Pv,useHostTransitionStatus:Ff,useFormState:wv,useActionState:wv,useOptimistic:function(n,i){var o=qt();return fv(o,ft,n,i)},useMemoCache:Mf,useCacheRefresh:Uv},mC={readContext:yn,use:Mu,useCallback:Iv,useContext:yn,useEffect:xv,useImperativeHandle:kv,useInsertionEffect:Cv,useLayoutEffect:Av,useMemo:Nv,useReducer:Pf,useRef:Tv,useState:function(){return Pf(ua)},useDebugValue:Lf,useDeferredValue:function(n,i){var o=qt();return ft===null?Bf(o,n,i):Dv(o,ft.memoizedState,n,i)},useTransition:function(){var n=Pf(ua)[0],i=qt().memoizedState;return[typeof n=="boolean"?n:Ml(n),i]},useSyncExternalStore:ov,useId:Pv,useHostTransitionStatus:Ff,useFormState:Ev,useActionState:Ev,useOptimistic:function(n,i){var o=qt();return ft!==null?fv(o,ft,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Mf,useCacheRefresh:Uv},ro=null,Ul=0;function Bu(n){var i=Ul;return Ul+=1,ro===null&&(ro=[]),Jy(ro,n,i)}function Vl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function zu(n,i){throw i.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function qv(n){var i=n._init;return i(n._payload)}function Hv(n){function i(Q,z){if(n){var W=Q.deletions;W===null?(Q.deletions=[z],Q.flags|=16):W.push(z)}}function o(Q,z){if(!n)return null;for(;z!==null;)i(Q,z),z=z.sibling;return null}function c(Q){for(var z=new Map;Q!==null;)Q.key!==null?z.set(Q.key,Q):z.set(Q.index,Q),Q=Q.sibling;return z}function f(Q,z){return Q=ia(Q,z),Q.index=0,Q.sibling=null,Q}function p(Q,z,W){return Q.index=W,n?(W=Q.alternate,W!==null?(W=W.index,W<z?(Q.flags|=67108866,z):W):(Q.flags|=67108866,z)):(Q.flags|=1048576,z)}function E(Q){return n&&Q.alternate===null&&(Q.flags|=67108866),Q}function A(Q,z,W,se){return z===null||z.tag!==6?(z=uf(W,Q.mode,se),z.return=Q,z):(z=f(z,W),z.return=Q,z)}function O(Q,z,W,se){var Ee=W.type;return Ee===R?ie(Q,z,W.props.children,se,W.key):z!==null&&(z.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===N&&qv(Ee)===z.type)?(z=f(z,W.props),Vl(z,W),z.return=Q,z):(z=Tu(W.type,W.key,W.props,null,Q.mode,se),Vl(z,W),z.return=Q,z)}function X(Q,z,W,se){return z===null||z.tag!==4||z.stateNode.containerInfo!==W.containerInfo||z.stateNode.implementation!==W.implementation?(z=hf(W,Q.mode,se),z.return=Q,z):(z=f(z,W.children||[]),z.return=Q,z)}function ie(Q,z,W,se,Ee){return z===null||z.tag!==7?(z=Ji(W,Q.mode,se,Ee),z.return=Q,z):(z=f(z,W),z.return=Q,z)}function le(Q,z,W){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=uf(""+z,Q.mode,W),z.return=Q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case T:return W=Tu(z.type,z.key,z.props,null,Q.mode,W),Vl(W,z),W.return=Q,W;case C:return z=hf(z,Q.mode,W),z.return=Q,z;case N:var se=z._init;return z=se(z._payload),le(Q,z,W)}if(ht(z)||$(z))return z=Ji(z,Q.mode,W,null),z.return=Q,z;if(typeof z.then=="function")return le(Q,Bu(z),W);if(z.$$typeof===G)return le(Q,Au(Q,z),W);zu(Q,z)}return null}function J(Q,z,W,se){var Ee=z!==null?z.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Ee!==null?null:A(Q,z,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case T:return W.key===Ee?O(Q,z,W,se):null;case C:return W.key===Ee?X(Q,z,W,se):null;case N:return Ee=W._init,W=Ee(W._payload),J(Q,z,W,se)}if(ht(W)||$(W))return Ee!==null?null:ie(Q,z,W,se,null);if(typeof W.then=="function")return J(Q,z,Bu(W),se);if(W.$$typeof===G)return J(Q,z,Au(Q,W),se);zu(Q,W)}return null}function ee(Q,z,W,se,Ee){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Q=Q.get(W)||null,A(z,Q,""+se,Ee);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case T:return Q=Q.get(se.key===null?W:se.key)||null,O(z,Q,se,Ee);case C:return Q=Q.get(se.key===null?W:se.key)||null,X(z,Q,se,Ee);case N:var Ge=se._init;return se=Ge(se._payload),ee(Q,z,W,se,Ee)}if(ht(se)||$(se))return Q=Q.get(W)||null,ie(z,Q,se,Ee,null);if(typeof se.then=="function")return ee(Q,z,W,Bu(se),Ee);if(se.$$typeof===G)return ee(Q,z,W,Au(z,se),Ee);zu(z,se)}return null}function je(Q,z,W,se){for(var Ee=null,Ge=null,Se=z,Ie=z=0,rn=null;Se!==null&&Ie<W.length;Ie++){Se.index>Ie?(rn=Se,Se=null):rn=Se.sibling;var it=J(Q,Se,W[Ie],se);if(it===null){Se===null&&(Se=rn);break}n&&Se&&it.alternate===null&&i(Q,Se),z=p(it,z,Ie),Ge===null?Ee=it:Ge.sibling=it,Ge=it,Se=rn}if(Ie===W.length)return o(Q,Se),st&&ts(Q,Ie),Ee;if(Se===null){for(;Ie<W.length;Ie++)Se=le(Q,W[Ie],se),Se!==null&&(z=p(Se,z,Ie),Ge===null?Ee=Se:Ge.sibling=Se,Ge=Se);return st&&ts(Q,Ie),Ee}for(Se=c(Se);Ie<W.length;Ie++)rn=ee(Se,Q,Ie,W[Ie],se),rn!==null&&(n&&rn.alternate!==null&&Se.delete(rn.key===null?Ie:rn.key),z=p(rn,z,Ie),Ge===null?Ee=rn:Ge.sibling=rn,Ge=rn);return n&&Se.forEach(function(ui){return i(Q,ui)}),st&&ts(Q,Ie),Ee}function ke(Q,z,W,se){if(W==null)throw Error(r(151));for(var Ee=null,Ge=null,Se=z,Ie=z=0,rn=null,it=W.next();Se!==null&&!it.done;Ie++,it=W.next()){Se.index>Ie?(rn=Se,Se=null):rn=Se.sibling;var ui=J(Q,Se,it.value,se);if(ui===null){Se===null&&(Se=rn);break}n&&Se&&ui.alternate===null&&i(Q,Se),z=p(ui,z,Ie),Ge===null?Ee=ui:Ge.sibling=ui,Ge=ui,Se=rn}if(it.done)return o(Q,Se),st&&ts(Q,Ie),Ee;if(Se===null){for(;!it.done;Ie++,it=W.next())it=le(Q,it.value,se),it!==null&&(z=p(it,z,Ie),Ge===null?Ee=it:Ge.sibling=it,Ge=it);return st&&ts(Q,Ie),Ee}for(Se=c(Se);!it.done;Ie++,it=W.next())it=ee(Se,Q,Ie,it.value,se),it!==null&&(n&&it.alternate!==null&&Se.delete(it.key===null?Ie:it.key),z=p(it,z,Ie),Ge===null?Ee=it:Ge.sibling=it,Ge=it);return n&&Se.forEach(function(gA){return i(Q,gA)}),st&&ts(Q,Ie),Ee}function gt(Q,z,W,se){if(typeof W=="object"&&W!==null&&W.type===R&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case T:e:{for(var Ee=W.key;z!==null;){if(z.key===Ee){if(Ee=W.type,Ee===R){if(z.tag===7){o(Q,z.sibling),se=f(z,W.props.children),se.return=Q,Q=se;break e}}else if(z.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===N&&qv(Ee)===z.type){o(Q,z.sibling),se=f(z,W.props),Vl(se,W),se.return=Q,Q=se;break e}o(Q,z);break}else i(Q,z);z=z.sibling}W.type===R?(se=Ji(W.props.children,Q.mode,se,W.key),se.return=Q,Q=se):(se=Tu(W.type,W.key,W.props,null,Q.mode,se),Vl(se,W),se.return=Q,Q=se)}return E(Q);case C:e:{for(Ee=W.key;z!==null;){if(z.key===Ee)if(z.tag===4&&z.stateNode.containerInfo===W.containerInfo&&z.stateNode.implementation===W.implementation){o(Q,z.sibling),se=f(z,W.children||[]),se.return=Q,Q=se;break e}else{o(Q,z);break}else i(Q,z);z=z.sibling}se=hf(W,Q.mode,se),se.return=Q,Q=se}return E(Q);case N:return Ee=W._init,W=Ee(W._payload),gt(Q,z,W,se)}if(ht(W))return je(Q,z,W,se);if($(W)){if(Ee=$(W),typeof Ee!="function")throw Error(r(150));return W=Ee.call(W),ke(Q,z,W,se)}if(typeof W.then=="function")return gt(Q,z,Bu(W),se);if(W.$$typeof===G)return gt(Q,z,Au(Q,W),se);zu(Q,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,z!==null&&z.tag===6?(o(Q,z.sibling),se=f(z,W),se.return=Q,Q=se):(o(Q,z),se=uf(W,Q.mode,se),se.return=Q,Q=se),E(Q)):o(Q,z)}return function(Q,z,W,se){try{Ul=0;var Ee=gt(Q,z,W,se);return ro=null,Ee}catch(Se){if(Se===Rl||Se===ku)throw Se;var Ge=Ln(29,Se,null,Q.mode);return Ge.lanes=se,Ge.return=Q,Ge}finally{}}}var ao=Hv(!0),Gv=Hv(!1),rr=he(null),Ir=null;function Ya(n){var i=n.alternate;D(Xt,Xt.current&1),D(rr,n),Ir===null&&(i===null||Js.current!==null||i.memoizedState!==null)&&(Ir=n)}function $v(n){if(n.tag===22){if(D(Xt,Xt.current),D(rr,n),Ir===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Ir=n)}}else Wa()}function Wa(){D(Xt,Xt.current),D(rr,rr.current)}function ha(n){H(rr),Ir===n&&(Ir=null),H(Xt)}var Xt=he(0);function Fu(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||jm(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Hf(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:v({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Gf={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=qn(),f=$a(c);f.payload=i,o!=null&&(f.callback=o),i=Ka(n,f,c),i!==null&&(Hn(i,n,c),Il(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=qn(),f=$a(c);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Ka(n,f,c),i!==null&&(Hn(i,n,c),Il(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=qn(),c=$a(o);c.tag=2,i!=null&&(c.callback=i),i=Ka(n,c,o),i!==null&&(Hn(i,n,o),Il(i,n,o))}};function Kv(n,i,o,c,f,p,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,E):i.prototype&&i.prototype.isPureReactComponent?!wl(o,c)||!wl(f,p):!0}function Qv(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&Gf.enqueueReplaceState(i,i.state,null)}function ls(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=v({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var qu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Yv(n){qu(n)}function Wv(n){console.error(n)}function Xv(n){qu(n)}function Hu(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Zv(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function $f(n,i,o){return o=$a(o),o.tag=3,o.payload={element:null},o.callback=function(){Hu(n,i)},o}function Jv(n){return n=$a(n),n.tag=3,n}function e0(n,i,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;n.payload=function(){return f(p)},n.callback=function(){Zv(i,o,c)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Zv(i,o,c),typeof f!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})})}function gC(n,i,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&xl(i,o,f,!0),o=rr.current,o!==null){switch(o.tag){case 13:return Ir===null?pm():o.alternate===null&&Nt===0&&(Nt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===bf?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),vm(n,c,f)),!1;case 22:return o.flags|=65536,c===bf?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),vm(n,c,f)),!1}throw Error(r(435,o.tag))}return vm(n,c,f),pm(),!1}if(st)return i=rr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==mf&&(n=Error(r(422),{cause:c}),Sl(Jn(n,o)))):(c!==mf&&(i=Error(r(423),{cause:c}),Sl(Jn(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Jn(c,o),f=$f(n.stateNode,c,f),Sf(n,f),Nt!==4&&(Nt=2)),!1;var p=Error(r(520),{cause:c});if(p=Jn(p,o),Gl===null?Gl=[p]:Gl.push(p),Nt!==4&&(Nt=2),i===null)return!0;c=Jn(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=$f(o.stateNode,c,n),Sf(o,n),!1;case 1:if(i=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ni===null||!ni.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Jv(f),e0(f,n,o,c),Sf(o,f),!1}o=o.return}while(o!==null);return!1}var t0=Error(r(461)),tn=!1;function cn(n,i,o,c){i.child=n===null?Gv(i,null,o,c):ao(i,n.child,o,c)}function n0(n,i,o,c,f){o=o.render;var p=i.ref;if("ref"in c){var E={};for(var A in c)A!=="ref"&&(E[A]=c[A])}else E=c;return is(i),c=kf(n,i,o,E,p,f),A=If(),n!==null&&!tn?(Nf(n,i,f),da(n,i,f)):(st&&A&&df(i),i.flags|=1,cn(n,i,c,f),i.child)}function r0(n,i,o,c,f){if(n===null){var p=o.type;return typeof p=="function"&&!cf(p)&&p.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=p,a0(n,i,p,c,f)):(n=Tu(o.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!em(n,f)){var E=p.memoizedProps;if(o=o.compare,o=o!==null?o:wl,o(E,c)&&n.ref===i.ref)return da(n,i,f)}return i.flags|=1,n=ia(p,c),n.ref=i.ref,n.return=i,i.child=n}function a0(n,i,o,c,f){if(n!==null){var p=n.memoizedProps;if(wl(p,c)&&n.ref===i.ref)if(tn=!1,i.pendingProps=c=p,em(n,f))(n.flags&131072)!==0&&(tn=!0);else return i.lanes=n.lanes,da(n,i,f)}return Kf(n,i,o,c,f)}function i0(n,i,o){var c=i.pendingProps,f=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=p!==null?p.baseLanes|o:o,n!==null){for(f=i.child=n.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;i.childLanes=p&~c}else i.childLanes=0,i.child=null;return s0(n,i,c,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ru(i,p!==null?p.cachePool:null),p!==null?av(i,p):Cf(),$v(i);else return i.lanes=i.childLanes=536870912,s0(n,i,p!==null?p.baseLanes|o:o,o)}else p!==null?(Ru(i,p.cachePool),av(i,p),Wa(),i.memoizedState=null):(n!==null&&Ru(i,null),Cf(),Wa());return cn(n,i,f,o),i.child}function s0(n,i,o,c){var f=wf();return f=f===null?null:{parent:Wt._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},n!==null&&Ru(i,null),Cf(),$v(i),n!==null&&xl(n,i,c,!0),null}function Gu(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Kf(n,i,o,c,f){return is(i),o=kf(n,i,o,c,void 0,f),c=If(),n!==null&&!tn?(Nf(n,i,f),da(n,i,f)):(st&&c&&df(i),i.flags|=1,cn(n,i,o,f),i.child)}function o0(n,i,o,c,f,p){return is(i),i.updateQueue=null,o=sv(i,c,o,f),iv(n),c=If(),n!==null&&!tn?(Nf(n,i,p),da(n,i,p)):(st&&c&&df(i),i.flags|=1,cn(n,i,o,p),i.child)}function l0(n,i,o,c,f){if(is(i),i.stateNode===null){var p=Qs,E=o.contextType;typeof E=="object"&&E!==null&&(p=yn(E)),p=new o(c,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Gf,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=c,p.state=i.memoizedState,p.refs={},Ef(i),E=o.contextType,p.context=typeof E=="object"&&E!==null?yn(E):Qs,p.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Hf(i,o,E,c),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&Gf.enqueueReplaceState(p,p.state,null),Dl(i,c,p,f),Nl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){p=i.stateNode;var A=i.memoizedProps,O=ls(o,A);p.props=O;var X=p.context,ie=o.contextType;E=Qs,typeof ie=="object"&&ie!==null&&(E=yn(ie));var le=o.getDerivedStateFromProps;ie=typeof le=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,ie||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||X!==E)&&Qv(i,p,c,E),Ga=!1;var J=i.memoizedState;p.state=J,Dl(i,c,p,f),Nl(),X=i.memoizedState,A||J!==X||Ga?(typeof le=="function"&&(Hf(i,o,le,c),X=i.memoizedState),(O=Ga||Kv(i,o,O,c,J,X,E))?(ie||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=X),p.props=c,p.state=X,p.context=E,c=O):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{p=i.stateNode,Tf(n,i),E=i.memoizedProps,ie=ls(o,E),p.props=ie,le=i.pendingProps,J=p.context,X=o.contextType,O=Qs,typeof X=="object"&&X!==null&&(O=yn(X)),A=o.getDerivedStateFromProps,(X=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==le||J!==O)&&Qv(i,p,c,O),Ga=!1,J=i.memoizedState,p.state=J,Dl(i,c,p,f),Nl();var ee=i.memoizedState;E!==le||J!==ee||Ga||n!==null&&n.dependencies!==null&&Cu(n.dependencies)?(typeof A=="function"&&(Hf(i,o,A,c),ee=i.memoizedState),(ie=Ga||Kv(i,o,ie,c,J,ee,O)||n!==null&&n.dependencies!==null&&Cu(n.dependencies))?(X||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,ee,O),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,ee,O)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ee),p.props=c,p.state=ee,p.context=O,c=ie):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(i.flags|=1024),c=!1)}return p=c,Gu(n,i),c=(i.flags&128)!==0,p||c?(p=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&c?(i.child=ao(i,n.child,null,f),i.child=ao(i,null,o,f)):cn(n,i,o,f),i.memoizedState=p.state,n=i.child):n=da(n,i,f),n}function c0(n,i,o,c){return Tl(),i.flags|=256,cn(n,i,o,c),i.child}var Qf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yf(n){return{baseLanes:n,cachePool:Wy()}}function Wf(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=ar),n}function u0(n,i,o){var c=i.pendingProps,f=!1,p=(i.flags&128)!==0,E;if((E=p)||(E=n!==null&&n.memoizedState===null?!1:(Xt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,n===null){if(st){if(f?Ya(i):Wa(),st){var A=It,O;if(O=A){e:{for(O=A,A=kr;O.nodeType!==8;){if(!A){A=null;break e}if(O=dr(O.nextSibling),O===null){A=null;break e}}A=O}A!==null?(i.memoizedState={dehydrated:A,treeContext:es!==null?{id:sa,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},O=Ln(18,null,null,0),O.stateNode=A,O.return=i,i.child=O,Rn=i,It=null,O=!0):O=!1}O||rs(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return jm(A)?i.lanes=32:i.lanes=536870912,null;ha(i)}return A=c.children,c=c.fallback,f?(Wa(),f=i.mode,A=$u({mode:"hidden",children:A},f),c=Ji(c,f,o,null),A.return=i,c.return=i,A.sibling=c,i.child=A,f=i.child,f.memoizedState=Yf(o),f.childLanes=Wf(n,E,o),i.memoizedState=Qf,c):(Ya(i),Xf(i,A))}if(O=n.memoizedState,O!==null&&(A=O.dehydrated,A!==null)){if(p)i.flags&256?(Ya(i),i.flags&=-257,i=Zf(n,i,o)):i.memoizedState!==null?(Wa(),i.child=n.child,i.flags|=128,i=null):(Wa(),f=c.fallback,A=i.mode,c=$u({mode:"visible",children:c.children},A),f=Ji(f,A,o,null),f.flags|=2,c.return=i,f.return=i,c.sibling=f,i.child=c,ao(i,n.child,null,o),c=i.child,c.memoizedState=Yf(o),c.childLanes=Wf(n,E,o),i.memoizedState=Qf,i=f);else if(Ya(i),jm(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var X=E.dgst;E=X,c=Error(r(419)),c.stack="",c.digest=E,Sl({value:c,source:null,stack:null}),i=Zf(n,i,o)}else if(tn||xl(n,i,o,!1),E=(o&n.childLanes)!==0,tn||E){if(E=_t,E!==null&&(c=o&-o,c=(c&42)!==0?1:Ua(c),c=(c&(E.suspendedLanes|o))!==0?0:c,c!==0&&c!==O.retryLane))throw O.retryLane=c,Ks(n,c),Hn(E,n,c),t0;A.data==="$?"||pm(),i=Zf(n,i,o)}else A.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=O.treeContext,It=dr(A.nextSibling),Rn=i,st=!0,ns=null,kr=!1,n!==null&&(tr[nr++]=sa,tr[nr++]=oa,tr[nr++]=es,sa=n.id,oa=n.overflow,es=i),i=Xf(i,c.children),i.flags|=4096);return i}return f?(Wa(),f=c.fallback,A=i.mode,O=n.child,X=O.sibling,c=ia(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,X!==null?f=ia(X,f):(f=Ji(f,A,o,null),f.flags|=2),f.return=i,c.return=i,c.sibling=f,i.child=c,c=f,f=i.child,A=n.child.memoizedState,A===null?A=Yf(o):(O=A.cachePool,O!==null?(X=Wt._currentValue,O=O.parent!==X?{parent:X,pool:X}:O):O=Wy(),A={baseLanes:A.baseLanes|o,cachePool:O}),f.memoizedState=A,f.childLanes=Wf(n,E,o),i.memoizedState=Qf,c):(Ya(i),o=n.child,n=o.sibling,o=ia(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(E=i.deletions,E===null?(i.deletions=[n],i.flags|=16):E.push(n)),i.child=o,i.memoizedState=null,o)}function Xf(n,i){return i=$u({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function $u(n,i){return n=Ln(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Zf(n,i,o){return ao(i,n.child,null,o),n=Xf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function h0(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),pf(n.return,i,o)}function Jf(n,i,o,c,f){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=o,p.tailMode=f)}function d0(n,i,o){var c=i.pendingProps,f=c.revealOrder,p=c.tail;if(cn(n,i,c.children,o),c=Xt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&h0(n,o,i);else if(n.tag===19)h0(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(D(Xt,c),f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&Fu(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Jf(i,!1,f,o,p);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Fu(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Jf(i,!0,o,null,p);break;case"together":Jf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function da(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),ti|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(xl(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=ia(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=ia(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function em(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Cu(n)))}function pC(n,i,o){switch(i.tag){case 3:te(i,i.stateNode.containerInfo),Ha(i,Wt,n.memoizedState.cache),Tl();break;case 27:case 5:He(i);break;case 4:te(i,i.stateNode.containerInfo);break;case 10:Ha(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ya(i),i.flags|=128,null):(o&i.child.childLanes)!==0?u0(n,i,o):(Ya(i),n=da(n,i,o),n!==null?n.sibling:null);Ya(i);break;case 19:var f=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(xl(n,i,o,!1),c=(o&i.childLanes)!==0),f){if(c)return d0(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),D(Xt,Xt.current),c)break;return null;case 22:case 23:return i.lanes=0,i0(n,i,o);case 24:Ha(i,Wt,n.memoizedState.cache)}return da(n,i,o)}function f0(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)tn=!0;else{if(!em(n,o)&&(i.flags&128)===0)return tn=!1,pC(n,i,o);tn=(n.flags&131072)!==0}else tn=!1,st&&(i.flags&1048576)!==0&&qy(i,xu,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var c=i.elementType,f=c._init;if(c=f(c._payload),i.type=c,typeof c=="function")cf(c)?(n=ls(c,n),i.tag=1,i=l0(null,i,c,n,o)):(i.tag=0,i=Kf(null,i,c,n,o));else{if(c!=null){if(f=c.$$typeof,f===re){i.tag=11,i=n0(null,i,c,n,o);break e}else if(f===M){i.tag=14,i=r0(null,i,c,n,o);break e}}throw i=St(c)||c,Error(r(306,i,""))}}return i;case 0:return Kf(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,f=ls(c,i.pendingProps),l0(n,i,c,f,o);case 3:e:{if(te(i,i.stateNode.containerInfo),n===null)throw Error(r(387));c=i.pendingProps;var p=i.memoizedState;f=p.element,Tf(n,i),Dl(i,c,null,o);var E=i.memoizedState;if(c=E.cache,Ha(i,Wt,c),c!==p.cache&&yf(i,[Wt],o,!0),Nl(),c=E.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=c0(n,i,c,o);break e}else if(c!==f){f=Jn(Error(r(424)),i),Sl(f),i=c0(n,i,c,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(It=dr(n.firstChild),Rn=i,st=!0,ns=null,kr=!0,o=Gv(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Tl(),c===f){i=da(n,i,o);break e}cn(n,i,c,o)}i=i.child}return i;case 26:return Gu(n,i),n===null?(o=y_(i.type,null,i.pendingProps,null))?i.memoizedState=o:st||(o=i.type,n=i.pendingProps,c=sh(V.current).createElement(o),c[Kt]=i,c[Bt]=n,hn(c,o,n),Pt(c),i.stateNode=c):i.memoizedState=y_(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return He(i),n===null&&st&&(c=i.stateNode=m_(i.type,i.pendingProps,V.current),Rn=i,kr=!0,f=It,ii(i.type)?(Mm=f,It=dr(c.firstChild)):It=f),cn(n,i,i.pendingProps.children,o),Gu(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&st&&((f=c=It)&&(c=HC(c,i.type,i.pendingProps,kr),c!==null?(i.stateNode=c,Rn=i,It=dr(c.firstChild),kr=!1,f=!0):f=!1),f||rs(i)),He(i),f=i.type,p=i.pendingProps,E=n!==null?n.memoizedProps:null,c=p.children,Im(f,p)?c=null:E!==null&&Im(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=kf(n,i,lC,null,null,o),ec._currentValue=f),Gu(n,i),cn(n,i,c,o),i.child;case 6:return n===null&&st&&((n=o=It)&&(o=GC(o,i.pendingProps,kr),o!==null?(i.stateNode=o,Rn=i,It=null,n=!0):n=!1),n||rs(i)),null;case 13:return u0(n,i,o);case 4:return te(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=ao(i,null,c,o):cn(n,i,c,o),i.child;case 11:return n0(n,i,i.type,i.pendingProps,o);case 7:return cn(n,i,i.pendingProps,o),i.child;case 8:return cn(n,i,i.pendingProps.children,o),i.child;case 12:return cn(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Ha(i,i.type,c.value),cn(n,i,c.children,o),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,is(i),f=yn(f),c=c(f),i.flags|=1,cn(n,i,c,o),i.child;case 14:return r0(n,i,i.type,i.pendingProps,o);case 15:return a0(n,i,i.type,i.pendingProps,o);case 19:return d0(n,i,o);case 31:return c=i.pendingProps,o=i.mode,c={mode:c.mode,children:c.children},n===null?(o=$u(c,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=ia(n.child,c),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return i0(n,i,o);case 24:return is(i),c=yn(Wt),n===null?(f=wf(),f===null&&(f=_t,p=vf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),i.memoizedState={parent:c,cache:f},Ef(i),Ha(i,Wt,f)):((n.lanes&o)!==0&&(Tf(n,i),Dl(i,null,null,o),Nl()),f=n.memoizedState,p=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ha(i,Wt,c)):(c=p.cache,Ha(i,Wt,c),c!==f.cache&&yf(i,[Wt],o,!0))),cn(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function fa(n){n.flags|=4}function m0(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!E_(i)){if(i=rr.current,i!==null&&((tt&4194048)===tt?Ir!==null:(tt&62914560)!==tt&&(tt&536870912)===0||i!==Ir))throw kl=bf,Xy;n.flags|=8192}}function Ku(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?nl():536870912,n.lanes|=i,lo|=i)}function Ll(n,i){if(!st)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function At(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function yC(n,i,o){var c=i.pendingProps;switch(ff(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(i),null;case 1:return At(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),ca(Wt),Re(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(El(i)?fa(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,$y())),At(i),null;case 26:return o=i.memoizedState,n===null?(fa(i),o!==null?(At(i),m0(i,o)):(At(i),i.flags&=-16777217)):o?o!==n.memoizedState?(fa(i),At(i),m0(i,o)):(At(i),i.flags&=-16777217):(n.memoizedProps!==c&&fa(i),At(i),i.flags&=-16777217),null;case 27:pe(i),o=V.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==c&&fa(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return At(i),null}n=K.current,El(i)?Hy(i):(n=m_(f,c,o),i.stateNode=n,fa(i))}return At(i),null;case 5:if(pe(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&fa(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return At(i),null}if(n=K.current,El(i))Hy(i);else{switch(f=sh(V.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?f.createElement(o,{is:c.is}):f.createElement(o)}}n[Kt]=i,n[Bt]=c;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(hn(n,o,c),o){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&fa(i)}}return At(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&fa(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(n=V.current,El(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,f=Rn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Kt]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||o_(n.nodeValue,o)),n||rs(i)}else n=sh(n).createTextNode(c),n[Kt]=i,i.stateNode=n}return At(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=El(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Kt]=i}else Tl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;At(i),f=!1}else f=$y(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(ha(i),i):(ha(i),null)}if(ha(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=c!==null,n=n!==null&&n.memoizedState!==null,o){c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var p=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),Ku(i,i.updateQueue),At(i),null;case 4:return Re(),n===null&&xm(i.stateNode.containerInfo),At(i),null;case 10:return ca(i.type),At(i),null;case 19:if(H(Xt),f=i.memoizedState,f===null)return At(i),null;if(c=(i.flags&128)!==0,p=f.rendering,p===null)if(c)Ll(f,!1);else{if(Nt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=Fu(n),p!==null){for(i.flags|=128,Ll(f,!1),n=p.updateQueue,i.updateQueue=n,Ku(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)Fy(o,n),o=o.sibling;return D(Xt,Xt.current&1|2),i.child}n=n.sibling}f.tail!==null&&Oe()>Wu&&(i.flags|=128,c=!0,Ll(f,!1),i.lanes=4194304)}else{if(!c)if(n=Fu(p),n!==null){if(i.flags|=128,c=!0,n=n.updateQueue,i.updateQueue=n,Ku(i,n),Ll(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!st)return At(i),null}else 2*Oe()-f.renderingStartTime>Wu&&o!==536870912&&(i.flags|=128,c=!0,Ll(f,!1),i.lanes=4194304);f.isBackwards?(p.sibling=i.child,i.child=p):(n=f.last,n!==null?n.sibling=p:i.child=p,f.last=p)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Oe(),i.sibling=null,n=Xt.current,D(Xt,c?n&1|2:n&1),i):(At(i),null);case 22:case 23:return ha(i),Af(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(At(i),i.subtreeFlags&6&&(i.flags|=8192)):At(i),o=i.updateQueue,o!==null&&Ku(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&H(ss),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ca(Wt),At(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function vC(n,i){switch(ff(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ca(Wt),Re(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return pe(i),null;case 13:if(ha(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Tl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return H(Xt),null;case 4:return Re(),null;case 10:return ca(i.type),null;case 22:case 23:return ha(i),Af(),n!==null&&H(ss),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ca(Wt),null;case 25:return null;default:return null}}function g0(n,i){switch(ff(i),i.tag){case 3:ca(Wt),Re();break;case 26:case 27:case 5:pe(i);break;case 4:Re();break;case 13:ha(i);break;case 19:H(Xt);break;case 10:ca(i.type);break;case 22:case 23:ha(i),Af(),n!==null&&H(ss);break;case 24:ca(Wt)}}function Bl(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var p=o.create,E=o.inst;c=p(),E.destroy=c}o=o.next}while(o!==f)}}catch(A){yt(i,i.return,A)}}function Xa(n,i,o){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&n)===n){var E=c.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,f=i;var O=o,X=A;try{X()}catch(ie){yt(f,O,ie)}}}c=c.next}while(c!==p)}}catch(ie){yt(i,i.return,ie)}}function p0(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{rv(i,o)}catch(c){yt(n,n.return,c)}}}function y0(n,i,o){o.props=ls(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){yt(n,i,c)}}function zl(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){yt(n,i,f)}}function Nr(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){yt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){yt(n,i,f)}else o.current=null}function v0(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){yt(n,n.return,f)}}function tm(n,i,o){try{var c=n.stateNode;LC(c,n.type,o,i),c[Bt]=i}catch(f){yt(n,n.return,f)}}function _0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ii(n.type)||n.tag===4}function nm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||_0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ii(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rm(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=ih));else if(c!==4&&(c===27&&ii(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(rm(n,i,o),n=n.sibling;n!==null;)rm(n,i,o),n=n.sibling}function Qu(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&ii(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Qu(n,i,o),n=n.sibling;n!==null;)Qu(n,i,o),n=n.sibling}function w0(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);hn(i,c,o),i[Kt]=n,i[Bt]=o}catch(p){yt(n,n.return,p)}}var ma=!1,Vt=!1,am=!1,b0=typeof WeakSet=="function"?WeakSet:Set,nn=null;function _C(n,i){if(n=n.containerInfo,Rm=dh,n=Dy(n),tf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var E=0,A=-1,O=-1,X=0,ie=0,le=n,J=null;t:for(;;){for(var ee;le!==o||f!==0&&le.nodeType!==3||(A=E+f),le!==p||c!==0&&le.nodeType!==3||(O=E+c),le.nodeType===3&&(E+=le.nodeValue.length),(ee=le.firstChild)!==null;)J=le,le=ee;for(;;){if(le===n)break t;if(J===o&&++X===f&&(A=E),J===p&&++ie===c&&(O=E),(ee=le.nextSibling)!==null)break;le=J,J=le.parentNode}le=ee}o=A===-1||O===-1?null:{start:A,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(km={focusedElem:n,selectionRange:o},dh=!1,nn=i;nn!==null;)if(i=nn,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,nn=n;else for(;nn!==null;){switch(i=nn,p=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=i,f=p.memoizedProps,p=p.memoizedState,c=o.stateNode;try{var je=ls(o.type,f,o.elementType===o.type);n=c.getSnapshotBeforeUpdate(je,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(ke){yt(o,o.return,ke)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Dm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Dm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,nn=n;break}nn=i.return}}function E0(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Za(n,o),c&4&&Bl(5,o);break;case 1:if(Za(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(E){yt(o,o.return,E)}else{var f=ls(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(E){yt(o,o.return,E)}}c&64&&p0(o),c&512&&zl(o,o.return);break;case 3:if(Za(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{rv(n,i)}catch(E){yt(o,o.return,E)}}break;case 27:i===null&&c&4&&w0(o);case 26:case 5:Za(n,o),i===null&&c&4&&v0(o),c&512&&zl(o,o.return);break;case 12:Za(n,o);break;case 13:Za(n,o),c&4&&x0(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=RC.bind(null,o),$C(n,o))));break;case 22:if(c=o.memoizedState!==null||ma,!c){i=i!==null&&i.memoizedState!==null||Vt,f=ma;var p=Vt;ma=c,(Vt=i)&&!p?Ja(n,o,(o.subtreeFlags&8772)!==0):Za(n,o),ma=f,Vt=p}break;case 30:break;default:Za(n,o)}}function T0(n){var i=n.alternate;i!==null&&(n.alternate=null,T0(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ba(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Tt=null,Dn=!1;function ga(n,i,o){for(o=o.child;o!==null;)S0(n,i,o),o=o.sibling}function S0(n,i,o){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(pt,o)}catch{}switch(o.tag){case 26:Vt||Nr(o,i),ga(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Vt||Nr(o,i);var c=Tt,f=Dn;ii(o.type)&&(Tt=o.stateNode,Dn=!1),ga(n,i,o),Wl(o.stateNode),Tt=c,Dn=f;break;case 5:Vt||Nr(o,i);case 6:if(c=Tt,f=Dn,Tt=null,ga(n,i,o),Tt=c,Dn=f,Tt!==null)if(Dn)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(o.stateNode)}catch(p){yt(o,i,p)}else try{Tt.removeChild(o.stateNode)}catch(p){yt(o,i,p)}break;case 18:Tt!==null&&(Dn?(n=Tt,d_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),ac(n)):d_(Tt,o.stateNode));break;case 4:c=Tt,f=Dn,Tt=o.stateNode.containerInfo,Dn=!0,ga(n,i,o),Tt=c,Dn=f;break;case 0:case 11:case 14:case 15:Vt||Xa(2,o,i),Vt||Xa(4,o,i),ga(n,i,o);break;case 1:Vt||(Nr(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&y0(o,i,c)),ga(n,i,o);break;case 21:ga(n,i,o);break;case 22:Vt=(c=Vt)||o.memoizedState!==null,ga(n,i,o),Vt=c;break;default:ga(n,i,o)}}function x0(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ac(n)}catch(o){yt(i,i.return,o)}}function wC(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new b0),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new b0),i;default:throw Error(r(435,n.tag))}}function im(n,i){var o=wC(n);i.forEach(function(c){var f=kC.bind(null,n,c);o.has(c)||(o.add(c),c.then(f,f))})}function Bn(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],p=n,E=i,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(ii(A.type)){Tt=A.stateNode,Dn=!1;break e}break;case 5:Tt=A.stateNode,Dn=!1;break e;case 3:case 4:Tt=A.stateNode.containerInfo,Dn=!0;break e}A=A.return}if(Tt===null)throw Error(r(160));S0(p,E,f),Tt=null,Dn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)C0(i,n),i=i.sibling}var hr=null;function C0(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Bn(i,n),zn(n),c&4&&(Xa(3,n,n.return),Bl(3,n),Xa(5,n,n.return));break;case 1:Bn(i,n),zn(n),c&512&&(Vt||o===null||Nr(o,o.return)),c&64&&ma&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=hr;if(Bn(i,n),zn(n),c&512&&(Vt||o===null||Nr(o,o.return)),c&4){var p=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Ui]||p[Kt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),hn(p,c,o),p[Kt]=n,Pt(p),c=p;break e;case"link":var E=w_("link","href",f).get(c+(o.href||""));if(E){for(var A=0;A<E.length;A++)if(p=E[A],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(A,1);break t}}p=f.createElement(c),hn(p,c,o),f.head.appendChild(p);break;case"meta":if(E=w_("meta","content",f).get(c+(o.content||""))){for(A=0;A<E.length;A++)if(p=E[A],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(A,1);break t}}p=f.createElement(c),hn(p,c,o),f.head.appendChild(p);break;default:throw Error(r(468,c))}p[Kt]=n,Pt(p),c=p}n.stateNode=c}else b_(f,n.type,n.stateNode);else n.stateNode=__(f,c,n.memoizedProps);else p!==c?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,c===null?b_(f,n.type,n.stateNode):__(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&tm(n,n.memoizedProps,o.memoizedProps)}break;case 27:Bn(i,n),zn(n),c&512&&(Vt||o===null||Nr(o,o.return)),o!==null&&c&4&&tm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Bn(i,n),zn(n),c&512&&(Vt||o===null||Nr(o,o.return)),n.flags&32){f=n.stateNode;try{Yn(f,"")}catch(ee){yt(n,n.return,ee)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,tm(n,f,o!==null?o.memoizedProps:f)),c&1024&&(am=!0);break;case 6:if(Bn(i,n),zn(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(ee){yt(n,n.return,ee)}}break;case 3:if(ch=null,f=hr,hr=oh(i.containerInfo),Bn(i,n),hr=f,zn(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{ac(i.containerInfo)}catch(ee){yt(n,n.return,ee)}am&&(am=!1,A0(n));break;case 4:c=hr,hr=oh(n.stateNode.containerInfo),Bn(i,n),zn(n),hr=c;break;case 12:Bn(i,n),zn(n);break;case 13:Bn(i,n),zn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(hm=Oe()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,im(n,c)));break;case 22:f=n.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,X=ma,ie=Vt;if(ma=X||f,Vt=ie||O,Bn(i,n),Vt=ie,ma=X,zn(n),c&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||O||ma||Vt||cs(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){O=o=i;try{if(p=O.stateNode,f)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=O.stateNode;var le=O.memoizedProps.style,J=le!=null&&le.hasOwnProperty("display")?le.display:null;A.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ee){yt(O,O.return,ee)}}}else if(i.tag===6){if(o===null){O=i;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(ee){yt(O,O.return,ee)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,im(n,o))));break;case 19:Bn(i,n),zn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,im(n,c)));break;case 30:break;case 21:break;default:Bn(i,n),zn(n)}}function zn(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if(_0(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,p=nm(n);Qu(n,p,f);break;case 5:var E=o.stateNode;o.flags&32&&(Yn(E,""),o.flags&=-33);var A=nm(n);Qu(n,A,E);break;case 3:case 4:var O=o.stateNode.containerInfo,X=nm(n);rm(n,X,O);break;default:throw Error(r(161))}}catch(ie){yt(n,n.return,ie)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function A0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;A0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Za(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)E0(n,i.alternate,i),i=i.sibling}function cs(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Xa(4,i,i.return),cs(i);break;case 1:Nr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&y0(i,i.return,o),cs(i);break;case 27:Wl(i.stateNode);case 26:case 5:Nr(i,i.return),cs(i);break;case 22:i.memoizedState===null&&cs(i);break;case 30:cs(i);break;default:cs(i)}n=n.sibling}}function Ja(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,p=i,E=p.flags;switch(p.tag){case 0:case 11:case 15:Ja(f,p,o),Bl(4,p);break;case 1:if(Ja(f,p,o),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(X){yt(c,c.return,X)}if(c=p,f=c.updateQueue,f!==null){var A=c.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)nv(O[f],A)}catch(X){yt(c,c.return,X)}}o&&E&64&&p0(p),zl(p,p.return);break;case 27:w0(p);case 26:case 5:Ja(f,p,o),o&&c===null&&E&4&&v0(p),zl(p,p.return);break;case 12:Ja(f,p,o);break;case 13:Ja(f,p,o),o&&E&4&&x0(f,p);break;case 22:p.memoizedState===null&&Ja(f,p,o),zl(p,p.return);break;case 30:break;default:Ja(f,p,o)}i=i.sibling}}function sm(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Cl(o))}function om(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Cl(n))}function Dr(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)R0(n,i,o,c),i=i.sibling}function R0(n,i,o,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Dr(n,i,o,c),f&2048&&Bl(9,i);break;case 1:Dr(n,i,o,c);break;case 3:Dr(n,i,o,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Cl(n)));break;case 12:if(f&2048){Dr(n,i,o,c),n=i.stateNode;try{var p=i.memoizedProps,E=p.id,A=p.onPostCommit;typeof A=="function"&&A(E,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){yt(i,i.return,O)}}else Dr(n,i,o,c);break;case 13:Dr(n,i,o,c);break;case 23:break;case 22:p=i.stateNode,E=i.alternate,i.memoizedState!==null?p._visibility&2?Dr(n,i,o,c):Fl(n,i):p._visibility&2?Dr(n,i,o,c):(p._visibility|=2,io(n,i,o,c,(i.subtreeFlags&10256)!==0)),f&2048&&sm(E,i);break;case 24:Dr(n,i,o,c),f&2048&&om(i.alternate,i);break;default:Dr(n,i,o,c)}}function io(n,i,o,c,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var p=n,E=i,A=o,O=c,X=E.flags;switch(E.tag){case 0:case 11:case 15:io(p,E,A,O,f),Bl(8,E);break;case 23:break;case 22:var ie=E.stateNode;E.memoizedState!==null?ie._visibility&2?io(p,E,A,O,f):Fl(p,E):(ie._visibility|=2,io(p,E,A,O,f)),f&&X&2048&&sm(E.alternate,E);break;case 24:io(p,E,A,O,f),f&&X&2048&&om(E.alternate,E);break;default:io(p,E,A,O,f)}i=i.sibling}}function Fl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,f=c.flags;switch(c.tag){case 22:Fl(o,c),f&2048&&sm(c.alternate,c);break;case 24:Fl(o,c),f&2048&&om(c.alternate,c);break;default:Fl(o,c)}i=i.sibling}}var ql=8192;function so(n){if(n.subtreeFlags&ql)for(n=n.child;n!==null;)k0(n),n=n.sibling}function k0(n){switch(n.tag){case 26:so(n),n.flags&ql&&n.memoizedState!==null&&iA(hr,n.memoizedState,n.memoizedProps);break;case 5:so(n);break;case 3:case 4:var i=hr;hr=oh(n.stateNode.containerInfo),so(n),hr=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=ql,ql=16777216,so(n),ql=i):so(n));break;default:so(n)}}function I0(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Hl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];nn=c,D0(c,n)}I0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)N0(n),n=n.sibling}function N0(n){switch(n.tag){case 0:case 11:case 15:Hl(n),n.flags&2048&&Xa(9,n,n.return);break;case 3:Hl(n);break;case 12:Hl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Yu(n)):Hl(n);break;default:Hl(n)}}function Yu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];nn=c,D0(c,n)}I0(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Xa(8,i,i.return),Yu(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Yu(i));break;default:Yu(i)}n=n.sibling}}function D0(n,i){for(;nn!==null;){var o=nn;switch(o.tag){case 0:case 11:case 15:Xa(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Cl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,nn=c;else e:for(o=n;nn!==null;){c=nn;var f=c.sibling,p=c.return;if(T0(c),c===o){nn=null;break e}if(f!==null){f.return=p,nn=f;break e}nn=p}}}var bC={getCacheForType:function(n){var i=yn(Wt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},EC=typeof WeakMap=="function"?WeakMap:Map,ct=0,_t=null,$e=null,tt=0,ut=0,Fn=null,ei=!1,oo=!1,lm=!1,pa=0,Nt=0,ti=0,us=0,cm=0,ar=0,lo=0,Gl=null,jn=null,um=!1,hm=0,Wu=1/0,Xu=null,ni=null,un=0,ri=null,co=null,uo=0,dm=0,fm=null,j0=null,$l=0,mm=null;function qn(){if((ct&2)!==0&&tt!==0)return tt&-tt;if(ae.T!==null){var n=Xs;return n!==0?n:bm()}return Va()}function M0(){ar===0&&(ar=(tt&536870912)===0||st?tl():536870912);var n=rr.current;return n!==null&&(n.flags|=32),ar}function Hn(n,i,o){(n===_t&&(ut===2||ut===9)||n.cancelPendingCommit!==null)&&(ho(n,0),ai(n,tt,ar,!1)),Qr(n,o),((ct&2)===0||n!==_t)&&(n===_t&&((ct&2)===0&&(us|=o),Nt===4&&ai(n,tt,ar,!1)),jr(n))}function O0(n,i,o){if((ct&6)!==0)throw Error(r(327));var c=!o&&(i&124)===0&&(i&n.expiredLanes)===0||Pi(n,i),f=c?xC(n,i):ym(n,i,!0),p=c;do{if(f===0){oo&&!c&&ai(n,i,0,!1);break}else{if(o=n.current.alternate,p&&!TC(o)){f=ym(n,i,!1),p=!1;continue}if(f===2){if(p=i,n.errorRecoveryDisabledLanes&p)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var A=n;f=Gl;var O=A.current.memoizedState.isDehydrated;if(O&&(ho(A,E).flags|=256),E=ym(A,E,!1),E!==2){if(lm&&!O){A.errorRecoveryDisabledLanes|=p,us|=p,f=4;break e}p=jn,jn=f,p!==null&&(jn===null?jn=p:jn.push.apply(jn,p))}f=E}if(p=!1,f!==2)continue}}if(f===1){ho(n,0),ai(n,i,0,!0);break}e:{switch(c=n,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:ai(c,i,ar,!ei);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=hm+300-Oe(),10<f)){if(ai(c,i,ar,!ei),Rs(c,0,!0)!==0)break e;c.timeoutHandle=u_(P0.bind(null,c,o,jn,Xu,um,i,ar,us,lo,ei,p,2,-0,0),f);break e}P0(c,o,jn,Xu,um,i,ar,us,lo,ei,p,0,-0,0)}}break}while(!0);jr(n)}function P0(n,i,o,c,f,p,E,A,O,X,ie,le,J,ee){if(n.timeoutHandle=-1,le=i.subtreeFlags,(le&8192||(le&16785408)===16785408)&&(Jl={stylesheets:null,count:0,unsuspend:aA},k0(i),le=sA(),le!==null)){n.cancelPendingCommit=le(q0.bind(null,n,i,p,o,c,f,E,A,O,ie,1,J,ee)),ai(n,p,E,!X);return}q0(n,i,p,o,c,f,E,A,O)}function TC(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],p=f.getSnapshot;f=f.value;try{if(!Vn(p(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ai(n,i,o,c){i&=~cm,i&=~us,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var p=31-at(f),E=1<<p;c[p]=-1,f&=~E}o!==0&&vr(n,o,i)}function Zu(){return(ct&6)===0?(Kl(0),!1):!0}function gm(){if($e!==null){if(ut===0)var n=$e.return;else n=$e,la=as=null,Df(n),ro=null,Ul=0,n=$e;for(;n!==null;)g0(n.alternate,n),n=n.return;$e=null}}function ho(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,zC(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),gm(),_t=n,$e=o=ia(n.current,null),tt=i,ut=0,Fn=null,ei=!1,oo=Pi(n,i),lm=!1,lo=ar=cm=us=ti=Nt=0,jn=Gl=null,um=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-at(c),p=1<<f;i|=n[f],c&=~p}return pa=i,wu(),o}function U0(n,i){Fe=null,ae.H=Lu,i===Rl||i===ku?(i=ev(),ut=3):i===Xy?(i=ev(),ut=4):ut=i===t0?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Fn=i,$e===null&&(Nt=1,Hu(n,Jn(i,n.current)))}function V0(){var n=ae.H;return ae.H=Lu,n===null?Lu:n}function L0(){var n=ae.A;return ae.A=bC,n}function pm(){Nt=4,ei||(tt&4194048)!==tt&&rr.current!==null||(oo=!0),(ti&134217727)===0&&(us&134217727)===0||_t===null||ai(_t,tt,ar,!1)}function ym(n,i,o){var c=ct;ct|=2;var f=V0(),p=L0();(_t!==n||tt!==i)&&(Xu=null,ho(n,i)),i=!1;var E=Nt;e:do try{if(ut!==0&&$e!==null){var A=$e,O=Fn;switch(ut){case 8:gm(),E=6;break e;case 3:case 2:case 9:case 6:rr.current===null&&(i=!0);var X=ut;if(ut=0,Fn=null,fo(n,A,O,X),o&&oo){E=0;break e}break;default:X=ut,ut=0,Fn=null,fo(n,A,O,X)}}SC(),E=Nt;break}catch(ie){U0(n,ie)}while(!0);return i&&n.shellSuspendCounter++,la=as=null,ct=c,ae.H=f,ae.A=p,$e===null&&(_t=null,tt=0,wu()),E}function SC(){for(;$e!==null;)B0($e)}function xC(n,i){var o=ct;ct|=2;var c=V0(),f=L0();_t!==n||tt!==i?(Xu=null,Wu=Oe()+500,ho(n,i)):oo=Pi(n,i);e:do try{if(ut!==0&&$e!==null){i=$e;var p=Fn;t:switch(ut){case 1:ut=0,Fn=null,fo(n,i,p,1);break;case 2:case 9:if(Zy(p)){ut=0,Fn=null,z0(i);break}i=function(){ut!==2&&ut!==9||_t!==n||(ut=7),jr(n)},p.then(i,i);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Zy(p)?(ut=0,Fn=null,z0(i)):(ut=0,Fn=null,fo(n,i,p,7));break;case 5:var E=null;switch($e.tag){case 26:E=$e.memoizedState;case 5:case 27:var A=$e;if(!E||E_(E)){ut=0,Fn=null;var O=A.sibling;if(O!==null)$e=O;else{var X=A.return;X!==null?($e=X,Ju(X)):$e=null}break t}}ut=0,Fn=null,fo(n,i,p,5);break;case 6:ut=0,Fn=null,fo(n,i,p,6);break;case 8:gm(),Nt=6;break e;default:throw Error(r(462))}}CC();break}catch(ie){U0(n,ie)}while(!0);return la=as=null,ae.H=c,ae.A=f,ct=o,$e!==null?0:(_t=null,tt=0,wu(),Nt)}function CC(){for(;$e!==null&&!Xe();)B0($e)}function B0(n){var i=f0(n.alternate,n,pa);n.memoizedProps=n.pendingProps,i===null?Ju(n):$e=i}function z0(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=o0(o,i,i.pendingProps,i.type,void 0,tt);break;case 11:i=o0(o,i,i.pendingProps,i.type.render,i.ref,tt);break;case 5:Df(i);default:g0(o,i),i=$e=Fy(i,pa),i=f0(o,i,pa)}n.memoizedProps=n.pendingProps,i===null?Ju(n):$e=i}function fo(n,i,o,c){la=as=null,Df(i),ro=null,Ul=0;var f=i.return;try{if(gC(n,f,i,o,tt)){Nt=1,Hu(n,Jn(o,n.current)),$e=null;return}}catch(p){if(f!==null)throw $e=f,p;Nt=1,Hu(n,Jn(o,n.current)),$e=null;return}i.flags&32768?(st||c===1?n=!0:oo||(tt&536870912)!==0?n=!1:(ei=n=!0,(c===2||c===9||c===3||c===6)&&(c=rr.current,c!==null&&c.tag===13&&(c.flags|=16384))),F0(i,n)):Ju(i)}function Ju(n){var i=n;do{if((i.flags&32768)!==0){F0(i,ei);return}n=i.return;var o=yC(i.alternate,i,pa);if(o!==null){$e=o;return}if(i=i.sibling,i!==null){$e=i;return}$e=i=n}while(i!==null);Nt===0&&(Nt=5)}function F0(n,i){do{var o=vC(n.alternate,n);if(o!==null){o.flags&=32767,$e=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){$e=n;return}$e=n=o}while(n!==null);Nt=6,$e=null}function q0(n,i,o,c,f,p,E,A,O){n.cancelPendingCommit=null;do eh();while(un!==0);if((ct&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(p=i.lanes|i.childLanes,p|=of,rl(n,o,p,E,A,O),n===_t&&($e=_t=null,tt=0),co=i,ri=n,uo=o,dm=p,fm=f,j0=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,IC(rt,function(){return Q0(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=ae.T,ae.T=null,f=me.p,me.p=2,E=ct,ct|=4;try{_C(n,i,o)}finally{ct=E,me.p=f,ae.T=c}}un=1,H0(),G0(),$0()}}function H0(){if(un===1){un=0;var n=ri,i=co,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=ae.T,ae.T=null;var c=me.p;me.p=2;var f=ct;ct|=4;try{C0(i,n);var p=km,E=Dy(n.containerInfo),A=p.focusedElem,O=p.selectionRange;if(E!==A&&A&&A.ownerDocument&&Ny(A.ownerDocument.documentElement,A)){if(O!==null&&tf(A)){var X=O.start,ie=O.end;if(ie===void 0&&(ie=X),"selectionStart"in A)A.selectionStart=X,A.selectionEnd=Math.min(ie,A.value.length);else{var le=A.ownerDocument||document,J=le&&le.defaultView||window;if(J.getSelection){var ee=J.getSelection(),je=A.textContent.length,ke=Math.min(O.start,je),gt=O.end===void 0?ke:Math.min(O.end,je);!ee.extend&&ke>gt&&(E=gt,gt=ke,ke=E);var Q=Iy(A,ke),z=Iy(A,gt);if(Q&&z&&(ee.rangeCount!==1||ee.anchorNode!==Q.node||ee.anchorOffset!==Q.offset||ee.focusNode!==z.node||ee.focusOffset!==z.offset)){var W=le.createRange();W.setStart(Q.node,Q.offset),ee.removeAllRanges(),ke>gt?(ee.addRange(W),ee.extend(z.node,z.offset)):(W.setEnd(z.node,z.offset),ee.addRange(W))}}}}for(le=[],ee=A;ee=ee.parentNode;)ee.nodeType===1&&le.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<le.length;A++){var se=le[A];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}dh=!!Rm,km=Rm=null}finally{ct=f,me.p=c,ae.T=o}}n.current=i,un=2}}function G0(){if(un===2){un=0;var n=ri,i=co,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=ae.T,ae.T=null;var c=me.p;me.p=2;var f=ct;ct|=4;try{E0(n,i.alternate,i)}finally{ct=f,me.p=c,ae.T=o}}un=3}}function $0(){if(un===4||un===3){un=0,ye();var n=ri,i=co,o=uo,c=j0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?un=5:(un=0,co=ri=null,K0(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(ni=null),ks(o),i=i.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(pt,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=ae.T,f=me.p,me.p=2,ae.T=null;try{for(var p=n.onRecoverableError,E=0;E<c.length;E++){var A=c[E];p(A.value,{componentStack:A.stack})}}finally{ae.T=i,me.p=f}}(uo&3)!==0&&eh(),jr(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===mm?$l++:($l=0,mm=n):$l=0,Kl(0)}}function K0(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Cl(i)))}function eh(n){return H0(),G0(),$0(),Q0()}function Q0(){if(un!==5)return!1;var n=ri,i=dm;dm=0;var o=ks(uo),c=ae.T,f=me.p;try{me.p=32>o?32:o,ae.T=null,o=fm,fm=null;var p=ri,E=uo;if(un=0,co=ri=null,uo=0,(ct&6)!==0)throw Error(r(331));var A=ct;if(ct|=4,N0(p.current),R0(p,p.current,E,o),ct=A,Kl(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(pt,p)}catch{}return!0}finally{me.p=f,ae.T=c,K0(n,i)}}function Y0(n,i,o){i=Jn(o,i),i=$f(n.stateNode,i,2),n=Ka(n,i,2),n!==null&&(Qr(n,2),jr(n))}function yt(n,i,o){if(n.tag===3)Y0(n,n,o);else for(;i!==null;){if(i.tag===3){Y0(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ni===null||!ni.has(c))){n=Jn(o,n),o=Jv(2),c=Ka(i,o,2),c!==null&&(e0(o,c,i,n),Qr(c,2),jr(c));break}}i=i.return}}function vm(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new EC;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(o)||(lm=!0,f.add(o),n=AC.bind(null,n,i,o),i.then(n,n))}function AC(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,_t===n&&(tt&o)===o&&(Nt===4||Nt===3&&(tt&62914560)===tt&&300>Oe()-hm?(ct&2)===0&&ho(n,0):cm|=o,lo===tt&&(lo=0)),jr(n)}function W0(n,i){i===0&&(i=nl()),n=Ks(n,i),n!==null&&(Qr(n,i),jr(n))}function RC(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),W0(n,o)}function kC(n,i){var o=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(i),W0(n,o)}function IC(n,i){return Ce(n,i)}var th=null,mo=null,_m=!1,nh=!1,wm=!1,hs=0;function jr(n){n!==mo&&n.next===null&&(mo===null?th=mo=n:mo=mo.next=n),nh=!0,_m||(_m=!0,DC())}function Kl(n,i){if(!wm&&nh){wm=!0;do for(var o=!1,c=th;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var E=c.suspendedLanes,A=c.pingedLanes;p=(1<<31-at(42|n)+1)-1,p&=f&~(E&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,e_(c,p))}else p=tt,p=Rs(c,c===_t?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||Pi(c,p)||(o=!0,e_(c,p));c=c.next}while(o);wm=!1}}function NC(){X0()}function X0(){nh=_m=!1;var n=0;hs!==0&&(BC()&&(n=hs),hs=0);for(var i=Oe(),o=null,c=th;c!==null;){var f=c.next,p=Z0(c,i);p===0?(c.next=null,o===null?th=f:o.next=f,f===null&&(mo=o)):(o=c,(n!==0||(p&3)!==0)&&(nh=!0)),c=f}Kl(n)}function Z0(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var E=31-at(p),A=1<<E,O=f[E];O===-1?((A&o)===0||(A&c)!==0)&&(f[E]=el(A,i)):O<=i&&(n.expiredLanes|=A),p&=~A}if(i=_t,o=tt,o=Rs(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(ut===2||ut===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Pe(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Pi(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&Pe(c),ks(o)){case 2:case 8:o=Te;break;case 32:o=rt;break;case 268435456:o=Sn;break;default:o=rt}return c=J0.bind(null,n),o=Ce(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&Pe(c),n.callbackPriority=2,n.callbackNode=null,2}function J0(n,i){if(un!==0&&un!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(eh()&&n.callbackNode!==o)return null;var c=tt;return c=Rs(n,n===_t?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(O0(n,c,i),Z0(n,Oe()),n.callbackNode!=null&&n.callbackNode===o?J0.bind(null,n):null)}function e_(n,i){if(eh())return null;O0(n,i,!0)}function DC(){FC(function(){(ct&6)!==0?Ce(Ze,NC):X0()})}function bm(){return hs===0&&(hs=tl()),hs}function t_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Os(""+n)}function n_(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function jC(n,i,o,c,f){if(i==="submit"&&o&&o.stateNode===f){var p=t_((f[Bt]||null).action),E=c.submitter;E&&(i=(i=E[Bt]||null)?t_(i.formAction):E.getAttribute("formAction"),i!==null&&(p=i,E=null));var A=new Ps("action","action",null,c,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(hs!==0){var O=E?n_(f,E):new FormData(f);zf(o,{pending:!0,data:O,method:f.method,action:p},null,O)}}else typeof p=="function"&&(A.preventDefault(),O=E?n_(f,E):new FormData(f),zf(o,{pending:!0,data:O,method:f.method,action:p},p,O))},currentTarget:f}]})}}for(var Em=0;Em<sf.length;Em++){var Tm=sf[Em],MC=Tm.toLowerCase(),OC=Tm[0].toUpperCase()+Tm.slice(1);ur(MC,"on"+OC)}ur(Oy,"onAnimationEnd"),ur(Py,"onAnimationIteration"),ur(Uy,"onAnimationStart"),ur("dblclick","onDoubleClick"),ur("focusin","onFocus"),ur("focusout","onBlur"),ur(Zx,"onTransitionRun"),ur(Jx,"onTransitionStart"),ur(eC,"onTransitionCancel"),ur(Vy,"onTransitionEnd"),Wr("onMouseEnter",["mouseout","mouseover"]),Wr("onMouseLeave",["mouseout","mouseover"]),Wr("onPointerEnter",["pointerout","pointerover"]),Wr("onPointerLeave",["pointerout","pointerover"]),lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ql));function r_(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var E=c.length-1;0<=E;E--){var A=c[E],O=A.instance,X=A.currentTarget;if(A=A.listener,O!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=X;try{p(f)}catch(ie){qu(ie)}f.currentTarget=null,p=O}else for(E=0;E<c.length;E++){if(A=c[E],O=A.instance,X=A.currentTarget,A=A.listener,O!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=X;try{p(f)}catch(ie){qu(ie)}f.currentTarget=null,p=O}}}}function Ke(n,i){var o=i[il];o===void 0&&(o=i[il]=new Set);var c=n+"__bubble";o.has(c)||(a_(i,n,2,!1),o.add(c))}function Sm(n,i,o){var c=0;i&&(c|=4),a_(o,n,c,i)}var rh="_reactListening"+Math.random().toString(36).slice(2);function xm(n){if(!n[rh]){n[rh]=!0,sl.forEach(function(o){o!=="selectionchange"&&(PC.has(o)||Sm(o,!1,n),Sm(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[rh]||(i[rh]=!0,Sm("selectionchange",!1,i))}}function a_(n,i,o,c){switch(R_(i)){case 2:var f=cA;break;case 8:f=uA;break;default:f=Lm}o=f.bind(null,i,o,n),f=void 0,!Xn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function Cm(n,i,o,c,f){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var A=c.stateNode.containerInfo;if(A===f)break;if(E===4)for(E=c.return;E!==null;){var O=E.tag;if((O===3||O===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;A!==null;){if(E=Yr(A),E===null)return;if(O=E.tag,O===5||O===6||O===26||O===27){c=p=E;continue e}A=A.parentNode}}c=c.return}iu(function(){var X=p,ie=Wn(o),le=[];e:{var J=Ly.get(n);if(J!==void 0){var ee=Ps,je=n;switch(n){case"keypress":if(Sr(o)===0)break e;case"keydown":case"keyup":ee=Fs;break;case"focusin":je="focus",ee=Ls;break;case"focusout":je="blur",ee=Ls;break;case"beforeblur":case"afterblur":ee=Ls;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Zn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=fu;break;case Oy:case Py:case Uy:ee=Bs;break;case Vy:ee=gu;break;case"scroll":case"scrollend":ee=su;break;case"wheel":ee=qs;break;case"copy":case"cut":case"paste":ee=zs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=vl;break;case"toggle":case"beforetoggle":ee=yu}var ke=(i&4)!==0,gt=!ke&&(n==="scroll"||n==="scrollend"),Q=ke?J!==null?J+"Capture":null:J;ke=[];for(var z=X,W;z!==null;){var se=z;if(W=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||W===null||Q===null||(se=Hi(z,Q),se!=null&&ke.push(Yl(z,se,W))),gt)break;z=z.return}0<ke.length&&(J=new ee(J,je,null,o,ie),le.push({event:J,listeners:ke}))}}if((i&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",ee=n==="mouseout"||n==="pointerout",J&&o!==Jr&&(je=o.relatedTarget||o.fromElement)&&(Yr(je)||je[Qn]))break e;if((ee||J)&&(J=ie.window===ie?ie:(J=ie.ownerDocument)?J.defaultView||J.parentWindow:window,ee?(je=o.relatedTarget||o.toElement,ee=X,je=je?Yr(je):null,je!==null&&(gt=l(je),ke=je.tag,je!==gt||ke!==5&&ke!==27&&ke!==6)&&(je=null)):(ee=null,je=X),ee!==je)){if(ke=Zn,se="onMouseLeave",Q="onMouseEnter",z="mouse",(n==="pointerout"||n==="pointerover")&&(ke=vl,se="onPointerLeave",Q="onPointerEnter",z="pointer"),gt=ee==null?J:wr(ee),W=je==null?J:wr(je),J=new ke(se,z+"leave",ee,o,ie),J.target=gt,J.relatedTarget=W,se=null,Yr(ie)===X&&(ke=new ke(Q,z+"enter",je,o,ie),ke.target=W,ke.relatedTarget=gt,se=ke),gt=se,ee&&je)t:{for(ke=ee,Q=je,z=0,W=ke;W;W=go(W))z++;for(W=0,se=Q;se;se=go(se))W++;for(;0<z-W;)ke=go(ke),z--;for(;0<W-z;)Q=go(Q),W--;for(;z--;){if(ke===Q||Q!==null&&ke===Q.alternate)break t;ke=go(ke),Q=go(Q)}ke=null}else ke=null;ee!==null&&i_(le,J,ee,ke,!1),je!==null&&gt!==null&&i_(le,gt,je,ke,!0)}}e:{if(J=X?wr(X):window,ee=J.nodeName&&J.nodeName.toLowerCase(),ee==="select"||ee==="input"&&J.type==="file")var Ee=Sy;else if(Yt(J))if(xy)Ee=Yx;else{Ee=Kx;var Ge=$x}else ee=J.nodeName,!ee||ee.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?X&&hl(X.elementType)&&(Ee=Sy):Ee=Qx;if(Ee&&(Ee=Ee(n,X))){aa(le,Ee,o,ie);break e}Ge&&Ge(n,J,X),n==="focusout"&&X&&J.type==="number"&&X.memoizedProps.value!=null&&Fa(J,"number",J.value)}switch(Ge=X?wr(X):window,n){case"focusin":(Yt(Ge)||Ge.contentEditable==="true")&&(Hs=Ge,nf=X,bl=null);break;case"focusout":bl=nf=Hs=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,jy(le,o,ie);break;case"selectionchange":if(Xx)break;case"keydown":case"keyup":jy(le,o,ie)}var Se;if(Ar)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Je?ne(n,o)&&(Ie="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ie="onCompositionStart");Ie&&(w&&o.locale!=="ko"&&(Je||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Je&&(Se=fl()):(Tr=ie,qa="value"in Tr?Tr.value:Tr.textContent,Je=!0)),Ge=ah(X,Ie),0<Ge.length&&(Ie=new pl(Ie,n,null,o,ie),le.push({event:Ie,listeners:Ge}),Se?Ie.data=Se:(Se=fe(o),Se!==null&&(Ie.data=Se)))),(Se=_?Qt(n,o):et(n,o))&&(Ie=ah(X,"onBeforeInput"),0<Ie.length&&(Ge=new pl("onBeforeInput","beforeinput",null,o,ie),le.push({event:Ge,listeners:Ie}),Ge.data=Se)),jC(le,n,X,o,ie)}r_(le,i)})}function Yl(n,i,o){return{instance:n,listener:i,currentTarget:o}}function ah(n,i){for(var o=i+"Capture",c=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Hi(n,o),f!=null&&c.unshift(Yl(n,f,p)),f=Hi(n,i),f!=null&&c.push(Yl(n,f,p))),n.tag===3)return c;n=n.return}return[]}function go(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function i_(n,i,o,c,f){for(var p=i._reactName,E=[];o!==null&&o!==c;){var A=o,O=A.alternate,X=A.stateNode;if(A=A.tag,O!==null&&O===c)break;A!==5&&A!==26&&A!==27||X===null||(O=X,f?(X=Hi(o,p),X!=null&&E.unshift(Yl(o,X,O))):f||(X=Hi(o,p),X!=null&&E.push(Yl(o,X,O)))),o=o.return}E.length!==0&&n.push({event:i,listeners:E})}var UC=/\r\n?/g,VC=/\u0000|\uFFFD/g;function s_(n){return(typeof n=="string"?n:""+n).replace(UC,`
`).replace(VC,"")}function o_(n,i){return i=s_(i),s_(n)===i}function ih(){}function mt(n,i,o,c,f,p){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Yn(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Yn(n,""+c);break;case"className":br(n,"class",c);break;case"tabIndex":br(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":br(n,o,c);break;case"style":ul(n,c,p);break;case"data":if(i!=="object"){br(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Os(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(i!=="input"&&mt(n,i,"name",f.name,f,null),mt(n,i,"formEncType",f.formEncType,f,null),mt(n,i,"formMethod",f.formMethod,f,null),mt(n,i,"formTarget",f.formTarget,f,null)):(mt(n,i,"encType",f.encType,f,null),mt(n,i,"method",f.method,f,null),mt(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Os(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=ih);break;case"onScroll":c!=null&&Ke("scroll",n);break;case"onScrollEnd":c!=null&&Ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=Os(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ke("beforetoggle",n),Ke("toggle",n),za(n,"popover",c);break;case"xlinkActuate":on(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":on(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":on(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":on(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":on(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":on(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":on(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":on(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":on(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":za(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Yd.get(o)||o,za(n,o,c))}}function Am(n,i,o,c,f,p){switch(o){case"style":ul(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof c=="string"?Yn(n,c):(typeof c=="number"||typeof c=="bigint")&&Yn(n,""+c);break;case"onScroll":c!=null&&Ke("scroll",n);break;case"onScrollEnd":c!=null&&Ke("scrollend",n);break;case"onClick":c!=null&&(n.onclick=ih);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Is.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),p=n[Bt]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(i,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):za(n,o,c)}}}function hn(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",n),Ke("load",n);var c=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var E=o[p];if(E!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:mt(n,i,p,E,o,null)}}f&&mt(n,i,"srcSet",o.srcSet,o,null),c&&mt(n,i,"src",o.src,o,null);return;case"input":Ke("invalid",n);var A=p=E=f=null,O=null,X=null;for(c in o)if(o.hasOwnProperty(c)){var ie=o[c];if(ie!=null)switch(c){case"name":f=ie;break;case"type":E=ie;break;case"checked":O=ie;break;case"defaultChecked":X=ie;break;case"value":p=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,i));break;default:mt(n,i,c,ie,o,null)}}zi(n,p,A,O,X,E,f,!1),Ms(n);return;case"select":Ke("invalid",n),c=E=p=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":p=A;break;case"defaultValue":E=A;break;case"multiple":c=A;default:mt(n,i,f,A,o,null)}i=p,o=E,n.multiple=!!c,i!=null?Zr(n,!!c,i,!1):o!=null&&Zr(n,!!c,o,!0);return;case"textarea":Ke("invalid",n),p=f=c=null;for(E in o)if(o.hasOwnProperty(E)&&(A=o[E],A!=null))switch(E){case"value":c=A;break;case"defaultValue":f=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:mt(n,i,E,A,o,null)}Fi(n,c,f,p),Ms(n);return;case"option":for(O in o)if(o.hasOwnProperty(O)&&(c=o[O],c!=null))switch(O){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:mt(n,i,O,c,o,null)}return;case"dialog":Ke("beforetoggle",n),Ke("toggle",n),Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":Ke("load",n);break;case"video":case"audio":for(c=0;c<Ql.length;c++)Ke(Ql[c],n);break;case"image":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"embed":case"source":case"link":Ke("error",n),Ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(c=o[X],c!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:mt(n,i,X,c,o,null)}return;default:if(hl(i)){for(ie in o)o.hasOwnProperty(ie)&&(c=o[ie],c!==void 0&&Am(n,i,ie,c,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(c=o[A],c!=null&&mt(n,i,A,c,o,null))}function LC(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,E=null,A=null,O=null,X=null,ie=null;for(ee in o){var le=o[ee];if(o.hasOwnProperty(ee)&&le!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":O=le;default:c.hasOwnProperty(ee)||mt(n,i,ee,null,c,le)}}for(var J in c){var ee=c[J];if(le=o[J],c.hasOwnProperty(J)&&(ee!=null||le!=null))switch(J){case"type":p=ee;break;case"name":f=ee;break;case"checked":X=ee;break;case"defaultChecked":ie=ee;break;case"value":E=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,i));break;default:ee!==le&&mt(n,i,J,ee,c,le)}}Un(n,E,A,O,X,ie,p,f);return;case"select":ee=E=A=J=null;for(p in o)if(O=o[p],o.hasOwnProperty(p)&&O!=null)switch(p){case"value":break;case"multiple":ee=O;default:c.hasOwnProperty(p)||mt(n,i,p,null,c,O)}for(f in c)if(p=c[f],O=o[f],c.hasOwnProperty(f)&&(p!=null||O!=null))switch(f){case"value":J=p;break;case"defaultValue":A=p;break;case"multiple":E=p;default:p!==O&&mt(n,i,f,p,c,O)}i=A,o=E,c=ee,J!=null?Zr(n,!!o,J,!1):!!c!=!!o&&(i!=null?Zr(n,!!o,i,!0):Zr(n,!!o,o?[]:"",!1));return;case"textarea":ee=J=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!c.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:mt(n,i,A,null,c,f)}for(E in c)if(f=c[E],p=o[E],c.hasOwnProperty(E)&&(f!=null||p!=null))switch(E){case"value":J=f;break;case"defaultValue":ee=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&mt(n,i,E,f,c,p)}dt(n,J,ee);return;case"option":for(var je in o)if(J=o[je],o.hasOwnProperty(je)&&J!=null&&!c.hasOwnProperty(je))switch(je){case"selected":n.selected=!1;break;default:mt(n,i,je,null,c,J)}for(O in c)if(J=c[O],ee=o[O],c.hasOwnProperty(O)&&J!==ee&&(J!=null||ee!=null))switch(O){case"selected":n.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:mt(n,i,O,J,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in o)J=o[ke],o.hasOwnProperty(ke)&&J!=null&&!c.hasOwnProperty(ke)&&mt(n,i,ke,null,c,J);for(X in c)if(J=c[X],ee=o[X],c.hasOwnProperty(X)&&J!==ee&&(J!=null||ee!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,i));break;default:mt(n,i,X,J,c,ee)}return;default:if(hl(i)){for(var gt in o)J=o[gt],o.hasOwnProperty(gt)&&J!==void 0&&!c.hasOwnProperty(gt)&&Am(n,i,gt,void 0,c,J);for(ie in c)J=c[ie],ee=o[ie],!c.hasOwnProperty(ie)||J===ee||J===void 0&&ee===void 0||Am(n,i,ie,J,c,ee);return}}for(var Q in o)J=o[Q],o.hasOwnProperty(Q)&&J!=null&&!c.hasOwnProperty(Q)&&mt(n,i,Q,null,c,J);for(le in c)J=c[le],ee=o[le],!c.hasOwnProperty(le)||J===ee||J==null&&ee==null||mt(n,i,le,J,c,ee)}var Rm=null,km=null;function sh(n){return n.nodeType===9?n:n.ownerDocument}function l_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c_(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Im(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Nm=null;function BC(){var n=window.event;return n&&n.type==="popstate"?n===Nm?!1:(Nm=n,!0):(Nm=null,!1)}var u_=typeof setTimeout=="function"?setTimeout:void 0,zC=typeof clearTimeout=="function"?clearTimeout:void 0,h_=typeof Promise=="function"?Promise:void 0,FC=typeof queueMicrotask=="function"?queueMicrotask:typeof h_<"u"?function(n){return h_.resolve(null).then(n).catch(qC)}:u_;function qC(n){setTimeout(function(){throw n})}function ii(n){return n==="head"}function d_(n,i){var o=i,c=0,f=0;do{var p=o.nextSibling;if(n.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<c&&8>c){o=c;var E=n.ownerDocument;if(o&1&&Wl(E.documentElement),o&2&&Wl(E.body),o&4)for(o=E.head,Wl(o),E=o.firstChild;E;){var A=E.nextSibling,O=E.nodeName;E[Ui]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=A}}if(f===0){n.removeChild(p),ac(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:c=o.charCodeAt(0)-48;else c=0;o=p}while(o);ac(i)}function Dm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Dm(o),Ba(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function HC(n,i,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Ui])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=dr(n.nextSibling),n===null)break}return null}function GC(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=dr(n.nextSibling),n===null))return null;return n}function jm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function $C(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function dr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Mm=null;function f_(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function m_(n,i,o){switch(i=sh(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Wl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ba(n)}var ir=new Map,g_=new Set;function oh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ya=me.d;me.d={f:KC,r:QC,D:YC,C:WC,L:XC,m:ZC,X:eA,S:JC,M:tA};function KC(){var n=ya.f(),i=Zu();return n||i}function QC(n){var i=_r(n);i!==null&&i.tag===5&&i.type==="form"?Ov(i):ya.r(n)}var po=typeof document>"u"?null:document;function p_(n,i,o){var c=po;if(c&&typeof i=="string"&&i){var f=zt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),g_.has(f)||(g_.add(f),n={rel:n,crossOrigin:o,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),hn(i,"link",n),Pt(i),c.head.appendChild(i)))}}function YC(n){ya.D(n),p_("dns-prefetch",n,null)}function WC(n,i){ya.C(n,i),p_("preconnect",n,i)}function XC(n,i,o){ya.L(n,i,o);var c=po;if(c&&n&&i){var f='link[rel="preload"][as="'+zt(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+zt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+zt(o.imageSizes)+'"]')):f+='[href="'+zt(n)+'"]';var p=f;switch(i){case"style":p=yo(n);break;case"script":p=vo(n)}ir.has(p)||(n=v({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),ir.set(p,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(Xl(p))||i==="script"&&c.querySelector(Zl(p))||(i=c.createElement("link"),hn(i,"link",n),Pt(i),c.head.appendChild(i)))}}function ZC(n,i){ya.m(n,i);var o=po;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+zt(c)+'"][href="'+zt(n)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=vo(n)}if(!ir.has(p)&&(n=v({rel:"modulepreload",href:n},i),ir.set(p,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Zl(p)))return}c=o.createElement("link"),hn(c,"link",n),Pt(c),o.head.appendChild(c)}}}function JC(n,i,o){ya.S(n,i,o);var c=po;if(c&&n){var f=xn(c).hoistableStyles,p=yo(n);i=i||"default";var E=f.get(p);if(!E){var A={loading:0,preload:null};if(E=c.querySelector(Xl(p)))A.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":i},o),(o=ir.get(p))&&Om(n,o);var O=E=c.createElement("link");Pt(O),hn(O,"link",n),O._p=new Promise(function(X,ie){O.onload=X,O.onerror=ie}),O.addEventListener("load",function(){A.loading|=1}),O.addEventListener("error",function(){A.loading|=2}),A.loading|=4,lh(E,i,c)}E={type:"stylesheet",instance:E,count:1,state:A},f.set(p,E)}}}function eA(n,i){ya.X(n,i);var o=po;if(o&&n){var c=xn(o).hoistableScripts,f=vo(n),p=c.get(f);p||(p=o.querySelector(Zl(f)),p||(n=v({src:n,async:!0},i),(i=ir.get(f))&&Pm(n,i),p=o.createElement("script"),Pt(p),hn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function tA(n,i){ya.M(n,i);var o=po;if(o&&n){var c=xn(o).hoistableScripts,f=vo(n),p=c.get(f);p||(p=o.querySelector(Zl(f)),p||(n=v({src:n,async:!0,type:"module"},i),(i=ir.get(f))&&Pm(n,i),p=o.createElement("script"),Pt(p),hn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function y_(n,i,o,c){var f=(f=V.current)?oh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=yo(o.href),o=xn(f).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=yo(o.href);var p=xn(f).hoistableStyles,E=p.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,E),(p=f.querySelector(Xl(n)))&&!p._p&&(E.instance=p,E.state.loading=5),ir.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ir.set(n,o),p||nA(f,n,o,E.state))),i&&c===null)throw Error(r(528,""));return E}if(i&&c!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=vo(o),o=xn(f).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function yo(n){return'href="'+zt(n)+'"'}function Xl(n){return'link[rel="stylesheet"]['+n+"]"}function v_(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function nA(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),hn(i,"link",o),Pt(i),n.head.appendChild(i))}function vo(n){return'[src="'+zt(n)+'"]'}function Zl(n){return"script[async]"+n}function __(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+zt(o.href)+'"]');if(c)return i.instance=c,Pt(c),c;var f=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Pt(c),hn(c,"style",f),lh(c,o.precedence,n),i.instance=c;case"stylesheet":f=yo(o.href);var p=n.querySelector(Xl(f));if(p)return i.state.loading|=4,i.instance=p,Pt(p),p;c=v_(o),(f=ir.get(f))&&Om(c,f),p=(n.ownerDocument||n).createElement("link"),Pt(p);var E=p;return E._p=new Promise(function(A,O){E.onload=A,E.onerror=O}),hn(p,"link",c),i.state.loading|=4,lh(p,o.precedence,n),i.instance=p;case"script":return p=vo(o.src),(f=n.querySelector(Zl(p)))?(i.instance=f,Pt(f),f):(c=o,(f=ir.get(p))&&(c=v({},o),Pm(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Pt(f),hn(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,lh(c,o.precedence,n));return i.instance}function lh(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,E=0;E<c.length;E++){var A=c[E];if(A.dataset.precedence===i)p=A;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Om(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Pm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var ch=null;function w_(n,i,o){if(ch===null){var c=new Map,f=ch=new Map;f.set(o,c)}else f=ch,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var p=o[f];if(!(p[Ui]||p[Kt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(i)||"";E=n+E;var A=c.get(E);A?A.push(p):c.set(E,[p])}}return c}function b_(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function rA(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function E_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Jl=null;function aA(){}function iA(n,i,o){if(Jl===null)throw Error(r(475));var c=Jl;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=yo(o.href),p=n.querySelector(Xl(f));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=uh.bind(c),n.then(c,c)),i.state.loading|=4,i.instance=p,Pt(p);return}p=n.ownerDocument||n,o=v_(o),(f=ir.get(f))&&Om(o,f),p=p.createElement("link"),Pt(p);var E=p;E._p=new Promise(function(A,O){E.onload=A,E.onerror=O}),hn(p,"link",o),i.instance=p}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=uh.bind(c),n.addEventListener("load",i),n.addEventListener("error",i))}}function sA(){if(Jl===null)throw Error(r(475));var n=Jl;return n.stylesheets&&n.count===0&&Um(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&Um(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function uh(){if(this.count--,this.count===0){if(this.stylesheets)Um(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var hh=null;function Um(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,hh=new Map,i.forEach(oA,n),hh=null,uh.call(n))}function oA(n,i){if(!(i.state.loading&4)){var o=hh.get(n);if(o)var c=o.get(null);else{o=new Map,hh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var E=f[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),c=E)}c&&o.set(null,c)}f=i.instance,E=f.getAttribute("data-precedence"),p=o.get(E)||c,p===c&&o.set(null,f),o.set(E,f),this.count++,c=uh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var ec={$$typeof:G,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function lA(n,i,o,c,f,p,E,A){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kr(0),this.hiddenUpdates=Kr(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function T_(n,i,o,c,f,p,E,A,O,X,ie,le){return n=new lA(n,i,o,E,A,O,X,le),i=1,p===!0&&(i|=24),p=Ln(3,null,null,i),n.current=p,p.stateNode=n,i=vf(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:c,isDehydrated:o,cache:i},Ef(p),n}function S_(n){return n?(n=Qs,n):Qs}function x_(n,i,o,c,f,p){f=S_(f),c.context===null?c.context=f:c.pendingContext=f,c=$a(i),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=Ka(n,c,i),o!==null&&(Hn(o,n,i),Il(o,n,i))}function C_(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function Vm(n,i){C_(n,i),(n=n.alternate)&&C_(n,i)}function A_(n){if(n.tag===13){var i=Ks(n,67108864);i!==null&&Hn(i,n,67108864),Vm(n,67108864)}}var dh=!0;function cA(n,i,o,c){var f=ae.T;ae.T=null;var p=me.p;try{me.p=2,Lm(n,i,o,c)}finally{me.p=p,ae.T=f}}function uA(n,i,o,c){var f=ae.T;ae.T=null;var p=me.p;try{me.p=8,Lm(n,i,o,c)}finally{me.p=p,ae.T=f}}function Lm(n,i,o,c){if(dh){var f=Bm(c);if(f===null)Cm(n,i,c,fh,o),k_(n,c);else if(dA(f,n,i,o,c))c.stopPropagation();else if(k_(n,c),i&4&&-1<hA.indexOf(n)){for(;f!==null;){var p=_r(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=or(p.pendingLanes);if(E!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var O=1<<31-at(E);A.entanglements[1]|=O,E&=~O}jr(p),(ct&6)===0&&(Wu=Oe()+500,Kl(0))}}break;case 13:A=Ks(p,2),A!==null&&Hn(A,p,2),Zu(),Vm(p,2)}if(p=Bm(c),p===null&&Cm(n,i,c,fh,o),p===f)break;f=p}f!==null&&c.stopPropagation()}else Cm(n,i,c,null,o)}}function Bm(n){return n=Wn(n),zm(n)}var fh=null;function zm(n){if(fh=null,n=Yr(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=u(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return fh=n,null}function R_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xt()){case Ze:return 2;case Te:return 8;case rt:case pn:return 32;case Sn:return 268435456;default:return 32}default:return 32}}var Fm=!1,si=null,oi=null,li=null,tc=new Map,nc=new Map,ci=[],hA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function k_(n,i){switch(n){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":tc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":nc.delete(i.pointerId)}}function rc(n,i,o,c,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},i!==null&&(i=_r(i),i!==null&&A_(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function dA(n,i,o,c,f){switch(i){case"focusin":return si=rc(si,n,i,o,c,f),!0;case"dragenter":return oi=rc(oi,n,i,o,c,f),!0;case"mouseover":return li=rc(li,n,i,o,c,f),!0;case"pointerover":var p=f.pointerId;return tc.set(p,rc(tc.get(p)||null,n,i,o,c,f)),!0;case"gotpointercapture":return p=f.pointerId,nc.set(p,rc(nc.get(p)||null,n,i,o,c,f)),!0}return!1}function I_(n){var i=Yr(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){n.blockedOn=i,Zc(n.priority,function(){if(o.tag===13){var c=qn();c=Ua(c);var f=Ks(o,c);f!==null&&Hn(f,o,c),Vm(o,c)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function mh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Bm(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Jr=c,o.target.dispatchEvent(c),Jr=null}else return i=_r(o),i!==null&&A_(i),n.blockedOn=o,!1;i.shift()}return!0}function N_(n,i,o){mh(n)&&o.delete(i)}function fA(){Fm=!1,si!==null&&mh(si)&&(si=null),oi!==null&&mh(oi)&&(oi=null),li!==null&&mh(li)&&(li=null),tc.forEach(N_),nc.forEach(N_)}function gh(n,i){n.blockedOn===i&&(n.blockedOn=null,Fm||(Fm=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,fA)))}var ph=null;function D_(n){ph!==n&&(ph=n,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){ph===n&&(ph=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if(zm(c||o)===null)continue;break}var p=_r(o);p!==null&&(n.splice(i,3),i-=3,zf(p,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function ac(n){function i(O){return gh(O,n)}si!==null&&gh(si,n),oi!==null&&gh(oi,n),li!==null&&gh(li,n),tc.forEach(i),nc.forEach(i);for(var o=0;o<ci.length;o++){var c=ci[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<ci.length&&(o=ci[0],o.blockedOn===null);)I_(o),o.blockedOn===null&&ci.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],p=o[c+1],E=f[Bt]||null;if(typeof p=="function")E||D_(o);else if(E){var A=null;if(p&&p.hasAttribute("formAction")){if(f=p,E=p[Bt]||null)A=E.formAction;else if(zm(f)!==null)continue}else A=E.action;typeof A=="function"?o[c+1]=A:(o.splice(c,3),c-=3),D_(o)}}}function qm(n){this._internalRoot=n}yh.prototype.render=qm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,c=qn();x_(o,c,n,i,null,null)},yh.prototype.unmount=qm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;x_(n.current,2,null,n,null,null),Zu(),i[Qn]=null}};function yh(n){this._internalRoot=n}yh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Va();n={blockedOn:null,target:n,priority:i};for(var o=0;o<ci.length&&i!==0&&i<ci[o].priority;o++);ci.splice(o,0,n),o===0&&I_(n)}};var j_=e.version;if(j_!=="19.1.0")throw Error(r(527,j_,"19.1.0"));me.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(i),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var mA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vh.isDisabled&&vh.supportsFiber)try{pt=vh.inject(mA),Qe=vh}catch{}}return sc.createRoot=function(n,i){if(!s(n))throw Error(r(299));var o=!1,c="",f=Yv,p=Wv,E=Xv,A=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=T_(n,1,!1,null,null,o,c,f,p,E,A,null),n[Qn]=i.current,xm(n),new qm(i)},sc.hydrateRoot=function(n,i,o){if(!s(n))throw Error(r(299));var c=!1,f="",p=Yv,E=Wv,A=Xv,O=null,X=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(O=o.unstable_transitionCallbacks),o.formState!==void 0&&(X=o.formState)),i=T_(n,1,!0,i,o??null,c,f,p,E,A,O,X),i.context=S_(null),o=i.current,c=qn(),c=Ua(c),f=$a(c),f.callback=null,Ka(o,f,c),o=c,i.current.lanes=o,Qr(i,o),jr(i),n[Qn]=i.current,xm(n),new yh(i)},sc.version="19.1.0",sc}var q_;function SA(){if(q_)return $m.exports;q_=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),$m.exports=TA(),$m.exports}var xA=SA(),oc={},H_;function CA(){if(H_)return oc;H_=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.parse=u,oc.serialize=y;const a=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function u(T,C){const R=new l,S=T.length;if(S<2)return R;const x=(C==null?void 0:C.decode)||v;let I=0;do{const B=T.indexOf("=",I);if(B===-1)break;const G=T.indexOf(";",I),re=G===-1?S:G;if(B>re){I=T.lastIndexOf(";",B-1)+1;continue}const oe=m(T,I,B),de=g(T,B,oe),M=T.slice(oe,de);if(R[M]===void 0){let N=m(T,B+1,re),j=g(T,re,N);const U=x(T.slice(N,j));R[M]=U}I=re+1}while(I<S);return R}function m(T,C,R){do{const S=T.charCodeAt(C);if(S!==32&&S!==9)return C}while(++C<R);return R}function g(T,C,R){for(;C>R;){const S=T.charCodeAt(--C);if(S!==32&&S!==9)return C+1}return R}function y(T,C,R){const S=(R==null?void 0:R.encode)||encodeURIComponent;if(!a.test(T))throw new TypeError(`argument name is invalid: ${T}`);const x=S(C);if(!e.test(x))throw new TypeError(`argument val is invalid: ${C}`);let I=T+"="+x;if(!R)return I;if(R.maxAge!==void 0){if(!Number.isInteger(R.maxAge))throw new TypeError(`option maxAge is invalid: ${R.maxAge}`);I+="; Max-Age="+R.maxAge}if(R.domain){if(!t.test(R.domain))throw new TypeError(`option domain is invalid: ${R.domain}`);I+="; Domain="+R.domain}if(R.path){if(!r.test(R.path))throw new TypeError(`option path is invalid: ${R.path}`);I+="; Path="+R.path}if(R.expires){if(!b(R.expires)||!Number.isFinite(R.expires.valueOf()))throw new TypeError(`option expires is invalid: ${R.expires}`);I+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(I+="; HttpOnly"),R.secure&&(I+="; Secure"),R.partitioned&&(I+="; Partitioned"),R.priority)switch(typeof R.priority=="string"?R.priority.toLowerCase():void 0){case"low":I+="; Priority=Low";break;case"medium":I+="; Priority=Medium";break;case"high":I+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${R.priority}`)}if(R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":I+="; SameSite=Strict";break;case"lax":I+="; SameSite=Lax";break;case"none":I+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${R.sameSite}`)}return I}function v(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function b(T){return s.call(T)==="[object Date]"}return oc}CA();var G_="popstate";function AA(a={}){function e(r,s){let{pathname:l,search:u,hash:m}=r.location;return pg("",{pathname:l,search:u,hash:m},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Sc(s)}return kA(e,t,null,a)}function Rt(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function pr(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RA(){return Math.random().toString(36).substring(2,10)}function $_(a,e){return{usr:a.state,key:a.key,idx:e}}function pg(a,e,t=null,r){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?Fo(e):e,state:t,key:e&&e.key||r||RA()}}function Sc({pathname:a="/",search:e="",hash:t=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(a+=t.charAt(0)==="#"?t:"#"+t),a}function Fo(a){let e={};if(a){let t=a.indexOf("#");t>=0&&(e.hash=a.substring(t),a=a.substring(0,t));let r=a.indexOf("?");r>=0&&(e.search=a.substring(r),a=a.substring(0,r)),a&&(e.pathname=a)}return e}function kA(a,e,t,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,u=s.history,m="POP",g=null,y=v();y==null&&(y=0,u.replaceState({...u.state,idx:y},""));function v(){return(u.state||{idx:null}).idx}function b(){m="POP";let x=v(),I=x==null?null:x-y;y=x,g&&g({action:m,location:S.location,delta:I})}function T(x,I){m="PUSH";let B=pg(S.location,x,I);y=v()+1;let G=$_(B,y),re=S.createHref(B);try{u.pushState(G,"",re)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;s.location.assign(re)}l&&g&&g({action:m,location:S.location,delta:1})}function C(x,I){m="REPLACE";let B=pg(S.location,x,I);y=v();let G=$_(B,y),re=S.createHref(B);u.replaceState(G,"",re),l&&g&&g({action:m,location:S.location,delta:0})}function R(x){let I=s.location.origin!=="null"?s.location.origin:s.location.href,B=typeof x=="string"?x:Sc(x);return B=B.replace(/ $/,"%20"),Rt(I,`No window.location.(origin|href) available to create URL for href: ${B}`),new URL(B,I)}let S={get action(){return m},get location(){return a(s,u)},listen(x){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener(G_,b),g=x,()=>{s.removeEventListener(G_,b),g=null}},createHref(x){return e(s,x)},createURL:R,encodeLocation(x){let I=R(x);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:T,replace:C,go(x){return u.go(x)}};return S}function sE(a,e,t="/"){return IA(a,e,t,!1)}function IA(a,e,t,r){let s=typeof e=="string"?Fo(e):e,l=xa(s.pathname||"/",t);if(l==null)return null;let u=oE(a);NA(u);let m=null;for(let g=0;m==null&&g<u.length;++g){let y=FA(l);m=BA(u[g],y,r)}return m}function oE(a,e=[],t=[],r=""){let s=(l,u,m)=>{let g={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};g.relativePath.startsWith("/")&&(Rt(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length));let y=Ea([r,g.relativePath]),v=t.concat(g);l.children&&l.children.length>0&&(Rt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),oE(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:VA(y,l.index),routesMeta:v})};return a.forEach((l,u)=>{var m;if(l.path===""||!((m=l.path)!=null&&m.includes("?")))s(l,u);else for(let g of lE(l.path))s(l,u,g)}),e}function lE(a){let e=a.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let u=lE(r.join("/")),m=[];return m.push(...u.map(g=>g===""?l:[l,g].join("/"))),s&&m.push(...u),m.map(g=>a.startsWith("/")&&g===""?"/":g)}function NA(a){a.sort((e,t)=>e.score!==t.score?t.score-e.score:LA(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var DA=/^:[\w-]+$/,jA=3,MA=2,OA=1,PA=10,UA=-2,K_=a=>a==="*";function VA(a,e){let t=a.split("/"),r=t.length;return t.some(K_)&&(r+=UA),e&&(r+=MA),t.filter(s=>!K_(s)).reduce((s,l)=>s+(DA.test(l)?jA:l===""?OA:PA),r)}function LA(a,e){return a.length===e.length&&a.slice(0,-1).every((r,s)=>r===e[s])?a[a.length-1]-e[e.length-1]:0}function BA(a,e,t=!1){let{routesMeta:r}=a,s={},l="/",u=[];for(let m=0;m<r.length;++m){let g=r[m],y=m===r.length-1,v=l==="/"?e:e.slice(l.length)||"/",b=qh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},v),T=g.route;if(!b&&y&&t&&!r[r.length-1].route.index&&(b=qh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!b)return null;Object.assign(s,b.params),u.push({params:s,pathname:Ea([l,b.pathname]),pathnameBase:$A(Ea([l,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(l=Ea([l,b.pathnameBase]))}return u}function qh(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[t,r]=zA(a.path,a.caseSensitive,a.end),s=e.match(t);if(!s)return null;let l=s[0],u=l.replace(/(.)\/+$/,"$1"),m=s.slice(1);return{params:r.reduce((y,{paramName:v,isOptional:b},T)=>{if(v==="*"){let R=m[T]||"";u=l.slice(0,l.length-R.length).replace(/(.)\/+$/,"$1")}const C=m[T];return b&&!C?y[v]=void 0:y[v]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:u,pattern:a}}function zA(a,e=!1,t=!0){pr(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let r=[],s="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,m,g)=>(r.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(r.push({paramName:"*"}),s+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":a!==""&&a!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function FA(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pr(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function xa(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=a.charAt(t);return r&&r!=="/"?null:a.slice(t)||"/"}function qA(a,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof a=="string"?Fo(a):a;return{pathname:t?t.startsWith("/")?t:HA(t,e):e,search:KA(r),hash:QA(s)}}function HA(a,e){let t=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Wm(a,e,t,r){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GA(a){return a.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cE(a){let e=GA(a);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function uE(a,e,t,r=!1){let s;typeof a=="string"?s=Fo(a):(s={...a},Rt(!s.pathname||!s.pathname.includes("?"),Wm("?","pathname","search",s)),Rt(!s.pathname||!s.pathname.includes("#"),Wm("#","pathname","hash",s)),Rt(!s.search||!s.search.includes("#"),Wm("#","search","hash",s)));let l=a===""||s.pathname==="",u=l?"/":s.pathname,m;if(u==null)m=t;else{let b=e.length-1;if(!r&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),b-=1;s.pathname=T.join("/")}m=b>=0?e[b]:"/"}let g=qA(s,m),y=u&&u!=="/"&&u.endsWith("/"),v=(l||u===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||v)&&(g.pathname+="/"),g}var Ea=a=>a.join("/").replace(/\/\/+/g,"/"),$A=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),KA=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,QA=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function YA(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var hE=["POST","PUT","PATCH","DELETE"];new Set(hE);var WA=["GET",...hE];new Set(WA);var qo=F.createContext(null);qo.displayName="DataRouter";var hd=F.createContext(null);hd.displayName="DataRouterState";var dE=F.createContext({isTransitioning:!1});dE.displayName="ViewTransition";var XA=F.createContext(new Map);XA.displayName="Fetchers";var ZA=F.createContext(null);ZA.displayName="Await";var Fr=F.createContext(null);Fr.displayName="Navigation";var Oc=F.createContext(null);Oc.displayName="Location";var qr=F.createContext({outlet:null,matches:[],isDataRoute:!1});qr.displayName="Route";var np=F.createContext(null);np.displayName="RouteError";function JA(a,{relative:e}={}){Rt(Pc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=F.useContext(Fr),{hash:s,pathname:l,search:u}=Uc(a,{relative:e}),m=l;return t!=="/"&&(m=l==="/"?t:Ea([t,l])),r.createHref({pathname:m,search:u,hash:s})}function Pc(){return F.useContext(Oc)!=null}function ja(){return Rt(Pc(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(Oc).location}var fE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mE(a){F.useContext(Fr).static||F.useLayoutEffect(a)}function ki(){let{isDataRoute:a}=F.useContext(qr);return a?d1():e1()}function e1(){Rt(Pc(),"useNavigate() may be used only in the context of a <Router> component.");let a=F.useContext(qo),{basename:e,navigator:t}=F.useContext(Fr),{matches:r}=F.useContext(qr),{pathname:s}=ja(),l=JSON.stringify(cE(r)),u=F.useRef(!1);return mE(()=>{u.current=!0}),F.useCallback((g,y={})=>{if(pr(u.current,fE),!u.current)return;if(typeof g=="number"){t.go(g);return}let v=uE(g,JSON.parse(l),s,y.relative==="path");a==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ea([e,v.pathname])),(y.replace?t.replace:t.push)(v,y.state,y)},[e,t,l,s,a])}F.createContext(null);function gE(){let{matches:a}=F.useContext(qr),e=a[a.length-1];return e?e.params:{}}function Uc(a,{relative:e}={}){let{matches:t}=F.useContext(qr),{pathname:r}=ja(),s=JSON.stringify(cE(t));return F.useMemo(()=>uE(a,JSON.parse(s),r,e==="path"),[a,s,r,e])}function t1(a,e){return pE(a,e)}function pE(a,e,t,r){var B;Rt(Pc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:l}=F.useContext(Fr),{matches:u}=F.useContext(qr),m=u[u.length-1],g=m?m.params:{},y=m?m.pathname:"/",v=m?m.pathnameBase:"/",b=m&&m.route;{let G=b&&b.path||"";yE(y,!b||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let T=ja(),C;if(e){let G=typeof e=="string"?Fo(e):e;Rt(v==="/"||((B=G.pathname)==null?void 0:B.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${G.pathname}" was given in the \`location\` prop.`),C=G}else C=T;let R=C.pathname||"/",S=R;if(v!=="/"){let G=v.replace(/^\//,"").split("/");S="/"+R.replace(/^\//,"").split("/").slice(G.length).join("/")}let x=!l&&t&&t.matches&&t.matches.length>0?t.matches:sE(a,{pathname:S});pr(b||x!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),pr(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=s1(x&&x.map(G=>Object.assign({},G,{params:Object.assign({},g,G.params),pathname:Ea([v,s.encodeLocation?s.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?v:Ea([v,s.encodeLocation?s.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),u,t,r);return e&&I?F.createElement(Oc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},I):I}function n1(){let a=h1(),e=YA(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),t=a instanceof Error?a.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",a),u=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:l},"ErrorBoundary")," or"," ",F.createElement("code",{style:l},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:s},t):null,u)}var r1=F.createElement(n1,null),a1=class extends F.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){console.error("React Router caught the following error during render",a,e)}render(){return this.state.error!==void 0?F.createElement(qr.Provider,{value:this.props.routeContext},F.createElement(np.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function i1({routeContext:a,match:e,children:t}){let r=F.useContext(qo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(qr.Provider,{value:a},t)}function s1(a,e=[],t=null,r=null){if(a==null){if(!t)return null;if(t.errors)a=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)a=t.matches;else return null}let s=a,l=t==null?void 0:t.errors;if(l!=null){let g=s.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);Rt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,g+1))}let u=!1,m=-1;if(t)for(let g=0;g<s.length;g++){let y=s[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=g),y.route.id){let{loaderData:v,errors:b}=t,T=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!b||b[y.route.id]===void 0);if(y.route.lazy||T){u=!0,m>=0?s=s.slice(0,m+1):s=[s[0]];break}}}return s.reduceRight((g,y,v)=>{let b,T=!1,C=null,R=null;t&&(b=l&&y.route.id?l[y.route.id]:void 0,C=y.route.errorElement||r1,u&&(m<0&&v===0?(yE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,R=null):m===v&&(T=!0,R=y.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,v+1)),x=()=>{let I;return b?I=C:T?I=R:y.route.Component?I=F.createElement(y.route.Component,null):y.route.element?I=y.route.element:I=g,F.createElement(i1,{match:y,routeContext:{outlet:g,matches:S,isDataRoute:t!=null},children:I})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?F.createElement(a1,{location:t.location,revalidation:t.revalidation,component:C,error:b,children:x(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):x()},null)}function rp(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function o1(a){let e=F.useContext(qo);return Rt(e,rp(a)),e}function l1(a){let e=F.useContext(hd);return Rt(e,rp(a)),e}function c1(a){let e=F.useContext(qr);return Rt(e,rp(a)),e}function ap(a){let e=c1(a),t=e.matches[e.matches.length-1];return Rt(t.route.id,`${a} can only be used on routes that contain a unique "id"`),t.route.id}function u1(){return ap("useRouteId")}function h1(){var r;let a=F.useContext(np),e=l1("useRouteError"),t=ap("useRouteError");return a!==void 0?a:(r=e.errors)==null?void 0:r[t]}function d1(){let{router:a}=o1("useNavigate"),e=ap("useNavigate"),t=F.useRef(!1);return mE(()=>{t.current=!0}),F.useCallback(async(s,l={})=>{pr(t.current,fE),t.current&&(typeof s=="number"?a.navigate(s):await a.navigate(s,{fromRouteId:e,...l}))},[a,e])}var Q_={};function yE(a,e,t){!e&&!Q_[a]&&(Q_[a]=!0,pr(!1,t))}F.memo(f1);function f1({routes:a,future:e,state:t}){return pE(a,void 0,t,e)}function wn(a){Rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function m1({basename:a="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:l=!1}){Rt(!Pc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=a.replace(/^\/*/,"/"),m=F.useMemo(()=>({basename:u,navigator:s,static:l,future:{}}),[u,s,l]);typeof t=="string"&&(t=Fo(t));let{pathname:g="/",search:y="",hash:v="",state:b=null,key:T="default"}=t,C=F.useMemo(()=>{let R=xa(g,u);return R==null?null:{location:{pathname:R,search:y,hash:v,state:b,key:T},navigationType:r}},[u,g,y,v,b,T,r]);return pr(C!=null,`<Router basename="${u}"> is not able to match the URL "${g}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:F.createElement(Fr.Provider,{value:m},F.createElement(Oc.Provider,{children:e,value:C}))}function g1({children:a,location:e}){return t1(yg(a),e)}function yg(a,e=[]){let t=[];return F.Children.forEach(a,(r,s)=>{if(!F.isValidElement(r))return;let l=[...e,s];if(r.type===F.Fragment){t.push.apply(t,yg(r.props.children,l));return}Rt(r.type===wn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=yg(r.props.children,l)),t.push(u)}),t}var Ih="get",Nh="application/x-www-form-urlencoded";function dd(a){return a!=null&&typeof a.tagName=="string"}function p1(a){return dd(a)&&a.tagName.toLowerCase()==="button"}function y1(a){return dd(a)&&a.tagName.toLowerCase()==="form"}function v1(a){return dd(a)&&a.tagName.toLowerCase()==="input"}function _1(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function w1(a,e){return a.button===0&&(!e||e==="_self")&&!_1(a)}function vg(a=""){return new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((e,t)=>{let r=a[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function b1(a,e){let t=vg(a);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(l=>{t.append(s,l)})}),t}var _h=null;function E1(){if(_h===null)try{new FormData(document.createElement("form"),0),_h=!1}catch{_h=!0}return _h}var T1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xm(a){return a!=null&&!T1.has(a)?(pr(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nh}"`),null):a}function S1(a,e){let t,r,s,l,u;if(y1(a)){let m=a.getAttribute("action");r=m?xa(m,e):null,t=a.getAttribute("method")||Ih,s=Xm(a.getAttribute("enctype"))||Nh,l=new FormData(a)}else if(p1(a)||v1(a)&&(a.type==="submit"||a.type==="image")){let m=a.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=a.getAttribute("formaction")||m.getAttribute("action");if(r=g?xa(g,e):null,t=a.getAttribute("formmethod")||m.getAttribute("method")||Ih,s=Xm(a.getAttribute("formenctype"))||Xm(m.getAttribute("enctype"))||Nh,l=new FormData(m,a),!E1()){let{name:y,type:v,value:b}=a;if(v==="image"){let T=y?`${y}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else y&&l.append(y,b)}}else{if(dd(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ih,r=null,s=Nh,u=a}return l&&s==="text/plain"&&(u=l,l=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:l,body:u}}function ip(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}async function x1(a,e){if(a.id in e)return e[a.id];try{let t=await import(a.module);return e[a.id]=t,t}catch(t){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function C1(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function A1(a,e,t){let r=await Promise.all(a.map(async s=>{let l=e.routes[s.route.id];if(l){let u=await x1(l,t);return u.links?u.links():[]}return[]}));return N1(r.flat(1).filter(C1).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Y_(a,e,t,r,s,l){let u=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,m=(g,y)=>{var v;return t[y].pathname!==g.pathname||((v=t[y].route.path)==null?void 0:v.endsWith("*"))&&t[y].params["*"]!==g.params["*"]};return l==="assets"?e.filter((g,y)=>u(g,y)||m(g,y)):l==="data"?e.filter((g,y)=>{var b;let v=r.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(u(g,y)||m(g,y))return!0;if(g.route.shouldRevalidate){let T=g.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((b=t[0])==null?void 0:b.params)||{},nextUrl:new URL(a,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function R1(a,e,{includeHydrateFallback:t}={}){return k1(a.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function k1(a){return[...new Set(a)]}function I1(a){let e={},t=Object.keys(a).sort();for(let r of t)e[r]=a[r];return e}function N1(a,e){let t=new Set;return new Set(e),a.reduce((r,s)=>{let l=JSON.stringify(I1(s));return t.has(l)||(t.add(l),r.push({key:l,link:s})),r},[])}var D1=new Set([100,101,204,205]);function j1(a,e){let t=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return t.pathname==="/"?t.pathname="_root.data":e&&xa(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function vE(){let a=F.useContext(qo);return ip(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function M1(){let a=F.useContext(hd);return ip(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var sp=F.createContext(void 0);sp.displayName="FrameworkContext";function _E(){let a=F.useContext(sp);return ip(a,"You must render this element inside a <HydratedRouter> element"),a}function O1(a,e){let t=F.useContext(sp),[r,s]=F.useState(!1),[l,u]=F.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:y,onMouseLeave:v,onTouchStart:b}=e,T=F.useRef(null);F.useEffect(()=>{if(a==="render"&&u(!0),a==="viewport"){let S=I=>{I.forEach(B=>{u(B.isIntersecting)})},x=new IntersectionObserver(S,{threshold:.5});return T.current&&x.observe(T.current),()=>{x.disconnect()}}},[a]),F.useEffect(()=>{if(r){let S=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(S)}}},[r]);let C=()=>{s(!0)},R=()=>{s(!1),u(!1)};return t?a!=="intent"?[l,T,{}]:[l,T,{onFocus:lc(m,C),onBlur:lc(g,R),onMouseEnter:lc(y,C),onMouseLeave:lc(v,R),onTouchStart:lc(b,C)}]:[!1,T,{}]}function lc(a,e){return t=>{a&&a(t),t.defaultPrevented||e(t)}}function P1({page:a,...e}){let{router:t}=vE(),r=F.useMemo(()=>sE(t.routes,a,t.basename),[t.routes,a,t.basename]);return r?F.createElement(V1,{page:a,matches:r,...e}):null}function U1(a){let{manifest:e,routeModules:t}=_E(),[r,s]=F.useState([]);return F.useEffect(()=>{let l=!1;return A1(a,e,t).then(u=>{l||s(u)}),()=>{l=!0}},[a,e,t]),r}function V1({page:a,matches:e,...t}){let r=ja(),{manifest:s,routeModules:l}=_E(),{basename:u}=vE(),{loaderData:m,matches:g}=M1(),y=F.useMemo(()=>Y_(a,e,g,s,r,"data"),[a,e,g,s,r]),v=F.useMemo(()=>Y_(a,e,g,s,r,"assets"),[a,e,g,s,r]),b=F.useMemo(()=>{if(a===r.pathname+r.search+r.hash)return[];let R=new Set,S=!1;if(e.forEach(I=>{var G;let B=s.routes[I.route.id];!B||!B.hasLoader||(!y.some(re=>re.route.id===I.route.id)&&I.route.id in m&&((G=l[I.route.id])!=null&&G.shouldRevalidate)||B.hasClientLoader?S=!0:R.add(I.route.id))}),R.size===0)return[];let x=j1(a,u);return S&&R.size>0&&x.searchParams.set("_routes",e.filter(I=>R.has(I.route.id)).map(I=>I.route.id).join(",")),[x.pathname+x.search]},[u,m,r,s,y,e,a,l]),T=F.useMemo(()=>R1(v,s),[v,s]),C=U1(v);return F.createElement(F.Fragment,null,b.map(R=>F.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),T.map(R=>F.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),C.map(({key:R,link:S})=>F.createElement("link",{key:R,...S})))}function L1(...a){return e=>{a.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var wE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wE&&(window.__reactRouterVersion="7.5.3")}catch{}function B1({basename:a,children:e,window:t}){let r=F.useRef();r.current==null&&(r.current=AA({window:t,v5Compat:!0}));let s=r.current,[l,u]=F.useState({action:s.action,location:s.location}),m=F.useCallback(g=>{F.startTransition(()=>u(g))},[u]);return F.useLayoutEffect(()=>s.listen(m),[s,m]),F.createElement(m1,{basename:a,children:e,location:l.location,navigationType:l.action,navigator:s})}var bE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xe=F.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:l,replace:u,state:m,target:g,to:y,preventScrollReset:v,viewTransition:b,...T},C){let{basename:R}=F.useContext(Fr),S=typeof y=="string"&&bE.test(y),x,I=!1;if(typeof y=="string"&&S&&(x=y,wE))try{let j=new URL(window.location.href),U=y.startsWith("//")?new URL(j.protocol+y):new URL(y),q=xa(U.pathname,R);U.origin===j.origin&&q!=null?y=q+U.search+U.hash:I=!0}catch{pr(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=JA(y,{relative:s}),[G,re,oe]=O1(r,T),de=H1(y,{replace:u,state:m,target:g,preventScrollReset:v,relative:s,viewTransition:b});function M(j){e&&e(j),j.defaultPrevented||de(j)}let N=F.createElement("a",{...T,...oe,href:x||B,onClick:I||l?e:M,ref:L1(C,re),target:g,"data-discover":!S&&t==="render"?"true":void 0});return G&&!S?F.createElement(F.Fragment,null,N,F.createElement(P1,{page:B})):N});xe.displayName="Link";var z1=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:l,to:u,viewTransition:m,children:g,...y},v){let b=Uc(u,{relative:y.relative}),T=ja(),C=F.useContext(hd),{navigator:R,basename:S}=F.useContext(Fr),x=C!=null&&W1(b)&&m===!0,I=R.encodeLocation?R.encodeLocation(b).pathname:b.pathname,B=T.pathname,G=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(B=B.toLowerCase(),G=G?G.toLowerCase():null,I=I.toLowerCase()),G&&S&&(G=xa(G,S)||G);const re=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let oe=B===I||!s&&B.startsWith(I)&&B.charAt(re)==="/",de=G!=null&&(G===I||!s&&G.startsWith(I)&&G.charAt(I.length)==="/"),M={isActive:oe,isPending:de,isTransitioning:x},N=oe?e:void 0,j;typeof r=="function"?j=r(M):j=[r,oe?"active":null,de?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(M):l;return F.createElement(xe,{...y,"aria-current":N,className:j,ref:v,style:U,to:u,viewTransition:m},typeof g=="function"?g(M):g)});z1.displayName="NavLink";var F1=F.forwardRef(({discover:a="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:l,method:u=Ih,action:m,onSubmit:g,relative:y,preventScrollReset:v,viewTransition:b,...T},C)=>{let R=Q1(),S=Y1(m,{relative:y}),x=u.toLowerCase()==="get"?"get":"post",I=typeof m=="string"&&bE.test(m),B=G=>{if(g&&g(G),G.defaultPrevented)return;G.preventDefault();let re=G.nativeEvent.submitter,oe=(re==null?void 0:re.getAttribute("formmethod"))||u;R(re||G.currentTarget,{fetcherKey:e,method:oe,navigate:t,replace:s,state:l,relative:y,preventScrollReset:v,viewTransition:b})};return F.createElement("form",{ref:C,method:x,action:S,onSubmit:r?g:B,...T,"data-discover":!I&&a==="render"?"true":void 0})});F1.displayName="Form";function q1(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function EE(a){let e=F.useContext(qo);return Rt(e,q1(a)),e}function H1(a,{target:e,replace:t,state:r,preventScrollReset:s,relative:l,viewTransition:u}={}){let m=ki(),g=ja(),y=Uc(a,{relative:l});return F.useCallback(v=>{if(w1(v,e)){v.preventDefault();let b=t!==void 0?t:Sc(g)===Sc(y);m(a,{replace:b,state:r,preventScrollReset:s,relative:l,viewTransition:u})}},[g,m,y,t,r,e,a,s,l,u])}function G1(a){pr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=F.useRef(vg(a)),t=F.useRef(!1),r=ja(),s=F.useMemo(()=>b1(r.search,t.current?null:e.current),[r.search]),l=ki(),u=F.useCallback((m,g)=>{const y=vg(typeof m=="function"?m(s):m);t.current=!0,l("?"+y,g)},[l,s]);return[s,u]}var $1=0,K1=()=>`__${String(++$1)}__`;function Q1(){let{router:a}=EE("useSubmit"),{basename:e}=F.useContext(Fr),t=u1();return F.useCallback(async(r,s={})=>{let{action:l,method:u,encType:m,formData:g,body:y}=S1(r,e);if(s.navigate===!1){let v=s.fetcherKey||K1();await a.fetch(v,t,s.action||l,{preventScrollReset:s.preventScrollReset,formData:g,body:y,formMethod:s.method||u,formEncType:s.encType||m,flushSync:s.flushSync})}else await a.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:g,body:y,formMethod:s.method||u,formEncType:s.encType||m,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[a,e,t])}function Y1(a,{relative:e}={}){let{basename:t}=F.useContext(Fr),r=F.useContext(qr);Rt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...Uc(a||".",{relative:e})},u=ja();if(a==null){l.search=u.search;let m=new URLSearchParams(l.search),g=m.getAll("index");if(g.some(v=>v==="")){m.delete("index"),g.filter(b=>b).forEach(b=>m.append("index",b));let v=m.toString();l.search=v?`?${v}`:""}}return(!a||a===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ea([t,l.pathname])),Sc(l)}function W1(a,e={}){let t=F.useContext(dE);Rt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=EE("useViewTransitionState"),s=Uc(a,{relative:e.relative});if(!t.isTransitioning)return!1;let l=xa(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=xa(t.nextLocation.pathname,r)||t.nextLocation.pathname;return qh(s.pathname,u)!=null||qh(s.pathname,l)!=null}new TextEncoder;[...D1];const X1=()=>{};var W_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=function(a){const e=[];let t=0;for(let r=0;r<a.length;r++){let s=a.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<a.length&&(a.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(a.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Z1=function(a){const e=[];let t=0,r=0;for(;t<a.length;){const s=a[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const l=a[t++];e[r++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=a[t++],u=a[t++],m=a[t++],g=((s&7)<<18|(l&63)<<12|(u&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const l=a[t++],u=a[t++];e[r++]=String.fromCharCode((s&15)<<12|(l&63)<<6|u&63)}}return e.join("")},SE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<a.length;s+=3){const l=a[s],u=s+1<a.length,m=u?a[s+1]:0,g=s+2<a.length,y=g?a[s+2]:0,v=l>>2,b=(l&3)<<4|m>>4;let T=(m&15)<<2|y>>6,C=y&63;g||(C=64,u||(T=64)),r.push(t[v],t[b],t[T],t[C])}return r.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(TE(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):Z1(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<a.length;){const l=t[a.charAt(s++)],m=s<a.length?t[a.charAt(s)]:0;++s;const y=s<a.length?t[a.charAt(s)]:64;++s;const b=s<a.length?t[a.charAt(s)]:64;if(++s,l==null||m==null||y==null||b==null)throw new J1;const T=l<<2|m>>4;if(r.push(T),y!==64){const C=m<<4&240|y>>2;if(r.push(C),b!==64){const R=y<<6&192|b;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class J1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eR=function(a){const e=TE(a);return SE.encodeByteArray(e,!0)},Hh=function(a){return eR(a).replace(/\./g,"")},xE=function(a){try{return SE.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=()=>tR().__FIREBASE_DEFAULTS__,rR=()=>{if(typeof process>"u"||typeof W_>"u")return;const a=W_.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},aR=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&xE(a[1]);return e&&JSON.parse(e)},fd=()=>{try{return X1()||nR()||rR()||aR()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},CE=a=>{var e,t;return(t=(e=fd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[a]},AE=a=>{const e=CE(a);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},RE=()=>{var a;return(a=fd())===null||a===void 0?void 0:a.config},kE=a=>{var e;return(e=fd())===null||e===void 0?void 0:e[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=a.iat||0,l=a.sub||a.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},a);return[Hh(JSON.stringify(t)),Hh(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function oR(){var a;const e=(a=fd())===null||a===void 0?void 0:a.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cR(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function uR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hR(){const a=Tn();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function dR(){return!oR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fR(){try{return typeof indexedDB=="object"}catch{return!1}}function mR(){return new Promise((a,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),a(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="FirebaseError";class Hr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=gR,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vc.prototype.create)}}class Vc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],u=l?pR(l,r):"Error",m=`${this.serviceName}: ${u} (${s}).`;return new Hr(s,m,r)}}function pR(a,e){return a.replace(yR,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const yR=/\{\$([^}]+)}/g;function vR(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function ys(a,e){if(a===e)return!0;const t=Object.keys(a),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const l=a[s],u=e[s];if(X_(l)&&X_(u)){if(!ys(l,u))return!1}else if(l!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function X_(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(a){const e=[];for(const[t,r]of Object.entries(a))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dc(a){const e={};return a.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,l]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function fc(a){const e=a.indexOf("?");if(!e)return"";const t=a.indexOf("#",e);return a.substring(e,t>0?t:void 0)}function _R(a,e){const t=new wR(a,e);return t.subscribe.bind(t)}class wR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");bR(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Zm),s.error===void 0&&(s.error=Zm),s.complete===void 0&&(s.complete=Zm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bR(a,e){if(typeof a!="object"||a===null)return!1;for(const t of e)if(t in a&&typeof a[t]=="function")return!0;return!1}function Zm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(a){return a&&a._delegate?a._delegate:a}class bi{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new iR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SR(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});r.resolve(l)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);r===m&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&e(u,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TR(a){return a===ds?void 0:a}function SR(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ER(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Ye||(Ye={}));const CR={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},AR=Ye.INFO,RR={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},kR=(a,e,...t)=>{if(e<a.logLevel)return;const r=new Date().toISOString(),s=RR[e];if(s)console[s](`[${r}]  ${a.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class op{constructor(e){this.name=e,this._logLevel=AR,this._logHandler=kR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const IR=(a,e)=>e.some(t=>a instanceof t);let Z_,J_;function NR(){return Z_||(Z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DR(){return J_||(J_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NE=new WeakMap,_g=new WeakMap,DE=new WeakMap,Jm=new WeakMap,lp=new WeakMap;function jR(a){const e=new Promise((t,r)=>{const s=()=>{a.removeEventListener("success",l),a.removeEventListener("error",u)},l=()=>{t(pi(a.result)),s()},u=()=>{r(a.error),s()};a.addEventListener("success",l),a.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&NE.set(t,a)}).catch(()=>{}),lp.set(e,a),e}function MR(a){if(_g.has(a))return;const e=new Promise((t,r)=>{const s=()=>{a.removeEventListener("complete",l),a.removeEventListener("error",u),a.removeEventListener("abort",u)},l=()=>{t(),s()},u=()=>{r(a.error||new DOMException("AbortError","AbortError")),s()};a.addEventListener("complete",l),a.addEventListener("error",u),a.addEventListener("abort",u)});_g.set(a,e)}let wg={get(a,e,t){if(a instanceof IDBTransaction){if(e==="done")return _g.get(a);if(e==="objectStoreNames")return a.objectStoreNames||DE.get(a);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pi(a[e])},set(a,e,t){return a[e]=t,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function OR(a){wg=a(wg)}function PR(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=a.call(eg(this),e,...t);return DE.set(r,e.sort?e.sort():[e]),pi(r)}:DR().includes(a)?function(...e){return a.apply(eg(this),e),pi(NE.get(this))}:function(...e){return pi(a.apply(eg(this),e))}}function UR(a){return typeof a=="function"?PR(a):(a instanceof IDBTransaction&&MR(a),IR(a,NR())?new Proxy(a,wg):a)}function pi(a){if(a instanceof IDBRequest)return jR(a);if(Jm.has(a))return Jm.get(a);const e=UR(a);return e!==a&&(Jm.set(a,e),lp.set(e,a)),e}const eg=a=>lp.get(a);function VR(a,e,{blocked:t,upgrade:r,blocking:s,terminated:l}={}){const u=indexedDB.open(a,e),m=pi(u);return r&&u.addEventListener("upgradeneeded",g=>{r(pi(u.result),g.oldVersion,g.newVersion,pi(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),s&&g.addEventListener("versionchange",y=>s(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const LR=["get","getKey","getAll","getAllKeys","count"],BR=["put","add","delete","clear"],tg=new Map;function ew(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(tg.get(e))return tg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=BR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||LR.includes(t)))return;const l=async function(u,...m){const g=this.transaction(u,s?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),s&&g.done]))[0]};return tg.set(e,l),l}OR(a=>({...a,get:(e,t,r)=>ew(e,t)||a.get(e,t,r),has:(e,t)=>!!ew(e,t)||a.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(FR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function FR(a){const e=a.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bg="@firebase/app",tw="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new op("@firebase/app"),qR="@firebase/app-compat",HR="@firebase/analytics-compat",GR="@firebase/analytics",$R="@firebase/app-check-compat",KR="@firebase/app-check",QR="@firebase/auth",YR="@firebase/auth-compat",WR="@firebase/database",XR="@firebase/data-connect",ZR="@firebase/database-compat",JR="@firebase/functions",ek="@firebase/functions-compat",tk="@firebase/installations",nk="@firebase/installations-compat",rk="@firebase/messaging",ak="@firebase/messaging-compat",ik="@firebase/performance",sk="@firebase/performance-compat",ok="@firebase/remote-config",lk="@firebase/remote-config-compat",ck="@firebase/storage",uk="@firebase/storage-compat",hk="@firebase/firestore",dk="@firebase/vertexai",fk="@firebase/firestore-compat",mk="firebase",gk="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="[DEFAULT]",pk={[bg]:"fire-core",[qR]:"fire-core-compat",[GR]:"fire-analytics",[HR]:"fire-analytics-compat",[KR]:"fire-app-check",[$R]:"fire-app-check-compat",[QR]:"fire-auth",[YR]:"fire-auth-compat",[WR]:"fire-rtdb",[XR]:"fire-data-connect",[ZR]:"fire-rtdb-compat",[JR]:"fire-fn",[ek]:"fire-fn-compat",[tk]:"fire-iid",[nk]:"fire-iid-compat",[rk]:"fire-fcm",[ak]:"fire-fcm-compat",[ik]:"fire-perf",[sk]:"fire-perf-compat",[ok]:"fire-rc",[lk]:"fire-rc-compat",[ck]:"fire-gcs",[uk]:"fire-gcs-compat",[hk]:"fire-fst",[fk]:"fire-fst-compat",[dk]:"fire-vertex","fire-js":"fire-js",[mk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=new Map,yk=new Map,Tg=new Map;function nw(a,e){try{a.container.addComponent(e)}catch(t){Ca.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,t)}}function vs(a){const e=a.name;if(Tg.has(e))return Ca.debug(`There were multiple attempts to register component ${e}.`),!1;Tg.set(e,a);for(const t of Gh.values())nw(t,a);for(const t of yk.values())nw(t,a);return!0}function md(a,e){const t=a.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),a.container.getProvider(e)}function On(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new Vc("app","Firebase",vk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=gk;function jE(a,e={}){let t=a;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Eg,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw yi.create("bad-app-name",{appName:String(s)});if(t||(t=RE()),!t)throw yi.create("no-options");const l=Gh.get(s);if(l){if(ys(t,l.options)&&ys(r,l.config))return l;throw yi.create("duplicate-app",{appName:s})}const u=new xR(s);for(const g of Tg.values())u.addComponent(g);const m=new _k(t,r,u);return Gh.set(s,m),m}function cp(a=Eg){const e=Gh.get(a);if(!e&&a===Eg&&RE())return jE();if(!e)throw yi.create("no-app",{appName:a});return e}function Pr(a,e,t){var r;let s=(r=pk[a])!==null&&r!==void 0?r:a;t&&(s+=`-${t}`);const l=s.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const m=[`Unable to register library "${s}" with version "${e}":`];l&&m.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&m.push("and"),u&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ca.warn(m.join(" "));return}vs(new bi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="firebase-heartbeat-database",bk=1,xc="firebase-heartbeat-store";let ng=null;function ME(){return ng||(ng=VR(wk,bk,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(xc)}catch(t){console.warn(t)}}}}).catch(a=>{throw yi.create("idb-open",{originalErrorMessage:a.message})})),ng}async function Ek(a){try{const t=(await ME()).transaction(xc),r=await t.objectStore(xc).get(OE(a));return await t.done,r}catch(e){if(e instanceof Hr)Ca.warn(e.message);else{const t=yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ca.warn(t.message)}}}async function rw(a,e){try{const r=(await ME()).transaction(xc,"readwrite");await r.objectStore(xc).put(e,OE(a)),await r.done}catch(t){if(t instanceof Hr)Ca.warn(t.message);else{const r=yi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ca.warn(r.message)}}}function OE(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=1024,Sk=30;class xk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ak(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=aw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>Sk){const u=Rk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ca.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=aw(),{heartbeatsToSend:r,unsentEntries:s}=Ck(this._heartbeatsCache.heartbeats),l=Hh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ca.warn(t),""}}}function aw(){return new Date().toISOString().substring(0,10)}function Ck(a,e=Tk){const t=[];let r=a.slice();for(const s of a){const l=t.find(u=>u.agent===s.agent);if(l){if(l.dates.push(s.date),iw(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),iw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Ak{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fR()?mR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ek(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return rw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return rw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function iw(a){return Hh(JSON.stringify({version:2,heartbeats:a})).length}function Rk(a){if(a.length===0)return-1;let e=0,t=a[0].date;for(let r=1;r<a.length;r++)a[r].date<t&&(t=a[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(a){vs(new bi("platform-logger",e=>new zR(e),"PRIVATE")),vs(new bi("heartbeat",e=>new xk(e),"PRIVATE")),Pr(bg,tw,a),Pr(bg,tw,"esm2017"),Pr("fire-js","")}kk("");var Ik="firebase",Nk="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(Ik,Nk,"app");var sw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vi,PE;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,N){function j(){}j.prototype=N.prototype,M.D=N.prototype,M.prototype=new j,M.prototype.constructor=M,M.C=function(U,q,$){for(var P=Array(arguments.length-2),St=2;St<arguments.length;St++)P[St-2]=arguments[St];return N.prototype[q].apply(U,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(M,N,j){j||(j=0);var U=Array(16);if(typeof N=="string")for(var q=0;16>q;++q)U[q]=N.charCodeAt(j++)|N.charCodeAt(j++)<<8|N.charCodeAt(j++)<<16|N.charCodeAt(j++)<<24;else for(q=0;16>q;++q)U[q]=N[j++]|N[j++]<<8|N[j++]<<16|N[j++]<<24;N=M.g[0],j=M.g[1],q=M.g[2];var $=M.g[3],P=N+($^j&(q^$))+U[0]+3614090360&4294967295;N=j+(P<<7&4294967295|P>>>25),P=$+(q^N&(j^q))+U[1]+3905402710&4294967295,$=N+(P<<12&4294967295|P>>>20),P=q+(j^$&(N^j))+U[2]+606105819&4294967295,q=$+(P<<17&4294967295|P>>>15),P=j+(N^q&($^N))+U[3]+3250441966&4294967295,j=q+(P<<22&4294967295|P>>>10),P=N+($^j&(q^$))+U[4]+4118548399&4294967295,N=j+(P<<7&4294967295|P>>>25),P=$+(q^N&(j^q))+U[5]+1200080426&4294967295,$=N+(P<<12&4294967295|P>>>20),P=q+(j^$&(N^j))+U[6]+2821735955&4294967295,q=$+(P<<17&4294967295|P>>>15),P=j+(N^q&($^N))+U[7]+4249261313&4294967295,j=q+(P<<22&4294967295|P>>>10),P=N+($^j&(q^$))+U[8]+1770035416&4294967295,N=j+(P<<7&4294967295|P>>>25),P=$+(q^N&(j^q))+U[9]+2336552879&4294967295,$=N+(P<<12&4294967295|P>>>20),P=q+(j^$&(N^j))+U[10]+4294925233&4294967295,q=$+(P<<17&4294967295|P>>>15),P=j+(N^q&($^N))+U[11]+2304563134&4294967295,j=q+(P<<22&4294967295|P>>>10),P=N+($^j&(q^$))+U[12]+1804603682&4294967295,N=j+(P<<7&4294967295|P>>>25),P=$+(q^N&(j^q))+U[13]+4254626195&4294967295,$=N+(P<<12&4294967295|P>>>20),P=q+(j^$&(N^j))+U[14]+2792965006&4294967295,q=$+(P<<17&4294967295|P>>>15),P=j+(N^q&($^N))+U[15]+1236535329&4294967295,j=q+(P<<22&4294967295|P>>>10),P=N+(q^$&(j^q))+U[1]+4129170786&4294967295,N=j+(P<<5&4294967295|P>>>27),P=$+(j^q&(N^j))+U[6]+3225465664&4294967295,$=N+(P<<9&4294967295|P>>>23),P=q+(N^j&($^N))+U[11]+643717713&4294967295,q=$+(P<<14&4294967295|P>>>18),P=j+($^N&(q^$))+U[0]+3921069994&4294967295,j=q+(P<<20&4294967295|P>>>12),P=N+(q^$&(j^q))+U[5]+3593408605&4294967295,N=j+(P<<5&4294967295|P>>>27),P=$+(j^q&(N^j))+U[10]+38016083&4294967295,$=N+(P<<9&4294967295|P>>>23),P=q+(N^j&($^N))+U[15]+3634488961&4294967295,q=$+(P<<14&4294967295|P>>>18),P=j+($^N&(q^$))+U[4]+3889429448&4294967295,j=q+(P<<20&4294967295|P>>>12),P=N+(q^$&(j^q))+U[9]+568446438&4294967295,N=j+(P<<5&4294967295|P>>>27),P=$+(j^q&(N^j))+U[14]+3275163606&4294967295,$=N+(P<<9&4294967295|P>>>23),P=q+(N^j&($^N))+U[3]+4107603335&4294967295,q=$+(P<<14&4294967295|P>>>18),P=j+($^N&(q^$))+U[8]+1163531501&4294967295,j=q+(P<<20&4294967295|P>>>12),P=N+(q^$&(j^q))+U[13]+2850285829&4294967295,N=j+(P<<5&4294967295|P>>>27),P=$+(j^q&(N^j))+U[2]+4243563512&4294967295,$=N+(P<<9&4294967295|P>>>23),P=q+(N^j&($^N))+U[7]+1735328473&4294967295,q=$+(P<<14&4294967295|P>>>18),P=j+($^N&(q^$))+U[12]+2368359562&4294967295,j=q+(P<<20&4294967295|P>>>12),P=N+(j^q^$)+U[5]+4294588738&4294967295,N=j+(P<<4&4294967295|P>>>28),P=$+(N^j^q)+U[8]+2272392833&4294967295,$=N+(P<<11&4294967295|P>>>21),P=q+($^N^j)+U[11]+1839030562&4294967295,q=$+(P<<16&4294967295|P>>>16),P=j+(q^$^N)+U[14]+4259657740&4294967295,j=q+(P<<23&4294967295|P>>>9),P=N+(j^q^$)+U[1]+2763975236&4294967295,N=j+(P<<4&4294967295|P>>>28),P=$+(N^j^q)+U[4]+1272893353&4294967295,$=N+(P<<11&4294967295|P>>>21),P=q+($^N^j)+U[7]+4139469664&4294967295,q=$+(P<<16&4294967295|P>>>16),P=j+(q^$^N)+U[10]+3200236656&4294967295,j=q+(P<<23&4294967295|P>>>9),P=N+(j^q^$)+U[13]+681279174&4294967295,N=j+(P<<4&4294967295|P>>>28),P=$+(N^j^q)+U[0]+3936430074&4294967295,$=N+(P<<11&4294967295|P>>>21),P=q+($^N^j)+U[3]+3572445317&4294967295,q=$+(P<<16&4294967295|P>>>16),P=j+(q^$^N)+U[6]+76029189&4294967295,j=q+(P<<23&4294967295|P>>>9),P=N+(j^q^$)+U[9]+3654602809&4294967295,N=j+(P<<4&4294967295|P>>>28),P=$+(N^j^q)+U[12]+3873151461&4294967295,$=N+(P<<11&4294967295|P>>>21),P=q+($^N^j)+U[15]+530742520&4294967295,q=$+(P<<16&4294967295|P>>>16),P=j+(q^$^N)+U[2]+3299628645&4294967295,j=q+(P<<23&4294967295|P>>>9),P=N+(q^(j|~$))+U[0]+4096336452&4294967295,N=j+(P<<6&4294967295|P>>>26),P=$+(j^(N|~q))+U[7]+1126891415&4294967295,$=N+(P<<10&4294967295|P>>>22),P=q+(N^($|~j))+U[14]+2878612391&4294967295,q=$+(P<<15&4294967295|P>>>17),P=j+($^(q|~N))+U[5]+4237533241&4294967295,j=q+(P<<21&4294967295|P>>>11),P=N+(q^(j|~$))+U[12]+1700485571&4294967295,N=j+(P<<6&4294967295|P>>>26),P=$+(j^(N|~q))+U[3]+2399980690&4294967295,$=N+(P<<10&4294967295|P>>>22),P=q+(N^($|~j))+U[10]+4293915773&4294967295,q=$+(P<<15&4294967295|P>>>17),P=j+($^(q|~N))+U[1]+2240044497&4294967295,j=q+(P<<21&4294967295|P>>>11),P=N+(q^(j|~$))+U[8]+1873313359&4294967295,N=j+(P<<6&4294967295|P>>>26),P=$+(j^(N|~q))+U[15]+4264355552&4294967295,$=N+(P<<10&4294967295|P>>>22),P=q+(N^($|~j))+U[6]+2734768916&4294967295,q=$+(P<<15&4294967295|P>>>17),P=j+($^(q|~N))+U[13]+1309151649&4294967295,j=q+(P<<21&4294967295|P>>>11),P=N+(q^(j|~$))+U[4]+4149444226&4294967295,N=j+(P<<6&4294967295|P>>>26),P=$+(j^(N|~q))+U[11]+3174756917&4294967295,$=N+(P<<10&4294967295|P>>>22),P=q+(N^($|~j))+U[2]+718787259&4294967295,q=$+(P<<15&4294967295|P>>>17),P=j+($^(q|~N))+U[9]+3951481745&4294967295,M.g[0]=M.g[0]+N&4294967295,M.g[1]=M.g[1]+(q+(P<<21&4294967295|P>>>11))&4294967295,M.g[2]=M.g[2]+q&4294967295,M.g[3]=M.g[3]+$&4294967295}r.prototype.u=function(M,N){N===void 0&&(N=M.length);for(var j=N-this.blockSize,U=this.B,q=this.h,$=0;$<N;){if(q==0)for(;$<=j;)s(this,M,$),$+=this.blockSize;if(typeof M=="string"){for(;$<N;)if(U[q++]=M.charCodeAt($++),q==this.blockSize){s(this,U),q=0;break}}else for(;$<N;)if(U[q++]=M[$++],q==this.blockSize){s(this,U),q=0;break}}this.h=q,this.o+=N},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var N=1;N<M.length-8;++N)M[N]=0;var j=8*this.o;for(N=M.length-8;N<M.length;++N)M[N]=j&255,j/=256;for(this.u(M),M=Array(16),N=j=0;4>N;++N)for(var U=0;32>U;U+=8)M[j++]=this.g[N]>>>U&255;return M};function l(M,N){var j=m;return Object.prototype.hasOwnProperty.call(j,M)?j[M]:j[M]=N(M)}function u(M,N){this.h=N;for(var j=[],U=!0,q=M.length-1;0<=q;q--){var $=M[q]|0;U&&$==N||(j[q]=$,U=!1)}this.g=j}var m={};function g(M){return-128<=M&&128>M?l(M,function(N){return new u([N|0],0>N?-1:0)}):new u([M|0],0>M?-1:0)}function y(M){if(isNaN(M)||!isFinite(M))return b;if(0>M)return x(y(-M));for(var N=[],j=1,U=0;M>=j;U++)N[U]=M/j|0,j*=4294967296;return new u(N,0)}function v(M,N){if(M.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(M.charAt(0)=="-")return x(v(M.substring(1),N));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=y(Math.pow(N,8)),U=b,q=0;q<M.length;q+=8){var $=Math.min(8,M.length-q),P=parseInt(M.substring(q,q+$),N);8>$?($=y(Math.pow(N,$)),U=U.j($).add(y(P))):(U=U.j(j),U=U.add(y(P)))}return U}var b=g(0),T=g(1),C=g(16777216);a=u.prototype,a.m=function(){if(S(this))return-x(this).m();for(var M=0,N=1,j=0;j<this.g.length;j++){var U=this.i(j);M+=(0<=U?U:4294967296+U)*N,N*=4294967296}return M},a.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(R(this))return"0";if(S(this))return"-"+x(this).toString(M);for(var N=y(Math.pow(M,6)),j=this,U="";;){var q=re(j,N).g;j=I(j,q.j(N));var $=((0<j.g.length?j.g[0]:j.h)>>>0).toString(M);if(j=q,R(j))return $+U;for(;6>$.length;)$="0"+$;U=$+U}},a.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function R(M){if(M.h!=0)return!1;for(var N=0;N<M.g.length;N++)if(M.g[N]!=0)return!1;return!0}function S(M){return M.h==-1}a.l=function(M){return M=I(this,M),S(M)?-1:R(M)?0:1};function x(M){for(var N=M.g.length,j=[],U=0;U<N;U++)j[U]=~M.g[U];return new u(j,~M.h).add(T)}a.abs=function(){return S(this)?x(this):this},a.add=function(M){for(var N=Math.max(this.g.length,M.g.length),j=[],U=0,q=0;q<=N;q++){var $=U+(this.i(q)&65535)+(M.i(q)&65535),P=($>>>16)+(this.i(q)>>>16)+(M.i(q)>>>16);U=P>>>16,$&=65535,P&=65535,j[q]=P<<16|$}return new u(j,j[j.length-1]&-2147483648?-1:0)};function I(M,N){return M.add(x(N))}a.j=function(M){if(R(this)||R(M))return b;if(S(this))return S(M)?x(this).j(x(M)):x(x(this).j(M));if(S(M))return x(this.j(x(M)));if(0>this.l(C)&&0>M.l(C))return y(this.m()*M.m());for(var N=this.g.length+M.g.length,j=[],U=0;U<2*N;U++)j[U]=0;for(U=0;U<this.g.length;U++)for(var q=0;q<M.g.length;q++){var $=this.i(U)>>>16,P=this.i(U)&65535,St=M.i(q)>>>16,ht=M.i(q)&65535;j[2*U+2*q]+=P*ht,B(j,2*U+2*q),j[2*U+2*q+1]+=$*ht,B(j,2*U+2*q+1),j[2*U+2*q+1]+=P*St,B(j,2*U+2*q+1),j[2*U+2*q+2]+=$*St,B(j,2*U+2*q+2)}for(U=0;U<N;U++)j[U]=j[2*U+1]<<16|j[2*U];for(U=N;U<2*N;U++)j[U]=0;return new u(j,0)};function B(M,N){for(;(M[N]&65535)!=M[N];)M[N+1]+=M[N]>>>16,M[N]&=65535,N++}function G(M,N){this.g=M,this.h=N}function re(M,N){if(R(N))throw Error("division by zero");if(R(M))return new G(b,b);if(S(M))return N=re(x(M),N),new G(x(N.g),x(N.h));if(S(N))return N=re(M,x(N)),new G(x(N.g),N.h);if(30<M.g.length){if(S(M)||S(N))throw Error("slowDivide_ only works with positive integers.");for(var j=T,U=N;0>=U.l(M);)j=oe(j),U=oe(U);var q=de(j,1),$=de(U,1);for(U=de(U,2),j=de(j,2);!R(U);){var P=$.add(U);0>=P.l(M)&&(q=q.add(j),$=P),U=de(U,1),j=de(j,1)}return N=I(M,q.j(N)),new G(q,N)}for(q=b;0<=M.l(N);){for(j=Math.max(1,Math.floor(M.m()/N.m())),U=Math.ceil(Math.log(j)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),$=y(j),P=$.j(N);S(P)||0<P.l(M);)j-=U,$=y(j),P=$.j(N);R($)&&($=T),q=q.add($),M=I(M,P)}return new G(q,M)}a.A=function(M){return re(this,M).h},a.and=function(M){for(var N=Math.max(this.g.length,M.g.length),j=[],U=0;U<N;U++)j[U]=this.i(U)&M.i(U);return new u(j,this.h&M.h)},a.or=function(M){for(var N=Math.max(this.g.length,M.g.length),j=[],U=0;U<N;U++)j[U]=this.i(U)|M.i(U);return new u(j,this.h|M.h)},a.xor=function(M){for(var N=Math.max(this.g.length,M.g.length),j=[],U=0;U<N;U++)j[U]=this.i(U)^M.i(U);return new u(j,this.h^M.h)};function oe(M){for(var N=M.g.length+1,j=[],U=0;U<N;U++)j[U]=M.i(U)<<1|M.i(U-1)>>>31;return new u(j,M.h)}function de(M,N){var j=N>>5;N%=32;for(var U=M.g.length-j,q=[],$=0;$<U;$++)q[$]=0<N?M.i($+j)>>>N|M.i($+j+1)<<32-N:M.i($+j);return new u(q,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,PE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,vi=u}).apply(typeof sw<"u"?sw:typeof self<"u"?self:typeof window<"u"?window:{});var wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UE,mc,VE,Dh,Sg,LE,BE,zE;(function(){var a,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,w){return h==Array.prototype||h==Object.prototype||(h[_]=w.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof wh=="object"&&wh];for(var _=0;_<h.length;++_){var w=h[_];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function s(h,_){if(_)e:{var w=r;h=h.split(".");for(var k=0;k<h.length-1;k++){var Y=h[k];if(!(Y in w))break e;w=w[Y]}h=h[h.length-1],k=w[h],_=_(k),_!=k&&_!=null&&e(w,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var w=0,k=!1,Y={next:function(){if(!k&&w<h.length){var ne=w++;return{value:_(ne,h[ne]),done:!1}}return k=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(h){return h||function(){return l(this,function(_,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},m=this||self;function g(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function y(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function v(h,_,w){return h.call.apply(h.bind,arguments)}function b(h,_,w){if(!h)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,k),h.apply(_,Y)}}return function(){return h.apply(_,arguments)}}function T(h,_,w){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,T.apply(null,arguments)}function C(h,_){var w=Array.prototype.slice.call(arguments,1);return function(){var k=w.slice();return k.push.apply(k,arguments),h.apply(this,k)}}function R(h,_){function w(){}w.prototype=_.prototype,h.aa=_.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(k,Y,ne){for(var fe=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)fe[Je-2]=arguments[Je];return _.prototype[Y].apply(k,fe)}}function S(h){const _=h.length;if(0<_){const w=Array(_);for(let k=0;k<_;k++)w[k]=h[k];return w}return[]}function x(h,_){for(let w=1;w<arguments.length;w++){const k=arguments[w];if(g(k)){const Y=h.length||0,ne=k.length||0;h.length=Y+ne;for(let fe=0;fe<ne;fe++)h[Y+fe]=k[fe]}else h.push(k)}}class I{constructor(_,w){this.i=_,this.j=w,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function B(h){return/^[\s\xa0]*$/.test(h)}function G(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function re(h){return re[" "](h),h}re[" "]=function(){};var oe=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function de(h,_,w){for(const k in h)_.call(w,h[k],k,h)}function M(h,_){for(const w in h)_.call(void 0,h[w],w,h)}function N(h){const _={};for(const w in h)_[w]=h[w];return _}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,_){let w,k;for(let Y=1;Y<arguments.length;Y++){k=arguments[Y];for(w in k)h[w]=k[w];for(let ne=0;ne<j.length;ne++)w=j[ne],Object.prototype.hasOwnProperty.call(k,w)&&(h[w]=k[w])}}function q(h){var _=1;h=h.split(":");const w=[];for(;0<_&&h.length;)w.push(h.shift()),_--;return h.length&&w.push(h.join(":")),w}function $(h){m.setTimeout(()=>{throw h},0)}function P(){var h=Be;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class St{constructor(){this.h=this.g=null}add(_,w){const k=ht.get();k.set(_,w),this.h?this.h.next=k:this.g=k,this.h=k}}var ht=new I(()=>new ae,h=>h.reset());class ae{constructor(){this.next=this.g=this.h=null}set(_,w){this.h=_,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let me,be=!1,Be=new St,L=()=>{const h=m.Promise.resolve(void 0);me=()=>{h.then(he)}};var he=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(w){$(w)}var _=ht;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}be=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};m.addEventListener("test",w,_),m.removeEventListener("test",w,_)}catch{}return h}();function Z(h,_){if(D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,k=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(oe){e:{try{re(_.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(_=null)}}else w=="mouseover"?_=h.fromElement:w=="mouseout"&&(_=h.toElement);this.relatedTarget=_,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:V[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Z.aa.h.call(this)}}R(Z,D);var V={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),te=0;function Re(h,_,w,k,Y){this.listener=h,this.proxy=null,this.src=_,this.type=w,this.capture=!!k,this.ha=Y,this.key=++te,this.da=this.fa=!1}function He(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function pe(h){this.src=h,this.g={},this.h=0}pe.prototype.add=function(h,_,w,k,Y){var ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);var fe=Ce(h,_,k,Y);return-1<fe?(_=h[fe],w||(_.fa=!1)):(_=new Re(_,this.src,ne,!!k,Y),_.fa=w,h.push(_)),_};function ge(h,_){var w=_.type;if(w in h.g){var k=h.g[w],Y=Array.prototype.indexOf.call(k,_,void 0),ne;(ne=0<=Y)&&Array.prototype.splice.call(k,Y,1),ne&&(He(_),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Ce(h,_,w,k){for(var Y=0;Y<h.length;++Y){var ne=h[Y];if(!ne.da&&ne.listener==_&&ne.capture==!!w&&ne.ha==k)return Y}return-1}var Pe="closure_lm_"+(1e6*Math.random()|0),Xe={};function ye(h,_,w,k,Y){if(Array.isArray(_)){for(var ne=0;ne<_.length;ne++)ye(h,_[ne],w,k,Y);return null}return w=Ct(w),h&&h[ve]?h.K(_,w,y(k)?!!k.capture:!1,Y):Oe(h,_,w,!1,k,Y)}function Oe(h,_,w,k,Y,ne){if(!_)throw Error("Invalid event type");var fe=y(Y)?!!Y.capture:!!Y,Je=Sn(h);if(Je||(h[Pe]=Je=new pe(h)),w=Je.add(_,w,k,fe,ne),w.proxy)return w;if(k=xt(),w.proxy=k,k.src=h,k.listener=w,h.addEventListener)K||(Y=fe),Y===void 0&&(Y=!1),h.addEventListener(_.toString(),k,Y);else if(h.attachEvent)h.attachEvent(rt(_.toString()),k);else if(h.addListener&&h.removeListener)h.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return w}function xt(){function h(w){return _.call(h.src,h.listener,w)}const _=pn;return h}function Ze(h,_,w,k,Y){if(Array.isArray(_))for(var ne=0;ne<_.length;ne++)Ze(h,_[ne],w,k,Y);else k=y(k)?!!k.capture:!!k,w=Ct(w),h&&h[ve]?(h=h.i,_=String(_).toString(),_ in h.g&&(ne=h.g[_],w=Ce(ne,w,k,Y),-1<w&&(He(ne[w]),Array.prototype.splice.call(ne,w,1),ne.length==0&&(delete h.g[_],h.h--)))):h&&(h=Sn(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ce(_,w,k,Y)),(w=-1<h?_[h]:null)&&Te(w))}function Te(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[ve])ge(_.i,h);else{var w=h.type,k=h.proxy;_.removeEventListener?_.removeEventListener(w,k,h.capture):_.detachEvent?_.detachEvent(rt(w),k):_.addListener&&_.removeListener&&_.removeListener(k),(w=Sn(_))?(ge(w,h),w.h==0&&(w.src=null,_[Pe]=null)):He(h)}}}function rt(h){return h in Xe?Xe[h]:Xe[h]="on"+h}function pn(h,_){if(h.da)h=!0;else{_=new Z(_,this);var w=h.listener,k=h.ha||h.src;h.fa&&Te(h),h=w.call(k,_)}return h}function Sn(h){return h=h[Pe],h instanceof pe?h:null}var $t="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(h){return typeof h=="function"?h:(h[$t]||(h[$t]=function(_){return h.handleEvent(_)}),h[$t])}function pt(){H.call(this),this.i=new pe(this),this.M=this,this.F=null}R(pt,H),pt.prototype[ve]=!0,pt.prototype.removeEventListener=function(h,_,w,k){Ze(this,h,_,w,k)};function Qe(h,_){var w,k=h.F;if(k)for(w=[];k;k=k.F)w.push(k);if(h=h.M,k=_.type||_,typeof _=="string")_=new D(_,h);else if(_ instanceof D)_.target=_.target||h;else{var Y=_;_=new D(k,h),U(_,Y)}if(Y=!0,w)for(var ne=w.length-1;0<=ne;ne--){var fe=_.g=w[ne];Y=Ne(fe,k,!0,_)&&Y}if(fe=_.g=h,Y=Ne(fe,k,!0,_)&&Y,Y=Ne(fe,k,!1,_)&&Y,w)for(ne=0;ne<w.length;ne++)fe=_.g=w[ne],Y=Ne(fe,k,!1,_)&&Y}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var w=h.g[_],k=0;k<w.length;k++)He(w[k]);delete h.g[_],h.h--}}this.F=null},pt.prototype.K=function(h,_,w,k){return this.i.add(String(h),_,!1,w,k)},pt.prototype.L=function(h,_,w,k){return this.i.add(String(h),_,!0,w,k)};function Ne(h,_,w,k){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var Y=!0,ne=0;ne<_.length;++ne){var fe=_[ne];if(fe&&!fe.da&&fe.capture==w){var Je=fe.listener,Qt=fe.ha||fe.src;fe.fa&&ge(h.i,fe),Y=Je.call(Qt,k)!==!1&&Y}}return Y&&!k.defaultPrevented}function at(h,_,w){if(typeof h=="function")w&&(h=T(h,w));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:m.setTimeout(h,_||0)}function Xc(h){h.g=at(()=>{h.g=null,h.i&&(h.i=!1,Xc(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Gd extends H{constructor(_,w){super(),this.m=_,this.l=w,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Xc(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(h){H.call(this),this.h=h,this.g={}}R(ji,H);var Mi=[];function Oi(h){de(h.g,function(_,w){this.g.hasOwnProperty(w)&&Te(_)},h),h.g={}}ji.prototype.N=function(){ji.aa.N.call(this),Oi(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var or=m.JSON.stringify,Rs=m.JSON.parse,Pi=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function el(){}el.prototype.h=null;function tl(h){return h.h||(h.h=h.i())}function nl(){}var Kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qr(){D.call(this,"d")}R(Qr,D);function rl(){D.call(this,"c")}R(rl,D);var vr={},al=null;function Ua(){return al=al||new pt}vr.La="serverreachability";function ks(h){D.call(this,vr.La,h)}R(ks,D);function Va(h){const _=Ua();Qe(_,new ks(_))}vr.STAT_EVENT="statevent";function Zc(h,_){D.call(this,vr.STAT_EVENT,h),this.stat=_}R(Zc,D);function Et(h){const _=Ua();Qe(_,new Zc(_,h))}vr.Ma="timingevent";function Kt(h,_){D.call(this,vr.Ma,h),this.size=_}R(Kt,D);function Bt(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},_)}function Qn(){this.g=!0}Qn.prototype.xa=function(){this.g=!1};function il(h,_,w,k,Y,ne){h.info(function(){if(h.g)if(ne)for(var fe="",Je=ne.split("&"),Qt=0;Qt<Je.length;Qt++){var et=Je[Qt].split("=");if(1<et.length){var en=et[0];et=et[1];var Yt=en.split("_");fe=2<=Yt.length&&Yt[1]=="type"?fe+(en+"="+et+"&"):fe+(en+"=redacted&")}}else fe=null;else fe=ne;return"XMLHTTP REQ ("+k+") [attempt "+Y+"]: "+_+`
`+w+`
`+fe})}function $d(h,_,w,k,Y,ne,fe){h.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+Y+"]: "+_+`
`+w+`
`+ne+" "+fe})}function La(h,_,w,k){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ui(h,w)+(k?" "+k:"")})}function Jc(h,_){h.info(function(){return"TIMEOUT: "+_})}Qn.prototype.info=function(){};function Ui(h,_){if(!h.g)return _;if(!_)return null;try{var w=JSON.parse(_);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var k=w[h];if(!(2>k.length)){var Y=k[1];if(Array.isArray(Y)&&!(1>Y.length)){var ne=Y[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var fe=1;fe<Y.length;fe++)Y[fe]=""}}}}return or(w)}catch{return _}}var Ba={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_r;function wr(){}R(wr,el),wr.prototype.g=function(){return new XMLHttpRequest},wr.prototype.i=function(){return{}},_r=new wr;function xn(h,_,w,k){this.j=h,this.i=_,this.l=w,this.R=k||1,this.U=new ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pt}function Pt(){this.i=null,this.g="",this.h=!1}var sl={},Is={};function lr(h,_,w){h.L=1,h.v=Fi(Un(_)),h.m=w,h.P=!0,Wr(h,null)}function Wr(h,_){h.F=Date.now(),Vi(h),h.A=Un(h.v);var w=h.A,k=h.R;Array.isArray(k)||(k=[String(k)]),dl(w.i,"t",k),h.C=0,w=h.j.J,h.h=new Pt,h.g=gu(h.j,w?_:null,!h.m),0<h.O&&(h.M=new Gd(T(h.Y,h,h.g),h.O)),_=h.U,w=h.g,k=h.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(Mi[0]=Y.toString()),Y=Mi);for(var ne=0;ne<Y.length;ne++){var fe=ye(w,Y[ne],k||_.handleEvent,!1,_.h||_);if(!fe)break;_.g[fe.key]=fe}_=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Va(),il(h.i,h.u,h.A,h.l,h.R,h.m)}xn.prototype.ca=function(h){h=h.target;const _=this.M;_&&Zn(h)==3?_.j():this.Y(h)},xn.prototype.Y=function(h){try{if(h==this.g)e:{const Yt=Zn(this.g);var _=this.g.Ba();const aa=this.g.Z();if(!(3>Yt)&&(Yt!=3||this.g&&(this.h.h||this.g.oa()||ou(this.g)))){this.J||Yt!=4||_==7||(_==8||0>=aa?Va(3):Va(2)),za(this);var w=this.g.Z();this.X=w;t:if(eu(this)){var k=ou(this.g);h="";var Y=k.length,ne=Zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){on(this),br(this);var fe="";break t}this.h.i=new m.TextDecoder}for(_=0;_<Y;_++)this.h.h=!0,h+=this.h.i.decode(k[_],{stream:!(ne&&_==Y-1)});k.length=0,this.h.g+=h,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=w==200,$d(this.i,this.u,this.A,this.l,this.R,Yt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Qt=this.g;if((Je=Qt.g?Qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Je)){var et=Je;break t}}et=null}if(w=et)La(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Li(this,w);else{this.o=!1,this.s=3,Et(12),on(this),br(this);break e}}if(this.P){w=!0;let ln;for(;!this.J&&this.C<fe.length;)if(ln=tu(this,fe),ln==Is){Yt==4&&(this.s=4,Et(14),w=!1),La(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==sl){this.s=4,Et(15),La(this.i,this.l,fe,"[Invalid Chunk]"),w=!1;break}else La(this.i,this.l,ln,null),Li(this,ln);if(eu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yt!=4||fe.length!=0||this.h.h||(this.s=1,Et(16),w=!1),this.o=this.o&&w,!w)La(this.i,this.l,fe,"[Invalid Chunked Response]"),on(this),br(this);else if(0<fe.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),Wi(en),en.M=!0,Et(11))}}else La(this.i,this.l,fe,null),Li(this,fe);Yt==4&&on(this),this.o&&!this.J&&(Yt==4?du(this.j,this):(this.o=!1,Vi(this)))}else Xd(this.g),w==400&&0<fe.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),on(this),br(this)}}}catch{}finally{}};function eu(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function tu(h,_){var w=h.C,k=_.indexOf(`
`,w);return k==-1?Is:(w=Number(_.substring(w,k)),isNaN(w)?sl:(k+=1,k+w>_.length?Is:(_=_.slice(k,k+w),h.C=k+w,_)))}xn.prototype.cancel=function(){this.J=!0,on(this)};function Vi(h){h.S=Date.now()+h.I,nu(h,h.I)}function nu(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Bt(T(h.ba,h),_)}function za(h){h.B&&(m.clearTimeout(h.B),h.B=null)}xn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Jc(this.i,this.A),this.L!=2&&(Va(),Et(17)),on(this),this.s=2,br(this)):nu(this,this.S-h)};function br(h){h.j.G==0||h.J||du(h.j,h)}function on(h){za(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,Oi(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Li(h,_){try{var w=h.j;if(w.G!=0&&(w.g==h||ol(w.h,h))){if(!h.K&&ol(w.h,h)&&w.G==3){try{var k=w.Da.g.parse(_)}catch{k=null}if(Array.isArray(k)&&k.length==3){var Y=k;if(Y[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)Fs(w),Bs(w);else break e;yl(w),Et(18)}}else w.za=Y[1],0<w.za-w.T&&37500>Y[2]&&w.F&&w.v==0&&!w.C&&(w.C=Bt(T(w.Za,w),6e3));if(1>=Ds(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ra(w,11)}else if((h.K||w.g==h)&&Fs(w),!B(_))for(Y=w.Da.g.parse(_),_=0;_<Y.length;_++){let et=Y[_];if(w.T=et[0],et=et[1],w.G==2)if(et[0]=="c"){w.K=et[1],w.ia=et[2];const en=et[3];en!=null&&(w.la=en,w.j.info("VER="+w.la));const Yt=et[4];Yt!=null&&(w.Aa=Yt,w.j.info("SVER="+w.Aa));const aa=et[5];aa!=null&&typeof aa=="number"&&0<aa&&(k=1.5*aa,w.L=k,w.j.info("backChannelRequestTimeoutMs_="+k)),k=w;const ln=h.g;if(ln){const Rr=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rr){var ne=k.h;ne.g||Rr.indexOf("spdy")==-1&&Rr.indexOf("quic")==-1&&Rr.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(js(ne,ne.h),ne.h=null))}if(k.D){const _l=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;_l&&(k.ya=_l,dt(k.I,k.D,_l))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),k=w;var fe=h;if(k.qa=mu(k,k.J?k.ia:null,k.W),fe.K){Cn(k.h,fe);var Je=fe,Qt=k.L;Qt&&(Je.I=Qt),Je.B&&(za(Je),Vi(Je)),k.g=fe}else uu(k);0<w.i.length&&zs(w)}else et[0]!="stop"&&et[0]!="close"||ra(w,7);else w.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?ra(w,7):gl(w):et[0]!="noop"&&w.l&&w.l.ta(et),w.v=0)}}Va(4)}catch{}}var ru=class{constructor(h,_){this.g=h,this.map=_}};function Xr(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ns(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ds(h){return h.h?1:h.g?h.g.size:0}function ol(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function js(h,_){h.g?h.g.add(_):h.h=_}function Cn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Xr.prototype.cancel=function(){if(this.i=ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ll(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const w of h.g.values())_=_.concat(w.D);return _}return S(h.i)}function Kd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var _=[],w=h.length,k=0;k<w;k++)_.push(h[k]);return _}_=[],w=0;for(k in h)_[w++]=h[k];return _}function Ms(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var _=[];h=h.length;for(var w=0;w<h;w++)_.push(w);return _}_=[],w=0;for(const k in h)_[w++]=k;return _}}}function cl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var w=Ms(h),k=Kd(h),Y=k.length,ne=0;ne<Y;ne++)_.call(void 0,k[ne],w&&w[ne],h)}var Bi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qd(h,_){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var k=h[w].indexOf("="),Y=null;if(0<=k){var ne=h[w].substring(0,k);Y=h[w].substring(k+1)}else ne=h[w];_(ne,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function zt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof zt){this.h=h.h,zi(this,h.j),this.o=h.o,this.g=h.g,Fa(this,h.s),this.l=h.l;var _=h.i,w=new Jr;w.i=_.i,_.g&&(w.g=new Map(_.g),w.h=_.h),Zr(this,w),this.m=h.m}else h&&(_=String(h).match(Bi))?(this.h=!1,zi(this,_[1]||"",!0),this.o=Yn(_[2]||""),this.g=Yn(_[3]||"",!0),Fa(this,_[4]),this.l=Yn(_[5]||"",!0),Zr(this,_[6]||"",!0),this.m=Yn(_[7]||"")):(this.h=!1,this.i=new Jr(null,this.h))}zt.prototype.toString=function(){var h=[],_=this.j;_&&h.push(qi(_,ul,!0),":");var w=this.g;return(w||_=="file")&&(h.push("//"),(_=this.o)&&h.push(qi(_,ul,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(qi(w,w.charAt(0)=="/"?Yd:hl,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",qi(w,Os)),h.join("")};function Un(h){return new zt(h)}function zi(h,_,w){h.j=w?Yn(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Fa(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Zr(h,_,w){_ instanceof Jr?(h.i=_,iu(h.i,h.h)):(w||(_=qi(_,Wd)),h.i=new Jr(_,h.h))}function dt(h,_,w){h.i.set(_,w)}function Fi(h){return dt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Yn(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function qi(h,_,w){return typeof h=="string"?(h=encodeURI(h).replace(_,au),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function au(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ul=/[#\/\?@]/g,hl=/[#\?:]/g,Yd=/[#\?]/g,Wd=/[#\?@]/g,Os=/#/g;function Jr(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Wn(h){h.g||(h.g=new Map,h.h=0,h.i&&Qd(h.i,function(_,w){h.add(decodeURIComponent(_.replace(/\+/g," ")),w)}))}a=Jr.prototype,a.add=function(h,_){Wn(this),this.i=null,h=Er(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(_),this.h+=1,this};function ea(h,_){Wn(h),_=Er(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function ta(h,_){return Wn(h),_=Er(h,_),h.g.has(_)}a.forEach=function(h,_){Wn(this),this.g.forEach(function(w,k){w.forEach(function(Y){h.call(_,Y,k,this)},this)},this)},a.na=function(){Wn(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),w=[];for(let k=0;k<_.length;k++){const Y=h[k];for(let ne=0;ne<Y.length;ne++)w.push(_[k])}return w},a.V=function(h){Wn(this);let _=[];if(typeof h=="string")ta(this,h)&&(_=_.concat(this.g.get(Er(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)_=_.concat(h[w])}return _},a.set=function(h,_){return Wn(this),this.i=null,h=Er(this,h),ta(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},a.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function dl(h,_,w){ea(h,_),0<w.length&&(h.i=null,h.g.set(Er(h,_),S(w)),h.h+=w.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var w=0;w<_.length;w++){var k=_[w];const ne=encodeURIComponent(String(k)),fe=this.V(k);for(k=0;k<fe.length;k++){var Y=ne;fe[k]!==""&&(Y+="="+encodeURIComponent(String(fe[k]))),h.push(Y)}}return this.i=h.join("&")};function Er(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function iu(h,_){_&&!h.j&&(Wn(h),h.i=null,h.g.forEach(function(w,k){var Y=k.toLowerCase();k!=Y&&(ea(this,k),dl(this,Y,w))},h)),h.j=_}function Hi(h,_){const w=new Qn;if(m.Image){const k=new Image;k.onload=C(Xn,w,"TestLoadImage: loaded",!0,_,k),k.onerror=C(Xn,w,"TestLoadImage: error",!1,_,k),k.onabort=C(Xn,w,"TestLoadImage: abort",!1,_,k),k.ontimeout=C(Xn,w,"TestLoadImage: timeout",!1,_,k),m.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=h}else _(!1)}function cr(h,_){const w=new Qn,k=new AbortController,Y=setTimeout(()=>{k.abort(),Xn(w,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:k.signal}).then(ne=>{clearTimeout(Y),ne.ok?Xn(w,"TestPingServer: ok",!0,_):Xn(w,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Y),Xn(w,"TestPingServer: error",!1,_)})}function Xn(h,_,w,k,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),k(w)}catch{}}function Gi(){this.g=new Pi}function Tr(h,_,w){const k=w||"";try{cl(h,function(Y,ne){let fe=Y;y(Y)&&(fe=or(Y)),_.push(k+ne+"="+encodeURIComponent(fe))})}catch(Y){throw _.push(k+"type="+encodeURIComponent("_badmap")),Y}}function qa(h){this.l=h.Ub||null,this.j=h.eb||!1}R(qa,el),qa.prototype.g=function(){return new na(this.l,this.j)},qa.prototype.i=function(h){return function(){return h}}({});function na(h,_){pt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(na,pt),a=na.prototype,a.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,xr(this)},a.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||m).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},a.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,xr(this)),this.g&&(this.readyState=3,xr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function fl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}a.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Sr(this):xr(this),this.readyState==3&&fl(this)}},a.Ra=function(h){this.g&&(this.response=this.responseText=h,Sr(this))},a.Qa=function(h){this.g&&(this.response=h,Sr(this))},a.ga=function(){this.g&&Sr(this)};function Sr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,xr(h)}a.setRequestHeader=function(h,_){this.u.append(h,_)},a.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var w=_.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=_.next();return h.join(`\r
`)};function xr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ml(h){let _="";return de(h,function(w,k){_+=k,_+=":",_+=w,_+=`\r
`}),_}function Jt(h,_,w){e:{for(k in w){var k=!1;break e}k=!0}k||(w=ml(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):dt(h,_,w))}function ot(h){pt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(ot,pt);var Ps=/^https?$/i,$i=["POST","PUT"];a=ot.prototype,a.Ha=function(h){this.J=h},a.ea=function(h,_,w,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_r.g(),this.v=this.o?tl(this.o):tl(_r),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ne){su(this,ne);return}if(h=w||"",w=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var Y in k)w.set(Y,k[Y]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const ne of k.keys())w.set(ne,k.get(ne));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(w.keys()).find(ne=>ne.toLowerCase()=="content-type"),Y=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call($i,_,void 0))||k||Y||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,fe]of w)this.g.setRequestHeader(ne,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ki(this),this.u=!0,this.g.send(h),this.u=!1}catch(ne){su(this,ne)}};function su(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Us(h),Cr(h)}function Us(h){h.A||(h.A=!0,Qe(h,"complete"),Qe(h,"error"))}a.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Qe(this,"complete"),Qe(this,"abort"),Cr(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cr(this,!0)),ot.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?Vs(this):this.bb())},a.bb=function(){Vs(this)};function Vs(h){if(h.h&&typeof u<"u"&&(!h.v[1]||Zn(h)!=4||h.Z()!=2)){if(h.u&&Zn(h)==4)at(h.Ea,0,h);else if(Qe(h,"readystatechange"),Zn(h)==4){h.h=!1;try{const fe=h.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var w;if(!(w=_)){var k;if(k=fe===0){var Y=String(h.D).match(Bi)[1]||null;!Y&&m.self&&m.self.location&&(Y=m.self.location.protocol.slice(0,-1)),k=!Ps.test(Y?Y.toLowerCase():"")}w=k}if(w)Qe(h,"complete"),Qe(h,"success");else{h.m=6;try{var ne=2<Zn(h)?h.g.statusText:""}catch{ne=""}h.l=ne+" ["+h.Z()+"]",Us(h)}}finally{Cr(h)}}}}function Cr(h,_){if(h.g){Ki(h);const w=h.g,k=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Qe(h,"ready");try{w.onreadystatechange=k}catch{}}}function Ki(h){h.I&&(m.clearTimeout(h.I),h.I=null)}a.isActive=function(){return!!this.g};function Zn(h){return h.g?h.g.readyState:0}a.Z=function(){try{return 2<Zn(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Rs(_)}};function ou(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Xd(h){const _={};h=(h.g&&2<=Zn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<h.length;k++){if(B(h[k]))continue;var w=q(h[k]);const Y=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ne=_[Y]||[];_[Y]=ne,ne.push(w)}M(_,function(k){return k.join(", ")})}a.Ba=function(){return this.m},a.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qi(h,_,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||_}function Ls(h){this.Aa=0,this.i=[],this.j=new Qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qi("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qi("baseRetryDelayMs",5e3,h),this.cb=Qi("retryDelaySeedMs",1e4,h),this.Wa=Qi("forwardChannelMaxRetries",2,h),this.wa=Qi("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Xr(h&&h.concurrentRequestLimit),this.Da=new Gi,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}a=Ls.prototype,a.la=8,a.G=1,a.connect=function(h,_,w,k){Et(0),this.W=h,this.H=_||{},w&&k!==void 0&&(this.H.OSID=w,this.H.OAID=k),this.F=this.X,this.I=mu(this,null,this.W),zs(this)};function gl(h){if(lu(h),h.G==3){var _=h.U++,w=Un(h.I);if(dt(w,"SID",h.K),dt(w,"RID",_),dt(w,"TYPE","terminate"),Yi(h,w),_=new xn(h,h.j,_),_.L=2,_.v=Fi(Un(w)),w=!1,m.navigator&&m.navigator.sendBeacon)try{w=m.navigator.sendBeacon(_.v.toString(),"")}catch{}!w&&m.Image&&(new Image().src=_.v,w=!0),w||(_.g=gu(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Vi(_)}fu(h)}function Bs(h){h.g&&(Wi(h),h.g.cancel(),h.g=null)}function lu(h){Bs(h),h.u&&(m.clearTimeout(h.u),h.u=null),Fs(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function zs(h){if(!Ns(h.h)&&!h.s){h.s=!0;var _=h.Ga;me||L(),be||(me(),be=!0),Be.add(_,h),h.B=0}}function Zd(h,_){return Ds(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Bt(T(h.Ga,h,_),vl(h,h.B)),h.B++,!0)}a.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Y=new xn(this,this.j,h);let ne=this.o;if(this.S&&(ne?(ne=N(ne),U(ne,this.S)):ne=this.S),this.m!==null||this.O||(Y.H=ne,ne=null),this.P)e:{for(var _=0,w=0;w<this.i.length;w++){t:{var k=this.i[w];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(_+=k,4096<_){_=w;break e}if(_===4096||w===this.i.length-1){_=w+1;break e}}_=1e3}else _=1e3;_=cu(this,Y,_),w=Un(this.I),dt(w,"RID",h),dt(w,"CVER",22),this.D&&dt(w,"X-HTTP-Session-Id",this.D),Yi(this,w),ne&&(this.O?_="headers="+encodeURIComponent(String(ml(ne)))+"&"+_:this.m&&Jt(w,this.m,ne)),js(this.h,Y),this.Ua&&dt(w,"TYPE","init"),this.P?(dt(w,"$req",_),dt(w,"SID","null"),Y.T=!0,lr(Y,w,null)):lr(Y,w,_),this.G=2}}else this.G==3&&(h?pl(this,h):this.i.length==0||Ns(this.h)||pl(this))};function pl(h,_){var w;_?w=_.l:w=h.U++;const k=Un(h.I);dt(k,"SID",h.K),dt(k,"RID",w),dt(k,"AID",h.T),Yi(h,k),h.m&&h.o&&Jt(k,h.m,h.o),w=new xn(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),_&&(h.i=_.D.concat(h.i)),_=cu(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),js(h.h,w),lr(w,k,_)}function Yi(h,_){h.H&&de(h.H,function(w,k){dt(_,k,w)}),h.l&&cl({},function(w,k){dt(_,k,w)})}function cu(h,_,w){w=Math.min(h.i.length,w);var k=h.l?T(h.l.Na,h.l,h):null;e:{var Y=h.i;let ne=-1;for(;;){const fe=["count="+w];ne==-1?0<w?(ne=Y[0].g,fe.push("ofs="+ne)):ne=0:fe.push("ofs="+ne);let Je=!0;for(let Qt=0;Qt<w;Qt++){let et=Y[Qt].g;const en=Y[Qt].map;if(et-=ne,0>et)ne=Math.max(0,Y[Qt].g-100),Je=!1;else try{Tr(en,fe,"req"+et+"_")}catch{k&&k(en)}}if(Je){k=fe.join("&");break e}}}return h=h.i.splice(0,w),_.D=h,k}function uu(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;me||L(),be||(me(),be=!0),Be.add(_,h),h.v=0}}function yl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Bt(T(h.Fa,h),vl(h,h.v)),h.v++,!0)}a.Fa=function(){if(this.u=null,hu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Bt(T(this.ab,this),h)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Bs(this),hu(this))};function Wi(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function hu(h){h.g=new xn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Un(h.qa);dt(_,"RID","rpc"),dt(_,"SID",h.K),dt(_,"AID",h.T),dt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&dt(_,"TO",h.ja),dt(_,"TYPE","xmlhttp"),Yi(h,_),h.m&&h.o&&Jt(_,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=Fi(Un(_)),w.m=null,w.P=!0,Wr(w,h)}a.Za=function(){this.C!=null&&(this.C=null,Bs(this),yl(this),Et(19))};function Fs(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function du(h,_){var w=null;if(h.g==_){Fs(h),Wi(h),h.g=null;var k=2}else if(ol(h.h,_))w=_.D,Cn(h.h,_),k=1;else return;if(h.G!=0){if(_.o)if(k==1){w=_.m?_.m.length:0,_=Date.now()-_.F;var Y=h.B;k=Ua(),Qe(k,new Kt(k,w)),zs(h)}else uu(h);else if(Y=_.s,Y==3||Y==0&&0<_.X||!(k==1&&Zd(h,_)||k==2&&yl(h)))switch(w&&0<w.length&&(_=h.h,_.i=_.i.concat(w)),Y){case 1:ra(h,5);break;case 4:ra(h,10);break;case 3:ra(h,6);break;default:ra(h,2)}}}function vl(h,_){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*_}function ra(h,_){if(h.j.info("Error code "+_),_==2){var w=T(h.fb,h),k=h.Xa;const Y=!k;k=new zt(k||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||zi(k,"https"),Fi(k),Y?Hi(k.toString(),w):cr(k.toString(),w)}else Et(2);h.G=0,h.l&&h.l.sa(_),fu(h),lu(h)}a.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function fu(h){if(h.G=0,h.ka=[],h.l){const _=ll(h.h);(_.length!=0||h.i.length!=0)&&(x(h.ka,_),x(h.ka,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.ra()}}function mu(h,_,w){var k=w instanceof zt?Un(w):new zt(w);if(k.g!="")_&&(k.g=_+"."+k.g),Fa(k,k.s);else{var Y=m.location;k=Y.protocol,_=_?_+"."+Y.hostname:Y.hostname,Y=+Y.port;var ne=new zt(null);k&&zi(ne,k),_&&(ne.g=_),Y&&Fa(ne,Y),w&&(ne.l=w),k=ne}return w=h.D,_=h.ya,w&&_&&dt(k,w,_),dt(k,"VER",h.la),Yi(h,k),k}function gu(h,_,w){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new ot(new qa({eb:w})):new ot(h.pa),_.Ha(h.J),_}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function pu(){}a=pu.prototype,a.ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){};function qs(){}qs.prototype.g=function(h,_){return new An(h,_)};function An(h,_){pt.call(this),this.g=new Ls(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!B(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!B(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Ar(this)}R(An,pt),An.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){gl(this.g)},An.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=or(h),h=w);_.i.push(new ru(_.Ya++,h)),_.G==3&&zs(_)},An.prototype.N=function(){this.g.l=null,delete this.j,gl(this.g),delete this.g,An.aa.N.call(this)};function yu(h){Qr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const w in _){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}R(yu,Qr);function vu(){rl.call(this),this.status=1}R(vu,rl);function Ar(h){this.g=h}R(Ar,pu),Ar.prototype.ua=function(){Qe(this.g,"a")},Ar.prototype.ta=function(h){Qe(this.g,new yu(h))},Ar.prototype.sa=function(h){Qe(this.g,new vu)},Ar.prototype.ra=function(){Qe(this.g,"b")},qs.prototype.createWebChannel=qs.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,zE=function(){return new qs},BE=function(){return Ua()},LE=vr,Sg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ba.NO_ERROR=0,Ba.TIMEOUT=8,Ba.HTTP_ERROR=6,Dh=Ba,Yr.COMPLETE="complete",VE=Yr,nl.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",pt.prototype.listen=pt.prototype.K,mc=nl,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,UE=ot}).apply(typeof wh<"u"?wh:typeof self<"u"?self:typeof window<"u"?window:{});const ow="@firebase/firestore",lw="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new op("@firebase/firestore");function _o(){return _s.logLevel}function _e(a,...e){if(_s.logLevel<=Ye.DEBUG){const t=e.map(up);_s.debug(`Firestore (${Ho}): ${a}`,...t)}}function Aa(a,...e){if(_s.logLevel<=Ye.ERROR){const t=e.map(up);_s.error(`Firestore (${Ho}): ${a}`,...t)}}function Mo(a,...e){if(_s.logLevel<=Ye.WARN){const t=e.map(up);_s.warn(`Firestore (${Ho}): ${a}`,...t)}}function up(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(a="Unexpected state"){const e=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: `+a;throw Aa(e),new Error(e)}function lt(a,e){a||Me()}function Ve(a,e){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Hr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bn.UNAUTHENTICATED))}shutdown(){}}class jk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Mk{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){lt(this.o===void 0);let r=this.i;const s=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let l=new Ta;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ta,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await s(this.currentUser)})},m=g=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ta)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt(typeof r.accessToken=="string"),new FE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string"),new bn(e)}}class Ok{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Pk{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Ok(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uk{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,On(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){lt(this.o===void 0);const r=l=>{l.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.R;return this.R=l.token,_e("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const s=l=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>s(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?s(l):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new cw(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lt(typeof t.token=="string"),this.R=t.token,new cw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<a;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Vk(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<t&&(r+=e.charAt(s[l]%62))}return r}}function qe(a,e){return a<e?-1:a>e?1:0}function xg(a,e){let t=0;for(;t<a.length&&t<e.length;){const r=a.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return qe(r,s);{const l=qE(),u=Lk(l.encode(uw(a,t)),l.encode(uw(e,t)));return u!==0?u:qe(r,s)}}t+=r>65535?2:1}return qe(a.length,e.length)}function uw(a,e){return a.codePointAt(e)>65535?a.substring(e,e+2):a.substring(e,e+1)}function Lk(a,e){for(let t=0;t<a.length&&t<e.length;++t)if(a[t]!==e[t])return qe(a[t],e[t]);return qe(a.length,e.length)}function Oo(a,e,t){return a.length===e.length&&a.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=-62135596800,dw=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*dw);return new Dt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<hw)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dw}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-hw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Dt(0,0))}static max(){return new Ue(new Dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="__name__";class Mr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Me(),r===void 0?r=e.length-t:r>e.length-t&&Me(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const l=Mr.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return qe(e.length,t.length)}static compareSegments(e,t){const r=Mr.isNumericId(e),s=Mr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Mr.extractNumericId(e).compare(Mr.extractNumericId(t)):xg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vi.fromString(e.substring(4,e.length-2))}}class bt extends Mr{construct(e,t,r){return new bt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new bt(t)}static emptyPath(){return new bt([])}}const Bk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends Mr{construct(e,t,r){return new fn(e,t,r)}static isValidIdentifier(e){return Bk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fw}static keyField(){return new fn([fw])}static fromServerFormat(e){const t=[];let r="",s=0;const l=()=>{if(r.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const m=e[s];if(m==="\\"){if(s+1===e.length)throw new we(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[s+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new we(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,s+=2}else m==="`"?(u=!u,s++):m!=="."||u?(r+=m,s++):(l(),s++)}if(l(),u)throw new we(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(t)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(bt.fromString(e))}static fromName(e){return new Ae(bt.fromString(e).popFirst(5))}static empty(){return new Ae(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new bt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=-1;function zk(a,e){const t=a.toTimestamp().seconds,r=a.toTimestamp().nanoseconds+1,s=Ue.fromTimestamp(r===1e9?new Dt(t+1,0):new Dt(t,r));return new Ei(s,Ae.empty(),e)}function Fk(a){return new Ei(a.readTime,a.key,Cc)}class Ei{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ei(Ue.min(),Ae.empty(),Cc)}static max(){return new Ei(Ue.max(),Ae.empty(),Cc)}}function qk(a,e){let t=a.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(a.documentKey,e.documentKey),t!==0?t:qe(a.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(a){if(a.code!==ce.FAILED_PRECONDITION||a.message!==Hk)throw a;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let s=0,l=0,u=!1;e.forEach(m=>{++s,m.next(()=>{++l,u&&l===s&&t()},g=>r(g))}),u=!0,l===s&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(s=>s?ue.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,l)=>{r.push(t.call(this,s,l))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,s)=>{const l=e.length,u=new Array(l);let m=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next(v=>{u[y]=v,++m,m===l&&r(u)},v=>s(v))}})}static doWhile(e,t){return new ue((r,s)=>{const l=()=>{e()===!0?t().next(()=>{l()},s):r()};l()})}}function $k(a){const e=a.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $o(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}gd.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp=-1;function pd(a){return a==null}function $h(a){return a===0&&1/a==-1/0}function Kk(a){return typeof a=="number"&&Number.isInteger(a)&&!$h(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="";function Qk(a){let e="";for(let t=0;t<a.length;t++)e.length>0&&(e=mw(e)),e=Yk(a.get(t),e);return mw(e)}function Yk(a,e){let t=e;const r=a.length;for(let s=0;s<r;s++){const l=a.charAt(s);switch(l){case"\0":t+="";break;case GE:t+="";break;default:t+=l}}return t}function mw(a){return a+GE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(a){let e=0;for(const t in a)Object.prototype.hasOwnProperty.call(a,t)&&e++;return e}function Ii(a,e){for(const t in a)Object.prototype.hasOwnProperty.call(a,t)&&e(t,a[t])}function $E(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,t){this.comparator=e,this.root=t||dn.EMPTY}insert(e,t){return new kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bh(this.root,e,this.comparator,!0)}}class bh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,t,r,s,l){this.key=e,this.value=t,this.color=r??dn.RED,this.left=s??dn.EMPTY,this.right=l??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,l){return new dn(e??this.key,t??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,r),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return dn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Me();const e=this.left.check();if(e!==this.right.check())throw Me();return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me()}get value(){throw Me()}get color(){throw Me()}get left(){throw Me()}get right(){throw Me()}copy(e,t,r,s,l){return this}insert(e,t,r){return new dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pw(this.data.getIterator())}getIteratorFrom(e){return new pw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zt(this.comparator);return t.data=e,t}}class pw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new Gn([])}unionWith(e){let t=new Zt(fn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new KE("Invalid base64 string: "+l):l}}(e);return new mn(t)}static fromUint8Array(e){const t=function(s){let l="";for(let u=0;u<s.length;++u)l+=String.fromCharCode(s[u]);return l}(e);return new mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const Wk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ti(a){if(lt(!!a),typeof a=="string"){let e=0;const t=Wk.exec(a);if(lt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(a);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lt(a.seconds),nanos:Lt(a.nanos)}}function Lt(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Si(a){return typeof a=="string"?mn.fromBase64String(a):mn.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="server_timestamp",YE="__type__",WE="__previous_value__",XE="__local_write_time__";function dp(a){var e,t;return((t=(((e=a==null?void 0:a.mapValue)===null||e===void 0?void 0:e.fields)||{})[YE])===null||t===void 0?void 0:t.stringValue)===QE}function yd(a){const e=a.mapValue.fields[WE];return dp(e)?yd(e):e}function Ac(a){const e=Ti(a.mapValue.fields[XE].timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,t,r,s,l,u,m,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y}}const Kh="(default)";class Rc{constructor(e,t){this.projectId=e,this.database=t||Kh}static empty(){return new Rc("","")}get isDefaultDatabase(){return this.database===Kh}isEqual(e){return e instanceof Rc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="__type__",Zk="__max__",Eh={mapValue:{}},JE="__vector__",Qh="value";function xi(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?dp(a)?4:eI(a)?9007199254740991:Jk(a)?10:11:Me()}function Br(a,e){if(a===e)return!0;const t=xi(a);if(t!==xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return Ac(a).isEqual(Ac(e));case 3:return function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const u=Ti(s.timestampValue),m=Ti(l.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return function(s,l){return Si(s.bytesValue).isEqual(Si(l.bytesValue))}(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return function(s,l){return Lt(s.geoPointValue.latitude)===Lt(l.geoPointValue.latitude)&&Lt(s.geoPointValue.longitude)===Lt(l.geoPointValue.longitude)}(a,e);case 2:return function(s,l){if("integerValue"in s&&"integerValue"in l)return Lt(s.integerValue)===Lt(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const u=Lt(s.doubleValue),m=Lt(l.doubleValue);return u===m?$h(u)===$h(m):isNaN(u)&&isNaN(m)}return!1}(a,e);case 9:return Oo(a.arrayValue.values||[],e.arrayValue.values||[],Br);case 10:case 11:return function(s,l){const u=s.mapValue.fields||{},m=l.mapValue.fields||{};if(gw(u)!==gw(m))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(m[g]===void 0||!Br(u[g],m[g])))return!1;return!0}(a,e);default:return Me()}}function kc(a,e){return(a.values||[]).find(t=>Br(t,e))!==void 0}function Po(a,e){if(a===e)return 0;const t=xi(a),r=xi(e);if(t!==r)return qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(a.booleanValue,e.booleanValue);case 2:return function(l,u){const m=Lt(l.integerValue||l.doubleValue),g=Lt(u.integerValue||u.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(a,e);case 3:return yw(a.timestampValue,e.timestampValue);case 4:return yw(Ac(a),Ac(e));case 5:return xg(a.stringValue,e.stringValue);case 6:return function(l,u){const m=Si(l),g=Si(u);return m.compareTo(g)}(a.bytesValue,e.bytesValue);case 7:return function(l,u){const m=l.split("/"),g=u.split("/");for(let y=0;y<m.length&&y<g.length;y++){const v=qe(m[y],g[y]);if(v!==0)return v}return qe(m.length,g.length)}(a.referenceValue,e.referenceValue);case 8:return function(l,u){const m=qe(Lt(l.latitude),Lt(u.latitude));return m!==0?m:qe(Lt(l.longitude),Lt(u.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return vw(a.arrayValue,e.arrayValue);case 10:return function(l,u){var m,g,y,v;const b=l.fields||{},T=u.fields||{},C=(m=b[Qh])===null||m===void 0?void 0:m.arrayValue,R=(g=T[Qh])===null||g===void 0?void 0:g.arrayValue,S=qe(((y=C==null?void 0:C.values)===null||y===void 0?void 0:y.length)||0,((v=R==null?void 0:R.values)===null||v===void 0?void 0:v.length)||0);return S!==0?S:vw(C,R)}(a.mapValue,e.mapValue);case 11:return function(l,u){if(l===Eh.mapValue&&u===Eh.mapValue)return 0;if(l===Eh.mapValue)return 1;if(u===Eh.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),y=u.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let b=0;b<g.length&&b<v.length;++b){const T=xg(g[b],v[b]);if(T!==0)return T;const C=Po(m[g[b]],y[v[b]]);if(C!==0)return C}return qe(g.length,v.length)}(a.mapValue,e.mapValue);default:throw Me()}}function yw(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return qe(a,e);const t=Ti(a),r=Ti(e),s=qe(t.seconds,r.seconds);return s!==0?s:qe(t.nanos,r.nanos)}function vw(a,e){const t=a.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const l=Po(t[s],r[s]);if(l)return l}return qe(t.length,r.length)}function Uo(a){return Cg(a)}function Cg(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(t){const r=Ti(t);return`time(${r.seconds},${r.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?function(t){return Si(t).toBase64()}(a.bytesValue):"referenceValue"in a?function(t){return Ae.fromName(t).toString()}(a.referenceValue):"geoPointValue"in a?function(t){return`geo(${t.latitude},${t.longitude})`}(a.geoPointValue):"arrayValue"in a?function(t){let r="[",s=!0;for(const l of t.values||[])s?s=!1:r+=",",r+=Cg(l);return r+"]"}(a.arrayValue):"mapValue"in a?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const u of r)l?l=!1:s+=",",s+=`${u}:${Cg(t.fields[u])}`;return s+"}"}(a.mapValue):Me()}function jh(a){switch(xi(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yd(a);return e?16+jh(e):16;case 5:return 2*a.stringValue.length;case 6:return Si(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,l)=>s+jh(l),0)}(a.arrayValue);case 10:case 11:return function(r){let s=0;return Ii(r.fields,(l,u)=>{s+=l.length+jh(u)}),s}(a.mapValue);default:throw Me()}}function _w(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function Ag(a){return!!a&&"integerValue"in a}function fp(a){return!!a&&"arrayValue"in a}function ww(a){return!!a&&"nullValue"in a}function bw(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Mh(a){return!!a&&"mapValue"in a}function Jk(a){var e,t;return((t=(((e=a==null?void 0:a.mapValue)===null||e===void 0?void 0:e.fields)||{})[ZE])===null||t===void 0?void 0:t.stringValue)===JE}function vc(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return Ii(a.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vc(r)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(a.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vc(a.arrayValue.values[t]);return e}return Object.assign({},a)}function eI(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===Zk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(t)}setAll(e){let t=fn.emptyPath(),r={},s=[];e.forEach((u,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,s),r={},s=[],t=m.popLast()}u?r[m.lastSegment()]=vc(u):s.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,s)}delete(e){const t=this.field(e.popLast());Mh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Br(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Mh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ii(t,(s,l)=>e[s]=l);for(const s of r)delete e[s]}clone(){return new Pn(vc(this.value))}}function eT(a){const e=[];return Ii(a.fields,(t,r)=>{const s=new fn([t]);if(Mh(r)){const l=eT(r.mapValue).fields;if(l.length===0)e.push(s);else for(const u of l)e.push(s.child(u))}else e.push(s)}),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,t,r,s,l,u,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=l,this.data=u,this.documentState=m}static newInvalidDocument(e){return new En(e,0,Ue.min(),Ue.min(),Ue.min(),Pn.empty(),0)}static newFoundDocument(e,t,r,s){return new En(e,1,t,Ue.min(),r,s,0)}static newNoDocument(e,t){return new En(e,2,t,Ue.min(),Ue.min(),Pn.empty(),0)}static newUnknownDocument(e,t){return new En(e,3,t,Ue.min(),Ue.min(),Pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t){this.position=e,this.inclusive=t}}function Ew(a,e,t){let r=0;for(let s=0;s<a.position.length;s++){const l=e[s],u=a.position[s];if(l.field.isKeyField()?r=Ae.comparator(Ae.fromName(u.referenceValue),t.key):r=Po(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tw(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let t=0;t<a.position.length;t++)if(!Br(a.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function tI(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{}class Gt extends tT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new rI(e,t,r):t==="array-contains"?new sI(e,r):t==="in"?new oI(e,r):t==="not-in"?new lI(e,r):t==="array-contains-any"?new cI(e,r):new Gt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new aI(e,r):new iI(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Po(t,this.value)):t!==null&&xi(this.value)===xi(t)&&this.matchesComparison(Po(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends tT{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new yr(e,t)}matches(e){return nT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function nT(a){return a.op==="and"}function rT(a){return nI(a)&&nT(a)}function nI(a){for(const e of a.filters)if(e instanceof yr)return!1;return!0}function Rg(a){if(a instanceof Gt)return a.field.canonicalString()+a.op.toString()+Uo(a.value);if(rT(a))return a.filters.map(e=>Rg(e)).join(",");{const e=a.filters.map(t=>Rg(t)).join(",");return`${a.op}(${e})`}}function aT(a,e){return a instanceof Gt?function(r,s){return s instanceof Gt&&r.op===s.op&&r.field.isEqual(s.field)&&Br(r.value,s.value)}(a,e):a instanceof yr?function(r,s){return s instanceof yr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((l,u,m)=>l&&aT(u,s.filters[m]),!0):!1}(a,e):void Me()}function iT(a){return a instanceof Gt?function(t){return`${t.field.canonicalString()} ${t.op} ${Uo(t.value)}`}(a):a instanceof yr?function(t){return t.op.toString()+" {"+t.getFilters().map(iT).join(" ,")+"}"}(a):"Filter"}class rI extends Gt{constructor(e,t,r){super(e,t,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class aI extends Gt{constructor(e,t){super(e,"in",t),this.keys=sT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iI extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=sT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sT(a,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ae.fromName(r.referenceValue))}class sI extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fp(t)&&kc(t.arrayValue,this.value)}}class oI extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&kc(this.value.arrayValue,t)}}class lI extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!kc(this.value.arrayValue,t)}}class cI extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>kc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,t=null,r=[],s=[],l=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=u,this.endAt=m,this.le=null}}function Sw(a,e=null,t=[],r=[],s=null,l=null,u=null){return new uI(a,e,t,r,s,l,u)}function mp(a){const e=Ve(a);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Rg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),pd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Uo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Uo(r)).join(",")),e.le=t}return e.le}function gp(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<a.orderBy.length;t++)if(!tI(a.orderBy[t],e.orderBy[t]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let t=0;t<a.filters.length;t++)if(!aT(a.filters[t],e.filters[t]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!Tw(a.startAt,e.startAt)&&Tw(a.endAt,e.endAt)}function kg(a){return Ae.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t=null,r=[],s=[],l=null,u="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=u,this.startAt=m,this.endAt=g,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function hI(a,e,t,r,s,l,u,m){return new Ko(a,e,t,r,s,l,u,m)}function pp(a){return new Ko(a)}function xw(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function oT(a){return a.collectionGroup!==null}function _c(a){const e=Ve(a);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new Zt(fn.comparator);return u.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new Ic(l,r))}),t.has(fn.keyField().canonicalString())||e.he.push(new Ic(fn.keyField(),r))}return e.he}function Ur(a){const e=Ve(a);return e.Pe||(e.Pe=dI(e,_c(a))),e.Pe}function dI(a,e){if(a.limitType==="F")return Sw(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map(s=>{const l=s.dir==="desc"?"asc":"desc";return new Ic(s.field,l)});const t=a.endAt?new Yh(a.endAt.position,a.endAt.inclusive):null,r=a.startAt?new Yh(a.startAt.position,a.startAt.inclusive):null;return Sw(a.path,a.collectionGroup,e,a.filters,a.limit,t,r)}}function Ig(a,e){const t=a.filters.concat([e]);return new Ko(a.path,a.collectionGroup,a.explicitOrderBy.slice(),t,a.limit,a.limitType,a.startAt,a.endAt)}function Wh(a,e,t){return new Ko(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,t,a.startAt,a.endAt)}function vd(a,e){return gp(Ur(a),Ur(e))&&a.limitType===e.limitType}function lT(a){return`${mp(Ur(a))}|lt:${a.limitType}`}function wo(a){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>iT(s)).join(", ")}]`),pd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Uo(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Uo(s)).join(",")),`Target(${r})`}(Ur(a))}; limitType=${a.limitType})`}function _d(a,e){return e.isFoundDocument()&&function(r,s){const l=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Ae.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(a,e)&&function(r,s){for(const l of _c(r))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0}(a,e)&&function(r,s){for(const l of r.filters)if(!l.matches(s))return!1;return!0}(a,e)&&function(r,s){return!(r.startAt&&!function(u,m,g){const y=Ew(u,m,g);return u.inclusive?y<=0:y<0}(r.startAt,_c(r),s)||r.endAt&&!function(u,m,g){const y=Ew(u,m,g);return u.inclusive?y>=0:y>0}(r.endAt,_c(r),s))}(a,e)}function fI(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function cT(a){return(e,t)=>{let r=!1;for(const s of _c(a)){const l=mI(s,e,t);if(l!==0)return l;r=r||s.field.isKeyField()}return 0}}function mI(a,e,t){const r=a.field.isKeyField()?Ae.comparator(e.key,t.key):function(l,u,m){const g=u.data.field(l),y=m.data.field(l);return g!==null&&y!==null?Po(g,y):Me()}(a.field,e,t);switch(a.dir){case"asc":return r;case"desc":return-1*r;default:return Me()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,l]of r)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ii(this.inner,(t,r)=>{for(const[s,l]of r)e(s,l)})}isEmpty(){return $E(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new kt(Ae.comparator);function Ra(){return gI}const uT=new kt(Ae.comparator);function gc(...a){let e=uT;for(const t of a)e=e.insert(t.key,t);return e}function hT(a){let e=uT;return a.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ms(){return wc()}function dT(){return wc()}function wc(){return new Cs(a=>a.toString(),(a,e)=>a.isEqual(e))}const pI=new kt(Ae.comparator),yI=new Zt(Ae.comparator);function We(...a){let e=yI;for(const t of a)e=e.add(t);return e}const vI=new Zt(qe);function _I(){return vI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$h(e)?"-0":e}}function fT(a){return{integerValue:""+a}}function wI(a,e){return Kk(e)?fT(e):yp(a,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(){this._=void 0}}function bI(a,e,t){return a instanceof Nc?function(s,l){const u={fields:{[YE]:{stringValue:QE},[XE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&dp(l)&&(l=yd(l)),l&&(u.fields[WE]=l),{mapValue:u}}(t,e):a instanceof Dc?gT(a,e):a instanceof jc?pT(a,e):function(s,l){const u=mT(s,l),m=Cw(u)+Cw(s.Ie);return Ag(u)&&Ag(s.Ie)?fT(m):yp(s.serializer,m)}(a,e)}function EI(a,e,t){return a instanceof Dc?gT(a,e):a instanceof jc?pT(a,e):t}function mT(a,e){return a instanceof Xh?function(r){return Ag(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class Nc extends wd{}class Dc extends wd{constructor(e){super(),this.elements=e}}function gT(a,e){const t=yT(e);for(const r of a.elements)t.some(s=>Br(s,r))||t.push(r);return{arrayValue:{values:t}}}class jc extends wd{constructor(e){super(),this.elements=e}}function pT(a,e){let t=yT(e);for(const r of a.elements)t=t.filter(s=>!Br(s,r));return{arrayValue:{values:t}}}class Xh extends wd{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Cw(a){return Lt(a.integerValue||a.doubleValue)}function yT(a){return fp(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,t){this.field=e,this.transform=t}}function SI(a,e){return a.field.isEqual(e.field)&&function(r,s){return r instanceof Dc&&s instanceof Dc||r instanceof jc&&s instanceof jc?Oo(r.elements,s.elements,Br):r instanceof Xh&&s instanceof Xh?Br(r.Ie,s.Ie):r instanceof Nc&&s instanceof Nc}(a.transform,e.transform)}class xI{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oh(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class bd{}function vT(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new wT(a.key,mr.none()):new Bc(a.key,a.data,mr.none());{const t=a.data,r=Pn.empty();let s=new Zt(fn.comparator);for(let l of e.fields)if(!s.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),s=s.add(l)}return new Ni(a.key,r,new Gn(s.toArray()),mr.none())}}function CI(a,e,t){a instanceof Bc?function(s,l,u){const m=s.value.clone(),g=Rw(s.fieldTransforms,l,u.transformResults);m.setAll(g),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(a,e,t):a instanceof Ni?function(s,l,u){if(!Oh(s.precondition,l))return void l.convertToUnknownDocument(u.version);const m=Rw(s.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(_T(s)),g.setAll(m),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(a,e,t):function(s,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function bc(a,e,t,r){return a instanceof Bc?function(l,u,m,g){if(!Oh(l.precondition,u))return m;const y=l.value.clone(),v=kw(l.fieldTransforms,g,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(a,e,t,r):a instanceof Ni?function(l,u,m,g){if(!Oh(l.precondition,u))return m;const y=kw(l.fieldTransforms,g,u),v=u.data;return v.setAll(_T(l)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(b=>b.field))}(a,e,t,r):function(l,u,m){return Oh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m}(a,e,t)}function AI(a,e){let t=null;for(const r of a.fieldTransforms){const s=e.data.field(r.field),l=mT(r.transform,s||null);l!=null&&(t===null&&(t=Pn.empty()),t.set(r.field,l))}return t||null}function Aw(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Oo(r,s,(l,u)=>SI(l,u))}(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class Bc extends bd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ni extends bd{constructor(e,t,r,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function _T(a){const e=new Map;return a.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=a.data.field(t);e.set(t,r)}}),e}function Rw(a,e,t){const r=new Map;lt(a.length===t.length);for(let s=0;s<t.length;s++){const l=a[s],u=l.transform,m=e.data.field(l.field);r.set(l.field,EI(u,m,t[s]))}return r}function kw(a,e,t){const r=new Map;for(const s of a){const l=s.transform,u=t.data.field(s.field);r.set(s.field,bI(l,u,e))}return r}class wT extends bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RI extends bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&CI(l,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=bc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=bc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=dT();return this.mutations.forEach(s=>{const l=e.get(s.key),u=l.overlayedDocument;let m=this.applyToLocalView(u,l.mutatedFields);m=t.has(s.key)?null:m;const g=vT(u,m);g!==null&&r.set(s.key,g),u.isValidDocument()||u.convertToNoDocument(Ue.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),We())}isEqual(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,(t,r)=>Aw(t,r))&&Oo(this.baseMutations,e.baseMutations,(t,r)=>Aw(t,r))}}class vp{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){lt(e.mutations.length===r.length);let s=function(){return pI}();const l=e.mutations;for(let u=0;u<l.length;u++)s=s.insert(l[u].key,r[u].version);return new vp(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,nt;function DI(a){switch(a){case ce.OK:return Me();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Me()}}function bT(a){if(a===void 0)return Aa("GRPC error has no .code"),ce.UNKNOWN;switch(a){case Ht.OK:return ce.OK;case Ht.CANCELLED:return ce.CANCELLED;case Ht.UNKNOWN:return ce.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return ce.INTERNAL;case Ht.UNAVAILABLE:return ce.UNAVAILABLE;case Ht.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Ht.NOT_FOUND:return ce.NOT_FOUND;case Ht.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Ht.ABORTED:return ce.ABORTED;case Ht.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Ht.DATA_LOSS:return ce.DATA_LOSS;default:return Me()}}(nt=Ht||(Ht={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=new vi([4294967295,4294967295],0);function Iw(a){const e=qE().encode(a),t=new PE;return t.update(e),new Uint8Array(t.digest())}function Nw(a){const e=new DataView(a.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new vi([t,r],0),new vi([s,l],0)]}class _p{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pc(`Invalid padding: ${t}`);if(r<0)throw new pc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new pc(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=vi.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply(vi.fromNumber(r)));return s.compare(jI)===1&&(s=new vi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Iw(e),[r,s]=Nw(t);for(let l=0;l<this.hashCount;l++){const u=this.Ae(r,s,l);if(!this.Re(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new _p(l,s,t);return r.forEach(m=>u.insert(m)),u}insert(e){if(this.Ee===0)return;const t=Iw(e),[r,s]=Nw(t);for(let l=0;l<this.hashCount;l++){const u=this.Ae(r,s,l);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class pc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t,r,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,zc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ed(Ue.min(),s,new kt(qe),Ra(),We())}}class zc{constructor(e,t,r,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new zc(r,t,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class ET{constructor(e,t){this.targetId=e,this.ge=t}}class TT{constructor(e,t,r=mn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Dw{constructor(){this.pe=0,this.ye=jw(),this.we=mn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=We(),t=We(),r=We();return this.ye.forEach((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Me()}}),new zc(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=jw()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,lt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class MI{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ra(),this.$e=Th(),this.Ue=Th(),this.Ke=new kt(qe)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Me()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const l=s.target;if(kg(l))if(r===0){const u=new Ae(l.path);this.ze(t,u,En.newNoDocument(u,Ue.min()))}else lt(r===1);else{const u=this.et(t);if(u!==r){const m=this.tt(e),g=m?this.nt(m,e,u):1;if(g!==0){this.Ye(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:l=0}=t;let u,m;try{u=Si(r).toUint8Array()}catch(g){if(g instanceof KE)return Mo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new _p(u,s,l)}catch(g){return Mo(g instanceof pc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ee===0?null:m}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(l=>{const u=this.ke.it(),m=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.ze(t,l,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((l,u)=>{const m=this.Xe(u);if(m){if(l.current&&kg(m.target)){const g=new Ae(m.target.path);this._t(g).has(u)||this.ut(u,g)||this.ze(u,g,En.newNoDocument(g,e))}l.ve&&(t.set(u,l.Fe()),l.Me())}});let r=We();this.Ue.forEach((l,u)=>{let m=!0;u.forEachWhile(g=>{const y=this.Xe(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(l))}),this.Qe.forEach((l,u)=>u.setReadTime(e));const s=new Ed(e,t,this.Ke,this.Qe,r);return this.Qe=Ra(),this.$e=Th(),this.Ue=Th(),this.Ke=new kt(qe),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Dw,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Zt(qe),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Zt(qe),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Dw),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Th(){return new kt(Ae.comparator)}function jw(){return new kt(Ae.comparator)}const OI={asc:"ASCENDING",desc:"DESCENDING"},PI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UI={and:"AND",or:"OR"};class VI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ng(a,e){return a.useProto3Json||pd(e)?e:{value:e}}function Zh(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ST(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function LI(a,e){return Zh(a,e.toTimestamp())}function Vr(a){return lt(!!a),Ue.fromTimestamp(function(t){const r=Ti(t);return new Dt(r.seconds,r.nanos)}(a))}function wp(a,e){return Dg(a,e).canonicalString()}function Dg(a,e){const t=function(s){return new bt(["projects",s.projectId,"databases",s.database])}(a).child("documents");return e===void 0?t:t.child(e)}function xT(a){const e=bt.fromString(a);return lt(IT(e)),e}function jg(a,e){return wp(a.databaseId,e.path)}function rg(a,e){const t=xT(e);if(t.get(1)!==a.databaseId.projectId)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+a.databaseId.projectId);if(t.get(3)!==a.databaseId.database)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+a.databaseId.database);return new Ae(AT(t))}function CT(a,e){return wp(a.databaseId,e)}function BI(a){const e=xT(a);return e.length===4?bt.emptyPath():AT(e)}function Mg(a){return new bt(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function AT(a){return lt(a.length>4&&a.get(4)==="documents"),a.popFirst(5)}function Mw(a,e,t){return{name:jg(a,e),fields:t.value.mapValue.fields}}function zI(a,e){let t;if("targetChange"in e){e.targetChange;const r=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Me()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=function(y,v){return y.useProto3Json?(lt(v===void 0||typeof v=="string"),mn.fromBase64String(v||"")):(lt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),mn.fromUint8Array(v||new Uint8Array))}(a,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&function(y){const v=y.code===void 0?ce.UNKNOWN:bT(y.code);return new we(v,y.message||"")}(u);t=new TT(r,s,l,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=rg(a,r.document.name),l=Vr(r.document.updateTime),u=r.document.createTime?Vr(r.document.createTime):Ue.min(),m=new Pn({mapValue:{fields:r.document.fields}}),g=En.newFoundDocument(s,l,u,m),y=r.targetIds||[],v=r.removedTargetIds||[];t=new Ph(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=rg(a,r.document),l=r.readTime?Vr(r.readTime):Ue.min(),u=En.newNoDocument(s,l),m=r.removedTargetIds||[];t=new Ph([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=rg(a,r.document),l=r.removedTargetIds||[];t=new Ph([],l,s,null)}else{if(!("filter"in e))return Me();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:l}=r,u=new NI(s,l),m=r.targetId;t=new ET(m,u)}}return t}function FI(a,e){let t;if(e instanceof Bc)t={update:Mw(a,e.key,e.value)};else if(e instanceof wT)t={delete:jg(a,e.key)};else if(e instanceof Ni)t={update:Mw(a,e.key,e.data),updateMask:XI(e.fieldMask)};else{if(!(e instanceof RI))return Me();t={verify:jg(a,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,u){const m=u.transform;if(m instanceof Nc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Dc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof jc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Xh)return{fieldPath:u.field.canonicalString(),increment:m.Ie};throw Me()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,l){return l.updateTime!==void 0?{updateTime:LI(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Me()}(a,e.precondition)),t}function qI(a,e){return a&&a.length>0?(lt(e!==void 0),a.map(t=>function(s,l){let u=s.updateTime?Vr(s.updateTime):Vr(l);return u.isEqual(Ue.min())&&(u=Vr(l)),new xI(u,s.transformResults||[])}(t,e))):[]}function HI(a,e){return{documents:[CT(a,e.path)]}}function GI(a,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=CT(a,s);const l=function(y){if(y.length!==0)return kT(yr.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(y){if(y.length!==0)return y.map(v=>function(T){return{field:bo(T.field),direction:QI(T.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=Ng(a,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ht:t,parent:s}}function $I(a){let e=BI(a.parent);const t=a.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){lt(r===1);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(b){const T=RT(b);return T instanceof yr&&rT(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=function(b){return b.map(T=>function(R){return new Ic(Eo(R.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(T))}(t.orderBy));let m=null;t.limit&&(m=function(b){let T;return T=typeof b=="object"?b.value:b,pd(T)?null:T}(t.limit));let g=null;t.startAt&&(g=function(b){const T=!!b.before,C=b.values||[];return new Yh(C,T)}(t.startAt));let y=null;return t.endAt&&(y=function(b){const T=!b.before,C=b.values||[];return new Yh(C,T)}(t.endAt)),hI(e,s,u,l,m,"F",g,y)}function KI(a,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function RT(a){return a.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Eo(t.unaryFilter.field);return Gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Eo(t.unaryFilter.field);return Gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Eo(t.unaryFilter.field);return Gt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Eo(t.unaryFilter.field);return Gt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Me()}}(a):a.fieldFilter!==void 0?function(t){return Gt.create(Eo(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Me()}}(t.fieldFilter.op),t.fieldFilter.value)}(a):a.compositeFilter!==void 0?function(t){return yr.create(t.compositeFilter.filters.map(r=>RT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Me()}}(t.compositeFilter.op))}(a):Me()}function QI(a){return OI[a]}function YI(a){return PI[a]}function WI(a){return UI[a]}function bo(a){return{fieldPath:a.canonicalString()}}function Eo(a){return fn.fromServerFormat(a.fieldPath)}function kT(a){return a instanceof Gt?function(t){if(t.op==="=="){if(bw(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NAN"}};if(ww(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bw(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NOT_NAN"}};if(ww(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(t.field),op:YI(t.op),value:t.value}}}(a):a instanceof yr?function(t){const r=t.getFilters().map(s=>kT(s));return r.length===1?r[0]:{compositeFilter:{op:WI(t.op),filters:r}}}(a):Me()}function XI(a){const e=[];return a.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IT(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t,r,s,l=Ue.min(),u=Ue.min(),m=mn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.Tt=e}}function JI(a){const e=$I({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?Wh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.Tn=new tN}addToCollectionParentIndex(e,t){return this.Tn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Ei.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class tN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Zt(bt.comparator),l=!s.has(r);return this.index[t]=s.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Zt(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NT=41943040;class Mn{static withCacheSize(e){return new Mn(e,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(NT,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Vo(0)}static Kn(){return new Vo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="LruGarbageCollector",nN=1048576;function Uw([a,e],[t,r]){const s=qe(a,t);return s===0?qe(e,r):s}class rN{constructor(e){this.Hn=e,this.buffer=new Zt(Uw),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Uw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){_e(Pw,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$o(t)?_e(Pw,"Ignoring IndexedDB error during garbage collection: ",t):await Go(t)}await this.er(3e5)})}}class iN{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(gd.ae);const r=new rN(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Ow)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ow):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,l,u,m,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),s=this.params.maximumSequenceNumbersToCollect):s=b,u=Date.now(),this.nthSequenceNumber(e,s))).next(b=>(r=b,m=Date.now(),this.removeTargets(e,r,t))).next(b=>(l=b,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(b=>(y=Date.now(),_o()<=Ye.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(m-u)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:b})))}}function sN(a,e){return new iN(a,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(){this.changes=new Cs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&bc(r.mutation,s,Gn.empty(),Dt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,t,r=We()){const s=ms();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(l=>{let u=gc();return l.forEach((m,g)=>{u=u.insert(m,g.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=ms();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,We()))}populateOverlays(e,t,r){const s=[];return r.forEach(l=>{t.has(l)||s.push(l)}),this.documentOverlayCache.getOverlays(e,s).next(l=>{l.forEach((u,m)=>{t.set(u,m)})})}computeViews(e,t,r,s){let l=Ra();const u=wc(),m=function(){return wc()}();return t.forEach((g,y)=>{const v=r.get(y.key);s.has(y.key)&&(v===void 0||v.mutation instanceof Ni)?l=l.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),bc(v.mutation,y,v.mutation.getFieldMask(),Dt.now())):u.set(y.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((y,v)=>u.set(y,v)),t.forEach((y,v)=>{var b;return m.set(y,new lN(v,(b=u.get(y))!==null&&b!==void 0?b:null))}),m))}recalculateAndSaveOverlays(e,t){const r=wc();let s=new kt((u,m)=>u-m),l=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const m of u)m.keys().forEach(g=>{const y=t.get(g);if(y===null)return;let v=r.get(g)||Gn.empty();v=m.applyToLocalView(y,v),r.set(g,v);const b=(s.get(m.batchId)||We()).add(g);s=s.insert(m.batchId,b)})}).next(()=>{const u=[],m=s.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,v=g.value,b=dT();v.forEach(T=>{if(!l.has(T)){const C=vT(t.get(T),r.get(T));C!==null&&b.set(T,C),l=l.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,b))}return ue.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(u){return Ae.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):oT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(l=>{const u=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-l.size):ue.resolve(ms());let m=Cc,g=l;return u.next(y=>ue.forEach(y,(v,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),l.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{g=g.insert(v,T)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,g,y,We())).next(v=>({batchId:m,changes:hT(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next(r=>{let s=gc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const l=t.collectionGroup;let u=gc();return this.indexManager.getCollectionParents(e,l).next(m=>ue.forEach(m,g=>{const y=function(b,T){return new Ko(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,r,s).next(v=>{v.forEach((b,T)=>{u=u.insert(b,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,s))).next(u=>{l.forEach((g,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,En.newInvalidDocument(v)))});let m=gc();return u.forEach((g,y)=>{const v=l.get(g);v!==void 0&&bc(v.mutation,y,Gn.empty(),Dt.now()),_d(t,y)&&(m=m.insert(g,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ue.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Vr(s.createTime)}}(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:JI(s.bundledQuery),readTime:Vr(s.readTime)}}(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.overlays=new kt(Ae.comparator),this.Rr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ms();return ue.forEach(t,s=>this.getOverlay(e,s).next(l=>{l!==null&&r.set(s,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,l)=>{this.Et(e,t,l)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const s=ms(),l=t.length+1,u=new Ae(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>r&&s.set(g.getKey(),g)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let l=new kt((y,v)=>y-v);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let v=l.get(y.largestBatchId);v===null&&(v=ms(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const m=ms(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,v)=>m.set(y,v)),!(m.size()>=s)););return ue.resolve(m)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new II(t,r));let l=this.Rr.get(t);l===void 0&&(l=We(),this.Rr.set(t,l)),this.Rr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(){this.Vr=new Zt(an.mr),this.gr=new Zt(an.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new an(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new an(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new Ae(new bt([])),r=new an(t,e),s=new an(t,e+1),l=[];return this.gr.forEachInRange([r,s],u=>{this.wr(u),l.push(u.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Ae(new bt([])),r=new an(t,e),s=new an(t,e+1);let l=We();return this.gr.forEachInRange([r,s],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new an(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class an{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Ae.comparator(e.key,t.key)||qe(e.Cr,t.Cr)}static pr(e,t){return qe(e.Cr,t.Cr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Zt(an.mr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new kI(l,t,r,s);this.mutationQueue.push(u);for(const m of s)this.Mr=this.Mr.add(new an(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(u)}lookupMutationBatch(e,t){return ue.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),l=s<0?0:s;return ue.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?hp:this.Fr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new an(t,0),s=new an(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([r,s],u=>{const m=this.Or(u.Cr);l.push(m)}),ue.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zt(qe);return t.forEach(s=>{const l=new an(s,0),u=new an(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,u],m=>{r=r.add(m.Cr)})}),ue.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let l=r;Ae.isDocumentKey(l)||(l=l.child(""));const u=new an(new Ae(l),0);let m=new Zt(qe);return this.Mr.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===s&&(m=m.add(g.Cr)),!0)},u),ue.resolve(this.Br(m))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){lt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ue.forEach(t.mutations,s=>{const l=new an(s.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new an(t,0),s=this.Mr.firstAfterOrEqual(r);return ue.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.kr=e,this.docs=function(){return new kt(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),l=s?s.size:0,u=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let r=Ra();return t.forEach(s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():En.newInvalidDocument(s))}),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let l=Ra();const u=t.path,m=new Ae(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||qk(Fk(v),r)<=0||(s.has(v.key)||_d(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ue.resolve(l)}getAllFromCollectionGroup(e,t,r,s){Me()}qr(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gN(this)}getSize(e){return ue.resolve(this.size)}}class gN extends oN{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.persistence=e,this.Qr=new Cs(t=>mp(t),gp),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.$r=0,this.Ur=new bp,this.targetCount=0,this.Kr=Vo.Un()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),ue.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Vo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.zn(t),ue.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let s=0;const l=[];return this.Qr.forEach((u,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.Qr.delete(u),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),ue.waitFor(l).next(()=>s)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach(u=>{l.push(s.markPotentiallyOrphaned(e,u))}),ue.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new gd(0),this.zr=!1,this.zr=!0,this.jr=new dN,this.referenceDelegate=e(this),this.Hr=new pN(this),this.indexManager=new eN,this.remoteDocumentCache=function(s){return new mN(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new ZI(t),this.Yr=new uN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new fN(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){_e("MemoryPersistence","Starting transaction:",e);const s=new yN(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(l=>this.referenceDelegate.Xr(s).next(()=>l)).toPromise().then(l=>(s.raiseOnCommittedEvent(),l))}ei(e,t){return ue.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class yN extends Gk{constructor(e){super(),this.currentSequenceNumber=e}}class Ep{constructor(e){this.persistence=e,this.ti=new bp,this.ni=null}static ri(e){return new Ep(e)}get ii(){if(this.ni)return this.ni;throw Me()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ue.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(l=>this.ii.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.ii,r=>{const s=Ae.fromPath(r);return this.si(e,s).next(l=>{l||t.removeEntry(s,Ue.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ue.or([()=>ue.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Jh{constructor(e,t){this.persistence=e,this.oi=new Cs(r=>Qk(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=sN(this,t)}static ri(e,t){return new Jh(e,t)}Zr(){}Xr(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return ue.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(l=>l?ue.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.qr(e,u=>this.ar(e,u,t).next(m=>{m||(r++,l.removeEntry(u,Ue.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ue.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jh(e.data.value)),t}ar(e,t,r){return ue.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return ue.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=We(),s=We();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Tp(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return dR()?8:$k(Tn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const l={result:null};return this.rs(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.ss(e,t,s,r).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new vN;return this._s(e,t,u).next(m=>{if(l.result=m,this.Xi)return this.us(e,t,u,m.size)})}).next(()=>l.result)}us(e,t,r,s){return r.documentReadCount<this.es?(_o()<=Ye.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",wo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ue.resolve()):(_o()<=Ye.DEBUG&&_e("QueryEngine","Query:",wo(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(_o()<=Ye.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",wo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ur(t))):ue.resolve())}rs(e,t){if(xw(t))return ue.resolve(null);let r=Ur(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Wh(t,null,"F"),r=Ur(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const u=We(...l);return this.ns.getDocuments(e,u).next(m=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.cs(t,m);return this.ls(t,y,u,g.readTime)?this.rs(e,Wh(t,null,"F")):this.hs(e,y,t,g)}))})))}ss(e,t,r,s){return xw(t)||s.isEqual(Ue.min())?ue.resolve(null):this.ns.getDocuments(e,r).next(l=>{const u=this.cs(t,l);return this.ls(t,u,r,s)?ue.resolve(null):(_o()<=Ye.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),wo(t)),this.hs(e,u,t,zk(s,Cc)).next(m=>m))})}cs(e,t){let r=new Zt(cT(e));return t.forEach((s,l)=>{_d(e,l)&&(r=r.add(l))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}_s(e,t,r){return _o()<=Ye.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",wo(t)),this.ns.getDocumentsMatchingQuery(e,t,Ei.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="LocalStore",wN=3e8;class bN{constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new kt(qe),this.Is=new Cs(l=>mp(l),gp),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cN(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function EN(a,e,t,r){return new bN(a,e,t,r)}async function jT(a,e){const t=Ve(a);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(l=>(s=l,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const u=[],m=[];let g=We();for(const y of s){u.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){m.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(r,g).next(y=>({Rs:y,removedBatchIds:u,addedBatchIds:m}))})})}function TN(a,e){const t=Ve(a);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(m,g,y,v){const b=y.batch,T=b.keys();let C=ue.resolve();return T.forEach(R=>{C=C.next(()=>v.getEntry(g,R)).next(S=>{const x=y.docVersions.get(R);lt(x!==null),S.version.compareTo(x)<0&&(b.applyToRemoteDocument(S,y),S.isValidDocument()&&(S.setReadTime(y.commitVersion),v.addEntry(S)))})}),C.next(()=>m.mutationQueue.removeMutationBatch(g,b))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let g=We();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function MT(a){const e=Ve(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function SN(a,e){const t=Ve(a),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const m=[];e.targetChanges.forEach((v,b)=>{const T=s.get(b);if(!T)return;m.push(t.Hr.removeMatchingKeys(l,v.removedDocuments,b).next(()=>t.Hr.addMatchingKeys(l,v.addedDocuments,b)));let C=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?C=C.withResumeToken(mn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,r)),s=s.insert(b,C),function(S,x,I){return S.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=wN?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(T,C,v)&&m.push(t.Hr.updateTargetData(l,C))});let g=Ra(),y=We();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),m.push(xN(l,u,e.documentUpdates).next(v=>{g=v.Vs,y=v.fs})),!r.isEqual(Ue.min())){const v=t.Hr.getLastRemoteSnapshotVersion(l).next(b=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(v)}return ue.waitFor(m).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,y)).next(()=>g)}).then(l=>(t.Ts=s,l))}function xN(a,e,t){let r=We(),s=We();return t.forEach(l=>r=r.add(l)),e.getEntries(a,r).next(l=>{let u=Ra();return t.forEach((m,g)=>{const y=l.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(s=s.add(m)),g.isNoDocument()&&g.version.isEqual(Ue.min())?(e.removeEntry(m,g.readTime),u=u.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(m,g)):_e(Sp,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)}),{Vs:u,fs:s}})}function CN(a,e){const t=Ve(a);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=hp),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function AN(a,e){const t=Ve(a);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(l=>l?(s=l,ue.resolve(s)):t.Hr.allocateTargetId(r).next(u=>(s=new gi(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function Og(a,e,t){const r=Ve(a),s=r.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!$o(u))throw u;_e(Sp,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function Vw(a,e,t){const r=Ve(a);let s=Ue.min(),l=We();return r.persistence.runTransaction("Execute query","readwrite",u=>function(g,y,v){const b=Ve(g),T=b.Is.get(v);return T!==void 0?ue.resolve(b.Ts.get(T)):b.Hr.getTargetData(y,v)}(r,u,Ur(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(u,m.targetId).next(g=>{l=g})}).next(()=>r.Ps.getDocumentsMatchingQuery(u,e,t?s:Ue.min(),t?l:We())).next(m=>(RN(r,fI(e),m),{documents:m,gs:l})))}function RN(a,e,t){let r=a.Es.get(e)||Ue.min();t.forEach((s,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),a.Es.set(e,r)}class Lw{constructor(){this.activeTargetIds=_I()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kN{constructor(){this.ho=new Lw,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Lw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="ConnectivityMonitor";class zw{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){_e(Bw,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){_e(Bw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh=null;function Pg(){return Sh===null?Sh=function(){return 268435456+Math.round(2147483648*Math.random())}():Sh++,"0x"+Sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="RestConnection",NN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DN{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===Kh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,t,r,s,l){const u=Pg(),m=this.bo(e,t.toUriEncodedString());_e(ag,`Sending RPC '${e}' ${u}:`,m,r);const g={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(g,s,l),this.vo(e,m,g,r).then(y=>(_e(ag,`Received RPC '${e}' ${u}: `,y),y),y=>{throw Mo(ag,`RPC '${e}' ${u} failed with error: `,y,"url: ",m,"request:",r),y})}Co(e,t,r,s,l,u){return this.So(e,t,r,s,l)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ho}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,l)=>e[l]=s),r&&r.headers.forEach((s,l)=>e[l]=s)}bo(e,t){const r=NN[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class MN extends DN{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const l=Pg();return new Promise((u,m)=>{const g=new UE;g.setWithCredentials(!0),g.listenOnce(VE.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Dh.NO_ERROR:const v=g.getResponseJson();_e(_n,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),u(v);break;case Dh.TIMEOUT:_e(_n,`RPC '${e}' ${l} timed out`),m(new we(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Dh.HTTP_ERROR:const b=g.getStatus();if(_e(_n,`RPC '${e}' ${l} failed with status:`,b,"response text:",g.getResponseText()),b>0){let T=g.getResponseJson();Array.isArray(T)&&(T=T[0]);const C=T==null?void 0:T.error;if(C&&C.status&&C.message){const R=function(x){const I=x.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(I)>=0?I:ce.UNKNOWN}(C.status);m(new we(R,C.message))}else m(new we(ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new we(ce.UNAVAILABLE,"Connection failed."));break;default:Me()}}finally{_e(_n,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(s);_e(_n,`RPC '${e}' ${l} sending request:`,s),g.send(t,"POST",y,r,15)})}Wo(e,t,r){const s=Pg(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=zE(),m=BE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Do(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const v=l.join("");_e(_n,`Creating RPC '${e}' stream ${s}: ${v}`,g);const b=u.createWebChannel(v,g);let T=!1,C=!1;const R=new jN({Fo:x=>{C?_e(_n,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(T||(_e(_n,`Opening RPC '${e}' stream ${s} transport.`),b.open(),T=!0),_e(_n,`RPC '${e}' stream ${s} sending:`,x),b.send(x))},Mo:()=>b.close()}),S=(x,I,B)=>{x.listen(I,G=>{try{B(G)}catch(re){setTimeout(()=>{throw re},0)}})};return S(b,mc.EventType.OPEN,()=>{C||(_e(_n,`RPC '${e}' stream ${s} transport opened.`),R.Qo())}),S(b,mc.EventType.CLOSE,()=>{C||(C=!0,_e(_n,`RPC '${e}' stream ${s} transport closed`),R.Uo())}),S(b,mc.EventType.ERROR,x=>{C||(C=!0,Mo(_n,`RPC '${e}' stream ${s} transport errored:`,x),R.Uo(new we(ce.UNAVAILABLE,"The operation could not be completed")))}),S(b,mc.EventType.MESSAGE,x=>{var I;if(!C){const B=x.data[0];lt(!!B);const G=B,re=(G==null?void 0:G.error)||((I=G[0])===null||I===void 0?void 0:I.error);if(re){_e(_n,`RPC '${e}' stream ${s} received error:`,re);const oe=re.status;let de=function(j){const U=Ht[j];if(U!==void 0)return bT(U)}(oe),M=re.message;de===void 0&&(de=ce.INTERNAL,M="Unknown error status: "+oe+" with message "+re.message),C=!0,R.Uo(new we(de,M)),b.close()}else _e(_n,`RPC '${e}' stream ${s} received:`,B),R.Ko(B)}}),S(m,LE.STAT_EVENT,x=>{x.stat===Sg.PROXY?_e(_n,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===Sg.NOPROXY&&_e(_n,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.$o()},0),R}}function ig(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(a){return new VI(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,t,r=1e3,s=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&_e("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="PersistentStream";class PT{constructor(e,t,r,s,l,u,m,g){this.Ti=e,this.n_=r,this.r_=s,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new OT(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Aa(t.toString()),Aa("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new we(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return _e(Fw,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(_e(Fw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ON extends PT{constructor(e,t,r,s,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=zI(this.serializer,e),r=function(l){if(!("targetChange"in l))return Ue.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ue.min():u.readTime?Vr(u.readTime):Ue.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=Mg(this.serializer),t.addTarget=function(l,u){let m;const g=u.target;if(m=kg(g)?{documents:HI(l,g)}:{query:GI(l,g).ht},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=ST(l,u.resumeToken);const y=Ng(l,u.expectedCount);y!==null&&(m.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ue.min())>0){m.readTime=Zh(l,u.snapshotVersion.toTimestamp());const y=Ng(l,u.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const r=KI(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=Mg(this.serializer),t.removeTarget=e,this.I_(t)}}class PN extends PT{constructor(e,t,r,s,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return lt(!!e.streamToken),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=qI(e.writeResults,e.commitTime),r=Vr(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=Mg(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>FI(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{}class VN extends UN{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.So(e,Dg(t,r),s,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(ce.UNKNOWN,l.toString())})}Co(e,t,r,s,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,m])=>this.connection.Co(e,Dg(t,r),s,u,m,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new we(ce.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class LN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Aa(t),this.N_=!1):_e("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="RemoteStore";class BN{constructor(e,t,r,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(u=>{r.enqueueAndForget(async()=>{As(this)&&(_e(ws,"Restarting streams for network reachability change."),await async function(g){const y=Ve(g);y.W_.add(4),await Fc(y),y.j_.set("Unknown"),y.W_.delete(4),await Sd(y)}(this))})}),this.j_=new LN(r,s)}}async function Sd(a){if(As(a))for(const e of a.G_)await e(!0)}async function Fc(a){for(const e of a.G_)await e(!1)}function UT(a,e){const t=Ve(a);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),Rp(t)?Ap(t):Qo(t).c_()&&Cp(t,e))}function xp(a,e){const t=Ve(a),r=Qo(t);t.K_.delete(e),r.c_()&&VT(t,e),t.K_.size===0&&(r.c_()?r.P_():As(t)&&t.j_.set("Unknown"))}function Cp(a,e){if(a.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qo(a).y_(e)}function VT(a,e){a.H_.Ne(e),Qo(a).w_(e)}function Ap(a){a.H_=new MI({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>a.K_.get(e)||null,it:()=>a.datastore.serializer.databaseId}),Qo(a).start(),a.j_.B_()}function Rp(a){return As(a)&&!Qo(a).u_()&&a.K_.size>0}function As(a){return Ve(a).W_.size===0}function LT(a){a.H_=void 0}async function zN(a){a.j_.set("Online")}async function FN(a){a.K_.forEach((e,t)=>{Cp(a,e)})}async function qN(a,e){LT(a),Rp(a)?(a.j_.q_(e),Ap(a)):a.j_.set("Unknown")}async function HN(a,e,t){if(a.j_.set("Online"),e instanceof TT&&e.state===2&&e.cause)try{await async function(s,l){const u=l.cause;for(const m of l.targetIds)s.K_.has(m)&&(await s.remoteSyncer.rejectListen(m,u),s.K_.delete(m),s.H_.removeTarget(m))}(a,e)}catch(r){_e(ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ed(a,r)}else if(e instanceof Ph?a.H_.We(e):e instanceof ET?a.H_.Ze(e):a.H_.je(e),!t.isEqual(Ue.min()))try{const r=await MT(a.localStore);t.compareTo(r)>=0&&await function(l,u){const m=l.H_.ot(u);return m.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.K_.get(y);v&&l.K_.set(y,v.withResumeToken(g.resumeToken,u))}}),m.targetMismatches.forEach((g,y)=>{const v=l.K_.get(g);if(!v)return;l.K_.set(g,v.withResumeToken(mn.EMPTY_BYTE_STRING,v.snapshotVersion)),VT(l,g);const b=new gi(v.target,g,y,v.sequenceNumber);Cp(l,b)}),l.remoteSyncer.applyRemoteEvent(m)}(a,t)}catch(r){_e(ws,"Failed to raise snapshot:",r),await ed(a,r)}}async function ed(a,e,t){if(!$o(e))throw e;a.W_.add(1),await Fc(a),a.j_.set("Offline"),t||(t=()=>MT(a.localStore)),a.asyncQueue.enqueueRetryable(async()=>{_e(ws,"Retrying IndexedDB access"),await t(),a.W_.delete(1),await Sd(a)})}function BT(a,e){return e().catch(t=>ed(a,t,e))}async function xd(a){const e=Ve(a),t=Ci(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:hp;for(;GN(e);)try{const s=await CN(e.localStore,r);if(s===null){e.U_.length===0&&t.P_();break}r=s.batchId,$N(e,s)}catch(s){await ed(e,s)}zT(e)&&FT(e)}function GN(a){return As(a)&&a.U_.length<10}function $N(a,e){a.U_.push(e);const t=Ci(a);t.c_()&&t.S_&&t.b_(e.mutations)}function zT(a){return As(a)&&!Ci(a).u_()&&a.U_.length>0}function FT(a){Ci(a).start()}async function KN(a){Ci(a).C_()}async function QN(a){const e=Ci(a);for(const t of a.U_)e.b_(t.mutations)}async function YN(a,e,t){const r=a.U_.shift(),s=vp.from(r,e,t);await BT(a,()=>a.remoteSyncer.applySuccessfulWrite(s)),await xd(a)}async function WN(a,e){e&&Ci(a).S_&&await async function(r,s){if(function(u){return DI(u)&&u!==ce.ABORTED}(s.code)){const l=r.U_.shift();Ci(r).h_(),await BT(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),await xd(r)}}(a,e),zT(a)&&FT(a)}async function qw(a,e){const t=Ve(a);t.asyncQueue.verifyOperationInProgress(),_e(ws,"RemoteStore received new credentials");const r=As(t);t.W_.add(3),await Fc(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Sd(t)}async function XN(a,e){const t=Ve(a);e?(t.W_.delete(2),await Sd(t)):e||(t.W_.add(2),await Fc(t),t.j_.set("Unknown"))}function Qo(a){return a.J_||(a.J_=function(t,r,s){const l=Ve(t);return l.M_(),new ON(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(a.datastore,a.asyncQueue,{xo:zN.bind(null,a),No:FN.bind(null,a),Lo:qN.bind(null,a),p_:HN.bind(null,a)}),a.G_.push(async e=>{e?(a.J_.h_(),Rp(a)?Ap(a):a.j_.set("Unknown")):(await a.J_.stop(),LT(a))})),a.J_}function Ci(a){return a.Y_||(a.Y_=function(t,r,s){const l=Ve(t);return l.M_(),new PN(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(a.datastore,a.asyncQueue,{xo:()=>Promise.resolve(),No:KN.bind(null,a),Lo:WN.bind(null,a),D_:QN.bind(null,a),v_:YN.bind(null,a)}),a.G_.push(async e=>{e?(a.Y_.h_(),await xd(a)):(await a.Y_.stop(),a.U_.length>0&&(_e(ws,`Stopping write stream with ${a.U_.length} pending writes`),a.U_=[]))})),a.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,t,r,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new Ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,l){const u=Date.now()+r,m=new kp(e,t,u,s,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ip(a,e){if(Aa("AsyncQueue",`${e}: ${a}`),$o(a))return new we(ce.UNAVAILABLE,`${e}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{static emptySet(e){return new Io(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ae.comparator(t.key,r.key):(t,r)=>Ae.comparator(t.key,r.key),this.keyedMap=gc(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Io;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.Z_=new kt(Ae.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Me():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Lo{constructor(e,t,r,s,l,u,m,g,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,s,l){const u=[];return t.forEach(m=>{u.push({type:0,doc:m})}),new Lo(e,t,Io.emptySet(t),u,r,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class JN{constructor(){this.queries=Gw(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=Ve(t),l=s.queries;s.queries=Gw(),l.forEach((u,m)=>{for(const g of m.ta)g.onError(r)})})(this,new we(ce.ABORTED,"Firestore shutting down"))}}function Gw(){return new Cs(a=>lT(a),vd)}async function qT(a,e){const t=Ve(a);let r=3;const s=e.query;let l=t.queries.get(s);l?!l.na()&&e.ra()&&(r=2):(l=new ZN,r=e.ra()?0:1);try{switch(r){case 0:l.ea=await t.onListen(s,!0);break;case 1:l.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const m=Ip(u,`Initialization of query '${wo(e.query)}' failed`);return void e.onError(m)}t.queries.set(s,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&Np(t)}async function HT(a,e){const t=Ve(a),r=e.query;let s=3;const l=t.queries.get(r);if(l){const u=l.ta.indexOf(e);u>=0&&(l.ta.splice(u,1),l.ta.length===0?s=e.ra()?0:1:!l.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function eD(a,e){const t=Ve(a);let r=!1;for(const s of e){const l=s.query,u=t.queries.get(l);if(u){for(const m of u.ta)m.oa(s)&&(r=!0);u.ea=s}}r&&Np(t)}function tD(a,e,t){const r=Ve(a),s=r.queries.get(e);if(s)for(const l of s.ta)l.onError(t);r.queries.delete(e)}function Np(a){a.ia.forEach(e=>{e.next()})}var Ug,$w;($w=Ug||(Ug={}))._a="default",$w.Cache="cache";class GT{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Lo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Ug.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){this.key=e}}class KT{constructor(e){this.key=e}}class nD{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=We(),this.mutatedKeys=We(),this.ya=cT(e),this.wa=new Io(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new Hw,s=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,u=s,m=!1;const g=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,y=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,b)=>{const T=s.get(v),C=_d(this.query,b)?b:null,R=!!T&&this.mutatedKeys.has(T.key),S=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let x=!1;T&&C?T.data.isEqual(C.data)?R!==S&&(r.track({type:3,doc:C}),x=!0):this.va(T,C)||(r.track({type:2,doc:C}),x=!0,(g&&this.ya(C,g)>0||y&&this.ya(C,y)<0)&&(m=!0)):!T&&C?(r.track({type:0,doc:C}),x=!0):T&&!C&&(r.track({type:1,doc:T}),x=!0,(g||y)&&(m=!0)),x&&(C?(u=u.add(C),l=S?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{wa:u,Da:r,ls:m,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((v,b)=>function(C,R){const S=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me()}};return S(C)-S(R)}(v.type,b.type)||this.ya(v.doc,b.doc)),this.Ca(r),s=s!=null&&s;const m=t&&!s?this.Fa():[],g=this.pa.size===0&&this.current&&!s?1:0,y=g!==this.ga;return this.ga=g,u.length!==0||y?{snapshot:new Lo(this.query,e.wa,l,u,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Hw,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=We(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new KT(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new $T(r))}),t}Oa(e){this.fa=e.gs,this.pa=We();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Lo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Dp="SyncEngine";class rD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class aD{constructor(e){this.key=e,this.Ba=!1}}class iD{constructor(e,t,r,s,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Cs(m=>lT(m),vd),this.qa=new Map,this.Qa=new Set,this.$a=new kt(Ae.comparator),this.Ua=new Map,this.Ka=new bp,this.Wa={},this.Ga=new Map,this.za=Vo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function sD(a,e,t=!0){const r=JT(a);let s;const l=r.ka.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.Na()):s=await QT(r,e,t,!0),s}async function oD(a,e){const t=JT(a);await QT(t,e,!0,!1)}async function QT(a,e,t,r){const s=await AN(a.localStore,Ur(e)),l=s.targetId,u=a.sharedClientState.addLocalQueryTarget(l,t);let m;return r&&(m=await lD(a,e,l,u==="current",s.resumeToken)),a.isPrimaryClient&&t&&UT(a.remoteStore,s),m}async function lD(a,e,t,r,s){a.Ha=(b,T,C)=>async function(S,x,I,B){let G=x.view.ba(I);G.ls&&(G=await Vw(S.localStore,x.query,!1).then(({documents:M})=>x.view.ba(M,G)));const re=B&&B.targetChanges.get(x.targetId),oe=B&&B.targetMismatches.get(x.targetId)!=null,de=x.view.applyChanges(G,S.isPrimaryClient,re,oe);return Qw(S,x.targetId,de.Ma),de.snapshot}(a,b,T,C);const l=await Vw(a.localStore,e,!0),u=new nD(e,l.gs),m=u.ba(l.documents),g=zc.createSynthesizedTargetChangeForCurrentChange(t,r&&a.onlineState!=="Offline",s),y=u.applyChanges(m,a.isPrimaryClient,g);Qw(a,t,y.Ma);const v=new rD(e,t,u);return a.ka.set(e,v),a.qa.has(t)?a.qa.get(t).push(e):a.qa.set(t,[e]),y.snapshot}async function cD(a,e,t){const r=Ve(a),s=r.ka.get(e),l=r.qa.get(s.targetId);if(l.length>1)return r.qa.set(s.targetId,l.filter(u=>!vd(u,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Og(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&xp(r.remoteStore,s.targetId),Vg(r,s.targetId)}).catch(Go)):(Vg(r,s.targetId),await Og(r.localStore,s.targetId,!0))}async function uD(a,e){const t=Ve(a),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),xp(t.remoteStore,r.targetId))}async function hD(a,e,t){const r=vD(a);try{const s=await function(u,m){const g=Ve(u),y=Dt.now(),v=m.reduce((C,R)=>C.add(R.key),We());let b,T;return g.persistence.runTransaction("Locally write mutations","readwrite",C=>{let R=Ra(),S=We();return g.ds.getEntries(C,v).next(x=>{R=x,R.forEach((I,B)=>{B.isValidDocument()||(S=S.add(I))})}).next(()=>g.localDocuments.getOverlayedDocuments(C,R)).next(x=>{b=x;const I=[];for(const B of m){const G=AI(B,b.get(B.key).overlayedDocument);G!=null&&I.push(new Ni(B.key,G,eT(G.value.mapValue),mr.exists(!0)))}return g.mutationQueue.addMutationBatch(C,y,I,m)}).next(x=>{T=x;const I=x.applyToLocalDocumentSet(b,S);return g.documentOverlayCache.saveOverlays(C,x.batchId,I)})}).then(()=>({batchId:T.batchId,changes:hT(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,m,g){let y=u.Wa[u.currentUser.toKey()];y||(y=new kt(qe)),y=y.insert(m,g),u.Wa[u.currentUser.toKey()]=y}(r,s.batchId,t),await qc(r,s.changes),await xd(r.remoteStore)}catch(s){const l=Ip(s,"Failed to persist write");t.reject(l)}}async function YT(a,e){const t=Ve(a);try{const r=await SN(t.localStore,e);e.targetChanges.forEach((s,l)=>{const u=t.Ua.get(l);u&&(lt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.Ba=!0:s.modifiedDocuments.size>0?lt(u.Ba):s.removedDocuments.size>0&&(lt(u.Ba),u.Ba=!1))}),await qc(t,r,e)}catch(r){await Go(r)}}function Kw(a,e,t){const r=Ve(a);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((l,u)=>{const m=u.view.sa(e);m.snapshot&&s.push(m.snapshot)}),function(u,m){const g=Ve(u);g.onlineState=m;let y=!1;g.queries.forEach((v,b)=>{for(const T of b.ta)T.sa(m)&&(y=!0)}),y&&Np(g)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dD(a,e,t){const r=Ve(a);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ua.get(e),l=s&&s.key;if(l){let u=new kt(Ae.comparator);u=u.insert(l,En.newNoDocument(l,Ue.min()));const m=We().add(l),g=new Ed(Ue.min(),new Map,new kt(qe),u,m);await YT(r,g),r.$a=r.$a.remove(l),r.Ua.delete(e),jp(r)}else await Og(r.localStore,e,!1).then(()=>Vg(r,e,t)).catch(Go)}async function fD(a,e){const t=Ve(a),r=e.batch.batchId;try{const s=await TN(t.localStore,e);XT(t,r,null),WT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await qc(t,s)}catch(s){await Go(s)}}async function mD(a,e,t){const r=Ve(a);try{const s=await function(u,m){const g=Ve(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let v;return g.mutationQueue.lookupMutationBatch(y,m).next(b=>(lt(b!==null),v=b.keys(),g.mutationQueue.removeMutationBatch(y,b))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v)).next(()=>g.localDocuments.getDocuments(y,v))})}(r.localStore,e);XT(r,e,t),WT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await qc(r,s)}catch(s){await Go(s)}}function WT(a,e){(a.Ga.get(e)||[]).forEach(t=>{t.resolve()}),a.Ga.delete(e)}function XT(a,e,t){const r=Ve(a);let s=r.Wa[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function Vg(a,e,t=null){a.sharedClientState.removeLocalQueryTarget(e);for(const r of a.qa.get(e))a.ka.delete(r),t&&a.La.Ja(r,t);a.qa.delete(e),a.isPrimaryClient&&a.Ka.br(e).forEach(r=>{a.Ka.containsKey(r)||ZT(a,r)})}function ZT(a,e){a.Qa.delete(e.path.canonicalString());const t=a.$a.get(e);t!==null&&(xp(a.remoteStore,t),a.$a=a.$a.remove(e),a.Ua.delete(t),jp(a))}function Qw(a,e,t){for(const r of t)r instanceof $T?(a.Ka.addReference(r.key,e),gD(a,r)):r instanceof KT?(_e(Dp,"Document no longer in limbo: "+r.key),a.Ka.removeReference(r.key,e),a.Ka.containsKey(r.key)||ZT(a,r.key)):Me()}function gD(a,e){const t=e.key,r=t.path.canonicalString();a.$a.get(t)||a.Qa.has(r)||(_e(Dp,"New document in limbo: "+t),a.Qa.add(r),jp(a))}function jp(a){for(;a.Qa.size>0&&a.$a.size<a.maxConcurrentLimboResolutions;){const e=a.Qa.values().next().value;a.Qa.delete(e);const t=new Ae(bt.fromString(e)),r=a.za.next();a.Ua.set(r,new aD(t)),a.$a=a.$a.insert(t,r),UT(a.remoteStore,new gi(Ur(pp(t.path)),r,"TargetPurposeLimboResolution",gd.ae))}}async function qc(a,e,t){const r=Ve(a),s=[],l=[],u=[];r.ka.isEmpty()||(r.ka.forEach((m,g)=>{u.push(r.Ha(g,e,t).then(y=>{var v;if((y||t)&&r.isPrimaryClient){const b=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){s.push(y);const b=Tp.Yi(g.targetId,y);l.push(b)}}))}),await Promise.all(u),r.La.p_(s),await async function(g,y){const v=Ve(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>ue.forEach(y,T=>ue.forEach(T.Hi,C=>v.persistence.referenceDelegate.addReference(b,T.targetId,C)).next(()=>ue.forEach(T.Ji,C=>v.persistence.referenceDelegate.removeReference(b,T.targetId,C)))))}catch(b){if(!$o(b))throw b;_e(Sp,"Failed to update sequence numbers: "+b)}for(const b of y){const T=b.targetId;if(!b.fromCache){const C=v.Ts.get(T),R=C.snapshotVersion,S=C.withLastLimboFreeSnapshotVersion(R);v.Ts=v.Ts.insert(T,S)}}}(r.localStore,l))}async function pD(a,e){const t=Ve(a);if(!t.currentUser.isEqual(e)){_e(Dp,"User change. New user:",e.toKey());const r=await jT(t.localStore,e);t.currentUser=e,function(l,u){l.Ga.forEach(m=>{m.forEach(g=>{g.reject(new we(ce.CANCELLED,u))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qc(t,r.Rs)}}function yD(a,e){const t=Ve(a),r=t.Ua.get(e);if(r&&r.Ba)return We().add(r.key);{let s=We();const l=t.qa.get(e);if(!l)return s;for(const u of l){const m=t.ka.get(u);s=s.unionWith(m.view.Sa)}return s}}function JT(a){const e=Ve(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=YT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dD.bind(null,e),e.La.p_=eD.bind(null,e.eventManager),e.La.Ja=tD.bind(null,e.eventManager),e}function vD(a){const e=Ve(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mD.bind(null,e),e}class td{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Td(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return EN(this.persistence,new _N,e.initialUser,this.serializer)}Xa(e){return new DT(Ep.ri,this.serializer)}Za(e){return new kN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}td.provider={build:()=>new td};class _D extends td{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){lt(this.persistence.referenceDelegate instanceof Jh);const r=this.persistence.referenceDelegate.garbageCollector;return new aN(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new DT(r=>Jh.ri(r,t),this.serializer)}}class Lg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pD.bind(null,this.syncEngine),await XN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JN}()}createDatastore(e){const t=Td(e.databaseInfo.databaseId),r=function(l){return new MN(l)}(e.databaseInfo);return function(l,u,m,g){return new VN(l,u,m,g)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,l,u,m){return new BN(r,s,l,u,m)}(this.localStore,this.datastore,e.asyncQueue,t=>Kw(this.syncEngine,t,0),function(){return zw.D()?new zw:new IN}())}createSyncEngine(e,t){return function(s,l,u,m,g,y,v){const b=new iD(s,l,u,m,g,y);return v&&(b.ja=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const l=Ve(s);_e(ws,"RemoteStore shutting down."),l.W_.add(5),await Fc(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Lg.provider={build:()=>new Lg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Aa("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="FirestoreClient";class wD{constructor(e,t,r,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=bn.UNAUTHENTICATED,this.clientId=HE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async u=>{_e(Ai,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(_e(Ai,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ip(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sg(a,e){a.asyncQueue.verifyOperationInProgress(),_e(Ai,"Initializing OfflineComponentProvider");const t=a.configuration;await e.initialize(t);let r=t.initialUser;a.setCredentialChangeListener(async s=>{r.isEqual(s)||(await jT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=e}async function Yw(a,e){a.asyncQueue.verifyOperationInProgress();const t=await bD(a);_e(Ai,"Initializing OnlineComponentProvider"),await e.initialize(t,a.configuration),a.setCredentialChangeListener(r=>qw(e.remoteStore,r)),a.setAppCheckTokenChangeListener((r,s)=>qw(e.remoteStore,s)),a._onlineComponents=e}async function bD(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){_e(Ai,"Using user provided OfflineComponentProvider");try{await sg(a,a._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ce.FAILED_PRECONDITION||s.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Mo("Error using user provided cache. Falling back to memory cache: "+t),await sg(a,new td)}}else _e(Ai,"Using default OfflineComponentProvider"),await sg(a,new _D(void 0));return a._offlineComponents}async function tS(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(_e(Ai,"Using user provided OnlineComponentProvider"),await Yw(a,a._uninitializedComponentsProvider._online)):(_e(Ai,"Using default OnlineComponentProvider"),await Yw(a,new Lg))),a._onlineComponents}function ED(a){return tS(a).then(e=>e.syncEngine)}async function nS(a){const e=await tS(a),t=e.eventManager;return t.onListen=sD.bind(null,e.syncEngine),t.onUnlisten=cD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uD.bind(null,e.syncEngine),t}function TD(a,e,t={}){const r=new Ta;return a.asyncQueue.enqueueAndForget(async()=>function(l,u,m,g,y){const v=new eS({next:T=>{v.su(),u.enqueueAndForget(()=>HT(l,b));const C=T.docs.has(m);!C&&T.fromCache?y.reject(new we(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&g&&g.source==="server"?y.reject(new we(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),b=new GT(pp(m.path),v,{includeMetadataChanges:!0,Ta:!0});return qT(l,b)}(await nS(a),a.asyncQueue,e,t,r)),r.promise}function SD(a,e,t={}){const r=new Ta;return a.asyncQueue.enqueueAndForget(async()=>function(l,u,m,g,y){const v=new eS({next:T=>{v.su(),u.enqueueAndForget(()=>HT(l,b)),T.fromCache&&g.source==="server"?y.reject(new we(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),b=new GT(m,v,{includeMetadataChanges:!0,Ta:!0});return qT(l,b)}(await nS(a),a.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(a,e,t){if(!t)throw new we(ce.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function xD(a,e,t,r){if(e===!0&&r===!0)throw new we(ce.INVALID_ARGUMENT,`${a} and ${t} cannot be used together.`)}function Xw(a){if(!Ae.isDocumentKey(a))throw new we(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Zw(a){if(Ae.isDocumentKey(a))throw new we(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Cd(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":Me()}function zr(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new we(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cd(a);throw new we(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="firestore.googleapis.com",Jw=!0;class eb{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new we(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iS,this.ssl=Jw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Jw;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=NT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nN)throw new we(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ad{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Dk;switch(r.type){case"firstParty":return new Pk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Ww.get(t);r&&(_e("ComponentProvider","Removing Datastore"),Ww.delete(t),r.terminate())}(this),Promise.resolve()}}function CD(a,e,t,r={}){var s;const l=(a=zr(a,Ad))._getSettings(),u=Object.assign(Object.assign({},l),{emulatorOptions:a._getEmulatorOptions()}),m=`${e}:${t}`;l.host!==iS&&l.host!==m&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},l),{host:m,ssl:!1,emulatorOptions:r});if(!ys(g,u)&&(a._setSettings(g),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=bn.MOCK_USER;else{y=IE(r.mockUserToken,(s=a._app)===null||s===void 0?void 0:s.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new we(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new bn(b)}a._authCredentials=new jk(new FE(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Di(this.firestore,e,this._query)}}class In{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}}class _i extends Di{constructor(e,t,r){super(e,t,pp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new Ae(e))}withConverter(e){return new _i(this.firestore,e,this._path)}}function vt(a,e,...t){if(a=jt(a),aS("collection","path",e),a instanceof Ad){const r=bt.fromString(e,...t);return Zw(r),new _i(a,null,r)}{if(!(a instanceof In||a instanceof _i))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(bt.fromString(e,...t));return Zw(r),new _i(a.firestore,null,r)}}function Kn(a,e,...t){if(a=jt(a),arguments.length===1&&(e=HE.newId()),aS("doc","path",e),a instanceof Ad){const r=bt.fromString(e,...t);return Xw(r),new In(a,null,new Ae(r))}{if(!(a instanceof In||a instanceof _i))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(bt.fromString(e,...t));return Xw(r),new In(a.firestore,a instanceof _i?a.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="AsyncQueue";class nb{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new OT(this,"async_queue_retry"),this.Su=()=>{const r=ig();r&&_e(tb,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=ig();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=ig();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Ta;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!$o(e))throw e;_e(tb,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(u){let m=u.message||"";return u.stack&&(m=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),m}(r);throw Aa("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=kp.createAndSchedule(this,e,t,r,l=>this.Fu(l));return this.fu.push(s),s}Du(){this.gu&&Me()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Yo extends Ad{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new nb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nb(e),this._firestoreClient=void 0,await e}}}function AD(a,e){const t=typeof a=="object"?a:cp(),r=typeof a=="string"?a:Kh,s=md(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const l=AE("firestore");l&&CD(s,...l)}return s}function Mp(a){if(a._terminated)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||RD(a),a._firestoreClient}function RD(a){var e,t,r;const s=a._freezeSettings(),l=function(m,g,y,v){return new Xk(m,g,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,rS(v.experimentalLongPollingOptions),v.useFetchStreams)}(a._databaseId,((e=a._app)===null||e===void 0?void 0:e.options.appId)||"",a._persistenceKey,s);a._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(a._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),a._firestoreClient=new wD(a._authCredentials,a._appCheckCredentials,a._queue,l,a._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bo(mn.fromBase64String(e))}catch(t){throw new we(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bo(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==s[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=/^__.*__$/;class ID{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bc(e,this.data,t,this.fieldTransforms)}}class sS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oS(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me()}}class Up{constructor(e,t,r,s,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Up(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return nd(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(oS(this.Lu)&&kD.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class ND{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Td(e)}ju(e,t,r,s=!1){return new Up({Lu:e,methodName:t,zu:r,path:fn.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Id(a){const e=a._freezeSettings(),t=Td(a._databaseId);return new ND(a._databaseId,!!e.ignoreUndefinedProperties,t)}function lS(a,e,t,r,s,l={}){const u=a.ju(l.merge||l.mergeFields?2:0,e,t,s);Lp("Data must be an object, but it was:",u,r);const m=cS(r,u);let g,y;if(l.merge)g=new Gn(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const T=Bg(e,b,t);if(!u.contains(T))throw new we(ce.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);hS(v,T)||v.push(T)}g=new Gn(v),y=u.fieldTransforms.filter(b=>g.covers(b.field))}else g=null,y=u.fieldTransforms;return new ID(new Pn(m),g,y)}class Nd extends kd{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nd}}class Vp extends kd{_toFieldTransform(e){return new TI(e.path,new Nc)}isEqual(e){return e instanceof Vp}}function DD(a,e,t,r){const s=a.ju(1,e,t);Lp("Data must be an object, but it was:",s,r);const l=[],u=Pn.empty();Ii(r,(g,y)=>{const v=Bp(e,g,t);y=jt(y);const b=s.Uu(v);if(y instanceof Nd)l.push(v);else{const T=Hc(y,b);T!=null&&(l.push(v),u.set(v,T))}});const m=new Gn(l);return new sS(u,m,s.fieldTransforms)}function jD(a,e,t,r,s,l){const u=a.ju(1,e,t),m=[Bg(e,r,t)],g=[s];if(l.length%2!=0)throw new we(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)m.push(Bg(e,l[T])),g.push(l[T+1]);const y=[],v=Pn.empty();for(let T=m.length-1;T>=0;--T)if(!hS(y,m[T])){const C=m[T];let R=g[T];R=jt(R);const S=u.Uu(C);if(R instanceof Nd)y.push(C);else{const x=Hc(R,S);x!=null&&(y.push(C),v.set(C,x))}}const b=new Gn(y);return new sS(v,b,u.fieldTransforms)}function MD(a,e,t,r=!1){return Hc(t,a.ju(r?4:3,e))}function Hc(a,e){if(uS(a=jt(a)))return Lp("Unsupported field value:",e,a),cS(a,e);if(a instanceof kd)return function(r,s){if(!oS(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(s);l&&s.fieldTransforms.push(l)}(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const l=[];let u=0;for(const m of r){let g=Hc(m,s.Ku(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}}(a,e)}return function(r,s){if((r=jt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Dt.fromDate(r);return{timestampValue:Zh(s.serializer,l)}}if(r instanceof Dt){const l=new Dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zh(s.serializer,l)}}if(r instanceof Op)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bo)return{bytesValue:ST(s.serializer,r._byteString)};if(r instanceof In){const l=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw s.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:wp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Pp)return function(u,m){return{mapValue:{fields:{[ZE]:{stringValue:JE},[Qh]:{arrayValue:{values:u.toArray().map(y=>{if(typeof y!="number")throw m.Wu("VectorValues must only contain numeric values.");return yp(m.serializer,y)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${Cd(r)}`)}(a,e)}function cS(a,e){const t={};return $E(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(a,(r,s)=>{const l=Hc(s,e.qu(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function uS(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof Dt||a instanceof Op||a instanceof Bo||a instanceof In||a instanceof kd||a instanceof Pp)}function Lp(a,e,t){if(!uS(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=Cd(t);throw r==="an object"?e.Wu(a+" a custom object"):e.Wu(a+" "+r)}}function Bg(a,e,t){if((e=jt(e))instanceof Rd)return e._internalPath;if(typeof e=="string")return Bp(a,e);throw nd("Field path arguments must be of type string or ",a,!1,void 0,t)}const OD=new RegExp("[~\\*/\\[\\]]");function Bp(a,e,t){if(e.search(OD)>=0)throw nd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,t);try{return new Rd(...e.split("."))._internalPath}catch{throw nd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,t)}}function nd(a,e,t,r,s){const l=r&&!r.isEmpty(),u=s!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${r}`),u&&(g+=` in document ${s}`),g+=")"),new we(ce.INVALID_ARGUMENT,m+a+g)}function hS(a,e){return a.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,t,r,s,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class PD extends dS{data(){return super.data()}}function Dd(a,e){return typeof e=="string"?Bp(a,e):e instanceof Rd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new we(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zp{}class Fp extends zp{}function ka(a,e,...t){let r=[];e instanceof zp&&r.push(e),r=r.concat(t),function(l){const u=l.filter(g=>g instanceof qp).length,m=l.filter(g=>g instanceof jd).length;if(u>1||u>0&&m>0)throw new we(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)a=s._apply(a);return a}class jd extends Fp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new jd(e,t,r)}_apply(e){const t=this._parse(e);return fS(e._query,t),new Di(e.firestore,e.converter,Ig(e._query,t))}_parse(e){const t=Id(e.firestore);return function(l,u,m,g,y,v,b){let T;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new we(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){ib(b,v);const R=[];for(const S of b)R.push(ab(g,l,S));T={arrayValue:{values:R}}}else T=ab(g,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||ib(b,v),T=MD(m,u,b,v==="in"||v==="not-in");return Gt.create(y,v,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ri(a,e,t){const r=e,s=Dd("where",a);return jd._create(s,r,t)}class qp extends zp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qp(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:yr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,l){let u=s;const m=l.getFlattenedFilters();for(const g of m)fS(u,g),u=Ig(u,g)}(e._query,t),new Di(e.firestore,e.converter,Ig(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hp extends Fp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hp(e,t)}_apply(e){const t=function(s,l,u){if(s.startAt!==null)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ic(l,u)}(e._query,this._field,this._direction);return new Di(e.firestore,e.converter,function(s,l){const u=s.explicitOrderBy.concat([l]);return new Ko(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function Ia(a,e="asc"){const t=e,r=Dd("orderBy",a);return Hp._create(r,t)}class Gp extends Fp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Gp(e,t,r)}_apply(e){return new Di(e.firestore,e.converter,Wh(e._query,this._limit,this._limitType))}}function rb(a){return Gp._create("limit",a,"F")}function ab(a,e,t){if(typeof(t=jt(t))=="string"){if(t==="")throw new we(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oT(e)&&t.indexOf("/")!==-1)throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(bt.fromString(t));if(!Ae.isDocumentKey(r))throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _w(a,new Ae(r))}if(t instanceof In)return _w(a,t._key);throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cd(t)}.`)}function ib(a,e){if(!Array.isArray(a)||a.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fS(a,e){const t=function(s,l){for(const u of s)for(const m of u.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null}(a.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class VD{convertValue(e,t="none"){switch(xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Me()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ii(e,(s,l)=>{r[s]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,s;const l=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Qh].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>Lt(u.doubleValue));return new Pp(l)}convertGeoPoint(e){return new Op(Lt(e.latitude),Lt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=yd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ac(e));default:return null}}convertTimestamp(e){const t=Ti(e);return new Dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=bt.fromString(e);lt(IT(r));const s=new Rc(r.get(1),r.get(3)),l=new Ae(r.popFirst(5));return s.isEqual(t)||Aa(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(a,e,t){let r;return r=a?a.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gS extends dS{constructor(e,t,r,s,l,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Dd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Uh extends gS{data(e={}){return super.data(e)}}class LD{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new yc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Uh(this._firestore,this._userDataWriter,r.key,r,new yc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,l){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(m=>{const g=new Uh(s._firestore,s._userDataWriter,m.doc.key,m.doc,new yc(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(m=>l||m.type!==3).map(m=>{const g=new Uh(s._firestore,s._userDataWriter,m.doc.key,m.doc,new yc(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter);let y=-1,v=-1;return m.type!==0&&(y=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),v=u.indexOf(m.doc.key)),{type:BD(m.type),doc:g,oldIndex:y,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function BD(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(a){a=zr(a,In);const e=zr(a.firestore,Yo);return TD(Mp(e),a._key).then(t=>FD(e,a,t))}class pS extends VD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}}function sn(a){a=zr(a,Di);const e=zr(a.firestore,Yo),t=Mp(e),r=new pS(e);return UD(a._query),SD(t,a._query).then(s=>new LD(e,r,a,s))}function zD(a,e,t){a=zr(a,In);const r=zr(a.firestore,Yo),s=mS(a.converter,e);return $p(r,[lS(Id(r),"setDoc",a._key,s,a.converter!==null,t).toMutation(a._key,mr.none())])}function Md(a,e,t,...r){a=zr(a,In);const s=zr(a.firestore,Yo),l=Id(s);let u;return u=typeof(e=jt(e))=="string"||e instanceof Rd?jD(l,"updateDoc",a._key,e,t,r):DD(l,"updateDoc",a._key,e),$p(s,[u.toMutation(a._key,mr.exists(!0))])}function wi(a,e){const t=zr(a.firestore,Yo),r=Kn(a),s=mS(a.converter,e);return $p(t,[lS(Id(a.firestore),"addDoc",r._key,s,a.converter!==null,{}).toMutation(r._key,mr.exists(!1))]).then(()=>r)}function $p(a,e){return function(r,s){const l=new Ta;return r.asyncQueue.enqueueAndForget(async()=>hD(await ED(r),s,l)),l.promise}(Mp(a),e)}function FD(a,e,t){const r=t.docs.get(e._key),s=new pS(a);return new gS(a,s,e._key,r,new yc(t.hasPendingWrites,t.fromCache),e.converter)}function Od(){return new Vp("serverTimestamp")}(function(e,t=!0){(function(s){Ho=s})(xs),vs(new bi("firestore",(r,{instanceIdentifier:s,options:l})=>{const u=r.getProvider("app").getImmediate(),m=new Yo(new Mk(r.getProvider("auth-internal")),new Uk(u,r.getProvider("app-check-internal")),function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new we(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rc(y.options.projectId,v)}(u,s),u);return l=Object.assign({useFetchStreams:t},l),m._setSettings(l),m},"PUBLIC").setMultipleInstances(!0)),Pr(ow,lw,e),Pr(ow,lw,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="firebasestorage.googleapis.com",vS="storageBucket",qD=2*60*1e3,HD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends Hr{constructor(e,t,r=0){super(og(e),`Firebase Storage: ${t} (${og(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return og(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Mt;(function(a){a.UNKNOWN="unknown",a.OBJECT_NOT_FOUND="object-not-found",a.BUCKET_NOT_FOUND="bucket-not-found",a.PROJECT_NOT_FOUND="project-not-found",a.QUOTA_EXCEEDED="quota-exceeded",a.UNAUTHENTICATED="unauthenticated",a.UNAUTHORIZED="unauthorized",a.UNAUTHORIZED_APP="unauthorized-app",a.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",a.INVALID_CHECKSUM="invalid-checksum",a.CANCELED="canceled",a.INVALID_EVENT_NAME="invalid-event-name",a.INVALID_URL="invalid-url",a.INVALID_DEFAULT_BUCKET="invalid-default-bucket",a.NO_DEFAULT_BUCKET="no-default-bucket",a.CANNOT_SLICE_BLOB="cannot-slice-blob",a.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",a.NO_DOWNLOAD_URL="no-download-url",a.INVALID_ARGUMENT="invalid-argument",a.INVALID_ARGUMENT_COUNT="invalid-argument-count",a.APP_DELETED="app-deleted",a.INVALID_ROOT_OPERATION="invalid-root-operation",a.INVALID_FORMAT="invalid-format",a.INTERNAL_ERROR="internal-error",a.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Mt||(Mt={}));function og(a){return"storage/"+a}function Kp(){const a="An unknown error occurred, please check the error payload for server response.";return new Ot(Mt.UNKNOWN,a)}function GD(a){return new Ot(Mt.OBJECT_NOT_FOUND,"Object '"+a+"' does not exist.")}function $D(a){return new Ot(Mt.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function KD(){const a="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(Mt.UNAUTHENTICATED,a)}function QD(){return new Ot(Mt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function YD(a){return new Ot(Mt.UNAUTHORIZED,"User does not have permission to access '"+a+"'.")}function WD(){return new Ot(Mt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function XD(){return new Ot(Mt.CANCELED,"User canceled the upload/download.")}function ZD(a){return new Ot(Mt.INVALID_URL,"Invalid URL '"+a+"'.")}function JD(a){return new Ot(Mt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+a+"'.")}function e2(){return new Ot(Mt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vS+"' property when initializing the app?")}function t2(){return new Ot(Mt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function n2(){return new Ot(Mt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function r2(a){return new Ot(Mt.UNSUPPORTED_ENVIRONMENT,`${a} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zg(a){return new Ot(Mt.INVALID_ARGUMENT,a)}function _S(){return new Ot(Mt.APP_DELETED,"The Firebase app was deleted.")}function a2(a){return new Ot(Mt.INVALID_ROOT_OPERATION,"The operation '"+a+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ec(a,e){return new Ot(Mt.INVALID_FORMAT,"String does not match format '"+a+"': "+e)}function cc(a){throw new Ot(Mt.INTERNAL_ERROR,"Internal error: "+a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=$n.makeFromUrl(e,t)}catch{return new $n(e,"")}if(r.path==="")return r;throw JD(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function l(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const u="(/(.*))?$",m=new RegExp("^gs://"+s+u,"i"),g={bucket:1,path:3};function y(re){re.path_=decodeURIComponent(re.path)}const v="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",C=new RegExp(`^https?://${b}/${v}/b/${s}/o${T}`,"i"),R={bucket:1,path:3},S=t===yS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",I=new RegExp(`^https?://${S}/${s}/${x}`,"i"),G=[{regex:m,indices:g,postModify:l},{regex:C,indices:R,postModify:y},{regex:I,indices:{bucket:1,path:2},postModify:y}];for(let re=0;re<G.length;re++){const oe=G[re],de=oe.regex.exec(e);if(de){const M=de[oe.indices.bucket];let N=de[oe.indices.path];N||(N=""),r=new $n(M,N),oe.postModify(r);break}}if(r==null)throw ZD(e);return r}}class i2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(a,e,t){let r=1,s=null,l=null,u=!1,m=0;function g(){return m===2}let y=!1;function v(...x){y||(y=!0,e.apply(null,x))}function b(x){s=setTimeout(()=>{s=null,a(C,g())},x)}function T(){l&&clearTimeout(l)}function C(x,...I){if(y){T();return}if(x){T(),v.call(null,x,...I);return}if(g()||u){T(),v.call(null,x,...I);return}r<64&&(r*=2);let G;m===1?(m=2,G=0):G=(r+Math.random())*1e3,b(G)}let R=!1;function S(x){R||(R=!0,T(),!y&&(s!==null?(x||(m=2),clearTimeout(s),b(0)):x||(m=1)))}return b(0),l=setTimeout(()=>{u=!0,S(!0)},t),S}function o2(a){a(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(a){return a!==void 0}function c2(a){return typeof a=="object"&&!Array.isArray(a)}function Qp(a){return typeof a=="string"||a instanceof String}function sb(a){return Yp()&&a instanceof Blob}function Yp(){return typeof Blob<"u"}function ob(a,e,t,r){if(r<e)throw zg(`Invalid value for '${a}'. Expected ${e} or greater.`);if(r>t)throw zg(`Invalid value for '${a}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(a,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${a}`}function wS(a){const e=encodeURIComponent;let t="?";for(const r in a)if(a.hasOwnProperty(r)){const s=e(r)+"="+e(a[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var ps;(function(a){a[a.NO_ERROR=0]="NO_ERROR",a[a.NETWORK_ERROR=1]="NETWORK_ERROR",a[a.ABORT=2]="ABORT"})(ps||(ps={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(a,e){const t=a>=500&&a<600,s=[408,429].indexOf(a)!==-1,l=e.indexOf(a)!==-1;return t||s||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t,r,s,l,u,m,g,y,v,b,T=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=m,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=b,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,R)=>{this.resolve_=C,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new xh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=m=>{const g=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const m=l.getErrorCode()===ps.NO_ERROR,g=l.getStatus();if(!m||u2(g,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===ps.ABORT;r(!1,new xh(!1,null,v));return}const y=this.successCodes_.indexOf(g)!==-1;r(!0,new xh(y,l))})},t=(r,s)=>{const l=this.resolve_,u=this.reject_,m=s.connection;if(s.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());l2(g)?l(g):l()}catch(g){u(g)}else if(m!==null){const g=Kp();g.serverResponse=m.getErrorText(),this.errorCallback_?u(this.errorCallback_(m,g)):u(g)}else if(s.canceled){const g=this.appDelete_?_S():XD();u(g)}else{const g=WD();u(g)}};this.canceled_?t(!1,new xh(!1,null,!0)):this.backoffId_=s2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&o2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function d2(a,e){e!==null&&e.length>0&&(a.Authorization="Firebase "+e)}function f2(a,e){a["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function m2(a,e){e&&(a["X-Firebase-GMPID"]=e)}function g2(a,e){e!==null&&(a["X-Firebase-AppCheck"]=e)}function p2(a,e,t,r,s,l,u=!0){const m=wS(a.urlParams),g=a.url+m,y=Object.assign({},a.headers);return m2(y,e),d2(y,t),f2(y,l),g2(y,r),new h2(g,a.method,y,a.body,a.successCodes,a.additionalRetryCodes,a.handler,a.errorHandler,a.timeout,a.progressCallback,s,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function v2(...a){const e=y2();if(e!==void 0){const t=new e;for(let r=0;r<a.length;r++)t.append(a[r]);return t.getBlob()}else{if(Yp())return new Blob(a);throw new Ot(Mt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _2(a,e,t){return a.webkitSlice?a.webkitSlice(e,t):a.mozSlice?a.mozSlice(e,t):a.slice?a.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(a){if(typeof atob>"u")throw r2("base-64");return atob(a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lg{constructor(e,t){this.data=e,this.contentType=t||null}}function b2(a,e){switch(a){case Or.RAW:return new lg(bS(e));case Or.BASE64:case Or.BASE64URL:return new lg(ES(a,e));case Or.DATA_URL:return new lg(T2(e),S2(e))}throw Kp()}function bS(a){const e=[];for(let t=0;t<a.length;t++){let r=a.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<a.length-1&&(a.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=r,u=a.charCodeAt(++t);r=65536|(l&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function E2(a){let e;try{e=decodeURIComponent(a)}catch{throw Ec(Or.DATA_URL,"Malformed data URL.")}return bS(e)}function ES(a,e){switch(a){case Or.BASE64:{const s=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(s||l)throw Ec(a,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Or.BASE64URL:{const s=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(s||l)throw Ec(a,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=w2(e)}catch(s){throw s.message.includes("polyfill")?s:Ec(a,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class TS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ec(Or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=x2(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function T2(a){const e=new TS(a);return e.base64?ES(Or.BASE64,e.rest):E2(e.rest)}function S2(a){return new TS(a).contentType}function x2(a,e){return a.length>=e.length?a.substring(a.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t){let r=0,s="";sb(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(sb(this.data_)){const r=this.data_,s=_2(r,e,t);return s===null?null:new di(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new di(r,!0)}}static getBlob(...e){if(Yp()){const t=e.map(r=>r instanceof di?r.data_:r);return new di(v2.apply(null,t))}else{const t=e.map(u=>Qp(u)?b2(Or.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let l=0;return t.forEach(u=>{for(let m=0;m<u.length;m++)s[l++]=u[m]}),new di(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(a){let e;try{e=JSON.parse(a)}catch{return null}return c2(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(a){if(a.length===0)return null;const e=a.lastIndexOf("/");return e===-1?"":a.slice(0,e)}function A2(a,e){const t=e.split("/").filter(r=>r.length>0).join("/");return a.length===0?t:a+"/"+t}function xS(a){const e=a.lastIndexOf("/",a.length-2);return e===-1?a:a.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(a,e){return e}class kn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||R2}}let Ch=null;function k2(a){return!Qp(a)||a.length<2?a:xS(a)}function CS(){if(Ch)return Ch;const a=[];a.push(new kn("bucket")),a.push(new kn("generation")),a.push(new kn("metageneration")),a.push(new kn("name","fullPath",!0));function e(l,u){return k2(u)}const t=new kn("name");t.xform=e,a.push(t);function r(l,u){return u!==void 0?Number(u):u}const s=new kn("size");return s.xform=r,a.push(s),a.push(new kn("timeCreated")),a.push(new kn("updated")),a.push(new kn("md5Hash",null,!0)),a.push(new kn("cacheControl",null,!0)),a.push(new kn("contentDisposition",null,!0)),a.push(new kn("contentEncoding",null,!0)),a.push(new kn("contentLanguage",null,!0)),a.push(new kn("contentType",null,!0)),a.push(new kn("metadata","customMetadata",!0)),Ch=a,Ch}function I2(a,e){function t(){const r=a.bucket,s=a.fullPath,l=new $n(r,s);return e._makeStorageReference(l)}Object.defineProperty(a,"ref",{get:t})}function N2(a,e,t){const r={};r.type="file";const s=t.length;for(let l=0;l<s;l++){const u=t[l];r[u.local]=u.xform(r,e[u.server])}return I2(r,a),r}function AS(a,e,t){const r=SS(e);return r===null?null:N2(a,r,t)}function D2(a,e,t,r){const s=SS(e);if(s===null||!Qp(s.downloadTokens))return null;const l=s.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(y=>{const v=a.bucket,b=a.fullPath,T="/b/"+u(v)+"/o/"+u(b),C=Wp(T,t,r),R=wS({alt:"media",token:y});return C+R})[0]}function j2(a,e){const t={},r=e.length;for(let s=0;s<r;s++){const l=e[s];l.writable&&(t[l.server]=a[l.local])}return JSON.stringify(t)}class RS{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(a){if(!a)throw Kp()}function M2(a,e){function t(r,s){const l=AS(a,s,e);return kS(l!==null),l}return t}function O2(a,e){function t(r,s){const l=AS(a,s,e);return kS(l!==null),D2(l,s,a.host,a._protocol)}return t}function IS(a){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=QD():s=KD():t.getStatus()===402?s=$D(a.bucket):t.getStatus()===403?s=YD(a.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function P2(a){const e=IS(a);function t(r,s){let l=e(r,s);return r.getStatus()===404&&(l=GD(a.path)),l.serverResponse=s.serverResponse,l}return t}function U2(a,e,t){const r=e.fullServerUrl(),s=Wp(r,a.host,a._protocol),l="GET",u=a.maxOperationRetryTime,m=new RS(s,l,O2(a,t),u);return m.errorHandler=P2(e),m}function V2(a,e){return a&&a.contentType||e&&e.type()||"application/octet-stream"}function L2(a,e,t){const r=Object.assign({},t);return r.fullPath=a.path,r.size=e.size(),r.contentType||(r.contentType=V2(null,e)),r}function B2(a,e,t,r,s){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function m(){let G="";for(let re=0;re<2;re++)G=G+Math.random().toString().slice(2);return G}const g=m();u["Content-Type"]="multipart/related; boundary="+g;const y=L2(e,r,s),v=j2(y,t),b="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+g+"--",C=di.getBlob(b,r,T);if(C===null)throw t2();const R={name:y.fullPath},S=Wp(l,a.host,a._protocol),x="POST",I=a.maxUploadRetryTime,B=new RS(S,x,M2(a,t),I);return B.urlParams=R,B.headers=u,B.body=C.uploadData(),B.errorHandler=IS(e),B}class z2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ps.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ps.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ps.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw cc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const l in s)s.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,s[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class F2 extends z2{initXhr(){this.xhr_.responseType="text"}}function NS(){return new F2}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t){this._service=e,t instanceof $n?this._location=t:this._location=$n.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new bs(e,t)}get root(){const e=new $n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xS(this._location.path)}get storage(){return this._service}get parent(){const e=C2(this._location.path);if(e===null)return null;const t=new $n(this._location.bucket,e);return new bs(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw a2(e)}}function q2(a,e,t){a._throwIfRoot("uploadBytes");const r=B2(a.storage,a._location,CS(),new di(e,!0),t);return a.storage.makeRequestWithTokens(r,NS).then(s=>({metadata:s,ref:a}))}function H2(a){a._throwIfRoot("getDownloadURL");const e=U2(a.storage,a._location,CS());return a.storage.makeRequestWithTokens(e,NS).then(t=>{if(t===null)throw n2();return t})}function G2(a,e){const t=A2(a._location.path,e),r=new $n(a._location.bucket,t);return new bs(a.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(a){return/^[A-Za-z]+:\/\//.test(a)}function K2(a,e){return new bs(a,e)}function DS(a,e){if(a instanceof Xp){const t=a;if(t._bucket==null)throw e2();const r=new bs(t,t._bucket);return e!=null?DS(r,e):r}else return e!==void 0?G2(a,e):a}function Q2(a,e){if(e&&$2(e)){if(a instanceof Xp)return K2(a,e);throw zg("To use ref(service, url), the first argument must be a Storage instance.")}else return DS(a,e)}function lb(a,e){const t=e==null?void 0:e[vS];return t==null?null:$n.makeFromBucketSpec(t,a)}function Y2(a,e,t,r={}){a.host=`${e}:${t}`,a._protocol="http";const{mockUserToken:s}=r;s&&(a._overrideAuthToken=typeof s=="string"?s:IE(s,a.app.options.projectId))}class Xp{constructor(e,t,r,s,l){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=l,this._bucket=null,this._host=yS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qD,this._maxUploadRetryTime=HD,this._requests=new Set,s!=null?this._bucket=$n.makeFromBucketSpec(s,this._host):this._bucket=lb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$n.makeFromBucketSpec(this._url,e):this._bucket=lb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ob("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ob("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(On(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bs(this,e)}_makeRequest(e,t,r,s,l=!0){if(this._deleted)return new i2(_S());{const u=p2(e,this._appId,r,s,t,this._firebaseVersion,l);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const cb="@firebase/storage",ub="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="storage";function MS(a,e,t){return a=jt(a),q2(a,e,t)}function OS(a){return a=jt(a),H2(a)}function PS(a,e){return a=jt(a),Q2(a,e)}function W2(a=cp(),e){a=jt(a);const r=md(a,jS).getImmediate({identifier:e}),s=AE("storage");return s&&X2(r,...s),r}function X2(a,e,t,r={}){Y2(a,e,t,r)}function Z2(a,{instanceIdentifier:e}){const t=a.getProvider("app").getImmediate(),r=a.getProvider("auth-internal"),s=a.getProvider("app-check-internal");return new Xp(t,r,s,e,xs)}function J2(){vs(new bi(jS,Z2,"PUBLIC").setMultipleInstances(!0)),Pr(cb,ub,""),Pr(cb,ub,"esm2017")}J2();function Zp(a,e){var t={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&e.indexOf(r)<0&&(t[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(a);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(a,r[s])&&(t[r[s]]=a[r[s]]);return t}function US(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ej=US,VS=new Vc("auth","Firebase",US());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd=new op("@firebase/auth");function tj(a,...e){rd.logLevel<=Ye.WARN&&rd.warn(`Auth (${xs}): ${a}`,...e)}function Vh(a,...e){rd.logLevel<=Ye.ERROR&&rd.error(`Auth (${xs}): ${a}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(a,...e){throw ey(a,...e)}function gr(a,...e){return ey(a,...e)}function Jp(a,e,t){const r=Object.assign(Object.assign({},ej()),{[e]:t});return new Vc("auth","Firebase",r).create(e,{appName:a.name})}function Sa(a){return Jp(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nj(a,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&sr(a,"argument-error"),Jp(a,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ey(a,...e){if(typeof a!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=a.name),a._errorFactory.create(t,...r)}return VS.create(a,...e)}function De(a,e,...t){if(!a)throw ey(e,...t)}function wa(a){const e="INTERNAL ASSERTION FAILED: "+a;throw Vh(e),new Error(e)}function Da(a,e){a||wa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.href)||""}function rj(){return hb()==="http:"||hb()==="https:"}function hb(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rj()||cR()||"connection"in navigator)?navigator.onLine:!0}function ij(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Da(t>e,"Short delay should be less than long delay!"),this.isMobile=sR()||uR()}get(){return aj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(a,e){Da(a.emulator,"Emulator should always be set here");const{url:t}=a.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lj=new Gc(3e4,6e4);function Ma(a,e){return a.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:a.tenantId}):e}async function Gr(a,e,t,r,s={}){return BS(a,s,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const m=Lc(Object.assign({key:a.config.apiKey},u)).slice(1),g=await a._getAdditionalHeaders();g["Content-Type"]="application/json",a.languageCode&&(g["X-Firebase-Locale"]=a.languageCode);const y=Object.assign({method:e,headers:g},l);return lR()||(y.referrerPolicy="no-referrer"),LS.fetch()(await zS(a,a.config.apiHost,t,m),y)})}async function BS(a,e,t){a._canInitEmulator=!1;const r=Object.assign(Object.assign({},sj),e);try{const s=new uj(a),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Ah(a,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const m=l.ok?u.errorMessage:u.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ah(a,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Ah(a,"email-already-in-use",u);if(g==="USER_DISABLED")throw Ah(a,"user-disabled",u);const v=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Jp(a,v,y);sr(a,v)}}catch(s){if(s instanceof Hr)throw s;sr(a,"network-request-failed",{message:String(s)})}}async function $c(a,e,t,r,s={}){const l=await Gr(a,e,t,r,s);return"mfaPendingCredential"in l&&sr(a,"multi-factor-auth-required",{_serverResponse:l}),l}async function zS(a,e,t,r){const s=`${e}${t}?${r}`,l=a,u=l.config.emulator?ty(a.config,s):`${a.config.apiScheme}://${s}`;return oj.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function cj(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(gr(this.auth,"network-request-failed")),lj.get())})}}function Ah(a,e,t){const r={appName:a.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=gr(a,e,r);return s.customData._tokenResponse=t,s}function db(a){return a!==void 0&&a.enterprise!==void 0}class hj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return cj(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dj(a,e){return Gr(a,"GET","/v2/recaptchaConfig",Ma(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fj(a,e){return Gr(a,"POST","/v1/accounts:delete",e)}async function ad(a,e){return Gr(a,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mj(a,e=!1){const t=jt(a),r=await t.getIdToken(e),s=ny(r);De(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:s,token:r,authTime:Tc(cg(s.auth_time)),issuedAtTime:Tc(cg(s.iat)),expirationTime:Tc(cg(s.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function cg(a){return Number(a)*1e3}function ny(a){const[e,t,r]=a.split(".");if(e===void 0||t===void 0||r===void 0)return Vh("JWT malformed, contained fewer than 3 sections"),null;try{const s=xE(t);return s?JSON.parse(s):(Vh("Failed to decode base64 JWT payload"),null)}catch(s){return Vh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function fb(a){const e=ny(a);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(a,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Hr&&gj(r)&&a.auth.currentUser===a&&await a.auth.signOut(),r}}function gj({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tc(this.lastLoginAt),this.creationTime=Tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function id(a){var e;const t=a.auth,r=await a.getIdToken(),s=await zo(a,ad(t,{idToken:r}));De(s==null?void 0:s.users.length,t,"internal-error");const l=s.users[0];a._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?FS(l.providerUserInfo):[],m=vj(a.providerData,u),g=a.isAnonymous,y=!(a.email&&l.passwordHash)&&!(m!=null&&m.length),v=g?y:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:m,metadata:new qg(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(a,b)}async function yj(a){const e=jt(a);await id(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vj(a,e){return[...a.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function FS(a){return a.map(e=>{var{providerId:t}=e,r=Zp(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _j(a,e){const t=await BS(a,{},async()=>{const r=Lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=a.config,u=await zS(a,s,"/v1/token",`key=${l}`),m=await a._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",LS.fetch()(u,{method:"POST",headers:m,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function wj(a,e){return Gr(a,"POST","/v2/accounts:revokeToken",Ma(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=fb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:l}=await _j(e,t);this.updateTokensAndExpiration(r,s,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:l}=t,u=new No;return r&&(De(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(De(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),l&&(De(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return wa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(a,e){De(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class fr{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,l=Zp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new qg(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await zo(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return mj(this,e)}reload(){return yj(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await id(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(Sa(this.auth));const e=await this.getIdToken();return await zo(this,fj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,l,u,m,g,y,v;const b=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(s=t.email)!==null&&s!==void 0?s:void 0,C=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,R=(u=t.photoURL)!==null&&u!==void 0?u:void 0,S=(m=t.tenantId)!==null&&m!==void 0?m:void 0,x=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,I=(y=t.createdAt)!==null&&y!==void 0?y:void 0,B=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:G,emailVerified:re,isAnonymous:oe,providerData:de,stsTokenManager:M}=t;De(G&&M,e,"internal-error");const N=No.fromJSON(this.name,M);De(typeof G=="string",e,"internal-error"),hi(b,e.name),hi(T,e.name),De(typeof re=="boolean",e,"internal-error"),De(typeof oe=="boolean",e,"internal-error"),hi(C,e.name),hi(R,e.name),hi(S,e.name),hi(x,e.name),hi(I,e.name),hi(B,e.name);const j=new fr({uid:G,auth:e,email:T,emailVerified:re,displayName:b,isAnonymous:oe,photoURL:R,phoneNumber:C,tenantId:S,stsTokenManager:N,createdAt:I,lastLoginAt:B});return de&&Array.isArray(de)&&(j.providerData=de.map(U=>Object.assign({},U))),x&&(j._redirectEventId=x),j}static async _fromIdTokenResponse(e,t,r=!1){const s=new No;s.updateFromServerResponse(t);const l=new fr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await id(l),l}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];De(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?FS(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),m=new No;m.updateFromIdToken(r);const g=new fr({uid:s.localId,auth:e,stsTokenManager:m,isAnonymous:u}),y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new qg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=new Map;function ba(a){Da(a instanceof Function,"Expected a class definition");let e=mb.get(a);return e?(Da(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,mb.set(a,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qS.type="NONE";const gb=qS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(a,e,t){return`firebase:${a}:${e}:${t}`}class Do{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:l}=this.auth;this.fullUserKey=Lh(this.userKey,s.apiKey,l),this.fullPersistenceKey=Lh("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ad(this.auth,{idToken:e}).catch(()=>{});return t?fr._fromGetAccountInfoResponse(this.auth,t,e):null}return fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Do(ba(gb),e,r);const s=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=s[0]||ba(gb);const u=Lh(r,e.config.apiKey,e.name);let m=null;for(const y of t)try{const v=await y._get(u);if(v){let b;if(typeof v=="string"){const T=await ad(e,{idToken:v}).catch(()=>{});if(!T)break;b=await fr._fromGetAccountInfoResponse(e,T,v)}else b=fr._fromJSON(e,v);y!==l&&(m=b),l=y;break}}catch{}const g=s.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Do(l,e,r):(l=g[0],m&&await l._set(u,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new Do(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YS(e))return"Blackberry";if(WS(e))return"Webos";if(GS(e))return"Safari";if((e.includes("chrome/")||$S(e))&&!e.includes("edge/"))return"Chrome";if(QS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=a.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function HS(a=Tn()){return/firefox\//i.test(a)}function GS(a=Tn()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $S(a=Tn()){return/crios\//i.test(a)}function KS(a=Tn()){return/iemobile/i.test(a)}function QS(a=Tn()){return/android/i.test(a)}function YS(a=Tn()){return/blackberry/i.test(a)}function WS(a=Tn()){return/webos/i.test(a)}function ry(a=Tn()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function bj(a=Tn()){var e;return ry(a)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ej(){return hR()&&document.documentMode===10}function XS(a=Tn()){return ry(a)||QS(a)||WS(a)||YS(a)||/windows phone/i.test(a)||KS(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(a,e=[]){let t;switch(a){case"Browser":t=pb(Tn());break;case"Worker":t=`${pb(Tn())}-${a}`;break;default:t=a}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,m)=>{try{const g=e(l);u(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(a,e={}){return Gr(a,"GET","/v2/passwordPolicy",Ma(a,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=6;class Cj{constructor(e){var t,r,s,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:xj,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,l,u,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(s=g.containsLowercaseLetter)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(u=g.containsNumericCharacter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yb(this),this.idTokenSubscription=new yb(this),this.beforeStateQueue=new Tj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ba(t)),this._initializationPromise=this.queue(async()=>{var r,s,l;if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ad(this,{idToken:e}),r=await fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(On(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===m)&&(g!=null&&g.user)&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await id(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ij()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(Sa(this));const t=e?jt(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(Sa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(Sa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ba(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Sj(this),t=new Cj(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await wj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ba(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[ba(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(m,this,"internal-error"),m.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,s);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(On(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&tj(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Oa(a){return jt(a)}class yb{constructor(e){this.auth=e,this.observer=null,this.addObserver=_R(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rj(a){Pd=a}function JS(a){return Pd.loadJS(a)}function kj(){return Pd.recaptchaEnterpriseScript}function Ij(){return Pd.gapiScript}function Nj(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class Dj{constructor(){this.enterprise=new jj}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class jj{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Mj="recaptcha-enterprise",ex="NO_RECAPTCHA";class Oj{constructor(e){this.type=Mj,this.auth=Oa(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,m)=>{dj(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new hj(g);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(g=>{m(g)})})}function s(l,u,m){const g=window.grecaptcha;db(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(ex)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Dj().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(m=>{if(!t&&db(window.grecaptcha))s(m,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=kj();g.length!==0&&(g+=m),JS(g).then(()=>{s(m,l,u)}).catch(y=>{u(y)})}}).catch(m=>{u(m)})})}}async function vb(a,e,t,r=!1,s=!1){const l=new Oj(a);let u;if(s)u=ex;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const m=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:u}):Object.assign(m,{captchaResponse:u}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function sd(a,e,t,r,s){var l;if(!((l=a._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await vb(a,e,t,t==="getOobCode");return r(a,u)}else return r(a,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await vb(a,e,t,t==="getOobCode");return r(a,m)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(a,e){const t=md(a,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(ys(l,e??{}))return s;sr(s,"already-initialized")}return t.initialize({options:e})}function Uj(a,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ba);e!=null&&e.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Vj(a,e,t){const r=Oa(a);De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,l=tx(e),{host:u,port:m}=Lj(e),g=m===null?"":`:${m}`,y={url:`${l}//${u}${g}/`},v=Object.freeze({host:u,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){De(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),De(ys(y,r.config.emulator)&&ys(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Bj()}function tx(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function Lj(a){const e=tx(a),t=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const l=s[1];return{host:l,port:_b(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:_b(u)}}}function _b(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function Bj(){function a(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wa("not implemented")}_getIdTokenResponse(e){return wa("not implemented")}_linkToIdToken(e,t){return wa("not implemented")}_getReauthenticationResolver(e){return wa("not implemented")}}async function zj(a,e){return Gr(a,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fj(a,e){return $c(a,"POST","/v1/accounts:signInWithPassword",Ma(a,e))}async function qj(a,e){return Gr(a,"POST","/v1/accounts:sendOobCode",Ma(a,e))}async function Hj(a,e){return qj(a,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(a,e){return $c(a,"POST","/v1/accounts:signInWithEmailLink",Ma(a,e))}async function $j(a,e){return $c(a,"POST","/v1/accounts:signInWithEmailLink",Ma(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends ay{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Mc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Mc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sd(e,t,"signInWithPassword",Fj);case"emailLink":return Gj(e,{email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sd(e,r,"signUpPassword",zj);case"emailLink":return $j(e,{idToken:t,email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(a,e){return $c(a,"POST","/v1/accounts:signInWithIdp",Ma(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj="http://localhost";class Es extends ay{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Es(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):sr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,l=Zp(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new Es(r,s);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return jo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,jo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jo(e,t)}buildRequest(){const e={requestUri:Kj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Lc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Yj(a){const e=dc(fc(a)).link,t=e?dc(fc(e)).deep_link_id:null,r=dc(fc(a)).deep_link_id;return(r?dc(fc(r)).link:null)||r||t||e||a}class iy{constructor(e){var t,r,s,l,u,m;const g=dc(fc(e)),y=(t=g.apiKey)!==null&&t!==void 0?t:null,v=(r=g.oobCode)!==null&&r!==void 0?r:null,b=Qj((s=g.mode)!==null&&s!==void 0?s:null);De(y&&v&&b,"argument-error"),this.apiKey=y,this.operation=b,this.code=v,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=g.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(m=g.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=Yj(e);try{return new iy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.providerId=Wo.PROVIDER_ID}static credential(e,t){return Mc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=iy.parseLink(t);return De(r,"argument-error"),Mc._fromEmailAndCode(e,r.code,r.tenantId)}}Wo.PROVIDER_ID="password";Wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends sy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Kc{constructor(){super("facebook.com")}static credential(e){return Es._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.FACEBOOK_SIGN_IN_METHOD="facebook.com";_a.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oy=class To extends Kc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Es._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return To.credential(t,r)}catch{return null}}};oy.GOOGLE_SIGN_IN_METHOD="google.com";oy.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends Kc{constructor(){super("github.com")}static credential(e){return Es._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.GITHUB_SIGN_IN_METHOD="github.com";fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Kc{constructor(){super("twitter.com")}static credential(e,t){return Es._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return mi.credential(t,r)}catch{return null}}}mi.TWITTER_SIGN_IN_METHOD="twitter.com";mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wj(a,e){return $c(a,"POST","/v1/accounts:signUp",Ma(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const l=await fr._fromIdTokenResponse(e,r,s),u=wb(r);return new Ts({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=wb(r);return new Ts({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function wb(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends Hr{constructor(e,t,r,s){var l;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,od.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new od(e,t,r,s)}}function nx(a,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(a):t._getIdTokenResponse(a)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?od._fromErrorAndOperation(a,l,e,r):l})}async function Xj(a,e,t=!1){const r=await zo(a,e._linkToIdToken(a.auth,await a.getIdToken()),t);return Ts._forOperation(a,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zj(a,e,t=!1){const{auth:r}=a;if(On(r.app))return Promise.reject(Sa(r));const s="reauthenticate";try{const l=await zo(a,nx(r,s,e,a),t);De(l.idToken,r,"internal-error");const u=ny(l.idToken);De(u,r,"internal-error");const{sub:m}=u;return De(a.uid===m,r,"user-mismatch"),Ts._forOperation(a,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&sr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rx(a,e,t=!1){if(On(a.app))return Promise.reject(Sa(a));const r="signIn",s=await nx(a,r,e),l=await Ts._fromIdTokenResponse(a,r,s);return t||await a._updateCurrentUser(l.user),l}async function Jj(a,e){return rx(Oa(a),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ax(a){const e=Oa(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function eM(a,e,t){const r=Oa(a);await sd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Hj)}async function tM(a,e,t){if(On(a.app))return Promise.reject(Sa(a));const r=Oa(a),u=await sd(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Wj).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&ax(a),g}),m=await Ts._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(m.user),m}function nM(a,e,t){return On(a.app)?Promise.reject(Sa(a)):Jj(jt(a),Wo.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ax(a),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(a,e){return Gr(a,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(a,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=jt(a),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await zo(r,rM(r.auth,l));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const m=r.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=r.displayName,m.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function iM(a,e,t,r){return jt(a).onIdTokenChanged(e,t,r)}function sM(a,e,t){return jt(a).beforeAuthStateChanged(e,t)}function oM(a,e,t,r){return jt(a).onAuthStateChanged(e,t,r)}const ld="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ld,"1"),this.storage.removeItem(ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=1e3,cM=10;class sx extends ix{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,g)=>{this.notifyListeners(u,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);Ej()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,cM):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},lM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sx.type="LOCAL";const uM=sx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox extends ix{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ox.type="SESSION";const lx=ox;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Ud(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:l}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const m=Array.from(u).map(async y=>y(t.origin,l)),g=await hM(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ud.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(a="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return a+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,u;return new Promise((m,g)=>{const y=ly("",20);s.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(b){const T=b;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(T.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function fM(a){Lr().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function mM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gM(){var a;return((a=navigator==null?void 0:navigator.serviceWorker)===null||a===void 0?void 0:a.controller)||null}function pM(){return cx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="firebaseLocalStorageDb",yM=1,cd="firebaseLocalStorage",hx="fbase_key";class Qc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vd(a,e){return a.transaction([cd],e?"readwrite":"readonly").objectStore(cd)}function vM(){const a=indexedDB.deleteDatabase(ux);return new Qc(a).toPromise()}function Hg(){const a=indexedDB.open(ux,yM);return new Promise((e,t)=>{a.addEventListener("error",()=>{t(a.error)}),a.addEventListener("upgradeneeded",()=>{const r=a.result;try{r.createObjectStore(cd,{keyPath:hx})}catch(s){t(s)}}),a.addEventListener("success",async()=>{const r=a.result;r.objectStoreNames.contains(cd)?e(r):(r.close(),await vM(),e(await Hg()))})})}async function bb(a,e,t){const r=Vd(a,!0).put({[hx]:e,value:t});return new Qc(r).toPromise()}async function _M(a,e){const t=Vd(a,!1).get(e),r=await new Qc(t).toPromise();return r===void 0?null:r.value}function Eb(a,e){const t=Vd(a,!0).delete(e);return new Qc(t).toPromise()}const wM=800,bM=3;class dx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>bM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ud._getInstance(pM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await mM(),!this.activeServiceWorker)return;this.sender=new dM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hg();return await bb(e,ld,"1"),await Eb(e,ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>bb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>_M(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Eb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=Vd(s,!1).getAll();return new Qc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dx.type="LOCAL";const EM=dx;new Gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(a,e){return e?ba(e):(De(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy extends ay{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function TM(a){return rx(a.auth,new cy(a),a.bypassAuthState)}function SM(a){const{auth:e,user:t}=a;return De(t,e,"internal-error"),Zj(t,new cy(a),a.bypassAuthState)}async function xM(a){const{auth:e,user:t}=a;return De(t,e,"internal-error"),Xj(t,new cy(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,t,r,s,l=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:l,error:u,type:m}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TM;case"linkViaPopup":case"linkViaRedirect":return xM;case"reauthViaPopup":case"reauthViaRedirect":return SM;default:sr(this.auth,"internal-error")}}resolve(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=new Gc(2e3,1e4);async function gx(a,e,t){if(On(a.app))return Promise.reject(gr(a,"operation-not-supported-in-this-environment"));const r=Oa(a);nj(a,e,sy);const s=fx(r,t);return new gs(r,"signInViaPopup",e,s).executeNotNull()}class gs extends mx{constructor(e,t,r,s,l){super(e,t,s,l),this.provider=r,this.authWindow=null,this.pollId=null,gs.currentPopupAction&&gs.currentPopupAction.cancel(),gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Da(this.filter.length===1,"Popup operations only handle one event");const e=ly();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CM.get())};e()}}gs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="pendingRedirect",Bh=new Map;class RM extends mx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Bh.get(this.auth._key());if(!e){try{const r=await kM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Bh.set(this.auth._key(),e)}return this.bypassAuthState||Bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kM(a,e){const t=DM(e),r=NM(a);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function IM(a,e){Bh.set(a._key(),e)}function NM(a){return ba(a._redirectPersistence)}function DM(a){return Lh(AM,a.config.apiKey,a.name)}async function jM(a,e,t=!1){if(On(a.app))return Promise.reject(Sa(a));const r=Oa(a),s=fx(r,e),u=await new RM(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=10*60*1e3;class OM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!px(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(gr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tb(e))}saveEventToCache(e){this.cachedEventUids.add(Tb(e)),this.lastProcessedEventTime=Date.now()}}function Tb(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function px({type:a,error:e}){return a==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PM(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return px(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UM(a,e={}){return Gr(a,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LM=/^https?/;async function BM(a){if(a.config.emulator)return;const{authorizedDomains:e}=await UM(a);for(const t of e)try{if(zM(t))return}catch{}sr(a,"unauthorized-domain")}function zM(a){const e=Fg(),{protocol:t,hostname:r}=new URL(e);if(a.startsWith("chrome-extension://")){const u=new URL(a);return u.hostname===""&&r===""?t==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!LM.test(t))return!1;if(VM.test(a))return r===a;const s=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=new Gc(3e4,6e4);function Sb(){const a=Lr().___jsl;if(a!=null&&a.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let t=0;t<a.CP.length;t++)a.CP[t]=null}}function qM(a){return new Promise((e,t)=>{var r,s,l;function u(){Sb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sb(),t(gr(a,"network-request-failed"))},timeout:FM.get()})}if(!((s=(r=Lr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((l=Lr().gapi)===null||l===void 0)&&l.load)u();else{const m=Nj("iframefcb");return Lr()[m]=()=>{gapi.load?u():t(gr(a,"network-request-failed"))},JS(`${Ij()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw zh=null,e})}let zh=null;function HM(a){return zh=zh||qM(a),zh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=new Gc(5e3,15e3),$M="__/auth/iframe",KM="emulator/auth/iframe",QM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WM(a){const e=a.config;De(e.authDomain,a,"auth-domain-config-required");const t=e.emulator?ty(e,KM):`https://${a.config.authDomain}/${$M}`,r={apiKey:e.apiKey,appName:a.name,v:xs},s=YM.get(a.config.apiHost);s&&(r.eid=s);const l=a._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Lc(r).slice(1)}`}async function XM(a){const e=await HM(a),t=Lr().gapi;return De(t,a,"internal-error"),e.open({where:document.body,url:WM(a),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QM,dontclear:!0},r=>new Promise(async(s,l)=>{await r.restyle({setHideOnLeave:!1});const u=gr(a,"network-request-failed"),m=Lr().setTimeout(()=>{l(u)},GM.get());function g(){Lr().clearTimeout(m),s(r)}r.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JM=500,eO=600,tO="_blank",nO="http://localhost";class xb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rO(a,e,t,r=JM,s=eO){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g=Object.assign(Object.assign({},ZM),{width:r.toString(),height:s.toString(),top:l,left:u}),y=Tn().toLowerCase();t&&(m=$S(y)?tO:t),HS(y)&&(e=e||nO,g.scrollbars="yes");const v=Object.entries(g).reduce((T,[C,R])=>`${T}${C}=${R},`,"");if(bj(y)&&m!=="_self")return aO(e||"",m),new xb(null);const b=window.open(e||"",m,v);De(b,a,"popup-blocked");try{b.focus()}catch{}return new xb(b)}function aO(a,e){const t=document.createElement("a");t.href=a,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="__/auth/handler",sO="emulator/auth/handler",oO=encodeURIComponent("fac");async function Cb(a,e,t,r,s,l){De(a.config.authDomain,a,"auth-domain-config-required"),De(a.config.apiKey,a,"invalid-api-key");const u={apiKey:a.config.apiKey,appName:a.name,authType:t,redirectUrl:r,v:xs,eventId:s};if(e instanceof sy){e.setDefaultLanguage(a.languageCode),u.providerId=e.providerId||"",vR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))u[v]=b}if(e instanceof Kc){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(u.scopes=v.join(","))}a.tenantId&&(u.tid=a.tenantId);const m=u;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const g=await a._getAppCheckToken(),y=g?`#${oO}=${encodeURIComponent(g)}`:"";return`${lO(a)}?${Lc(m).slice(1)}${y}`}function lO({config:a}){return a.emulator?ty(a,sO):`https://${a.authDomain}/${iO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="webStorageSupport";class cO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lx,this._completeRedirectFn=jM,this._overrideRedirectResult=IM}async _openPopup(e,t,r,s){var l;Da((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Cb(e,t,r,Fg(),s);return rO(e,u,ly())}async _openRedirect(e,t,r,s){await this._originValidation(e);const l=await Cb(e,t,r,Fg(),s);return fM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(Da(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await XM(e),r=new OM(e);return t.register("authEvent",s=>(De(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ug,{type:ug},s=>{var l;const u=(l=s==null?void 0:s[0])===null||l===void 0?void 0:l[ug];u!==void 0&&t(!!u),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XS()||GS()||ry()}}const uO=cO;var Ab="@firebase/auth",Rb="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fO(a){vs(new bi("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=r.options;De(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:u,authDomain:m,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZS(a)},y=new Aj(r,s,l,g);return Uj(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),vs(new bi("auth-internal",e=>{const t=Oa(e.getProvider("auth").getImmediate());return(r=>new hO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pr(Ab,Rb,dO(a)),Pr(Ab,Rb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO=5*60,gO=kE("authIdTokenMaxAge")||mO;let kb=null;const pO=a=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>gO)return;const s=t==null?void 0:t.token;kb!==s&&(kb=s,await fetch(a,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function yO(a=cp()){const e=md(a,"auth");if(e.isInitialized())return e.getImmediate();const t=Pj(a,{popupRedirectResolver:uO,persistence:[EM,uM,lx]}),r=kE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const u=pO(l.toString());sM(t,u,()=>u(t.currentUser)),iM(t,m=>u(m))}}const s=CE("auth");return s&&Vj(t,`http://${s}`),t}function vO(){var a,e;return(e=(a=document.getElementsByTagName("head"))===null||a===void 0?void 0:a[0])!==null&&e!==void 0?e:document}Rj({loadJS(a){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",a),r.onload=e,r.onerror=s=>{const l=gr("internal-error");l.customData=s,t(l)},r.type="text/javascript",r.charset="UTF-8",vO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fO("Browser");const _O={apiKey:"AIzaSyAMKxVJqQyhB726ZIpqzrnlJwlVMEompzI",authDomain:"chocolate-review-web.firebaseapp.com",projectId:"chocolate-review-web",storageBucket:"chocolate-review-web.firebasestorage.app",messagingSenderId:"40760554846",appId:"1:40760554846:web:af7701c50e3a44c13acbcf",measurementId:"G-CQXWMKJDQW"},uy=jE(_O),ze=AD(uy),yx=W2(uy),Xo=yO(uy);new oy;const wO=new _a,hy=vt(ze,"chocolates");vt(ze,"makers");vt(ze,"reviews");const bO=vt(ze,"tags"),dy=async()=>(await sn(hy)).docs.map(e=>({id:e.id,...e.data()})),EO=async a=>{try{const e=await sn(bO),t={};e.docs.forEach(u=>{const m=u.data();t[u.id]=m.name.toLowerCase()});const s=(await sn(hy)).docs.map(u=>({id:u.id,...u.data()})),l=a.toLowerCase();return s.filter(u=>{const m=u.name&&u.name.toLowerCase().includes(l),g=u.maker&&(typeof u.maker=="string"?u.maker.toLowerCase().includes(l):u.maker.name&&u.maker.name.toLowerCase().includes(l)),y=u.origin&&u.origin.toLowerCase().includes(l),v=u.type&&u.type.toLowerCase().includes(l);let b=!1;return u.tagIds&&Array.isArray(u.tagIds)&&(b=u.tagIds.some(T=>t[T]&&t[T].includes(l))),m||g||y||v||b})}catch(e){throw console.error("Error searching chocolates:",e),e}},TO=async(a,e)=>{let t=null;if(e){const s=PS(yx,`chocolate-images/${Date.now()}_${e.name}`);await MS(s,e),t=await OS(s)}return{id:(await wi(hy,{...a,imageUrl:t,createdAt:new Date,updatedAt:new Date,averageRating:0,reviewCount:0})).id,...a,imageUrl:t}},SO=async(a=10)=>{try{const e=ka(vt(ze,"chocolates"),Ri("averageRating",">",0),Ia("averageRating","desc"),Ia("reviewCount","desc"),a(a)),t=await sn(e);return t.empty?Ib(a):t.docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error getting featured chocolates:",e),Ib(a)}},Ib=a=>[{id:"1",name:"Madagascan Dark 72%",maker:"Terroir Artisan",type:"Dark",origin:"Madagascar",cacaoPercentage:72,averageRating:4.8,ratings:186,imageUrl:"/placeholder-chocolate.jpg"},{id:"2",name:"Sea Salt Caramel",maker:"Wild Coast Chocolate",type:"Dark Milk",origin:"Ecuador",cacaoPercentage:55,averageRating:4.9,ratings:203,imageUrl:"/placeholder-chocolate.jpg"},{id:"3",name:"Peruvian Single Origin",maker:"Craft Origins",type:"Dark",origin:"Peru",cacaoPercentage:70,averageRating:4.7,ratings:156,imageUrl:"/placeholder-chocolate.jpg"},{id:"4",name:"Vanilla Bean White",maker:"Alpine Confections",type:"White",origin:"Various",cacaoPercentage:33,averageRating:4.5,ratings:98,imageUrl:"/placeholder-chocolate.jpg"},{id:"5",name:"Hazelnut Crunch",maker:"Artisan Delights",type:"Milk",origin:"Italy",cacaoPercentage:45,averageRating:4.6,ratings:124,imageUrl:"/placeholder-chocolate.jpg"}].slice(0,a),xO=async(a,e)=>{try{const t=PS(yx,`chocolate-images/${a}_${Date.now()}`);await MS(t,e);const r=await OS(t),s=Kn(ze,"chocolates",a);return await Md(s,{imageUrl:r,updatedAt:new Date}),r}catch(t){throw console.error("Error updating chocolate image:",t),t}},CO=async a=>{try{let e;a?e=ka(vt(ze,"chocolates"),Ri(a.field,a.operator,a.value),Ia("averageRating","desc"),rb(100)):e=ka(vt(ze,"chocolates"),Ia("averageRating","desc"),rb(100));const t=await sn(e);return t.empty?Nb(a==null?void 0:a.value):t.docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error getting chocolates by category:",e),Nb(a==null?void 0:a.value)}},Nb=a=>{const e=[{id:"d1",name:"Madagascar 72% Dark",maker:"Terroir Artisan",type:"Dark",origin:"Madagascar",cacaoPercentage:72,averageRating:4.8,ratings:186,imageUrl:"/placeholder-chocolate.jpg"},{id:"d2",name:"Ecuador 85% Dark",maker:"Wild Coast Chocolate",type:"Dark",origin:"Ecuador",cacaoPercentage:85,averageRating:4.6,ratings:142,imageUrl:"/placeholder-chocolate.jpg"},{id:"d3",name:"Venezuela 70% Dark",maker:"Craft Origins",type:"Dark",origin:"Venezuela",cacaoPercentage:70,averageRating:4.7,ratings:163,imageUrl:"/placeholder-chocolate.jpg"}],t=[{id:"m1",name:"Classic Milk Chocolate",maker:"Alpine Confections",type:"Milk",origin:"Various",cacaoPercentage:39,averageRating:4.5,ratings:210,imageUrl:"/placeholder-chocolate.jpg"},{id:"m2",name:"Creamy Milk Hazelnut",maker:"Artisan Delights",type:"Milk",origin:"Italy",cacaoPercentage:42,averageRating:4.7,ratings:178,imageUrl:"/placeholder-chocolate.jpg"},{id:"m3",name:"Toffee Milk Chocolate",maker:"Sweet Traditions",type:"Milk",origin:"Belgium",cacaoPercentage:36,averageRating:4.4,ratings:156,imageUrl:"/placeholder-chocolate.jpg"}],r=[{id:"w1",name:"Vanilla Bean White",maker:"Alpine Confections",type:"White",origin:"Various",cacaoPercentage:33,averageRating:4.5,ratings:98,imageUrl:"/placeholder-chocolate.jpg"},{id:"w2",name:"Raspberry White Chocolate",maker:"Sweet Traditions",type:"White",origin:"Belgium",cacaoPercentage:30,averageRating:4.3,ratings:87,imageUrl:"/placeholder-chocolate.jpg"}],s=[{id:"so1",name:"Peru Single Origin 70%",maker:"Bean Masters",type:"Dark",origin:"Peru",cacaoPercentage:70,averageRating:4.9,ratings:132,imageUrl:"/placeholder-chocolate.jpg"},{id:"so2",name:"Tanzania Single Origin 75%",maker:"Origin Craft",type:"Dark",origin:"Tanzania",cacaoPercentage:75,averageRating:4.7,ratings:105,imageUrl:"/placeholder-chocolate.jpg"},{id:"so3",name:"Dominican Republic Single Origin 65%",maker:"Terroir Artisan",type:"Dark",origin:"Dominican Republic",cacaoPercentage:65,averageRating:4.6,ratings:91,imageUrl:"/placeholder-chocolate.jpg"}],l=[{id:"a1",name:"Small Batch Espresso",maker:"Craft Origins",type:"Dark",origin:"Colombia",cacaoPercentage:68,averageRating:4.8,ratings:76,imageUrl:"/placeholder-chocolate.jpg"},{id:"a2",name:"Handcrafted Sea Salt",maker:"Artisan Delights",type:"Milk",origin:"Ecuador",cacaoPercentage:45,averageRating:4.6,ratings:82,imageUrl:"/placeholder-chocolate.jpg"},{id:"a3",name:"Stone Ground 85%",maker:"Bean Masters",type:"Dark",origin:"Mexico",cacaoPercentage:85,averageRating:4.7,ratings:64,imageUrl:"/placeholder-chocolate.jpg"}];return a==="Dark"||a==="dark"?e:a==="Milk"||a==="milk"?t:a==="White"||a==="white"?r:a==="single-origin"?s:a==="bean-to-bar"?l:[...e.slice(0,1),...t.slice(0,1),...r.slice(0,1),...s.slice(0,1),...l.slice(0,1)]},AO=async a=>{try{const e=ka(vt(ze,"reviews"),Ri("userId","==",a),Ia("createdAt","desc")),t=await sn(e);return t.empty?NO():t.docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting user reviews:",e),e}},RO=async a=>{try{const e={...a,createdAt:Od()},t=await wi(vt(ze,"reviews"),e);return await kO(a.chocolateId),await IO(a.userId),{id:t.id,...e}}catch(e){throw console.error("Error adding review:",e),e}},kO=async a=>{try{const e=ka(vt(ze,"reviews"),Ri("chocolateId","==",a)),t=await sn(e);if(!t.empty){const r=t.docs.map(m=>m.data()),l=r.reduce((m,g)=>m+g.rating,0)/r.length,u=Kn(ze,"chocolates",a);await Md(u,{averageRating:l,reviewCount:r.length,updatedAt:Od()})}}catch(e){throw console.error("Error updating chocolate rating:",e),e}},IO=async a=>{try{const e=ka(vt(ze,"reviews"),Ri("userId","==",a)),r=(await sn(e)).size,s=Kn(ze,"users",a);await Md(s,{reviewCount:r,updatedAt:Od()})}catch(e){console.error("Error updating user review count:",e)}},NO=()=>[{id:"sample1",userId:"currentUser",chocolateId:"1",rating:4,text:"This dark chocolate has a wonderful depth of flavor with notes of cherry and a hint of vanilla. The texture is smooth with a clean snap. I particularly enjoyed the long finish that develops additional complexity over time.",createdAt:{toDate:()=>new Date(Date.now()-7*24*60*60*1e3)},chocolate:{id:"1",name:"Valrhona Guanaja 70%",maker:"Valrhona",imageUrl:"https://placehold.co/300x300?text=Chocolate"}},{id:"sample2",userId:"currentUser",chocolateId:"2",rating:5,text:"Absolutely perfect balance of creaminess and cocoa flavor! This milk chocolate has a silky texture that melts beautifully on the tongue. There are subtle caramel notes and a hint of malt that make it incredibly satisfying. Will definitely purchase again.",createdAt:{toDate:()=>new Date(Date.now()-14*24*60*60*1e3)},chocolate:{id:"2",name:"Lindt Excellence Milk Chocolate",maker:"Lindt & Sprngli",imageUrl:"https://placehold.co/300x300?text=Chocolate"}},{id:"sample3",userId:"currentUser",chocolateId:"3",rating:3,text:"An interesting single-origin bar with bright acidity and prominent fruity notes. While the quality is apparent, I found the texture slightly grainy and the finish a bit too acidic for my taste. Still worth trying for chocolate enthusiasts interested in exploring different flavor profiles.",createdAt:{toDate:()=>new Date(Date.now()-30*24*60*60*1e3)},chocolate:{id:"3",name:"Dandelion Madagascar",maker:"Dandelion Chocolate",imageUrl:"https://placehold.co/300x300?text=Chocolate"}}],DO=async(a=5)=>{try{const e=ka(vt(ze,"reviews"),Ri("rating",">=",4),Ia("rating","desc"),Ia("createdAt","desc"),a(a)),t=await sn(e);if(t.empty)return Db(a);const r=[];for(const s of t.docs){const l={id:s.id,...s.data()};try{const u=await Na(s(ze,"chocolates",l.chocolateId));u.exists()&&(l.chocolate={id:u.id,...u.data()})}catch(u){console.error("Error fetching chocolate for review:",u)}r.push(l)}return r}catch(e){return console.error("Error getting top reviews:",e),Db(a)}},Db=a=>[{id:"sample1",user:"ChocolateFiend",rating:5,text:"The fruity notes in this Madagascar bar are incredible - bright cherry and subtle citrus that lingers beautifully. One of the best dark chocolates I've ever tasted.",createdAt:{seconds:Date.now()/1e3-86400},chocolateId:"1",chocolate:{id:"1",name:"Madagascan Dark 72%",maker:"Terroir Artisan",imageUrl:"/placeholder-chocolate.jpg"}},{id:"sample2",user:"CocoaExplorer",rating:5,text:"This has to be the most balanced milk chocolate I ever tried. Creamy but not too sweet with complex notes you do not usually find in milk chocolate. Simply divine!",createdAt:{seconds:Date.now()/1e3-172800},chocolateId:"2",chocolate:{id:"2",name:"Sea Salt Caramel",maker:"Wild Coast Chocolate",imageUrl:"/placeholder-chocolate.jpg"}},{id:"sample3",user:"BeanToBarFan",rating:4.5,text:"Exceptional balance of flavors with notes of berries and a hint of earthiness. The mouthfeel is incredibly silky and the finish is long and pleasant.",createdAt:{seconds:Date.now()/1e3-259200},chocolateId:"3",chocolate:{id:"3",name:"Peruvian Single Origin",maker:"Craft Origins",imageUrl:"/placeholder-chocolate.jpg"}}].slice(0,a);function fy({chocolate:a,featured:e=!1}){const t=r=>{const s=[],l=Math.floor(r),u=r%1!==0;for(let m=1;m<=5;m++)m<=l?s.push(d.jsx("span",{className:"star full",children:""},m)):m===l+1&&u?s.push(d.jsx("span",{className:"star half",children:""},m)):s.push(d.jsx("span",{className:"star empty",children:""},m));return s};return d.jsxs(xe,{to:`/chocolate/${a.id}`,className:`chocolate-card ${e?"featured":""}`,children:[d.jsxs("div",{className:"image-container",children:[d.jsx("img",{src:a.imageUrl,alt:a.name}),e&&d.jsx("div",{className:"featured-badge",children:d.jsx("span",{children:"Featured"})})]}),d.jsxs("div",{className:"card-content",children:[d.jsx("h3",{className:"card-title",children:a.name}),d.jsx("p",{className:"card-maker",children:a.maker}),d.jsxs("div",{className:"card-details",children:[d.jsx("span",{className:"origin",children:a.origin}),d.jsxs("span",{className:"percentage",children:[a.cacaoPercentage,"% Cacao"]})]}),d.jsxs("div",{className:"card-rating",children:[d.jsx("span",{className:"rating-value",children:a.averageRating.toFixed(1)}),d.jsx("div",{className:"stars",children:t(a.averageRating)}),d.jsxs("span",{className:"rating-count",children:["(",a.ratings,")"]})]})]})]})}const jO="/assets/Stock-Photo-Preview-BjW_iiiO.jpeg";function MO(){const[a,e]=F.useState(""),[t,r]=F.useState([]),[s,l]=F.useState([]),[u,m]=F.useState(!0),[g,y]=F.useState(null),v=ki(),b=C=>{C.preventDefault(),a.trim()&&v(`/search?query=${encodeURIComponent(a)}`)};F.useEffect(()=>{(async()=>{try{m(!0);const R=await SO(3);r(R);const S=await DO(2);l(S),m(!1)}catch(R){console.error("Error fetching homepage data:",R),y(R.message),m(!1)}})()},[]);const T=C=>{const R=[],S=Math.floor(C),x=C%1!==0;for(let I=1;I<=5;I++)I<=S?R.push(d.jsx("span",{className:"star filled",children:""},I)):I===S+1&&x?R.push(d.jsx("span",{className:"star half",children:""},I)):R.push(d.jsx("span",{className:"star empty",children:""},I));return R};return u?d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:"Loading chocolatey goodness..."})]}):d.jsxs("div",{className:"home-page",children:[d.jsx("section",{className:"hero-section",style:{backgroundImage:`linear-gradient(rgba(93, 64, 55, 0.85), rgba(93, 64, 55, 0.85)), url(${jO})`},children:d.jsx("div",{className:"container",children:d.jsxs("div",{className:"hero-content",children:[d.jsx("h1",{className:"hero-title",children:"Discover Your Perfect Chocolate"}),d.jsx("p",{className:"hero-subtitle",children:"Join our community of chocolate enthusiasts to explore, review, and share the world's finest chocolates"}),d.jsxs("form",{onSubmit:b,className:"search-container",children:[d.jsx("input",{type:"text",placeholder:"Search for a chocolate, origin, or maker...",className:"search-input",value:a,onChange:C=>e(C.target.value)}),d.jsx("button",{type:"submit",className:"search-button",children:"Search"})]}),d.jsxs("div",{className:"hero-actions",children:[d.jsx(xe,{to:"/browse",className:"btn btn-primary",children:"Explore Chocolates"}),d.jsx(xe,{to:"/signup",className:"btn btn-secondary",children:"Join Community"})]})]})})}),d.jsx("section",{className:"featured-section",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"Featured Chocolates"}),d.jsx("p",{className:"section-subtitle",children:"Exceptional chocolates curated by our community"}),d.jsx(xe,{to:"/browse",className:"view-all",children:"View All"})]}),d.jsx("div",{className:"chocolate-cards",children:t.length>0?t.map(C=>d.jsxs(xe,{to:`/chocolate/${C.id}`,className:"chocolate-card",children:[d.jsxs("div",{className:"card-image-container",children:[d.jsx("img",{src:C.imageUrl||"/placeholder-chocolate.jpg",alt:C.name,className:"card-image"}),d.jsx("div",{className:"card-badge",children:C.type})]}),d.jsxs("div",{className:"card-content",children:[d.jsx("h3",{className:"card-title",children:C.name}),d.jsx("p",{className:"card-maker",children:C.maker}),d.jsxs("div",{className:"card-meta",children:[d.jsx("span",{className:"card-origin",children:C.origin}),d.jsxs("span",{className:"card-percentage",children:[C.cacaoPercentage,"% Cacao"]})]}),d.jsxs("div",{className:"card-rating",children:[d.jsx("div",{className:"rating-stars",children:T(C.averageRating||0)}),d.jsx("span",{className:"rating-number",children:(C.averageRating||0).toFixed(1)}),d.jsxs("span",{className:"rating-count",children:["(",C.ratings||0,")"]})]})]})]},C.id)):d.jsx("p",{className:"no-chocolates-message",children:"No featured chocolates available yet. Check back soon!"})})]})}),d.jsx("section",{className:"categories-section",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"Explore by Category"}),d.jsx("p",{className:"section-subtitle",children:"Find chocolates that match your preferences"})]}),d.jsxs("div",{className:"categories-grid",children:[d.jsxs(xe,{to:"/category/dark",className:"category-tile",children:[d.jsx("h3",{className:"category-title",children:"Dark Chocolate"}),d.jsx("p",{className:"category-description",children:"Bold & intense profiles"})]}),d.jsxs(xe,{to:"/category/milk",className:"category-tile",children:[d.jsx("h3",{className:"category-title",children:"Milk Chocolate"}),d.jsx("p",{className:"category-description",children:"Creamy & approachable"})]}),d.jsxs(xe,{to:"/category/origin",className:"category-tile",children:[d.jsx("h3",{className:"category-title",children:"Single Origin"}),d.jsx("p",{className:"category-description",children:"Distinctive terroir"})]}),d.jsxs(xe,{to:"/category/artisan",className:"category-tile",children:[d.jsx("h3",{className:"category-title",children:"Artisan Craft"}),d.jsx("p",{className:"category-description",children:"Small batch excellence"})]})]})]})}),d.jsx("section",{className:"how-it-works",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"How Chocly Works"}),d.jsx("p",{className:"section-subtitle",children:"Join our chocolate community in three simple steps"})]}),d.jsxs("div",{className:"steps-container",children:[d.jsxs("div",{className:"step-card",children:[d.jsx("div",{className:"step-icon discover",children:d.jsx("svg",{viewBox:"0 0 24 24",children:d.jsx("path",{d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"})})}),d.jsx("h3",{className:"step-title",children:"Discover"}),d.jsx("p",{className:"step-description",children:"Explore our extensive chocolate database and find chocolates based on origin, flavor profile, or maker"})]}),d.jsxs("div",{className:"step-card",children:[d.jsx("div",{className:"step-icon taste",children:d.jsx("svg",{viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.5 16.5,17.4 13,17.9V21H11V17.9C7.5,17.4 5,14.5 5,11V10H7V11A5,5 0 0,0 12,16A5,5 0 0,0 17,11V10H19V11Z"})})}),d.jsx("h3",{className:"step-title",children:"Taste & Rate"}),d.jsx("p",{className:"step-description",children:"Develop your palate by tasting and rating chocolates, tracking your personal chocolate journey"})]}),d.jsxs("div",{className:"step-card",children:[d.jsx("div",{className:"step-icon connect",children:d.jsx("svg",{viewBox:"0 0 24 24",children:d.jsx("path",{d:"M16.5,6.5A2,2 0 0,1 18.5,8.5A2,2 0 0,1 16.5,10.5A2,2 0 0,1 14.5,8.5A2,2 0 0,1 16.5,6.5M16.5,12A3.5,3.5 0 0,0 20,8.5A3.5,3.5 0 0,0 16.5,5A3.5,3.5 0 0,0 13,8.5A3.5,3.5 0 0,0 16.5,12M7.5,6.5A2,2 0 0,1 9.5,8.5A2,2 0 0,1 7.5,10.5A2,2 0 0,1 5.5,8.5A2,2 0 0,1 7.5,6.5M7.5,12A3.5,3.5 0 0,0 11,8.5A3.5,3.5 0 0,0 7.5,5A3.5,3.5 0 0,0 4,8.5A3.5,3.5 0 0,0 7.5,12M21.5,17.5H14V16.25C14,14.75 13.75,13.5 11.75,13.5C10.5,13.5 9.25,14 7.75,14.5C6.25,15 5.25,15.25 4,15.25V17L4.75,17.25C5.5,17.5 5.75,17.75 6.25,18.25C6.75,18.75 7.5,19.5 8.5,20.25C9.5,21 9.75,21 11,21C12.25,21 12.5,21 13.5,20.25C14.5,19.5 15.25,18.75 15.75,18.25C16.25,17.75 16.5,17.5 17.25,17.25L18,17H21.5V17.5Z"})})}),d.jsx("h3",{className:"step-title",children:"Connect"}),d.jsx("p",{className:"step-description",children:"Share recommendations, follow fellow chocolate lovers, and join tasting events in your area"})]})]})]})}),d.jsx("section",{className:"reviews-section",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"Community Reviews"}),d.jsx("p",{className:"section-subtitle",children:"Discover what chocolate lovers are saying"}),d.jsx(xe,{to:"/reviews",className:"view-all",children:"View All"})]}),d.jsx("div",{className:"reviews-grid",children:s.length>0?s.map(C=>{var R,S,x,I;return d.jsxs("div",{className:"review-card",children:[d.jsxs("div",{className:"review-header",children:[d.jsxs("div",{className:"review-user",children:[d.jsx("span",{className:"user-name",children:C.user}),d.jsx("span",{className:"review-date",children:C.createdAt&&new Date(C.createdAt.seconds*1e3).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]}),d.jsx("div",{className:"review-rating",children:T(C.rating)})]}),d.jsxs("div",{className:"review-chocolate",children:[d.jsx("img",{src:((R=C.chocolate)==null?void 0:R.imageUrl)||"/placeholder-chocolate.jpg",alt:(S=C.chocolate)==null?void 0:S.name,className:"chocolate-image"}),d.jsxs("div",{className:"chocolate-info",children:[d.jsx("h4",{className:"chocolate-name",children:(x=C.chocolate)==null?void 0:x.name}),d.jsx("p",{className:"chocolate-maker",children:(I=C.chocolate)==null?void 0:I.maker})]})]}),d.jsx("p",{className:"review-text",children:C.text}),d.jsx(xe,{to:`/chocolate/${C.chocolateId}`,className:"read-more",children:"Read Full Review"})]},C.id)}):d.jsxs("div",{className:"no-reviews-message",children:[d.jsx("p",{children:"No reviews yet! Be the first to review a chocolate."}),d.jsx(xe,{to:"/browse",className:"btn btn-primary btn-sm",children:"Find chocolates to review"})]})})]})}),d.jsx("section",{className:"cta-section",children:d.jsx("div",{className:"container",children:d.jsxs("div",{className:"cta-content",children:[d.jsx("h2",{className:"cta-title",children:"Ready to join our chocolate community?"}),d.jsx("p",{className:"cta-text",children:"Create a free account to start tracking your tastings, save favorites, and connect with fellow chocolate enthusiasts"}),d.jsxs("div",{className:"cta-buttons",children:[d.jsx(xe,{to:"/signup",className:"btn btn-primary",children:"Create Account"}),d.jsx(xe,{to:"/browse",className:"btn btn-tertiary",children:"Explore First"})]})]})})})]})}function Gg({rating:a,size:e="small",interactive:t=!1,onRatingChange:r}){const s=[],l=u=>{t&&r&&r(u)};for(let u=1;u<=5;u++){let m="star";u<=Math.floor(a)?m+=" filled":u-.5<=a&&(m+=" half-filled"),e==="large"&&(m+=" star-large"),t&&(m+=" interactive"),s.push(d.jsx("span",{className:m,onClick:()=>l(u),children:""},u))}return d.jsx("div",{className:"rating-stars",children:s})}function OO({review:a}){const e=a.createdAt?typeof a.createdAt.toDate=="function"?a.createdAt.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):new Date(a.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return d.jsxs("div",{className:"review-item",children:[d.jsxs("div",{className:"review-header",children:[d.jsx("span",{className:"username",children:a.user||"Anonymous User"}),d.jsx("div",{className:"review-rating-stars",children:d.jsx(Gg,{rating:a.rating})}),e&&d.jsx("span",{className:"review-date",children:e})]}),d.jsx("p",{className:"review-text",children:a.text})]})}const PO=async(a,e,t)=>{try{const r=await tM(Xo,a,e);return await aM(r.user,{displayName:t}),await my(r.user,{displayName:t}),r.user}catch(r){throw r}},UO=async(a,e)=>{try{return(await nM(Xo,a,e)).user}catch(t){throw t}},vx=async()=>{try{const a=new GoogleAuthProvider;a.setCustomParameters({prompt:"select_account"});const e=await gx(Xo,a);return(await Na(Kn(ze,"users",e.user.uid))).exists()||await my(e.user),e.user}catch(a){throw console.error("Google sign-in error:",a),a.code==="auth/configuration-not-found"?new Error("Authentication configuration issue. Please contact support."):a}},_x=async()=>{try{const a=await gx(Xo,wO);return(await Na(Kn(ze,"users",a.user.uid))).exists()||await my(a.user),a.user}catch(a){throw a}},my=async(a,e={})=>{if(!a)return;const t=Kn(ze,"users",a.uid);if(!(await Na(t)).exists()){const{displayName:s,email:l,photoURL:u}=a;try{await zD(t,{displayName:s||e.displayName||"",email:l,photoURL:u||"",createdAt:Od(),reviewCount:0,tastingCount:0,favorites:[],badges:["Newcomer"],preferences:{favoriteTypes:[],dietaryRestrictions:[],flavorPreferences:[]},...e})}catch(m){throw console.error("Error creating user profile",m),m}}return wx(a.uid)},wx=async a=>{try{const e=await Na(Kn(ze,"users",a));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw e}},VO=async a=>{try{return await eM(Xo,a),!0}catch(e){throw e}},LO=a=>oM(Xo,a),bx=F.createContext();function Ex(){return F.useContext(bx)}function BO({children:a}){const[e,t]=F.useState(null),[r,s]=F.useState(null),[l,u]=F.useState(!0);F.useEffect(()=>LO(async y=>{if(t(y),u(!0),y)try{const v=await wx(y.uid);s(v)}catch(v){console.error("Error loading user profile:",v)}else s(null);u(!1)}),[]);const m={currentUser:e,userProfile:r,loading:l};return d.jsx(bx.Provider,{value:m,children:!l&&a})}function zO(){const{id:a}=gE(),[e,t]=F.useState(null),[r,s]=F.useState([]),[l,u]=F.useState([]),[m,g]=F.useState(!0),[y,v]=F.useState(null),[b,T]=F.useState(0),[C,R]=F.useState(""),{currentUser:S}=Ex(),[x,I]=F.useState(!1);F.useEffect(()=>{(async()=>{try{g(!0);const N=Kn(ze,"chocolates",a),j=await Na(N);if(!j.exists()){v("Chocolate not found"),g(!1);return}const U={id:j.id,...j.data()};if(t(U),U.tagIds&&U.tagIds.length>0){const q=[];for(const $ of U.tagIds)try{const P=await Na(Kn(ze,"tags",$));P.exists()&&q.push(P.data().name)}catch(P){console.error("Error fetching tag:",P)}u(q)}await oe(),g(!1)}catch(N){console.error("Error fetching chocolate details:",N),v(N.message),g(!1)}})()},[a]);const B=M=>{T(M)},G=async M=>{if(M.preventDefault(),!S){alert("Please sign in to leave a review");return}if(b===0){alert("Please select a rating");return}if(!C.trim()){alert("Please write a review");return}try{g(!0),I(!0);const N={chocolateId:a,userId:S.uid,user:S.displayName||"Anonymous User",userPhotoURL:S.photoURL||null,rating:b,text:C,chocolate:{id:e.id,name:e.name,maker:e.maker,imageUrl:e.imageUrl||"https://placehold.co/300x300?text=Chocolate"}};await RO(N),T(0),R("");const j=ka(vt(ze,"reviews"),Ri("chocolateId","==",a),Ia("createdAt","desc")),q=(await sn(j)).docs.map($=>({id:$.id,...$.data()}));s(q),await oe(),alert("Your review has been submitted successfully!")}catch(N){console.error("Error submitting review:",N),alert(`Error submitting review: ${N.message}`)}finally{g(!1)}};if(m)return d.jsxs("div",{className:"loading-container",children:[d.jsxs("div",{className:"loading-animation",children:[d.jsx("span",{}),d.jsx("span",{}),d.jsx("span",{})]}),d.jsx("p",{children:"Loading chocolate details..."})]});if(y||!e)return d.jsxs("div",{className:"error",children:["Error: ",y||"Chocolate not found"]});const re=e.flavorProfile||[{name:"Sweet",intensity:3},{name:"Bitter",intensity:3},{name:"Fruity",intensity:0},{name:"Nutty",intensity:0},{name:"Earthy",intensity:0}],oe=async()=>{try{const M=ka(vt(ze,"reviews"),Ri("chocolateId","==",a),Ia("createdAt","desc")),j=(await sn(M)).docs.map(U=>({id:U.id,...U.data()}));s(j)}catch(M){console.error("Error fetching reviews:",M)}},de=Array.isArray(e.ingredients)?e.ingredients:typeof e.ingredients=="string"?e.ingredients.split(",").map(M=>M.trim()):[];return d.jsxs("div",{className:"chocolate-detail-page",children:[d.jsx("div",{className:"detail-header",children:d.jsx("div",{className:"container",children:d.jsxs("div",{className:"detail-header-content",children:[d.jsxs("div",{className:"detail-image",children:[d.jsx("img",{src:e.imageUrl||"https://placehold.co/300x300?text=Chocolate",alt:e.name,className:"chocolate-label-image"}),d.jsx("div",{className:"image-caption",children:"Product Label"})]}),d.jsxs("div",{className:"detail-info",children:[d.jsx("h1",{children:e.name}),d.jsx("p",{className:"maker",children:e.maker}),d.jsxs("div",{className:"rating-section",children:[d.jsxs("div",{className:"average-rating",children:[d.jsx("span",{className:"rating-number",children:(e.averageRating||0).toFixed(1)}),d.jsx(Gg,{rating:e.averageRating||0,size:"large"}),d.jsxs("span",{className:"rating-count",children:["(",e.ratings||0," ratings)"]})]}),d.jsxs("div",{className:"user-rating",children:[d.jsx("p",{children:"Your Rating:"}),d.jsx(Gg,{rating:b,size:"large",interactive:!0,onRatingChange:B})]})]}),d.jsxs("div",{className:"chocolate-meta",children:[d.jsxs("div",{className:"meta-item",children:[d.jsx("span",{className:"meta-label",children:"Origin"}),d.jsx("span",{className:"meta-value",children:e.origin||"Various"})]}),d.jsxs("div",{className:"meta-item",children:[d.jsx("span",{className:"meta-label",children:"Cacao"}),d.jsxs("span",{className:"meta-value",children:[e.cacaoPercentage||0,"%"]})]}),d.jsxs("div",{className:"meta-item",children:[d.jsx("span",{className:"meta-label",children:"Type"}),d.jsx("span",{className:"meta-value",children:e.type||"N/A"})]})]}),l.length>0&&d.jsx("div",{className:"chocolate-tags",children:l.map(M=>d.jsx("span",{className:"tag",children:M},M))})]})]})})}),d.jsxs("div",{className:"container",children:[d.jsxs("section",{className:"description-section",children:[d.jsx("h2",{children:"Description"}),d.jsx("p",{children:e.description||"No description available."})]}),d.jsxs("section",{className:"flavor-section",children:[d.jsx("h2",{children:"Flavor Profile"}),d.jsx("div",{className:"flavor-list",children:re.map(M=>d.jsxs("div",{className:"flavor-item",children:[d.jsx("span",{className:"flavor-name",children:M.name}),d.jsx("div",{className:"flavor-bar",children:d.jsx("div",{className:"flavor-level",style:{width:`${(M.intensity||0)*20}%`}})})]},M.name))})]}),d.jsxs("section",{className:"ingredients-section",children:[d.jsx("h2",{children:"Ingredients"}),de.length>0?d.jsx("ul",{className:"ingredients-list",children:de.map((M,N)=>d.jsx("li",{children:M},N))}):d.jsx("p",{children:"Ingredients information not available."})]}),e.nutritionalInfo&&d.jsxs("section",{className:"nutrition-section",children:[d.jsx("h2",{children:"Nutritional Information"}),d.jsx("div",{className:"nutrition-info",children:Object.entries(e.nutritionalInfo).map(([M,N])=>d.jsxs("div",{className:"nutrition-item",children:[d.jsx("span",{className:"nutrition-label",children:M.charAt(0).toUpperCase()+M.slice(1).replace(/([A-Z])/g," $1")}),d.jsx("span",{className:"nutrition-value",children:typeof N=="number"?N+(M.includes("calories")?"":"g"):N})]},M))})]}),d.jsxs("section",{className:"reviews-section",children:[d.jsx("h2",{children:"Reviews"}),r.length>0?d.jsx("div",{className:"reviews-list",children:r.map(M=>d.jsx(OO,{review:M},M.id))}):d.jsx("p",{className:"no-reviews",children:"No reviews yet. Be the first to review this chocolate!"}),d.jsxs("div",{className:"add-review",children:[d.jsx("h3",{children:"Add Your Review"}),d.jsxs("form",{onSubmit:G,children:[d.jsx("textarea",{placeholder:"Share your thoughts on this chocolate...",value:C,onChange:M=>R(M.target.value),required:!0}),d.jsx("button",{type:"submit",className:"submit-review",disabled:!S||m})]})]})]})]})]})}function FO(){const[a]=G1(),e=a.get("query")||"",[t,r]=F.useState([]),[s,l]=F.useState(!0),[u,m]=F.useState(null),[g,y]=F.useState("relevance"),[v,b]=F.useState("all");F.useEffect(()=>{(async()=>{if(!e.trim()){r([]),l(!1);return}try{l(!0);const I=await EO(e);r(I),l(!1)}catch(I){console.error("Search error:",I),m(I.message),l(!1)}})()},[e]);const C=[...t.filter(x=>v==="all"?!0:x.type&&x.type.toLowerCase()===v.toLowerCase())].sort((x,I)=>{switch(g){case"rating":return(I.averageRating||0)-(x.averageRating||0);case"cacao-high":return(I.cacaoPercentage||0)-(x.cacaoPercentage||0);case"cacao-low":return(x.cacaoPercentage||0)-(I.cacaoPercentage||0);case"name":return(x.name||"").localeCompare(I.name||"");default:return 0}}),R=x=>{y(x.target.value)},S=x=>{b(x.target.value)};return s?d.jsx("div",{className:"loading",children:"Searching..."}):u?d.jsxs("div",{className:"error",children:["Error: ",u]}):d.jsx("div",{className:"search-results-page",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"search-header",children:[d.jsx("h1",{children:"Search Results"}),e&&d.jsxs("p",{className:"search-query",children:['Showing results for "',e,'"']})]}),t.length>0?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"search-filters",children:[d.jsxs("div",{className:"filter-group",children:[d.jsx("label",{htmlFor:"type-filter",children:"Filter by:"}),d.jsxs("select",{id:"type-filter",value:v,onChange:S,children:[d.jsx("option",{value:"all",children:"All Types"}),d.jsx("option",{value:"dark",children:"Dark Chocolate"}),d.jsx("option",{value:"milk",children:"Milk Chocolate"}),d.jsx("option",{value:"white",children:"White Chocolate"}),d.jsx("option",{value:"ruby",children:"Ruby Chocolate"})]})]}),d.jsxs("div",{className:"filter-group",children:[d.jsx("label",{htmlFor:"sort-by",children:"Sort by:"}),d.jsxs("select",{id:"sort-by",value:g,onChange:R,children:[d.jsx("option",{value:"relevance",children:"Relevance"}),d.jsx("option",{value:"rating",children:"Highest Rating"}),d.jsx("option",{value:"cacao-high",children:"Cacao % (High to Low)"}),d.jsx("option",{value:"cacao-low",children:"Cacao % (Low to High)"}),d.jsx("option",{value:"name",children:"Name (A-Z)"})]})]})]}),d.jsxs("p",{className:"results-count",children:[C.length," chocolate",C.length!==1?"s":""," found"]}),d.jsx("div",{className:"results-grid",children:C.map(x=>d.jsx(fy,{chocolate:x},x.id))})]}):d.jsxs("div",{className:"no-results",children:[d.jsx("p",{children:"No chocolates found matching your search."}),d.jsxs("p",{children:["Try different keywords or ",d.jsx(xe,{to:"/",children:"browse all chocolates"}),"."]})]})]})})}const qO=async a=>{try{const e=await Na(Kn(ze,"users",a));if(!e.exists())return[];const t=e.data().favorites||[];if(t.length===0)return HO();const r=[];for(const s of t){const l=await Na(Kn(ze,"chocolates",s));l.exists()&&r.push({id:l.id,...l.data()})}return r}catch(e){throw console.error("Error getting favorite chocolates:",e),e}},HO=()=>[{id:"1",name:"Valrhona Guanaja 70%",maker:"Valrhona",type:"Dark",origin:"Blend (South America and Caribbean)",cacaoPercentage:70,averageRating:4.5,ratings:356,imageUrl:"https://placehold.co/300x300?text=Chocolate"},{id:"5",name:"Sea Salt Caramel Crunch",maker:"Coastal Confections",type:"Dark Milk",origin:"Belgium",cacaoPercentage:55,averageRating:4.8,ratings:425,imageUrl:"https://placehold.co/300x300?text=Chocolate"},{id:"3",name:"Dandelion Madagascar",maker:"Dandelion Chocolate",type:"Dark",origin:"Madagascar",cacaoPercentage:70,averageRating:4.7,ratings:178,imageUrl:"https://placehold.co/300x300?text=Chocolate"}],GO=({name:a})=>({Newcomer:d.jsx("svg",{className:"badge-icon newcomer",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,17V16H9V14H13V13H10A1,1 0 0,1 9,12V9A1,1 0 0,1 10,8H11V7H13V8H15V10H11V11H14A1,1 0 0,1 15,12V15A1,1 0 0,1 14,16H13V17H11Z"})}),Reviewer:d.jsx("svg",{className:"badge-icon reviewer",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"})}),Enthusiast:d.jsx("svg",{className:"badge-icon enthusiast",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M16,5V11H21V5M10,11H15V5H10M16,18H21V12H16M10,18H15V12H10M4,18H9V12H4M4,11H9V5H4V11Z"})}),Connoisseur:d.jsx("svg",{className:"badge-icon connoisseur",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,10.84 21.79,9.69 21.39,8.61L19.79,10.21C19.93,10.8 20,11.4 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.6,4 13.2,4.07 13.79,4.21L15.4,2.6C14.31,2.21 13.16,2 12,2M19,2L15,6V7.5L12.45,10.05C12.3,10 12.15,10 12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12C14,11.85 14,11.7 13.95,11.55L16.5,9H18L22,5H19V2M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12H16A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8V6Z"})})})[a]||null;function $O(){var S,x,I,B,G,re,oe,de,M,N,j,U,q,$,P,St,ht,ae,me,be,Be,L,he,H,D,K,Z,V,ve,te,Re,He,pe,ge,Ce,Pe,Xe;const{currentUser:a,userProfile:e}=Ex(),[t,r]=F.useState("overview"),[s,l]=F.useState([]),[u,m]=F.useState([]),[g,y]=F.useState(!0),v=ki();F.useEffect(()=>{if(!a&&!g){v("/login");return}(async()=>{try{if(y(!0),a){const[Oe,xt]=await Promise.all([AO(a.uid),qO(a.uid)]);l(Oe),m(xt)}}catch(Oe){console.error("Error loading user data:",Oe)}finally{y(!1)}})()},[a,v,g]);const b=()=>{if(!e)return{};const ye=s.length,Oe=s.length,xt=ye>0?s.reduce(($t,Ct)=>$t+Ct.rating,0)/ye:0,Ze={};s.forEach($t=>{const Ct=$t.chocolate.type;Ze[Ct]=(Ze[Ct]||0)+1});let Te="None yet",rt=0;Object.entries(Ze).forEach(([$t,Ct])=>{Ct>rt&&(rt=Ct,Te=$t)});const pn={};s.forEach($t=>{const Ct=$t.chocolate.maker;pn[Ct]=(pn[Ct]||0)+1});let Sn="None yet";return rt=0,Object.entries(pn).forEach(([$t,Ct])=>{Ct>rt&&(rt=Ct,Sn=$t)}),{totalReviews:ye,totalTasted:Oe,averageRating:xt,favoriteType:Te,favoriteMaker:Sn}},T=()=>e?e.badges||["Newcomer"]:[],C=b(),R=T();return!a||!e?d.jsx("div",{className:"container",children:d.jsxs("div",{className:"profile-not-logged-in",children:[d.jsx("h2",{children:"You need to sign in"}),d.jsx("p",{children:"Please log in or create an account to view your profile."}),d.jsxs("div",{className:"auth-buttons",children:[d.jsx(xe,{to:"/login",className:"auth-button",children:"Log In"}),d.jsx(xe,{to:"/signup",className:"auth-button signup",children:"Sign Up"})]})]})}):d.jsx("div",{className:"profile-page",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"profile-header",children:[d.jsxs("div",{className:"profile-header-main",children:[d.jsx("div",{className:"profile-avatar",children:e.photoURL?d.jsx("img",{src:e.photoURL,alt:e.displayName}):d.jsx("div",{className:"avatar-placeholder",children:e.displayName.charAt(0)})}),d.jsxs("div",{className:"profile-info",children:[d.jsx("h1",{children:e.displayName}),d.jsxs("p",{className:"member-since",children:["Member since ",((S=e.createdAt)==null?void 0:S.toDate().toLocaleDateString())||"Recently"]}),d.jsx("div",{className:"profile-badges",children:R.map(ye=>d.jsxs("div",{className:"badge",children:[d.jsx(GO,{name:ye}),d.jsx("span",{children:ye})]},ye))})]})]}),d.jsx("div",{className:"profile-actions",children:d.jsx("button",{className:"edit-profile-button",children:"Edit Profile"})})]}),d.jsxs("div",{className:"profile-nav",children:[d.jsx("button",{className:`profile-nav-link ${t==="overview"?"active":""}`,onClick:()=>r("overview"),children:"Overview"}),d.jsxs("button",{className:`profile-nav-link ${t==="reviews"?"active":""}`,onClick:()=>r("reviews"),children:["Reviews (",s.length,")"]}),d.jsxs("button",{className:`profile-nav-link ${t==="favorites"?"active":""}`,onClick:()=>r("favorites"),children:["Favorites (",u.length,")"]}),d.jsx("button",{className:`profile-nav-link ${t==="preferences"?"active":""}`,onClick:()=>r("preferences"),children:"Preferences"})]}),d.jsxs("div",{className:"profile-content",children:[t==="overview"&&d.jsxs("div",{className:"overview-tab",children:[d.jsxs("div",{className:"stats-section",children:[d.jsx("h2",{children:"Your Chocolate Journey"}),d.jsxs("div",{className:"stats-grid",children:[d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:C.totalTasted}),d.jsx("div",{className:"stat-label",children:"Chocolates Tasted"})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:C.totalReviews}),d.jsx("div",{className:"stat-label",children:"Reviews Written"})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:C.averageRating.toFixed(1)}),d.jsx("div",{className:"stat-label",children:"Average Rating"})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:u.length}),d.jsx("div",{className:"stat-label",children:"Favorites"})]})]})]}),d.jsxs("div",{className:"profile-sections",children:[d.jsxs("div",{className:"profile-section",children:[d.jsx("div",{className:"section-header",children:d.jsx("h3",{children:"Your Taste Profile"})}),d.jsxs("div",{className:"taste-profile",children:[d.jsxs("div",{className:"taste-item",children:[d.jsx("span",{className:"taste-label",children:"Favorite Chocolate Type:"}),d.jsx("span",{className:"taste-value",children:C.favoriteType})]}),d.jsxs("div",{className:"taste-item",children:[d.jsx("span",{className:"taste-label",children:"Favorite Maker:"}),d.jsx("span",{className:"taste-value",children:C.favoriteMaker})]}),d.jsxs("div",{className:"taste-item",children:[d.jsx("span",{className:"taste-label",children:"Top Flavor Notes:"}),d.jsx("span",{className:"taste-value",children:((I=(x=e.preferences)==null?void 0:x.flavorPreferences)==null?void 0:I.length)>0?e.preferences.flavorPreferences.join(", "):"Not specified yet"})]})]})]}),d.jsxs("div",{className:"profile-section",children:[d.jsx("div",{className:"section-header",children:d.jsx("h3",{children:"Recent Activity"})}),s.length>0?d.jsxs("div",{className:"recent-reviews",children:[s.slice(0,3).map(ye=>d.jsxs("div",{className:"recent-review",children:[d.jsxs(xe,{to:`/chocolate/${ye.chocolate.id}`,className:"review-chocolate",children:[d.jsx("img",{src:ye.chocolate.imageUrl,alt:ye.chocolate.name}),d.jsxs("div",{className:"review-chocolate-info",children:[d.jsx("h4",{children:ye.chocolate.name}),d.jsx("p",{children:ye.chocolate.maker})]})]}),d.jsxs("div",{className:"review-content",children:[d.jsxs("div",{className:"review-rating",children:[[1,2,3,4,5].map(Oe=>d.jsx("span",{className:`star ${Oe<=ye.rating?"filled":""}`,children:""},Oe)),d.jsx("span",{className:"review-date",children:new Date(ye.createdAt.toDate()).toLocaleDateString()})]}),d.jsxs("p",{className:"review-text",children:[ye.text.substring(0,120),"..."]})]})]},ye.id)),d.jsx(xe,{to:"#",onClick:()=>r("reviews"),className:"see-all-link",children:"See all reviews"})]}):d.jsxs("div",{className:"empty-state",children:[d.jsx("p",{children:"You haven't written any reviews yet."}),d.jsx(xe,{to:"/",className:"action-button",children:"Discover Chocolates to Review"})]})]})]}),d.jsxs("div",{className:"recommendations-section",children:[d.jsx("div",{className:"section-header",children:d.jsx("h3",{children:"Recommended For You"})}),d.jsx("div",{className:"recommendation-message",children:d.jsx("p",{children:"Keep reviewing chocolates to get personalized recommendations based on your taste preferences!"})})]})]}),t==="reviews"&&d.jsxs("div",{className:"reviews-tab",children:[d.jsx("div",{className:"section-header",children:d.jsx("h2",{children:"Your Reviews"})}),s.length>0?d.jsx("div",{className:"reviews-list",children:s.map(ye=>d.jsxs("div",{className:"review-card",children:[d.jsxs("div",{className:"review-card-header",children:[d.jsxs(xe,{to:`/chocolate/${ye.chocolate.id}`,className:"review-chocolate",children:[d.jsx("img",{src:ye.chocolate.imageUrl,alt:ye.chocolate.name}),d.jsxs("div",{className:"review-chocolate-info",children:[d.jsx("h3",{children:ye.chocolate.name}),d.jsx("p",{children:ye.chocolate.maker})]})]}),d.jsxs("div",{className:"review-meta",children:[d.jsx("div",{className:"review-rating-large",children:[1,2,3,4,5].map(Oe=>d.jsx("span",{className:`star ${Oe<=ye.rating?"filled":""}`,children:""},Oe))}),d.jsx("div",{className:"review-date",children:new Date(ye.createdAt.toDate()).toLocaleDateString()})]})]}),d.jsx("div",{className:"review-card-body",children:d.jsx("p",{className:"review-text",children:ye.text})}),d.jsxs("div",{className:"review-card-actions",children:[d.jsx("button",{className:"edit-review",children:"Edit"}),d.jsx("button",{className:"delete-review",children:"Delete"})]})]},ye.id))}):d.jsxs("div",{className:"empty-state",children:[d.jsx("p",{children:"You haven't written any reviews yet."}),d.jsx(xe,{to:"/",className:"action-button",children:"Discover Chocolates to Review"})]})]}),t==="favorites"&&d.jsxs("div",{className:"favorites-tab",children:[d.jsx("div",{className:"section-header",children:d.jsx("h2",{children:"Your Favorite Chocolates"})}),u.length>0?d.jsx("div",{className:"favorites-grid",children:u.map(ye=>d.jsxs("div",{className:"favorite-card",children:[d.jsxs(xe,{to:`/chocolate/${ye.id}`,className:"favorite-link",children:[d.jsx("div",{className:"favorite-image",children:d.jsx("img",{src:ye.imageUrl,alt:ye.name})}),d.jsxs("div",{className:"favorite-info",children:[d.jsx("h3",{children:ye.name}),d.jsx("p",{children:ye.maker}),d.jsxs("div",{className:"favorite-details",children:[d.jsx("span",{children:ye.type}),d.jsxs("span",{children:[ye.cacaoPercentage,"% Cacao"]})]}),d.jsxs("div",{className:"favorite-rating",children:[[1,2,3,4,5].map(Oe=>d.jsx("span",{className:`star ${Oe<=ye.averageRating?"filled":""}`,children:""},Oe)),d.jsxs("span",{className:"rating-count",children:["(",ye.ratings,")"]})]})]})]}),d.jsx("button",{className:"remove-favorite",children:"Remove"})]},ye.id))}):d.jsxs("div",{className:"empty-state",children:[d.jsx("p",{children:"You haven't added any favorites yet."}),d.jsx(xe,{to:"/",className:"action-button",children:"Find Chocolates to Love"})]})]}),t==="preferences"&&d.jsxs("div",{className:"preferences-tab",children:[d.jsx("div",{className:"section-header",children:d.jsx("h2",{children:"Taste Preferences"})}),d.jsxs("form",{className:"preferences-form",children:[d.jsxs("div",{className:"preference-section",children:[d.jsx("h3",{children:"Chocolate Types You Enjoy"}),d.jsxs("div",{className:"checkbox-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(G=(B=e.preferences)==null?void 0:B.favoriteTypes)==null?void 0:G.includes("Dark"),onChange:()=>{}}),"Dark Chocolate"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(oe=(re=e.preferences)==null?void 0:re.favoriteTypes)==null?void 0:oe.includes("Milk"),onChange:()=>{}}),"Milk Chocolate"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(M=(de=e.preferences)==null?void 0:de.favoriteTypes)==null?void 0:M.includes("White"),onChange:()=>{}}),"White Chocolate"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(j=(N=e.preferences)==null?void 0:N.favoriteTypes)==null?void 0:j.includes("Single Origin"),onChange:()=>{}}),"Single Origin"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(q=(U=e.preferences)==null?void 0:U.favoriteTypes)==null?void 0:q.includes("Flavored"),onChange:()=>{}}),"Flavored/Infused"]})]})]}),d.jsxs("div",{className:"preference-section",children:[d.jsx("h3",{children:"Flavor Notes You Prefer"}),d.jsxs("div",{className:"checkbox-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(P=($=e.preferences)==null?void 0:$.flavorPreferences)==null?void 0:P.includes("Fruity"),onChange:()=>{}}),"Fruity"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(ht=(St=e.preferences)==null?void 0:St.flavorPreferences)==null?void 0:ht.includes("Nutty"),onChange:()=>{}}),"Nutty"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(me=(ae=e.preferences)==null?void 0:ae.flavorPreferences)==null?void 0:me.includes("Floral"),onChange:()=>{}}),"Floral"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(Be=(be=e.preferences)==null?void 0:be.flavorPreferences)==null?void 0:Be.includes("Spicy"),onChange:()=>{}}),"Spicy"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(he=(L=e.preferences)==null?void 0:L.flavorPreferences)==null?void 0:he.includes("Earthy"),onChange:()=>{}}),"Earthy"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(D=(H=e.preferences)==null?void 0:H.flavorPreferences)==null?void 0:D.includes("Caramel"),onChange:()=>{}}),"Caramel"]})]})]}),d.jsxs("div",{className:"preference-section",children:[d.jsx("h3",{children:"Dietary Preferences"}),d.jsxs("div",{className:"checkbox-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(Z=(K=e.preferences)==null?void 0:K.dietaryRestrictions)==null?void 0:Z.includes("Dairy-Free"),onChange:()=>{}}),"Dairy-Free"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(ve=(V=e.preferences)==null?void 0:V.dietaryRestrictions)==null?void 0:ve.includes("Vegan"),onChange:()=>{}}),"Vegan"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(Re=(te=e.preferences)==null?void 0:te.dietaryRestrictions)==null?void 0:Re.includes("Gluten-Free"),onChange:()=>{}}),"Gluten-Free"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(pe=(He=e.preferences)==null?void 0:He.dietaryRestrictions)==null?void 0:pe.includes("Nut-Free"),onChange:()=>{}}),"Nut-Free"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(Ce=(ge=e.preferences)==null?void 0:ge.dietaryRestrictions)==null?void 0:Ce.includes("Sugar-Free"),onChange:()=>{}}),"Sugar-Free"]}),d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:(Xe=(Pe=e.preferences)==null?void 0:Pe.dietaryRestrictions)==null?void 0:Xe.includes("Fair Trade"),onChange:()=>{}}),"Fair Trade"]})]})]}),d.jsx("button",{type:"submit",className:"save-preferences",children:"Save Preferences"})]})]})]})]})})}function KO(){const[a,e]=F.useState([]),[t,r]=F.useState(!0),[s,l]=F.useState(null);return F.useEffect(()=>{(async()=>{try{r(!0);const m=await dy();e(m),r(!1)}catch(m){l(m.message),r(!1)}})()},[]),t?d.jsx("div",{className:"loading full-width",children:"Loading chocolates..."}):s?d.jsxs("div",{className:"error full-width",children:["Error: ",s]}):d.jsx("div",{className:"browse-page full-page",children:d.jsxs("div",{className:"container",children:[d.jsx("h1",{children:"All Chocolates"}),d.jsxs("p",{className:"browse-description",children:["Browse our complete collection of ",a.length," chocolates."]}),d.jsx("div",{className:"chocolate-grid",children:a.map(u=>d.jsx(fy,{chocolate:u},u.id))})]})})}function QO(){const[a,e]=F.useState(!1),[t,r]=F.useState(""),[s,l]=F.useState(""),[u,m]=F.useState(!1),g=F.useRef(null),y=ki(),v=async T=>{if(T.preventDefault(),!!t)try{m(!0),l(""),y(`/search?query=${t}`)}catch{l("Could not find a chocolate with this barcode. Please try another.")}finally{m(!1)}},b=T=>{T.target.files[0]&&(m(!0),setTimeout(()=>{r("3017620422003"),m(!1)},1500))};return d.jsxs("div",{className:"barcode-scanner",children:[d.jsx("h2",{children:"Scan Chocolate Barcode"}),d.jsxs("div",{className:"scan-options",children:[d.jsxs("div",{className:"manual-entry",children:[d.jsx("h3",{children:"Enter Barcode Manually"}),d.jsxs("form",{onSubmit:v,children:[d.jsx("input",{type:"text",value:t,onChange:T=>r(T.target.value),placeholder:"Enter barcode number",required:!0}),d.jsx("button",{type:"submit",disabled:u||!t,children:u?"Searching...":"Find Chocolate"})]})]}),d.jsxs("div",{className:"scan-image",children:[d.jsx("h3",{children:"Scan Barcode Image"}),d.jsx("p",{children:"Upload an image of a barcode to scan"}),d.jsx("input",{type:"file",accept:"image/*",onChange:b,ref:g,style:{display:"none"}}),d.jsx("button",{onClick:()=>g.current.click(),disabled:u,children:u?"Processing...":"Upload Barcode Image"}),d.jsx("p",{className:"hint",children:"For a mobile app, we would use the device camera"})]})]}),s&&d.jsx("div",{className:"error-message",children:s})]})}function YO(){return d.jsx("div",{className:"barcode-search-page",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"page-header",children:[d.jsx("h1",{children:"Find Chocolates by Barcode"}),d.jsx("p",{className:"page-description",children:"Scan or enter a barcode to quickly find information about a chocolate product."})]}),d.jsx(QO,{}),d.jsxs("div",{className:"info-section",children:[d.jsx("h2",{children:"About Barcode Scanning"}),d.jsx("p",{children:"Our barcode scanning feature allows you to quickly look up chocolates by their barcode. We use the Open Food Facts database to find products that might not be in our system yet."}),d.jsx("p",{children:"In the future, our mobile app will allow you to scan barcodes directly with your phone's camera!"})]})]})})}function WO(){const{categorySlug:a}=gE(),[e,t]=F.useState([]),[r,s]=F.useState(!0),[l,u]=F.useState(null),[m,g]=F.useState("rating"),y=S=>S==="origin"?"Single Origin":S==="artisan"?"Artisan Craft":S.charAt(0).toUpperCase()+S.slice(1)+" Chocolate",v=S=>{switch(S){case"dark":return"Bold, intense flavors with higher cacao percentages, typically ranging from 55% to 100%.";case"milk":return"Smooth and creamy with a balance of cocoa and dairy notes, offering a more approachable chocolate experience.";case"white":return"Made with cocoa butter, sugar, and milk, without cocoa solids, creating a rich, sweet flavor profile.";case"origin":return"Chocolates made from beans sourced from a single region, showcasing the unique terroir of specific locations.";case"artisan":return"Small-batch chocolates crafted with meticulous attention to detail, often using traditional methods and premium ingredients.";default:return"Explore our chocolate collection"}},b=S=>{g(S.target.value)},T=S=>({dark:"/category-dark.jpg",milk:"/category-milk.jpg",white:"/category-white.jpg",origin:"/category-origin.jpg",artisan:"/category-artisan.jpg"})[S]||"/category-default.jpg";F.useEffect(()=>{(async()=>{try{s(!0);let x;a==="origin"?x={field:"tagIds",operator:"array-contains",value:"single-origin"}:a==="artisan"?x={field:"tagIds",operator:"array-contains",value:"bean-to-bar"}:x={field:"type",operator:"==",value:a.charAt(0).toUpperCase()+a.slice(1)};const I=await CO(x);t(I),s(!1)}catch(x){console.error("Error fetching category data:",x),u(x.message),s(!1)}})()},[a]);const C=()=>[...e].sort((S,x)=>{switch(m){case"rating":return(x.averageRating||0)-(S.averageRating||0);case"popularity":return(x.ratings||0)-(S.ratings||0);case"cacao-high":return(x.cacaoPercentage||0)-(S.cacaoPercentage||0);case"cacao-low":return(S.cacaoPercentage||0)-(x.cacaoPercentage||0);case"name":return S.name.localeCompare(x.name);default:return 0}});if(r)return d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"loading-spinner"}),d.jsxs("p",{children:["Loading ",y(a),"..."]})]});if(l)return d.jsxs("div",{className:"error-container",children:[d.jsxs("p",{children:["Error: ",l]}),d.jsx(xe,{to:"/",className:"btn btn-primary",children:"Return Home"})]});const R=C();return d.jsxs("div",{className:"category-page",children:[d.jsx("div",{className:"category-hero",style:{backgroundImage:`linear-gradient(rgba(58, 42, 31, 0.7), rgba(58, 42, 31, 0.7)), url(${T(a)})`},children:d.jsxs("div",{className:"container",children:[d.jsx("h1",{children:y(a)}),d.jsx("p",{className:"category-description",children:v(a)})]})}),d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"category-controls",children:[d.jsxs("div",{className:"results-count",children:[e.length," ",e.length===1?"chocolate":"chocolates"," found"]}),d.jsxs("div",{className:"sort-control",children:[d.jsx("label",{htmlFor:"sort-by",children:"Sort by:"}),d.jsxs("select",{id:"sort-by",value:m,onChange:b,children:[d.jsx("option",{value:"rating",children:"Highest Rated"}),d.jsx("option",{value:"popularity",children:"Most Popular"}),d.jsx("option",{value:"cacao-high",children:"Cacao % (High to Low)"}),d.jsx("option",{value:"cacao-low",children:"Cacao % (Low to High)"}),d.jsx("option",{value:"name",children:"Name (A-Z)"})]})]})]}),R.length>0?d.jsx("div",{className:"chocolates-grid",children:R.map(S=>d.jsx(fy,{chocolate:S},S.id))}):d.jsxs("div",{className:"no-chocolates",children:[d.jsx("p",{children:"No chocolates found in this category."}),d.jsx(xe,{to:"/browse",className:"btn btn-primary",children:"Browse All Chocolates"})]})]})]})}function XO(){const[a,e]=F.useState(""),[t,r]=F.useState(""),[s,l]=F.useState(""),[u,m]=F.useState(""),[g,y]=F.useState(""),[v,b]=F.useState(!1),T=ki(),C=()=>(y(""),a.trim()?t.trim()?s.length<6?(y("Password must be at least 6 characters"),!1):s!==u?(y("Passwords do not match"),!1):!0:(y("Please enter your email"),!1):(y("Please enter your name"),!1)),R=async I=>{if(I.preventDefault(),!!C())try{b(!0),await PO(t,s,a),T("/profile")}catch(B){y(B.message)}finally{b(!1)}},S=async()=>{try{b(!0),await vx(),T("/profile")}catch(I){y(I.message)}finally{b(!1)}},x=async()=>{try{b(!0),await _x(),T("/profile")}catch(I){y(I.message)}finally{b(!1)}};return d.jsxs("div",{className:"auth-form-container",children:[d.jsx("h2",{children:"Join the Chocolate Community"}),d.jsx("p",{className:"auth-subtitle",children:"Sign up to review chocolates, track favorites, and get personalized recommendations."}),g&&d.jsx("div",{className:"auth-error",children:g}),d.jsxs("form",{onSubmit:R,className:"auth-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"displayName",children:"Name"}),d.jsx("input",{type:"text",id:"displayName",value:a,onChange:I=>e(I.target.value),required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",value:t,onChange:I=>r(I.target.value),required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"password",children:"Password"}),d.jsx("input",{type:"password",id:"password",value:s,onChange:I=>l(I.target.value),required:!0,minLength:"6"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),d.jsx("input",{type:"password",id:"confirmPassword",value:u,onChange:I=>m(I.target.value),required:!0})]}),d.jsx("button",{type:"submit",className:"auth-button",disabled:v,children:v?"Creating Account...":"Sign Up"})]}),d.jsx("div",{className:"auth-divider",children:d.jsx("span",{children:"or"})}),d.jsxs("div",{className:"social-buttons",children:[d.jsxs("button",{type:"button",className:"social-button google",onClick:S,disabled:v,children:[d.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12.545 10.239v3.821h5.445c-0.712 2.315-2.647 3.972-5.445 3.972-3.332 0-6.033-2.701-6.033-6.032s2.701-6.032 6.033-6.032c1.498 0 2.866 0.549 3.921 1.453l2.814-2.814c-1.79-1.677-4.184-2.702-6.735-2.702-5.522 0-10 4.478-10 10s4.478 10 10 10c8.396 0 10.201-7.835 9.412-11.566l-9.412-0.1z"})}),"Continue with Google"]}),d.jsxs("button",{type:"button",className:"social-button facebook",onClick:x,disabled:v,children:[d.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M13.397 20.997v-8.196h2.765l0.411-3.209h-3.176v-2.044c0-0.926 0.258-1.559 1.587-1.559h1.684v-2.861c-0.82-0.088-1.643-0.13-2.467-0.131-2.446 0-4.13 1.495-4.13 4.231v2.355h-2.777v3.209h2.777v8.202c2.379 0.253 4.268 0.13 3.326-0.003z"})}),"Continue with Facebook"]})]}),d.jsxs("p",{className:"auth-link",children:["Already have an account? ",d.jsx(xe,{to:"/login",children:"Log in"})]})]})}function ZO(){const[a,e]=F.useState(""),[t,r]=F.useState(""),[s,l]=F.useState(""),[u,m]=F.useState(""),[g,y]=F.useState(!1),v=ki(),b=async S=>{S.preventDefault();try{y(!0),await UO(a,t),v("/profile")}catch{l("Invalid email or password")}finally{y(!1)}},T=async()=>{try{y(!0),await vx(),v("/profile")}catch(S){l(S.message)}finally{y(!1)}},C=async()=>{try{y(!0),await _x(),v("/profile")}catch(S){l(S.message)}finally{y(!1)}},R=async()=>{if(!a){l("Please enter your email address");return}try{await VO(a),m("Password reset email sent. Check your inbox."),l("")}catch{l("Error sending reset email. Please try again.")}};return d.jsxs("div",{className:"auth-form-container",children:[d.jsx("h2",{children:"Welcome Back"}),d.jsx("p",{className:"auth-subtitle",children:"Log in to continue your chocolate journey"}),s&&d.jsx("div",{className:"auth-error",children:s}),u&&d.jsx("div",{className:"auth-success",children:u}),d.jsxs("form",{onSubmit:b,className:"auth-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",value:a,onChange:S=>e(S.target.value),required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"password",children:"Password"}),d.jsx("input",{type:"password",id:"password",value:t,onChange:S=>r(S.target.value),required:!0})]}),d.jsx("div",{className:"forgot-password",children:d.jsx("button",{type:"button",onClick:R,className:"reset-button",children:"Forgot password?"})}),d.jsx("button",{type:"submit",className:"auth-button",disabled:g,children:g?"Logging in...":"Log In"})]}),d.jsx("div",{className:"auth-divider",children:d.jsx("span",{children:"or"})}),d.jsxs("div",{className:"social-buttons",children:[d.jsxs("button",{type:"button",className:"social-button google",onClick:T,disabled:g,children:[d.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12.545 10.239v3.821h5.445c-0.712 2.315-2.647 3.972-5.445 3.972-3.332 0-6.033-2.701-6.033-6.032s2.701-6.032 6.033-6.032c1.498 0 2.866 0.549 3.921 1.453l2.814-2.814c-1.79-1.677-4.184-2.702-6.735-2.702-5.522 0-10 4.478-10 10s4.478 10 10 10c8.396 0 10.201-7.835 9.412-11.566l-9.412-0.1z"})}),"Continue with Google"]}),d.jsxs("button",{type:"button",className:"social-button facebook",onClick:C,disabled:g,children:[d.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M13.397 20.997v-8.196h2.765l0.411-3.209h-3.176v-2.044c0-0.926 0.258-1.559 1.587-1.559h1.684v-2.861c-0.82-0.088-1.643-0.13-2.467-0.131-2.446 0-4.13 1.495-4.13 4.231v2.355h-2.777v3.209h2.777v8.202c2.379 0.253 4.268 0.13 3.326-0.003z"})}),"Continue with Facebook"]})]}),d.jsxs("p",{className:"auth-link",children:["Don't have an account? ",d.jsx(xe,{to:"/signup",children:"Sign up"})]})]})}function JO(){const[a,e]=F.useState(""),[t,r]=F.useState(!1),s=F.useRef(null),l=ki(),m=ja().pathname==="/",g=v=>{v.preventDefault(),a.trim()&&(l(`/search?query=${encodeURIComponent(a)}`),e(""))},y=()=>{r(!t)};return F.useEffect(()=>{function v(b){s.current&&!s.current.contains(b.target)&&r(!1)}return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[s]),d.jsx("header",{className:"header",children:d.jsxs("div",{className:"container",children:[d.jsx(xe,{to:"/",className:"logo",children:d.jsx("h1",{children:"Chocly"})}),!m&&d.jsxs("form",{className:"search-form",onSubmit:g,children:[d.jsx("input",{type:"text",placeholder:"Search chocolates, makers...",value:a,onChange:v=>e(v.target.value)}),d.jsx("button",{type:"submit",children:"Search"})]}),d.jsxs("div",{className:"nav-container",ref:s,children:[d.jsxs("button",{className:"menu-toggle",onClick:y,children:["Menu",d.jsxs("span",{className:`menu-icon ${t?"open":""}`,children:[d.jsx("span",{}),d.jsx("span",{}),d.jsx("span",{})]})]}),d.jsxs("nav",{className:`nav ${t?"open":""}`,children:[d.jsxs("div",{className:"nav-section",children:[d.jsx("h3",{children:"Browse"}),d.jsx(xe,{to:"/",onClick:()=>r(!1),children:"Home"}),d.jsx(xe,{to:"/browse",onClick:()=>r(!1),children:"All Chocolates"}),d.jsx(xe,{to:"/barcode",onClick:()=>r(!1),children:"Barcode Search"}),d.jsx(xe,{to:"/category/dark",onClick:()=>r(!1),children:"Dark Chocolate"}),d.jsx(xe,{to:"/category/milk",onClick:()=>r(!1),children:"Milk Chocolate"}),d.jsx(xe,{to:"/category/white",onClick:()=>r(!1),children:"White Chocolate"})]}),d.jsxs("div",{className:"nav-section",children:[d.jsx("h3",{children:"Account"}),d.jsx(xe,{to:"/profile",onClick:()=>r(!1),children:"My Profile"}),d.jsx(xe,{to:"/favorites",onClick:()=>r(!1),children:"My Favorites"})]}),d.jsxs("div",{className:"nav-section",children:[d.jsx("h3",{children:"About"}),d.jsx(xe,{to:"/about",onClick:()=>r(!1),children:"About Us"}),d.jsx(xe,{to:"/contact",onClick:()=>r(!1),children:"Contact"})]})]})]})]})})}function eP(){const a=new Date().getFullYear();return d.jsx("footer",{className:"footer",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"footer-content",children:[d.jsxs("div",{className:"footer-logo",children:[d.jsx(xe,{to:"/",className:"logo-link",children:d.jsx("h2",{children:"Chocly"})}),d.jsx("p",{className:"tagline",children:"Discover better chocolate."})]}),d.jsxs("div",{className:"footer-links",children:[d.jsxs("div",{className:"footer-links-column",children:[d.jsx("h3",{children:"Explore"}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(xe,{to:"/browse",children:"All Chocolates"})}),d.jsx("li",{children:d.jsx(xe,{to:"/category/dark",children:"Dark Chocolate"})}),d.jsx("li",{children:d.jsx(xe,{to:"/category/milk",children:"Milk Chocolate"})}),d.jsx("li",{children:d.jsx(xe,{to:"/category/origin",children:"Single Origin"})})]})]}),d.jsxs("div",{className:"footer-links-column",children:[d.jsx("h3",{children:"Account"}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(xe,{to:"/signup",children:"Sign Up"})}),d.jsx("li",{children:d.jsx(xe,{to:"/login",children:"Log In"})}),d.jsx("li",{children:d.jsx(xe,{to:"/profile",children:"My Profile"})}),d.jsx("li",{children:d.jsx(xe,{to:"/favorites",children:"My Favorites"})})]})]}),d.jsxs("div",{className:"footer-links-column",children:[d.jsx("h3",{children:"Company"}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(xe,{to:"/about",children:"About Us"})}),d.jsx("li",{children:d.jsx(xe,{to:"/contact",children:"Contact"})}),d.jsx("li",{children:d.jsx(xe,{to:"/privacy-policy",children:"Privacy Policy"})}),d.jsx("li",{children:d.jsx(xe,{to:"/terms-of-service",children:"Terms of Service"})})]})]})]})]}),d.jsxs("div",{className:"footer-bottom",children:[d.jsxs("p",{className:"copyright",children:[" ",a," Chocly. All rights reserved."]}),d.jsxs("div",{className:"social-icons",children:[d.jsx("a",{href:"#",className:"social-icon instagram","aria-label":"Instagram",children:d.jsx("span",{className:"sr-only",children:"Instagram"})}),d.jsx("a",{href:"#",className:"social-icon twitter","aria-label":"Twitter",children:d.jsx("span",{className:"sr-only",children:"Twitter"})}),d.jsx("a",{href:"#",className:"social-icon facebook","aria-label":"Facebook",children:d.jsx("span",{className:"sr-only",children:"Facebook"})})]})]})]})})}function tP(){const[a,e]=F.useState([]),[t,r]=F.useState(!0),[s,l]=F.useState({});F.useEffect(()=>{(async()=>{try{const g=await dy();g.sort((y,v)=>y.name.localeCompare(v.name)),e(g)}catch(g){console.error("Error fetching chocolates:",g)}finally{r(!1)}})()},[]);const u=async(m,g)=>{l(y=>({...y,[m]:"uploading"}));try{await xO(m,g),l(y=>({...y,[m]:"success"})),e(y=>y.map(v=>v.id===m?{...v,imageUrl:URL.createObjectURL(g)}:v))}catch(y){console.error("Error uploading image:",y),l(v=>({...v,[m]:"error"}))}};return d.jsx("div",{className:"batch-upload-page",children:d.jsxs("div",{className:"container",children:[d.jsx("h1",{children:"Batch Image Upload"}),d.jsx("p",{className:"page-description",children:"Upload label images for multiple chocolates"}),t?d.jsx("div",{className:"loading",children:"Loading chocolates..."}):d.jsx("div",{className:"chocolates-grid",children:a.map(m=>d.jsxs("div",{className:"chocolate-upload-card",children:[d.jsxs("div",{className:"chocolate-info",children:[d.jsx("h3",{children:m.name}),d.jsx("p",{children:m.maker})]}),d.jsx("div",{className:"chocolate-image-container",children:m.imageUrl?d.jsx("img",{src:m.imageUrl,alt:m.name,className:"chocolate-image"}):d.jsx("div",{className:"no-image-placeholder",children:"No label image"})}),d.jsxs("div",{className:"upload-controls",children:[d.jsxs("label",{className:`upload-button ${s[m.id]==="uploading"?"disabled":""}`,children:[m.imageUrl?"Change Image":"Upload Image",d.jsx("input",{type:"file",accept:"image/*",disabled:s[m.id]==="uploading",style:{display:"none"},onChange:g=>{g.target.files&&g.target.files[0]&&u(m.id,g.target.files[0])}})]}),s[m.id]==="uploading"&&d.jsx("span",{className:"status-text uploading",children:"Uploading..."}),s[m.id]==="success"&&d.jsx("span",{className:"status-text success",children:" Uploaded"}),s[m.id]==="error"&&d.jsx("span",{className:"status-text error",children:"Error uploading"})]})]},m.id))})]})})}function nP({onImageSelected:a,currentImageUrl:e=null}){const[t,r]=F.useState(e),[s,l]=F.useState(!1),u=m=>{if(m.target.files&&m.target.files[0]){const g=m.target.files[0],y=new FileReader;y.onload=v=>{r(v.target.result)},y.readAsDataURL(g),a(g)}};return d.jsxs("div",{className:"image-uploader",children:[d.jsx("div",{className:"image-preview-container",children:t?d.jsx("img",{src:t,alt:"Preview",className:"image-preview"}):d.jsx("div",{className:"image-placeholder",children:d.jsx("span",{children:"No Image Selected"})})}),d.jsxs("div",{className:"upload-controls",children:[d.jsxs("label",{className:"upload-button",children:[e?"Change Image":"Upload Label Image",d.jsx("input",{type:"file",accept:"image/*",onChange:u,disabled:s,style:{display:"none"}})]}),s&&d.jsx("span",{className:"uploading-text",children:"Uploading..."})]})]})}const rP=async()=>{console.log("Starting to add initial chocolates...");const a=await sn(vt(ze,"makers")),e=await sn(vt(ze,"tags")),t={};a.forEach(u=>{t[u.data().name]=u.id});const r={};e.forEach(u=>{r[u.data().name]=u.id}),console.log("Loaded makers and tags");const s=[{name:"Valrhona Guanaja 70%",makerId:t.Valrhona,type:"Dark",origin:"Blend (South America and Caribbean)",cacaoPercentage:70,description:"A complex dark chocolate with intense bittersweet notes and hints of red fruits and coffee. Renowned among pastry chefs worldwide for its depth of flavor.",ingredients:"Cocoa beans, sugar, cocoa butter, soy lecithin, vanilla extract",tagIds:[r.Dark,r.Fruity,r.Earthy,r["Single Origin"]],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Lindt Excellence 85% Cocoa",makerId:t.Lindt,type:"Dark",origin:"Various African and South American regions",cacaoPercentage:85,description:"A robust dark chocolate with pronounced cocoa flavor, low sweetness, and subtle notes of dried fruit.",ingredients:"Chocolate, cocoa powder, cocoa butter, sugar, vanilla",tagIds:[r.Dark,r.Earthy,r.Woody],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Godiva Signature Dark Chocolate",makerId:t.Godiva,type:"Dark",origin:"Blend (West Africa)",cacaoPercentage:72,description:"A balanced dark chocolate with a smooth melt and refined flavor profile featuring subtle vanilla notes.",ingredients:"Cocoa mass, sugar, cocoa butter, soy lecithin, natural vanilla flavor",tagIds:[r.Dark,r.Vanilla],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Ghirardelli Intense Dark Midnight Reverie",makerId:t.Ghirardelli,type:"Dark",origin:"Blend (South America)",cacaoPercentage:86,description:"An intensely dark chocolate with a full-bodied taste that reveals deep cocoa notes with minimal sweetness.",ingredients:"Unsweetened chocolate, cocoa butter, sugar, milk fat, soy lecithin, vanilla",tagIds:[r.Dark,r.Bittersweet,r.Earthy],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Theo Pure 70% Dark Chocolate",makerId:t["Theo Chocolate"],type:"Dark",origin:"Congo and Peru",cacaoPercentage:70,description:"Ethically sourced organic chocolate with bright fruity notes, a clean finish, and medium intensity.",ingredients:"Cocoa beans, cane sugar, cocoa butter",tagIds:[r.Dark,r.Fruity,r.Organic,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Amedei Porcelana",makerId:t.Amedei,type:"Dark",origin:"Venezuela (Criollo beans)",cacaoPercentage:70,description:"One of the world's most exclusive chocolates, made from rare white Porcelana beans. Offers delicate floral notes with remarkable smoothness.",ingredients:"Cocoa mass, cane sugar, cocoa butter, vanilla",tagIds:[r.Dark,r.Floral,r["Single Origin"],r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Mast Brothers Brooklyn Blend",makerId:t["Mast Brothers"],type:"Dark",origin:"Blend (Dominican Republic, Madagascar, Venezuela)",cacaoPercentage:73,description:"Artisanal chocolate with a distinctive flavor profile featuring notes of dried cherries, tobacco, and leather.",ingredients:"Cacao, cane sugar",tagIds:[r.Dark,r.Fruity,r.Earthy,r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Dandelion Ambanja, Madagascar",makerId:t["Dandelion Chocolate"],type:"Dark",origin:"Madagascar",cacaoPercentage:70,description:"Single-origin chocolate with bright citrus and raspberry notes characteristic of Madagascar beans.",ingredients:"Cocoa beans, cane sugar",tagIds:[r.Dark,r.Fruity,r.Citrus,r.Berry,r["Single Origin"],r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Marou Tien Giang 70%",makerId:t.Marou,type:"Dark",origin:"Tien Giang, Vietnam",cacaoPercentage:70,description:"Made from beans grown in Vietnam's Mekong Delta, offering woody and spice notes with a uniquely Vietnamese character.",ingredients:"Cacao beans, cane sugar, cacao butter",tagIds:[r.Dark,r.Spicy,r.Woody,r["Single Origin"]],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Willie's Cacao Indonesian Black 100%",makerId:t["Willie's Cacao"],type:"Dark",origin:"Sumatran, Indonesia",cacaoPercentage:100,description:"An intense pure cacao experience with no added sugar. Features earthy, tobacco notes with a hint of spice.",ingredients:"Cacao",tagIds:[r.Dark,r.Earthy,r.Spicy,r["Single Origin"],r.Vegan],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Lindt Lindor Milk Chocolate Truffles",makerId:t.Lindt,type:"Milk",origin:"Blend",cacaoPercentage:30,description:"Smooth milk chocolate shell with an irresistibly creamy melting filling.",ingredients:"Sugar, vegetable fat, cocoa butter, milk ingredients, chocolate, soy lecithin, barley malt, artificial flavoring",tagIds:[r.Milk,r.Vanilla],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Valrhona Dulcey Blond Chocolate",makerId:t.Valrhona,type:"Milk",origin:"Blend",cacaoPercentage:32,description:"A distinctive 'blond' chocolate with a unique caramelized flavor profile featuring biscuit notes and a velvety texture.",ingredients:"Sugar, cocoa butter, whole milk powder, dried skimmed milk, whey, butter, soy lecithin, natural vanilla extract",tagIds:[r.Milk,r.Caramel,r.Vanilla],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Godiva White Chocolate Vanilla Bean",makerId:t.Godiva,type:"White",origin:"N/A",cacaoPercentage:0,description:"Luxurious white chocolate infused with real vanilla bean for a rich, creamy flavor profile.",ingredients:"Sugar, cocoa butter, milk powder, soy lecithin, vanilla extract, vanilla beans",tagIds:[r.White,r.Vanilla],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Ghirardelli Milk Chocolate Sea Salt Caramel Squares",makerId:t.Ghirardelli,type:"Milk",origin:"Blend",cacaoPercentage:32,description:"Smooth milk chocolate squares filled with a flowing caramel center and a touch of sea salt.",ingredients:"Sugar, corn syrup, milk chocolate, cocoa butter, milk, soy lecithin, vanilla, salt",tagIds:[r.Milk,r.Caramel],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0},{name:"Theo Salted Almond 70% Dark Chocolate",makerId:t["Theo Chocolate"],type:"Dark",origin:"Blend (Congo and Peru)",cacaoPercentage:70,description:"A crunchy dark chocolate bar with roasted almonds and a hint of sea salt, creating a perfect sweet-savory balance.",ingredients:"Cocoa beans, sugar, almonds, salt",tagIds:[r.Dark,r.Nutty,r.Organic,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=Chocolate",averageRating:0,reviewCount:0}],l=vt(ze,"chocolates");for(const u of s)try{if(!u.makerId){console.error(`Missing maker ID for chocolate: ${u.name}`);continue}if(u.tagIds.some(y=>!y)){console.error(`Missing tag IDs for chocolate: ${u.name}`);continue}const g=Dt.now();await wi(l,{...u,createdAt:g,updatedAt:g}),console.log(`Added chocolate: ${u.name}`)}catch(m){console.error(`Error adding ${u.name}:`,m)}console.log("Finished adding initial chocolates")},aP=async()=>{console.log("Starting to add commercial chocolate brands...");const a=await sn(vt(ze,"makers")),e=await sn(vt(ze,"tags")),t={};a.forEach(b=>{t[b.data().name]=b.id});const r={};e.forEach(b=>{r[b.data().name]=b.id}),console.log("Loaded makers and tags");const s=[{name:"Hershey's",country:"United States",website:"https://www.hersheys.com"},{name:"Mars",country:"United States",website:"https://www.mars.com"},{name:"Ferrero",country:"Italy",website:"https://www.ferrero.com"},{name:"Nestl",country:"Switzerland",website:"https://www.nestle.com"},{name:"Cadbury",country:"United Kingdom",website:"https://www.cadbury.co.uk"},{name:"Chocolove",country:"United States",website:"https://www.chocolove.com"},{name:"Green & Black's",country:"United Kingdom",website:"https://www.greenandblacks.co.uk"},{name:"Endangered Species",country:"United States",website:"https://www.chocolatebar.com"},{name:"Divine",country:"United Kingdom",website:"https://www.divinechocolate.com"},{name:"Hu",country:"United States",website:"https://hukitchen.com"},{name:"Alter Eco",country:"United States",website:"https://www.alterecofoods.com"},{name:"Ritter Sport",country:"Germany",website:"https://www.ritter-sport.de/en"},{name:"Milka",country:"Switzerland",website:"https://www.milka.com"},{name:"Tony's Chocolonely",country:"Netherlands",website:"https://tonyschocolonely.com"},{name:"Dove",country:"United States",website:"https://www.dovechocolate.com"},{name:"Ghirardelli",country:"United States",website:"https://www.ghirardelli.com"},{name:"Taza",country:"United States",website:"https://www.tazachocolate.com"},{name:"Equal Exchange",country:"United States",website:"https://equalexchange.coop"},{name:"Toblerone",country:"Switzerland",website:"https://www.toblerone.com"},{name:"Guittard",country:"United States",website:"https://www.guittard.com"}],l=vt(ze,"makers");for(const b of s){if(t[b.name]){console.log(`Maker "${b.name}" already exists, skipping`);continue}try{const T=await wi(l,b);console.log(`Added new maker: ${b.name} with ID: ${T.id}`),t[b.name]=T.id}catch(T){console.error(`Error adding maker ${b.name}:`,T)}}const u=[{name:"Hershey's Milk Chocolate Bar",makerId:t["Hershey's"],type:"Milk",origin:"Blend",cacaoPercentage:11,description:"The classic American milk chocolate bar with a sweet, slightly tangy flavor profile that's instantly recognizable.",ingredients:"Sugar, milk, chocolate, cocoa butter, lactose, milk fat, soy lecithin, PGPR, vanillin",tagIds:[r.Milk],imageUrl:"https://placehold.co/300x300?text=Hershey",averageRating:0,reviewCount:0},{name:"Hershey's Special Dark",makerId:t["Hershey's"],type:"Dark",origin:"Blend",cacaoPercentage:45,description:"A slightly darker chocolate offering from Hershey's with a more pronounced cocoa flavor than their milk chocolate.",ingredients:"Sugar, chocolate, cocoa butter, cocoa processed with alkali, milk fat, soy lecithin, vanillin, milk",tagIds:[r.Dark],imageUrl:"https://placehold.co/300x300?text=HersheyDark",averageRating:0,reviewCount:0},{name:"Cadbury Dairy Milk",makerId:t.Cadbury,type:"Milk",origin:"Blend",cacaoPercentage:26,description:"Smooth, creamy milk chocolate with a distinctive flavor profile and higher milk content than many competitors.",ingredients:"Milk, sugar, cocoa butter, cocoa mass, vegetable fats, emulsifiers, flavourings",tagIds:[r.Milk,r.Creamy],imageUrl:"https://placehold.co/300x300?text=Cadbury",averageRating:0,reviewCount:0},{name:"Mars Bar",makerId:t.Mars,type:"Milk",origin:"Blend",cacaoPercentage:25,description:"Nougat and caramel covered in milk chocolate, creating a sweet, chewy treat with multiple textures.",ingredients:"Sugar, glucose syrup, milk solids, cocoa butter, cocoa mass, vegetable fat, barley malt extract, emulsifier, salt, egg white, natural flavor",tagIds:[r.Milk,r.Caramel],imageUrl:"https://placehold.co/300x300?text=Mars",averageRating:0,reviewCount:0},{name:"Nestl Crunch",makerId:t.Nestl,type:"Milk",origin:"Blend",cacaoPercentage:22,description:"Milk chocolate with crisped rice, creating a distinctive crunchy texture and sweet flavor.",ingredients:"Sugar, chocolate, cocoa butter, milk, crisped rice, soy lecithin, vanillin",tagIds:[r.Milk],imageUrl:"https://placehold.co/300x300?text=Crunch",averageRating:0,reviewCount:0},{name:"Milka Alpine Milk Chocolate",makerId:t.Milka,type:"Milk",origin:"Blend (European)",cacaoPercentage:30,description:"Creamy European milk chocolate with a distinctive flavor from Alpine milk. Smoother and less sweet than American counterparts.",ingredients:"Sugar, cocoa butter, cocoa mass, whey powder, butterfat, emulsifier, hazelnut paste, flavoring",tagIds:[r.Milk,r.Creamy],imageUrl:"https://placehold.co/300x300?text=Milka",averageRating:0,reviewCount:0},{name:"Dove Milk Chocolate",makerId:t.Dove,type:"Milk",origin:"Blend",cacaoPercentage:33,description:"Silky, smooth milk chocolate with a melt-in-your-mouth texture and less sweetness than other mass market brands.",ingredients:"Sugar, cocoa butter, chocolate, skim milk, milk fat, soy lecithin, artificial flavors",tagIds:[r.Milk,r.Creamy],imageUrl:"https://placehold.co/300x300?text=Dove",averageRating:0,reviewCount:0},{name:"Toblerone Milk Chocolate",makerId:t.Toblerone,type:"Milk",origin:"Switzerland",cacaoPercentage:28,description:"Distinctive triangular sections of Swiss milk chocolate with honey and almond nougat pieces.",ingredients:"Sugar, whole milk powder, cocoa butter, cocoa mass, honey, almonds, emulsifier, egg white, vanilla",tagIds:[r.Milk,r.Nutty,r.Honey],imageUrl:"https://placehold.co/300x300?text=Toblerone",averageRating:0,reviewCount:0},{name:"Ritter Sport Milk Chocolate",makerId:t["Ritter Sport"],type:"Milk",origin:"Germany",cacaoPercentage:30,description:"Square-shaped German milk chocolate bar with a distinct snap and creamy flavor.",ingredients:"Sugar, cocoa butter, cocoa mass, whole milk powder, lactose, whey powder, butterfat, soy lecithin, natural vanilla",tagIds:[r.Milk],imageUrl:"https://placehold.co/300x300?text=RitterSport",averageRating:0,reviewCount:0},{name:"Ferrero Rocher",makerId:t.Ferrero,type:"Milk",origin:"Blend",cacaoPercentage:30,description:"Whole hazelnut encased in a thin wafer shell filled with hazelnut cream and covered in milk chocolate and chopped hazelnuts.",ingredients:"Milk chocolate, hazelnuts, sugar, palm oil, wheat flour, whey powder, cocoa powder, soy lecithin, vanillin",tagIds:[r.Milk,r.Nutty],imageUrl:"https://placehold.co/300x300?text=Ferrero",averageRating:0,reviewCount:0}],m=[{name:"Ghirardelli Milk Chocolate",makerId:t.Ghirardelli,type:"Milk",origin:"Blend",cacaoPercentage:31,description:"Smooth, creamy milk chocolate with a more refined flavor profile than mass market options.",ingredients:"Sugar, whole milk powder, cocoa butter, unsweetened chocolate, soy lecithin, vanilla",tagIds:[r.Milk,r.Creamy],imageUrl:"https://placehold.co/300x300?text=Ghirardelli",averageRating:0,reviewCount:0},{name:"Ghirardelli 60% Cacao Dark Chocolate",makerId:t.Ghirardelli,type:"Dark",origin:"Blend",cacaoPercentage:60,description:"Intensely flavorful dark chocolate with a good balance of sweetness and bitterness.",ingredients:"Unsweetened chocolate, sugar, cocoa butter, milk fat, soy lecithin, vanilla",tagIds:[r.Dark,r.Bittersweet],imageUrl:"https://placehold.co/300x300?text=GhirardelliDark",averageRating:0,reviewCount:0},{name:"Chocolove Almonds & Sea Salt in Dark Chocolate",makerId:t.Chocolove,type:"Dark",origin:"Blend",cacaoPercentage:55,description:"Dark chocolate with crunchy almonds and sea salt, featuring a love poem printed inside each wrapper.",ingredients:"Unsweetened chocolate, sugar, cocoa butter, almonds, sea salt, soy lecithin, vanilla",tagIds:[r.Dark,r.Nutty],imageUrl:"https://placehold.co/300x300?text=Chocolove",averageRating:0,reviewCount:0},{name:"Green & Black's Organic Dark 70%",makerId:t["Green & Black's"],type:"Dark",origin:"Blend",cacaoPercentage:70,description:"Intensely rich dark chocolate with a robust flavor profile and smooth finish.",ingredients:"Organic chocolate, organic raw cane sugar, organic cocoa butter, soy lecithin, organic vanilla extract",tagIds:[r.Dark,r.Organic,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=GreenAndBlacks",averageRating:0,reviewCount:0},{name:"Endangered Species Dark Chocolate with Sea Salt & Almonds",makerId:t["Endangered Species"],type:"Dark",origin:"Blend",cacaoPercentage:72,description:"Bold dark chocolate with roasted almonds and a touch of sea salt. Each purchase supports wildlife conservation.",ingredients:"Chocolate liquor, cane sugar, cocoa butter, almonds, sea salt, soy lecithin, vanilla",tagIds:[r.Dark,r.Nutty,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=EndangeredSpecies",averageRating:0,reviewCount:0},{name:"Lindt Excellence 70% Cocoa",makerId:t.Lindt,type:"Dark",origin:"Blend",cacaoPercentage:70,description:"Smooth dark chocolate with well-balanced bitterness and subtle fruity notes.",ingredients:"Chocolate, sugar, cocoa butter, cocoa powder, bourbon vanilla beans",tagIds:[r.Dark,r.Fruity],imageUrl:"https://placehold.co/300x300?text=LindtExcellence",averageRating:0,reviewCount:0},{name:"Divine Dark Chocolate with Mint",makerId:t.Divine,type:"Dark",origin:"Ghana",cacaoPercentage:70,description:"Rich dark chocolate with natural mint oil for a refreshing taste. Made with fair trade cocoa from Ghanaian farmer cooperatives.",ingredients:"Cocoa mass, sugar, cocoa butter, peppermint oil, vanilla",tagIds:[r.Dark,r["Fair Trade"],r["Single Origin"]],imageUrl:"https://placehold.co/300x300?text=Divine",averageRating:0,reviewCount:0},{name:"Tony's Chocolonely Milk Chocolate",makerId:t["Tony's Chocolonely"],type:"Milk",origin:"West Africa",cacaoPercentage:32,description:"Creamy milk chocolate with an irregular chunky shape, committed to slave-free chocolate production.",ingredients:"Sugar, dry whole milk, cocoa butter, cocoa mass, soy lecithin",tagIds:[r.Milk,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=Tonys",averageRating:0,reviewCount:0},{name:"Ritter Sport Dark Chocolate with Whole Hazelnuts",makerId:t["Ritter Sport"],type:"Dark",origin:"Blend",cacaoPercentage:50,description:"German dark chocolate squares filled with whole hazelnuts for a satisfying crunch.",ingredients:"Cocoa mass, sugar, hazelnuts, cocoa butter, butterfat, soy lecithin, natural flavoring",tagIds:[r.Dark,r.Nutty],imageUrl:"https://placehold.co/300x300?text=RitterNuts",averageRating:0,reviewCount:0},{name:"Guittard 64% Semisweet Chocolate Baking Bar",makerId:t.Guittard,type:"Dark",origin:"Blend",cacaoPercentage:64,description:"High-quality semisweet chocolate from a 150-year-old American chocolate maker, equally good for baking or eating.",ingredients:"Cacao beans, pure cane sugar, cocoa butter, sunflower lecithin, vanilla beans",tagIds:[r.Dark,r.Bittersweet],imageUrl:"https://placehold.co/300x300?text=Guittard",averageRating:0,reviewCount:0}],g=[{name:"Theo Pure 70% Dark Chocolate",makerId:t["Theo Chocolate"],type:"Dark",origin:"Blend (Congo, Peru)",cacaoPercentage:70,description:"Organic, fair trade dark chocolate with a complex flavor profile featuring notes of cherry and toasted nuts.",ingredients:"Cocoa beans, cane sugar, cocoa butter, ground vanilla bean",tagIds:[r.Dark,r.Organic,r["Fair Trade"],r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Theo",averageRating:0,reviewCount:0},{name:"Theo Salted Almond 70% Dark Chocolate",makerId:t["Theo Chocolate"],type:"Dark",origin:"Blend (Congo, Peru)",cacaoPercentage:70,description:"Organic dark chocolate with chunks of toasted almonds and a sprinkle of sea salt.",ingredients:"Cocoa beans, cane sugar, almonds, cocoa butter, sea salt, ground vanilla bean",tagIds:[r.Dark,r.Nutty,r.Organic,r["Fair Trade"],r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=TheoAlmond",averageRating:0,reviewCount:0},{name:"Hu Simple Dark Chocolate",makerId:t.Hu,type:"Dark",origin:"Blend",cacaoPercentage:70,description:"Minimally processed dark chocolate made with just three ingredients. Vegan, paleo, and free from refined sugar.",ingredients:"Organic cacao, organic coconut sugar, organic cocoa butter",tagIds:[r.Dark,r.Organic,r.Vegan,r["Gluten-Free"]],imageUrl:"https://placehold.co/300x300?text=Hu",averageRating:0,reviewCount:0},{name:"Hu Cashew Butter + Vanilla Bean Dark Chocolate",makerId:t.Hu,type:"Dark",origin:"Blend",cacaoPercentage:70,description:"Dark chocolate filled with house-made cashew butter and vanilla bean. Vegan-friendly with clean ingredients.",ingredients:"Organic cacao, organic coconut sugar, organic cocoa butter, cashews, vanilla bean",tagIds:[r.Dark,r.Nutty,r.Organic,r.Vegan,r["Gluten-Free"]],imageUrl:"https://placehold.co/300x300?text=HuCashew",averageRating:0,reviewCount:0},{name:"Alter Eco Dark Blackout Organic Chocolate",makerId:t["Alter Eco"],type:"Dark",origin:"Ecuador",cacaoPercentage:85,description:"Intensely dark chocolate with minimal sugar and pronounced cocoa flavor. Organic and fair trade certified.",ingredients:"Cocoa beans, cocoa butter, raw cane sugar, vanilla beans",tagIds:[r.Dark,r.Organic,r["Fair Trade"],r["Single Origin"]],imageUrl:"https://placehold.co/300x300?text=AlterEco",averageRating:0,reviewCount:0},{name:"Taza Stone Ground 70% Dark",makerId:t.Taza,type:"Dark",origin:"Dominican Republic",cacaoPercentage:70,description:"Minimally processed, stone-ground dark chocolate with a distinctively rustic texture and bold flavor.",ingredients:"Organic cacao beans, organic cane sugar, organic cocoa butter",tagIds:[r.Dark,r.Organic,r["Single Origin"],r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Taza",averageRating:0,reviewCount:0},{name:"Dandelion Small Batch Chocolate Madagascar",makerId:t["Dandelion Chocolate"],type:"Dark",origin:"Madagascar",cacaoPercentage:70,description:"Single-origin craft chocolate featuring bright, fruity notes characteristic of Madagascar cacao.",ingredients:"Cocoa beans, cane sugar",tagIds:[r.Dark,r.Fruity,r["Single Origin"],r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Dandelion",averageRating:0,reviewCount:0},{name:"Equal Exchange Organic Very Dark Chocolate",makerId:t["Equal Exchange"],type:"Dark",origin:"Blend (Latin America)",cacaoPercentage:71,description:"Fairly traded dark chocolate with a smooth texture and deep flavor from small-scale farmer cooperatives.",ingredients:"Organic chocolate liquor, organic raw cane sugar, organic cocoa butter, organic vanilla beans",tagIds:[r.Dark,r.Organic,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=EqualExchange",averageRating:0,reviewCount:0},{name:"Valrhona Carabe 66%",makerId:t.Valrhona,type:"Dark",origin:"Blend (Caribbean)",cacaoPercentage:66,description:"Professional-quality dark chocolate with balanced bitterness and notes of dried fruit from selected Caribbean beans.",ingredients:"Cocoa beans, sugar, cocoa butter, soy lecithin, natural vanilla extract",tagIds:[r.Dark,r.Fruity],imageUrl:"https://placehold.co/300x300?text=Valrhona",averageRating:0,reviewCount:0},{name:"Amedei Toscano Black 70%",makerId:t.Amedei,type:"Dark",origin:"Blend",cacaoPercentage:70,description:"Artisanal Italian dark chocolate with perfect balance and complexity from a blend of carefully selected cacao beans.",ingredients:"Cocoa mass, cane sugar, cocoa butter, vanilla",tagIds:[r.Dark,r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Amedei",averageRating:0,reviewCount:0}],y=[...u,...m,...g],v=vt(ze,"chocolates");for(const b of y)try{if(!b.makerId){console.error(`Missing maker ID for chocolate: ${b.name}`);continue}if(b.tagIds.some(R=>!R)){console.error(`Missing tag IDs for chocolate: ${b.name}`);continue}const C=Dt.now();await wi(v,{...b,createdAt:C,updatedAt:C}),console.log(`Added chocolate: ${b.name}`)}catch(T){console.error(`Error adding ${b.name}:`,T)}console.log("Finished adding commercial chocolates")},iP=async()=>{console.log("Starting to add 100 more commercial chocolates...");const a=await sn(vt(ze,"makers")),e=await sn(vt(ze,"tags")),t={};a.forEach(v=>{t[v.data().name]=v.id});const r={};e.forEach(v=>{r[v.data().name]=v.id}),console.log("Loaded makers and tags");const s=[{name:"Godiva Chocolatier",country:"Belgium/USA",website:"https://www.godiva.com"},{name:"Russell Stover",country:"United States",website:"https://www.russellstover.com"},{name:"Whitman's",country:"United States",website:"https://www.russellstover.com/whitman-s"},{name:"Scharffen Berger",country:"United States",website:"https://www.scharffenberger.com"},{name:"Dagoba",country:"United States",website:"https://www.dagobachocolate.com"},{name:"Chuao Chocolatier",country:"United States",website:"https://chuaochocolatier.com"},{name:"Lake Champlain Chocolates",country:"United States",website:"https://www.lakechamplainchocolates.com"},{name:"Vosges Haut-Chocolat",country:"United States",website:"https://www.vosgeschocolate.com"},{name:"Raaka Chocolate",country:"United States",website:"https://www.raakachocolate.com"},{name:"Chocolat Moderne",country:"United States",website:"https://www.chocolatmoderne.com"},{name:"Gourmet Boutique",country:"United States",website:"https://gourmetboutique.com"},{name:"Venchi",country:"Italy",website:"https://us.venchi.com"},{name:"Neuhaus",country:"Belgium",website:"https://www.neuhauschocolate.com"},{name:"Lily's",country:"United States",website:"https://lilys.com"},{name:"Seattle Chocolate",country:"United States",website:"https://www.seattlechocolate.com"},{name:"Pascha",country:"Peru/Canada",website:"https://www.paschachocolate.com"},{name:"Kinder",country:"Italy",website:"https://www.kinder.com"},{name:"Trader Joe's",country:"United States",website:"https://www.traderjoes.com"},{name:"Moonstruck",country:"United States",website:"https://www.moonstruckchocolate.com"},{name:"Whittaker's",country:"New Zealand",website:"https://www.whittakers.co.nz"},{name:"Tcho",country:"United States",website:"https://tcho.com"},{name:"Chocolatier Blue",country:"United States",website:"https://www.chocolatierblue.com"},{name:"Cordial",country:"United States",website:"https://cordialorganics.com"},{name:"Bissinger's",country:"United States",website:"https://www.bissingers.com"},{name:"Valor",country:"Spain",website:"https://www.valor.es"},{name:"Callebaut",country:"Belgium",website:"https://www.callebaut.com"},{name:"Schogetten",country:"Germany",website:"https://www.schogetten.com"},{name:"Reese's",country:"United States",website:"https://www.hersheys.com/reeses/"},{name:"Twix",country:"United States",website:"https://www.twix.com"},{name:"Snickers",country:"United States",website:"https://www.snickers.com"},{name:"Kit Kat",country:"United States/Japan",website:"https://www.kitkat.com"},{name:"Brookside",country:"United States",website:"https://www.brooksidechocolate.com"},{name:"See's Candies",country:"United States",website:"https://www.sees.com"},{name:"Perugina",country:"Italy",website:"https://www.perugina.com"},{name:"Moser Roth",country:"Germany",website:"https://www.aldi.us"}],l=vt(ze,"makers");for(const v of s){if(t[v.name]){console.log(`Maker "${v.name}" already exists, skipping`);continue}try{const b=await wi(l,v);console.log(`Added new maker: ${v.name} with ID: ${b.id}`),t[v.name]=b.id}catch(b){console.error(`Error adding maker ${v.name}:`,b)}}const u=[{name:"Mint",category:"Flavor"},{name:"Coffee",category:"Flavor"},{name:"Coconut",category:"Flavor"},{name:"Toffee",category:"Flavor"},{name:"Raspberry",category:"Flavor"},{name:"Orange",category:"Flavor"},{name:"Cherry",category:"Flavor"},{name:"Peanut",category:"Flavor"},{name:"Hazelnut",category:"Flavor"},{name:"Almond",category:"Flavor"},{name:"Pecan",category:"Flavor"},{name:"Chili",category:"Flavor"},{name:"Sea Salt",category:"Flavor"},{name:"Crunchy",category:"Texture"},{name:"Filled",category:"Type"},{name:"Sugar-Free",category:"Attribute"},{name:"Limited Edition",category:"Attribute"},{name:"Ruby",category:"Type"},{name:"Semisweet",category:"Type"},{name:"Seasonal",category:"Attribute"}],m=vt(ze,"tags");for(const v of u){if(r[v.name]){console.log(`Tag "${v.name}" already exists, skipping`);continue}try{const b=await wi(m,v);console.log(`Added new tag: ${v.name} with ID: ${b.id}`),r[v.name]=b.id}catch(b){console.error(`Error adding tag ${v.name}:`,b)}}const g=[{name:"Reese's Peanut Butter Cups",makerId:t["Reese's"],type:"Milk",origin:"United States",cacaoPercentage:25,description:"Iconic milk chocolate cups filled with sweetened peanut butter, creating a perfect balance of sweet and salty flavors.",ingredients:"Milk chocolate (sugar, cocoa butter, chocolate, milk, soy lecithin, PGPR), peanuts, sugar, dextrose, salt, TBHQ",tagIds:[r.Milk,r.Peanut,r.Filled],imageUrl:"https://placehold.co/300x300?text=Reeses",averageRating:0,reviewCount:0},{name:"Kit Kat",makerId:t["Kit Kat"],type:"Milk",origin:"United States",cacaoPercentage:22,description:"Crispy wafer fingers covered in smooth milk chocolate, known for its distinctive snap when broken.",ingredients:"Sugar, wheat flour, cocoa butter, nonfat milk, chocolate, palm kernel oil, lactose, soy lecithin, PGPR, yeast, salt, baking soda, artificial flavor",tagIds:[r.Milk,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=KitKat",averageRating:0,reviewCount:0},{name:"Snickers",makerId:t.Snickers,type:"Milk",origin:"United States",cacaoPercentage:20,description:"Nougat topped with caramel and peanuts, enrobed in milk chocolate. One of the best-selling candy bars in the US.",ingredients:"Milk chocolate, peanuts, corn syrup, sugar, palm oil, skim milk, lactose, salt, egg whites, artificial flavor",tagIds:[r.Milk,r.Peanut,r.Caramel,r.Nutty],imageUrl:"https://placehold.co/300x300?text=Snickers",averageRating:0,reviewCount:0},{name:"Twix",makerId:t.Twix,type:"Milk",origin:"United States",cacaoPercentage:21,description:"Crunchy cookie bars topped with caramel and coated in milk chocolate, usually sold in pairs.",ingredients:"Milk chocolate, enriched wheat flour, sugar, palm oil, corn syrup, skim milk, butter, salt, cocoa powder, soy lecithin, vanilla extract",tagIds:[r.Milk,r.Caramel,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=Twix",averageRating:0,reviewCount:0},{name:"Hershey's Cookies 'n' Creme",makerId:t["Hershey's"],type:"White",origin:"United States",cacaoPercentage:0,description:"White chocolate bar embedded with chocolate cookie pieces for a cookies and cream flavor.",ingredients:"Sugar, vegetable oil, cocoa butter, milk, lactose, chocolate cookie bits, soy lecithin, salt, artificial flavor",tagIds:[r.White,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=HersheyCookies",averageRating:0,reviewCount:0},{name:"Kinder Bueno",makerId:t.Kinder,type:"Milk",origin:"Italy",cacaoPercentage:28,description:"Thin wafer filled with hazelnut cream, covered in milk chocolate with a dark cocoa dusting.",ingredients:"Milk chocolate, sugar, palm oil, hazelnuts, wheat flour, milk powder, chocolate, soy lecithin, vanillin",tagIds:[r.Milk,r.Hazelnut,r.Filled,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=KinderBueno",averageRating:0,reviewCount:0},{name:"Milky Way",makerId:t.Mars,type:"Milk",origin:"United States",cacaoPercentage:23,description:"Chocolate-malt nougat topped with caramel and covered with milk chocolate.",ingredients:"Milk chocolate, corn syrup, sugar, hydrogenated palm kernel oil, skim milk, less than 2% of lactose, salt, egg whites, chocolate, artificial flavor",tagIds:[r.Milk,r.Caramel],imageUrl:"https://placehold.co/300x300?text=MilkyWay",averageRating:0,reviewCount:0},{name:"Butterfinger",makerId:t.Ferrero,type:"Milk",origin:"United States",cacaoPercentage:20,description:"Crispy, flaky peanut butter core covered in milk chocolate with a distinctive orange color.",ingredients:"Corn syrup, sugar, ground roasted peanuts, hydrogenated palm kernel oil, cocoa, molasses, milk, soy lecithin",tagIds:[r.Milk,r.Peanut,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=Butterfinger",averageRating:0,reviewCount:0},{name:"3 Musketeers",makerId:t.Mars,type:"Milk",origin:"United States",cacaoPercentage:22,description:"Fluffy chocolate-flavored nougat covered in milk chocolate, lighter than many other candy bars.",ingredients:"Milk chocolate, corn syrup, sugar, hydrogenated palm kernel oil, cocoa powder, egg whites, artificial flavor, soy lecithin",tagIds:[r.Milk],imageUrl:"https://placehold.co/300x300?text=3Musketeers",averageRating:0,reviewCount:0},{name:"York Peppermint Pattie",makerId:t["Hershey's"],type:"Dark",origin:"United States",cacaoPercentage:50,description:"Strong mint-flavored fondant covered in dark chocolate, known for its refreshing taste.",ingredients:"Sugar, corn syrup, semi-sweet chocolate, invert sugar, egg whites, oil of peppermint",tagIds:[r.Dark,r.Mint,r.Filled],imageUrl:"https://placehold.co/300x300?text=YorkPeppermint",averageRating:0,reviewCount:0},{name:"Lindt Lindor Truffles Assorted",makerId:t.Lindt,type:"Milk",origin:"Switzerland",cacaoPercentage:30,description:"Assorted flavors of the famous smooth-melting chocolate truffles with soft centers.",ingredients:"Sugar, vegetable fats, cocoa butter, milk ingredients, chocolate, soy lecithin, artificial flavors",tagIds:[r.Milk,r.Filled,r.Creamy],imageUrl:"https://placehold.co/300x300?text=LindorAssorted",averageRating:0,reviewCount:0},{name:"Godiva Gold Ballotin",makerId:t["Godiva Chocolatier"],type:"Milk",origin:"Belgium",cacaoPercentage:31,description:"Assorted premium Belgian chocolate pralines in the signature gold box, perfect for gifting.",ingredients:"Sugar, cocoa butter, cocoa mass, whole milk powder, hazelnuts, cream, butter, glucose syrup, invert sugar, soy lecithin",tagIds:[r.Milk,r.Filled,r.Hazelnut],imageUrl:"https://placehold.co/300x300?text=GodivaGold",averageRating:0,reviewCount:0},{name:"Russell Stover Assorted Chocolates",makerId:t["Russell Stover"],type:"Milk",origin:"United States",cacaoPercentage:29,description:"Classic American boxed chocolates with various fillings like caramel, nougat, and fruit creams.",ingredients:"Sugar, corn syrup, chocolate, cocoa butter, milk, cream, butter, egg whites, soy lecithin, vanilla, various flavors",tagIds:[r.Milk,r.Filled],imageUrl:"https://placehold.co/300x300?text=RussellStover",averageRating:0,reviewCount:0},{name:"Ghirardelli Squares Dark Chocolate Mint",makerId:t.Ghirardelli,type:"Dark",origin:"United States",cacaoPercentage:60,description:"Individually wrapped dark chocolate squares with a smooth mint filling.",ingredients:"Semi-sweet chocolate, sugar, cocoa butter, mint filling, milk fat, soy lecithin, vanilla",tagIds:[r.Dark,r.Mint,r.Filled],imageUrl:"https://placehold.co/300x300?text=GhirardelliMint",averageRating:0,reviewCount:0},{name:"Ghirardelli Squares Caramel",makerId:t.Ghirardelli,type:"Milk",origin:"United States",cacaoPercentage:32,description:"Individually wrapped milk chocolate squares with a flowing caramel center.",ingredients:"Milk chocolate, corn syrup, sugar, milk, butter, vanilla, soy lecithin, salt",tagIds:[r.Milk,r.Caramel,r.Filled],imageUrl:"https://placehold.co/300x300?text=GhirardelliCaramel",averageRating:0,reviewCount:0},{name:"Whitman's Sampler",makerId:t["Whitman's"],type:"Milk",origin:"United States",cacaoPercentage:30,description:"Iconic yellow box of assorted chocolates with a guide printed inside the lid, a classic American gift.",ingredients:"Sugar, corn syrup, milk chocolate, cream, cocoa butter, various nuts, fruit concentrates, soy lecithin",tagIds:[r.Milk,r.Filled,r.Nutty],imageUrl:"https://placehold.co/300x300?text=Whitmans",averageRating:0,reviewCount:0},{name:"Brookside Dark Chocolate Acai & Blueberry",makerId:t.Brookside,type:"Dark",origin:"United States",cacaoPercentage:60,description:"Fruit-flavored soft centers covered in dark chocolate, a popular choice for 'better-for-you' indulgence.",ingredients:"Dark chocolate, sugar, fruit juice concentrates (aai, blueberry), corn syrup, citric acid, natural flavors",tagIds:[r.Dark,r.Berry,r.Filled],imageUrl:"https://placehold.co/300x300?text=Brookside",averageRating:0,reviewCount:0},{name:"Ferrero Rocher Collection",makerId:t.Ferrero,type:"Milk",origin:"Italy",cacaoPercentage:30,description:"Assortment of Ferrero Rocher, Raffaello (coconut), and Rondnoir (dark) pralines in gold wrappers.",ingredients:"Milk chocolate, hazelnuts, sugar, palm oil, wheat flour, whey powder, cocoa powder, soy lecithin, vanillin",tagIds:[r.Milk,r.Hazelnut,r.Coconut,r.Filled,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=FerreroCollection",averageRating:0,reviewCount:0},{name:"Ritter Sport Marzipan",makerId:t["Ritter Sport"],type:"Dark",origin:"Germany",cacaoPercentage:50,description:"German dark chocolate square filled with marzipan (almond paste). A traditional European favorite.",ingredients:"Sugar, almonds, cocoa mass, cocoa butter, glucose syrup, invert sugar syrup, sweet whey powder, butterfat, soy lecithin",tagIds:[r.Dark,r.Almond,r.Filled],imageUrl:"https://placehold.co/300x300?text=RitterMarzipan",averageRating:0,reviewCount:0},{name:"Toblerone Dark",makerId:t.Toblerone,type:"Dark",origin:"Switzerland",cacaoPercentage:60,description:"Distinctive triangular dark chocolate bar with honey and almond nougat, a darker version of the classic.",ingredients:"Dark chocolate, sugar, honey, almonds, cocoa butter, egg white, natural flavors",tagIds:[r.Dark,r.Nutty,r.Honey],imageUrl:"https://placehold.co/300x300?text=TobleroneBlack",averageRating:0,reviewCount:0},{name:"Scharffen Berger 70% Cacao Bittersweet",makerId:t["Scharffen Berger"],type:"Dark",origin:"Blend",cacaoPercentage:70,description:"Artisanal dark chocolate with complex fruity notes and balanced acidity. One of America's original craft chocolates.",ingredients:"Cacao beans, sugar, cocoa butter, vanilla beans, soy lecithin",tagIds:[r.Dark,r.Fruity,r.Bittersweet],imageUrl:"https://placehold.co/300x300?text=ScharffenBerger",averageRating:0,reviewCount:0},{name:"Dagoba Organic Lavender Blueberry",makerId:t.Dagoba,type:"Dark",origin:"Blend",cacaoPercentage:59,description:"Organic dark chocolate infused with lavender and blueberry essences for a floral berry flavor.",ingredients:"Organic chocolate, organic cane sugar, organic cocoa butter, organic blueberries, organic lavender, organic vanilla bean",tagIds:[r.Dark,r.Organic,r.Berry,r.Floral],imageUrl:"https://placehold.co/300x300?text=Dagoba",averageRating:0,reviewCount:0},{name:"Chuao Chocolatier Potato Chip",makerId:t["Chuao Chocolatier"],type:"Milk",origin:"United States",cacaoPercentage:41,description:"Gourmet milk chocolate bar with crunchy kettle potato chips and sea salt for a sweet-salty experience.",ingredients:"Milk chocolate, potato chips, sea salt, soy lecithin, vanilla",tagIds:[r.Milk,r.Crunchy,r["Sea Salt"]],imageUrl:"https://placehold.co/300x300?text=ChuaoPotato",averageRating:0,reviewCount:0},{name:"Chuao Chocolatier Spicy Maya",makerId:t["Chuao Chocolatier"],type:"Dark",origin:"United States",cacaoPercentage:60,description:"Spicy dark chocolate inspired by Mayan traditions, featuring cinnamon, pasilla chile, and cayenne pepper.",ingredients:"Dark chocolate, cane sugar, cinnamon, pasilla chile, cayenne pepper, soy lecithin",tagIds:[r.Dark,r.Spicy,r.Chili],imageUrl:"https://placehold.co/300x300?text=ChuaoMaya",averageRating:0,reviewCount:0},{name:"Lily's Dark Chocolate",makerId:t["Lily's"],type:"Dark",origin:"Blend",cacaoPercentage:70,description:"Dark chocolate sweetened with stevia instead of sugar, popular with those limiting sugar intake.",ingredients:"Unsweetened chocolate, stevia extract, erythritol, inulin, cocoa butter, sunflower lecithin, vanilla",tagIds:[r.Dark,r["Sugar-Free"]],imageUrl:"https://placehold.co/300x300?text=Lilys",averageRating:0,reviewCount:0},{name:"Seattle Chocolate Truffle Bar",makerId:t["Seattle Chocolate"],type:"Milk",origin:"United States",cacaoPercentage:34,description:"Smooth, truffle-like textured chocolate bars in various flavors with bright, modern packaging.",ingredients:"Chocolate, cocoa butter, heavy cream, sugar, vanilla, soy lecithin",tagIds:[r.Milk,r.Creamy],imageUrl:"https://placehold.co/300x300?text=SeattleChoc",averageRating:0,reviewCount:0},{name:"Lake Champlain Five Star Bars",makerId:t["Lake Champlain Chocolates"],type:"Milk",origin:"United States",cacaoPercentage:34,description:"Gourmet chocolate bars with generous fillings like caramel, hazelnut, and fruit. Similar to premium candy bars.",ingredients:"Milk chocolate, sugar, cream, butter, caramel, hazelnuts, soy lecithin, vanilla",tagIds:[r.Milk,r.Filled,r.Caramel],imageUrl:"https://placehold.co/300x300?text=LakeChamplain",averageRating:0,reviewCount:0},{name:"Tcho Milk Chocolate",makerId:t.Tcho,type:"Milk",origin:"Blend",cacaoPercentage:39,description:"Higher cacao milk chocolate with caramel and dairy notes, made by a tech-influenced craft chocolate company.",ingredients:"Cacao beans, cane sugar, whole milk powder, cocoa butter, soy lecithin, vanilla beans",tagIds:[r.Milk,r.Caramel,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=Tcho",averageRating:0,reviewCount:0},{name:"Pascha Organic 85% Dark Chocolate",makerId:t.Pascha,type:"Dark",origin:"Peru",cacaoPercentage:85,description:"Allergen-free dark chocolate made in a dedicated facility without common allergens like dairy, nuts, and soy.",ingredients:"Organic cocoa mass, organic cocoa butter, organic cane sugar",tagIds:[r.Dark,r.Organic,r.Vegan,r["Gluten-Free"]],imageUrl:"https://placehold.co/300x300?text=Pascha",averageRating:0,reviewCount:0},{name:"Raaka Virgin Chocolate Bourbon Cask Aged",makerId:t["Raaka Chocolate"],type:"Dark",origin:"Blend",cacaoPercentage:68,description:"Unroasted 'virgin' chocolate made from beans aged in bourbon casks for a unique flavor profile.",ingredients:"Organic cacao beans, organic cane sugar, organic maple sugar, organic cacao butter",tagIds:[r.Dark,r.Organic,r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Raaka",averageRating:0,reviewCount:0},{name:"Reese's Peanut Butter Christmas Trees",makerId:t["Reese's"],type:"Milk",origin:"United States",cacaoPercentage:25,description:"Tree-shaped version of the classic peanut butter cups, available during the holiday season.",ingredients:"Milk chocolate, peanuts, sugar, dextrose, salt, TBHQ, soy lecithin",tagIds:[r.Milk,r.Peanut,r.Seasonal],imageUrl:"https://placehold.co/300x300?text=ReesesTree",averageRating:0,reviewCount:0},{name:"Lindt Gold Bunny",makerId:t.Lindt,type:"Milk",origin:"Switzerland",cacaoPercentage:30,description:"Iconic gold foil-wrapped hollow chocolate bunny, a classic Easter tradition.",ingredients:"Sugar, cocoa butter, milk powder, chocolate, soy lecithin, barley malt, artificial flavoring",tagIds:[r.Milk,r.Seasonal],imageUrl:"https://placehold.co/300x300?text=Lindt",imageUrl:"https://placehold.co/300x300?text=LindtBunny",averageRating:0,reviewCount:0},{name:"Cadbury Creme Egg",makerId:t.Cadbury,type:"Milk",origin:"United Kingdom",cacaoPercentage:26,description:"Egg-shaped milk chocolate shell with a sweet fondant filling that mimics an egg. Hugely popular Easter candy.",ingredients:"Milk chocolate, sugar, corn syrup, high fructose corn syrup, artificial color, egg whites, natural and artificial flavors",tagIds:[r.Milk,r.Filled,r.Seasonal],imageUrl:"https://placehold.co/300x300?text=CremEgg",averageRating:0,reviewCount:0},{name:"Hershey's Kisses Pumpkin Spice",makerId:t["Hershey's"],type:"Milk",origin:"United States",cacaoPercentage:23,description:"Fall seasonal variety of Hershey's Kisses with pumpkin spice flavored creme filling.",ingredients:"Milk chocolate, sugar, vegetable oil, corn syrup, milk, cocoa butter, pumpkin powder, cinnamon, nutmeg, cloves, artificial flavor",tagIds:[r.Milk,r.Filled,r.Seasonal],imageUrl:"https://placehold.co/300x300?text=KissesPumpkin",averageRating:0,reviewCount:0},{name:"Godiva Limited Edition Valentine's Day Heart Box",makerId:t["Godiva Chocolatier"],type:"Milk",origin:"Belgium",cacaoPercentage:31,description:"Heart-shaped luxury gift box with a curated selection of milk and dark chocolates for Valentine's Day.",ingredients:"Sugar, cocoa butter, milk, chocolate liquor, hazelnut paste, butter, soy lecithin, natural and artificial flavors",tagIds:[r.Milk,r.Filled,r.Seasonal,r["Limited Edition"]],imageUrl:"https://placehold.co/300x300?text=GodivaHeart",averageRating:0,reviewCount:0},{name:"Lindt White Chocolate Peppermint Truffles",makerId:t.Lindt,type:"White",origin:"Switzerland",cacaoPercentage:0,description:"Holiday edition white chocolate truffles with peppermint pieces and candy cane-like red streaks.",ingredients:"White chocolate, sugar, vegetable fat, milk ingredients, peppermint oil, soy lecithin, red colorant, natural flavor",tagIds:[r.White,r.Mint,r.Seasonal],imageUrl:"https://placehold.co/300x300?text=LindtPeppermint",averageRating:0,reviewCount:0},{name:"KitKat Pumpkin Pie",makerId:t["Kit Kat"],type:"Milk",origin:"United States",cacaoPercentage:22,description:"Fall limited edition KitKat featuring pumpkin pie flavored white creme coating instead of chocolate.",ingredients:"Sugar, white creme, wheat flour, nonfat milk, vegetable oils, cocoa butter, food starch, corn syrup, spices, artificial flavor",tagIds:[r.Milk,r.Crunchy,r.Seasonal,r["Limited Edition"]],imageUrl:"https://placehold.co/300x300?text=KitKatPumpkin",averageRating:0,reviewCount:0},{name:"M&M's Caramel",makerId:t.Mars,type:"Milk",origin:"United States",cacaoPercentage:23,description:"M&M's with a soft caramel center instead of the traditional chocolate center.",ingredients:"Milk chocolate, sugar, corn syrup, skim milk, cocoa butter, caramel, less than 2% of various ingredients (salt, artificial colors)",tagIds:[r.Milk,r.Caramel,r.Filled],imageUrl:"https://placehold.co/300x300?text=MandMsCaramel",averageRating:0,reviewCount:0},{name:"Ghirardelli Peppermint Bark",makerId:t.Ghirardelli,type:"White",origin:"United States",cacaoPercentage:0,description:"Holiday favorite featuring dark chocolate topped with white chocolate and peppermint pieces.",ingredients:"White chocolate, dark chocolate, sugar, cocoa butter, milk, vanilla, peppermint candy, soy lecithin",tagIds:[r.White,r.Dark,r.Mint,r.Seasonal],imageUrl:"https://placehold.co/300x300?text=GhirardelliMintBark",averageRating:0,reviewCount:0},{name:"Terry's Chocolate Orange",makerId:t.Cadbury,type:"Milk",origin:"United Kingdom",cacaoPercentage:25,description:"Ball of orange-flavored chocolate shaped like an orange and divided into segments. Popular during the holiday season.",ingredients:"Sugar, cocoa butter, cocoa mass, milk, vegetable fats, orange oil, emulsifiers, artificial flavors",tagIds:[r.Milk,r.Orange,r.Seasonal],imageUrl:"https://placehold.co/300x300?text=TerryChocOrange",averageRating:0,reviewCount:0},{name:"See's Assorted Chocolates",makerId:t["See's Candies"],type:"Milk",origin:"United States",cacaoPercentage:31,description:"Classic West Coast assorted boxed chocolates with nuts, caramels, and creams. A traditional American gift box.",ingredients:"Sugar, chocolate, butter, cream, milk, various nuts, corn syrup, soy lecithin, vanilla, salt",tagIds:[r.Milk,r.Filled,r.Nutty],imageUrl:"https://placehold.co/300x300?text=Sees",averageRating:0,reviewCount:0},{name:"See's Nuts & Chews",makerId:t["See's Candies"],type:"Milk",origin:"United States",cacaoPercentage:31,description:"Popular See's assortment featuring only nut and caramel-based chocolates, no soft centers.",ingredients:"Sugar, chocolate, almonds, walnuts, peanuts, pecans, butter, cream, milk, corn syrup, soy lecithin, vanilla, salt",tagIds:[r.Milk,r.Nutty,r.Caramel],imageUrl:"https://placehold.co/300x300?text=SeesNuts",averageRating:0,reviewCount:0},{name:"Godiva Dark Chocolate Assortment",makerId:t["Godiva Chocolatier"],type:"Dark",origin:"Belgium",cacaoPercentage:72,description:"Luxury gift box of dark chocolate pralines, ganaches, and truffles from this premium Belgian brand.",ingredients:"Dark chocolate, cocoa butter, hazelnuts, sugar, cream, butter, vanilla, soy lecithin",tagIds:[r.Dark,r.Filled,r.Hazelnut],imageUrl:"https://placehold.co/300x300?text=GodivaDark",averageRating:0,reviewCount:0},{name:"Neuhaus Belgian Chocolate Collection",makerId:t.Neuhaus,type:"Milk",origin:"Belgium",cacaoPercentage:33,description:"Assorted pralines from the inventor of the Belgian praline, in a luxurious gift box.",ingredients:"Milk chocolate, dark chocolate, white chocolate, hazelnuts, almonds, cream, butter, sugar, vanilla",tagIds:[r.Milk,r.Filled,r.Nutty],imageUrl:"https://placehold.co/300x300?text=Neuhaus",averageRating:0,reviewCount:0},{name:"Venchi Assorted Chocolate Gift Box",makerId:t.Venchi,type:"Dark",origin:"Italy",cacaoPercentage:56,description:"Elegant Italian chocolate assortment featuring gianduia (hazelnut chocolate), cremini, and dark chocolates.",ingredients:"Cocoa mass, sugar, hazelnuts, cocoa butter, whole milk powder, vanilla, soy lecithin",tagIds:[r.Dark,r.Hazelnut,r.Filled],imageUrl:"https://placehold.co/300x300?text=Venchi",averageRating:0,reviewCount:0},{name:"Vosges Haut-Chocolat Exotic Truffle Collection",makerId:t["Vosges Haut-Chocolat"],type:"Dark",origin:"United States/Blend",cacaoPercentage:62,description:"Innovative truffles with unexpected flavors like curry, wasabi, and various herbs and spices.",ingredients:"Dark chocolate, milk chocolate, white chocolate, heavy cream, butter, various spices and herbs, soy lecithin",tagIds:[r.Dark,r.Filled,r.Spicy],imageUrl:"https://placehold.co/300x300?text=Vosges",averageRating:0,reviewCount:0},{name:"Vosges Bacon Chocolate Bar",makerId:t["Vosges Haut-Chocolat"],type:"Milk",origin:"United States",cacaoPercentage:41,description:"Famous gourmet chocolate bar combining smoky bacon with sweet milk chocolate and sea salt.",ingredients:"Milk chocolate, bacon, sea salt, soy lecithin, vanilla",tagIds:[r.Milk,r["Sea Salt"]],imageUrl:"https://placehold.co/300x300?text=VosgesBacon",averageRating:0,reviewCount:0},{name:"Tony's Chocolonely Dark Chocolate Almond Sea Salt",makerId:t["Tony's Chocolonely"],type:"Dark",origin:"Ghana/Ivory Coast",cacaoPercentage:51,description:"Ethically sourced dark chocolate with almonds and sea salt in an irregularly divided bar.",ingredients:"Cocoa mass, sugar, almonds, cocoa butter, sea salt, soy lecithin, vanilla",tagIds:[r.Dark,r.Almond,r["Sea Salt"],r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=TonysAlmond",averageRating:0,reviewCount:0},{name:"Chocolat Moderne Avant-Garde Bar",makerId:t["Chocolat Moderne"],type:"Dark",origin:"Blend",cacaoPercentage:65,description:"Artist-designed bars with unexpected flavor combinations and beautiful transfer designs.",ingredients:"Dark chocolate, cocoa butter, vanilla, natural flavors, sea salt",tagIds:[r.Dark],imageUrl:"https://placehold.co/300x300?text=ChocModerne",averageRating:0,reviewCount:0},{name:"Green & Black's Organic Maya Gold",makerId:t["Green & Black's"],type:"Dark",origin:"Belize",cacaoPercentage:55,description:"Organic dark chocolate infused with orange, cinnamon, nutmeg and vanilla, inspired by traditional Mayan spiced cocoa.",ingredients:"Organic chocolate, organic cane sugar, organic vanilla, orange oil, cinnamon, nutmeg, cloves",tagIds:[r.Dark,r.Organic,r.Orange,r.Spicy],imageUrl:"https://placehold.co/300x300?text=MayaGold",averageRating:0,reviewCount:0},{name:"Moser Roth 70% Cocoa Dark Chocolate",makerId:t["Moser Roth"],type:"Dark",origin:"Blend",cacaoPercentage:70,description:"European-style dark chocolate in individually wrapped portions, sold at an affordable price at ALDI stores.",ingredients:"Cocoa mass, sugar, cocoa butter, soy lecithin, natural vanilla",tagIds:[r.Dark],imageUrl:"https://placehold.co/300x300?text=MoserRoth",averageRating:0,reviewCount:0},{name:"Endangered Species Forest Mint 72% Dark Chocolate",makerId:t["Endangered Species"],type:"Dark",origin:"Blend",cacaoPercentage:72,description:"Smooth dark chocolate infused with mint, with a portion of proceeds supporting wildlife conservation.",ingredients:"Dark chocolate, cane sugar, peppermint oil, soy lecithin, vanilla",tagIds:[r.Dark,r.Mint,r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=ForestMint",averageRating:0,reviewCount:0},{name:"Trader Joe's Pound Plus 72% Dark Chocolate",makerId:t["Trader Joe's"],type:"Dark",origin:"Belgium",cacaoPercentage:72,description:"Large block of Belgian dark chocolate at an affordable price, popular for baking and snacking.",ingredients:"Chocolate liquor, sugar, cocoa butter, soy lecithin, vanilla",tagIds:[r.Dark],imageUrl:"https://placehold.co/300x300?text=TJDark",averageRating:0,reviewCount:0},{name:"Trader Joe's Dark Chocolate Peanut Butter Cups",makerId:t["Trader Joe's"],type:"Dark",origin:"United States",cacaoPercentage:58,description:"Cult favorite peanut butter cups with dark chocolate shells and creamy peanut butter filling.",ingredients:"Dark chocolate, peanut butter, sugar, palm oil, salt, soy lecithin",tagIds:[r.Dark,r.Peanut,r.Filled],imageUrl:"https://placehold.co/300x300?text=TJPBCups",averageRating:0,reviewCount:0},{name:"Chocolove Toffee & Almonds in Milk Chocolate",makerId:t.Chocolove,type:"Milk",origin:"Blend",cacaoPercentage:33,description:"Milk chocolate bar with crunchy toffee bits and roasted almonds, with a love poem printed inside the wrapper.",ingredients:"Milk chocolate, cane sugar, cocoa butter, almonds, toffee (sugar, butter), whole milk powder, soy lecithin, vanilla",tagIds:[r.Milk,r.Toffee,r.Almond,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=ChocoloveToffee",averageRating:0,reviewCount:0},{name:"Valor Chocolate con Leche",makerId:t.Valor,type:"Milk",origin:"Spain",cacaoPercentage:33,description:"Classic Spanish milk chocolate with a smooth texture and rich dairy flavor. Popular in Europe.",ingredients:"Sugar, cocoa butter, whole milk powder, cocoa mass, soy lecithin, vanilla",tagIds:[r.Milk],imageUrl:"https://placehold.co/300x300?text=Valor",averageRating:0,reviewCount:0},{name:"Callebaut 811 54.5% Dark Chocolate Callets",makerId:t.Callebaut,type:"Dark",origin:"Blend",cacaoPercentage:54.5,description:"Professional-grade chocolate chips used by pastry chefs for baking and chocolate work.",ingredients:"Cocoa mass, sugar, cocoa butter, soy lecithin, natural vanilla",tagIds:[r.Dark,r.Semisweet],imageUrl:"https://placehold.co/300x300?text=Callebaut",averageRating:0,reviewCount:0},{name:"Perugina Baci",makerId:t.Perugina,type:"Dark",origin:"Italy",cacaoPercentage:51,description:"Iconic Italian 'kisses' with a whole hazelnut topped with chocolate-hazelnut filling and wrapped in dark chocolate.",ingredients:"Dark chocolate, hazelnuts, sugar, cocoa butter, whole milk powder, natural flavors, lecithin",tagIds:[r.Dark,r.Hazelnut,r.Filled],imageUrl:"https://placehold.co/300x300?text=Baci",averageRating:0,reviewCount:0},{name:"Hershey's Milk Chocolate with Almonds",makerId:t["Hershey's"],type:"Milk",origin:"United States",cacaoPercentage:11,description:"Classic Hershey's milk chocolate bar with whole roasted almonds throughout.",ingredients:"Milk chocolate, almonds, cocoa butter, milk, soy lecithin, vanillin",tagIds:[r.Milk,r.Almond],imageUrl:"https://placehold.co/300x300?text=HersheyAlmonds",averageRating:0,reviewCount:0},{name:"Dove Dark Chocolate Promises",makerId:t.Dove,type:"Dark",origin:"United States",cacaoPercentage:55,description:"Individually wrapped dark chocolate squares with messages printed inside each wrapper.",ingredients:"Dark chocolate, cocoa butter, sugar, soy lecithin, vanilla extract",tagIds:[r.Dark],imageUrl:"https://placehold.co/300x300?text=DoveDark",averageRating:0,reviewCount:0},{name:"Hershey's Kisses",makerId:t["Hershey's"],type:"Milk",origin:"United States",cacaoPercentage:11,description:"Iconic teardrop-shaped milk chocolate pieces individually wrapped in foil. An American classic.",ingredients:"Milk chocolate, sugar, milk, cocoa butter, chocolate, soy lecithin, vanillin",tagIds:[r.Milk],imageUrl:"https://placehold.co/300x300?text=Kisses",averageRating:0,reviewCount:0},{name:"M&M's Peanut",makerId:t.Mars,type:"Milk",origin:"United States",cacaoPercentage:23,description:"Peanuts covered in milk chocolate and a candy shell. One of America's favorite candies.",ingredients:"Milk chocolate, peanuts, sugar, corn starch, corn syrup, artificial colors, dextrin, carnuba wax",tagIds:[r.Milk,r.Peanut,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=MandMPeanut",averageRating:0,reviewCount:0},{name:"M&M's Milk Chocolate",makerId:t.Mars,type:"Milk",origin:"United States",cacaoPercentage:23,description:"Small rounds of milk chocolate in a colorful candy shell. One of the world's most recognizable candies.",ingredients:"Milk chocolate, sugar, corn starch, corn syrup, artificial colors, dextrin, carnuba wax",tagIds:[r.Milk,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=MandM",averageRating:0,reviewCount:0},{name:"Hershey's Gold",makerId:t["Hershey's"],type:"White",origin:"United States",cacaoPercentage:0,description:"Caramelized creme bar with peanuts and pretzels. Not technically chocolate (no cocoa), but marketed as part of the Hershey's line.",ingredients:"Sugar, vegetable oil, skim milk, milk, whey, pretzels, peanuts, soy lecithin, salt, TBHQ",tagIds:[r.White,r.Caramel,r.Peanut,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=HersheyGold",averageRating:0,reviewCount:0},{name:"Ghirardelli Milk Chocolate Sea Salt Caramel",makerId:t.Ghirardelli,type:"Milk",origin:"United States",cacaoPercentage:32,description:"Milk chocolate squares with a flowing sea salt caramel filling.",ingredients:"Milk chocolate, sugar, corn syrup, milk, cream, butter, sea salt, soy lecithin",tagIds:[r.Milk,r.Caramel,r.Filled,r["Sea Salt"]],imageUrl:"https://placehold.co/300x300?text=GhirardelliSaltSquare",averageRating:0,reviewCount:0},{name:"Almond Joy",makerId:t["Hershey's"],type:"Milk",origin:"United States",cacaoPercentage:21,description:"Coconut filling topped with whole almonds and covered in milk chocolate.",ingredients:"Corn syrup, milk chocolate, coconut, almonds, sugar, dairy, soy lecithin, salt",tagIds:[r.Milk,r.Coconut,r.Almond,r.Filled],imageUrl:"https://placehold.co/300x300?text=AlmondJoy",averageRating:0,reviewCount:0},{name:"Mounds",makerId:t["Hershey's"],type:"Dark",origin:"United States",cacaoPercentage:40,description:"Coconut filling covered in dark chocolate. Sister product to Almond Joy, but without nuts.",ingredients:"Corn syrup, semi-sweet chocolate, coconut, sugar, dairy, soy lecithin, salt",tagIds:[r.Dark,r.Coconut,r.Filled],imageUrl:"https://placehold.co/300x300?text=Mounds",averageRating:0,reviewCount:0},{name:"Ghirardelli Intense Dark 86% Cacao",makerId:t.Ghirardelli,type:"Dark",origin:"Blend",cacaoPercentage:86,description:"Very dark chocolate with minimal sweetness, intense cocoa flavor and slight fruity notes.",ingredients:"Unsweetened chocolate, cocoa butter, sugar, soy lecithin, vanilla",tagIds:[r.Dark,r.Bittersweet],imageUrl:"https://placehold.co/300x300?text=Ghirardelli86",averageRating:0,reviewCount:0},{name:"Milka Alpine Milk Chocolate with Oreo",makerId:t.Milka,type:"Milk",origin:"Germany",cacaoPercentage:30,description:"Creamy European milk chocolate with crushed Oreo cookie pieces throughout.",ingredients:"Milk chocolate, sugar, cookies (wheat flour, sugar, vegetable fat, cocoa), cocoa butter, whey powder, hazelnuts",tagIds:[r.Milk,r.Creamy,r.Crunchy],imageUrl:"https://placehold.co/300x300?text=MilkaOreo",averageRating:0,reviewCount:0},{name:"Scharffen Berger 82% Extra Dark",makerId:t["Scharffen Berger"],type:"Dark",origin:"Blend (South America)",cacaoPercentage:82,description:"Very dark chocolate with an intense cocoa flavor and complex fruity undertones.",ingredients:"Cacao beans, sugar, cocoa butter, vanilla beans, soy lecithin",tagIds:[r.Dark,r.Bittersweet],imageUrl:"https://placehold.co/300x300?text=Scharffen82",averageRating:0,reviewCount:0},{name:"Whittaker's Dark Ghana",makerId:t["Whittaker's"],type:"Dark",origin:"Ghana",cacaoPercentage:72,description:"New Zealand's popular dark chocolate made with Ghanaian beans, with a clean, intense flavor.",ingredients:"Cocoa beans, sugar, cocoa butter, soy lecithin, vanilla",tagIds:[r.Dark,r["Single Origin"]],imageUrl:"https://placehold.co/300x300?text=Whittakers",averageRating:0,reviewCount:0},{name:"Schogetten Dark Chocolate",makerId:t.Schogetten,type:"Dark",origin:"Germany",cacaoPercentage:50,description:"German chocolate in a unique snap-apart tablet format. Each piece is individually molded.",ingredients:"Sugar, cocoa mass, cocoa butter, butterfat, soy lecithin, natural flavors",tagIds:[r.Dark],imageUrl:"https://placehold.co/300x300?text=Schogetten",averageRating:0,reviewCount:0},{name:"Moonstruck Sea Salt Almond Bark",makerId:t.Moonstruck,type:"Dark",origin:"United States",cacaoPercentage:68,description:"Artisan chocolate bark with roasted almonds, toffee bits and sea salt.",ingredients:"Dark chocolate, almonds, butter toffee (sugar, butter), sea salt, cocoa butter",tagIds:[r.Dark,r.Almond,r.Toffee,r["Sea Salt"]],imageUrl:"https://placehold.co/300x300?text=Moonstruck",averageRating:0,reviewCount:0},{name:"Chocolatier Blue Caramels",makerId:t["Chocolatier Blue"],type:"Dark",origin:"United States",cacaoPercentage:64,description:"Artisanal painted chocolate bonbons with various caramel flavors, known for beautiful jewel-like appearance.",ingredients:"Valrhona dark chocolate, butter, cream, sugar, various natural flavors, glucose",tagIds:[r.Dark,r.Caramel,r.Filled],imageUrl:"https://placehold.co/300x300?text=ChocBlue",averageRating:0,reviewCount:0},{name:"Bissinger's Gummy Pandas",makerId:t["Bissinger's"],type:"Dark",origin:"United States",cacaoPercentage:60,description:"Gourmet dark chocolate-covered fruit gummy candies in the shape of pandas.",ingredients:"Dark chocolate, organic tapioca syrup, organic cane sugar, gelatin, fruit juice, citric acid, natural flavors",tagIds:[r.Dark,r.Fruity,r.Filled],imageUrl:"https://placehold.co/300x300?text=ChocPandas",averageRating:0,reviewCount:0},{name:"Cordial Cherry Cordials",makerId:t.Cordial,type:"Dark",origin:"United States",cacaoPercentage:55,description:"Classic American confection of maraschino cherries in a liquid center surrounded by dark chocolate.",ingredients:"Dark chocolate, cherries, corn syrup, sugar, invertase enzyme, citric acid, natural flavor",tagIds:[r.Dark,r.Cherry,r.Filled],imageUrl:"https://placehold.co/300x300?text=CherryCordials",averageRating:0,reviewCount:0},{name:"Alter Eco Dark Blackout Organic Chocolate",makerId:t["Alter Eco"],type:"Dark",origin:"Ecuador",cacaoPercentage:85,description:"Intensely dark chocolate with minimal sugar and pronounced cocoa flavor. Organic and fair trade certified.",ingredients:"Cocoa beans, cocoa butter, raw cane sugar, vanilla beans",tagIds:[r.Dark,r.Organic,r["Fair Trade"],r["Single Origin"]],imageUrl:"https://placehold.co/300x300?text=AlterEco",averageRating:0,reviewCount:0},{name:"Taza Stone Ground 80% Dark",makerId:t.Taza,type:"Dark",origin:"Blend",cacaoPercentage:80,description:"Very dark stone-ground chocolate with a rustic texture and pure, intense flavor.",ingredients:"Organic cacao beans, organic cane sugar",tagIds:[r.Dark,r.Organic,r["Bean to Bar"]],imageUrl:"https://placehold.co/300x300?text=Taza80",averageRating:0,reviewCount:0},{name:"Gourmet Boutique Vegan Dark",makerId:t["Gourmet Boutique"],type:"Dark",origin:"Blend",cacaoPercentage:75,description:"Dairy-free dark chocolate specifically formulated for vegans and those with dairy allergies.",ingredients:"Cocoa liquor, cocoa butter, cane sugar, vanilla extract",tagIds:[r.Dark,r.Vegan,r.Organic],imageUrl:"https://placehold.co/300x300?text=VeganDark",averageRating:0,reviewCount:0},{name:"Tony's Chocolonely Milk Chocolate Caramel Sea Salt",makerId:t["Tony's Chocolonely"],type:"Milk",origin:"West Africa",cacaoPercentage:32,description:"Milk chocolate with caramel and sea salt in an irregularly divided bar, promoting slave-free chocolate.",ingredients:"Sugar, dried whole milk, cocoa butter, cocoa mass, caramel pieces, sea salt, soy lecithin, vanilla",tagIds:[r.Milk,r.Caramel,r["Sea Salt"],r["Fair Trade"]],imageUrl:"https://placehold.co/300x300?text=TonysSalt",averageRating:0,reviewCount:0},{name:"Dagoba Organic Lavender Blueberry",makerId:t.Dagoba,type:"Dark",origin:"Blend",cacaoPercentage:59,description:"Organic dark chocolate infused with lavender and blueberry essences for a floral berry flavor.",ingredients:"Organic chocolate, organic cane sugar, organic cocoa butter, organic blueberries, organic lavender, organic vanilla bean",tagIds:[r.Dark,r.Organic,r.Berry,r.Floral],imageUrl:"https://placehold.co/300x300?text=Dagoba",averageRating:0,reviewCount:0},{name:"Whittaker's Almond Gold",makerId:t["Whittaker's"],type:"Milk",origin:"New Zealand",cacaoPercentage:33,description:"New Zealand favorite featuring milk chocolate with whole roasted almonds.",ingredients:"Milk chocolate, almonds, cocoa solids, milk solids, emulsifiers, flavor",tagIds:[r.Milk,r.Almond],imageUrl:"https://placehold.co/300x300?text=WhittakersAlmond",averageRating:0,reviewCount:0},{name:"Cadbury Milk Chocolate Caramello",makerId:t.Cadbury,type:"Milk",origin:"United Kingdom",cacaoPercentage:26,description:"Milk chocolate bar with flowing caramel filling in segments.",ingredients:"Milk chocolate, sugar, corn syrup, milk, cocoa butter, natural and artificial flavor, soy lecithin",tagIds:[r.Milk,r.Caramel,r.Filled],imageUrl:"https://placehold.co/300x300?text=Caramello",averageRating:0,reviewCount:0},{name:"Trader Joe's Dark Chocolate Lovers Bar",makerId:t["Trader Joe's"],type:"Dark",origin:"Blend",cacaoPercentage:85,description:"Very dark chocolate bar for serious dark chocolate enthusiasts, with minimal sugar.",ingredients:"Cocoa mass, sugar, cocoa butter, soy lecithin, vanilla",tagIds:[r.Dark,r.Bittersweet],imageUrl:"https://placehold.co/300x300?text=TJLovers",averageRating:0,reviewCount:0},{name:"Perugina Baci Dark",makerId:t.Perugina,type:"Dark",origin:"Italy",cacaoPercentage:70,description:"A darker version of the classic Italian chocolate 'kisses' with hazelnut filling and whole hazelnut topping.",ingredients:"Dark chocolate, hazelnuts, cocoa butter, sugar, cocoa powder, natural flavors, soy lecithin",tagIds:[r.Dark,r.Hazelnut,r.Filled],imageUrl:"https://placehold.co/300x300?text=BaciDark",averageRating:0,reviewCount:0},{name:"Kit Kat Matcha Green Tea",makerId:t["Kit Kat"],type:"White",origin:"Japan",cacaoPercentage:0,description:"Japanese version of Kit Kat with matcha green tea flavored white chocolate coating. Popular as a souvenir from Japan.",ingredients:"White chocolate with matcha powder, wheat flour, sugar, vegetable oil, lactose, cocoa butter, milk powder, green tea powder",tagIds:[r.White,r.Crunchy,r["Limited Edition"]],imageUrl:"https://placehold.co/300x300?text=KitKatMatcha",averageRating:0,reviewCount:0},{name:"Chocolove XOXOX Ruby Chocolate",makerId:t.Chocolove,type:"Ruby",origin:"Blend",cacaoPercentage:47,description:"One of the first widely available ruby chocolate bars in the US market, with a natural pink color and berry notes.",ingredients:"Ruby cocoa beans, sugar, cocoa butter, whole milk powder, soy lecithin, citric acid, natural vanilla",tagIds:[r.Ruby,r.Berry],imageUrl:"https://placehold.co/300x300?text=ChocoloveRuby",averageRating:0,reviewCount:0},{name:"Callebaut Ruby RB1 Chocolate",makerId:t.Callebaut,type:"Ruby",origin:"Blend",cacaoPercentage:47.3,description:"Professional-grade ruby chocolate with naturally occurring pink color and berry notes. Used by pastry chefs.",ingredients:"Ruby cocoa beans, sugar, whole milk powder, cocoa butter, soy lecithin, citric acid, natural vanilla",tagIds:[r.Ruby,r.Berry],imageUrl:"https://placehold.co/300x300?text=CallebautRuby",averageRating:0,reviewCount:0},{name:"Valrhona Ivoire White Chocolate",makerId:t.Valrhona,type:"White",origin:"France",cacaoPercentage:0,description:"Professional-grade white chocolate with a clean, pure flavor and subtle vanilla notes. Popular with pastry chefs.",ingredients:"Cocoa butter, sugar, whole milk powder, soy lecithin, natural vanilla extract",tagIds:[r.White,r.Vanilla],imageUrl:"https://placehold.co/300x300?text=ValrhonaIvoire",averageRating:0,reviewCount:0}],y=vt(ze,"chocolates");for(const v of g)try{if(!v.makerId){console.error(`Missing maker ID for chocolate: ${v.name}`);continue}if(v.tagIds.some(C=>!C)){console.error(`Missing tag IDs for chocolate: ${v.name}`);continue}const T=Dt.now();await wi(y,{...v,createdAt:T,updatedAt:T}),console.log(`Added chocolate: ${v.name}`)}catch(b){console.error(`Error adding ${v.name}:`,b)}console.log("Finished adding 100 more commercial chocolates")},Tx="https://world.openfoodfacts.org/api/v2",sP=async a=>{try{return(await(await fetch(`${Tx}/search?categories_tags=chocolates&search_terms=${a}&json=true`)).json()).products}catch(e){throw console.error("Error searching chocolate products:",e),e}},oP=async a=>{try{return(await(await fetch(`${Tx}/search?categories_tags=chocolates&brands=${a}&json=true`)).json()).products}catch(e){throw console.error("Error searching by brand:",e),e}},lP=async a=>{try{const e=`${a.name} ${a.maker}`;let t=await sP(e);(!t||t.length===0)&&(t=await oP(a.maker));const r=cP(t,a.name);return r?{...a,barcode:r.code||a.barcode,imageUrl:r.image_url||a.imageUrl,ingredients:a.ingredients||hP(r.ingredients_text),nutrimentData:r.nutriments||{},additionalImages:r.images||{},openFoodFactsId:r._id}:a}catch(e){return console.error("Error enriching chocolate data:",e),a}},cP=(a,e)=>{if(!a||a.length===0)return null;const t=e.toLowerCase(),r=a.map(s=>{const l=(s.product_name||"").toLowerCase(),u=uP(t,l);return{product:s,score:u}}).sort((s,l)=>l.score-s.score);return r[0].score>.5?r[0].product:null},uP=(a,e)=>{if(!a||!e)return 0;const t=a.split(" "),r=e.split(" ");let s=0;return t.forEach(l=>{r.includes(l)&&s++}),s/Math.max(t.length,r.length)},hP=a=>a?a.split(",").map(e=>e.trim()):[],dP=async()=>{try{console.log("Starting database enrichment process...");const a=vt(ze,"chocolates"),e=await sn(a);if(e.empty){console.log("No chocolates found in database.");return}console.log(`Found ${e.size} chocolates to process.`);let t=0,r=0;for(const s of e.docs){const l={id:s.id,...s.data()};if(console.log(`Processing [${++t}/${e.size}]: ${l.name}`),l.barcode&&l.imageUrl){console.log("- Already has barcode and image, skipping");continue}const u=await lP(l);if(JSON.stringify(u)!==JSON.stringify(l)){const m=Kn(ze,"chocolates",l.id),{id:g,...y}=u;await Md(m,{...y,updatedAt:new Date}),console.log(`- Updated with barcode: ${u.barcode||"None"}`),console.log(`- Updated with image: ${u.imageUrl?"Yes":"No"}`),r++}else console.log("- No matching data found in Open Food Facts");await new Promise(m=>setTimeout(m,1e3))}console.log(`Enrichment complete! Processed ${t} chocolates, enriched ${r}.`)}catch(a){console.error("Error enriching database:",a)}};var jb,ko=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sx={exports:{}},fP=Math.floor,Rh=Math.max,So=Math.min,hg=function(a,e){return e?2*a/e:1},mP=function(a,e){var t,r,s,l,u,m;for(u=[a.length,e.length],t=l=0,m=So(r=u[0],s=u[1]);0<=m?l<m:l>m;t=0<=m?++l:--l){if(a[t]<e[t])return-1;if(a[t]>e[t])return 1}return r-s},uc=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},gP=function(){function a(e,t,r,s){this.isjunk=e,t==null&&(t=""),r==null&&(r=""),this.autojunk=s==null||s,this.a=this.b=null,this.setSeqs(t,r)}return a.prototype.setSeqs=function(e,t){return this.setSeq1(e),this.setSeq2(t)},a.prototype.setSeq1=function(e){if(e!==this.a)return this.a=e,this.matchingBlocks=this.opcodes=null},a.prototype.setSeq2=function(e){if(e!==this.b)return this.b=e,this.matchingBlocks=this.opcodes=null,this.fullbcount=null,this._chainB()},a.prototype._chainB=function(){var e,t,r,s,l,u,m,g,y,v,b,T,C,R;for(e=this.b,this.b2j=t={},s=v=0,T=e.length;v<T;s=++v)r=e[s],(uc(t,r)?t[r]:t[r]=[]).push(s);if(u={},l=this.isjunk)for(b=0,C=(R=Object.keys(t)).length;b<C;b++)l(r=R[b])&&(u[r]=!0,delete t[r]);if(y={},m=e.length,this.autojunk&&m>=200)for(r in g=fP(m/100)+1,t)t[r].length>g&&(y[r]=!0,delete t[r]);return this.isbjunk=function(S){return uc(u,S)},this.isbpopular=function(S){return uc(y,S)}},a.prototype.findLongestMatch=function(e,t,r,s){var l,u,m,g,y,v,b,T,C,R,S,x,I,B,G,re,oe,de,M,N,j;for(l=(re=[this.a,this.b,this.b2j,this.isbjunk])[0],u=re[1],m=re[2],T=re[3],g=(oe=[e,r,0])[0],y=oe[1],v=oe[2],R={},b=I=e;e<=t?I<t:I>t;b=e<=t?++I:--I){for(x={},B=0,G=(de=uc(m,l[b])?m[l[b]]:[]).length;B<G;B++)if(!((C=de[B])<r)){if(C>=s)break;(S=x[C]=(R[C-1]||0)+1)>v&&(g=(M=[b-S+1,C-S+1,S])[0],y=M[1],v=M[2])}R=x}for(;g>e&&y>r&&!T(u[y-1])&&l[g-1]===u[y-1];)g=(N=[g-1,y-1,v+1])[0],y=N[1],v=N[2];for(;g+v<t&&y+v<s&&!T(u[y+v])&&l[g+v]===u[y+v];)v++;for(;g>e&&y>r&&T(u[y-1])&&l[g-1]===u[y-1];)g=(j=[g-1,y-1,v+1])[0],y=j[1],v=j[2];for(;g+v<t&&y+v<s&&T(u[y+v])&&l[g+v]===u[y+v];)v++;return[g,y,v]},a.prototype.getMatchingBlocks=function(){var e,t,r,s,l,u,m,g,y,v,b,T,C,R,S,x,I,B,G,re,oe,de,M,N,j,U;if(this.matchingBlocks)return this.matchingBlocks;for(B=[[0,R=(de=[this.a.length,this.b.length])[0],0,S=de[1]]],x=[];B.length;)t=(M=B.pop())[0],e=M[1],s=M[2],r=M[3],l=(N=G=this.findLongestMatch(t,e,s,r))[0],g=N[1],(b=N[2])&&(x.push(G),t<l&&s<g&&B.push([t,l,s,g]),l+b<e&&g+b<r&&B.push([l+b,e,g+b,r]));for(x.sort(mP),u=y=T=0,I=[],re=0,oe=x.length;re<oe;re++)m=(j=x[re])[0],v=j[1],C=j[2],u+T===m&&y+T===v?T+=C:(T&&I.push([u,y,T]),u=(U=[m,v,C])[0],y=U[1],T=U[2]);return T&&I.push([u,y,T]),I.push([R,S,0]),this.matchingBlocks=I},a.prototype.getOpcodes=function(){var e,t,r,s,l,u,m,g,y,v,b,T;if(this.opcodes)return this.opcodes;for(s=l=0,this.opcodes=t=[],g=0,y=(v=this.getMatchingBlocks()).length;g<y;g++)e=(b=v[g])[0],r=b[1],u=b[2],m="",s<e&&l<r?m="replace":s<e?m="delete":l<r&&(m="insert"),m&&t.push([m,s,e,l,r]),s=(T=[e+u,r+u])[0],l=T[1],u&&t.push(["equal",e,s,r,l]);return t},a.prototype.getGroupedOpcodes=function(e){var t,r,s,l,u,m,g,y,v,b,T,C,R,S,x;for(e==null&&(e=3),(t=this.getOpcodes()).length||(t=[["equal",0,1,0,1]]),t[0][0]==="equal"&&(v=(C=t[0])[0],l=C[1],u=C[2],m=C[3],g=C[4],t[0]=[v,Rh(l,u-e),u,Rh(m,g-e),g]),t[t.length-1][0]==="equal"&&(v=(R=t[t.length-1])[0],l=R[1],u=R[2],m=R[3],g=R[4],t[t.length-1]=[v,l,So(u,l+e),m,So(g,m+e)]),y=e+e,s=[],r=[],b=0,T=t.length;b<T;b++)v=(S=t[b])[0],l=S[1],u=S[2],m=S[3],g=S[4],v==="equal"&&u-l>y&&(r.push([v,l,So(u,l+e),m,So(g,m+e)]),s.push(r),r=[],l=(x=[Rh(l,u-e),Rh(m,g-e)])[0],m=x[1]),r.push([v,l,u,m,g]);return!r.length||r.length===1&&r[0][0]==="equal"||s.push(r),s},a.prototype.ratio=function(){var e,t,r,s;for(e=0,t=0,r=(s=this.getMatchingBlocks()).length;t<r;t++)e+=s[t][2];return hg(e,this.a.length+this.b.length)},a.prototype.quickRatio=function(){var e,t,r,s,l,u,m,g,y,v,b;if(!this.fullbcount)for(this.fullbcount=r={},u=0,g=(v=this.b).length;u<g;u++)r[t=v[u]]=(r[t]||0)+1;for(r=this.fullbcount,e={},s=0,m=0,y=(b=this.a).length;m<y;m++)t=b[m],l=uc(e,t)?e[t]:r[t]||0,e[t]=l-1,l>0&&s++;return hg(s,this.a.length+this.b.length)},a.prototype.realQuickRatio=function(){var e,t,r;return r=[this.a.length,this.b.length],hg(So(e=r[0],t=r[1]),e+t)},a}(),xx={exports:{}};jb=xx,(function(){var a,e,t,r,s,l,u,m,g,y,v,b,T,C,R;t=Math.floor,y=Math.min,e=function(S,x){return S<x?-1:S>x?1:0},g=function(S,x,I,B,G){var re;if(I==null&&(I=0),G==null&&(G=e),I<0)throw new Error("lo must be non-negative");for(B==null&&(B=S.length);I<B;)G(x,S[re=t((I+B)/2)])<0?B=re:I=re+1;return[].splice.apply(S,[I,I-I].concat(x)),x},l=function(S,x,I){return I==null&&(I=e),S.push(x),C(S,0,S.length-1,I)},s=function(S,x){var I,B;return x==null&&(x=e),I=S.pop(),S.length?(B=S[0],S[0]=I,R(S,0,x)):B=I,B},m=function(S,x,I){var B;return I==null&&(I=e),B=S[0],S[0]=x,R(S,0,I),B},u=function(S,x,I){var B;return I==null&&(I=e),S.length&&I(S[0],x)<0&&(x=(B=[S[0],x])[0],S[0]=B[1],R(S,0,I)),x},r=function(S,x){var I,B,G,re,oe,de;for(x==null&&(x=e),oe=[],B=0,G=(re=(function(){de=[];for(var M=0,N=t(S.length/2);0<=N?M<N:M>N;0<=N?M++:M--)de.push(M);return de}).apply(this).reverse()).length;B<G;B++)I=re[B],oe.push(R(S,I,x));return oe},T=function(S,x,I){var B;if(I==null&&(I=e),(B=S.indexOf(x))!==-1)return C(S,0,B,I),R(S,B,I)},v=function(S,x,I){var B,G,re,oe,de;if(I==null&&(I=e),!(G=S.slice(0,x)).length)return G;for(r(G,I),re=0,oe=(de=S.slice(x)).length;re<oe;re++)B=de[re],u(G,B,I);return G.sort(I).reverse()},b=function(S,x,I){var B,G,re,oe,de,M,N,j,U;if(I==null&&(I=e),10*x<=S.length){if(!(re=S.slice(0,x).sort(I)).length)return re;for(G=re[re.length-1],oe=0,M=(N=S.slice(x)).length;oe<M;oe++)I(B=N[oe],G)<0&&(g(re,B,0,null,I),re.pop(),G=re[re.length-1]);return re}for(r(S,I),U=[],de=0,j=y(x,S.length);0<=j?de<j:de>j;0<=j?++de:--de)U.push(s(S,I));return U},C=function(S,x,I,B){var G,re,oe;for(B==null&&(B=e),G=S[I];I>x&&B(G,re=S[oe=I-1>>1])<0;)S[I]=re,I=oe;return S[I]=G},R=function(S,x,I){var B,G,re,oe,de;for(I==null&&(I=e),G=S.length,de=x,re=S[x],B=2*x+1;B<G;)(oe=B+1)<G&&!(I(S[B],S[oe])<0)&&(B=oe),S[x]=S[B],B=2*(x=B)+1;return S[x]=re,C(S,de,x,I)},a=function(){function S(x){this.cmp=x??e,this.nodes=[]}return S.push=l,S.pop=s,S.replace=m,S.pushpop=u,S.heapify=r,S.updateItem=T,S.nlargest=v,S.nsmallest=b,S.prototype.push=function(x){return l(this.nodes,x,this.cmp)},S.prototype.pop=function(){return s(this.nodes,this.cmp)},S.prototype.peek=function(){return this.nodes[0]},S.prototype.contains=function(x){return this.nodes.indexOf(x)!==-1},S.prototype.replace=function(x){return m(this.nodes,x,this.cmp)},S.prototype.pushpop=function(x){return u(this.nodes,x,this.cmp)},S.prototype.heapify=function(){return r(this.nodes,this.cmp)},S.prototype.updateItem=function(x){return T(this.nodes,x,this.cmp)},S.prototype.clear=function(){return this.nodes=[]},S.prototype.empty=function(){return this.nodes.length===0},S.prototype.size=function(){return this.nodes.length},S.prototype.clone=function(){var x;return(x=new S).nodes=this.nodes.slice(0),x},S.prototype.toArray=function(){return this.nodes.slice(0)},S.prototype.insert=S.prototype.push,S.prototype.top=S.prototype.peek,S.prototype.front=S.prototype.peek,S.prototype.has=S.prototype.contains,S.prototype.copy=S.prototype.clone,S}(),jb.exports=a}).call(ko);var pP=xx.exports,Cx=function(e,t){for(var r=-1,s=e==null?0:e.length,l=Array(s);++r<s;)l[r]=t(e[r],r,e);return l},$r=Array.isArray,Ax=typeof ko=="object"&&ko&&ko.Object===Object&&ko,yP=Ax,vP=typeof self=="object"&&self&&self.Object===Object&&self,Pa=yP||vP||Function("return this")(),Ss=Pa.Symbol,Mb=Ss,Rx=Object.prototype,_P=Rx.hasOwnProperty,wP=Rx.toString,hc=Mb?Mb.toStringTag:void 0,bP=function(e){var t=_P.call(e,hc),r=e[hc];try{e[hc]=void 0;var s=!0}catch{}var l=wP.call(e);return s&&(t?e[hc]=r:delete e[hc]),l},EP=Object.prototype.toString,TP=bP,SP=function(e){return EP.call(e)},Ob=Ss?Ss.toStringTag:void 0,Yc=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Ob&&Ob in Object(e)?TP(e):SP(e)},Wc=function(e){return e!=null&&typeof e=="object"},xP=Yc,CP=Wc,Ld=function(e){return typeof e=="symbol"||CP(e)&&xP(e)=="[object Symbol]"},AP=$r,RP=Ld,kP=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,IP=/^\w*$/,gy=function(e,t){if(AP(e))return!1;var r=typeof e;return!(r!="number"&&r!="symbol"&&r!="boolean"&&e!=null&&!RP(e))||IP.test(e)||!kP.test(e)||t!=null&&e in Object(t)},py=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},NP=Yc,DP=py,Pb,kx=function(e){if(!DP(e))return!1;var t=NP(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},dg=Pa["__core-js_shared__"],Ub=(Pb=/[^.]+$/.exec(dg&&dg.keys&&dg.keys.IE_PROTO||""))?"Symbol(src)_1."+Pb:"",jP=function(e){return!!Ub&&Ub in e},MP=Function.prototype.toString,Ix=function(e){if(e!=null){try{return MP.call(e)}catch{}try{return e+""}catch{}}return""},OP=kx,PP=jP,UP=py,VP=Ix,LP=/^\[object .+?Constructor\]$/,BP=Function.prototype,zP=Object.prototype,FP=BP.toString,qP=zP.hasOwnProperty,HP=RegExp("^"+FP.call(qP).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),GP=function(e){return!(!UP(e)||PP(e))&&(OP(e)?HP:LP).test(VP(e))},$P=function(e,t){return e==null?void 0:e[t]},Zo=function(e,t){var r=$P(e,t);return GP(r)?r:void 0},Bd=Zo(Object,"create"),Vb=Bd,KP=function(){this.__data__=Vb?Vb(null):{},this.size=0},QP=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},YP=Bd,WP=Object.prototype.hasOwnProperty,XP=function(e){var t=this.__data__;if(YP){var r=t[e];return r==="__lodash_hash_undefined__"?void 0:r}return WP.call(t,e)?t[e]:void 0},ZP=Bd,JP=Object.prototype.hasOwnProperty,eU=Bd,tU=KP,nU=QP,rU=XP,aU=function(e){var t=this.__data__;return ZP?t[e]!==void 0:JP.call(t,e)},iU=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=eU&&t===void 0?"__lodash_hash_undefined__":t,this};function xo(a){var e=-1,t=a==null?0:a.length;for(this.clear();++e<t;){var r=a[e];this.set(r[0],r[1])}}xo.prototype.clear=tU,xo.prototype.delete=nU,xo.prototype.get=rU,xo.prototype.has=aU,xo.prototype.set=iU;var sU=xo,oU=function(){this.__data__=[],this.size=0},Nx=function(e,t){return e===t||e!=e&&t!=t},lU=Nx,zd=function(e,t){for(var r=e.length;r--;)if(lU(e[r][0],t))return r;return-1},cU=zd,uU=Array.prototype.splice,hU=zd,dU=zd,fU=zd,mU=oU,gU=function(e){var t=this.__data__,r=cU(t,e);return!(r<0)&&(r==t.length-1?t.pop():uU.call(t,r,1),--this.size,!0)},pU=function(e){var t=this.__data__,r=hU(t,e);return r<0?void 0:t[r][1]},yU=function(e){return dU(this.__data__,e)>-1},vU=function(e,t){var r=this.__data__,s=fU(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this};function Co(a){var e=-1,t=a==null?0:a.length;for(this.clear();++e<t;){var r=a[e];this.set(r[0],r[1])}}Co.prototype.clear=mU,Co.prototype.delete=gU,Co.prototype.get=pU,Co.prototype.has=yU,Co.prototype.set=vU;var Fd=Co,yy=Zo(Pa,"Map"),Lb=sU,_U=Fd,wU=yy,bU=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},qd=function(e,t){var r=e.__data__;return bU(t)?r[typeof t=="string"?"string":"hash"]:r.map},EU=qd,TU=qd,SU=qd,xU=qd,CU=function(){this.size=0,this.__data__={hash:new Lb,map:new(wU||_U),string:new Lb}},AU=function(e){var t=EU(this,e).delete(e);return this.size-=t?1:0,t},RU=function(e){return TU(this,e).get(e)},kU=function(e){return SU(this,e).has(e)},IU=function(e,t){var r=xU(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this};function Ao(a){var e=-1,t=a==null?0:a.length;for(this.clear();++e<t;){var r=a[e];this.set(r[0],r[1])}}Ao.prototype.clear=CU,Ao.prototype.delete=AU,Ao.prototype.get=RU,Ao.prototype.has=kU,Ao.prototype.set=IU;var vy=Ao,Dx=vy;function _y(a,e){if(typeof a!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var t=function(){var r=arguments,s=e?e.apply(this,r):r[0],l=t.cache;if(l.has(s))return l.get(s);var u=a.apply(this,r);return t.cache=l.set(s,u)||l,u};return t.cache=new(_y.Cache||Dx),t}_y.Cache=Dx;var NU=_y,DU=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jU=/\\(\\)?/g,MU=function(e){var t=NU(e,function(s){return r.size===500&&r.clear(),s}),r=t.cache;return t}(function(a){var e=[];return a.charCodeAt(0)===46&&e.push(""),a.replace(DU,function(t,r,s,l){e.push(s?l.replace(jU,"$1"):r||t)}),e}),OU=Cx,PU=$r,UU=Ld,Bb=Ss?Ss.prototype:void 0,zb=Bb?Bb.toString:void 0,VU=function a(e){if(typeof e=="string")return e;if(PU(e))return OU(e,a)+"";if(UU(e))return zb?zb.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},LU=VU,BU=$r,zU=gy,FU=MU,qU=function(e){return e==null?"":LU(e)},jx=function(e,t){return BU(e)?e:zU(e,t)?[e]:FU(qU(e))},HU=Ld,Hd=function(e){if(typeof e=="string"||HU(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},GU=jx,$U=Hd,wy=function(e,t){for(var r=0,s=(t=GU(t,e)).length;e!=null&&r<s;)e=e[$U(t[r++])];return r&&r==s?e:void 0},KU=Fd,QU=Fd,YU=yy,WU=vy,XU=Fd,ZU=function(){this.__data__=new KU,this.size=0},JU=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},e3=function(e){return this.__data__.get(e)},t3=function(e){return this.__data__.has(e)},n3=function(e,t){var r=this.__data__;if(r instanceof QU){var s=r.__data__;if(!YU||s.length<199)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new WU(s)}return r.set(e,t),this.size=r.size,this};function Ro(a){var e=this.__data__=new XU(a);this.size=e.size}Ro.prototype.clear=ZU,Ro.prototype.delete=JU,Ro.prototype.get=e3,Ro.prototype.has=t3,Ro.prototype.set=n3;var Mx=Ro,r3=vy,a3=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},i3=function(e){return this.__data__.has(e)};function Fh(a){var e=-1,t=a==null?0:a.length;for(this.__data__=new r3;++e<t;)this.add(a[e])}Fh.prototype.add=Fh.prototype.push=a3,Fh.prototype.has=i3;var s3=Fh,o3=function(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(t(e[r],r,e))return!0;return!1},l3=function(e,t){return e.has(t)},Ox=function(e,t,r,s,l,u){var m=1&r,g=e.length,y=t.length;if(g!=y&&!(m&&y>g))return!1;var v=u.get(e),b=u.get(t);if(v&&b)return v==t&&b==e;var T=-1,C=!0,R=2&r?new s3:void 0;for(u.set(e,t),u.set(t,e);++T<g;){var S=e[T],x=t[T];if(s)var I=m?s(x,S,T,t,e,u):s(S,x,T,e,t,u);if(I!==void 0){if(I)continue;C=!1;break}if(R){if(!o3(t,function(B,G){if(!l3(R,G)&&(S===B||l(S,B,r,s,u)))return R.push(G)})){C=!1;break}}else if(S!==x&&!l(S,x,r,s,u)){C=!1;break}}return u.delete(e),u.delete(t),C},Fb=Pa.Uint8Array,c3=Nx,u3=Ox,h3=function(e){var t=-1,r=Array(e.size);return e.forEach(function(s,l){r[++t]=[l,s]}),r},d3=function(e){var t=-1,r=Array(e.size);return e.forEach(function(s){r[++t]=s}),r},qb=Ss?Ss.prototype:void 0,fg=qb?qb.valueOf:void 0,f3=function(e,t,r,s,l,u,m){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new Fb(e),new Fb(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return c3(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var g=h3;case"[object Set]":var y=1&s;if(g||(g=d3),e.size!=t.size&&!y)return!1;var v=m.get(e);if(v)return v==t;s|=2,m.set(e,t);var b=u3(g(e),g(t),s,l,u,m);return m.delete(e),b;case"[object Symbol]":if(fg)return fg.call(e)==fg.call(t)}return!1},m3=function(e,t){for(var r=-1,s=t.length,l=e.length;++r<s;)e[l+r]=t[r];return e},g3=$r,p3=function(e,t,r){var s=t(e);return g3(e)?s:m3(s,r(e))},y3=function(e,t){for(var r=-1,s=e==null?0:e.length,l=0,u=[];++r<s;){var m=e[r];t(m,r,e)&&(u[l++]=m)}return u},v3=function(){return[]},_3=Object.prototype.propertyIsEnumerable,Hb=Object.getOwnPropertySymbols,w3=Hb?function(a){return a==null?[]:(a=Object(a),y3(Hb(a),function(e){return _3.call(a,e)}))}:v3,b3=function(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s},E3=Yc,T3=Wc,Gb=function(e){return T3(e)&&E3(e)=="[object Arguments]"},S3=Wc,Px=Object.prototype,x3=Px.hasOwnProperty,C3=Px.propertyIsEnumerable,Ux=Gb(function(){return arguments}())?Gb:function(a){return S3(a)&&x3.call(a,"callee")&&!C3.call(a,"callee")},ud={exports:{}},A3=function(){return!1};(function(a,e){var t=Pa,r=A3,s=e&&!e.nodeType&&e,l=s&&a&&!a.nodeType&&a,u=l&&l.exports===s?t.Buffer:void 0,m=(u?u.isBuffer:void 0)||r;a.exports=m})(ud,ud.exports);var R3=/^(?:0|[1-9]\d*)$/,Vx=function(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&(r=="number"||r!="symbol"&&R3.test(e))&&e>-1&&e%1==0&&e<t},by=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},k3=Yc,I3=by,N3=Wc,wt={};wt["[object Float32Array]"]=wt["[object Float64Array]"]=wt["[object Int8Array]"]=wt["[object Int16Array]"]=wt["[object Int32Array]"]=wt["[object Uint8Array]"]=wt["[object Uint8ClampedArray]"]=wt["[object Uint16Array]"]=wt["[object Uint32Array]"]=!0,wt["[object Arguments]"]=wt["[object Array]"]=wt["[object ArrayBuffer]"]=wt["[object Boolean]"]=wt["[object DataView]"]=wt["[object Date]"]=wt["[object Error]"]=wt["[object Function]"]=wt["[object Map]"]=wt["[object Number]"]=wt["[object Object]"]=wt["[object RegExp]"]=wt["[object Set]"]=wt["[object String]"]=wt["[object WeakMap]"]=!1;var D3=function(e){return N3(e)&&I3(e.length)&&!!wt[k3(e)]},Lx=function(e){return function(t){return e(t)}},$g={exports:{}};(function(a,e){var t=Ax,r=e&&!e.nodeType&&e,s=r&&a&&!a.nodeType&&a,l=s&&s.exports===r&&t.process,u=function(){try{var m=s&&s.require&&s.require("util").types;return m||l&&l.binding&&l.binding("util")}catch{}}();a.exports=u})($g,$g.exports);var j3=D3,M3=Lx,$b=$g.exports,Kb=$b&&$b.isTypedArray,Bx=Kb?M3(Kb):j3,O3=b3,P3=Ux,U3=$r,V3=ud.exports,L3=Vx,B3=Bx,z3=Object.prototype.hasOwnProperty,F3=function(e,t){var r=U3(e),s=!r&&P3(e),l=!r&&!s&&V3(e),u=!r&&!s&&!l&&B3(e),m=r||s||l||u,g=m?O3(e.length,String):[],y=g.length;for(var v in e)!t&&!z3.call(e,v)||m&&(v=="length"||l&&(v=="offset"||v=="parent")||u&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||L3(v,y))||g.push(v);return g},q3=Object.prototype,H3=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||q3)},G3=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),$3=H3,K3=G3,Q3=Object.prototype.hasOwnProperty,Y3=kx,W3=by,Ey=function(e){return e!=null&&W3(e.length)&&!Y3(e)},X3=F3,Z3=function(e){if(!$3(e))return K3(e);var t=[];for(var r in Object(e))Q3.call(e,r)&&r!="constructor"&&t.push(r);return t},J3=Ey,Ty=function(e){return J3(e)?X3(e):Z3(e)},eV=p3,tV=w3,nV=Ty,Qb=function(e){return eV(e,nV,tV)},rV=Object.prototype.hasOwnProperty,aV=function(e,t,r,s,l,u){var m=1&r,g=Qb(e),y=g.length;if(y!=Qb(t).length&&!m)return!1;for(var v=y;v--;){var b=g[v];if(!(m?b in t:rV.call(t,b)))return!1}var T=u.get(e),C=u.get(t);if(T&&C)return T==t&&C==e;var R=!0;u.set(e,t),u.set(t,e);for(var S=m;++v<y;){var x=e[b=g[v]],I=t[b];if(s)var B=m?s(I,x,b,t,e,u):s(x,I,b,e,t,u);if(!(B===void 0?x===I||l(x,I,r,s,u):B)){R=!1;break}S||(S=b=="constructor")}if(R&&!S){var G=e.constructor,re=t.constructor;G==re||!("constructor"in e)||!("constructor"in t)||typeof G=="function"&&G instanceof G&&typeof re=="function"&&re instanceof re||(R=!1)}return u.delete(e),u.delete(t),R},Kg=Zo(Pa,"DataView"),Qg=yy,Yg=Zo(Pa,"Promise"),Wg=Zo(Pa,"Set"),Xg=Zo(Pa,"WeakMap"),zx=Yc,Jo=Ix,iV=Jo(Kg),sV=Jo(Qg),oV=Jo(Yg),lV=Jo(Wg),cV=Jo(Xg),fs=zx;(Kg&&fs(new Kg(new ArrayBuffer(1)))!="[object DataView]"||Qg&&fs(new Qg)!="[object Map]"||Yg&&fs(Yg.resolve())!="[object Promise]"||Wg&&fs(new Wg)!="[object Set]"||Xg&&fs(new Xg)!="[object WeakMap]")&&(fs=function(a){var e=zx(a),t=e=="[object Object]"?a.constructor:void 0,r=t?Jo(t):"";if(r)switch(r){case iV:return"[object DataView]";case sV:return"[object Map]";case oV:return"[object Promise]";case lV:return"[object Set]";case cV:return"[object WeakMap]"}return e});var mg=Mx,uV=Ox,hV=f3,dV=aV,Yb=fs,Wb=$r,Xb=ud.exports,fV=Bx,kh="[object Object]",Zb=Object.prototype.hasOwnProperty,mV=function(e,t,r,s,l,u){var m=Wb(e),g=Wb(t),y=m?"[object Array]":Yb(e),v=g?"[object Array]":Yb(t),b=(y=y=="[object Arguments]"?kh:y)==kh,T=(v=v=="[object Arguments]"?kh:v)==kh,C=y==v;if(C&&Xb(e)){if(!Xb(t))return!1;m=!0,b=!1}if(C&&!b)return u||(u=new mg),m||fV(e)?uV(e,t,r,s,l,u):hV(e,t,y,r,s,l,u);if(!(1&r)){var R=b&&Zb.call(e,"__wrapped__"),S=T&&Zb.call(t,"__wrapped__");if(R||S){var x=R?e.value():e,I=S?t.value():t;return u||(u=new mg),l(x,I,r,s,u)}}return!!C&&(u||(u=new mg),dV(e,t,r,s,l,u))},Jb=Wc,Fx=function a(e,t,r,s,l){return e===t||(e==null||t==null||!Jb(e)&&!Jb(t)?e!=e&&t!=t:mV(e,t,r,s,a,l))},gV=Mx,pV=Fx,yV=py,qx=function(e){return e==e&&!yV(e)},vV=qx,_V=Ty,Hx=function(e,t){return function(r){return r!=null&&r[e]===t&&(t!==void 0||e in Object(r))}},wV=function(e,t,r,s){var l=r.length,u=l;if(e==null)return!u;for(e=Object(e);l--;){var m=r[l];if(m[2]?m[1]!==e[m[0]]:!(m[0]in e))return!1}for(;++l<u;){var g=(m=r[l])[0],y=e[g],v=m[1];if(m[2]){if(y===void 0&&!(g in e))return!1}else{var b=new gV,T;if(!(T===void 0?pV(v,y,3,s,b):T))return!1}}return!0},bV=function(e){for(var t=_V(e),r=t.length;r--;){var s=t[r],l=e[s];t[r]=[s,l,vV(l)]}return t},EV=Hx,TV=wy,SV=jx,xV=Ux,CV=$r,AV=Vx,RV=by,kV=Hd,IV=function(e,t){return e!=null&&t in Object(e)},NV=function(e,t,r){for(var s=-1,l=(t=SV(t,e)).length,u=!1;++s<l;){var m=kV(t[s]);if(!(u=e!=null&&r(e,m)))break;e=e[m]}return u||++s!=l?u:!!(l=e==null?0:e.length)&&RV(l)&&AV(m,l)&&(CV(e)||xV(e))},DV=Fx,jV=function(e,t,r){var s=e==null?void 0:TV(e,t);return s===void 0?r:s},MV=function(e,t){return e!=null&&NV(e,t,IV)},OV=gy,PV=qx,UV=Hx,VV=Hd,Gx=function(e){return e},LV=wy,BV=function(e){return function(t){return t==null?void 0:t[e]}},zV=function(e){return function(t){return LV(t,e)}},FV=gy,qV=Hd,HV=function(e){var t=bV(e);return t.length==1&&t[0][2]?EV(t[0][0],t[0][1]):function(r){return r===e||wV(r,e,t)}},GV=function(e,t){return OV(e)&&PV(t)?UV(VV(e),t):function(r){var s=jV(r,e);return s===void 0&&s===t?MV(r,e):DV(t,s,3)}},$V=Gx,KV=$r,QV=function(e){return FV(e)?BV(qV(e)):zV(e)},YV=function(e){return typeof e=="function"?e:e==null?$V:typeof e=="object"?KV(e)?GV(e[0],e[1]):HV(e):QV(e)},WV=function(e){return function(t,r,s){for(var l=-1,u=Object(t),m=s(t),g=m.length;g--;){var y=m[++l];if(r(u[y],y,u)===!1)break}return t}}(),XV=Ty,ZV=Ey,JV=function(e,t){return function(r,s){if(r==null)return r;if(!ZV(r))return e(r,s);for(var l=r.length,u=-1,m=Object(r);++u<l&&s(m[u],u,m)!==!1;);return r}}(function(e,t){return e&&WV(e,t,XV)}),eL=Ey,eE=Ld,tL=function(e,t){if(e!==t){var r=e!==void 0,s=e===null,l=e==e,u=eE(e),m=t!==void 0,g=t===null,y=t==t,v=eE(t);if(!g&&!v&&!u&&e>t||u&&m&&y&&!g&&!v||s&&m&&y||!r&&y||!l)return 1;if(!s&&!u&&!v&&e<t||v&&r&&l&&!s&&!u||g&&r&&l||!m&&l||!y)return-1}return 0},gg=Cx,nL=wy,rL=YV,aL=function(e,t){var r=-1,s=eL(e)?Array(e.length):[];return JV(e,function(l,u,m){s[++r]=t(l,u,m)}),s},iL=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e},sL=Lx,oL=function(e,t,r){for(var s=-1,l=e.criteria,u=t.criteria,m=l.length,g=r.length;++s<m;){var y=tL(l[s],u[s]);if(y)return s>=g?y:y*(r[s]=="desc"?-1:1)}return e.index-t.index},lL=Gx,cL=$r,uL=function(e,t,r){t=t.length?gg(t,function(u){return cL(u)?function(m){return nL(m,u.length===1?u[0]:u)}:u}):[lL];var s=-1;t=gg(t,sL(rL));var l=aL(e,function(u,m,g){return{criteria:gg(t,function(y){return y(u)}),index:++s,value:u}});return iL(l,function(u,m){return oL(u,m,r)})},tE=$r,hL=function(e,t,r,s){return e==null?[]:(tE(t)||(t=t==null?[]:[t]),tE(r=s?void 0:r)||(r=r==null?[]:[r]),uL(e,t,r))},Zg,va={_intersect:function(e,t){if(!e||!t||e.length===0||t.length===0)return[];if(e.length<100&&t.length<100)return e.filter(s=>t.includes(s));const r=new Set(t);return e.filter(s=>r.has(s))},_intersectWith:function(e,t,r){return e&&t&&e.length!==0&&t.length!==0?e.filter(s=>t.some(l=>r(s,l))):[]},_difference:function(e,t){if(!e)return[];if(!t||t.length===0)return e.slice();if(e.length<100&&t.length<100)return e.filter(s=>!t.includes(s));const r=new Set(t);return e.filter(s=>!r.has(s))},_differenceWith:function(e,t,r){return e?t&&t.length!==0?e.filter(s=>!t.some(l=>r(s,l))):e.slice():[]},_uniq:function(e){return e&&e.length!==0?e.length===1?e.slice():[...new Set(e)]:[]},_uniqWith:function(e,t){if(!e||e.length===0)return[];if(e.length===1)return e.slice();const r=[];e:for(let s=0;s<e.length;s++){const l=e[s];for(let u=0;u<r.length;u++)if(t(l,r[u]))continue e;r.push(l)}return r},_partialRight:function(e){const t=Array.prototype.slice.call(arguments,1);return function(){const r=Array.prototype.slice.call(arguments);return e.apply(this,r.concat(t))}},_forEach:function(e,t){if(e)if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r],r);else{const r=Object.keys(e);for(let s=0;s<r.length;s++)t(e[r[s]],r[s])}},_isArray:Array.isArray};try{Zg=typeof Intl<"u"&&Intl.Collator!==void 0?Intl.Collator("generic",{sensitivity:"base"}):null}catch{typeof console!==void 0&&console.warn("Collator could not be initialized and wouldn't be used")}var Jg,dL=function(e,t,r){var s=[],l=[],u=r&&Zg&&r.useCollator,m=1;if(r&&r.subcost&&typeof r.subcost=="number"&&(m=r.subcost),e===t)return 0;var g,y,v,b,T=Array.from(e),C=Array.from(t),R=T.length,S=C.length;if(R===0)return S;if(S===0)return R;for(var x=0,I=0;x<R;)l[x]=T[x].codePointAt(0),s[x]=++x;if(u)for(;I<S;)for(g=C[I].codePointAt(0),v=I++,y=I,x=0;x<R;x++)b=Zg.compare(String.fromCodePoint(g),String.fromCodePoint(l[x]))===0?v:v+m,v=s[x],y=s[x]=v>y?b>y?y+1:b:b>v?v+1:b;else for(;I<S;)for(g=C[I].codePointAt(0),v=I++,y=I,x=0;x<R;x++)b=g===l[x]?v:v+m,v=s[x],y=s[x]=v>y?b>y?y+1:b:b>v?v+1:b;return y};try{Jg=typeof Intl<"u"&&Intl.Collator!==void 0?Intl.Collator("generic",{sensitivity:"base"}):null}catch{typeof console!==void 0&&console.warn("Collator could not be initialized and wouldn't be used")}var ep,nE=function(e,t,r,s){var l=[],u=[],m=r&&Jg&&r.useCollator,g=1;if(r&&r.subcost&&typeof r.subcost=="number"&&(g=r.subcost),e===t)return 0;var y=e.length,v=t.length;if(y===0)return v;if(v===0)return y;if(r&&r.wildcards&&typeof r.wildcards=="string"&&r.wildcards.length>0){var b,T,C,R,S,x;if(r.full_process===!1&&r.processed!==!0){T=(b=r.wildcards[0]).charCodeAt(0);var I="["+function(oe){return oe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(r.wildcards)+"]";if((e=e.replace(new RegExp(I,"g"),b))===(t=t.replace(new RegExp(I,"g"),b)))return 0}else T=(b=r.wildcards[0].toLowerCase()).charCodeAt(0);for(var B=0,G=0;B<y;)u[B]=e.charCodeAt(B),l[B]=++B;if(m)for(;G<v;)for(C=t.charCodeAt(G),S=G++,R=G,B=0;B<y;B++)x=Jg.compare(String.fromCharCode(C),String.fromCharCode(u[B]))===0||C===T||u[B]===T?S:S+g,S=l[B],R=l[B]=S>R?x>R?R+1:x:x>S?S+1:x;else for(;G<v;)for(C=t.charCodeAt(G),S=G++,R=G,B=0;B<y;B++)x=C===u[B]||C===T||u[B]===T?S:S+g,S=l[B],R=l[B]=S>R?x>R?R+1:x:x>S?S+1:x;return R}return s(e,t,r)};try{ep=typeof Intl<"u"&&Intl.Collator!==void 0?Intl.Collator("generic",{sensitivity:"base"}):null}catch{typeof console!==void 0&&console.warn("Collator could not be initialized and wouldn't be used")}var rE=function(e,t,r){var s=[],l=[],u=r&&ep&&r.useCollator,m=1;if(r&&r.subcost&&typeof r.subcost=="number"&&(m=r.subcost),e===t)return 0;var g,y,v,b,T=e.length,C=t.length;if(T===0)return C;if(C===0)return T;for(var R=0,S=0;R<T;)l[R]=e.charCodeAt(R),s[R]=++R;if(u)for(;S<C;)for(g=t.charCodeAt(S),v=S++,y=S,R=0;R<T;R++)b=ep.compare(String.fromCharCode(g),String.fromCharCode(l[R]))===0?v:v+m,v=s[R],y=s[R]=v>y?b>y?y+1:b:b>v?v+1:b;else for(;S<C;)for(g=t.charCodeAt(S),v=S++,y=S,R=0;R<T;R++)b=g===l[R]?v:v+m,v=s[R],y=s[R]=v>y?b>y?y+1:b:b>v?v+1:b;return y};(function(a,e){if(!a.setImmediate){var t,r=1,s={},l=!1,u=a.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(a);m=m&&m.setTimeout?m:a,{}.toString.call(a.process)==="[object process]"?function(){t=function(b){process.nextTick(function(){y(b)})}}():function(){if(a.postMessage&&!a.importScripts){var b=!0,T=a.onmessage;return a.onmessage=function(){b=!1},a.postMessage("","*"),a.onmessage=T,b}}()?function(){var b="setImmediate$"+Math.random()+"$",T=function(C){C.source===a&&typeof C.data=="string"&&C.data.indexOf(b)===0&&y(+C.data.slice(b.length))};a.addEventListener?a.addEventListener("message",T,!1):a.attachEvent("onmessage",T),t=function(C){a.postMessage(b+C,"*")}}():a.MessageChannel?function(){var b=new MessageChannel;b.port1.onmessage=function(T){y(T.data)},t=function(T){b.port2.postMessage(T)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var b=u.documentElement;t=function(T){var C=u.createElement("script");C.onreadystatechange=function(){y(T),C.onreadystatechange=null,b.removeChild(C),C=null},b.appendChild(C)}}():function(){t=function(b){setTimeout(y,0,b)}}(),m.setImmediate=function(b){typeof b!="function"&&(b=new Function(""+b));for(var T=new Array(arguments.length-1),C=0;C<T.length;C++)T[C]=arguments[C+1];var R={callback:b,args:T};return s[r]=R,t(r),r++},m.clearImmediate=g}function g(v){delete s[v]}function y(v){if(l)setTimeout(y,0,v);else{var b=s[v];if(b){l=!0;try{(function(C){var R=C.callback,S=C.args;switch(S.length){case 0:R();break;case 1:R(S[0]);break;case 2:R(S[0],S[1]);break;case 3:R(S[0],S[1],S[2]);break;default:R.apply(void 0,S)}})(b)}finally{g(v),l=!1}}}}})(typeof self>"u"?ko:self);var aE={exports:{}};(function(a){a.exports=function(e,t,r,s){return(a={}).dedupe=function(u,m){var g,y=e(m);if(!t(u)&&typeof u!="object")throw new Error("contains_dupes must be an array or object");if(Object.keys(u).length===0)return typeof console!==void 0&&console.warn("contains_dupes is empty"),[];y.limit&&(typeof console!==void 0&&console.warn("options.limit will be ignored in dedupe"),y.limit=0),y.cutoff&&typeof y.cutoff=="number"||(typeof console!==void 0&&console.warn("Using default cutoff of 70"),y.cutoff=70),y.scorer||(y.scorer=r,typeof console!==void 0&&console.log("Using default scorer 'ratio' for dedupe")),g=y.processor&&typeof y.processor=="function"?y.processor:function(x){return x};var v={};for(var b in u){var T=g(u[b]);if(typeof T!="string"&&!(T instanceof String))throw new Error("Each processed item in dedupe must be a string.");var C=s(T,u,y);y.returnObjects?(C.length===1||(C=C.sort(function(x,I){var B=g(x.choice),G=g(I.choice),re=B.length,oe=G.length;return re===oe?B<G?-1:1:oe-re})),y.keepmap?v[g(C[0].choice)]={item:C[0].choice,key:C[0].key,matches:C}:v[g(C[0].choice)]={item:C[0].choice,key:C[0].key}):(C.length===1||(C=C.sort(function(x,I){var B=g(x[0]),G=g(I[0]),re=B.length,oe=G.length;return re===oe?B<G?-1:1:oe-re})),y.keepmap?v[g(C[0][0])]=[C[0][0],C[0][2],C]:v[g(C[0][0])]=[C[0][0],C[0][2]])}var R=[];for(var S in v)R.push(v[S]);return R},a}})(aE),function(){var a=gP,e=pP,t=hL,r=va._intersect,s=va._intersectWith,l=va._difference,u=va._differenceWith,m=va._partialRight,g=va._forEach,y=va._isArray,v=dL,b=nE,T=rE,C=function(H,D,K){var Z={},V=nE,ve=rE;function te(pe){return pe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Re(pe){return(typeof pe=="string"||pe instanceof String)&&pe.length>0}Z.validate=Re,Z.process_and_sort=function(ge){return Re(ge)?ge.match(/\S+/g).sort().join(" ").trim():""},Z.tokenize=function(ge,Ce){if(Ce&&Ce.wildcards&&D&&K){var Pe=K(V,Ce,ve);return D(ge.match(/\S+/g),function(Xe,ye){return Pe(Xe,ye)===0})}return H(ge.match(/\S+/g))};const He=/[^\p{L}\p{N}]/gu;return Z.full_process=function(ge,Ce){if(!(ge instanceof String)&&typeof ge!="string")return"";var Pe;if(Ce&&typeof Ce=="object"&&Ce.wildcards&&typeof Ce.wildcards=="string"&&Ce.wildcards.length>0){var Xe=Ce.wildcards.toLowerCase();if(ge=ge.toLowerCase(),Ce.force_ascii){var ye="[^\0 -|"+te(Xe)+"]";ge=ge.replace(new RegExp(ye,"g"),"");var Oe="["+te(Xe)+"]",xt=Xe[0];ge=ge.replace(new RegExp(Oe,"g"),xt);var Ze="[^A-Za-z0-9"+te(Xe)+"]";Pe=(ge=(ge=ge.replace(new RegExp(Ze,"g")," ")).replace(/_/g," ")).trim()}else{var Te="[^\\p{L}\\p{N}|"+te(Xe)+"]";ge=ge.replace(new RegExp(Te,"gu")," "),Oe="["+te(Xe)+"]",xt=Xe[0],Pe=(ge=ge.replace(new RegExp(Oe,"g"),xt)).trim()}}else Pe=Ce&&(Ce.force_ascii||Ce===!0)?(ge=ge.replace(/[^\x00-\x7F]/g,"")).replace(/\W|_/g," ").toLowerCase().trim():ge.replace(He," ").toLowerCase().trim();return Ce&&Ce.collapseWhitespace&&(Pe=Pe.replace(/\s+/g," ")),Pe},Z.clone_and_set_option_defaults=function(pe){if(pe&&pe.isAClone)return pe;var ge={isAClone:!0};if(pe){var Ce,Pe=Object.keys(pe);for(Ce=0;Ce<Pe.length;Ce++)ge[Pe[Ce]]=pe[Pe[Ce]]}return ge.full_process!==!1&&(ge.full_process=!0),ge.force_ascii!==!0&&(ge.force_ascii=!1),ge.normalize!==!1&&ge.astral===!0&&(ge.normalize=!0),ge.collapseWhitespace!==!1&&(ge.collapseWhitespace=!0),ge},Z.isCustomFunc=function(pe){return typeof pe!="function"||pe.name!=="token_set_ratio"&&pe.name!=="partial_token_set_ratio"&&pe.name!=="token_sort_ratio"&&pe.name!=="partial_token_sort_ratio"&&pe.name!=="QRatio"&&pe.name!=="WRatio"&&pe.name!=="distance"&&pe.name!=="partial_ratio"},Z}(va._uniq,va._uniqWith,m),R=C.validate,S=C.process_and_sort,x=C.tokenize,I=C.full_process,B=C.clone_and_set_option_defaults,G=C.isCustomFunc,re=aE.exports(B,y,oe,U).dedupe;function oe(H,D,K){var Z=B(K);return H=Z.normalize?H.normalize():H,D=Z.normalize?D.normalize():D,H=Z.full_process?I(H,Z):H,D=Z.full_process?I(D,Z):D,R(H)&&R(D)?be(H,D,Z):0}function de(H,D,K){var Z=B(K);return H=Z.normalize?H.normalize():H,D=Z.normalize?D.normalize():D,H=Z.full_process?I(H,Z):H,D=Z.full_process?I(D,Z):D,R(H)&&R(D)?me(H,D,Z):0}function M(H,D,K){var Z=B(K);return H=Z.normalize?H.normalize():H,D=Z.normalize?D.normalize():D,H=Z.full_process?I(H,Z):H,D=Z.full_process?I(D,Z):D,R(H)&&R(D)?(Z.partial=!0,me(H,D,Z)):0}function N(H,D,K){var Z=B(K);return H=Z.normalize?H.normalize():H,D=Z.normalize?D.normalize():D,H=Z.full_process?I(H,Z):H,D=Z.full_process?I(D,Z):D,R(H)&&R(D)?(Z.proc_sorted||(H=S(H),D=S(D)),be(H,D,Z)):0}function j(H,D,K){var Z=B(K);return H=Z.normalize?H.normalize():H,D=Z.normalize?D.normalize():D,H=Z.full_process?I(H,Z):H,D=Z.full_process?I(D,Z):D,R(H)&&R(D)?(Z.partial=!0,Z.proc_sorted||(H=S(H),D=S(D)),Be(H,D,Z)):0}function U(H,D,K){var Z,V=B(K);if(y(D))Z=D.length;else{if(!(D instanceof Object))throw new Error("Invalid choices");Z=Object.keys(D).length}if(!D||Z===0)return typeof console!==void 0&&console.warn("No choices"),[];if(V.processor&&typeof V.processor!="function")throw new Error("Invalid Processor");if(V.processor||(V.processor=function(Te){return Te}),V.scorer&&typeof V.scorer!="function")throw new Error("Invalid Scorer");V.scorer||(V.scorer=oe);var ve=G(V.scorer);V.cutoff&&typeof V.cutoff=="number"||(V.cutoff=-1);var te=function(Te,rt){return Te};V.full_process&&(te=I,ve||(V.processed=!0));var Re=!1;ve||(V.astral&&V.normalize&&(V.normalize=!1,String.prototype.normalize?(Re=!0,H=H.normalize()):typeof console!==void 0&&console.warn("Normalization not supported in your environment")),H=te(H,V),V.full_process=!1,H.length===0&&typeof console!==void 0&&console.warn("Processed query is empty string"));var He,pe,ge,Ce,Pe=[],Xe=!1,ye=!1,Oe=!1;if(V.scorer.name==="token_sort_ratio"||V.scorer.name==="partial_token_sort_ratio"){var xt=S(H);ye=!0}else if(V.scorer.name==="token_set_ratio"||V.scorer.name==="partial_token_set_ratio"){var Ze=x(H,V);Oe=!0}return V.returnObjects?(ge=function(Te,rt){return Te.score-rt.score},Ce=function(Te,rt){return rt.score-Te.score}):(ge=function(Te,rt){return Te[1]-rt[1]},Ce=function(Te,rt){return rt[1]-Te[1]}),g(D,function(Te,rt){V.tokens=void 0,V.proc_sorted=!1,ye?(V.proc_sorted=!0,Te&&Te.proc_sorted?pe=Te.proc_sorted:(pe=te(Re?V.processor(Te).normalize():V.processor(Te),V),pe=S(pe)),He=V.scorer(xt,pe,V)):Oe?(pe="x",Te&&Te.tokens?(V.tokens=[Ze,Te.tokens],V.trySimple&&(pe=te(V.processor(Te),V))):(pe=te(Re?V.processor(Te).normalize():V.processor(Te),V),V.tokens=[Ze,x(pe,V)]),He=V.scorer(H,pe,V)):ve?(pe=V.processor(Te),He=V.scorer(H,pe,V)):(typeof(pe=te(Re?V.processor(Te).normalize():V.processor(Te),V))=="string"&&pe.length!==0||(Xe=!0),He=V.scorer(H,pe,V)),He>V.cutoff&&(V.returnObjects?Pe.push({choice:Te,score:He,key:rt}):Pe.push([Te,He,rt]))}),Xe&&typeof console!==void 0&&console.log("One or more choices were empty. (post-processing if applied)"),V.limit&&typeof V.limit=="number"&&V.limit>0&&V.limit<Z&&!V.unsorted?Pe=e.nlargest(Pe,V.limit,ge):V.unsorted||(Pe=Pe.sort(Ce)),Pe}function q(H,D,K,Z){var V,ve,te=B(K);typeof K.abortController=="object"&&(V=K.abortController),typeof K.cancelToken=="object"&&(ve=K.cancelToken);var Re=256;typeof te.asyncLoopOffset=="number"&&(Re=te.asyncLoopOffset<1?1:te.asyncLoopOffset);var He,pe=!1;if(D&&D.length&&y(D))He=D.length,pe=!0;else{if(!(D instanceof Object))return void Z(new Error("Invalid choices"));He=Object.keys(D).length}if(!D||He===0)return typeof console!==void 0&&console.warn("No choices"),void Z(null,[]);if(te.processor&&typeof te.processor!="function")Z(new Error("Invalid Processor"));else if(te.processor||(te.processor=function(Ne){return Ne}),te.scorer&&typeof te.scorer!="function")Z(new Error("Invalid Scorer"));else{te.scorer||(te.scorer=oe);var ge=G(te.scorer);te.cutoff&&typeof te.cutoff=="number"||(te.cutoff=-1);var Ce=function(Ne,at){return Ne};te.full_process&&(Ce=I,ge||(te.processed=!0));var Pe=!1;ge||(te.astral&&te.normalize&&(te.normalize=!1,String.prototype.normalize?(Pe=!0,H=H.normalize()):typeof console!==void 0&&console.warn("Normalization not supported in your environment")),H=Ce(H,te),te.full_process=!1,H.length===0&&typeof console!==void 0&&console.warn("Processed query is empty string"));var Xe,ye,Oe,xt,Ze,Te=[],rt=!1,pn=!1,Sn=!1;if(te.scorer.name==="token_sort_ratio"||te.scorer.name==="partial_token_sort_ratio"){var $t=S(H);pn=!0}else if(te.scorer.name==="token_set_ratio"||te.scorer.name==="partial_token_set_ratio"){var Ct=x(H,te);Sn=!0}te.returnObjects?(xt=function(Ne,at){return Ne.score-at.score},Ze=function(Ne,at){return at.score-Ne.score}):(xt=function(Ne,at){return Ne[1]-at[1]},Ze=function(Ne,at){return at[1]-Ne[1]});var pt=Object.keys(D);pe?Qe(0):Qe(pt[0],0)}function Qe(Ne,at){(pe||D.hasOwnProperty(Ne))&&(te.tokens=void 0,te.proc_sorted=!1,pn?(te.proc_sorted=!0,D[Ne]&&D[Ne].proc_sorted?ye=D[Ne].proc_sorted:(ye=Ce(Pe?te.processor(D[Ne]).normalize():te.processor(D[Ne]),te),ye=S(ye)),Oe=te.scorer($t,ye,te)):Sn?(ye="x",D[Ne]&&D[Ne].tokens?(te.tokens=[Ct,D[Ne].tokens],te.trySimple&&(ye=Ce(te.processor(D[Ne]),te))):(ye=Ce(Pe?te.processor(D[Ne]).normalize():te.processor(D[Ne]),te),te.tokens=[Ct,x(ye,te)]),Oe=te.scorer(H,ye,te)):ge?(ye=te.processor(D[Ne]),Oe=te.scorer(H,ye,te)):(typeof(ye=Ce(Pe?te.processor(D[Ne]).normalize():te.processor(D[Ne]),te))=="string"&&ye.length!==0||(rt=!0),Oe=te.scorer(H,ye,te)),Xe=pe?parseInt(Ne):Ne,Oe>te.cutoff&&(te.returnObjects?Te.push({choice:D[Ne],score:Oe,key:Xe}):Te.push([D[Ne],Oe,Xe]))),V&&V.signal.aborted===!0?Z(new Error("aborted")):ve&&ve.canceled===!0?Z(new Error("canceled")):pe&&Ne<D.length-1?Ne%Re==0?setImmediate(function(){Qe(Ne+1)}):Qe(Ne+1):at<pt.length-1?at%Re==0?setImmediate(function(){Qe(pt[at+1],at+1)}):Qe(pt[at+1],at+1):(rt&&typeof console!==void 0&&console.log("One or more choices were empty. (post-processing if applied)"),te.limit&&typeof te.limit=="number"&&te.limit>0&&te.limit<He&&!te.unsorted?Te=e.nlargest(Te,te.limit,xt):te.unsorted||(Te=Te.sort(Ze)),Z(null,Te))}}var $="%*SuperUniqueWildcardKey*%";function P(H,D){var K=H;if(D.astral)var Z=Array.from(K);else Z=K.split("");var V={};if(D.wildcards)for(var ve=0;ve<Z.length;ve++){var te=Z[ve];D.wildcards.indexOf(te)>-1?V[$]?V[$]+=1:V[$]=1:V[te]?V[te]+=1:V[te]=1}else for(ve=0;ve<Z.length;ve++)V[te=Z[ve]]?V[te]+=1:V[te]=1;return V}function St(H,D,K){for(var Z=D,V=H.reduce(function(pe,ge){return pe[ge]=P(ge,K),pe},{}),ve=Z.reduce(function(pe,ge){return pe[ge]=P(ge,K),pe},{}),te=[],Re=0;Z.length&&Re<H.length;){var He=t(Z,function(pe){return ge=V[H[Re]],Ce=ve[pe],Pe=Object.keys(ge),Xe=Object.keys(Ce),ye=r(Pe,Xe).map(function(Ze){return ge[Ze]*Ce[Ze]}).reduce(function(Ze,Te){return Ze+Te},0),Oe=Pe.map(function(Ze){return Math.pow(ge[Ze],2)}).reduce(function(Ze,Te){return Ze+Te},0),xt=Xe.map(function(Ze){return Math.pow(Ce[Ze],2)}).reduce(function(Ze,Te){return Ze+Te},0),ye/(Math.sqrt(Oe)*Math.sqrt(xt));var ge,Ce,Pe,Xe,ye,Oe,xt},"desc")[0];te.push(He),Re++,Z=Z.filter(function(pe){return pe!==He})}return te.concat(Z)}function ht(H,D,K,Z){var V=D,ve=Z;return(D.length>Z.length||D.length===Z.length&&(H.length>K.length||[H,K].sort()[0]===K))&&(V=Z,ve=D),[V,ve]}function ae(H,D,K){if(K.tokens)Z=K.tokens[0],V=K.tokens[1];else var Z=x(H,K),V=x(D,K);var ve=ht(H,Z.sort(),D,V.sort()),te=ve[0];const Re=St(te,ve[1],K);return K.partial?Be(te.join(" "),Re.join(" "),K):be(te.join(" "),Re.join(" "),K)}function me(H,D,K){if(K.tokens)Z=K.tokens[0],V=K.tokens[1];else var Z=x(H,K),V=x(D,K);if(K.wildcards)var ve=m(b,K,T),te=function($t,Ct){return ve($t,Ct)===0},Re=s(Z,V,te),He=u(Z,V,te),pe=u(V,Z,te);else Re=r(Z,V),He=l(Z,V),pe=l(V,Z);var ge=Re.sort().join(" "),Ce=He.sort(),Pe=pe.sort();if(K.sortBySimilarity)var Xe=ht(H,Ce,D,Pe),ye=Xe[0],Oe=Xe[1],xt=ye.join(" "),Ze=St(ye,Oe,K).join(" ");else xt=Ce.join(" "),Ze=Pe.join(" ");var Te=ge+" "+xt,rt=ge+" "+Ze;ge=ge.trim(),Te=Te.trim(),rt=rt.trim();var pn=be;if(K.partial&&(pn=Be,ge.length>0))return 100;var Sn=[pn(ge,Te,K),pn(ge,rt,K),pn(Te,rt,K)];return K.trySimple&&Sn.push(pn(H,D,K)),Math.max.apply(null,Sn)}function be(H,D,K){if(!R(H)||!R(D))return 0;if(K.ratio_alg&&K.ratio_alg==="difflib"){var Z=new a(null,H,D).ratio();return Math.round(100*Z)}var V,ve;return K.subcost===void 0&&(K.subcost=2),K.astral?(V=v(H,D,K),ve=Array.from(H).length+Array.from(D).length):K.wildcards?(V=b(H,D,K,T),ve=H.length+D.length):(V=T(H,D,K),ve=H.length+D.length),Math.round((ve-V)/ve*100)}function Be(H,D,K){if(!R(H)||!R(D))return 0;if(H.length<=D.length)var Z=H,V=D;else Z=D,V=H;for(var ve=new a(null,Z,V).getMatchingBlocks(),te=[],Re=0;Re<ve.length;Re++){var He=ve[Re][1]-ve[Re][0]>0?ve[Re][1]-ve[Re][0]:0,pe=He+Z.length,ge=be(Z,V.substring(He,pe),K);if(ge>99.5)return 100;te.push(ge)}return Math.max.apply(null,te)}Object.keys||(Object.keys=function(){var H=Object.prototype.hasOwnProperty,D=!{toString:null}.propertyIsEnumerable("toString"),K=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Z=K.length;return function(V){if(typeof V!="object"&&(typeof V!="function"||V===null))throw new TypeError("Object.keys called on non-object");var ve,te,Re=[];for(ve in V)H.call(V,ve)&&Re.push(ve);if(D)for(te=0;te<Z;te++)H.call(V,K[te])&&Re.push(K[te]);return Re}}());var L=void 0;typeof Promise<"u"&&(L=function(H,D,K){return new Promise(function(Z,V){q(H,D,K,function(ve,te){ve?V(ve):Z(te)})})});var he={distance:function(D,K,Z){var V=B(Z);return D=V.normalize?D.normalize():D,K=V.normalize?K.normalize():K,D=V.full_process?I(D,V):D,K=V.full_process?I(K,V):K,V.subcost===void 0&&(V.subcost=1),V.astral?v(D,K,V):b(D,K,V,T)},ratio:oe,partial_ratio:function(D,K,Z){var V=B(Z);return D=V.normalize?D.normalize():D,K=V.normalize?K.normalize():K,D=V.full_process?I(D,V):D,K=V.full_process?I(K,V):K,R(D)&&R(K)?Be(D,K,V):0},token_set_ratio:de,token_sort_ratio:N,partial_token_set_ratio:M,partial_token_sort_ratio:j,token_similarity_sort_ratio:function(D,K,Z){var V=B(Z);return D=V.normalize?D.normalize():D,K=V.normalize?K.normalize():K,D=V.full_process?I(D,V):D,K=V.full_process?I(K,V):K,R(D)&&R(K)?ae(D,K,V):0},partial_token_similarity_sort_ratio:function(D,K,Z){var V=B(Z);return D=V.normalize?D.normalize():D,K=V.normalize?K.normalize():K,D=V.full_process?I(D,V):D,K=V.full_process?I(K,V):K,R(D)&&R(K)?(V.partial=!0,ae(D,K,V)):0},WRatio:function(D,K,Z){var V=B(Z);if(D=V.normalize?D.normalize():D,K=V.normalize?K.normalize():K,D=V.full_process?I(D,V):D,K=V.full_process?I(K,V):K,V.full_process=!1,!R(D)||!R(K))return 0;var ve=!0,te=.95,Re=.9,He=be(D,K,V),pe=Math.max(D.length,K.length)/Math.min(D.length,K.length);if(pe<1.5&&(ve=!1),pe>8&&(Re=.6),ve){var ge=Be(D,K,V)*Re,Ce=j(D,K,V)*te*Re,Pe=M(D,K,V)*te*Re;return Math.round(Math.max(He,ge,Ce,Pe))}var Xe=N(D,K,V)*te,ye=de(D,K,V)*te;return Math.round(Math.max(He,Xe,ye))},full_process:I,extract:U,extractAsync:q,extractAsPromised:L,process_and_sort:S,unique_tokens:x,dedupe:re};Sx.exports=he}();var gn=Sx.exports;gn.distance;const iE=gn.ratio;gn.partial_ratio;gn.token_set_ratio;gn.token_sort_ratio;gn.partial_token_set_ratio;gn.partial_token_sort_ratio;gn.token_similarity_sort_ratio;gn.partial_token_similarity_sort_ratio;gn.WRatio;gn.full_process;gn.extract;gn.extractAsync;gn.extractAsPromised;gn.process_and_sort;gn.unique_tokens;gn.dedupe;const fL=(a,e)=>{let t=0;const r=iE((a.maker||"").toLowerCase(),(e.brands||"").toLowerCase());t+=r/100*40;const s=iE((a.name||"").toLowerCase(),(e.product_name||"").toLowerCase());if(t+=s/100*30,a.cacaoPercentage&&e.cacao_percentage){const l=Math.abs(parseFloat(a.cacaoPercentage)-parseFloat(e.cacao_percentage));l<=2?t+=20:l<=5&&(t+=10)}if(a.type&&e.categories){const l=e.categories.toLowerCase(),u=a.type.toLowerCase();(u.includes("dark")&&l.includes("dark chocolate")||u.includes("milk")&&l.includes("milk chocolate")||u.includes("white")&&l.includes("white chocolate"))&&(t+=10)}return t},mL=async a=>{try{const e=[];a.maker&&e.push(a.maker),a.name&&e.push(a.name),a.type&&e.push(a.type+" chocolate"),a.cacaoPercentage&&e.push(a.cacaoPercentage+"%");const t=encodeURIComponent(e.join(" ")),r=await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${t}&json=1&page_size=5`);if(!r.ok)throw new Error("Failed to fetch from Open Food Facts API");const s=await r.json();return!s.products||s.products.length===0?[]:s.products.map(u=>{const m=fL(a,u);return{offProduct:u,score:m,matchDetails:{ourChocolate:{brand:a.maker,name:a.name,type:a.type,cacaoPercentage:a.cacaoPercentage},offChocolate:{brand:u.brands,name:u.product_name,categories:u.categories,cacaoPercentage:u.cacao_percentage}}}}).sort((u,m)=>m.score-u.score)}catch(e){return console.error("Error finding potential matches:",e),[]}},gL=async a=>{const r={highConfidence:[],mediumConfidence:[],lowConfidence:[],noMatches:[]};for(const s of a){const l=await mL(s);if(l.length===0){r.noMatches.push({ourChocolate:s,potentialMatches:[]});continue}const u=l[0];u.score>=70?r.highConfidence.push({ourChocolate:s,topMatch:u,allMatches:l}):u.score>=40?r.mediumConfidence.push({ourChocolate:s,topMatch:u,allMatches:l}):r.lowConfidence.push({ourChocolate:s,topMatch:u,allMatches:l})}return r},pL=(a,e)=>{const t={...a};return e.code&&(t.barcode=e.code),!t.imageUrl&&e.image_url&&(t.imageUrl=e.image_url),!t.origin&&e.countries&&(t.origin=e.countries),!t.ingredients&&e.ingredients_text&&(t.ingredients=e.ingredients_text.split(",").map(r=>r.trim())),!t.nutritionalInfo&&e.nutriments&&(t.nutritionalInfo={servingSize:e.serving_size||"100g",calories:e.nutriments.energy_value||0,fat:e.nutriments.fat_value||0,sugar:e.nutriments.sugars_value||0,protein:e.nutriments.proteins_value||0}),t.openFoodFactsId=e.code,t};function yL(){const[a,e]=F.useState([]),[t,r]=F.useState(null),[s,l]=F.useState(0),[u,m]=F.useState(!1),[g,y]=F.useState(""),[v,b]=F.useState(10);F.useEffect(()=>{(async()=>{const I=await dy();e(I)})()},[]);const T=async()=>{m(!0),y("Processing batch...");try{const x=s,I=Math.min(x+v,a.length),B=a.slice(x,I),G=await gL(B);r(G),y(`Processed ${B.length} chocolates. Found ${G.highConfidence.length} high confidence matches, ${G.mediumConfidence.length} medium confidence matches, and ${G.lowConfidence.length} low confidence matches.`)}catch(x){console.error("Error processing batch:",x),y(`Error: ${x.message}`)}finally{m(!1)}},C=(x,I)=>{const B=pL(x,I);console.log("Accepted match:",B),l(s+v),r(null)},R=()=>{l(s+v),r(null)},S=x=>{const{ourChocolate:I,topMatch:B}=x,G=B.offProduct;return d.jsxs("div",{className:"match-item",children:[d.jsxs("div",{className:"match-chocolate",children:[d.jsx("h3",{children:I.name}),d.jsxs("p",{children:["Brand: ",I.maker]}),d.jsxs("p",{children:["Type: ",I.type]}),d.jsxs("p",{children:["Cacao: ",I.cacaoPercentage,"%"]}),I.imageUrl&&d.jsx("img",{src:I.imageUrl,alt:I.name,className:"chocolate-image"})]}),d.jsxs("div",{className:"match-arrows",children:[d.jsx("span",{children:""}),d.jsxs("div",{className:"match-score",children:[B.score.toFixed(0),"%"]})]}),d.jsxs("div",{className:"off-chocolate",children:[d.jsx("h3",{children:G.product_name}),d.jsxs("p",{children:["Brand: ",G.brands]}),d.jsxs("p",{children:["Categories: ",G.categories]}),G.image_url&&d.jsx("img",{src:G.image_url,alt:G.product_name,className:"chocolate-image"}),d.jsxs("div",{className:"match-actions",children:[d.jsx("button",{onClick:()=>C(I,G),className:"accept-button",children:"Accept Match"}),d.jsx("button",{onClick:R,className:"reject-button",children:"Reject Match"})]})]})]},I.id)};return d.jsxs("div",{className:"chocolate-matching-tool",children:[d.jsx("h2",{children:"Chocolate Matching Tool"}),d.jsxs("p",{children:["Total chocolates: ",a.length]}),d.jsxs("p",{children:["Current position: ",s," / ",a.length]}),d.jsxs("div",{className:"batch-controls",children:[d.jsxs("label",{children:["Batch size:",d.jsx("input",{type:"number",value:v,onChange:x=>b(parseInt(x.target.value)),min:"1",max:"20"})]}),d.jsx("button",{onClick:T,disabled:u||s>=a.length,children:u?"Processing...":"Process Next Batch"})]}),g&&d.jsx("div",{className:"message",children:g}),t&&d.jsxs("div",{className:"match-results",children:[d.jsx("h3",{children:"High Confidence Matches"}),t.highConfidence.map(S),d.jsx("h3",{children:"Medium Confidence Matches"}),t.mediumConfidence.map(S),d.jsx("h3",{children:"Low Confidence Matches"}),t.lowConfidence.map(S)]})]})}function vL(){const[a,e]=F.useState(!1),[t,r]=F.useState(""),[s,l]=F.useState(""),[u,m]=F.useState({name:"",makerId:"",type:"",origin:"",cacaoPercentage:"",description:"",ingredients:"",barcode:""}),[g,y]=F.useState(null),[v,b]=F.useState(null),[T,C]=F.useState(!1),[R,S]=F.useState(!1),x=de=>{const{name:M,value:N}=de.target;m({...u,[M]:N})},I=de=>{y(de),b(URL.createObjectURL(de))},B=(de,M)=>{y(de),b(M),C(!1)},G=async de=>{de.preventDefault();try{S(!0),r("");const M={name:u.name,makerId:u.makerId,type:u.type,origin:u.origin,cacaoPercentage:parseFloat(u.cacaoPercentage)||0,description:u.description,ingredients:u.ingredients.split(",").map(N=>N.trim()),barcode:u.barcode||null};await TO(M,g),r("Chocolate added successfully!"),m({name:"",makerId:"",type:"",origin:"",cacaoPercentage:"",description:"",ingredients:"",barcode:""}),y(null),b(null)}catch(M){r(`Error adding chocolate: ${M.message}`),console.error("Error adding chocolate:",M)}finally{S(!1)}},re=async()=>{try{e(!0),r(""),await rP(),r("Successfully added initial chocolates! Check the console for details.")}catch(de){r(`Error adding chocolates: ${de.message}`),console.error("Error in bulk upload:",de)}finally{e(!1)}},oe=async()=>{try{e(!0),l("Enriching database with Open Food Facts data"),r("Starting database enrichment process..."),await dP(),r("Database enrichment complete! Check the console for details.")}catch(de){r(`Error enriching database: ${de.message}`),console.error("Error in database enrichment:",de)}finally{e(!1),l("")}};return d.jsx("div",{className:"admin-page",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"admin-header",children:[d.jsx("h1",{children:"Chocolate Admin Dashboard"}),d.jsxs("div",{className:"admin-links",children:[d.jsx(xe,{to:"/admin/batch-upload",className:"admin-link",children:"Batch Image Upload"}),d.jsx(xe,{to:"/",className:"back-link",children:"Back to Home"})]})]}),d.jsxs("div",{className:"admin-section",children:[d.jsx("h2",{children:"Database Actions"}),d.jsxs("div",{className:"admin-actions",children:[d.jsx("button",{onClick:re,className:"admin-button primary",disabled:a,children:a?"Adding Chocolates...":"Add Initial Chocolates"}),d.jsx("button",{onClick:aP,className:"admin-button secondary",disabled:a,children:"Add Commercial Chocolates"}),d.jsx("button",{onClick:iP,className:"admin-button secondary",disabled:a,children:"Add 100 More Popular Chocolates"}),t&&d.jsx("div",{className:"message",children:t})]})]}),d.jsxs("div",{className:"admin-section",children:[d.jsx("h2",{children:"Open Food Facts Integration"}),d.jsxs("div",{className:"admin-actions",children:[d.jsx("button",{onClick:oe,className:"admin-button primary",disabled:a,children:a&&s==="Enriching database"?"Enriching Database...":"Enrich Database with Open Food Facts"}),d.jsxs("div",{className:"admin-section",children:[d.jsx("h2",{children:"Chocolate Matching Tool"}),d.jsx("p",{children:"Match your chocolates with Open Food Facts database"}),d.jsx(yL,{})]}),d.jsx("p",{className:"help-text",children:"This will search for matching products in Open Food Facts and update your database with barcodes, images, and additional information."})]})]}),d.jsxs("div",{className:"admin-section",children:[d.jsx("h2",{children:"Add New Chocolate"}),d.jsxs("form",{onSubmit:G,className:"admin-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"name",children:"Chocolate Name"}),d.jsx("input",{type:"text",id:"name",name:"name",value:u.name,onChange:x,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"makerId",children:"Maker"}),d.jsxs("select",{id:"makerId",name:"makerId",value:u.makerId,onChange:x,required:!0,children:[d.jsx("option",{value:"",children:"Select a maker"}),d.jsx("option",{value:"placeholder",children:"Placeholder (connect to real makers later)"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"type",children:"Type"}),d.jsxs("select",{id:"type",name:"type",value:u.type,onChange:x,required:!0,children:[d.jsx("option",{value:"",children:"Select a type"}),d.jsx("option",{value:"Dark",children:"Dark"}),d.jsx("option",{value:"Milk",children:"Milk"}),d.jsx("option",{value:"White",children:"White"}),d.jsx("option",{value:"Ruby",children:"Ruby"}),d.jsx("option",{value:"Flavored",children:"Flavored"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"origin",children:"Origin"}),d.jsx("input",{type:"text",id:"origin",name:"origin",value:u.origin,onChange:x,placeholder:"Country or region of origin"})]}),d.jsxs("div",{className:"form-group full-width",children:[d.jsx("label",{children:"Chocolate Label Image"}),d.jsx("div",{className:"image-options",children:d.jsx("button",{type:"button",className:"toggle-search-button",onClick:()=>C(!T),children:T?"Hide Product Search":"Search Product Database"})}),T&&d.jsx(ProductImageSearch,{onImageSelected:B}),d.jsx(nP,{onImageSelected:I,currentImageUrl:v}),d.jsx("p",{className:"field-helper",children:"Upload a clear image of the chocolate label"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"barcode",children:"Barcode (EAN/UPC)"}),d.jsx("input",{type:"text",id:"barcode",name:"barcode",value:u.barcode||"",onChange:x,placeholder:"Product barcode if available"}),d.jsx("p",{className:"field-helper",children:"For future scanning functionality"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"cacaoPercentage",children:"Cacao Percentage"}),d.jsx("input",{type:"number",id:"cacaoPercentage",name:"cacaoPercentage",value:u.cacaoPercentage,onChange:x,min:"0",max:"100",placeholder:"e.g. 70"})]}),d.jsxs("div",{className:"form-group full-width",children:[d.jsx("label",{htmlFor:"description",children:"Description"}),d.jsx("textarea",{id:"description",name:"description",value:u.description,onChange:x,rows:"4",required:!0})]}),d.jsxs("div",{className:"form-group full-width",children:[d.jsx("label",{htmlFor:"ingredients",children:"Ingredients"}),d.jsx("textarea",{id:"ingredients",name:"ingredients",value:u.ingredients,onChange:x,rows:"2",placeholder:"Comma-separated list of ingredients"})]}),d.jsx("button",{type:"submit",className:"admin-button",disabled:R,children:R?"Adding Chocolate...":"Add Chocolate"})]})]})]})})}function _L(){return d.jsx("div",{className:"about-page",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"about-header",children:[d.jsx("h1",{children:"About Chocly"}),d.jsx("p",{className:"tagline",children:"For the love of all things chocolate"})]}),d.jsxs("section",{className:"about-story",children:[d.jsxs("div",{className:"story-content",children:[d.jsx("h2",{children:"Our Story"}),d.jsx("p",{children:"Chocly was born from a personal journey of discovery and delight. Inspired by the cravings and curiosities of a chocolate-loving wife during pregnancy, our founder embarked on a quest to catalogue favorite bars, explore new and exciting flavors, and research the next must-try indulgence. What began as a loving endeavor has blossomed into Chocly, a platform for all chocolate enthusiasts to share their experiences, learn from others, and navigate the delicious world of premium chocolate together."})]}),d.jsx("div",{className:"story-image",children:d.jsx("div",{className:"image-placeholder",children:d.jsx("span",{children:"Our Founder's Story"})})})]}),d.jsxs("section",{className:"mission-section",children:[d.jsx("div",{className:"mission-overlay"}),d.jsxs("div",{className:"mission-content",children:[d.jsx("h2",{children:"Our Mission"}),d.jsx("p",{className:"mission-statement",children:"To help everyone discover and enjoy better chocolate."}),d.jsx("p",{className:"mission-description",children:"We believe that chocolate is more than just a treatit's an experience, an art form, and a connection to cultures and traditions around the world. Our aim is to make premium chocolate accessible to everyone, creating a community where chocolate lovers can share their discoveries and expand their palates."})]})]}),d.jsxs("section",{className:"values-section",children:[d.jsx("h2",{children:"What Drives Us"}),d.jsxs("div",{className:"values-grid",children:[d.jsxs("div",{className:"value-card",children:[d.jsx("div",{className:"value-icon quality"}),d.jsx("h3",{children:"Quality"}),d.jsx("p",{children:"We champion chocolate crafted with care, highlighting makers who prioritize quality ingredients and ethical practices."})]}),d.jsxs("div",{className:"value-card",children:[d.jsx("div",{className:"value-icon community"}),d.jsx("h3",{children:"Community"}),d.jsx("p",{children:"We believe in the power of shared experiences and diverse perspectives to enrich our chocolate journeys."})]}),d.jsxs("div",{className:"value-card",children:[d.jsx("div",{className:"value-icon discovery"}),d.jsx("h3",{children:"Discovery"}),d.jsx("p",{children:"We're committed to helping people break out of their chocolate comfort zones and discover new favorites."})]}),d.jsxs("div",{className:"value-card",children:[d.jsx("div",{className:"value-icon education"}),d.jsx("h3",{children:"Education"}),d.jsx("p",{children:"We seek to deepen understanding of chocolatefrom bean to barempowering informed choices."})]})]})]}),d.jsxs("section",{className:"team-section",children:[d.jsx("h2",{children:"Meet Our Team"}),d.jsx("p",{className:"team-intro",children:"We're a group of passionate chocolate enthusiasts dedicated to building the best platform for chocolate lovers everywhere."}),d.jsx("div",{className:"team-grid",children:d.jsx("div",{className:"team-placeholder",children:d.jsx("p",{children:"Team photos coming soon!"})})})]}),d.jsxs("section",{className:"join-section",children:[d.jsx("h2",{children:"Join Our Chocolate Revolution"}),d.jsx("p",{children:"Whether you're a casual chocolate enjoyer or a dedicated connoisseur, Chocly is the place for you. Sign up today to start tracking your chocolate journey, sharing your discoveries, and connecting with fellow enthusiasts."}),d.jsxs("div",{className:"cta-buttons",children:[d.jsx("a",{href:"/signup",className:"cta-button primary",children:"Join Chocly"}),d.jsx("a",{href:"/browse",className:"cta-button secondary",children:"Explore Chocolates"})]})]})]})})}function wL(){const[a,e]=F.useState({name:"",email:"",subject:"",message:""}),[t,r]=F.useState(!1),s=u=>{const{name:m,value:g}=u.target;e(y=>({...y,[m]:g}))},l=u=>{u.preventDefault(),console.log("Form submitted:",a),r(!0),e({name:"",email:"",subject:"",message:""}),setTimeout(()=>{r(!1)},5e3)};return d.jsx("div",{className:"contact-page",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"contact-header",children:[d.jsx("h1",{children:"Contact Us"}),d.jsx("p",{className:"tagline",children:"We'd love to hear from you!"})]}),d.jsxs("div",{className:"contact-content",children:[d.jsxs("div",{className:"contact-info",children:[d.jsxs("div",{className:"contact-section",children:[d.jsx("h2",{children:"Get in Touch"}),d.jsx("p",{children:"Have questions about chocolate? Want to suggest a new feature? Or maybe you just want to say hello? We're here for all your chocolate-related inquiries."})]}),d.jsxs("div",{className:"contact-section",children:[d.jsx("h3",{children:"Connect With Us"}),d.jsxs("div",{className:"social-links",children:[d.jsxs("a",{href:"#",className:"social-link",children:[d.jsx("span",{className:"social-icon instagram"}),d.jsx("span",{children:"@chocly"})]}),d.jsxs("a",{href:"#",className:"social-link",children:[d.jsx("span",{className:"social-icon twitter"}),d.jsx("span",{children:"@choclyapp"})]}),d.jsxs("a",{href:"#",className:"social-link",children:[d.jsx("span",{className:"social-icon facebook"}),d.jsx("span",{children:"Chocly"})]})]})]}),d.jsxs("div",{className:"contact-section",children:[d.jsx("h3",{children:"Email Us"}),d.jsx("p",{className:"email-address",children:"hello@chocly.co"}),d.jsx("p",{className:"email-note",children:"We aim to respond to all inquiries within 48 hours."})]}),d.jsx("div",{className:"contact-image",children:d.jsx("div",{className:"image-placeholder",children:d.jsx("span",{children:"Chocly Team"})})})]}),d.jsxs("div",{className:"contact-form-container",children:[d.jsx("h2",{children:"Send Us a Message"}),t&&d.jsx("div",{className:"success-message",children:d.jsx("p",{children:"Thank you for your message! We'll be in touch soon."})}),d.jsxs("form",{className:"contact-form",onSubmit:l,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"name",children:"Your Name"}),d.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:s,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"email",children:"Email Address"}),d.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:s,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"subject",children:"Subject"}),d.jsx("input",{type:"text",id:"subject",name:"subject",value:a.subject,onChange:s,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"message",children:"Your Message"}),d.jsx("textarea",{id:"message",name:"message",value:a.message,onChange:s,rows:"5",required:!0})]}),d.jsx("button",{type:"submit",className:"submit-button",children:"Send Message"})]})]})]}),d.jsxs("div",{className:"faq-section",children:[d.jsx("h2",{children:"Frequently Asked Questions"}),d.jsxs("div",{className:"faq-grid",children:[d.jsxs("div",{className:"faq-item",children:[d.jsx("h3",{children:"How do I create an account?"}),d.jsx("p",{children:'Click the "Sign Up" button in the top right corner of the page and follow the instructions to create your Chocly account.'})]}),d.jsxs("div",{className:"faq-item",children:[d.jsx("h3",{children:"Can I add a chocolate that's not in the database?"}),d.jsx("p",{children:'Absolutely! You can suggest new chocolates to add to our database. Look for the "Add Chocolate" option in your profile menu.'})]}),d.jsxs("div",{className:"faq-item",children:[d.jsx("h3",{children:"How do I leave a review?"}),d.jsx("p",{children:"Navigate to any chocolate's detail page and scroll down to the review section. You can rate the chocolate and share your thoughts there."})]}),d.jsxs("div",{className:"faq-item",children:[d.jsx("h3",{children:"Is Chocly available as a mobile app?"}),d.jsx("p",{children:"We're currently working on mobile apps for iOS and Android. Stay tuned for updates!"})]})]})]})]})})}function bL(){const e=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return d.jsx("div",{className:"legal-page privacy-policy",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"legal-header",children:[d.jsx("h1",{children:"Privacy Policy"}),d.jsxs("p",{className:"last-updated",children:["Last Updated: ",e]})]}),d.jsxs("div",{className:"legal-content",children:[d.jsx("section",{className:"legal-section",children:d.jsx("p",{className:"intro-text",children:"At Chocly, we take your privacy seriously. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website and use our services. Please read this privacy policy carefully. If you do not agree with the terms of this privacy policy, please do not access the site."})}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Information We Collect"}),d.jsx("h3",{children:"Personal Data"}),d.jsx("p",{children:"We may collect personal information that you voluntarily provide to us when you register on our platform, express interest in obtaining information about us or our products and services, participate in activities on the platform, or otherwise contact us. The personal information we collect may include:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Name and contact information (email address, phone number)"}),d.jsx("li",{children:"Account credentials (username, password)"}),d.jsx("li",{children:"Profile information (profile picture, biography)"}),d.jsx("li",{children:"User-generated content (reviews, ratings, comments, uploads)"}),d.jsx("li",{children:"Preferences and interests related to chocolate"})]}),d.jsx("h3",{children:"Automatically Collected Information"}),d.jsx("p",{children:"When you visit our platform, we may automatically collect certain information about your device and your interaction with our platform. This information might include:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Device information (IP address, browser type, operating system)"}),d.jsx("li",{children:"Usage data (pages visited, time spent on pages, links clicked)"}),d.jsx("li",{children:"Location data (country, city)"}),d.jsx("li",{children:"Cookies and similar tracking technologies"})]})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"How We Use Your Information"}),d.jsx("p",{children:"We may use the information we collect for various purposes, including to:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Create and manage your user account"}),d.jsx("li",{children:"Provide and maintain our services"}),d.jsx("li",{children:"Personalize your experience on our platform"}),d.jsx("li",{children:"Process transactions and send related information"}),d.jsx("li",{children:"Respond to your inquiries and provide customer support"}),d.jsx("li",{children:"Send you administrative information, updates, and marketing communications"}),d.jsx("li",{children:"Improve our platform, products, and services"}),d.jsx("li",{children:"Protect against fraudulent, unauthorized, or illegal activity"}),d.jsx("li",{children:"Comply with legal obligations"})]})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Sharing Your Information"}),d.jsx("p",{children:"We may share your information in the following situations:"}),d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("strong",{children:"With Service Providers:"})," We may share your information with third-party vendors, service providers, contractors, or agents who perform services for us."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"For Business Transfers:"})," We may share or transfer your information in connection with, or during negotiations of, any merger, sale of company assets, financing, or acquisition of all or a portion of our business."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"With Your Consent:"})," We may disclose your information for any other purpose with your consent."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"With Other Users:"})," When you share personal information or interact in public areas of the platform, such information may be viewed by all users and may be publicly distributed."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"For Legal Compliance:"})," We may disclose your information where required to do so by law or in response to valid requests by public authorities."]})]})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"User-Generated Content"}),d.jsx("p",{children:"Our platform allows you to upload, post, and share content, including reviews, ratings, comments, and images. Any information you post or share through these activities will be available to other users of the platform and the public. You should be aware that any information you provide in these areas may be read, collected, and used by others who access them."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Storage and Security"}),d.jsx("p",{children:"We use commercially reasonable measures to protect your personal information from unauthorized access, use, or disclosure. However, please be aware that no method of electronic transmission or storage is 100% secure, and we cannot guarantee absolute security of your data."}),d.jsx("p",{children:"We will retain your personal information only for as long as is necessary for the purposes set out in this privacy policy, unless a longer retention period is required or permitted by law."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Your Privacy Rights"}),d.jsx("p",{children:"Depending on your location, you may have certain rights regarding your personal information, including:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"The right to access the personal information we have about you"}),d.jsx("li",{children:"The right to request correction of inaccurate personal information"}),d.jsx("li",{children:"The right to request deletion of your personal information"}),d.jsx("li",{children:"The right to object to processing of your personal information"}),d.jsx("li",{children:"The right to data portability"}),d.jsx("li",{children:"The right to withdraw consent"})]}),d.jsx("p",{children:"To exercise these rights, please contact us using the contact information provided below. Please note that we may ask you to verify your identity before responding to such requests."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Cookies and Similar Technologies"}),d.jsx("p",{children:"We use cookies and similar tracking technologies to collect and use information about you and your interaction with our platform. We use these technologies to collect information about your browsing activities over time and across different websites. You can instruct your browser to refuse all cookies or to indicate when a cookie is being sent. However, if you do not accept cookies, you may not be able to use some portions of our platform."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Children's Privacy"}),d.jsx("p",{children:"Our platform is not intended for individuals under the age of 13. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and you are aware that your child has provided us with personal information, please contact us."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Changes to This Privacy Policy"}),d.jsx("p",{children:'We may update our privacy policy from time to time. We will notify you of any changes by posting the new privacy policy on this page and updating the "Last Updated" date at the top of this policy. You are advised to review this privacy policy periodically for any changes.'})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"Contact Us"}),d.jsx("p",{children:"If you have questions or comments about this privacy policy, please contact us at:"}),d.jsxs("p",{className:"contact-info",children:["Email: privacy@chocly.co",d.jsx("br",{}),"Address: 123 Chocolate Lane, Sweet City, CA 94000"]})]})]})]})})}function EL(){const e=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return d.jsx("div",{className:"legal-page terms-of-service",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"legal-header",children:[d.jsx("h1",{children:"Terms of Service"}),d.jsxs("p",{className:"last-updated",children:["Last Updated: ",e]})]}),d.jsxs("div",{className:"legal-content",children:[d.jsx("section",{className:"legal-section",children:d.jsx("p",{className:"intro-text",children:'Welcome to Chocly! These Terms of Service ("Terms") govern your access to and use of the Chocly website and services. Please read these Terms carefully before using our services. By accessing or using our services, you agree to be bound by these Terms and our Privacy Policy.'})}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"1. Acceptance of Terms"}),d.jsx("p",{children:"By accessing or using Chocly, you agree to be bound by these Terms. If you do not agree to all the terms and conditions of this agreement, you may not access or use our services."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"2. Changes to Terms"}),d.jsx("p",{children:'We reserve the right to modify these Terms at any time. We will provide notice of significant changes by posting the updated Terms on this page with a new "Last Updated" date. Your continued use of Chocly after any changes to the Terms constitutes your acceptance of such changes.'})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"3. Account Registration and Security"}),d.jsx("p",{children:"To access certain features of Chocly, you may be required to register for an account. When registering, you agree to provide accurate, current, and complete information. You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account. You agree to notify us immediately of any unauthorized use of your account."}),d.jsx("p",{children:"We reserve the right to suspend or terminate your account at our discretion if we believe that you have violated these Terms or if your account shows signs of fraud, abuse, or suspicious activity."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"4. User Content"}),d.jsx("h3",{children:"4.1 Content Ownership"}),d.jsx("p",{children:'You retain all ownership rights to the content you post, upload, or share on Chocly ("User Content"). By submitting User Content, you grant Chocly a worldwide, non-exclusive, royalty-free, sublicensable, and transferable license to use, reproduce, distribute, prepare derivative works of, display, and perform the User Content in connection with the operation and promotion of Chocly.'}),d.jsx("h3",{children:"4.2 Content Restrictions"}),d.jsx("p",{children:"You agree not to post, upload, or share any User Content that:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Violates any law or regulation"}),d.jsx("li",{children:"Infringes upon the rights of any third party, including intellectual property rights"}),d.jsx("li",{children:"Is false, misleading, defamatory, or deceptive"}),d.jsx("li",{children:"Contains sexually explicit or pornographic material"}),d.jsx("li",{children:"Promotes discrimination, bigotry, racism, or hatred against any individual or group"}),d.jsx("li",{children:"Is threatening, abusive, or harassing toward any individual or group"}),d.jsx("li",{children:"Promotes illegal or harmful activities"}),d.jsx("li",{children:"Contains viruses, malware, or other harmful code"})]}),d.jsx("h3",{children:"4.3 Content Moderation"}),d.jsx("p",{children:"We reserve the right, but have no obligation, to monitor, edit, or remove any User Content that we determine, in our sole discretion, violates these Terms or is otherwise objectionable. We are not responsible for the accuracy, completeness, appropriateness, or legality of User Content."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"5. Intellectual Property Rights"}),d.jsx("p",{children:"The Chocly name, logo, and all related names, logos, product and service names, designs, and slogans are trademarks of Chocly or its affiliates or licensors. You may not use such marks without our prior written permission."}),d.jsx("p",{children:"All content, features, and functionality of Chocly that is not User Content, including but not limited to text, graphics, images, logos, button icons, software, and the compilation thereof, is the exclusive property of Chocly, its licensors, or its content suppliers and is protected by copyright, trademark, and other intellectual property laws."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"6. Prohibited Activities"}),d.jsx("p",{children:"You agree not to engage in any of the following prohibited activities:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Using Chocly for any illegal purpose or in violation of any local, state, national, or international law"}),d.jsx("li",{children:"Impersonating any person or entity, or falsely stating or otherwise misrepresenting your affiliation with a person or entity"}),d.jsx("li",{children:"Interfering with or disrupting the operation of Chocly or the servers or networks connected to Chocly"}),d.jsx("li",{children:"Attempting to gain unauthorized access to Chocly, user accounts, or computer systems or networks connected to Chocly"}),d.jsx("li",{children:"Collecting or storing personal data about other users without their permission"}),d.jsx("li",{children:"Using automated means, including spiders, robots, crawlers, or data mining tools, to download data from Chocly"}),d.jsx("li",{children:"Introducing any viruses, Trojan horses, worms, or other material that is malicious or technologically harmful"})]})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"7. Third-Party Links and Content"}),d.jsx("p",{children:"Chocly may contain links to third-party websites or services that are not owned or controlled by Chocly. We have no control over, and assume no responsibility for, the content, privacy policies, or practices of any third-party websites or services. You further acknowledge and agree that Chocly shall not be responsible or liable, directly or indirectly, for any damage or loss caused or alleged to be caused by or in connection with the use of or reliance on any such content, goods, or services available on or through any such websites or services."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"8. Disclaimer of Warranties"}),d.jsx("p",{children:'Chocly is provided on an "AS IS" and "AS AVAILABLE" basis, without warranties of any kind, either express or implied, including, but not limited to, implied warranties of merchantability, fitness for a particular purpose, non-infringement, or course of performance.'}),d.jsx("p",{children:"We do not warrant that (a) Chocly will function uninterrupted, secure, or available at any particular time or location; (b) any errors or defects will be corrected; (c) Chocly is free of viruses or other harmful components; or (d) the results of using Chocly will meet your requirements."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"9. Limitation of Liability"}),d.jsx("p",{children:"To the maximum extent permitted by applicable law, in no event shall Chocly, its directors, employees, partners, agents, suppliers, or affiliates be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from (a) your access to or use of or inability to access or use Chocly; (b) any conduct or content of any third party on Chocly; (c) any content obtained from Chocly; and (d) unauthorized access, use, or alteration of your transmissions or content, whether based on warranty, contract, tort (including negligence), or any other legal theory, whether or not we have been informed of the possibility of such damage."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"10. Indemnification"}),d.jsx("p",{children:"You agree to defend, indemnify, and hold harmless Chocly, its directors, employees, partners, agents, suppliers, and affiliates from and against any claims, liabilities, damages, judgments, awards, losses, costs, expenses, or fees (including reasonable attorneys' fees) arising out of or relating to your violation of these Terms or your use of Chocly, including, but not limited to, your User Content, any use of Chocly's content, services, and products other than as expressly authorized in these Terms, or your use of any information obtained from Chocly."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"11. Termination"}),d.jsx("p",{children:"We may terminate or suspend your account and bar access to Chocly immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach these Terms."}),d.jsx("p",{children:"If you wish to terminate your account, you may simply discontinue using Chocly or contact us to request account deletion. All provisions of the Terms which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity, and limitations of liability."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"12. Governing Law"}),d.jsx("p",{children:"These Terms shall be governed and construed in accordance with the laws of the State of California, United States, without regard to its conflict of law provisions. Our failure to enforce any right or provision of these Terms will not be considered a waiver of those rights."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"13. Dispute Resolution"}),d.jsx("p",{children:"Any disputes arising out of or relating to these Terms or your use of Chocly shall be resolved through binding arbitration in accordance with the rules of the American Arbitration Association, except that each party retains the right to seek injunctive or other equitable relief in a court of competent jurisdiction to prevent the actual or threatened infringement or misappropriation of intellectual property rights."})]}),d.jsxs("section",{className:"legal-section",children:[d.jsx("h2",{children:"14. Contact Information"}),d.jsx("p",{children:"If you have any questions about these Terms, please contact us at:"}),d.jsxs("p",{className:"contact-info",children:["Email: terms@chocly.com",d.jsx("br",{}),"Address: 123 Chocolate Lane, Sweet City, CA 94000"]})]})]})]})})}function TL(){return d.jsx(B1,{basename:"/",children:d.jsx(BO,{children:d.jsxs("div",{className:"app",children:[d.jsx(JO,{}),d.jsx("main",{className:"main-content",children:d.jsxs(g1,{children:[d.jsx(wn,{path:"/",element:d.jsx(MO,{})}),d.jsx(wn,{path:"/chocolate/:id",element:d.jsx(zO,{})}),d.jsx(wn,{path:"/search",element:d.jsx(FO,{})}),d.jsx(wn,{path:"/browse",element:d.jsx(KO,{})}),d.jsx(wn,{path:"/barcode",element:d.jsx(YO,{})}),d.jsx(wn,{path:"/profile",element:d.jsx($O,{})}),d.jsx(wn,{path:"/signup",element:d.jsx(XO,{})}),d.jsx(wn,{path:"/login",element:d.jsx(ZO,{})}),d.jsx(wn,{path:"/about",element:d.jsx(_L,{})}),d.jsx(wn,{path:"/contact",element:d.jsx(wL,{})}),d.jsx(wn,{path:"/privacy-policy",element:d.jsx(bL,{})}),d.jsx(wn,{path:"/terms-of-service",element:d.jsx(EL,{})}),d.jsx(wn,{path:"/admin",element:d.jsx(vL,{})}),d.jsx(wn,{path:"/admin/batch-upload",element:d.jsx(tP,{})}),d.jsx(wn,{path:"/category/:categorySlug",element:d.jsx(WO,{})})]})}),d.jsx(eP,{})]})})})}xA.createRoot(document.getElementById("root")).render(d.jsx(F.StrictMode,{children:d.jsx(TL,{})}));
