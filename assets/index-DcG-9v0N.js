(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function Q1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var km={exports:{}},Wl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0;function W1(){if(n0)return Wl;n0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:u}}return Wl.Fragment=e,Wl.jsx=t,Wl.jsxs=t,Wl}var r0;function X1(){return r0||(r0=1,km.exports=W1()),km.exports}var l=X1(),Dm={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function Z1(){if(i0)return De;i0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function T(L){return L===null||typeof L!="object"?null:(L=b&&L[b]||L["@@iterator"],typeof L=="function"?L:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,k={};function I(L,oe,fe){this.props=L,this.context=oe,this.refs=k,this.updater=fe||j}I.prototype.isReactComponent={},I.prototype.setState=function(L,oe){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,oe,"setState")},I.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function z(){}z.prototype=I.prototype;function J(L,oe,fe){this.props=L,this.context=oe,this.refs=k,this.updater=fe||j}var X=J.prototype=new z;X.constructor=J,C(X,I.prototype),X.isPureReactComponent=!0;var re=Array.isArray,ee={H:null,A:null,T:null,S:null,V:null},ce=Object.prototype.hasOwnProperty;function O(L,oe,fe,ue,Ee,ke){return fe=ke.ref,{$$typeof:r,type:L,key:oe,ref:fe!==void 0?fe:null,props:ke}}function N(L,oe){return O(L.type,oe,void 0,void 0,void 0,L.props)}function R(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function S(L){var oe={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(fe){return oe[fe]})}var M=/\/+/g;function B(L,oe){return typeof L=="object"&&L!==null&&L.key!=null?S(""+L.key):oe.toString(36)}function D(){}function Q(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(D,D):(L.status="pending",L.then(function(oe){L.status==="pending"&&(L.status="fulfilled",L.value=oe)},function(oe){L.status==="pending"&&(L.status="rejected",L.reason=oe)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function de(L,oe,fe,ue,Ee){var ke=typeof L;(ke==="undefined"||ke==="boolean")&&(L=null);var Ae=!1;if(L===null)Ae=!0;else switch(ke){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(L.$$typeof){case r:case e:Ae=!0;break;case _:return Ae=L._init,de(Ae(L._payload),oe,fe,ue,Ee)}}if(Ae)return Ee=Ee(L),Ae=ue===""?"."+B(L,0):ue,re(Ee)?(fe="",Ae!=null&&(fe=Ae.replace(M,"$&/")+"/"),de(Ee,oe,fe,"",function(me){return me})):Ee!=null&&(R(Ee)&&(Ee=N(Ee,fe+(Ee.key==null||L&&L.key===Ee.key?"":(""+Ee.key).replace(M,"$&/")+"/")+Ae)),oe.push(Ee)),1;Ae=0;var wt=ue===""?".":ue+":";if(re(L))for(var H=0;H<L.length;H++)ue=L[H],ke=wt+B(ue,H),Ae+=de(ue,oe,fe,ke,Ee);else if(H=T(L),typeof H=="function")for(L=H.call(L),H=0;!(ue=L.next()).done;)ue=ue.value,ke=wt+B(ue,H++),Ae+=de(ue,oe,fe,ke,Ee);else if(ke==="object"){if(typeof L.then=="function")return de(Q(L),oe,fe,ue,Ee);throw oe=String(L),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function Y(L,oe,fe){if(L==null)return L;var ue=[],Ee=0;return de(L,ue,"","",function(ke){return oe.call(fe,ke,Ee++)}),ue}function le(L){if(L._status===-1){var oe=L._result;oe=oe(),oe.then(function(fe){(L._status===0||L._status===-1)&&(L._status=1,L._result=fe)},function(fe){(L._status===0||L._status===-1)&&(L._status=2,L._result=fe)}),L._status===-1&&(L._status=0,L._result=oe)}if(L._status===1)return L._result.default;throw L._result}var ye=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Ie(){}return De.Children={map:Y,forEach:function(L,oe,fe){Y(L,function(){oe.apply(this,arguments)},fe)},count:function(L){var oe=0;return Y(L,function(){oe++}),oe},toArray:function(L){return Y(L,function(oe){return oe})||[]},only:function(L){if(!R(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},De.Component=I,De.Fragment=t,De.Profiler=o,De.PureComponent=J,De.StrictMode=s,De.Suspense=g,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,De.__COMPILER_RUNTIME={__proto__:null,c:function(L){return ee.H.useMemoCache(L)}},De.cache=function(L){return function(){return L.apply(null,arguments)}},De.cloneElement=function(L,oe,fe){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ue=C({},L.props),Ee=L.key,ke=void 0;if(oe!=null)for(Ae in oe.ref!==void 0&&(ke=void 0),oe.key!==void 0&&(Ee=""+oe.key),oe)!ce.call(oe,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&oe.ref===void 0||(ue[Ae]=oe[Ae]);var Ae=arguments.length-2;if(Ae===1)ue.children=fe;else if(1<Ae){for(var wt=Array(Ae),H=0;H<Ae;H++)wt[H]=arguments[H+2];ue.children=wt}return O(L.type,Ee,void 0,void 0,ke,ue)},De.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},De.createElement=function(L,oe,fe){var ue,Ee={},ke=null;if(oe!=null)for(ue in oe.key!==void 0&&(ke=""+oe.key),oe)ce.call(oe,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Ee[ue]=oe[ue]);var Ae=arguments.length-2;if(Ae===1)Ee.children=fe;else if(1<Ae){for(var wt=Array(Ae),H=0;H<Ae;H++)wt[H]=arguments[H+2];Ee.children=wt}if(L&&L.defaultProps)for(ue in Ae=L.defaultProps,Ae)Ee[ue]===void 0&&(Ee[ue]=Ae[ue]);return O(L,ke,void 0,void 0,null,Ee)},De.createRef=function(){return{current:null}},De.forwardRef=function(L){return{$$typeof:m,render:L}},De.isValidElement=R,De.lazy=function(L){return{$$typeof:_,_payload:{_status:-1,_result:L},_init:le}},De.memo=function(L,oe){return{$$typeof:y,type:L,compare:oe===void 0?null:oe}},De.startTransition=function(L){var oe=ee.T,fe={};ee.T=fe;try{var ue=L(),Ee=ee.S;Ee!==null&&Ee(fe,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Ie,ye)}catch(ke){ye(ke)}finally{ee.T=oe}},De.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},De.use=function(L){return ee.H.use(L)},De.useActionState=function(L,oe,fe){return ee.H.useActionState(L,oe,fe)},De.useCallback=function(L,oe){return ee.H.useCallback(L,oe)},De.useContext=function(L){return ee.H.useContext(L)},De.useDebugValue=function(){},De.useDeferredValue=function(L,oe){return ee.H.useDeferredValue(L,oe)},De.useEffect=function(L,oe,fe){var ue=ee.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(L,oe)},De.useId=function(){return ee.H.useId()},De.useImperativeHandle=function(L,oe,fe){return ee.H.useImperativeHandle(L,oe,fe)},De.useInsertionEffect=function(L,oe){return ee.H.useInsertionEffect(L,oe)},De.useLayoutEffect=function(L,oe){return ee.H.useLayoutEffect(L,oe)},De.useMemo=function(L,oe){return ee.H.useMemo(L,oe)},De.useOptimistic=function(L,oe){return ee.H.useOptimistic(L,oe)},De.useReducer=function(L,oe,fe){return ee.H.useReducer(L,oe,fe)},De.useRef=function(L){return ee.H.useRef(L)},De.useState=function(L){return ee.H.useState(L)},De.useSyncExternalStore=function(L,oe,fe){return ee.H.useSyncExternalStore(L,oe,fe)},De.useTransition=function(){return ee.H.useTransition()},De.version="19.1.0",De}var s0;function Ip(){return s0||(s0=1,Dm.exports=Z1()),Dm.exports}var P=Ip();const J1=Q1(P);var Om={exports:{}},Xl={},Pm={exports:{}},Mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function eA(){return a0||(a0=1,function(r){function e(Y,le){var ye=Y.length;Y.push(le);e:for(;0<ye;){var Ie=ye-1>>>1,L=Y[Ie];if(0<o(L,le))Y[Ie]=le,Y[ye]=L,ye=Ie;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var le=Y[0],ye=Y.pop();if(ye!==le){Y[0]=ye;e:for(var Ie=0,L=Y.length,oe=L>>>1;Ie<oe;){var fe=2*(Ie+1)-1,ue=Y[fe],Ee=fe+1,ke=Y[Ee];if(0>o(ue,ye))Ee<L&&0>o(ke,ue)?(Y[Ie]=ke,Y[Ee]=ye,Ie=Ee):(Y[Ie]=ue,Y[fe]=ye,Ie=fe);else if(Ee<L&&0>o(ke,ye))Y[Ie]=ke,Y[Ee]=ye,Ie=Ee;else break e}}return le}function o(Y,le){var ye=Y.sortIndex-le.sortIndex;return ye!==0?ye:Y.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var g=[],y=[],_=1,b=null,T=3,j=!1,C=!1,k=!1,I=!1,z=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function re(Y){for(var le=t(y);le!==null;){if(le.callback===null)s(y);else if(le.startTime<=Y)s(y),le.sortIndex=le.expirationTime,e(g,le);else break;le=t(y)}}function ee(Y){if(k=!1,re(Y),!C)if(t(g)!==null)C=!0,ce||(ce=!0,B());else{var le=t(y);le!==null&&de(ee,le.startTime-Y)}}var ce=!1,O=-1,N=5,R=-1;function S(){return I?!0:!(r.unstable_now()-R<N)}function M(){if(I=!1,ce){var Y=r.unstable_now();R=Y;var le=!0;try{e:{C=!1,k&&(k=!1,J(O),O=-1),j=!0;var ye=T;try{t:{for(re(Y),b=t(g);b!==null&&!(b.expirationTime>Y&&S());){var Ie=b.callback;if(typeof Ie=="function"){b.callback=null,T=b.priorityLevel;var L=Ie(b.expirationTime<=Y);if(Y=r.unstable_now(),typeof L=="function"){b.callback=L,re(Y),le=!0;break t}b===t(g)&&s(g),re(Y)}else s(g);b=t(g)}if(b!==null)le=!0;else{var oe=t(y);oe!==null&&de(ee,oe.startTime-Y),le=!1}}break e}finally{b=null,T=ye,j=!1}le=void 0}}finally{le?B():ce=!1}}}var B;if(typeof X=="function")B=function(){X(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Q=D.port2;D.port1.onmessage=M,B=function(){Q.postMessage(null)}}else B=function(){z(M,0)};function de(Y,le){O=z(function(){Y(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(Y){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var ye=T;T=le;try{return Y()}finally{T=ye}},r.unstable_requestPaint=function(){I=!0},r.unstable_runWithPriority=function(Y,le){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ye=T;T=Y;try{return le()}finally{T=ye}},r.unstable_scheduleCallback=function(Y,le,ye){var Ie=r.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ie+ye:Ie):ye=Ie,Y){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ye+L,Y={id:_++,callback:le,priorityLevel:Y,startTime:ye,expirationTime:L,sortIndex:-1},ye>Ie?(Y.sortIndex=ye,e(y,Y),t(g)===null&&Y===t(y)&&(k?(J(O),O=-1):k=!0,de(ee,ye-Ie))):(Y.sortIndex=L,e(g,Y),C||j||(C=!0,ce||(ce=!0,B()))),Y},r.unstable_shouldYield=S,r.unstable_wrapCallback=function(Y){var le=T;return function(){var ye=T;T=le;try{return Y.apply(this,arguments)}finally{T=ye}}}}(Mm)),Mm}var o0;function tA(){return o0||(o0=1,Pm.exports=eA()),Pm.exports}var Um={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0;function nA(){if(l0)return rn;l0=1;var r=Ip();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:y,implementation:_}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,rn.createPortal=function(g,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,_)},rn.flushSync=function(g){var y=d.T,_=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=_,s.d.f()}},rn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},rn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},rn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var _=y.as,b=m(_,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,j=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:j}):_==="script"&&s.d.X(g,{crossOrigin:b,integrity:T,fetchPriority:j,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},rn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=m(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},rn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,b=m(_,y.crossOrigin);s.d.L(g,_,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},rn.preloadModule=function(g,y){if(typeof g=="string")if(y){var _=m(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},rn.requestFormReset=function(g){s.d.r(g)},rn.unstable_batchedUpdates=function(g,y){return g(y)},rn.useFormState=function(g,y,_){return d.H.useFormState(g,y,_)},rn.useFormStatus=function(){return d.H.useHostTransitionStatus()},rn.version="19.1.0",rn}var c0;function rA(){if(c0)return Um.exports;c0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Um.exports=nA(),Um.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function iA(){if(u0)return Xl;u0=1;var r=tA(),e=Ip(),t=rA();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(u(n)!==n)throw Error(s(188))}function g(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(s(188));return i!==n?null:n}for(var a=n,c=i;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return m(f),n;if(p===c)return m(f),i;p=p.sibling}throw Error(s(188))}if(a.return!==c.return)a=f,c=p;else{for(var E=!1,x=f.child;x;){if(x===a){E=!0,a=f,c=p;break}if(x===c){E=!0,c=f,a=p;break}x=x.sibling}if(!E){for(x=p.child;x;){if(x===a){E=!0,a=p,c=f;break}if(x===c){E=!0,c=p,a=f;break}x=x.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:i}function y(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=y(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),J=Symbol.for("react.consumer"),X=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),S=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function B(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function Q(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case I:return"Profiler";case k:return"StrictMode";case ee:return"Suspense";case ce:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case j:return"Portal";case X:return(n.displayName||"Context")+".Provider";case J:return(n._context.displayName||"Context")+".Consumer";case re:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case O:return i=n.displayName||null,i!==null?i:Q(n.type)||"Memo";case N:i=n._payload,n=n._init;try{return Q(n(i))}catch{}}return null}var de=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Ie=[],L=-1;function oe(n){return{current:n}}function fe(n){0>L||(n.current=Ie[L],Ie[L]=null,L--)}function ue(n,i){L++,Ie[L]=n.current,n.current=i}var Ee=oe(null),ke=oe(null),Ae=oe(null),wt=oe(null);function H(n,i){switch(ue(Ae,i),ue(ke,n),ue(Ee,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?j_(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=j_(i),n=I_(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}fe(Ee),ue(Ee,n)}function me(){fe(Ee),fe(ke),fe(Ae)}function Ge(n){n.memoizedState!==null&&ue(wt,n);var i=Ee.current,a=I_(i,n.type);i!==a&&(ue(ke,n),ue(Ee,a))}function Vt(n){ke.current===n&&(fe(Ee),fe(ke)),wt.current===n&&(fe(wt),$l._currentValue=ye)}var ct=Object.prototype.hasOwnProperty,en=r.unstable_scheduleCallback,Ts=r.unstable_cancelCallback,Fo=r.unstable_shouldYield,Lc=r.unstable_requestPaint,Pn=r.unstable_now,Id=r.unstable_getCurrentPriorityLevel,qo=r.unstable_ImmediatePriority,wa=r.unstable_UserBlockingPriority,bs=r.unstable_NormalPriority,kd=r.unstable_LowPriority,Ea=r.unstable_IdlePriority,Ho=r.log,Vc=r.unstable_setDisableYieldValue,mt=null,Xe=null;function xn(n){if(typeof Ho=="function"&&Vc(n),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(mt,n)}catch{}}var tn=Math.clz32?Math.clz32:xs,Bc=Math.log,Dd=Math.LN2;function xs(n){return n>>>=0,n===0?32:31-(Bc(n)/Dd|0)|0}var As=256,Ss=4194304;function Xn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ta(n,i,a){var c=n.pendingLanes;if(c===0)return 0;var f=0,p=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var x=c&134217727;return x!==0?(c=x&~p,c!==0?f=Xn(c):(E&=x,E!==0?f=Xn(E):a||(a=x&~n,a!==0&&(f=Xn(a))))):(x=c&~p,x!==0?f=Xn(x):E!==0?f=Xn(E):a||(a=c&~n,a!==0&&(f=Xn(a)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,a=i&-i,p>=a||p===32&&(a&4194048)!==0)?i:f}function Cs(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function $o(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Go(){var n=As;return As<<=1,(As&4194048)===0&&(As=256),n}function Yo(){var n=Ss;return Ss<<=1,(Ss&62914560)===0&&(Ss=4194304),n}function Br(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function zr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ko(n,i,a,c,f,p){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var x=n.entanglements,U=n.expirationTimes,G=n.hiddenUpdates;for(a=E&~a;0<a;){var te=31-tn(a),se=1<<te;x[te]=0,U[te]=-1;var K=G[te];if(K!==null)for(G[te]=null,te=0;te<K.length;te++){var W=K[te];W!==null&&(W.lane&=-536870913)}a&=~se}c!==0&&hr(n,c,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(E&~i))}function hr(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-tn(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|a&4194090}function Qo(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-tn(a),f=1<<c;f&i|n[c]&i&&(n[c]|=i),a&=~f}}function Ai(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ba(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Si(){var n=le.p;return n!==0?n:(n=window.event,n===void 0?32:W_(n.type))}function zc(n,i){var a=le.p;try{return le.p=n,i()}finally{le.p=a}}var ot=Math.random().toString(36).slice(2),kt="__reactFiber$"+ot,St="__reactProps$"+ot,Mn="__reactContainer$"+ot,Wo="__reactEvents$"+ot,Od="__reactListeners$"+ot,Ci="__reactHandles$"+ot,Fc="__reactResources$"+ot,Rs="__reactMarker$"+ot;function Ri(n){delete n[kt],delete n[St],delete n[Wo],delete n[Od],delete n[Ci]}function Fr(n){var i=n[kt];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Mn]||a[kt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=P_(n);n!==null;){if(a=n[kt])return a;n=P_(n)}return i}n=a,a=n.parentNode}return null}function dr(n){if(n=n[kt]||n[Mn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function fr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function hn(n){var i=n[Fc];return i||(i=n[Fc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Et(n){n[Rs]=!0}var Xo=new Set,xa={};function Zn(n,i){qr(n,i),qr(n+"Capture",i)}function qr(n,i){for(xa[n]=i,n=0;n<i.length;n++)Xo.add(i[n])}var qc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hc={},Ns={};function $c(n){return ct.call(Ns,n)?!0:ct.call(Hc,n)?!1:qc.test(n)?Ns[n]=!0:(Hc[n]=!0,!1)}function Ni(n,i,a){if($c(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function mr(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Gt(n,i,a,c){if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+c)}}var js,Gc;function Hr(n){if(js===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);js=i&&i[1]||"",Gc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+js+n+Gc}var Aa=!1;function Sa(n,i){if(!n||Aa)return"";Aa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(W){var K=W}Reflect.construct(n,[],se)}else{try{se.call()}catch(W){K=W}n.call(se.prototype)}}else{try{throw Error()}catch(W){K=W}(se=n())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(W){if(W&&K&&typeof W.stack=="string")return[W.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),E=p[0],x=p[1];if(E&&x){var U=E.split(`
`),G=x.split(`
`);for(f=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(c===U.length||f===G.length)for(c=U.length-1,f=G.length-1;1<=c&&0<=f&&U[c]!==G[f];)f--;for(;1<=c&&0<=f;c--,f--)if(U[c]!==G[f]){if(c!==1||f!==1)do if(c--,f--,0>f||U[c]!==G[f]){var te=`
`+U[c].replace(" at new "," at ");return n.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",n.displayName)),te}while(1<=c&&0<=f);break}}}finally{Aa=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Hr(a):""}function Zo(n){switch(n.tag){case 26:case 27:case 5:return Hr(n.type);case 16:return Hr("Lazy");case 13:return Hr("Suspense");case 19:return Hr("SuspenseList");case 0:case 15:return Sa(n.type,!1);case 11:return Sa(n.type.render,!1);case 1:return Sa(n.type,!0);case 31:return Hr("Activity");default:return""}}function Ca(n){try{var i="";do i+=Zo(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function dn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Jo(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Pd(n){var i=Jo(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){c=""+E,p.call(this,E)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ra(n){n._valueTracker||(n._valueTracker=Pd(n))}function el(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Jo(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Is(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Md=/[\n"\\]/g;function Ct(n){return n.replace(Md,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function An(n,i,a,c,f,p,E,x){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),i!=null?E==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+dn(i)):n.value!==""+dn(i)&&(n.value=""+dn(i)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),i!=null?ji(n,E,dn(i)):a!=null?ji(n,E,dn(a)):c!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.name=""+dn(x):n.removeAttribute("name")}function ks(n,i,a,c,f,p,E,x){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||i!=null))return;a=a!=null?""+dn(a):"",i=i!=null?""+dn(i):a,x||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=x?n.checked:!!c,n.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function ji(n,i,a){i==="number"&&Is(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function $r(n,i,a,c){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+dn(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function et(n,i,a){if(i!=null&&(i=""+dn(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+dn(a):""}function Ds(n,i,a,c){if(i==null){if(c!=null){if(a!=null)throw Error(s(92));if(de(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),i=a}a=dn(i),n.defaultValue=a,c=n.textContent,c===a&&c!==""&&c!==null&&(n.value=c)}function Un(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Os=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yc(n,i,a){var c=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,a):typeof a!="number"||a===0||Os.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function tl(n,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&a[f]!==c&&Yc(n,f,c)}else for(var p in i)i.hasOwnProperty(p)&&Yc(n,p,i[p])}function nl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ud=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ld=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(n){return Ld.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Gr=null;function Ln(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Yr=null,Kr=null;function rl(n){var i=dr(n);if(i&&(n=i.stateNode)){var a=n[St]||null;e:switch(n=i.stateNode,i.type){case"input":if(An(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ct(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var f=c[St]||null;if(!f)throw Error(s(90));An(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)c=a[i],c.form===n.form&&el(c)}break e;case"textarea":et(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&$r(n,!!a.multiple,i,!1)}}}var pr=!1;function Kc(n,i,a){if(pr)return n(i,a);pr=!0;try{var c=n(i);return c}finally{if(pr=!1,(Yr!==null||Kr!==null)&&(zu(),Yr&&(i=Yr,n=Kr,Kr=Yr=null,rl(i),n)))for(i=0;i<n.length;i++)rl(n[i])}}function Ps(n,i){var a=n.stateNode;if(a===null)return null;var c=a[St]||null;if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vn=!1;if(Jn)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){Vn=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{Vn=!1}var gr=null,Ii=null,Qr=null;function il(){if(Qr)return Qr;var n,i=Ii,a=i.length,c,f="value"in gr?gr.value:gr.textContent,p=f.length;for(n=0;n<a&&i[n]===f[n];n++);var E=a-n;for(c=1;c<=E&&i[a-c]===f[p-c];c++);return Qr=f.slice(n,1<c?1-c:void 0)}function yr(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function vr(){return!0}function sl(){return!1}function Bt(n){function i(a,c,f,p,E){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(a=n[x],this[x]=a?a(p):p[x]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?vr:sl,this.isPropagationStopped=sl,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=vr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=vr)},persist:function(){},isPersistent:vr}),i}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=Bt(Qe),Us=_({},Qe,{view:0,detail:0}),Qc=Bt(Us),Ia,ka,_r,Ls=_({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_r&&(_r&&n.type==="mousemove"?(Ia=n.screenX-_r.screenX,ka=n.screenY-_r.screenY):ka=Ia=0,_r=n),Ia)},movementY:function(n){return"movementY"in n?n.movementY:ka}}),Bn=Bt(Ls),Wc=_({},Ls,{dataTransfer:0}),Vd=Bt(Wc),Vs=_({},Us,{relatedTarget:0}),Da=Bt(Vs),al=_({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),Oa=Bt(al),Xc=_({},Qe,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Pa=Bt(Xc),Bd=_({},Qe,{data:0}),ol=Bt(Bd),Bs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ll(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Jc[n])?!!i[n]:!1}function zs(){return ll}var eu=_({},Us,{key:function(n){if(n.key){var i=Bs[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=yr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Zc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zs,charCode:function(n){return n.type==="keypress"?yr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?yr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ma=Bt(eu),tu=_({},Ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=Bt(tu),Wr=_({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zs}),nu=Bt(Wr),ru=_({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),iu=Bt(ru),su=_({},Ls,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ua=Bt(su),fn=_({},Qe,{newState:0,oldState:0}),au=Bt(fn),ou=[9,13,27,32],wr=Jn&&"CompositionEvent"in window,h=null;Jn&&"documentMode"in document&&(h=document.documentMode);var v=Jn&&"TextEvent"in window&&!h,w=Jn&&(!wr||h&&8<h&&11>=h),A=" ",q=!1;function Z(n,i){switch(n){case"keyup":return ou.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fe=!1;function Dt(n,i){switch(n){case"compositionend":return he(i);case"keypress":return i.which!==32?null:(q=!0,A);case"textInput":return n=i.data,n===A&&q?null:n;default:return null}}function qe(n,i){if(Fe)return n==="compositionend"||!wr&&Z(n,i)?(n=il(),Qr=Ii=gr=null,Fe=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return w&&i.locale!=="ko"?null:i.data;default:return null}}var zt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ot(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!zt[n.type]:i==="textarea"}function Xr(n,i,a,c){Yr?Kr?Kr.push(c):Kr=[c]:Yr=c,i=Yu(i,"onChange"),0<i.length&&(a=new ja("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var Yt=null,Er=null;function ul(n){A_(n,0)}function lu(n){var i=fr(n);if(el(i))return n}function Gg(n,i){if(n==="change")return i}var Yg=!1;if(Jn){var zd;if(Jn){var Fd="oninput"in document;if(!Fd){var Kg=document.createElement("div");Kg.setAttribute("oninput","return;"),Fd=typeof Kg.oninput=="function"}zd=Fd}else zd=!1;Yg=zd&&(!document.documentMode||9<document.documentMode)}function Qg(){Yt&&(Yt.detachEvent("onpropertychange",Wg),Er=Yt=null)}function Wg(n){if(n.propertyName==="value"&&lu(Er)){var i=[];Xr(i,Er,n,Ln(n)),Kc(ul,i)}}function Ax(n,i,a){n==="focusin"?(Qg(),Yt=i,Er=a,Yt.attachEvent("onpropertychange",Wg)):n==="focusout"&&Qg()}function Sx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return lu(Er)}function Cx(n,i){if(n==="click")return lu(i)}function Rx(n,i){if(n==="input"||n==="change")return lu(i)}function Nx(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Sn=typeof Object.is=="function"?Object.is:Nx;function hl(n,i){if(Sn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!ct.call(i,f)||!Sn(n[f],i[f]))return!1}return!0}function Xg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Zg(n,i){var a=Xg(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xg(a)}}function Jg(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Jg(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function ey(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Is(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Is(n.document)}return i}function qd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var jx=Jn&&"documentMode"in document&&11>=document.documentMode,La=null,Hd=null,dl=null,$d=!1;function ty(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$d||La==null||La!==Is(c)||(c=La,"selectionStart"in c&&qd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),dl&&hl(dl,c)||(dl=c,c=Yu(Hd,"onSelect"),0<c.length&&(i=new ja("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=La)))}function Fs(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Va={animationend:Fs("Animation","AnimationEnd"),animationiteration:Fs("Animation","AnimationIteration"),animationstart:Fs("Animation","AnimationStart"),transitionrun:Fs("Transition","TransitionRun"),transitionstart:Fs("Transition","TransitionStart"),transitioncancel:Fs("Transition","TransitionCancel"),transitionend:Fs("Transition","TransitionEnd")},Gd={},ny={};Jn&&(ny=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function qs(n){if(Gd[n])return Gd[n];if(!Va[n])return n;var i=Va[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in ny)return Gd[n]=i[a];return n}var ry=qs("animationend"),iy=qs("animationiteration"),sy=qs("animationstart"),Ix=qs("transitionrun"),kx=qs("transitionstart"),Dx=qs("transitioncancel"),ay=qs("transitionend"),oy=new Map,Yd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yd.push("scrollEnd");function er(n,i){oy.set(n,i),Zn(i,[n])}var ly=new WeakMap;function zn(n,i){if(typeof n=="object"&&n!==null){var a=ly.get(n);return a!==void 0?a:(i={value:n,source:i,stack:Ca(i)},ly.set(n,i),i)}return{value:n,source:i,stack:Ca(i)}}var Fn=[],Ba=0,Kd=0;function cu(){for(var n=Ba,i=Kd=Ba=0;i<n;){var a=Fn[i];Fn[i++]=null;var c=Fn[i];Fn[i++]=null;var f=Fn[i];Fn[i++]=null;var p=Fn[i];if(Fn[i++]=null,c!==null&&f!==null){var E=c.pending;E===null?f.next=f:(f.next=E.next,E.next=f),c.pending=f}p!==0&&cy(a,f,p)}}function uu(n,i,a,c){Fn[Ba++]=n,Fn[Ba++]=i,Fn[Ba++]=a,Fn[Ba++]=c,Kd|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Qd(n,i,a,c){return uu(n,i,a,c),hu(n)}function za(n,i){return uu(n,null,null,i),hu(n)}function cy(n,i,a){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a);for(var f=!1,p=n.return;p!==null;)p.childLanes|=a,c=p.alternate,c!==null&&(c.childLanes|=a),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&i!==null&&(f=31-tn(a),n=p.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=a|536870912),p):null}function hu(n){if(50<Ul)throw Ul=0,nm=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Fa={};function Ox(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(n,i,a,c){return new Ox(n,i,a,c)}function Wd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Zr(n,i){var a=n.alternate;return a===null?(a=Cn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function uy(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function du(n,i,a,c,f,p){var E=0;if(c=n,typeof n=="function")Wd(n)&&(E=1);else if(typeof n=="string")E=M1(n,a,Ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=Cn(31,a,i,f),n.elementType=R,n.lanes=p,n;case C:return Hs(a.children,f,p,i);case k:E=8,f|=24;break;case I:return n=Cn(12,a,i,f|2),n.elementType=I,n.lanes=p,n;case ee:return n=Cn(13,a,i,f),n.elementType=ee,n.lanes=p,n;case ce:return n=Cn(19,a,i,f),n.elementType=ce,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case z:case X:E=10;break e;case J:E=9;break e;case re:E=11;break e;case O:E=14;break e;case N:E=16,c=null;break e}E=29,a=Error(s(130,n===null?"null":typeof n,"")),c=null}return i=Cn(E,a,i,f),i.elementType=n,i.type=c,i.lanes=p,i}function Hs(n,i,a,c){return n=Cn(7,n,c,i),n.lanes=a,n}function Xd(n,i,a){return n=Cn(6,n,null,i),n.lanes=a,n}function Zd(n,i,a){return i=Cn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var qa=[],Ha=0,fu=null,mu=0,qn=[],Hn=0,$s=null,Jr=1,ei="";function Gs(n,i){qa[Ha++]=mu,qa[Ha++]=fu,fu=n,mu=i}function hy(n,i,a){qn[Hn++]=Jr,qn[Hn++]=ei,qn[Hn++]=$s,$s=n;var c=Jr;n=ei;var f=32-tn(c)-1;c&=~(1<<f),a+=1;var p=32-tn(i)+f;if(30<p){var E=f-f%5;p=(c&(1<<E)-1).toString(32),c>>=E,f-=E,Jr=1<<32-tn(i)+f|a<<f|c,ei=p+n}else Jr=1<<p|a<<f|c,ei=n}function Jd(n){n.return!==null&&(Gs(n,1),hy(n,1,0))}function ef(n){for(;n===fu;)fu=qa[--Ha],qa[Ha]=null,mu=qa[--Ha],qa[Ha]=null;for(;n===$s;)$s=qn[--Hn],qn[Hn]=null,ei=qn[--Hn],qn[Hn]=null,Jr=qn[--Hn],qn[Hn]=null}var mn=null,pt=null,Ke=!1,Ys=null,Tr=!1,tf=Error(s(519));function Ks(n){var i=Error(s(418,""));throw pl(zn(i,n)),tf}function dy(n){var i=n.stateNode,a=n.type,c=n.memoizedProps;switch(i[kt]=n,i[St]=c,a){case"dialog":Le("cancel",i),Le("close",i);break;case"iframe":case"object":case"embed":Le("load",i);break;case"video":case"audio":for(a=0;a<Vl.length;a++)Le(Vl[a],i);break;case"source":Le("error",i);break;case"img":case"image":case"link":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"input":Le("invalid",i),ks(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Ra(i);break;case"select":Le("invalid",i);break;case"textarea":Le("invalid",i),Ds(i,c.value,c.defaultValue,c.children),Ra(i)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||c.suppressHydrationWarning===!0||N_(i.textContent,a)?(c.popover!=null&&(Le("beforetoggle",i),Le("toggle",i)),c.onScroll!=null&&Le("scroll",i),c.onScrollEnd!=null&&Le("scrollend",i),c.onClick!=null&&(i.onclick=Ku),i=!0):i=!1,i||Ks(n)}function fy(n){for(mn=n.return;mn;)switch(mn.tag){case 5:case 13:Tr=!1;return;case 27:case 3:Tr=!0;return;default:mn=mn.return}}function fl(n){if(n!==mn)return!1;if(!Ke)return fy(n),Ke=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||vm(n.type,n.memoizedProps)),a=!a),a&&pt&&Ks(n),fy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){pt=nr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}pt=null}}else i===27?(i=pt,Yi(n.type)?(n=Tm,Tm=null,pt=n):pt=i):pt=mn?nr(n.stateNode.nextSibling):null;return!0}function ml(){pt=mn=null,Ke=!1}function my(){var n=Ys;return n!==null&&(wn===null?wn=n:wn.push.apply(wn,n),Ys=null),n}function pl(n){Ys===null?Ys=[n]:Ys.push(n)}var nf=oe(null),Qs=null,ti=null;function ki(n,i,a){ue(nf,i._currentValue),i._currentValue=a}function ni(n){n._currentValue=nf.current,fe(nf)}function rf(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function sf(n,i,a,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var E=f.child;p=p.firstContext;e:for(;p!==null;){var x=p;p=f;for(var U=0;U<i.length;U++)if(x.context===i[U]){p.lanes|=a,x=p.alternate,x!==null&&(x.lanes|=a),rf(p.return,a,n),c||(E=null);break e}p=x.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(s(341));E.lanes|=a,p=E.alternate,p!==null&&(p.lanes|=a),rf(E,a,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function gl(n,i,a,c){n=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var x=f.type;Sn(f.pendingProps.value,E.value)||(n!==null?n.push(x):n=[x])}}else if(f===wt.current){if(E=f.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push($l):n=[$l])}f=f.return}n!==null&&sf(i,n,a,c),i.flags|=262144}function pu(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ws(n){Qs=n,ti=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function nn(n){return py(Qs,n)}function gu(n,i){return Qs===null&&Ws(n),py(n,i)}function py(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ti===null){if(n===null)throw Error(s(308));ti=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ti=ti.next=i;return a}var Px=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},Mx=r.unstable_scheduleCallback,Ux=r.unstable_NormalPriority,Pt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function af(){return{controller:new Px,data:new Map,refCount:0}}function yl(n){n.refCount--,n.refCount===0&&Mx(Ux,function(){n.controller.abort()})}var vl=null,of=0,$a=0,Ga=null;function Lx(n,i){if(vl===null){var a=vl=[];of=0,$a=cm(),Ga={status:"pending",value:void 0,then:function(c){a.push(c)}}}return of++,i.then(gy,gy),i}function gy(){if(--of===0&&vl!==null){Ga!==null&&(Ga.status="fulfilled");var n=vl;vl=null,$a=0,Ga=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Vx(n,i){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var yy=Y.S;Y.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Lx(n,i),yy!==null&&yy(n,i)};var Xs=oe(null);function lf(){var n=Xs.current;return n!==null?n:st.pooledCache}function yu(n,i){i===null?ue(Xs,Xs.current):ue(Xs,i.pool)}function vy(){var n=lf();return n===null?null:{parent:Pt._currentValue,pool:n}}var _l=Error(s(460)),_y=Error(s(474)),vu=Error(s(542)),cf={then:function(){}};function wy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function _u(){}function Ey(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(_u,_u),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,by(n),n;default:if(typeof i.status=="string")i.then(_u,_u);else{if(n=st,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,by(n),n}throw wl=i,_l}}var wl=null;function Ty(){if(wl===null)throw Error(s(459));var n=wl;return wl=null,n}function by(n){if(n===_l||n===vu)throw Error(s(483))}var Di=!1;function uf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Oi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Pi(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ze&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=hu(n),cy(n,null,a),i}return uu(n,c,i,a),hu(n)}function El(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Qo(n,a)}}function df(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=E:p=p.next=E,a=a.next}while(a!==null);p===null?f=p=i:p=p.next=i}else f=p=i;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var ff=!1;function Tl(){if(ff){var n=Ga;if(n!==null)throw n}}function bl(n,i,a,c){ff=!1;var f=n.updateQueue;Di=!1;var p=f.firstBaseUpdate,E=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var U=x,G=U.next;U.next=null,E===null?p=G:E.next=G,E=U;var te=n.alternate;te!==null&&(te=te.updateQueue,x=te.lastBaseUpdate,x!==E&&(x===null?te.firstBaseUpdate=G:x.next=G,te.lastBaseUpdate=U))}if(p!==null){var se=f.baseState;E=0,te=G=U=null,x=p;do{var K=x.lane&-536870913,W=K!==x.lane;if(W?(He&K)===K:(c&K)===K){K!==0&&K===$a&&(ff=!0),te!==null&&(te=te.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Re=n,be=x;K=i;var rt=a;switch(be.tag){case 1:if(Re=be.payload,typeof Re=="function"){se=Re.call(rt,se,K);break e}se=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=be.payload,K=typeof Re=="function"?Re.call(rt,se,K):Re,K==null)break e;se=_({},se,K);break e;case 2:Di=!0}}K=x.callback,K!==null&&(n.flags|=64,W&&(n.flags|=8192),W=f.callbacks,W===null?f.callbacks=[K]:W.push(K))}else W={lane:K,tag:x.tag,payload:x.payload,callback:x.callback,next:null},te===null?(G=te=W,U=se):te=te.next=W,E|=K;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;W=x,x=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);te===null&&(U=se),f.baseState=U,f.firstBaseUpdate=G,f.lastBaseUpdate=te,p===null&&(f.shared.lanes=0),qi|=E,n.lanes=E,n.memoizedState=se}}function xy(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function Ay(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)xy(a[n],i)}var Ya=oe(null),wu=oe(0);function Sy(n,i){n=ci,ue(wu,n),ue(Ya,i),ci=n|i.baseLanes}function mf(){ue(wu,ci),ue(Ya,Ya.current)}function pf(){ci=wu.current,fe(Ya),fe(wu)}var Mi=0,Oe=null,tt=null,Rt=null,Eu=!1,Ka=!1,Zs=!1,Tu=0,xl=0,Qa=null,Bx=0;function Tt(){throw Error(s(321))}function gf(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Sn(n[a],i[a]))return!1;return!0}function yf(n,i,a,c,f,p){return Mi=p,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=n===null||n.memoizedState===null?cv:uv,Zs=!1,p=a(c,f),Zs=!1,Ka&&(p=Ry(i,a,c,f)),Cy(n),p}function Cy(n){Y.H=Ru;var i=tt!==null&&tt.next!==null;if(Mi=0,Rt=tt=Oe=null,Eu=!1,xl=0,Qa=null,i)throw Error(s(300));n===null||Ft||(n=n.dependencies,n!==null&&pu(n)&&(Ft=!0))}function Ry(n,i,a,c){Oe=n;var f=0;do{if(Ka&&(Qa=null),xl=0,Ka=!1,25<=f)throw Error(s(301));if(f+=1,Rt=tt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Y.H=Yx,p=i(a,c)}while(Ka);return p}function zx(){var n=Y.H,i=n.useState()[0];return i=typeof i.then=="function"?Al(i):i,n=n.useState()[0],(tt!==null?tt.memoizedState:null)!==n&&(Oe.flags|=1024),i}function vf(){var n=Tu!==0;return Tu=0,n}function _f(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function wf(n){if(Eu){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Eu=!1}Mi=0,Rt=tt=Oe=null,Ka=!1,xl=Tu=0,Qa=null}function vn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Oe.memoizedState=Rt=n:Rt=Rt.next=n,Rt}function Nt(){if(tt===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var i=Rt===null?Oe.memoizedState:Rt.next;if(i!==null)Rt=i,tt=n;else{if(n===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Rt===null?Oe.memoizedState=Rt=n:Rt=Rt.next=n}return Rt}function Ef(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Al(n){var i=xl;return xl+=1,Qa===null&&(Qa=[]),n=Ey(Qa,n,i),i=Oe,(Rt===null?i.memoizedState:Rt.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?cv:uv),n}function bu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Al(n);if(n.$$typeof===X)return nn(n)}throw Error(s(438,String(n)))}function Tf(n){var i=null,a=Oe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var c=Oe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Ef(),Oe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),c=0;c<n;c++)a[c]=S;return i.index++,a}function ri(n,i){return typeof i=="function"?i(n):i}function xu(n){var i=Nt();return bf(i,tt,n)}function bf(n,i,a){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var f=n.baseQueue,p=c.pending;if(p!==null){if(f!==null){var E=f.next;f.next=p.next,p.next=E}i.baseQueue=f=p,c.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{i=f.next;var x=E=null,U=null,G=i,te=!1;do{var se=G.lane&-536870913;if(se!==G.lane?(He&se)===se:(Mi&se)===se){var K=G.revertLane;if(K===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),se===$a&&(te=!0);else if((Mi&K)===K){G=G.next,K===$a&&(te=!0);continue}else se={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},U===null?(x=U=se,E=p):U=U.next=se,Oe.lanes|=K,qi|=K;se=G.action,Zs&&a(p,se),p=G.hasEagerState?G.eagerState:a(p,se)}else K={lane:se,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},U===null?(x=U=K,E=p):U=U.next=K,Oe.lanes|=se,qi|=se;G=G.next}while(G!==null&&G!==i);if(U===null?E=p:U.next=x,!Sn(p,n.memoizedState)&&(Ft=!0,te&&(a=Ga,a!==null)))throw a;n.memoizedState=p,n.baseState=E,n.baseQueue=U,c.lastRenderedState=p}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function xf(n){var i=Nt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,p=i.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do p=n(p,E.action),E=E.next;while(E!==f);Sn(p,i.memoizedState)||(Ft=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function Ny(n,i,a){var c=Oe,f=Nt(),p=Ke;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=i();var E=!Sn((tt||f).memoizedState,a);E&&(f.memoizedState=a,Ft=!0),f=f.queue;var x=ky.bind(null,c,f,n);if(Sl(2048,8,x,[n]),f.getSnapshot!==i||E||Rt!==null&&Rt.memoizedState.tag&1){if(c.flags|=2048,Wa(9,Au(),Iy.bind(null,c,f,a,i),null),st===null)throw Error(s(349));p||(Mi&124)!==0||jy(c,i,a)}return a}function jy(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Oe.updateQueue,i===null?(i=Ef(),Oe.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Iy(n,i,a,c){i.value=a,i.getSnapshot=c,Dy(i)&&Oy(n)}function ky(n,i,a){return a(function(){Dy(i)&&Oy(n)})}function Dy(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Sn(n,a)}catch{return!0}}function Oy(n){var i=za(n,2);i!==null&&kn(i,n,2)}function Af(n){var i=vn();if(typeof n=="function"){var a=n;if(n=a(),Zs){xn(!0);try{a()}finally{xn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:n},i}function Py(n,i,a,c){return n.baseState=a,bf(n,tt,typeof c=="function"?c:ri)}function Fx(n,i,a,c,f){if(Cu(n))throw Error(s(485));if(n=i.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};Y.T!==null?a(!0):p.isTransition=!1,c(p),a=i.pending,a===null?(p.next=i.pending=p,My(i,p)):(p.next=a.next,i.pending=a.next=p)}}function My(n,i){var a=i.action,c=i.payload,f=n.state;if(i.isTransition){var p=Y.T,E={};Y.T=E;try{var x=a(f,c),U=Y.S;U!==null&&U(E,x),Uy(n,i,x)}catch(G){Sf(n,i,G)}finally{Y.T=p}}else try{p=a(f,c),Uy(n,i,p)}catch(G){Sf(n,i,G)}}function Uy(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Ly(n,i,c)},function(c){return Sf(n,i,c)}):Ly(n,i,a)}function Ly(n,i,a){i.status="fulfilled",i.value=a,Vy(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,My(n,a)))}function Sf(n,i,a){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=a,Vy(i),i=i.next;while(i!==c)}n.action=null}function Vy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function By(n,i){return i}function zy(n,i){if(Ke){var a=st.formState;if(a!==null){e:{var c=Oe;if(Ke){if(pt){t:{for(var f=pt,p=Tr;f.nodeType!==8;){if(!p){f=null;break t}if(f=nr(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){pt=nr(f.nextSibling),c=f.data==="F!";break e}}Ks(c)}c=!1}c&&(i=a[0])}}return a=vn(),a.memoizedState=a.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:By,lastRenderedState:i},a.queue=c,a=av.bind(null,Oe,c),c.dispatch=a,c=Af(!1),p=If.bind(null,Oe,!1,c.queue),c=vn(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,a=Fx.bind(null,Oe,f,p,a),f.dispatch=a,c.memoizedState=n,[i,a,!1]}function Fy(n){var i=Nt();return qy(i,tt,n)}function qy(n,i,a){if(i=bf(n,i,By)[0],n=xu(ri)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Al(i)}catch(E){throw E===_l?vu:E}else c=i;i=Nt();var f=i.queue,p=f.dispatch;return a!==i.memoizedState&&(Oe.flags|=2048,Wa(9,Au(),qx.bind(null,f,a),null)),[c,p,n]}function qx(n,i){n.action=i}function Hy(n){var i=Nt(),a=tt;if(a!==null)return qy(i,a,n);Nt(),i=i.memoizedState,a=Nt();var c=a.queue.dispatch;return a.memoizedState=n,[i,c,!1]}function Wa(n,i,a,c){return n={tag:n,create:a,deps:c,inst:i,next:null},i=Oe.updateQueue,i===null&&(i=Ef(),Oe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n),n}function Au(){return{destroy:void 0,resource:void 0}}function $y(){return Nt().memoizedState}function Su(n,i,a,c){var f=vn();c=c===void 0?null:c,Oe.flags|=n,f.memoizedState=Wa(1|i,Au(),a,c)}function Sl(n,i,a,c){var f=Nt();c=c===void 0?null:c;var p=f.memoizedState.inst;tt!==null&&c!==null&&gf(c,tt.memoizedState.deps)?f.memoizedState=Wa(i,p,a,c):(Oe.flags|=n,f.memoizedState=Wa(1|i,p,a,c))}function Gy(n,i){Su(8390656,8,n,i)}function Yy(n,i){Sl(2048,8,n,i)}function Ky(n,i){return Sl(4,2,n,i)}function Qy(n,i){return Sl(4,4,n,i)}function Wy(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Xy(n,i,a){a=a!=null?a.concat([n]):null,Sl(4,4,Wy.bind(null,i,n),a)}function Cf(){}function Zy(n,i){var a=Nt();i=i===void 0?null:i;var c=a.memoizedState;return i!==null&&gf(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Jy(n,i){var a=Nt();i=i===void 0?null:i;var c=a.memoizedState;if(i!==null&&gf(i,c[1]))return c[0];if(c=n(),Zs){xn(!0);try{n()}finally{xn(!1)}}return a.memoizedState=[c,i],c}function Rf(n,i,a){return a===void 0||(Mi&1073741824)!==0?n.memoizedState=i:(n.memoizedState=a,n=n_(),Oe.lanes|=n,qi|=n,a)}function ev(n,i,a,c){return Sn(a,i)?a:Ya.current!==null?(n=Rf(n,a,c),Sn(n,i)||(Ft=!0),n):(Mi&42)===0?(Ft=!0,n.memoizedState=a):(n=n_(),Oe.lanes|=n,qi|=n,i)}function tv(n,i,a,c,f){var p=le.p;le.p=p!==0&&8>p?p:8;var E=Y.T,x={};Y.T=x,If(n,!1,i,a);try{var U=f(),G=Y.S;if(G!==null&&G(x,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var te=Vx(U,c);Cl(n,i,te,In(n))}else Cl(n,i,c,In(n))}catch(se){Cl(n,i,{then:function(){},status:"rejected",reason:se},In())}finally{le.p=p,Y.T=E}}function Hx(){}function Nf(n,i,a,c){if(n.tag!==5)throw Error(s(476));var f=nv(n).queue;tv(n,f,i,ye,a===null?Hx:function(){return rv(n),a(c)})}function nv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:ye},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function rv(n){var i=nv(n).next.queue;Cl(n,i,{},In())}function jf(){return nn($l)}function iv(){return Nt().memoizedState}function sv(){return Nt().memoizedState}function $x(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=In();n=Oi(a);var c=Pi(i,n,a);c!==null&&(kn(c,i,a),El(c,i,a)),i={cache:af()},n.payload=i;return}i=i.return}}function Gx(n,i,a){var c=In();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Cu(n)?ov(i,a):(a=Qd(n,i,a,c),a!==null&&(kn(a,n,c),lv(a,i,c)))}function av(n,i,a){var c=In();Cl(n,i,a,c)}function Cl(n,i,a,c){var f={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cu(n))ov(i,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var E=i.lastRenderedState,x=p(E,a);if(f.hasEagerState=!0,f.eagerState=x,Sn(x,E))return uu(n,i,f,0),st===null&&cu(),!1}catch{}finally{}if(a=Qd(n,i,f,c),a!==null)return kn(a,n,c),lv(a,i,c),!0}return!1}function If(n,i,a,c){if(c={lane:2,revertLane:cm(),action:c,hasEagerState:!1,eagerState:null,next:null},Cu(n)){if(i)throw Error(s(479))}else i=Qd(n,a,c,2),i!==null&&kn(i,n,2)}function Cu(n){var i=n.alternate;return n===Oe||i!==null&&i===Oe}function ov(n,i){Ka=Eu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function lv(n,i,a){if((a&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Qo(n,a)}}var Ru={readContext:nn,use:bu,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt},cv={readContext:nn,use:bu,useCallback:function(n,i){return vn().memoizedState=[n,i===void 0?null:i],n},useContext:nn,useEffect:Gy,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Su(4194308,4,Wy.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Su(4194308,4,n,i)},useInsertionEffect:function(n,i){Su(4,2,n,i)},useMemo:function(n,i){var a=vn();i=i===void 0?null:i;var c=n();if(Zs){xn(!0);try{n()}finally{xn(!1)}}return a.memoizedState=[c,i],c},useReducer:function(n,i,a){var c=vn();if(a!==void 0){var f=a(i);if(Zs){xn(!0);try{a(i)}finally{xn(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=Gx.bind(null,Oe,n),[c.memoizedState,n]},useRef:function(n){var i=vn();return n={current:n},i.memoizedState=n},useState:function(n){n=Af(n);var i=n.queue,a=av.bind(null,Oe,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Cf,useDeferredValue:function(n,i){var a=vn();return Rf(a,n,i)},useTransition:function(){var n=Af(!1);return n=tv.bind(null,Oe,n.queue,!0,!1),vn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var c=Oe,f=vn();if(Ke){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),st===null)throw Error(s(349));(He&124)!==0||jy(c,i,a)}f.memoizedState=a;var p={value:a,getSnapshot:i};return f.queue=p,Gy(ky.bind(null,c,p,n),[n]),c.flags|=2048,Wa(9,Au(),Iy.bind(null,c,p,a,i),null),a},useId:function(){var n=vn(),i=st.identifierPrefix;if(Ke){var a=ei,c=Jr;a=(c&~(1<<32-tn(c)-1)).toString(32)+a,i="«"+i+"R"+a,a=Tu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=Bx++,i="«"+i+"r"+a.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:jf,useFormState:zy,useActionState:zy,useOptimistic:function(n){var i=vn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=If.bind(null,Oe,!0,a),a.dispatch=i,[n,i]},useMemoCache:Tf,useCacheRefresh:function(){return vn().memoizedState=$x.bind(null,Oe)}},uv={readContext:nn,use:bu,useCallback:Zy,useContext:nn,useEffect:Yy,useImperativeHandle:Xy,useInsertionEffect:Ky,useLayoutEffect:Qy,useMemo:Jy,useReducer:xu,useRef:$y,useState:function(){return xu(ri)},useDebugValue:Cf,useDeferredValue:function(n,i){var a=Nt();return ev(a,tt.memoizedState,n,i)},useTransition:function(){var n=xu(ri)[0],i=Nt().memoizedState;return[typeof n=="boolean"?n:Al(n),i]},useSyncExternalStore:Ny,useId:iv,useHostTransitionStatus:jf,useFormState:Fy,useActionState:Fy,useOptimistic:function(n,i){var a=Nt();return Py(a,tt,n,i)},useMemoCache:Tf,useCacheRefresh:sv},Yx={readContext:nn,use:bu,useCallback:Zy,useContext:nn,useEffect:Yy,useImperativeHandle:Xy,useInsertionEffect:Ky,useLayoutEffect:Qy,useMemo:Jy,useReducer:xf,useRef:$y,useState:function(){return xf(ri)},useDebugValue:Cf,useDeferredValue:function(n,i){var a=Nt();return tt===null?Rf(a,n,i):ev(a,tt.memoizedState,n,i)},useTransition:function(){var n=xf(ri)[0],i=Nt().memoizedState;return[typeof n=="boolean"?n:Al(n),i]},useSyncExternalStore:Ny,useId:iv,useHostTransitionStatus:jf,useFormState:Hy,useActionState:Hy,useOptimistic:function(n,i){var a=Nt();return tt!==null?Py(a,tt,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Tf,useCacheRefresh:sv},Xa=null,Rl=0;function Nu(n){var i=Rl;return Rl+=1,Xa===null&&(Xa=[]),Ey(Xa,n,i)}function Nl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function ju(n,i){throw i.$$typeof===b?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function hv(n){var i=n._init;return i(n._payload)}function dv(n){function i(F,V){if(n){var $=F.deletions;$===null?(F.deletions=[V],F.flags|=16):$.push(V)}}function a(F,V){if(!n)return null;for(;V!==null;)i(F,V),V=V.sibling;return null}function c(F){for(var V=new Map;F!==null;)F.key!==null?V.set(F.key,F):V.set(F.index,F),F=F.sibling;return V}function f(F,V){return F=Zr(F,V),F.index=0,F.sibling=null,F}function p(F,V,$){return F.index=$,n?($=F.alternate,$!==null?($=$.index,$<V?(F.flags|=67108866,V):$):(F.flags|=67108866,V)):(F.flags|=1048576,V)}function E(F){return n&&F.alternate===null&&(F.flags|=67108866),F}function x(F,V,$,ne){return V===null||V.tag!==6?(V=Xd($,F.mode,ne),V.return=F,V):(V=f(V,$),V.return=F,V)}function U(F,V,$,ne){var _e=$.type;return _e===C?te(F,V,$.props.children,ne,$.key):V!==null&&(V.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===N&&hv(_e)===V.type)?(V=f(V,$.props),Nl(V,$),V.return=F,V):(V=du($.type,$.key,$.props,null,F.mode,ne),Nl(V,$),V.return=F,V)}function G(F,V,$,ne){return V===null||V.tag!==4||V.stateNode.containerInfo!==$.containerInfo||V.stateNode.implementation!==$.implementation?(V=Zd($,F.mode,ne),V.return=F,V):(V=f(V,$.children||[]),V.return=F,V)}function te(F,V,$,ne,_e){return V===null||V.tag!==7?(V=Hs($,F.mode,ne,_e),V.return=F,V):(V=f(V,$),V.return=F,V)}function se(F,V,$){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Xd(""+V,F.mode,$),V.return=F,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case T:return $=du(V.type,V.key,V.props,null,F.mode,$),Nl($,V),$.return=F,$;case j:return V=Zd(V,F.mode,$),V.return=F,V;case N:var ne=V._init;return V=ne(V._payload),se(F,V,$)}if(de(V)||B(V))return V=Hs(V,F.mode,$,null),V.return=F,V;if(typeof V.then=="function")return se(F,Nu(V),$);if(V.$$typeof===X)return se(F,gu(F,V),$);ju(F,V)}return null}function K(F,V,$,ne){var _e=V!==null?V.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return _e!==null?null:x(F,V,""+$,ne);if(typeof $=="object"&&$!==null){switch($.$$typeof){case T:return $.key===_e?U(F,V,$,ne):null;case j:return $.key===_e?G(F,V,$,ne):null;case N:return _e=$._init,$=_e($._payload),K(F,V,$,ne)}if(de($)||B($))return _e!==null?null:te(F,V,$,ne,null);if(typeof $.then=="function")return K(F,V,Nu($),ne);if($.$$typeof===X)return K(F,V,gu(F,$),ne);ju(F,$)}return null}function W(F,V,$,ne,_e){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return F=F.get($)||null,x(V,F,""+ne,_e);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case T:return F=F.get(ne.key===null?$:ne.key)||null,U(V,F,ne,_e);case j:return F=F.get(ne.key===null?$:ne.key)||null,G(V,F,ne,_e);case N:var Me=ne._init;return ne=Me(ne._payload),W(F,V,$,ne,_e)}if(de(ne)||B(ne))return F=F.get($)||null,te(V,F,ne,_e,null);if(typeof ne.then=="function")return W(F,V,$,Nu(ne),_e);if(ne.$$typeof===X)return W(F,V,$,gu(V,ne),_e);ju(V,ne)}return null}function Re(F,V,$,ne){for(var _e=null,Me=null,we=V,xe=V=0,Ht=null;we!==null&&xe<$.length;xe++){we.index>xe?(Ht=we,we=null):Ht=we.sibling;var Ye=K(F,we,$[xe],ne);if(Ye===null){we===null&&(we=Ht);break}n&&we&&Ye.alternate===null&&i(F,we),V=p(Ye,V,xe),Me===null?_e=Ye:Me.sibling=Ye,Me=Ye,we=Ht}if(xe===$.length)return a(F,we),Ke&&Gs(F,xe),_e;if(we===null){for(;xe<$.length;xe++)we=se(F,$[xe],ne),we!==null&&(V=p(we,V,xe),Me===null?_e=we:Me.sibling=we,Me=we);return Ke&&Gs(F,xe),_e}for(we=c(we);xe<$.length;xe++)Ht=W(we,F,xe,$[xe],ne),Ht!==null&&(n&&Ht.alternate!==null&&we.delete(Ht.key===null?xe:Ht.key),V=p(Ht,V,xe),Me===null?_e=Ht:Me.sibling=Ht,Me=Ht);return n&&we.forEach(function(Zi){return i(F,Zi)}),Ke&&Gs(F,xe),_e}function be(F,V,$,ne){if($==null)throw Error(s(151));for(var _e=null,Me=null,we=V,xe=V=0,Ht=null,Ye=$.next();we!==null&&!Ye.done;xe++,Ye=$.next()){we.index>xe?(Ht=we,we=null):Ht=we.sibling;var Zi=K(F,we,Ye.value,ne);if(Zi===null){we===null&&(we=Ht);break}n&&we&&Zi.alternate===null&&i(F,we),V=p(Zi,V,xe),Me===null?_e=Zi:Me.sibling=Zi,Me=Zi,we=Ht}if(Ye.done)return a(F,we),Ke&&Gs(F,xe),_e;if(we===null){for(;!Ye.done;xe++,Ye=$.next())Ye=se(F,Ye.value,ne),Ye!==null&&(V=p(Ye,V,xe),Me===null?_e=Ye:Me.sibling=Ye,Me=Ye);return Ke&&Gs(F,xe),_e}for(we=c(we);!Ye.done;xe++,Ye=$.next())Ye=W(we,F,xe,Ye.value,ne),Ye!==null&&(n&&Ye.alternate!==null&&we.delete(Ye.key===null?xe:Ye.key),V=p(Ye,V,xe),Me===null?_e=Ye:Me.sibling=Ye,Me=Ye);return n&&we.forEach(function(K1){return i(F,K1)}),Ke&&Gs(F,xe),_e}function rt(F,V,$,ne){if(typeof $=="object"&&$!==null&&$.type===C&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case T:e:{for(var _e=$.key;V!==null;){if(V.key===_e){if(_e=$.type,_e===C){if(V.tag===7){a(F,V.sibling),ne=f(V,$.props.children),ne.return=F,F=ne;break e}}else if(V.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===N&&hv(_e)===V.type){a(F,V.sibling),ne=f(V,$.props),Nl(ne,$),ne.return=F,F=ne;break e}a(F,V);break}else i(F,V);V=V.sibling}$.type===C?(ne=Hs($.props.children,F.mode,ne,$.key),ne.return=F,F=ne):(ne=du($.type,$.key,$.props,null,F.mode,ne),Nl(ne,$),ne.return=F,F=ne)}return E(F);case j:e:{for(_e=$.key;V!==null;){if(V.key===_e)if(V.tag===4&&V.stateNode.containerInfo===$.containerInfo&&V.stateNode.implementation===$.implementation){a(F,V.sibling),ne=f(V,$.children||[]),ne.return=F,F=ne;break e}else{a(F,V);break}else i(F,V);V=V.sibling}ne=Zd($,F.mode,ne),ne.return=F,F=ne}return E(F);case N:return _e=$._init,$=_e($._payload),rt(F,V,$,ne)}if(de($))return Re(F,V,$,ne);if(B($)){if(_e=B($),typeof _e!="function")throw Error(s(150));return $=_e.call($),be(F,V,$,ne)}if(typeof $.then=="function")return rt(F,V,Nu($),ne);if($.$$typeof===X)return rt(F,V,gu(F,$),ne);ju(F,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,V!==null&&V.tag===6?(a(F,V.sibling),ne=f(V,$),ne.return=F,F=ne):(a(F,V),ne=Xd($,F.mode,ne),ne.return=F,F=ne),E(F)):a(F,V)}return function(F,V,$,ne){try{Rl=0;var _e=rt(F,V,$,ne);return Xa=null,_e}catch(we){if(we===_l||we===vu)throw we;var Me=Cn(29,we,null,F.mode);return Me.lanes=ne,Me.return=F,Me}finally{}}}var Za=dv(!0),fv=dv(!1),$n=oe(null),br=null;function Ui(n){var i=n.alternate;ue(Mt,Mt.current&1),ue($n,n),br===null&&(i===null||Ya.current!==null||i.memoizedState!==null)&&(br=n)}function mv(n){if(n.tag===22){if(ue(Mt,Mt.current),ue($n,n),br===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(br=n)}}else Li()}function Li(){ue(Mt,Mt.current),ue($n,$n.current)}function ii(n){fe($n),br===n&&(br=null),fe(Mt)}var Mt=oe(0);function Iu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Em(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function kf(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:_({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Df={enqueueSetState:function(n,i,a){n=n._reactInternals;var c=In(),f=Oi(c);f.payload=i,a!=null&&(f.callback=a),i=Pi(n,f,c),i!==null&&(kn(i,n,c),El(i,n,c))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=In(),f=Oi(c);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Pi(n,f,c),i!==null&&(kn(i,n,c),El(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=In(),c=Oi(a);c.tag=2,i!=null&&(c.callback=i),i=Pi(n,c,a),i!==null&&(kn(i,n,a),El(i,n,a))}};function pv(n,i,a,c,f,p,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,E):i.prototype&&i.prototype.isPureReactComponent?!hl(a,c)||!hl(f,p):!0}function gv(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Df.enqueueReplaceState(i,i.state,null)}function Js(n,i){var a=i;if("ref"in i){a={};for(var c in i)c!=="ref"&&(a[c]=i[c])}if(n=n.defaultProps){a===i&&(a=_({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var ku=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function yv(n){ku(n)}function vv(n){console.error(n)}function _v(n){ku(n)}function Du(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function wv(n,i,a){try{var c=n.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Of(n,i,a){return a=Oi(a),a.tag=3,a.payload={element:null},a.callback=function(){Du(n,i)},a}function Ev(n){return n=Oi(n),n.tag=3,n}function Tv(n,i,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;n.payload=function(){return f(p)},n.callback=function(){wv(i,a,c)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){wv(i,a,c),typeof f!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function Kx(n,i,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=a.alternate,i!==null&&gl(i,a,f,!0),a=$n.current,a!==null){switch(a.tag){case 13:return br===null?im():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===cf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([c]):i.add(c),am(n,c,f)),!1;case 22:return a.flags|=65536,c===cf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([c]):a.add(c)),am(n,c,f)),!1}throw Error(s(435,a.tag))}return am(n,c,f),im(),!1}if(Ke)return i=$n.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==tf&&(n=Error(s(422),{cause:c}),pl(zn(n,a)))):(c!==tf&&(i=Error(s(423),{cause:c}),pl(zn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=zn(c,a),f=Of(n.stateNode,c,f),df(n,f),gt!==4&&(gt=2)),!1;var p=Error(s(520),{cause:c});if(p=zn(p,a),Ml===null?Ml=[p]:Ml.push(p),gt!==4&&(gt=2),i===null)return!0;c=zn(c,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Of(a.stateNode,c,n),df(a,n),!1;case 1:if(i=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Hi===null||!Hi.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Ev(f),Tv(f,n,a,c),df(a,f),!1}a=a.return}while(a!==null);return!1}var bv=Error(s(461)),Ft=!1;function Kt(n,i,a,c){i.child=n===null?fv(i,null,a,c):Za(i,n.child,a,c)}function xv(n,i,a,c,f){a=a.render;var p=i.ref;if("ref"in c){var E={};for(var x in c)x!=="ref"&&(E[x]=c[x])}else E=c;return Ws(i),c=yf(n,i,a,E,p,f),x=vf(),n!==null&&!Ft?(_f(n,i,f),si(n,i,f)):(Ke&&x&&Jd(i),i.flags|=1,Kt(n,i,c,f),i.child)}function Av(n,i,a,c,f){if(n===null){var p=a.type;return typeof p=="function"&&!Wd(p)&&p.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=p,Sv(n,i,p,c,f)):(n=du(a.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!Ff(n,f)){var E=p.memoizedProps;if(a=a.compare,a=a!==null?a:hl,a(E,c)&&n.ref===i.ref)return si(n,i,f)}return i.flags|=1,n=Zr(p,c),n.ref=i.ref,n.return=i,i.child=n}function Sv(n,i,a,c,f){if(n!==null){var p=n.memoizedProps;if(hl(p,c)&&n.ref===i.ref)if(Ft=!1,i.pendingProps=c=p,Ff(n,f))(n.flags&131072)!==0&&(Ft=!0);else return i.lanes=n.lanes,si(n,i,f)}return Pf(n,i,a,c,f)}function Cv(n,i,a){var c=i.pendingProps,f=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=p!==null?p.baseLanes|a:a,n!==null){for(f=i.child=n.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;i.childLanes=p&~c}else i.childLanes=0,i.child=null;return Rv(n,i,c,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&yu(i,p!==null?p.cachePool:null),p!==null?Sy(i,p):mf(),mv(i);else return i.lanes=i.childLanes=536870912,Rv(n,i,p!==null?p.baseLanes|a:a,a)}else p!==null?(yu(i,p.cachePool),Sy(i,p),Li(),i.memoizedState=null):(n!==null&&yu(i,null),mf(),Li());return Kt(n,i,f,a),i.child}function Rv(n,i,a,c){var f=lf();return f=f===null?null:{parent:Pt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},n!==null&&yu(i,null),mf(),mv(i),n!==null&&gl(n,i,c,!0),null}function Ou(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function Pf(n,i,a,c,f){return Ws(i),a=yf(n,i,a,c,void 0,f),c=vf(),n!==null&&!Ft?(_f(n,i,f),si(n,i,f)):(Ke&&c&&Jd(i),i.flags|=1,Kt(n,i,a,f),i.child)}function Nv(n,i,a,c,f,p){return Ws(i),i.updateQueue=null,a=Ry(i,c,a,f),Cy(n),c=vf(),n!==null&&!Ft?(_f(n,i,p),si(n,i,p)):(Ke&&c&&Jd(i),i.flags|=1,Kt(n,i,a,p),i.child)}function jv(n,i,a,c,f){if(Ws(i),i.stateNode===null){var p=Fa,E=a.contextType;typeof E=="object"&&E!==null&&(p=nn(E)),p=new a(c,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Df,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=c,p.state=i.memoizedState,p.refs={},uf(i),E=a.contextType,p.context=typeof E=="object"&&E!==null?nn(E):Fa,p.state=i.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(kf(i,a,E,c),p.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&Df.enqueueReplaceState(p,p.state,null),bl(i,c,p,f),Tl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){p=i.stateNode;var x=i.memoizedProps,U=Js(a,x);p.props=U;var G=p.context,te=a.contextType;E=Fa,typeof te=="object"&&te!==null&&(E=nn(te));var se=a.getDerivedStateFromProps;te=typeof se=="function"||typeof p.getSnapshotBeforeUpdate=="function",x=i.pendingProps!==x,te||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x||G!==E)&&gv(i,p,c,E),Di=!1;var K=i.memoizedState;p.state=K,bl(i,c,p,f),Tl(),G=i.memoizedState,x||K!==G||Di?(typeof se=="function"&&(kf(i,a,se,c),G=i.memoizedState),(U=Di||pv(i,a,U,c,K,G,E))?(te||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=G),p.props=c,p.state=G,p.context=E,c=U):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{p=i.stateNode,hf(n,i),E=i.memoizedProps,te=Js(a,E),p.props=te,se=i.pendingProps,K=p.context,G=a.contextType,U=Fa,typeof G=="object"&&G!==null&&(U=nn(G)),x=a.getDerivedStateFromProps,(G=typeof x=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==se||K!==U)&&gv(i,p,c,U),Di=!1,K=i.memoizedState,p.state=K,bl(i,c,p,f),Tl();var W=i.memoizedState;E!==se||K!==W||Di||n!==null&&n.dependencies!==null&&pu(n.dependencies)?(typeof x=="function"&&(kf(i,a,x,c),W=i.memoizedState),(te=Di||pv(i,a,te,c,K,W,U)||n!==null&&n.dependencies!==null&&pu(n.dependencies))?(G||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,W,U),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,W,U)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=W),p.props=c,p.state=W,p.context=U,c=te):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),c=!1)}return p=c,Ou(n,i),c=(i.flags&128)!==0,p||c?(p=i.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&c?(i.child=Za(i,n.child,null,f),i.child=Za(i,null,a,f)):Kt(n,i,a,f),i.memoizedState=p.state,n=i.child):n=si(n,i,f),n}function Iv(n,i,a,c){return ml(),i.flags|=256,Kt(n,i,a,c),i.child}var Mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uf(n){return{baseLanes:n,cachePool:vy()}}function Lf(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Gn),n}function kv(n,i,a){var c=i.pendingProps,f=!1,p=(i.flags&128)!==0,E;if((E=p)||(E=n!==null&&n.memoizedState===null?!1:(Mt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ke){if(f?Ui(i):Li(),Ke){var x=pt,U;if(U=x){e:{for(U=x,x=Tr;U.nodeType!==8;){if(!x){x=null;break e}if(U=nr(U.nextSibling),U===null){x=null;break e}}x=U}x!==null?(i.memoizedState={dehydrated:x,treeContext:$s!==null?{id:Jr,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},U=Cn(18,null,null,0),U.stateNode=x,U.return=i,i.child=U,mn=i,pt=null,U=!0):U=!1}U||Ks(i)}if(x=i.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return Em(x)?i.lanes=32:i.lanes=536870912,null;ii(i)}return x=c.children,c=c.fallback,f?(Li(),f=i.mode,x=Pu({mode:"hidden",children:x},f),c=Hs(c,f,a,null),x.return=i,c.return=i,x.sibling=c,i.child=x,f=i.child,f.memoizedState=Uf(a),f.childLanes=Lf(n,E,a),i.memoizedState=Mf,c):(Ui(i),Vf(i,x))}if(U=n.memoizedState,U!==null&&(x=U.dehydrated,x!==null)){if(p)i.flags&256?(Ui(i),i.flags&=-257,i=Bf(n,i,a)):i.memoizedState!==null?(Li(),i.child=n.child,i.flags|=128,i=null):(Li(),f=c.fallback,x=i.mode,c=Pu({mode:"visible",children:c.children},x),f=Hs(f,x,a,null),f.flags|=2,c.return=i,f.return=i,c.sibling=f,i.child=c,Za(i,n.child,null,a),c=i.child,c.memoizedState=Uf(a),c.childLanes=Lf(n,E,a),i.memoizedState=Mf,i=f);else if(Ui(i),Em(x)){if(E=x.nextSibling&&x.nextSibling.dataset,E)var G=E.dgst;E=G,c=Error(s(419)),c.stack="",c.digest=E,pl({value:c,source:null,stack:null}),i=Bf(n,i,a)}else if(Ft||gl(n,i,a,!1),E=(a&n.childLanes)!==0,Ft||E){if(E=st,E!==null&&(c=a&-a,c=(c&42)!==0?1:Ai(c),c=(c&(E.suspendedLanes|a))!==0?0:c,c!==0&&c!==U.retryLane))throw U.retryLane=c,za(n,c),kn(E,n,c),bv;x.data==="$?"||im(),i=Bf(n,i,a)}else x.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=U.treeContext,pt=nr(x.nextSibling),mn=i,Ke=!0,Ys=null,Tr=!1,n!==null&&(qn[Hn++]=Jr,qn[Hn++]=ei,qn[Hn++]=$s,Jr=n.id,ei=n.overflow,$s=i),i=Vf(i,c.children),i.flags|=4096);return i}return f?(Li(),f=c.fallback,x=i.mode,U=n.child,G=U.sibling,c=Zr(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,G!==null?f=Zr(G,f):(f=Hs(f,x,a,null),f.flags|=2),f.return=i,c.return=i,c.sibling=f,i.child=c,c=f,f=i.child,x=n.child.memoizedState,x===null?x=Uf(a):(U=x.cachePool,U!==null?(G=Pt._currentValue,U=U.parent!==G?{parent:G,pool:G}:U):U=vy(),x={baseLanes:x.baseLanes|a,cachePool:U}),f.memoizedState=x,f.childLanes=Lf(n,E,a),i.memoizedState=Mf,c):(Ui(i),a=n.child,n=a.sibling,a=Zr(a,{mode:"visible",children:c.children}),a.return=i,a.sibling=null,n!==null&&(E=i.deletions,E===null?(i.deletions=[n],i.flags|=16):E.push(n)),i.child=a,i.memoizedState=null,a)}function Vf(n,i){return i=Pu({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Pu(n,i){return n=Cn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Bf(n,i,a){return Za(i,n.child,null,a),n=Vf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Dv(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),rf(n.return,i,a)}function zf(n,i,a,c,f){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=f)}function Ov(n,i,a){var c=i.pendingProps,f=c.revealOrder,p=c.tail;if(Kt(n,i,c.children,a),c=Mt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Dv(n,a,i);else if(n.tag===19)Dv(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(ue(Mt,c),f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Iu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),zf(i,!1,f,a,p);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Iu(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}zf(i,!0,a,null,p);break;case"together":zf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function si(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),qi|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(gl(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,a=Zr(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Zr(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Ff(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&pu(n)))}function Qx(n,i,a){switch(i.tag){case 3:H(i,i.stateNode.containerInfo),ki(i,Pt,n.memoizedState.cache),ml();break;case 27:case 5:Ge(i);break;case 4:H(i,i.stateNode.containerInfo);break;case 10:ki(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ui(i),i.flags|=128,null):(a&i.child.childLanes)!==0?kv(n,i,a):(Ui(i),n=si(n,i,a),n!==null?n.sibling:null);Ui(i);break;case 19:var f=(n.flags&128)!==0;if(c=(a&i.childLanes)!==0,c||(gl(n,i,a,!1),c=(a&i.childLanes)!==0),f){if(c)return Ov(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(Mt,Mt.current),c)break;return null;case 22:case 23:return i.lanes=0,Cv(n,i,a);case 24:ki(i,Pt,n.memoizedState.cache)}return si(n,i,a)}function Pv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Ft=!0;else{if(!Ff(n,a)&&(i.flags&128)===0)return Ft=!1,Qx(n,i,a);Ft=(n.flags&131072)!==0}else Ft=!1,Ke&&(i.flags&1048576)!==0&&hy(i,mu,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var c=i.elementType,f=c._init;if(c=f(c._payload),i.type=c,typeof c=="function")Wd(c)?(n=Js(c,n),i.tag=1,i=jv(null,i,c,n,a)):(i.tag=0,i=Pf(null,i,c,n,a));else{if(c!=null){if(f=c.$$typeof,f===re){i.tag=11,i=xv(null,i,c,n,a);break e}else if(f===O){i.tag=14,i=Av(null,i,c,n,a);break e}}throw i=Q(c)||c,Error(s(306,i,""))}}return i;case 0:return Pf(n,i,i.type,i.pendingProps,a);case 1:return c=i.type,f=Js(c,i.pendingProps),jv(n,i,c,f,a);case 3:e:{if(H(i,i.stateNode.containerInfo),n===null)throw Error(s(387));c=i.pendingProps;var p=i.memoizedState;f=p.element,hf(n,i),bl(i,c,null,a);var E=i.memoizedState;if(c=E.cache,ki(i,Pt,c),c!==p.cache&&sf(i,[Pt],a,!0),Tl(),c=E.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Iv(n,i,c,a);break e}else if(c!==f){f=zn(Error(s(424)),i),pl(f),i=Iv(n,i,c,a);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(pt=nr(n.firstChild),mn=i,Ke=!0,Ys=null,Tr=!0,a=fv(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ml(),c===f){i=si(n,i,a);break e}Kt(n,i,c,a)}i=i.child}return i;case 26:return Ou(n,i),n===null?(a=V_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ke||(a=i.type,n=i.pendingProps,c=Qu(Ae.current).createElement(a),c[kt]=i,c[St]=n,Wt(c,a,n),Et(c),i.stateNode=c):i.memoizedState=V_(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Ge(i),n===null&&Ke&&(c=i.stateNode=M_(i.type,i.pendingProps,Ae.current),mn=i,Tr=!0,f=pt,Yi(i.type)?(Tm=f,pt=nr(c.firstChild)):pt=f),Kt(n,i,i.pendingProps.children,a),Ou(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ke&&((f=c=pt)&&(c=b1(c,i.type,i.pendingProps,Tr),c!==null?(i.stateNode=c,mn=i,pt=nr(c.firstChild),Tr=!1,f=!0):f=!1),f||Ks(i)),Ge(i),f=i.type,p=i.pendingProps,E=n!==null?n.memoizedProps:null,c=p.children,vm(f,p)?c=null:E!==null&&vm(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=yf(n,i,zx,null,null,a),$l._currentValue=f),Ou(n,i),Kt(n,i,c,a),i.child;case 6:return n===null&&Ke&&((n=a=pt)&&(a=x1(a,i.pendingProps,Tr),a!==null?(i.stateNode=a,mn=i,pt=null,n=!0):n=!1),n||Ks(i)),null;case 13:return kv(n,i,a);case 4:return H(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Za(i,null,c,a):Kt(n,i,c,a),i.child;case 11:return xv(n,i,i.type,i.pendingProps,a);case 7:return Kt(n,i,i.pendingProps,a),i.child;case 8:return Kt(n,i,i.pendingProps.children,a),i.child;case 12:return Kt(n,i,i.pendingProps.children,a),i.child;case 10:return c=i.pendingProps,ki(i,i.type,c.value),Kt(n,i,c.children,a),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,Ws(i),f=nn(f),c=c(f),i.flags|=1,Kt(n,i,c,a),i.child;case 14:return Av(n,i,i.type,i.pendingProps,a);case 15:return Sv(n,i,i.type,i.pendingProps,a);case 19:return Ov(n,i,a);case 31:return c=i.pendingProps,a=i.mode,c={mode:c.mode,children:c.children},n===null?(a=Pu(c,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Zr(n.child,c),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Cv(n,i,a);case 24:return Ws(i),c=nn(Pt),n===null?(f=lf(),f===null&&(f=st,p=af(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),i.memoizedState={parent:c,cache:f},uf(i),ki(i,Pt,f)):((n.lanes&a)!==0&&(hf(n,i),bl(i,null,null,a),Tl()),f=n.memoizedState,p=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),ki(i,Pt,c)):(c=p.cache,ki(i,Pt,c),c!==f.cache&&sf(i,[Pt],a,!0))),Kt(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ai(n){n.flags|=4}function Mv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!H_(i)){if(i=$n.current,i!==null&&((He&4194048)===He?br!==null:(He&62914560)!==He&&(He&536870912)===0||i!==br))throw wl=cf,_y;n.flags|=8192}}function Mu(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Yo():536870912,n.lanes|=i,no|=i)}function jl(n,i){if(!Ke)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function ut(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function Wx(n,i,a){var c=i.pendingProps;switch(ef(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(i),null;case 1:return ut(i),null;case 3:return a=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),ni(Pt),me(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(fl(i)?ai(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,my())),ut(i),null;case 26:return a=i.memoizedState,n===null?(ai(i),a!==null?(ut(i),Mv(i,a)):(ut(i),i.flags&=-16777217)):a?a!==n.memoizedState?(ai(i),ut(i),Mv(i,a)):(ut(i),i.flags&=-16777217):(n.memoizedProps!==c&&ai(i),ut(i),i.flags&=-16777217),null;case 27:Vt(i),a=Ae.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ai(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return ut(i),null}n=Ee.current,fl(i)?dy(i):(n=M_(f,c,a),i.stateNode=n,ai(i))}return ut(i),null;case 5:if(Vt(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ai(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return ut(i),null}if(n=Ee.current,fl(i))dy(i);else{switch(f=Qu(Ae.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?f.createElement(a,{is:c.is}):f.createElement(a)}}n[kt]=i,n[St]=c;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(Wt(n,a,c),a){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ai(i)}}return ut(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&ai(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(n=Ae.current,fl(i)){if(n=i.stateNode,a=i.memoizedProps,c=null,f=mn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[kt]=i,n=!!(n.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||N_(n.nodeValue,a)),n||Ks(i)}else n=Qu(n).createTextNode(c),n[kt]=i,i.stateNode=n}return ut(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=fl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[kt]=i}else ml(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ut(i),f=!1}else f=my(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(ii(i),i):(ii(i),null)}if(ii(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=c!==null,n=n!==null&&n.memoizedState!==null,a){c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var p=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),Mu(i,i.updateQueue),ut(i),null;case 4:return me(),n===null&&fm(i.stateNode.containerInfo),ut(i),null;case 10:return ni(i.type),ut(i),null;case 19:if(fe(Mt),f=i.memoizedState,f===null)return ut(i),null;if(c=(i.flags&128)!==0,p=f.rendering,p===null)if(c)jl(f,!1);else{if(gt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=Iu(n),p!==null){for(i.flags|=128,jl(f,!1),n=p.updateQueue,i.updateQueue=n,Mu(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)uy(a,n),a=a.sibling;return ue(Mt,Mt.current&1|2),i.child}n=n.sibling}f.tail!==null&&Pn()>Vu&&(i.flags|=128,c=!0,jl(f,!1),i.lanes=4194304)}else{if(!c)if(n=Iu(p),n!==null){if(i.flags|=128,c=!0,n=n.updateQueue,i.updateQueue=n,Mu(i,n),jl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Ke)return ut(i),null}else 2*Pn()-f.renderingStartTime>Vu&&a!==536870912&&(i.flags|=128,c=!0,jl(f,!1),i.lanes=4194304);f.isBackwards?(p.sibling=i.child,i.child=p):(n=f.last,n!==null?n.sibling=p:i.child=p,f.last=p)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Pn(),i.sibling=null,n=Mt.current,ue(Mt,c?n&1|2:n&1),i):(ut(i),null);case 22:case 23:return ii(i),pf(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(a&536870912)!==0&&(i.flags&128)===0&&(ut(i),i.subtreeFlags&6&&(i.flags|=8192)):ut(i),a=i.updateQueue,a!==null&&Mu(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==a&&(i.flags|=2048),n!==null&&fe(Xs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ni(Pt),ut(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Xx(n,i){switch(ef(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ni(Pt),me(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Vt(i),null;case 13:if(ii(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ml()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return fe(Mt),null;case 4:return me(),null;case 10:return ni(i.type),null;case 22:case 23:return ii(i),pf(),n!==null&&fe(Xs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ni(Pt),null;case 25:return null;default:return null}}function Uv(n,i){switch(ef(i),i.tag){case 3:ni(Pt),me();break;case 26:case 27:case 5:Vt(i);break;case 4:me();break;case 13:ii(i);break;case 19:fe(Mt);break;case 10:ni(i.type);break;case 22:case 23:ii(i),pf(),n!==null&&fe(Xs);break;case 24:ni(Pt)}}function Il(n,i){try{var a=i.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&n)===n){c=void 0;var p=a.create,E=a.inst;c=p(),E.destroy=c}a=a.next}while(a!==f)}}catch(x){it(i,i.return,x)}}function Vi(n,i,a){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&n)===n){var E=c.inst,x=E.destroy;if(x!==void 0){E.destroy=void 0,f=i;var U=a,G=x;try{G()}catch(te){it(f,U,te)}}}c=c.next}while(c!==p)}}catch(te){it(i,i.return,te)}}function Lv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{Ay(i,a)}catch(c){it(n,n.return,c)}}}function Vv(n,i,a){a.props=Js(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(c){it(n,i,c)}}function kl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof a=="function"?n.refCleanup=a(c):a.current=c}}catch(f){it(n,i,f)}}function xr(n,i){var a=n.ref,c=n.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){it(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){it(n,i,f)}else a.current=null}function Bv(n){var i=n.type,a=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){it(n,n.return,f)}}function qf(n,i,a){try{var c=n.stateNode;v1(c,n.type,a,i),c[St]=i}catch(f){it(n,n.return,f)}}function zv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Yi(n.type)||n.tag===4}function Hf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||zv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Yi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $f(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ku));else if(c!==4&&(c===27&&Yi(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for($f(n,i,a),n=n.sibling;n!==null;)$f(n,i,a),n=n.sibling}function Uu(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(c===27&&Yi(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Uu(n,i,a),n=n.sibling;n!==null;)Uu(n,i,a),n=n.sibling}function Fv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Wt(i,c,a),i[kt]=n,i[St]=a}catch(p){it(n,n.return,p)}}var oi=!1,bt=!1,Gf=!1,qv=typeof WeakSet=="function"?WeakSet:Set,qt=null;function Zx(n,i){if(n=n.containerInfo,gm=th,n=ey(n),qd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var E=0,x=-1,U=-1,G=0,te=0,se=n,K=null;t:for(;;){for(var W;se!==a||f!==0&&se.nodeType!==3||(x=E+f),se!==p||c!==0&&se.nodeType!==3||(U=E+c),se.nodeType===3&&(E+=se.nodeValue.length),(W=se.firstChild)!==null;)K=se,se=W;for(;;){if(se===n)break t;if(K===a&&++G===f&&(x=E),K===p&&++te===c&&(U=E),(W=se.nextSibling)!==null)break;se=K,K=se.parentNode}se=W}a=x===-1||U===-1?null:{start:x,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(ym={focusedElem:n,selectionRange:a},th=!1,qt=i;qt!==null;)if(i=qt,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,qt=n;else for(;qt!==null;){switch(i=qt,p=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,a=i,f=p.memoizedProps,p=p.memoizedState,c=a.stateNode;try{var Re=Js(a.type,f,a.elementType===a.type);n=c.getSnapshotBeforeUpdate(Re,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(be){it(a,a.return,be)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)wm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":wm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,qt=n;break}qt=i.return}}function Hv(n,i,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Bi(n,a),c&4&&Il(5,a);break;case 1:if(Bi(n,a),c&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(E){it(a,a.return,E)}else{var f=Js(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(E){it(a,a.return,E)}}c&64&&Lv(a),c&512&&kl(a,a.return);break;case 3:if(Bi(n,a),c&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Ay(n,i)}catch(E){it(a,a.return,E)}}break;case 27:i===null&&c&4&&Fv(a);case 26:case 5:Bi(n,a),i===null&&c&4&&Bv(a),c&512&&kl(a,a.return);break;case 12:Bi(n,a);break;case 13:Bi(n,a),c&4&&Yv(n,a),c&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=o1.bind(null,a),A1(n,a))));break;case 22:if(c=a.memoizedState!==null||oi,!c){i=i!==null&&i.memoizedState!==null||bt,f=oi;var p=bt;oi=c,(bt=i)&&!p?zi(n,a,(a.subtreeFlags&8772)!==0):Bi(n,a),oi=f,bt=p}break;case 30:break;default:Bi(n,a)}}function $v(n){var i=n.alternate;i!==null&&(n.alternate=null,$v(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ri(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var lt=null,_n=!1;function li(n,i,a){for(a=a.child;a!==null;)Gv(n,i,a),a=a.sibling}function Gv(n,i,a){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(mt,a)}catch{}switch(a.tag){case 26:bt||xr(a,i),li(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:bt||xr(a,i);var c=lt,f=_n;Yi(a.type)&&(lt=a.stateNode,_n=!1),li(n,i,a),zl(a.stateNode),lt=c,_n=f;break;case 5:bt||xr(a,i);case 6:if(c=lt,f=_n,lt=null,li(n,i,a),lt=c,_n=f,lt!==null)if(_n)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(p){it(a,i,p)}else try{lt.removeChild(a.stateNode)}catch(p){it(a,i,p)}break;case 18:lt!==null&&(_n?(n=lt,O_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Ql(n)):O_(lt,a.stateNode));break;case 4:c=lt,f=_n,lt=a.stateNode.containerInfo,_n=!0,li(n,i,a),lt=c,_n=f;break;case 0:case 11:case 14:case 15:bt||Vi(2,a,i),bt||Vi(4,a,i),li(n,i,a);break;case 1:bt||(xr(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Vv(a,i,c)),li(n,i,a);break;case 21:li(n,i,a);break;case 22:bt=(c=bt)||a.memoizedState!==null,li(n,i,a),bt=c;break;default:li(n,i,a)}}function Yv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ql(n)}catch(a){it(i,i.return,a)}}function Jx(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new qv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new qv),i;default:throw Error(s(435,n.tag))}}function Yf(n,i){var a=Jx(n);i.forEach(function(c){var f=l1.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}function Rn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],p=n,E=i,x=E;e:for(;x!==null;){switch(x.tag){case 27:if(Yi(x.type)){lt=x.stateNode,_n=!1;break e}break;case 5:lt=x.stateNode,_n=!1;break e;case 3:case 4:lt=x.stateNode.containerInfo,_n=!0;break e}x=x.return}if(lt===null)throw Error(s(160));Gv(p,E,f),lt=null,_n=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Kv(i,n),i=i.sibling}var tr=null;function Kv(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Rn(i,n),Nn(n),c&4&&(Vi(3,n,n.return),Il(3,n),Vi(5,n,n.return));break;case 1:Rn(i,n),Nn(n),c&512&&(bt||a===null||xr(a,a.return)),c&64&&oi&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=tr;if(Rn(i,n),Nn(n),c&512&&(bt||a===null||xr(a,a.return)),c&4){var p=a!==null?a.memoizedState:null;if(c=n.memoizedState,a===null)if(c===null)if(n.stateNode===null){e:{c=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Rs]||p[kt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),Wt(p,c,a),p[kt]=n,Et(p),c=p;break e;case"link":var E=F_("link","href",f).get(c+(a.href||""));if(E){for(var x=0;x<E.length;x++)if(p=E[x],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(x,1);break t}}p=f.createElement(c),Wt(p,c,a),f.head.appendChild(p);break;case"meta":if(E=F_("meta","content",f).get(c+(a.content||""))){for(x=0;x<E.length;x++)if(p=E[x],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(x,1);break t}}p=f.createElement(c),Wt(p,c,a),f.head.appendChild(p);break;default:throw Error(s(468,c))}p[kt]=n,Et(p),c=p}n.stateNode=c}else q_(f,n.type,n.stateNode);else n.stateNode=z_(f,c,n.memoizedProps);else p!==c?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,c===null?q_(f,n.type,n.stateNode):z_(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&qf(n,n.memoizedProps,a.memoizedProps)}break;case 27:Rn(i,n),Nn(n),c&512&&(bt||a===null||xr(a,a.return)),a!==null&&c&4&&qf(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Rn(i,n),Nn(n),c&512&&(bt||a===null||xr(a,a.return)),n.flags&32){f=n.stateNode;try{Un(f,"")}catch(W){it(n,n.return,W)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,qf(n,f,a!==null?a.memoizedProps:f)),c&1024&&(Gf=!0);break;case 6:if(Rn(i,n),Nn(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,a=n.stateNode;try{a.nodeValue=c}catch(W){it(n,n.return,W)}}break;case 3:if(Zu=null,f=tr,tr=Wu(i.containerInfo),Rn(i,n),tr=f,Nn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Ql(i.containerInfo)}catch(W){it(n,n.return,W)}Gf&&(Gf=!1,Qv(n));break;case 4:c=tr,tr=Wu(n.stateNode.containerInfo),Rn(i,n),Nn(n),tr=c;break;case 12:Rn(i,n),Nn(n);break;case 13:Rn(i,n),Nn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Jf=Pn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Yf(n,c)));break;case 22:f=n.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,G=oi,te=bt;if(oi=G||f,bt=te||U,Rn(i,n),bt=te,oi=G,Nn(n),c&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||U||oi||bt||ea(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){U=a=i;try{if(p=U.stateNode,f)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{x=U.stateNode;var se=U.memoizedProps.style,K=se!=null&&se.hasOwnProperty("display")?se.display:null;x.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(W){it(U,U.return,W)}}}else if(i.tag===6){if(a===null){U=i;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(W){it(U,U.return,W)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Yf(n,a))));break;case 19:Rn(i,n),Nn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Yf(n,c)));break;case 30:break;case 21:break;default:Rn(i,n),Nn(n)}}function Nn(n){var i=n.flags;if(i&2){try{for(var a,c=n.return;c!==null;){if(zv(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,p=Hf(n);Uu(n,p,f);break;case 5:var E=a.stateNode;a.flags&32&&(Un(E,""),a.flags&=-33);var x=Hf(n);Uu(n,x,E);break;case 3:case 4:var U=a.stateNode.containerInfo,G=Hf(n);$f(n,G,U);break;default:throw Error(s(161))}}catch(te){it(n,n.return,te)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Qv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Qv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Bi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Hv(n,i.alternate,i),i=i.sibling}function ea(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Vi(4,i,i.return),ea(i);break;case 1:xr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Vv(i,i.return,a),ea(i);break;case 27:zl(i.stateNode);case 26:case 5:xr(i,i.return),ea(i);break;case 22:i.memoizedState===null&&ea(i);break;case 30:ea(i);break;default:ea(i)}n=n.sibling}}function zi(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,p=i,E=p.flags;switch(p.tag){case 0:case 11:case 15:zi(f,p,a),Il(4,p);break;case 1:if(zi(f,p,a),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){it(c,c.return,G)}if(c=p,f=c.updateQueue,f!==null){var x=c.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)xy(U[f],x)}catch(G){it(c,c.return,G)}}a&&E&64&&Lv(p),kl(p,p.return);break;case 27:Fv(p);case 26:case 5:zi(f,p,a),a&&c===null&&E&4&&Bv(p),kl(p,p.return);break;case 12:zi(f,p,a);break;case 13:zi(f,p,a),a&&E&4&&Yv(f,p);break;case 22:p.memoizedState===null&&zi(f,p,a),kl(p,p.return);break;case 30:break;default:zi(f,p,a)}i=i.sibling}}function Kf(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&yl(a))}function Qf(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&yl(n))}function Ar(n,i,a,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Wv(n,i,a,c),i=i.sibling}function Wv(n,i,a,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ar(n,i,a,c),f&2048&&Il(9,i);break;case 1:Ar(n,i,a,c);break;case 3:Ar(n,i,a,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&yl(n)));break;case 12:if(f&2048){Ar(n,i,a,c),n=i.stateNode;try{var p=i.memoizedProps,E=p.id,x=p.onPostCommit;typeof x=="function"&&x(E,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(U){it(i,i.return,U)}}else Ar(n,i,a,c);break;case 13:Ar(n,i,a,c);break;case 23:break;case 22:p=i.stateNode,E=i.alternate,i.memoizedState!==null?p._visibility&2?Ar(n,i,a,c):Dl(n,i):p._visibility&2?Ar(n,i,a,c):(p._visibility|=2,Ja(n,i,a,c,(i.subtreeFlags&10256)!==0)),f&2048&&Kf(E,i);break;case 24:Ar(n,i,a,c),f&2048&&Qf(i.alternate,i);break;default:Ar(n,i,a,c)}}function Ja(n,i,a,c,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var p=n,E=i,x=a,U=c,G=E.flags;switch(E.tag){case 0:case 11:case 15:Ja(p,E,x,U,f),Il(8,E);break;case 23:break;case 22:var te=E.stateNode;E.memoizedState!==null?te._visibility&2?Ja(p,E,x,U,f):Dl(p,E):(te._visibility|=2,Ja(p,E,x,U,f)),f&&G&2048&&Kf(E.alternate,E);break;case 24:Ja(p,E,x,U,f),f&&G&2048&&Qf(E.alternate,E);break;default:Ja(p,E,x,U,f)}i=i.sibling}}function Dl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,c=i,f=c.flags;switch(c.tag){case 22:Dl(a,c),f&2048&&Kf(c.alternate,c);break;case 24:Dl(a,c),f&2048&&Qf(c.alternate,c);break;default:Dl(a,c)}i=i.sibling}}var Ol=8192;function eo(n){if(n.subtreeFlags&Ol)for(n=n.child;n!==null;)Xv(n),n=n.sibling}function Xv(n){switch(n.tag){case 26:eo(n),n.flags&Ol&&n.memoizedState!==null&&L1(tr,n.memoizedState,n.memoizedProps);break;case 5:eo(n);break;case 3:case 4:var i=tr;tr=Wu(n.stateNode.containerInfo),eo(n),tr=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Ol,Ol=16777216,eo(n),Ol=i):eo(n));break;default:eo(n)}}function Zv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Pl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];qt=c,e_(c,n)}Zv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Jv(n),n=n.sibling}function Jv(n){switch(n.tag){case 0:case 11:case 15:Pl(n),n.flags&2048&&Vi(9,n,n.return);break;case 3:Pl(n);break;case 12:Pl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Lu(n)):Pl(n);break;default:Pl(n)}}function Lu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];qt=c,e_(c,n)}Zv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Vi(8,i,i.return),Lu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Lu(i));break;default:Lu(i)}n=n.sibling}}function e_(n,i){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:Vi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:yl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,qt=c;else e:for(a=n;qt!==null;){c=qt;var f=c.sibling,p=c.return;if($v(c),c===a){qt=null;break e}if(f!==null){f.return=p,qt=f;break e}qt=p}}}var e1={getCacheForType:function(n){var i=nn(Pt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},t1=typeof WeakMap=="function"?WeakMap:Map,Ze=0,st=null,Ue=null,He=0,Je=0,jn=null,Fi=!1,to=!1,Wf=!1,ci=0,gt=0,qi=0,ta=0,Xf=0,Gn=0,no=0,Ml=null,wn=null,Zf=!1,Jf=0,Vu=1/0,Bu=null,Hi=null,Qt=0,$i=null,ro=null,io=0,em=0,tm=null,t_=null,Ul=0,nm=null;function In(){if((Ze&2)!==0&&He!==0)return He&-He;if(Y.T!==null){var n=$a;return n!==0?n:cm()}return Si()}function n_(){Gn===0&&(Gn=(He&536870912)===0||Ke?Go():536870912);var n=$n.current;return n!==null&&(n.flags|=32),Gn}function kn(n,i,a){(n===st&&(Je===2||Je===9)||n.cancelPendingCommit!==null)&&(so(n,0),Gi(n,He,Gn,!1)),zr(n,a),((Ze&2)===0||n!==st)&&(n===st&&((Ze&2)===0&&(ta|=a),gt===4&&Gi(n,He,Gn,!1)),Sr(n))}function r_(n,i,a){if((Ze&6)!==0)throw Error(s(327));var c=!a&&(i&124)===0&&(i&n.expiredLanes)===0||Cs(n,i),f=c?i1(n,i):sm(n,i,!0),p=c;do{if(f===0){to&&!c&&Gi(n,i,0,!1);break}else{if(a=n.current.alternate,p&&!n1(a)){f=sm(n,i,!1),p=!1;continue}if(f===2){if(p=i,n.errorRecoveryDisabledLanes&p)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var x=n;f=Ml;var U=x.current.memoizedState.isDehydrated;if(U&&(so(x,E).flags|=256),E=sm(x,E,!1),E!==2){if(Wf&&!U){x.errorRecoveryDisabledLanes|=p,ta|=p,f=4;break e}p=wn,wn=f,p!==null&&(wn===null?wn=p:wn.push.apply(wn,p))}f=E}if(p=!1,f!==2)continue}}if(f===1){so(n,0),Gi(n,i,0,!0);break}e:{switch(c=n,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Gi(c,i,Gn,!Fi);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Jf+300-Pn(),10<f)){if(Gi(c,i,Gn,!Fi),Ta(c,0,!0)!==0)break e;c.timeoutHandle=k_(i_.bind(null,c,a,wn,Bu,Zf,i,Gn,ta,no,Fi,p,2,-0,0),f);break e}i_(c,a,wn,Bu,Zf,i,Gn,ta,no,Fi,p,0,-0,0)}}break}while(!0);Sr(n)}function i_(n,i,a,c,f,p,E,x,U,G,te,se,K,W){if(n.timeoutHandle=-1,se=i.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(Hl={stylesheets:null,count:0,unsuspend:U1},Xv(i),se=V1(),se!==null)){n.cancelPendingCommit=se(h_.bind(null,n,i,p,a,c,f,E,x,U,te,1,K,W)),Gi(n,p,E,!G);return}h_(n,i,p,a,c,f,E,x,U)}function n1(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],p=f.getSnapshot;f=f.value;try{if(!Sn(p(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gi(n,i,a,c){i&=~Xf,i&=~ta,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var p=31-tn(f),E=1<<p;c[p]=-1,f&=~E}a!==0&&hr(n,a,i)}function zu(){return(Ze&6)===0?(Ll(0),!1):!0}function rm(){if(Ue!==null){if(Je===0)var n=Ue.return;else n=Ue,ti=Qs=null,wf(n),Xa=null,Rl=0,n=Ue;for(;n!==null;)Uv(n.alternate,n),n=n.return;Ue=null}}function so(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,w1(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),rm(),st=n,Ue=a=Zr(n.current,null),He=i,Je=0,jn=null,Fi=!1,to=Cs(n,i),Wf=!1,no=Gn=Xf=ta=qi=gt=0,wn=Ml=null,Zf=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-tn(c),p=1<<f;i|=n[f],c&=~p}return ci=i,cu(),a}function s_(n,i){Oe=null,Y.H=Ru,i===_l||i===vu?(i=Ty(),Je=3):i===_y?(i=Ty(),Je=4):Je=i===bv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,jn=i,Ue===null&&(gt=1,Du(n,zn(i,n.current)))}function a_(){var n=Y.H;return Y.H=Ru,n===null?Ru:n}function o_(){var n=Y.A;return Y.A=e1,n}function im(){gt=4,Fi||(He&4194048)!==He&&$n.current!==null||(to=!0),(qi&134217727)===0&&(ta&134217727)===0||st===null||Gi(st,He,Gn,!1)}function sm(n,i,a){var c=Ze;Ze|=2;var f=a_(),p=o_();(st!==n||He!==i)&&(Bu=null,so(n,i)),i=!1;var E=gt;e:do try{if(Je!==0&&Ue!==null){var x=Ue,U=jn;switch(Je){case 8:rm(),E=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(i=!0);var G=Je;if(Je=0,jn=null,ao(n,x,U,G),a&&to){E=0;break e}break;default:G=Je,Je=0,jn=null,ao(n,x,U,G)}}r1(),E=gt;break}catch(te){s_(n,te)}while(!0);return i&&n.shellSuspendCounter++,ti=Qs=null,Ze=c,Y.H=f,Y.A=p,Ue===null&&(st=null,He=0,cu()),E}function r1(){for(;Ue!==null;)l_(Ue)}function i1(n,i){var a=Ze;Ze|=2;var c=a_(),f=o_();st!==n||He!==i?(Bu=null,Vu=Pn()+500,so(n,i)):to=Cs(n,i);e:do try{if(Je!==0&&Ue!==null){i=Ue;var p=jn;t:switch(Je){case 1:Je=0,jn=null,ao(n,i,p,1);break;case 2:case 9:if(wy(p)){Je=0,jn=null,c_(i);break}i=function(){Je!==2&&Je!==9||st!==n||(Je=7),Sr(n)},p.then(i,i);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:wy(p)?(Je=0,jn=null,c_(i)):(Je=0,jn=null,ao(n,i,p,7));break;case 5:var E=null;switch(Ue.tag){case 26:E=Ue.memoizedState;case 5:case 27:var x=Ue;if(!E||H_(E)){Je=0,jn=null;var U=x.sibling;if(U!==null)Ue=U;else{var G=x.return;G!==null?(Ue=G,Fu(G)):Ue=null}break t}}Je=0,jn=null,ao(n,i,p,5);break;case 6:Je=0,jn=null,ao(n,i,p,6);break;case 8:rm(),gt=6;break e;default:throw Error(s(462))}}s1();break}catch(te){s_(n,te)}while(!0);return ti=Qs=null,Y.H=c,Y.A=f,Ze=a,Ue!==null?0:(st=null,He=0,cu(),gt)}function s1(){for(;Ue!==null&&!Fo();)l_(Ue)}function l_(n){var i=Pv(n.alternate,n,ci);n.memoizedProps=n.pendingProps,i===null?Fu(n):Ue=i}function c_(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=Nv(a,i,i.pendingProps,i.type,void 0,He);break;case 11:i=Nv(a,i,i.pendingProps,i.type.render,i.ref,He);break;case 5:wf(i);default:Uv(a,i),i=Ue=uy(i,ci),i=Pv(a,i,ci)}n.memoizedProps=n.pendingProps,i===null?Fu(n):Ue=i}function ao(n,i,a,c){ti=Qs=null,wf(i),Xa=null,Rl=0;var f=i.return;try{if(Kx(n,f,i,a,He)){gt=1,Du(n,zn(a,n.current)),Ue=null;return}}catch(p){if(f!==null)throw Ue=f,p;gt=1,Du(n,zn(a,n.current)),Ue=null;return}i.flags&32768?(Ke||c===1?n=!0:to||(He&536870912)!==0?n=!1:(Fi=n=!0,(c===2||c===9||c===3||c===6)&&(c=$n.current,c!==null&&c.tag===13&&(c.flags|=16384))),u_(i,n)):Fu(i)}function Fu(n){var i=n;do{if((i.flags&32768)!==0){u_(i,Fi);return}n=i.return;var a=Wx(i.alternate,i,ci);if(a!==null){Ue=a;return}if(i=i.sibling,i!==null){Ue=i;return}Ue=i=n}while(i!==null);gt===0&&(gt=5)}function u_(n,i){do{var a=Xx(n.alternate,n);if(a!==null){a.flags&=32767,Ue=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Ue=n;return}Ue=n=a}while(n!==null);gt=6,Ue=null}function h_(n,i,a,c,f,p,E,x,U){n.cancelPendingCommit=null;do qu();while(Qt!==0);if((Ze&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(p=i.lanes|i.childLanes,p|=Kd,Ko(n,a,p,E,x,U),n===st&&(Ue=st=null,He=0),ro=i,$i=n,io=a,em=p,tm=f,t_=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,c1(bs,function(){return g_(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,f=le.p,le.p=2,E=Ze,Ze|=4;try{Zx(n,i,a)}finally{Ze=E,le.p=f,Y.T=c}}Qt=1,d_(),f_(),m_()}}function d_(){if(Qt===1){Qt=0;var n=$i,i=ro,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var c=le.p;le.p=2;var f=Ze;Ze|=4;try{Kv(i,n);var p=ym,E=ey(n.containerInfo),x=p.focusedElem,U=p.selectionRange;if(E!==x&&x&&x.ownerDocument&&Jg(x.ownerDocument.documentElement,x)){if(U!==null&&qd(x)){var G=U.start,te=U.end;if(te===void 0&&(te=G),"selectionStart"in x)x.selectionStart=G,x.selectionEnd=Math.min(te,x.value.length);else{var se=x.ownerDocument||document,K=se&&se.defaultView||window;if(K.getSelection){var W=K.getSelection(),Re=x.textContent.length,be=Math.min(U.start,Re),rt=U.end===void 0?be:Math.min(U.end,Re);!W.extend&&be>rt&&(E=rt,rt=be,be=E);var F=Zg(x,be),V=Zg(x,rt);if(F&&V&&(W.rangeCount!==1||W.anchorNode!==F.node||W.anchorOffset!==F.offset||W.focusNode!==V.node||W.focusOffset!==V.offset)){var $=se.createRange();$.setStart(F.node,F.offset),W.removeAllRanges(),be>rt?(W.addRange($),W.extend(V.node,V.offset)):($.setEnd(V.node,V.offset),W.addRange($))}}}}for(se=[],W=x;W=W.parentNode;)W.nodeType===1&&se.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<se.length;x++){var ne=se[x];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}th=!!gm,ym=gm=null}finally{Ze=f,le.p=c,Y.T=a}}n.current=i,Qt=2}}function f_(){if(Qt===2){Qt=0;var n=$i,i=ro,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var c=le.p;le.p=2;var f=Ze;Ze|=4;try{Hv(n,i.alternate,i)}finally{Ze=f,le.p=c,Y.T=a}}Qt=3}}function m_(){if(Qt===4||Qt===3){Qt=0,Lc();var n=$i,i=ro,a=io,c=t_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Qt=5:(Qt=0,ro=$i=null,p_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Hi=null),ba(a),i=i.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(mt,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=Y.T,f=le.p,le.p=2,Y.T=null;try{for(var p=n.onRecoverableError,E=0;E<c.length;E++){var x=c[E];p(x.value,{componentStack:x.stack})}}finally{Y.T=i,le.p=f}}(io&3)!==0&&qu(),Sr(n),f=n.pendingLanes,(a&4194090)!==0&&(f&42)!==0?n===nm?Ul++:(Ul=0,nm=n):Ul=0,Ll(0)}}function p_(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,yl(i)))}function qu(n){return d_(),f_(),m_(),g_()}function g_(){if(Qt!==5)return!1;var n=$i,i=em;em=0;var a=ba(io),c=Y.T,f=le.p;try{le.p=32>a?32:a,Y.T=null,a=tm,tm=null;var p=$i,E=io;if(Qt=0,ro=$i=null,io=0,(Ze&6)!==0)throw Error(s(331));var x=Ze;if(Ze|=4,Jv(p.current),Wv(p,p.current,E,a),Ze=x,Ll(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(mt,p)}catch{}return!0}finally{le.p=f,Y.T=c,p_(n,i)}}function y_(n,i,a){i=zn(a,i),i=Of(n.stateNode,i,2),n=Pi(n,i,2),n!==null&&(zr(n,2),Sr(n))}function it(n,i,a){if(n.tag===3)y_(n,n,a);else for(;i!==null;){if(i.tag===3){y_(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Hi===null||!Hi.has(c))){n=zn(a,n),a=Ev(2),c=Pi(i,a,2),c!==null&&(Tv(a,c,i,n),zr(c,2),Sr(c));break}}i=i.return}}function am(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new t1;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(a)||(Wf=!0,f.add(a),n=a1.bind(null,n,i,a),i.then(n,n))}function a1(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,st===n&&(He&a)===a&&(gt===4||gt===3&&(He&62914560)===He&&300>Pn()-Jf?(Ze&2)===0&&so(n,0):Xf|=a,no===He&&(no=0)),Sr(n)}function v_(n,i){i===0&&(i=Yo()),n=za(n,i),n!==null&&(zr(n,i),Sr(n))}function o1(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),v_(n,a)}function l1(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),v_(n,a)}function c1(n,i){return en(n,i)}var Hu=null,oo=null,om=!1,$u=!1,lm=!1,na=0;function Sr(n){n!==oo&&n.next===null&&(oo===null?Hu=oo=n:oo=oo.next=n),$u=!0,om||(om=!0,h1())}function Ll(n,i){if(!lm&&$u){lm=!0;do for(var a=!1,c=Hu;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var E=c.suspendedLanes,x=c.pingedLanes;p=(1<<31-tn(42|n)+1)-1,p&=f&~(E&~x),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,T_(c,p))}else p=He,p=Ta(c,c===st?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||Cs(c,p)||(a=!0,T_(c,p));c=c.next}while(a);lm=!1}}function u1(){__()}function __(){$u=om=!1;var n=0;na!==0&&(_1()&&(n=na),na=0);for(var i=Pn(),a=null,c=Hu;c!==null;){var f=c.next,p=w_(c,i);p===0?(c.next=null,a===null?Hu=f:a.next=f,f===null&&(oo=a)):(a=c,(n!==0||(p&3)!==0)&&($u=!0)),c=f}Ll(n)}function w_(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var E=31-tn(p),x=1<<E,U=f[E];U===-1?((x&a)===0||(x&c)!==0)&&(f[E]=$o(x,i)):U<=i&&(n.expiredLanes|=x),p&=~x}if(i=st,a=He,a=Ta(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,a===0||n===i&&(Je===2||Je===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ts(c),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Cs(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(c!==null&&Ts(c),ba(a)){case 2:case 8:a=wa;break;case 32:a=bs;break;case 268435456:a=Ea;break;default:a=bs}return c=E_.bind(null,n),a=en(a,c),n.callbackPriority=i,n.callbackNode=a,i}return c!==null&&c!==null&&Ts(c),n.callbackPriority=2,n.callbackNode=null,2}function E_(n,i){if(Qt!==0&&Qt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(qu()&&n.callbackNode!==a)return null;var c=He;return c=Ta(n,n===st?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(r_(n,c,i),w_(n,Pn()),n.callbackNode!=null&&n.callbackNode===a?E_.bind(null,n):null)}function T_(n,i){if(qu())return null;r_(n,i,!0)}function h1(){E1(function(){(Ze&6)!==0?en(qo,u1):__()})}function cm(){return na===0&&(na=Go()),na}function b_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Na(""+n)}function x_(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function d1(n,i,a,c,f){if(i==="submit"&&a&&a.stateNode===f){var p=b_((f[St]||null).action),E=c.submitter;E&&(i=(i=E[St]||null)?b_(i.formAction):E.getAttribute("formAction"),i!==null&&(p=i,E=null));var x=new ja("action","action",null,c,f);n.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(na!==0){var U=E?x_(f,E):new FormData(f);Nf(a,{pending:!0,data:U,method:f.method,action:p},null,U)}}else typeof p=="function"&&(x.preventDefault(),U=E?x_(f,E):new FormData(f),Nf(a,{pending:!0,data:U,method:f.method,action:p},p,U))},currentTarget:f}]})}}for(var um=0;um<Yd.length;um++){var hm=Yd[um],f1=hm.toLowerCase(),m1=hm[0].toUpperCase()+hm.slice(1);er(f1,"on"+m1)}er(ry,"onAnimationEnd"),er(iy,"onAnimationIteration"),er(sy,"onAnimationStart"),er("dblclick","onDoubleClick"),er("focusin","onFocus"),er("focusout","onBlur"),er(Ix,"onTransitionRun"),er(kx,"onTransitionStart"),er(Dx,"onTransitionCancel"),er(ay,"onTransitionEnd"),qr("onMouseEnter",["mouseout","mouseover"]),qr("onMouseLeave",["mouseout","mouseover"]),qr("onPointerEnter",["pointerout","pointerover"]),qr("onPointerLeave",["pointerout","pointerover"]),Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function A_(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var E=c.length-1;0<=E;E--){var x=c[E],U=x.instance,G=x.currentTarget;if(x=x.listener,U!==p&&f.isPropagationStopped())break e;p=x,f.currentTarget=G;try{p(f)}catch(te){ku(te)}f.currentTarget=null,p=U}else for(E=0;E<c.length;E++){if(x=c[E],U=x.instance,G=x.currentTarget,x=x.listener,U!==p&&f.isPropagationStopped())break e;p=x,f.currentTarget=G;try{p(f)}catch(te){ku(te)}f.currentTarget=null,p=U}}}}function Le(n,i){var a=i[Wo];a===void 0&&(a=i[Wo]=new Set);var c=n+"__bubble";a.has(c)||(S_(i,n,2,!1),a.add(c))}function dm(n,i,a){var c=0;i&&(c|=4),S_(a,n,c,i)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function fm(n){if(!n[Gu]){n[Gu]=!0,Xo.forEach(function(a){a!=="selectionchange"&&(p1.has(a)||dm(a,!1,n),dm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Gu]||(i[Gu]=!0,dm("selectionchange",!1,i))}}function S_(n,i,a,c){switch(W_(i)){case 2:var f=F1;break;case 8:f=q1;break;default:f=Cm}a=f.bind(null,i,a,n),f=void 0,!Vn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function mm(n,i,a,c,f){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var x=c.stateNode.containerInfo;if(x===f)break;if(E===4)for(E=c.return;E!==null;){var U=E.tag;if((U===3||U===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;x!==null;){if(E=Fr(x),E===null)return;if(U=E.tag,U===5||U===6||U===26||U===27){c=p=E;continue e}x=x.parentNode}}c=c.return}Kc(function(){var G=p,te=Ln(a),se=[];e:{var K=oy.get(n);if(K!==void 0){var W=ja,Re=n;switch(n){case"keypress":if(yr(a)===0)break e;case"keydown":case"keyup":W=Ma;break;case"focusin":Re="focus",W=Da;break;case"focusout":Re="blur",W=Da;break;case"beforeblur":case"afterblur":W=Da;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=nu;break;case ry:case iy:case sy:W=Oa;break;case ay:W=iu;break;case"scroll":case"scrollend":W=Qc;break;case"wheel":W=Ua;break;case"copy":case"cut":case"paste":W=Pa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=cl;break;case"toggle":case"beforetoggle":W=au}var be=(i&4)!==0,rt=!be&&(n==="scroll"||n==="scrollend"),F=be?K!==null?K+"Capture":null:K;be=[];for(var V=G,$;V!==null;){var ne=V;if($=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||$===null||F===null||(ne=Ps(V,F),ne!=null&&be.push(Bl(V,ne,$))),rt)break;V=V.return}0<be.length&&(K=new W(K,Re,null,a,te),se.push({event:K,listeners:be}))}}if((i&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",W=n==="mouseout"||n==="pointerout",K&&a!==Gr&&(Re=a.relatedTarget||a.fromElement)&&(Fr(Re)||Re[Mn]))break e;if((W||K)&&(K=te.window===te?te:(K=te.ownerDocument)?K.defaultView||K.parentWindow:window,W?(Re=a.relatedTarget||a.toElement,W=G,Re=Re?Fr(Re):null,Re!==null&&(rt=u(Re),be=Re.tag,Re!==rt||be!==5&&be!==27&&be!==6)&&(Re=null)):(W=null,Re=G),W!==Re)){if(be=Bn,ne="onMouseLeave",F="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(be=cl,ne="onPointerLeave",F="onPointerEnter",V="pointer"),rt=W==null?K:fr(W),$=Re==null?K:fr(Re),K=new be(ne,V+"leave",W,a,te),K.target=rt,K.relatedTarget=$,ne=null,Fr(te)===G&&(be=new be(F,V+"enter",Re,a,te),be.target=$,be.relatedTarget=rt,ne=be),rt=ne,W&&Re)t:{for(be=W,F=Re,V=0,$=be;$;$=lo($))V++;for($=0,ne=F;ne;ne=lo(ne))$++;for(;0<V-$;)be=lo(be),V--;for(;0<$-V;)F=lo(F),$--;for(;V--;){if(be===F||F!==null&&be===F.alternate)break t;be=lo(be),F=lo(F)}be=null}else be=null;W!==null&&C_(se,K,W,be,!1),Re!==null&&rt!==null&&C_(se,rt,Re,be,!0)}}e:{if(K=G?fr(G):window,W=K.nodeName&&K.nodeName.toLowerCase(),W==="select"||W==="input"&&K.type==="file")var _e=Gg;else if(Ot(K))if(Yg)_e=Rx;else{_e=Sx;var Me=Ax}else W=K.nodeName,!W||W.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&nl(G.elementType)&&(_e=Gg):_e=Cx;if(_e&&(_e=_e(n,G))){Xr(se,_e,a,te);break e}Me&&Me(n,K,G),n==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&ji(K,"number",K.value)}switch(Me=G?fr(G):window,n){case"focusin":(Ot(Me)||Me.contentEditable==="true")&&(La=Me,Hd=G,dl=null);break;case"focusout":dl=Hd=La=null;break;case"mousedown":$d=!0;break;case"contextmenu":case"mouseup":case"dragend":$d=!1,ty(se,a,te);break;case"selectionchange":if(jx)break;case"keydown":case"keyup":ty(se,a,te)}var we;if(wr)e:{switch(n){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Fe?Z(n,a)&&(xe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(xe="onCompositionStart");xe&&(w&&a.locale!=="ko"&&(Fe||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Fe&&(we=il()):(gr=te,Ii="value"in gr?gr.value:gr.textContent,Fe=!0)),Me=Yu(G,xe),0<Me.length&&(xe=new ol(xe,n,null,a,te),se.push({event:xe,listeners:Me}),we?xe.data=we:(we=he(a),we!==null&&(xe.data=we)))),(we=v?Dt(n,a):qe(n,a))&&(xe=Yu(G,"onBeforeInput"),0<xe.length&&(Me=new ol("onBeforeInput","beforeinput",null,a,te),se.push({event:Me,listeners:xe}),Me.data=we)),d1(se,n,G,a,te)}A_(se,i)})}function Bl(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Yu(n,i){for(var a=i+"Capture",c=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Ps(n,a),f!=null&&c.unshift(Bl(n,f,p)),f=Ps(n,i),f!=null&&c.push(Bl(n,f,p))),n.tag===3)return c;n=n.return}return[]}function lo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function C_(n,i,a,c,f){for(var p=i._reactName,E=[];a!==null&&a!==c;){var x=a,U=x.alternate,G=x.stateNode;if(x=x.tag,U!==null&&U===c)break;x!==5&&x!==26&&x!==27||G===null||(U=G,f?(G=Ps(a,p),G!=null&&E.unshift(Bl(a,G,U))):f||(G=Ps(a,p),G!=null&&E.push(Bl(a,G,U)))),a=a.return}E.length!==0&&n.push({event:i,listeners:E})}var g1=/\r\n?/g,y1=/\u0000|\uFFFD/g;function R_(n){return(typeof n=="string"?n:""+n).replace(g1,`
`).replace(y1,"")}function N_(n,i){return i=R_(i),R_(n)===i}function Ku(){}function nt(n,i,a,c,f,p){switch(a){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Un(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Un(n,""+c);break;case"className":mr(n,"class",c);break;case"tabIndex":mr(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":mr(n,a,c);break;case"style":tl(n,c,p);break;case"data":if(i!=="object"){mr(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=Na(""+c),n.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(i!=="input"&&nt(n,i,"name",f.name,f,null),nt(n,i,"formEncType",f.formEncType,f,null),nt(n,i,"formMethod",f.formMethod,f,null),nt(n,i,"formTarget",f.formTarget,f,null)):(nt(n,i,"encType",f.encType,f,null),nt(n,i,"method",f.method,f,null),nt(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=Na(""+c),n.setAttribute(a,c);break;case"onClick":c!=null&&(n.onclick=Ku);break;case"onScroll":c!=null&&Le("scroll",n);break;case"onScrollEnd":c!=null&&Le("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}a=Na(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""+c):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":c===!0?n.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,c):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(a,c):n.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(a):n.setAttribute(a,c);break;case"popover":Le("beforetoggle",n),Le("toggle",n),Ni(n,"popover",c);break;case"xlinkActuate":Gt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Gt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Gt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Gt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Gt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Gt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Gt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Gt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Gt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ni(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ud.get(a)||a,Ni(n,a,c))}}function pm(n,i,a,c,f,p){switch(a){case"style":tl(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof c=="string"?Un(n,c):(typeof c=="number"||typeof c=="bigint")&&Un(n,""+c);break;case"onScroll":c!=null&&Le("scroll",n);break;case"onScrollEnd":c!=null&&Le("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Ku);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),p=n[St]||null,p=p!=null?p[a]:null,typeof p=="function"&&n.removeEventListener(i,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,c,f);break e}a in n?n[a]=c:c===!0?n.setAttribute(a,""):Ni(n,a,c)}}}function Wt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",n),Le("load",n);var c=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var E=a[p];if(E!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(n,i,p,E,a,null)}}f&&nt(n,i,"srcSet",a.srcSet,a,null),c&&nt(n,i,"src",a.src,a,null);return;case"input":Le("invalid",n);var x=p=E=f=null,U=null,G=null;for(c in a)if(a.hasOwnProperty(c)){var te=a[c];if(te!=null)switch(c){case"name":f=te;break;case"type":E=te;break;case"checked":U=te;break;case"defaultChecked":G=te;break;case"value":p=te;break;case"defaultValue":x=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,i));break;default:nt(n,i,c,te,a,null)}}ks(n,p,x,U,G,E,f,!1),Ra(n);return;case"select":Le("invalid",n),c=E=p=null;for(f in a)if(a.hasOwnProperty(f)&&(x=a[f],x!=null))switch(f){case"value":p=x;break;case"defaultValue":E=x;break;case"multiple":c=x;default:nt(n,i,f,x,a,null)}i=p,a=E,n.multiple=!!c,i!=null?$r(n,!!c,i,!1):a!=null&&$r(n,!!c,a,!0);return;case"textarea":Le("invalid",n),p=f=c=null;for(E in a)if(a.hasOwnProperty(E)&&(x=a[E],x!=null))switch(E){case"value":c=x;break;case"defaultValue":f=x;break;case"children":p=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:nt(n,i,E,x,a,null)}Ds(n,c,f,p),Ra(n);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(c=a[U],c!=null))switch(U){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:nt(n,i,U,c,a,null)}return;case"dialog":Le("beforetoggle",n),Le("toggle",n),Le("cancel",n),Le("close",n);break;case"iframe":case"object":Le("load",n);break;case"video":case"audio":for(c=0;c<Vl.length;c++)Le(Vl[c],n);break;case"image":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"embed":case"source":case"link":Le("error",n),Le("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(c=a[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(n,i,G,c,a,null)}return;default:if(nl(i)){for(te in a)a.hasOwnProperty(te)&&(c=a[te],c!==void 0&&pm(n,i,te,c,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(c=a[x],c!=null&&nt(n,i,x,c,a,null))}function v1(n,i,a,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,E=null,x=null,U=null,G=null,te=null;for(W in a){var se=a[W];if(a.hasOwnProperty(W)&&se!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":U=se;default:c.hasOwnProperty(W)||nt(n,i,W,null,c,se)}}for(var K in c){var W=c[K];if(se=a[K],c.hasOwnProperty(K)&&(W!=null||se!=null))switch(K){case"type":p=W;break;case"name":f=W;break;case"checked":G=W;break;case"defaultChecked":te=W;break;case"value":E=W;break;case"defaultValue":x=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:W!==se&&nt(n,i,K,W,c,se)}}An(n,E,x,U,G,te,p,f);return;case"select":W=E=x=K=null;for(p in a)if(U=a[p],a.hasOwnProperty(p)&&U!=null)switch(p){case"value":break;case"multiple":W=U;default:c.hasOwnProperty(p)||nt(n,i,p,null,c,U)}for(f in c)if(p=c[f],U=a[f],c.hasOwnProperty(f)&&(p!=null||U!=null))switch(f){case"value":K=p;break;case"defaultValue":x=p;break;case"multiple":E=p;default:p!==U&&nt(n,i,f,p,c,U)}i=x,a=E,c=W,K!=null?$r(n,!!a,K,!1):!!c!=!!a&&(i!=null?$r(n,!!a,i,!0):$r(n,!!a,a?[]:"",!1));return;case"textarea":W=K=null;for(x in a)if(f=a[x],a.hasOwnProperty(x)&&f!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:nt(n,i,x,null,c,f)}for(E in c)if(f=c[E],p=a[E],c.hasOwnProperty(E)&&(f!=null||p!=null))switch(E){case"value":K=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&nt(n,i,E,f,c,p)}et(n,K,W);return;case"option":for(var Re in a)if(K=a[Re],a.hasOwnProperty(Re)&&K!=null&&!c.hasOwnProperty(Re))switch(Re){case"selected":n.selected=!1;break;default:nt(n,i,Re,null,c,K)}for(U in c)if(K=c[U],W=a[U],c.hasOwnProperty(U)&&K!==W&&(K!=null||W!=null))switch(U){case"selected":n.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:nt(n,i,U,K,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)K=a[be],a.hasOwnProperty(be)&&K!=null&&!c.hasOwnProperty(be)&&nt(n,i,be,null,c,K);for(G in c)if(K=c[G],W=a[G],c.hasOwnProperty(G)&&K!==W&&(K!=null||W!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:nt(n,i,G,K,c,W)}return;default:if(nl(i)){for(var rt in a)K=a[rt],a.hasOwnProperty(rt)&&K!==void 0&&!c.hasOwnProperty(rt)&&pm(n,i,rt,void 0,c,K);for(te in c)K=c[te],W=a[te],!c.hasOwnProperty(te)||K===W||K===void 0&&W===void 0||pm(n,i,te,K,c,W);return}}for(var F in a)K=a[F],a.hasOwnProperty(F)&&K!=null&&!c.hasOwnProperty(F)&&nt(n,i,F,null,c,K);for(se in c)K=c[se],W=a[se],!c.hasOwnProperty(se)||K===W||K==null&&W==null||nt(n,i,se,K,c,W)}var gm=null,ym=null;function Qu(n){return n.nodeType===9?n:n.ownerDocument}function j_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function I_(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function vm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var _m=null;function _1(){var n=window.event;return n&&n.type==="popstate"?n===_m?!1:(_m=n,!0):(_m=null,!1)}var k_=typeof setTimeout=="function"?setTimeout:void 0,w1=typeof clearTimeout=="function"?clearTimeout:void 0,D_=typeof Promise=="function"?Promise:void 0,E1=typeof queueMicrotask=="function"?queueMicrotask:typeof D_<"u"?function(n){return D_.resolve(null).then(n).catch(T1)}:k_;function T1(n){setTimeout(function(){throw n})}function Yi(n){return n==="head"}function O_(n,i){var a=i,c=0,f=0;do{var p=a.nextSibling;if(n.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<c&&8>c){a=c;var E=n.ownerDocument;if(a&1&&zl(E.documentElement),a&2&&zl(E.body),a&4)for(a=E.head,zl(a),E=a.firstChild;E;){var x=E.nextSibling,U=E.nodeName;E[Rs]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=x}}if(f===0){n.removeChild(p),Ql(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:c=a.charCodeAt(0)-48;else c=0;a=p}while(a);Ql(i)}function wm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":wm(a),Ri(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function b1(n,i,a,c){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Rs])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=nr(n.nextSibling),n===null)break}return null}function x1(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=nr(n.nextSibling),n===null))return null;return n}function Em(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function A1(n,i){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")i();else{var c=function(){i(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function nr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Tm=null;function P_(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function M_(n,i,a){switch(i=Qu(a),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function zl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ri(n)}var Yn=new Map,U_=new Set;function Wu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ui=le.d;le.d={f:S1,r:C1,D:R1,C:N1,L:j1,m:I1,X:D1,S:k1,M:O1};function S1(){var n=ui.f(),i=zu();return n||i}function C1(n){var i=dr(n);i!==null&&i.tag===5&&i.type==="form"?rv(i):ui.r(n)}var co=typeof document>"u"?null:document;function L_(n,i,a){var c=co;if(c&&typeof i=="string"&&i){var f=Ct(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),U_.has(f)||(U_.add(f),n={rel:n,crossOrigin:a,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),Wt(i,"link",n),Et(i),c.head.appendChild(i)))}}function R1(n){ui.D(n),L_("dns-prefetch",n,null)}function N1(n,i){ui.C(n,i),L_("preconnect",n,i)}function j1(n,i,a){ui.L(n,i,a);var c=co;if(c&&n&&i){var f='link[rel="preload"][as="'+Ct(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Ct(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Ct(a.imageSizes)+'"]')):f+='[href="'+Ct(n)+'"]';var p=f;switch(i){case"style":p=uo(n);break;case"script":p=ho(n)}Yn.has(p)||(n=_({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Yn.set(p,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(Fl(p))||i==="script"&&c.querySelector(ql(p))||(i=c.createElement("link"),Wt(i,"link",n),Et(i),c.head.appendChild(i)))}}function I1(n,i){ui.m(n,i);var a=co;if(a&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Ct(c)+'"][href="'+Ct(n)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ho(n)}if(!Yn.has(p)&&(n=_({rel:"modulepreload",href:n},i),Yn.set(p,n),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ql(p)))return}c=a.createElement("link"),Wt(c,"link",n),Et(c),a.head.appendChild(c)}}}function k1(n,i,a){ui.S(n,i,a);var c=co;if(c&&n){var f=hn(c).hoistableStyles,p=uo(n);i=i||"default";var E=f.get(p);if(!E){var x={loading:0,preload:null};if(E=c.querySelector(Fl(p)))x.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Yn.get(p))&&bm(n,a);var U=E=c.createElement("link");Et(U),Wt(U,"link",n),U._p=new Promise(function(G,te){U.onload=G,U.onerror=te}),U.addEventListener("load",function(){x.loading|=1}),U.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Xu(E,i,c)}E={type:"stylesheet",instance:E,count:1,state:x},f.set(p,E)}}}function D1(n,i){ui.X(n,i);var a=co;if(a&&n){var c=hn(a).hoistableScripts,f=ho(n),p=c.get(f);p||(p=a.querySelector(ql(f)),p||(n=_({src:n,async:!0},i),(i=Yn.get(f))&&xm(n,i),p=a.createElement("script"),Et(p),Wt(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function O1(n,i){ui.M(n,i);var a=co;if(a&&n){var c=hn(a).hoistableScripts,f=ho(n),p=c.get(f);p||(p=a.querySelector(ql(f)),p||(n=_({src:n,async:!0,type:"module"},i),(i=Yn.get(f))&&xm(n,i),p=a.createElement("script"),Et(p),Wt(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function V_(n,i,a,c){var f=(f=Ae.current)?Wu(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=uo(a.href),a=hn(f).hoistableStyles,c=a.get(i),c||(c={type:"style",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=uo(a.href);var p=hn(f).hoistableStyles,E=p.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,E),(p=f.querySelector(Fl(n)))&&!p._p&&(E.instance=p,E.state.loading=5),Yn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(n,a),p||P1(f,n,a,E.state))),i&&c===null)throw Error(s(528,""));return E}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ho(a),a=hn(f).hoistableScripts,c=a.get(i),c||(c={type:"script",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function uo(n){return'href="'+Ct(n)+'"'}function Fl(n){return'link[rel="stylesheet"]['+n+"]"}function B_(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function P1(n,i,a,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Wt(i,"link",a),Et(i),n.head.appendChild(i))}function ho(n){return'[src="'+Ct(n)+'"]'}function ql(n){return"script[async]"+n}function z_(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+Ct(a.href)+'"]');if(c)return i.instance=c,Et(c),c;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Et(c),Wt(c,"style",f),Xu(c,a.precedence,n),i.instance=c;case"stylesheet":f=uo(a.href);var p=n.querySelector(Fl(f));if(p)return i.state.loading|=4,i.instance=p,Et(p),p;c=B_(a),(f=Yn.get(f))&&bm(c,f),p=(n.ownerDocument||n).createElement("link"),Et(p);var E=p;return E._p=new Promise(function(x,U){E.onload=x,E.onerror=U}),Wt(p,"link",c),i.state.loading|=4,Xu(p,a.precedence,n),i.instance=p;case"script":return p=ho(a.src),(f=n.querySelector(ql(p)))?(i.instance=f,Et(f),f):(c=a,(f=Yn.get(p))&&(c=_({},a),xm(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Et(f),Wt(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Xu(c,a.precedence,n));return i.instance}function Xu(n,i,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,E=0;E<c.length;E++){var x=c[E];if(x.dataset.precedence===i)p=x;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function bm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function xm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Zu=null;function F_(n,i,a){if(Zu===null){var c=new Map,f=Zu=new Map;f.set(a,c)}else f=Zu,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(n))return c;for(c.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var p=a[f];if(!(p[Rs]||p[kt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(i)||"";E=n+E;var x=c.get(E);x?x.push(p):c.set(E,[p])}}return c}function q_(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function M1(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function H_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Hl=null;function U1(){}function L1(n,i,a){if(Hl===null)throw Error(s(475));var c=Hl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=uo(a.href),p=n.querySelector(Fl(f));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=Ju.bind(c),n.then(c,c)),i.state.loading|=4,i.instance=p,Et(p);return}p=n.ownerDocument||n,a=B_(a),(f=Yn.get(f))&&bm(a,f),p=p.createElement("link"),Et(p);var E=p;E._p=new Promise(function(x,U){E.onload=x,E.onerror=U}),Wt(p,"link",a),i.instance=p}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=Ju.bind(c),n.addEventListener("load",i),n.addEventListener("error",i))}}function V1(){if(Hl===null)throw Error(s(475));var n=Hl;return n.stylesheets&&n.count===0&&Am(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&Am(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Ju(){if(this.count--,this.count===0){if(this.stylesheets)Am(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var eh=null;function Am(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,eh=new Map,i.forEach(B1,n),eh=null,Ju.call(n))}function B1(n,i){if(!(i.state.loading&4)){var a=eh.get(n);if(a)var c=a.get(null);else{a=new Map,eh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var E=f[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),c=E)}c&&a.set(null,c)}f=i.instance,E=f.getAttribute("data-precedence"),p=a.get(E)||c,p===c&&a.set(null,f),a.set(E,f),this.count++,c=Ju.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var $l={$$typeof:X,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function z1(n,i,a,c,f,p,E,x){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Br(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Br(0),this.hiddenUpdates=Br(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function $_(n,i,a,c,f,p,E,x,U,G,te,se){return n=new z1(n,i,a,E,x,U,G,se),i=1,p===!0&&(i|=24),p=Cn(3,null,null,i),n.current=p,p.stateNode=n,i=af(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:c,isDehydrated:a,cache:i},uf(p),n}function G_(n){return n?(n=Fa,n):Fa}function Y_(n,i,a,c,f,p){f=G_(f),c.context===null?c.context=f:c.pendingContext=f,c=Oi(i),c.payload={element:a},p=p===void 0?null:p,p!==null&&(c.callback=p),a=Pi(n,c,i),a!==null&&(kn(a,n,i),El(a,n,i))}function K_(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Sm(n,i){K_(n,i),(n=n.alternate)&&K_(n,i)}function Q_(n){if(n.tag===13){var i=za(n,67108864);i!==null&&kn(i,n,67108864),Sm(n,67108864)}}var th=!0;function F1(n,i,a,c){var f=Y.T;Y.T=null;var p=le.p;try{le.p=2,Cm(n,i,a,c)}finally{le.p=p,Y.T=f}}function q1(n,i,a,c){var f=Y.T;Y.T=null;var p=le.p;try{le.p=8,Cm(n,i,a,c)}finally{le.p=p,Y.T=f}}function Cm(n,i,a,c){if(th){var f=Rm(c);if(f===null)mm(n,i,c,nh,a),X_(n,c);else if($1(f,n,i,a,c))c.stopPropagation();else if(X_(n,c),i&4&&-1<H1.indexOf(n)){for(;f!==null;){var p=dr(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=Xn(p.pendingLanes);if(E!==0){var x=p;for(x.pendingLanes|=2,x.entangledLanes|=2;E;){var U=1<<31-tn(E);x.entanglements[1]|=U,E&=~U}Sr(p),(Ze&6)===0&&(Vu=Pn()+500,Ll(0))}}break;case 13:x=za(p,2),x!==null&&kn(x,p,2),zu(),Sm(p,2)}if(p=Rm(c),p===null&&mm(n,i,c,nh,a),p===f)break;f=p}f!==null&&c.stopPropagation()}else mm(n,i,c,null,a)}}function Rm(n){return n=Ln(n),Nm(n)}var nh=null;function Nm(n){if(nh=null,n=Fr(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=d(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return nh=n,null}function W_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Id()){case qo:return 2;case wa:return 8;case bs:case kd:return 32;case Ea:return 268435456;default:return 32}default:return 32}}var jm=!1,Ki=null,Qi=null,Wi=null,Gl=new Map,Yl=new Map,Xi=[],H1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X_(n,i){switch(n){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":Gl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(i.pointerId)}}function Kl(n,i,a,c,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},i!==null&&(i=dr(i),i!==null&&Q_(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function $1(n,i,a,c,f){switch(i){case"focusin":return Ki=Kl(Ki,n,i,a,c,f),!0;case"dragenter":return Qi=Kl(Qi,n,i,a,c,f),!0;case"mouseover":return Wi=Kl(Wi,n,i,a,c,f),!0;case"pointerover":var p=f.pointerId;return Gl.set(p,Kl(Gl.get(p)||null,n,i,a,c,f)),!0;case"gotpointercapture":return p=f.pointerId,Yl.set(p,Kl(Yl.get(p)||null,n,i,a,c,f)),!0}return!1}function Z_(n){var i=Fr(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){n.blockedOn=i,zc(n.priority,function(){if(a.tag===13){var c=In();c=Ai(c);var f=za(a,c);f!==null&&kn(f,a,c),Sm(a,c)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Rm(n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Gr=c,a.target.dispatchEvent(c),Gr=null}else return i=dr(a),i!==null&&Q_(i),n.blockedOn=a,!1;i.shift()}return!0}function J_(n,i,a){rh(n)&&a.delete(i)}function G1(){jm=!1,Ki!==null&&rh(Ki)&&(Ki=null),Qi!==null&&rh(Qi)&&(Qi=null),Wi!==null&&rh(Wi)&&(Wi=null),Gl.forEach(J_),Yl.forEach(J_)}function ih(n,i){n.blockedOn===i&&(n.blockedOn=null,jm||(jm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,G1)))}var sh=null;function e0(n){sh!==n&&(sh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){sh===n&&(sh=null);for(var i=0;i<n.length;i+=3){var a=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if(Nm(c||a)===null)continue;break}var p=dr(a);p!==null&&(n.splice(i,3),i-=3,Nf(p,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function Ql(n){function i(U){return ih(U,n)}Ki!==null&&ih(Ki,n),Qi!==null&&ih(Qi,n),Wi!==null&&ih(Wi,n),Gl.forEach(i),Yl.forEach(i);for(var a=0;a<Xi.length;a++){var c=Xi[a];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Xi.length&&(a=Xi[0],a.blockedOn===null);)Z_(a),a.blockedOn===null&&Xi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],p=a[c+1],E=f[St]||null;if(typeof p=="function")E||e0(a);else if(E){var x=null;if(p&&p.hasAttribute("formAction")){if(f=p,E=p[St]||null)x=E.formAction;else if(Nm(f)!==null)continue}else x=E.action;typeof x=="function"?a[c+1]=x:(a.splice(c,3),c-=3),e0(a)}}}function Im(n){this._internalRoot=n}ah.prototype.render=Im.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,c=In();Y_(a,c,n,i,null,null)},ah.prototype.unmount=Im.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Y_(n.current,2,null,n,null,null),zu(),i[Mn]=null}};function ah(n){this._internalRoot=n}ah.prototype.unstable_scheduleHydration=function(n){if(n){var i=Si();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Xi.length&&i!==0&&i<Xi[a].priority;a++);Xi.splice(a,0,n),a===0&&Z_(n)}};var t0=e.version;if(t0!=="19.1.0")throw Error(s(527,t0,"19.1.0"));le.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=g(i),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var Y1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{mt=oh.inject(Y1),Xe=oh}catch{}}return Xl.createRoot=function(n,i){if(!o(n))throw Error(s(299));var a=!1,c="",f=yv,p=vv,E=_v,x=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(x=i.unstable_transitionCallbacks)),i=$_(n,1,!1,null,null,a,c,f,p,E,x,null),n[Mn]=i.current,fm(n),new Im(i)},Xl.hydrateRoot=function(n,i,a){if(!o(n))throw Error(s(299));var c=!1,f="",p=yv,E=vv,x=_v,U=null,G=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(U=a.unstable_transitionCallbacks),a.formState!==void 0&&(G=a.formState)),i=$_(n,1,!0,i,a??null,c,f,p,E,x,U,G),i.context=G_(null),a=i.current,c=In(),c=Ai(c),f=Oi(c),f.callback=null,Pi(a,f,c),a=c,i.current.lanes=a,zr(i,a),Sr(i),n[Mn]=i.current,fm(n),new ah(i)},Xl.version="19.1.0",Xl}var h0;function sA(){if(h0)return Om.exports;h0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Om.exports=iA(),Om.exports}var aA=sA(),Zl={},d0;function oA(){if(d0)return Zl;d0=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.parse=d,Zl.serialize=y;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function d(T,j){const C=new u,k=T.length;if(k<2)return C;const I=(j==null?void 0:j.decode)||_;let z=0;do{const J=T.indexOf("=",z);if(J===-1)break;const X=T.indexOf(";",z),re=X===-1?k:X;if(J>re){z=T.lastIndexOf(";",J-1)+1;continue}const ee=m(T,z,J),ce=g(T,J,ee),O=T.slice(ee,ce);if(C[O]===void 0){let N=m(T,J+1,re),R=g(T,re,N);const S=I(T.slice(N,R));C[O]=S}z=re+1}while(z<k);return C}function m(T,j,C){do{const k=T.charCodeAt(j);if(k!==32&&k!==9)return j}while(++j<C);return C}function g(T,j,C){for(;j>C;){const k=T.charCodeAt(--j);if(k!==32&&k!==9)return j+1}return C}function y(T,j,C){const k=(C==null?void 0:C.encode)||encodeURIComponent;if(!r.test(T))throw new TypeError(`argument name is invalid: ${T}`);const I=k(j);if(!e.test(I))throw new TypeError(`argument val is invalid: ${j}`);let z=T+"="+I;if(!C)return z;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);z+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);z+="; Domain="+C.domain}if(C.path){if(!s.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);z+="; Path="+C.path}if(C.expires){if(!b(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);z+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(z+="; HttpOnly"),C.secure&&(z+="; Secure"),C.partitioned&&(z+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return z}function _(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function b(T){return o.call(T)==="[object Date]"}return Zl}oA();var f0="popstate";function lA(r={}){function e(s,o){let{pathname:u,search:d,hash:m}=s.location;return tp("",{pathname:u,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:mc(o)}return uA(e,t,null,r)}function ht(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function lr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cA(){return Math.random().toString(36).substring(2,10)}function m0(r,e){return{usr:r.state,key:r.key,idx:e}}function tp(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Io(e):e,state:t,key:e&&e.key||s||cA()}}function mc({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Io(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function uA(r,e,t,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,d=o.history,m="POP",g=null,y=_();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function _(){return(d.state||{idx:null}).idx}function b(){m="POP";let I=_(),z=I==null?null:I-y;y=I,g&&g({action:m,location:k.location,delta:z})}function T(I,z){m="PUSH";let J=tp(k.location,I,z);y=_()+1;let X=m0(J,y),re=k.createHref(J);try{d.pushState(X,"",re)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;o.location.assign(re)}u&&g&&g({action:m,location:k.location,delta:1})}function j(I,z){m="REPLACE";let J=tp(k.location,I,z);y=_();let X=m0(J,y),re=k.createHref(J);d.replaceState(X,"",re),u&&g&&g({action:m,location:k.location,delta:0})}function C(I){return hA(I)}let k={get action(){return m},get location(){return r(o,d)},listen(I){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(f0,b),g=I,()=>{o.removeEventListener(f0,b),g=null}},createHref(I){return e(o,I)},createURL:C,encodeLocation(I){let z=C(I);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:T,replace:j,go(I){return d.go(I)}};return k}function hA(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ht(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:mc(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function tE(r,e,t="/"){return dA(r,e,t,!1)}function dA(r,e,t,s){let o=typeof e=="string"?Io(e):e,u=yi(o.pathname||"/",t);if(u==null)return null;let d=nE(r);fA(d);let m=null;for(let g=0;m==null&&g<d.length;++g){let y=xA(u);m=TA(d[g],y,s)}return m}function nE(r,e=[],t=[],s=""){let o=(u,d,m)=>{let g={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};g.relativePath.startsWith("/")&&(ht(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length));let y=mi([s,g.relativePath]),_=t.concat(g);u.children&&u.children.length>0&&(ht(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),nE(u.children,e,_,y)),!(u.path==null&&!u.index)&&e.push({path:y,score:wA(y,u.index),routesMeta:_})};return r.forEach((u,d)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,d);else for(let g of rE(u.path))o(u,d,g)}),e}function rE(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let d=rE(s.join("/")),m=[];return m.push(...d.map(g=>g===""?u:[u,g].join("/"))),o&&m.push(...d),m.map(g=>r.startsWith("/")&&g===""?"/":g)}function fA(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:EA(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var mA=/^:[\w-]+$/,pA=3,gA=2,yA=1,vA=10,_A=-2,p0=r=>r==="*";function wA(r,e){let t=r.split("/"),s=t.length;return t.some(p0)&&(s+=_A),e&&(s+=gA),t.filter(o=>!p0(o)).reduce((o,u)=>o+(mA.test(u)?pA:u===""?yA:vA),s)}function EA(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function TA(r,e,t=!1){let{routesMeta:s}=r,o={},u="/",d=[];for(let m=0;m<s.length;++m){let g=s[m],y=m===s.length-1,_=u==="/"?e:e.slice(u.length)||"/",b=Nh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},_),T=g.route;if(!b&&y&&t&&!s[s.length-1].route.index&&(b=Nh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},_)),!b)return null;Object.assign(o,b.params),d.push({params:o,pathname:mi([u,b.pathname]),pathnameBase:RA(mi([u,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(u=mi([u,b.pathnameBase]))}return d}function Nh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=bA(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((y,{paramName:_,isOptional:b},T)=>{if(_==="*"){let C=m[T]||"";d=u.slice(0,u.length-C.length).replace(/(.)\/+$/,"$1")}const j=m[T];return b&&!j?y[_]=void 0:y[_]=(j||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:r}}function bA(r,e=!1,t=!0){lr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function xA(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function yi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function AA(r,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Io(r):r;return{pathname:t?t.startsWith("/")?t:SA(t,e):e,search:NA(s),hash:jA(o)}}function SA(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Lm(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CA(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function iE(r){let e=CA(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function sE(r,e,t,s=!1){let o;typeof r=="string"?o=Io(r):(o={...r},ht(!o.pathname||!o.pathname.includes("?"),Lm("?","pathname","search",o)),ht(!o.pathname||!o.pathname.includes("#"),Lm("#","pathname","hash",o)),ht(!o.search||!o.search.includes("#"),Lm("#","search","hash",o)));let u=r===""||o.pathname==="",d=u?"/":o.pathname,m;if(d==null)m=t;else{let b=e.length-1;if(!s&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),b-=1;o.pathname=T.join("/")}m=b>=0?e[b]:"/"}let g=AA(o,m),y=d&&d!=="/"&&d.endsWith("/"),_=(u||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||_)&&(g.pathname+="/"),g}var mi=r=>r.join("/").replace(/\/\/+/g,"/"),RA=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),NA=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,jA=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function IA(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var aE=["POST","PUT","PATCH","DELETE"];new Set(aE);var kA=["GET",...aE];new Set(kA);var ko=P.createContext(null);ko.displayName="DataRouter";var Xh=P.createContext(null);Xh.displayName="DataRouterState";var oE=P.createContext({isTransitioning:!1});oE.displayName="ViewTransition";var DA=P.createContext(new Map);DA.displayName="Fetchers";var OA=P.createContext(null);OA.displayName="Await";var Mr=P.createContext(null);Mr.displayName="Navigation";var Ac=P.createContext(null);Ac.displayName="Location";var Ur=P.createContext({outlet:null,matches:[],isDataRoute:!1});Ur.displayName="Route";var kp=P.createContext(null);kp.displayName="RouteError";function PA(r,{relative:e}={}){ht(Sc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=P.useContext(Mr),{hash:o,pathname:u,search:d}=Cc(r,{relative:e}),m=u;return t!=="/"&&(m=u==="/"?t:mi([t,u])),s.createHref({pathname:m,search:d,hash:o})}function Sc(){return P.useContext(Ac)!=null}function ur(){return ht(Sc(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Ac).location}var lE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cE(r){P.useContext(Mr).static||P.useLayoutEffect(r)}function ys(){let{isDataRoute:r}=P.useContext(Ur);return r?KA():MA()}function MA(){ht(Sc(),"useNavigate() may be used only in the context of a <Router> component.");let r=P.useContext(ko),{basename:e,navigator:t}=P.useContext(Mr),{matches:s}=P.useContext(Ur),{pathname:o}=ur(),u=JSON.stringify(iE(s)),d=P.useRef(!1);return cE(()=>{d.current=!0}),P.useCallback((g,y={})=>{if(lr(d.current,lE),!d.current)return;if(typeof g=="number"){t.go(g);return}let _=sE(g,JSON.parse(u),o,y.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:mi([e,_.pathname])),(y.replace?t.replace:t.push)(_,y.state,y)},[e,t,u,o,r])}P.createContext(null);function Zh(){let{matches:r}=P.useContext(Ur),e=r[r.length-1];return e?e.params:{}}function Cc(r,{relative:e}={}){let{matches:t}=P.useContext(Ur),{pathname:s}=ur(),o=JSON.stringify(iE(t));return P.useMemo(()=>sE(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function UA(r,e){return uE(r,e)}function uE(r,e,t,s){var J;ht(Sc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=P.useContext(Mr),{matches:d}=P.useContext(Ur),m=d[d.length-1],g=m?m.params:{},y=m?m.pathname:"/",_=m?m.pathnameBase:"/",b=m&&m.route;{let X=b&&b.path||"";hE(y,!b||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let T=ur(),j;if(e){let X=typeof e=="string"?Io(e):e;ht(_==="/"||((J=X.pathname)==null?void 0:J.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${X.pathname}" was given in the \`location\` prop.`),j=X}else j=T;let C=j.pathname||"/",k=C;if(_!=="/"){let X=_.replace(/^\//,"").split("/");k="/"+C.replace(/^\//,"").split("/").slice(X.length).join("/")}let I=!u&&t&&t.matches&&t.matches.length>0?t.matches:tE(r,{pathname:k});lr(b||I!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),lr(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=FA(I&&I.map(X=>Object.assign({},X,{params:Object.assign({},g,X.params),pathname:mi([_,o.encodeLocation?o.encodeLocation(X.pathname).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?_:mi([_,o.encodeLocation?o.encodeLocation(X.pathnameBase).pathname:X.pathnameBase])})),d,t,s);return e&&z?P.createElement(Ac.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},z):z}function LA(){let r=YA(),e=IA(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:u},"ErrorBoundary")," or"," ",P.createElement("code",{style:u},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:o},t):null,d)}var VA=P.createElement(LA,null),BA=class extends P.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?P.createElement(Ur.Provider,{value:this.props.routeContext},P.createElement(kp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zA({routeContext:r,match:e,children:t}){let s=P.useContext(ko);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Ur.Provider,{value:r},t)}function FA(r,e=[],t=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,u=t==null?void 0:t.errors;if(u!=null){let g=o.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);ht(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let d=!1,m=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=g),y.route.id){let{loaderData:_,errors:b}=t,T=y.route.loader&&!_.hasOwnProperty(y.route.id)&&(!b||b[y.route.id]===void 0);if(y.route.lazy||T){d=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((g,y,_)=>{let b,T=!1,j=null,C=null;t&&(b=u&&y.route.id?u[y.route.id]:void 0,j=y.route.errorElement||VA,d&&(m<0&&_===0?(hE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,C=null):m===_&&(T=!0,C=y.route.hydrateFallbackElement||null)));let k=e.concat(o.slice(0,_+1)),I=()=>{let z;return b?z=j:T?z=C:y.route.Component?z=P.createElement(y.route.Component,null):y.route.element?z=y.route.element:z=g,P.createElement(zA,{match:y,routeContext:{outlet:g,matches:k,isDataRoute:t!=null},children:z})};return t&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?P.createElement(BA,{location:t.location,revalidation:t.revalidation,component:j,error:b,children:I(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):I()},null)}function Dp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qA(r){let e=P.useContext(ko);return ht(e,Dp(r)),e}function HA(r){let e=P.useContext(Xh);return ht(e,Dp(r)),e}function $A(r){let e=P.useContext(Ur);return ht(e,Dp(r)),e}function Op(r){let e=$A(r),t=e.matches[e.matches.length-1];return ht(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function GA(){return Op("useRouteId")}function YA(){var s;let r=P.useContext(kp),e=HA("useRouteError"),t=Op("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function KA(){let{router:r}=qA("useNavigate"),e=Op("useNavigate"),t=P.useRef(!1);return cE(()=>{t.current=!0}),P.useCallback(async(o,u={})=>{lr(t.current,lE),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var g0={};function hE(r,e,t){!e&&!g0[r]&&(g0[r]=!0,lr(!1,t))}P.memo(QA);function QA({routes:r,future:e,state:t}){return uE(r,void 0,t,e)}function xt(r){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function WA({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:u=!1}){ht(!Sc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),m=P.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof t=="string"&&(t=Io(t));let{pathname:g="/",search:y="",hash:_="",state:b=null,key:T="default"}=t,j=P.useMemo(()=>{let C=yi(g,d);return C==null?null:{location:{pathname:C,search:y,hash:_,state:b,key:T},navigationType:s}},[d,g,y,_,b,T,s]);return lr(j!=null,`<Router basename="${d}"> is not able to match the URL "${g}${y}${_}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:P.createElement(Mr.Provider,{value:m},P.createElement(Ac.Provider,{children:e,value:j}))}function XA({children:r,location:e}){return UA(np(r),e)}function np(r,e=[]){let t=[];return P.Children.forEach(r,(s,o)=>{if(!P.isValidElement(s))return;let u=[...e,o];if(s.type===P.Fragment){t.push.apply(t,np(s.props.children,u));return}ht(s.type===xt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=np(s.props.children,u)),t.push(d)}),t}var yh="get",vh="application/x-www-form-urlencoded";function Jh(r){return r!=null&&typeof r.tagName=="string"}function ZA(r){return Jh(r)&&r.tagName.toLowerCase()==="button"}function JA(r){return Jh(r)&&r.tagName.toLowerCase()==="form"}function eS(r){return Jh(r)&&r.tagName.toLowerCase()==="input"}function tS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function nS(r,e){return r.button===0&&(!e||e==="_self")&&!tS(r)}function rp(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,t)=>{let s=r[t];return e.concat(Array.isArray(s)?s.map(o=>[t,o]):[[t,s]])},[]))}function rS(r,e){let t=rp(r);return e&&e.forEach((s,o)=>{t.has(o)||e.getAll(o).forEach(u=>{t.append(o,u)})}),t}var lh=null;function iS(){if(lh===null)try{new FormData(document.createElement("form"),0),lh=!1}catch{lh=!0}return lh}var sS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vm(r){return r!=null&&!sS.has(r)?(lr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vh}"`),null):r}function aS(r,e){let t,s,o,u,d;if(JA(r)){let m=r.getAttribute("action");s=m?yi(m,e):null,t=r.getAttribute("method")||yh,o=Vm(r.getAttribute("enctype"))||vh,u=new FormData(r)}else if(ZA(r)||eS(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||m.getAttribute("action");if(s=g?yi(g,e):null,t=r.getAttribute("formmethod")||m.getAttribute("method")||yh,o=Vm(r.getAttribute("formenctype"))||Vm(m.getAttribute("enctype"))||vh,u=new FormData(m,r),!iS()){let{name:y,type:_,value:b}=r;if(_==="image"){let T=y?`${y}.`:"";u.append(`${T}x`,"0"),u.append(`${T}y`,"0")}else y&&u.append(y,b)}}else{if(Jh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=yh,s=null,o=vh,d=r}return u&&o==="text/plain"&&(d=u,u=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:u,body:d}}function Pp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function oS(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function cS(r,e,t){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await oS(u,t);return d.links?d.links():[]}return[]}));return fS(s.flat(1).filter(lS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function y0(r,e,t,s,o,u){let d=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,m=(g,y)=>{var _;return t[y].pathname!==g.pathname||((_=t[y].route.path)==null?void 0:_.endsWith("*"))&&t[y].params["*"]!==g.params["*"]};return u==="assets"?e.filter((g,y)=>d(g,y)||m(g,y)):u==="data"?e.filter((g,y)=>{var b;let _=s.routes[g.route.id];if(!_||!_.hasLoader)return!1;if(d(g,y)||m(g,y))return!0;if(g.route.shouldRevalidate){let T=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((b=t[0])==null?void 0:b.params)||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function uS(r,e,{includeHydrateFallback:t}={}){return hS(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function hS(r){return[...new Set(r)]}function dS(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function fS(r,e){let t=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(dS(o));return t.has(u)||(t.add(u),s.push({key:u,link:o})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mS=new Set([100,101,204,205]);function pS(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&yi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function dE(){let r=P.useContext(ko);return Pp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function gS(){let r=P.useContext(Xh);return Pp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Mp=P.createContext(void 0);Mp.displayName="FrameworkContext";function fE(){let r=P.useContext(Mp);return Pp(r,"You must render this element inside a <HydratedRouter> element"),r}function yS(r,e){let t=P.useContext(Mp),[s,o]=P.useState(!1),[u,d]=P.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:y,onMouseLeave:_,onTouchStart:b}=e,T=P.useRef(null);P.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let k=z=>{z.forEach(J=>{d(J.isIntersecting)})},I=new IntersectionObserver(k,{threshold:.5});return T.current&&I.observe(T.current),()=>{I.disconnect()}}},[r]),P.useEffect(()=>{if(s){let k=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(k)}}},[s]);let j=()=>{o(!0)},C=()=>{o(!1),d(!1)};return t?r!=="intent"?[u,T,{}]:[u,T,{onFocus:Jl(m,j),onBlur:Jl(g,C),onMouseEnter:Jl(y,j),onMouseLeave:Jl(_,C),onTouchStart:Jl(b,j)}]:[!1,T,{}]}function Jl(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function vS({page:r,...e}){let{router:t}=dE(),s=P.useMemo(()=>tE(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?P.createElement(wS,{page:r,matches:s,...e}):null}function _S(r){let{manifest:e,routeModules:t}=fE(),[s,o]=P.useState([]);return P.useEffect(()=>{let u=!1;return cS(r,e,t).then(d=>{u||o(d)}),()=>{u=!0}},[r,e,t]),s}function wS({page:r,matches:e,...t}){let s=ur(),{manifest:o,routeModules:u}=fE(),{basename:d}=dE(),{loaderData:m,matches:g}=gS(),y=P.useMemo(()=>y0(r,e,g,o,s,"data"),[r,e,g,o,s]),_=P.useMemo(()=>y0(r,e,g,o,s,"assets"),[r,e,g,o,s]),b=P.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let C=new Set,k=!1;if(e.forEach(z=>{var X;let J=o.routes[z.route.id];!J||!J.hasLoader||(!y.some(re=>re.route.id===z.route.id)&&z.route.id in m&&((X=u[z.route.id])!=null&&X.shouldRevalidate)||J.hasClientLoader?k=!0:C.add(z.route.id))}),C.size===0)return[];let I=pS(r,d);return k&&C.size>0&&I.searchParams.set("_routes",e.filter(z=>C.has(z.route.id)).map(z=>z.route.id).join(",")),[I.pathname+I.search]},[d,m,s,o,y,e,r,u]),T=P.useMemo(()=>uS(_,o),[_,o]),j=_S(_);return P.createElement(P.Fragment,null,b.map(C=>P.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),T.map(C=>P.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),j.map(({key:C,link:k})=>P.createElement("link",{key:C,...k})))}function ES(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var mE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mE&&(window.__reactRouterVersion="7.6.0")}catch{}function TS({basename:r,children:e,window:t}){let s=P.useRef();s.current==null&&(s.current=lA({window:t,v5Compat:!0}));let o=s.current,[u,d]=P.useState({action:o.action,location:o.location}),m=P.useCallback(g=>{P.startTransition(()=>d(g))},[d]);return P.useLayoutEffect(()=>o.listen(m),[o,m]),P.createElement(WA,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o})}var pE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pe=P.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:u,replace:d,state:m,target:g,to:y,preventScrollReset:_,viewTransition:b,...T},j){let{basename:C}=P.useContext(Mr),k=typeof y=="string"&&pE.test(y),I,z=!1;if(typeof y=="string"&&k&&(I=y,mE))try{let R=new URL(window.location.href),S=y.startsWith("//")?new URL(R.protocol+y):new URL(y),M=yi(S.pathname,C);S.origin===R.origin&&M!=null?y=M+S.search+S.hash:z=!0}catch{lr(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let J=PA(y,{relative:o}),[X,re,ee]=yS(s,T),ce=SS(y,{replace:d,state:m,target:g,preventScrollReset:_,relative:o,viewTransition:b});function O(R){e&&e(R),R.defaultPrevented||ce(R)}let N=P.createElement("a",{...T,...ee,href:I||J,onClick:z||u?e:O,ref:ES(j,re),target:g,"data-discover":!k&&t==="render"?"true":void 0});return X&&!k?P.createElement(P.Fragment,null,N,P.createElement(vS,{page:J})):N});pe.displayName="Link";var bS=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:u,to:d,viewTransition:m,children:g,...y},_){let b=Cc(d,{relative:y.relative}),T=ur(),j=P.useContext(Xh),{navigator:C,basename:k}=P.useContext(Mr),I=j!=null&&IS(b)&&m===!0,z=C.encodeLocation?C.encodeLocation(b).pathname:b.pathname,J=T.pathname,X=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;t||(J=J.toLowerCase(),X=X?X.toLowerCase():null,z=z.toLowerCase()),X&&k&&(X=yi(X,k)||X);const re=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let ee=J===z||!o&&J.startsWith(z)&&J.charAt(re)==="/",ce=X!=null&&(X===z||!o&&X.startsWith(z)&&X.charAt(z.length)==="/"),O={isActive:ee,isPending:ce,isTransitioning:I},N=ee?e:void 0,R;typeof s=="function"?R=s(O):R=[s,ee?"active":null,ce?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let S=typeof u=="function"?u(O):u;return P.createElement(pe,{...y,"aria-current":N,className:R,ref:_,style:S,to:d,viewTransition:m},typeof g=="function"?g(O):g)});bS.displayName="NavLink";var xS=P.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:u,method:d=yh,action:m,onSubmit:g,relative:y,preventScrollReset:_,viewTransition:b,...T},j)=>{let C=NS(),k=jS(m,{relative:y}),I=d.toLowerCase()==="get"?"get":"post",z=typeof m=="string"&&pE.test(m),J=X=>{if(g&&g(X),X.defaultPrevented)return;X.preventDefault();let re=X.nativeEvent.submitter,ee=(re==null?void 0:re.getAttribute("formmethod"))||d;C(re||X.currentTarget,{fetcherKey:e,method:ee,navigate:t,replace:o,state:u,relative:y,preventScrollReset:_,viewTransition:b})};return P.createElement("form",{ref:j,method:I,action:k,onSubmit:s?g:J,...T,"data-discover":!z&&r==="render"?"true":void 0})});xS.displayName="Form";function AS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gE(r){let e=P.useContext(ko);return ht(e,AS(r)),e}function SS(r,{target:e,replace:t,state:s,preventScrollReset:o,relative:u,viewTransition:d}={}){let m=ys(),g=ur(),y=Cc(r,{relative:u});return P.useCallback(_=>{if(nS(_,e)){_.preventDefault();let b=t!==void 0?t:mc(g)===mc(y);m(r,{replace:b,state:s,preventScrollReset:o,relative:u,viewTransition:d})}},[g,m,y,t,s,e,r,o,u,d])}function yE(r){lr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(rp(r)),t=P.useRef(!1),s=ur(),o=P.useMemo(()=>rS(s.search,t.current?null:e.current),[s.search]),u=ys(),d=P.useCallback((m,g)=>{const y=rp(typeof m=="function"?m(o):m);t.current=!0,u("?"+y,g)},[u,o]);return[o,d]}var CS=0,RS=()=>`__${String(++CS)}__`;function NS(){let{router:r}=gE("useSubmit"),{basename:e}=P.useContext(Mr),t=GA();return P.useCallback(async(s,o={})=>{let{action:u,method:d,encType:m,formData:g,body:y}=aS(s,e);if(o.navigate===!1){let _=o.fetcherKey||RS();await r.fetch(_,t,o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function jS(r,{relative:e}={}){let{basename:t}=P.useContext(Mr),s=P.useContext(Ur);ht(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Cc(r||".",{relative:e})},d=ur();if(r==null){u.search=d.search;let m=new URLSearchParams(u.search),g=m.getAll("index");if(g.some(_=>_==="")){m.delete("index"),g.filter(b=>b).forEach(b=>m.append("index",b));let _=m.toString();u.search=_?`?${_}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:mi([t,u.pathname])),mc(u)}function IS(r,e={}){let t=P.useContext(oE);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=gE("useViewTransitionState"),o=Cc(r,{relative:e.relative});if(!t.isTransitioning)return!1;let u=yi(t.currentLocation.pathname,s)||t.currentLocation.pathname,d=yi(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Nh(o.pathname,d)!=null||Nh(o.pathname,u)!=null}[...mS];const kS=()=>{};var v0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},DS=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[t++],d=r[t++],m=r[t++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[t++],d=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},_E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],d=o+1<r.length,m=d?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,_=u>>2,b=(u&3)<<4|m>>4;let T=(m&15)<<2|y>>6,j=y&63;g||(j=64,d||(T=64)),s.push(t[_],t[b],t[T],t[j])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(vE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):DS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const b=o<r.length?t[r.charAt(o)]:64;if(++o,u==null||m==null||y==null||b==null)throw new OS;const T=u<<2|m>>4;if(s.push(T),y!==64){const j=m<<4&240|y>>2;if(s.push(j),b!==64){const C=y<<6&192|b;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class OS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PS=function(r){const e=vE(r);return _E.encodeByteArray(e,!0)},jh=function(r){return PS(r).replace(/\./g,"")},wE=function(r){try{return _E.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=()=>MS().__FIREBASE_DEFAULTS__,LS=()=>{if(typeof process>"u"||typeof v0>"u")return;const r=v0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},VS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&wE(r[1]);return e&&JSON.parse(e)},ed=()=>{try{return kS()||US()||LS()||VS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},EE=r=>{var e,t;return(t=(e=ed())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},TE=r=>{const e=EE(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},bE=()=>{var r;return(r=ed())===null||r===void 0?void 0:r.config},xE=r=>{var e;return(e=ed())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(r){return r.endsWith(".cloudworkstations.dev")}async function Up(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[jh(JSON.stringify(t)),jh(JSON.stringify(d)),""].join(".")}const oc={};function zS(){const r={prod:[],emulator:[]};for(const e of Object.keys(oc))oc[e]?r.emulator.push(e):r.prod.push(e);return r}function FS(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let _0=!1;function Do(r,e){if(typeof window>"u"||typeof document>"u"||!ma(window.location.host)||oc[r]===e||oc[r]||_0)return;oc[r]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",u=zS().prod.length>0;function d(){const T=document.getElementById(s);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,j){T.setAttribute("width","24"),T.setAttribute("id",j),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{_0=!0,d()},T}function _(T,j){T.setAttribute("id",j),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function b(){const T=FS(s),j=t("text"),C=document.getElementById(j)||document.createElement("span"),k=t("learnmore"),I=document.getElementById(k)||document.createElement("a"),z=t("preprendIcon"),J=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const X=T.element;m(X),_(I,k);const re=y();g(J,z),X.append(J,C,I,re),document.body.appendChild(X)}u?(C.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function HS(){var r;const e=(r=ed())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $S(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function YS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KS(){const r=un();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function QS(){return!HS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WS(){try{return typeof indexedDB=="object"}catch{return!1}}function XS(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="FirebaseError";class Lr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=ZS,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rc.prototype.create)}}class Rc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?JS(u,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Lr(o,m,s)}}function JS(r,e){return r.replace(eC,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const eC=/\{\$([^}]+)}/g;function tC(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function vi(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=r[o],d=e[o];if(w0(u)&&w0(d)){if(!vi(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function w0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function tc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function nc(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function nC(r,e){const t=new rC(r,e);return t.subscribe.bind(t)}class rC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");iC(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Bm),o.error===void 0&&(o.error=Bm),o.complete===void 0&&(o.complete=Bm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iC(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Bm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(r){return r&&r._delegate?r._delegate:r}class cs{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new BS;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oC(e))try{this.getOrInitializeService({instanceIdentifier:ra})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ra){return this.instances.has(e)}getOptions(e=ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&d.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:aC(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ra){return this.component?this.component.multipleInstances?e:ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aC(r){return r===ra?void 0:r}function oC(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Be||(Be={}));const cC={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},uC=Be.INFO,hC={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},dC=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=hC[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lp{constructor(e){this.name=e,this._logLevel=uC,this._logHandler=dC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const fC=(r,e)=>e.some(t=>r instanceof t);let E0,T0;function mC(){return E0||(E0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pC(){return T0||(T0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SE=new WeakMap,ip=new WeakMap,CE=new WeakMap,zm=new WeakMap,Vp=new WeakMap;function gC(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",d)},u=()=>{t(ss(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&SE.set(t,r)}).catch(()=>{}),Vp.set(e,r),e}function yC(r){if(ip.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",d),r.removeEventListener("abort",d)},u=()=>{t(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",d),r.addEventListener("abort",d)});ip.set(r,e)}let sp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return ip.get(r);if(e==="objectStoreNames")return r.objectStoreNames||CE.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ss(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function vC(r){sp=r(sp)}function _C(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Fm(this),e,...t);return CE.set(s,e.sort?e.sort():[e]),ss(s)}:pC().includes(r)?function(...e){return r.apply(Fm(this),e),ss(SE.get(this))}:function(...e){return ss(r.apply(Fm(this),e))}}function wC(r){return typeof r=="function"?_C(r):(r instanceof IDBTransaction&&yC(r),fC(r,mC())?new Proxy(r,sp):r)}function ss(r){if(r instanceof IDBRequest)return gC(r);if(zm.has(r))return zm.get(r);const e=wC(r);return e!==r&&(zm.set(r,e),Vp.set(e,r)),e}const Fm=r=>Vp.get(r);function EC(r,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(r,e),m=ss(d);return s&&d.addEventListener("upgradeneeded",g=>{s(ss(d.result),g.oldVersion,g.newVersion,ss(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const TC=["get","getKey","getAll","getAllKeys","count"],bC=["put","add","delete","clear"],qm=new Map;function b0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(qm.get(e))return qm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=bC.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||TC.includes(t)))return;const u=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),o&&g.done]))[0]};return qm.set(e,u),u}vC(r=>({...r,get:(e,t,s)=>b0(e,t)||r.get(e,t,s),has:(e,t)=>!!b0(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(AC(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function AC(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ap="@firebase/app",x0="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new Lp("@firebase/app"),SC="@firebase/app-compat",CC="@firebase/analytics-compat",RC="@firebase/analytics",NC="@firebase/app-check-compat",jC="@firebase/app-check",IC="@firebase/auth",kC="@firebase/auth-compat",DC="@firebase/database",OC="@firebase/data-connect",PC="@firebase/database-compat",MC="@firebase/functions",UC="@firebase/functions-compat",LC="@firebase/installations",VC="@firebase/installations-compat",BC="@firebase/messaging",zC="@firebase/messaging-compat",FC="@firebase/performance",qC="@firebase/performance-compat",HC="@firebase/remote-config",$C="@firebase/remote-config-compat",GC="@firebase/storage",YC="@firebase/storage-compat",KC="@firebase/firestore",QC="@firebase/vertexai",WC="@firebase/firestore-compat",XC="firebase",ZC="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="[DEFAULT]",JC={[ap]:"fire-core",[SC]:"fire-core-compat",[RC]:"fire-analytics",[CC]:"fire-analytics-compat",[jC]:"fire-app-check",[NC]:"fire-app-check-compat",[IC]:"fire-auth",[kC]:"fire-auth-compat",[DC]:"fire-rtdb",[OC]:"fire-data-connect",[PC]:"fire-rtdb-compat",[MC]:"fire-fn",[UC]:"fire-fn-compat",[LC]:"fire-iid",[VC]:"fire-iid-compat",[BC]:"fire-fcm",[zC]:"fire-fcm-compat",[FC]:"fire-perf",[qC]:"fire-perf-compat",[HC]:"fire-rc",[$C]:"fire-rc-compat",[GC]:"fire-gcs",[YC]:"fire-gcs-compat",[KC]:"fire-fst",[WC]:"fire-fst-compat",[QC]:"fire-vertex","fire-js":"fire-js",[XC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,eR=new Map,lp=new Map;function A0(r,e){try{r.container.addComponent(e)}catch(t){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function la(r){const e=r.name;if(lp.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;lp.set(e,r);for(const t of Ih.values())A0(t,r);for(const t of eR.values())A0(t,r);return!0}function td(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Tn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new Rc("app","Firebase",tR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=ZC;function RE(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:op,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw as.create("bad-app-name",{appName:String(o)});if(t||(t=bE()),!t)throw as.create("no-options");const u=Ih.get(o);if(u){if(vi(t,u.options)&&vi(s,u.config))return u;throw as.create("duplicate-app",{appName:o})}const d=new lC(o);for(const g of lp.values())d.addComponent(g);const m=new nR(t,s,d);return Ih.set(o,m),m}function Bp(r=op){const e=Ih.get(r);if(!e&&r===op&&bE())return RE();if(!e)throw as.create("no-app",{appName:r});return e}function jr(r,e,t){var s;let o=(s=JC[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(m.join(" "));return}la(new cs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="firebase-heartbeat-database",iR=1,pc="firebase-heartbeat-store";let Hm=null;function NE(){return Hm||(Hm=EC(rR,iR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(pc)}catch(t){console.warn(t)}}}}).catch(r=>{throw as.create("idb-open",{originalErrorMessage:r.message})})),Hm}async function sR(r){try{const t=(await NE()).transaction(pc),s=await t.objectStore(pc).get(jE(r));return await t.done,s}catch(e){if(e instanceof Lr)_i.warn(e.message);else{const t=as.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_i.warn(t.message)}}}async function S0(r,e){try{const s=(await NE()).transaction(pc,"readwrite");await s.objectStore(pc).put(e,jE(r)),await s.done}catch(t){if(t instanceof Lr)_i.warn(t.message);else{const s=as.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});_i.warn(s.message)}}}function jE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=1024,oR=30;class lR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new uR(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=C0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>oR){const d=hR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){_i.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=C0(),{heartbeatsToSend:s,unsentEntries:o}=cR(this._heartbeatsCache.heartbeats),u=jh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return _i.warn(t),""}}}function C0(){return new Date().toISOString().substring(0,10)}function cR(r,e=aR){const t=[];let s=r.slice();for(const o of r){const u=t.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),R0(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),R0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class uR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WS()?XS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await sR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return S0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return S0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function R0(r){return jh(JSON.stringify({version:2,heartbeats:r})).length}function hR(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(r){la(new cs("platform-logger",e=>new xC(e),"PRIVATE")),la(new cs("heartbeat",e=>new lR(e),"PRIVATE")),jr(ap,x0,r),jr(ap,x0,"esm2017"),jr("fire-js","")}dR("");var fR="firebase",mR="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(fR,mR,"app");var N0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,IE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,N){function R(){}R.prototype=N.prototype,O.D=N.prototype,O.prototype=new R,O.prototype.constructor=O,O.C=function(S,M,B){for(var D=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)D[Q-2]=arguments[Q];return N.prototype[M].apply(S,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,N,R){R||(R=0);var S=Array(16);if(typeof N=="string")for(var M=0;16>M;++M)S[M]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(M=0;16>M;++M)S[M]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=O.g[0],R=O.g[1],M=O.g[2];var B=O.g[3],D=N+(B^R&(M^B))+S[0]+3614090360&4294967295;N=R+(D<<7&4294967295|D>>>25),D=B+(M^N&(R^M))+S[1]+3905402710&4294967295,B=N+(D<<12&4294967295|D>>>20),D=M+(R^B&(N^R))+S[2]+606105819&4294967295,M=B+(D<<17&4294967295|D>>>15),D=R+(N^M&(B^N))+S[3]+3250441966&4294967295,R=M+(D<<22&4294967295|D>>>10),D=N+(B^R&(M^B))+S[4]+4118548399&4294967295,N=R+(D<<7&4294967295|D>>>25),D=B+(M^N&(R^M))+S[5]+1200080426&4294967295,B=N+(D<<12&4294967295|D>>>20),D=M+(R^B&(N^R))+S[6]+2821735955&4294967295,M=B+(D<<17&4294967295|D>>>15),D=R+(N^M&(B^N))+S[7]+4249261313&4294967295,R=M+(D<<22&4294967295|D>>>10),D=N+(B^R&(M^B))+S[8]+1770035416&4294967295,N=R+(D<<7&4294967295|D>>>25),D=B+(M^N&(R^M))+S[9]+2336552879&4294967295,B=N+(D<<12&4294967295|D>>>20),D=M+(R^B&(N^R))+S[10]+4294925233&4294967295,M=B+(D<<17&4294967295|D>>>15),D=R+(N^M&(B^N))+S[11]+2304563134&4294967295,R=M+(D<<22&4294967295|D>>>10),D=N+(B^R&(M^B))+S[12]+1804603682&4294967295,N=R+(D<<7&4294967295|D>>>25),D=B+(M^N&(R^M))+S[13]+4254626195&4294967295,B=N+(D<<12&4294967295|D>>>20),D=M+(R^B&(N^R))+S[14]+2792965006&4294967295,M=B+(D<<17&4294967295|D>>>15),D=R+(N^M&(B^N))+S[15]+1236535329&4294967295,R=M+(D<<22&4294967295|D>>>10),D=N+(M^B&(R^M))+S[1]+4129170786&4294967295,N=R+(D<<5&4294967295|D>>>27),D=B+(R^M&(N^R))+S[6]+3225465664&4294967295,B=N+(D<<9&4294967295|D>>>23),D=M+(N^R&(B^N))+S[11]+643717713&4294967295,M=B+(D<<14&4294967295|D>>>18),D=R+(B^N&(M^B))+S[0]+3921069994&4294967295,R=M+(D<<20&4294967295|D>>>12),D=N+(M^B&(R^M))+S[5]+3593408605&4294967295,N=R+(D<<5&4294967295|D>>>27),D=B+(R^M&(N^R))+S[10]+38016083&4294967295,B=N+(D<<9&4294967295|D>>>23),D=M+(N^R&(B^N))+S[15]+3634488961&4294967295,M=B+(D<<14&4294967295|D>>>18),D=R+(B^N&(M^B))+S[4]+3889429448&4294967295,R=M+(D<<20&4294967295|D>>>12),D=N+(M^B&(R^M))+S[9]+568446438&4294967295,N=R+(D<<5&4294967295|D>>>27),D=B+(R^M&(N^R))+S[14]+3275163606&4294967295,B=N+(D<<9&4294967295|D>>>23),D=M+(N^R&(B^N))+S[3]+4107603335&4294967295,M=B+(D<<14&4294967295|D>>>18),D=R+(B^N&(M^B))+S[8]+1163531501&4294967295,R=M+(D<<20&4294967295|D>>>12),D=N+(M^B&(R^M))+S[13]+2850285829&4294967295,N=R+(D<<5&4294967295|D>>>27),D=B+(R^M&(N^R))+S[2]+4243563512&4294967295,B=N+(D<<9&4294967295|D>>>23),D=M+(N^R&(B^N))+S[7]+1735328473&4294967295,M=B+(D<<14&4294967295|D>>>18),D=R+(B^N&(M^B))+S[12]+2368359562&4294967295,R=M+(D<<20&4294967295|D>>>12),D=N+(R^M^B)+S[5]+4294588738&4294967295,N=R+(D<<4&4294967295|D>>>28),D=B+(N^R^M)+S[8]+2272392833&4294967295,B=N+(D<<11&4294967295|D>>>21),D=M+(B^N^R)+S[11]+1839030562&4294967295,M=B+(D<<16&4294967295|D>>>16),D=R+(M^B^N)+S[14]+4259657740&4294967295,R=M+(D<<23&4294967295|D>>>9),D=N+(R^M^B)+S[1]+2763975236&4294967295,N=R+(D<<4&4294967295|D>>>28),D=B+(N^R^M)+S[4]+1272893353&4294967295,B=N+(D<<11&4294967295|D>>>21),D=M+(B^N^R)+S[7]+4139469664&4294967295,M=B+(D<<16&4294967295|D>>>16),D=R+(M^B^N)+S[10]+3200236656&4294967295,R=M+(D<<23&4294967295|D>>>9),D=N+(R^M^B)+S[13]+681279174&4294967295,N=R+(D<<4&4294967295|D>>>28),D=B+(N^R^M)+S[0]+3936430074&4294967295,B=N+(D<<11&4294967295|D>>>21),D=M+(B^N^R)+S[3]+3572445317&4294967295,M=B+(D<<16&4294967295|D>>>16),D=R+(M^B^N)+S[6]+76029189&4294967295,R=M+(D<<23&4294967295|D>>>9),D=N+(R^M^B)+S[9]+3654602809&4294967295,N=R+(D<<4&4294967295|D>>>28),D=B+(N^R^M)+S[12]+3873151461&4294967295,B=N+(D<<11&4294967295|D>>>21),D=M+(B^N^R)+S[15]+530742520&4294967295,M=B+(D<<16&4294967295|D>>>16),D=R+(M^B^N)+S[2]+3299628645&4294967295,R=M+(D<<23&4294967295|D>>>9),D=N+(M^(R|~B))+S[0]+4096336452&4294967295,N=R+(D<<6&4294967295|D>>>26),D=B+(R^(N|~M))+S[7]+1126891415&4294967295,B=N+(D<<10&4294967295|D>>>22),D=M+(N^(B|~R))+S[14]+2878612391&4294967295,M=B+(D<<15&4294967295|D>>>17),D=R+(B^(M|~N))+S[5]+4237533241&4294967295,R=M+(D<<21&4294967295|D>>>11),D=N+(M^(R|~B))+S[12]+1700485571&4294967295,N=R+(D<<6&4294967295|D>>>26),D=B+(R^(N|~M))+S[3]+2399980690&4294967295,B=N+(D<<10&4294967295|D>>>22),D=M+(N^(B|~R))+S[10]+4293915773&4294967295,M=B+(D<<15&4294967295|D>>>17),D=R+(B^(M|~N))+S[1]+2240044497&4294967295,R=M+(D<<21&4294967295|D>>>11),D=N+(M^(R|~B))+S[8]+1873313359&4294967295,N=R+(D<<6&4294967295|D>>>26),D=B+(R^(N|~M))+S[15]+4264355552&4294967295,B=N+(D<<10&4294967295|D>>>22),D=M+(N^(B|~R))+S[6]+2734768916&4294967295,M=B+(D<<15&4294967295|D>>>17),D=R+(B^(M|~N))+S[13]+1309151649&4294967295,R=M+(D<<21&4294967295|D>>>11),D=N+(M^(R|~B))+S[4]+4149444226&4294967295,N=R+(D<<6&4294967295|D>>>26),D=B+(R^(N|~M))+S[11]+3174756917&4294967295,B=N+(D<<10&4294967295|D>>>22),D=M+(N^(B|~R))+S[2]+718787259&4294967295,M=B+(D<<15&4294967295|D>>>17),D=R+(B^(M|~N))+S[9]+3951481745&4294967295,O.g[0]=O.g[0]+N&4294967295,O.g[1]=O.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,O.g[2]=O.g[2]+M&4294967295,O.g[3]=O.g[3]+B&4294967295}s.prototype.u=function(O,N){N===void 0&&(N=O.length);for(var R=N-this.blockSize,S=this.B,M=this.h,B=0;B<N;){if(M==0)for(;B<=R;)o(this,O,B),B+=this.blockSize;if(typeof O=="string"){for(;B<N;)if(S[M++]=O.charCodeAt(B++),M==this.blockSize){o(this,S),M=0;break}}else for(;B<N;)if(S[M++]=O[B++],M==this.blockSize){o(this,S),M=0;break}}this.h=M,this.o+=N},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var N=1;N<O.length-8;++N)O[N]=0;var R=8*this.o;for(N=O.length-8;N<O.length;++N)O[N]=R&255,R/=256;for(this.u(O),O=Array(16),N=R=0;4>N;++N)for(var S=0;32>S;S+=8)O[R++]=this.g[N]>>>S&255;return O};function u(O,N){var R=m;return Object.prototype.hasOwnProperty.call(R,O)?R[O]:R[O]=N(O)}function d(O,N){this.h=N;for(var R=[],S=!0,M=O.length-1;0<=M;M--){var B=O[M]|0;S&&B==N||(R[M]=B,S=!1)}this.g=R}var m={};function g(O){return-128<=O&&128>O?u(O,function(N){return new d([N|0],0>N?-1:0)}):new d([O|0],0>O?-1:0)}function y(O){if(isNaN(O)||!isFinite(O))return b;if(0>O)return I(y(-O));for(var N=[],R=1,S=0;O>=R;S++)N[S]=O/R|0,R*=4294967296;return new d(N,0)}function _(O,N){if(O.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(O.charAt(0)=="-")return I(_(O.substring(1),N));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(N,8)),S=b,M=0;M<O.length;M+=8){var B=Math.min(8,O.length-M),D=parseInt(O.substring(M,M+B),N);8>B?(B=y(Math.pow(N,B)),S=S.j(B).add(y(D))):(S=S.j(R),S=S.add(y(D)))}return S}var b=g(0),T=g(1),j=g(16777216);r=d.prototype,r.m=function(){if(k(this))return-I(this).m();for(var O=0,N=1,R=0;R<this.g.length;R++){var S=this.i(R);O+=(0<=S?S:4294967296+S)*N,N*=4294967296}return O},r.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(C(this))return"0";if(k(this))return"-"+I(this).toString(O);for(var N=y(Math.pow(O,6)),R=this,S="";;){var M=re(R,N).g;R=z(R,M.j(N));var B=((0<R.g.length?R.g[0]:R.h)>>>0).toString(O);if(R=M,C(R))return B+S;for(;6>B.length;)B="0"+B;S=B+S}},r.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function C(O){if(O.h!=0)return!1;for(var N=0;N<O.g.length;N++)if(O.g[N]!=0)return!1;return!0}function k(O){return O.h==-1}r.l=function(O){return O=z(this,O),k(O)?-1:C(O)?0:1};function I(O){for(var N=O.g.length,R=[],S=0;S<N;S++)R[S]=~O.g[S];return new d(R,~O.h).add(T)}r.abs=function(){return k(this)?I(this):this},r.add=function(O){for(var N=Math.max(this.g.length,O.g.length),R=[],S=0,M=0;M<=N;M++){var B=S+(this.i(M)&65535)+(O.i(M)&65535),D=(B>>>16)+(this.i(M)>>>16)+(O.i(M)>>>16);S=D>>>16,B&=65535,D&=65535,R[M]=D<<16|B}return new d(R,R[R.length-1]&-2147483648?-1:0)};function z(O,N){return O.add(I(N))}r.j=function(O){if(C(this)||C(O))return b;if(k(this))return k(O)?I(this).j(I(O)):I(I(this).j(O));if(k(O))return I(this.j(I(O)));if(0>this.l(j)&&0>O.l(j))return y(this.m()*O.m());for(var N=this.g.length+O.g.length,R=[],S=0;S<2*N;S++)R[S]=0;for(S=0;S<this.g.length;S++)for(var M=0;M<O.g.length;M++){var B=this.i(S)>>>16,D=this.i(S)&65535,Q=O.i(M)>>>16,de=O.i(M)&65535;R[2*S+2*M]+=D*de,J(R,2*S+2*M),R[2*S+2*M+1]+=B*de,J(R,2*S+2*M+1),R[2*S+2*M+1]+=D*Q,J(R,2*S+2*M+1),R[2*S+2*M+2]+=B*Q,J(R,2*S+2*M+2)}for(S=0;S<N;S++)R[S]=R[2*S+1]<<16|R[2*S];for(S=N;S<2*N;S++)R[S]=0;return new d(R,0)};function J(O,N){for(;(O[N]&65535)!=O[N];)O[N+1]+=O[N]>>>16,O[N]&=65535,N++}function X(O,N){this.g=O,this.h=N}function re(O,N){if(C(N))throw Error("division by zero");if(C(O))return new X(b,b);if(k(O))return N=re(I(O),N),new X(I(N.g),I(N.h));if(k(N))return N=re(O,I(N)),new X(I(N.g),N.h);if(30<O.g.length){if(k(O)||k(N))throw Error("slowDivide_ only works with positive integers.");for(var R=T,S=N;0>=S.l(O);)R=ee(R),S=ee(S);var M=ce(R,1),B=ce(S,1);for(S=ce(S,2),R=ce(R,2);!C(S);){var D=B.add(S);0>=D.l(O)&&(M=M.add(R),B=D),S=ce(S,1),R=ce(R,1)}return N=z(O,M.j(N)),new X(M,N)}for(M=b;0<=O.l(N);){for(R=Math.max(1,Math.floor(O.m()/N.m())),S=Math.ceil(Math.log(R)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),B=y(R),D=B.j(N);k(D)||0<D.l(O);)R-=S,B=y(R),D=B.j(N);C(B)&&(B=T),M=M.add(B),O=z(O,D)}return new X(M,O)}r.A=function(O){return re(this,O).h},r.and=function(O){for(var N=Math.max(this.g.length,O.g.length),R=[],S=0;S<N;S++)R[S]=this.i(S)&O.i(S);return new d(R,this.h&O.h)},r.or=function(O){for(var N=Math.max(this.g.length,O.g.length),R=[],S=0;S<N;S++)R[S]=this.i(S)|O.i(S);return new d(R,this.h|O.h)},r.xor=function(O){for(var N=Math.max(this.g.length,O.g.length),R=[],S=0;S<N;S++)R[S]=this.i(S)^O.i(S);return new d(R,this.h^O.h)};function ee(O){for(var N=O.g.length+1,R=[],S=0;S<N;S++)R[S]=O.i(S)<<1|O.i(S-1)>>>31;return new d(R,O.h)}function ce(O,N){var R=N>>5;N%=32;for(var S=O.g.length-R,M=[],B=0;B<S;B++)M[B]=0<N?O.i(B+R)>>>N|O.i(B+R+1)<<32-N:O.i(B+R);return new d(M,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,IE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=_,os=d}).apply(typeof N0<"u"?N0:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kE,rc,DE,_h,cp,OE,PE,ME;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,w){return h==Array.prototype||h==Object.prototype||(h[v]=w.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var v=0;v<h.length;++v){var w=h[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function o(h,v){if(v)e:{var w=s;h=h.split(".");for(var A=0;A<h.length-1;A++){var q=h[A];if(!(q in w))break e;w=w[q]}h=h[h.length-1],A=w[h],v=v(A),v!=A&&v!=null&&e(w,h,{configurable:!0,writable:!0,value:v})}}function u(h,v){h instanceof String&&(h+="");var w=0,A=!1,q={next:function(){if(!A&&w<h.length){var Z=w++;return{value:v(Z,h[Z]),done:!1}}return A=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(h){return h||function(){return u(this,function(v,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function g(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function y(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function _(h,v,w){return h.call.apply(h.bind,arguments)}function b(h,v,w){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,A),h.apply(v,q)}}return function(){return h.apply(v,arguments)}}function T(h,v,w){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:b,T.apply(null,arguments)}function j(h,v){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function C(h,v){function w(){}w.prototype=v.prototype,h.aa=v.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(A,q,Z){for(var he=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)he[Fe-2]=arguments[Fe];return v.prototype[q].apply(A,he)}}function k(h){const v=h.length;if(0<v){const w=Array(v);for(let A=0;A<v;A++)w[A]=h[A];return w}return[]}function I(h,v){for(let w=1;w<arguments.length;w++){const A=arguments[w];if(g(A)){const q=h.length||0,Z=A.length||0;h.length=q+Z;for(let he=0;he<Z;he++)h[q+he]=A[he]}else h.push(A)}}class z{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function J(h){return/^[\s\xa0]*$/.test(h)}function X(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function re(h){return re[" "](h),h}re[" "]=function(){};var ee=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function ce(h,v,w){for(const A in h)v.call(w,h[A],A,h)}function O(h,v){for(const w in h)v.call(void 0,h[w],w,h)}function N(h){const v={};for(const w in h)v[w]=h[w];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(h,v){let w,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(w in A)h[w]=A[w];for(let Z=0;Z<R.length;Z++)w=R[Z],Object.prototype.hasOwnProperty.call(A,w)&&(h[w]=A[w])}}function M(h){var v=1;h=h.split(":");const w=[];for(;0<v&&h.length;)w.push(h.shift()),v--;return h.length&&w.push(h.join(":")),w}function B(h){m.setTimeout(()=>{throw h},0)}function D(){var h=Ie;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Q{constructor(){this.h=this.g=null}add(v,w){const A=de.get();A.set(v,w),this.h?this.h.next=A:this.g=A,this.h=A}}var de=new z(()=>new Y,h=>h.reset());class Y{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let le,ye=!1,Ie=new Q,L=()=>{const h=m.Promise.resolve(void 0);le=()=>{h.then(oe)}};var oe=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(w){B(w)}var v=de;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}ye=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};m.addEventListener("test",w,v),m.removeEventListener("test",w,v)}catch{}return h}();function ke(h,v){if(ue.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(ee){e:{try{re(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else w=="mouseover"?v=h.fromElement:w=="mouseout"&&(v=h.toElement);this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ae[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ke.aa.h.call(this)}}C(ke,ue);var Ae={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var wt="closure_listenable_"+(1e6*Math.random()|0),H=0;function me(h,v,w,A,q){this.listener=h,this.proxy=null,this.src=v,this.type=w,this.capture=!!A,this.ha=q,this.key=++H,this.da=this.fa=!1}function Ge(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Vt(h){this.src=h,this.g={},this.h=0}Vt.prototype.add=function(h,v,w,A,q){var Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);var he=en(h,v,A,q);return-1<he?(v=h[he],w||(v.fa=!1)):(v=new me(v,this.src,Z,!!A,q),v.fa=w,h.push(v)),v};function ct(h,v){var w=v.type;if(w in h.g){var A=h.g[w],q=Array.prototype.indexOf.call(A,v,void 0),Z;(Z=0<=q)&&Array.prototype.splice.call(A,q,1),Z&&(Ge(v),h.g[w].length==0&&(delete h.g[w],h.h--))}}function en(h,v,w,A){for(var q=0;q<h.length;++q){var Z=h[q];if(!Z.da&&Z.listener==v&&Z.capture==!!w&&Z.ha==A)return q}return-1}var Ts="closure_lm_"+(1e6*Math.random()|0),Fo={};function Lc(h,v,w,A,q){if(Array.isArray(v)){for(var Z=0;Z<v.length;Z++)Lc(h,v[Z],w,A,q);return null}return w=Vc(w),h&&h[wt]?h.K(v,w,y(A)?!!A.capture:!1,q):Pn(h,v,w,!1,A,q)}function Pn(h,v,w,A,q,Z){if(!v)throw Error("Invalid event type");var he=y(q)?!!q.capture:!!q,Fe=Ea(h);if(Fe||(h[Ts]=Fe=new Vt(h)),w=Fe.add(v,w,A,he,Z),w.proxy)return w;if(A=Id(),w.proxy=A,A.src=h,A.listener=w,h.addEventListener)Ee||(q=he),q===void 0&&(q=!1),h.addEventListener(v.toString(),A,q);else if(h.attachEvent)h.attachEvent(bs(v.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Id(){function h(w){return v.call(h.src,h.listener,w)}const v=kd;return h}function qo(h,v,w,A,q){if(Array.isArray(v))for(var Z=0;Z<v.length;Z++)qo(h,v[Z],w,A,q);else A=y(A)?!!A.capture:!!A,w=Vc(w),h&&h[wt]?(h=h.i,v=String(v).toString(),v in h.g&&(Z=h.g[v],w=en(Z,w,A,q),-1<w&&(Ge(Z[w]),Array.prototype.splice.call(Z,w,1),Z.length==0&&(delete h.g[v],h.h--)))):h&&(h=Ea(h))&&(v=h.g[v.toString()],h=-1,v&&(h=en(v,w,A,q)),(w=-1<h?v[h]:null)&&wa(w))}function wa(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[wt])ct(v.i,h);else{var w=h.type,A=h.proxy;v.removeEventListener?v.removeEventListener(w,A,h.capture):v.detachEvent?v.detachEvent(bs(w),A):v.addListener&&v.removeListener&&v.removeListener(A),(w=Ea(v))?(ct(w,h),w.h==0&&(w.src=null,v[Ts]=null)):Ge(h)}}}function bs(h){return h in Fo?Fo[h]:Fo[h]="on"+h}function kd(h,v){if(h.da)h=!0;else{v=new ke(v,this);var w=h.listener,A=h.ha||h.src;h.fa&&wa(h),h=w.call(A,v)}return h}function Ea(h){return h=h[Ts],h instanceof Vt?h:null}var Ho="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vc(h){return typeof h=="function"?h:(h[Ho]||(h[Ho]=function(v){return h.handleEvent(v)}),h[Ho])}function mt(){fe.call(this),this.i=new Vt(this),this.M=this,this.F=null}C(mt,fe),mt.prototype[wt]=!0,mt.prototype.removeEventListener=function(h,v,w,A){qo(this,h,v,w,A)};function Xe(h,v){var w,A=h.F;if(A)for(w=[];A;A=A.F)w.push(A);if(h=h.M,A=v.type||v,typeof v=="string")v=new ue(v,h);else if(v instanceof ue)v.target=v.target||h;else{var q=v;v=new ue(A,h),S(v,q)}if(q=!0,w)for(var Z=w.length-1;0<=Z;Z--){var he=v.g=w[Z];q=xn(he,A,!0,v)&&q}if(he=v.g=h,q=xn(he,A,!0,v)&&q,q=xn(he,A,!1,v)&&q,w)for(Z=0;Z<w.length;Z++)he=v.g=w[Z],q=xn(he,A,!1,v)&&q}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var w=h.g[v],A=0;A<w.length;A++)Ge(w[A]);delete h.g[v],h.h--}}this.F=null},mt.prototype.K=function(h,v,w,A){return this.i.add(String(h),v,!1,w,A)},mt.prototype.L=function(h,v,w,A){return this.i.add(String(h),v,!0,w,A)};function xn(h,v,w,A){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,Z=0;Z<v.length;++Z){var he=v[Z];if(he&&!he.da&&he.capture==w){var Fe=he.listener,Dt=he.ha||he.src;he.fa&&ct(h.i,he),q=Fe.call(Dt,A)!==!1&&q}}return q&&!A.defaultPrevented}function tn(h,v,w){if(typeof h=="function")w&&(h=T(h,w));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:m.setTimeout(h,v||0)}function Bc(h){h.g=tn(()=>{h.g=null,h.i&&(h.i=!1,Bc(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Dd extends fe{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Bc(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xs(h){fe.call(this),this.h=h,this.g={}}C(xs,fe);var As=[];function Ss(h){ce(h.g,function(v,w){this.g.hasOwnProperty(w)&&wa(v)},h),h.g={}}xs.prototype.N=function(){xs.aa.N.call(this),Ss(this)},xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xn=m.JSON.stringify,Ta=m.JSON.parse,Cs=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function $o(){}$o.prototype.h=null;function Go(h){return h.h||(h.h=h.i())}function Yo(){}var Br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zr(){ue.call(this,"d")}C(zr,ue);function Ko(){ue.call(this,"c")}C(Ko,ue);var hr={},Qo=null;function Ai(){return Qo=Qo||new mt}hr.La="serverreachability";function ba(h){ue.call(this,hr.La,h)}C(ba,ue);function Si(h){const v=Ai();Xe(v,new ba(v))}hr.STAT_EVENT="statevent";function zc(h,v){ue.call(this,hr.STAT_EVENT,h),this.stat=v}C(zc,ue);function ot(h){const v=Ai();Xe(v,new zc(v,h))}hr.Ma="timingevent";function kt(h,v){ue.call(this,hr.Ma,h),this.size=v}C(kt,ue);function St(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},v)}function Mn(){this.g=!0}Mn.prototype.xa=function(){this.g=!1};function Wo(h,v,w,A,q,Z){h.info(function(){if(h.g)if(Z)for(var he="",Fe=Z.split("&"),Dt=0;Dt<Fe.length;Dt++){var qe=Fe[Dt].split("=");if(1<qe.length){var zt=qe[0];qe=qe[1];var Ot=zt.split("_");he=2<=Ot.length&&Ot[1]=="type"?he+(zt+"="+qe+"&"):he+(zt+"=redacted&")}}else he=null;else he=Z;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+v+`
`+w+`
`+he})}function Od(h,v,w,A,q,Z,he){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+v+`
`+w+`
`+Z+" "+he})}function Ci(h,v,w,A){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Rs(h,w)+(A?" "+A:"")})}function Fc(h,v){h.info(function(){return"TIMEOUT: "+v})}Mn.prototype.info=function(){};function Rs(h,v){if(!h.g)return v;if(!v)return null;try{var w=JSON.parse(v);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var A=w[h];if(!(2>A.length)){var q=A[1];if(Array.isArray(q)&&!(1>q.length)){var Z=q[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var he=1;he<q.length;he++)q[he]=""}}}}return Xn(w)}catch{return v}}var Ri={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dr;function fr(){}C(fr,$o),fr.prototype.g=function(){return new XMLHttpRequest},fr.prototype.i=function(){return{}},dr=new fr;function hn(h,v,w,A){this.j=h,this.i=v,this.l=w,this.R=A||1,this.U=new xs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Et}function Et(){this.i=null,this.g="",this.h=!1}var Xo={},xa={};function Zn(h,v,w){h.L=1,h.v=Ds(An(v)),h.m=w,h.P=!0,qr(h,null)}function qr(h,v){h.F=Date.now(),Ns(h),h.A=An(h.v);var w=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),rl(w.i,"t",A),h.C=0,w=h.j.J,h.h=new Et,h.g=iu(h.j,w?v:null,!h.m),0<h.O&&(h.M=new Dd(T(h.Y,h,h.g),h.O)),v=h.U,w=h.g,A=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(As[0]=q.toString()),q=As);for(var Z=0;Z<q.length;Z++){var he=Lc(w,q[Z],A||v.handleEvent,!1,v.h||v);if(!he)break;v.g[he.key]=he}v=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Si(),Wo(h.i,h.u,h.A,h.l,h.R,h.m)}hn.prototype.ca=function(h){h=h.target;const v=this.M;v&&Bn(h)==3?v.j():this.Y(h)},hn.prototype.Y=function(h){try{if(h==this.g)e:{const Ot=Bn(this.g);var v=this.g.Ba();const Xr=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||Wc(this.g)))){this.J||Ot!=4||v==7||(v==8||0>=Xr?Si(3):Si(2)),Ni(this);var w=this.g.Z();this.X=w;t:if(qc(this)){var A=Wc(this.g);h="";var q=A.length,Z=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gt(this),mr(this);var he="";break t}this.h.i=new m.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,h+=this.h.i.decode(A[v],{stream:!(Z&&v==q-1)});A.length=0,this.h.g+=h,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=w==200,Od(this.i,this.u,this.A,this.l,this.R,Ot,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Dt=this.g;if((Fe=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(Fe)){var qe=Fe;break t}}qe=null}if(w=qe)Ci(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,js(this,w);else{this.o=!1,this.s=3,ot(12),Gt(this),mr(this);break e}}if(this.P){w=!0;let Yt;for(;!this.J&&this.C<he.length;)if(Yt=Hc(this,he),Yt==xa){Ot==4&&(this.s=4,ot(14),w=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Xo){this.s=4,ot(15),Ci(this.i,this.l,he,"[Invalid Chunk]"),w=!1;break}else Ci(this.i,this.l,Yt,null),js(this,Yt);if(qc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||he.length!=0||this.h.h||(this.s=1,ot(16),w=!1),this.o=this.o&&w,!w)Ci(this.i,this.l,he,"[Invalid Chunked Response]"),Gt(this),mr(this);else if(0<he.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),zs(zt),zt.M=!0,ot(11))}}else Ci(this.i,this.l,he,null),js(this,he);Ot==4&&Gt(this),this.o&&!this.J&&(Ot==4?tu(this.j,this):(this.o=!1,Ns(this)))}else Vd(this.g),w==400&&0<he.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Gt(this),mr(this)}}}catch{}finally{}};function qc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Hc(h,v){var w=h.C,A=v.indexOf(`
`,w);return A==-1?xa:(w=Number(v.substring(w,A)),isNaN(w)?Xo:(A+=1,A+w>v.length?xa:(v=v.slice(A,A+w),h.C=A+w,v)))}hn.prototype.cancel=function(){this.J=!0,Gt(this)};function Ns(h){h.S=Date.now()+h.I,$c(h,h.I)}function $c(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=St(T(h.ba,h),v)}function Ni(h){h.B&&(m.clearTimeout(h.B),h.B=null)}hn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Fc(this.i,this.A),this.L!=2&&(Si(),ot(17)),Gt(this),this.s=2,mr(this)):$c(this,this.S-h)};function mr(h){h.j.G==0||h.J||tu(h.j,h)}function Gt(h){Ni(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Ss(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function js(h,v){try{var w=h.j;if(w.G!=0&&(w.g==h||Zo(w.h,h))){if(!h.K&&Zo(w.h,h)&&w.G==3){try{var A=w.Da.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)Ma(w),Oa(w);else break e;ll(w),ot(18)}}else w.za=q[1],0<w.za-w.T&&37500>q[2]&&w.F&&w.v==0&&!w.C&&(w.C=St(T(w.Za,w),6e3));if(1>=Sa(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Wr(w,11)}else if((h.K||w.g==h)&&Ma(w),!J(v))for(q=w.Da.g.parse(v),v=0;v<q.length;v++){let qe=q[v];if(w.T=qe[0],qe=qe[1],w.G==2)if(qe[0]=="c"){w.K=qe[1],w.ia=qe[2];const zt=qe[3];zt!=null&&(w.la=zt,w.j.info("VER="+w.la));const Ot=qe[4];Ot!=null&&(w.Aa=Ot,w.j.info("SVER="+w.Aa));const Xr=qe[5];Xr!=null&&typeof Xr=="number"&&0<Xr&&(A=1.5*Xr,w.L=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const Yt=h.g;if(Yt){const Er=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Er){var Z=A.h;Z.g||Er.indexOf("spdy")==-1&&Er.indexOf("quic")==-1&&Er.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Ca(Z,Z.h),Z.h=null))}if(A.D){const ul=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(A.ya=ul,et(A.I,A.D,ul))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),A=w;var he=h;if(A.qa=ru(A,A.J?A.ia:null,A.W),he.K){dn(A.h,he);var Fe=he,Dt=A.L;Dt&&(Fe.I=Dt),Fe.B&&(Ni(Fe),Ns(Fe)),A.g=he}else Jc(A);0<w.i.length&&Pa(w)}else qe[0]!="stop"&&qe[0]!="close"||Wr(w,7);else w.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Wr(w,7):al(w):qe[0]!="noop"&&w.l&&w.l.ta(qe),w.v=0)}}Si(4)}catch{}}var Gc=class{constructor(h,v){this.g=h,this.map=v}};function Hr(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Aa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Sa(h){return h.h?1:h.g?h.g.size:0}function Zo(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Ca(h,v){h.g?h.g.add(v):h.h=v}function dn(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Hr.prototype.cancel=function(){if(this.i=Jo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Jo(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const w of h.g.values())v=v.concat(w.D);return v}return k(h.i)}function Pd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var v=[],w=h.length,A=0;A<w;A++)v.push(h[A]);return v}v=[],w=0;for(A in h)v[w++]=h[A];return v}function Ra(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var v=[];h=h.length;for(var w=0;w<h;w++)v.push(w);return v}v=[],w=0;for(const A in h)v[w++]=A;return v}}}function el(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var w=Ra(h),A=Pd(h),q=A.length,Z=0;Z<q;Z++)v.call(void 0,A[Z],w&&w[Z],h)}var Is=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Md(h,v){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var A=h[w].indexOf("="),q=null;if(0<=A){var Z=h[w].substring(0,A);q=h[w].substring(A+1)}else Z=h[w];v(Z,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Ct(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ct){this.h=h.h,ks(this,h.j),this.o=h.o,this.g=h.g,ji(this,h.s),this.l=h.l;var v=h.i,w=new Gr;w.i=v.i,v.g&&(w.g=new Map(v.g),w.h=v.h),$r(this,w),this.m=h.m}else h&&(v=String(h).match(Is))?(this.h=!1,ks(this,v[1]||"",!0),this.o=Un(v[2]||""),this.g=Un(v[3]||"",!0),ji(this,v[4]),this.l=Un(v[5]||"",!0),$r(this,v[6]||"",!0),this.m=Un(v[7]||"")):(this.h=!1,this.i=new Gr(null,this.h))}Ct.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Os(v,tl,!0),":");var w=this.g;return(w||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Os(v,tl,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Os(w,w.charAt(0)=="/"?Ud:nl,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Os(w,Na)),h.join("")};function An(h){return new Ct(h)}function ks(h,v,w){h.j=w?Un(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function ji(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function $r(h,v,w){v instanceof Gr?(h.i=v,Kc(h.i,h.h)):(w||(v=Os(v,Ld)),h.i=new Gr(v,h.h))}function et(h,v,w){h.i.set(v,w)}function Ds(h){return et(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Un(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Os(h,v,w){return typeof h=="string"?(h=encodeURI(h).replace(v,Yc),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Yc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var tl=/[#\/\?@]/g,nl=/[#\?:]/g,Ud=/[#\?]/g,Ld=/[#\?@]/g,Na=/#/g;function Gr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Ln(h){h.g||(h.g=new Map,h.h=0,h.i&&Md(h.i,function(v,w){h.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}r=Gr.prototype,r.add=function(h,v){Ln(this),this.i=null,h=pr(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(v),this.h+=1,this};function Yr(h,v){Ln(h),v=pr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Kr(h,v){return Ln(h),v=pr(h,v),h.g.has(v)}r.forEach=function(h,v){Ln(this),this.g.forEach(function(w,A){w.forEach(function(q){h.call(v,q,A,this)},this)},this)},r.na=function(){Ln(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),w=[];for(let A=0;A<v.length;A++){const q=h[A];for(let Z=0;Z<q.length;Z++)w.push(v[A])}return w},r.V=function(h){Ln(this);let v=[];if(typeof h=="string")Kr(this,h)&&(v=v.concat(this.g.get(pr(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)v=v.concat(h[w])}return v},r.set=function(h,v){return Ln(this),this.i=null,h=pr(this,h),Kr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},r.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function rl(h,v,w){Yr(h,v),0<w.length&&(h.i=null,h.g.set(pr(h,v),k(w)),h.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var w=0;w<v.length;w++){var A=v[w];const Z=encodeURIComponent(String(A)),he=this.V(A);for(A=0;A<he.length;A++){var q=Z;he[A]!==""&&(q+="="+encodeURIComponent(String(he[A]))),h.push(q)}}return this.i=h.join("&")};function pr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Kc(h,v){v&&!h.j&&(Ln(h),h.i=null,h.g.forEach(function(w,A){var q=A.toLowerCase();A!=q&&(Yr(this,A),rl(this,q,w))},h)),h.j=v}function Ps(h,v){const w=new Mn;if(m.Image){const A=new Image;A.onload=j(Vn,w,"TestLoadImage: loaded",!0,v,A),A.onerror=j(Vn,w,"TestLoadImage: error",!1,v,A),A.onabort=j(Vn,w,"TestLoadImage: abort",!1,v,A),A.ontimeout=j(Vn,w,"TestLoadImage: timeout",!1,v,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else v(!1)}function Jn(h,v){const w=new Mn,A=new AbortController,q=setTimeout(()=>{A.abort(),Vn(w,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:A.signal}).then(Z=>{clearTimeout(q),Z.ok?Vn(w,"TestPingServer: ok",!0,v):Vn(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),Vn(w,"TestPingServer: error",!1,v)})}function Vn(h,v,w,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(w)}catch{}}function Ms(){this.g=new Cs}function gr(h,v,w){const A=w||"";try{el(h,function(q,Z){let he=q;y(q)&&(he=Xn(q)),v.push(A+Z+"="+encodeURIComponent(he))})}catch(q){throw v.push(A+"type="+encodeURIComponent("_badmap")),q}}function Ii(h){this.l=h.Ub||null,this.j=h.eb||!1}C(Ii,$o),Ii.prototype.g=function(){return new Qr(this.l,this.j)},Ii.prototype.i=function(h){return function(){return h}}({});function Qr(h,v){mt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Qr,mt),r=Qr.prototype,r.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,vr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||m).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yr(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;il(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function il(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?yr(this):vr(this),this.readyState==3&&il(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,yr(this))},r.Qa=function(h){this.g&&(this.response=h,yr(this))},r.ga=function(){this.g&&yr(this)};function yr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,vr(h)}r.setRequestHeader=function(h,v){this.u.append(h,v)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=v.next();return h.join(`\r
`)};function vr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function sl(h){let v="";return ce(h,function(w,A){v+=A,v+=":",v+=w,v+=`\r
`}),v}function Bt(h,v,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=sl(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):et(h,v,w))}function Qe(h){mt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Qe,mt);var ja=/^https?$/i,Us=["POST","PUT"];r=Qe.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,v,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dr.g(),this.v=this.o?Go(this.o):Go(dr),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(Z){Qc(this,Z);return}if(h=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)w.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Z of A.keys())w.set(Z,A.get(Z));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(Z=>Z.toLowerCase()=="content-type"),q=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Us,v,void 0))||A||q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,he]of w)this.g.setRequestHeader(Z,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ls(this),this.u=!0,this.g.send(h),this.u=!1}catch(Z){Qc(this,Z)}};function Qc(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Ia(h),_r(h)}function Ia(h){h.A||(h.A=!0,Xe(h,"complete"),Xe(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Xe(this,"complete"),Xe(this,"abort"),_r(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_r(this,!0)),Qe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ka(this):this.bb())},r.bb=function(){ka(this)};function ka(h){if(h.h&&typeof d<"u"&&(!h.v[1]||Bn(h)!=4||h.Z()!=2)){if(h.u&&Bn(h)==4)tn(h.Ea,0,h);else if(Xe(h,"readystatechange"),Bn(h)==4){h.h=!1;try{const he=h.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var A;if(A=he===0){var q=String(h.D).match(Is)[1]||null;!q&&m.self&&m.self.location&&(q=m.self.location.protocol.slice(0,-1)),A=!ja.test(q?q.toLowerCase():"")}w=A}if(w)Xe(h,"complete"),Xe(h,"success");else{h.m=6;try{var Z=2<Bn(h)?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.Z()+"]",Ia(h)}}finally{_r(h)}}}}function _r(h,v){if(h.g){Ls(h);const w=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Xe(h,"ready");try{w.onreadystatechange=A}catch{}}}function Ls(h){h.I&&(m.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function Bn(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Ta(v)}};function Wc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Vd(h){const v={};h=(h.g&&2<=Bn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(J(h[A]))continue;var w=M(h[A]);const q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Z=v[q]||[];v[q]=Z,Z.push(w)}O(v,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vs(h,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||v}function Da(h){this.Aa=0,this.i=[],this.j=new Mn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vs("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vs("baseRetryDelayMs",5e3,h),this.cb=Vs("retryDelaySeedMs",1e4,h),this.Wa=Vs("forwardChannelMaxRetries",2,h),this.wa=Vs("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Hr(h&&h.concurrentRequestLimit),this.Da=new Ms,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Da.prototype,r.la=8,r.G=1,r.connect=function(h,v,w,A){ot(0),this.W=h,this.H=v||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.I=ru(this,null,this.W),Pa(this)};function al(h){if(Xc(h),h.G==3){var v=h.U++,w=An(h.I);if(et(w,"SID",h.K),et(w,"RID",v),et(w,"TYPE","terminate"),Bs(h,w),v=new hn(h,h.j,v),v.L=2,v.v=Ds(An(w)),w=!1,m.navigator&&m.navigator.sendBeacon)try{w=m.navigator.sendBeacon(v.v.toString(),"")}catch{}!w&&m.Image&&(new Image().src=v.v,w=!0),w||(v.g=iu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ns(v)}nu(h)}function Oa(h){h.g&&(zs(h),h.g.cancel(),h.g=null)}function Xc(h){Oa(h),h.u&&(m.clearTimeout(h.u),h.u=null),Ma(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function Pa(h){if(!Aa(h.h)&&!h.s){h.s=!0;var v=h.Ga;le||L(),ye||(le(),ye=!0),Ie.add(v,h),h.B=0}}function Bd(h,v){return Sa(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=St(T(h.Ga,h,v),cl(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new hn(this,this.j,h);let Z=this.o;if(this.S&&(Z?(Z=N(Z),S(Z,this.S)):Z=this.S),this.m!==null||this.O||(q.H=Z,Z=null),this.P)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,4096<v){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=Zc(this,q,v),w=An(this.I),et(w,"RID",h),et(w,"CVER",22),this.D&&et(w,"X-HTTP-Session-Id",this.D),Bs(this,w),Z&&(this.O?v="headers="+encodeURIComponent(String(sl(Z)))+"&"+v:this.m&&Bt(w,this.m,Z)),Ca(this.h,q),this.Ua&&et(w,"TYPE","init"),this.P?(et(w,"$req",v),et(w,"SID","null"),q.T=!0,Zn(q,w,null)):Zn(q,w,v),this.G=2}}else this.G==3&&(h?ol(this,h):this.i.length==0||Aa(this.h)||ol(this))};function ol(h,v){var w;v?w=v.l:w=h.U++;const A=An(h.I);et(A,"SID",h.K),et(A,"RID",w),et(A,"AID",h.T),Bs(h,A),h.m&&h.o&&Bt(A,h.m,h.o),w=new hn(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Zc(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ca(h.h,w),Zn(w,A,v)}function Bs(h,v){h.H&&ce(h.H,function(w,A){et(v,A,w)}),h.l&&el({},function(w,A){et(v,A,w)})}function Zc(h,v,w){w=Math.min(h.i.length,w);var A=h.l?T(h.l.Na,h.l,h):null;e:{var q=h.i;let Z=-1;for(;;){const he=["count="+w];Z==-1?0<w?(Z=q[0].g,he.push("ofs="+Z)):Z=0:he.push("ofs="+Z);let Fe=!0;for(let Dt=0;Dt<w;Dt++){let qe=q[Dt].g;const zt=q[Dt].map;if(qe-=Z,0>qe)Z=Math.max(0,q[Dt].g-100),Fe=!1;else try{gr(zt,he,"req"+qe+"_")}catch{A&&A(zt)}}if(Fe){A=he.join("&");break e}}}return h=h.i.splice(0,w),v.D=h,A}function Jc(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;le||L(),ye||(le(),ye=!0),Ie.add(v,h),h.v=0}}function ll(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=St(T(h.Fa,h),cl(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,eu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=St(T(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),Oa(this),eu(this))};function zs(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function eu(h){h.g=new hn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=An(h.qa);et(v,"RID","rpc"),et(v,"SID",h.K),et(v,"AID",h.T),et(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&et(v,"TO",h.ja),et(v,"TYPE","xmlhttp"),Bs(h,v),h.m&&h.o&&Bt(v,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=Ds(An(v)),w.m=null,w.P=!0,qr(w,h)}r.Za=function(){this.C!=null&&(this.C=null,Oa(this),ll(this),ot(19))};function Ma(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function tu(h,v){var w=null;if(h.g==v){Ma(h),zs(h),h.g=null;var A=2}else if(Zo(h.h,v))w=v.D,dn(h.h,v),A=1;else return;if(h.G!=0){if(v.o)if(A==1){w=v.m?v.m.length:0,v=Date.now()-v.F;var q=h.B;A=Ai(),Xe(A,new kt(A,w)),Pa(h)}else Jc(h);else if(q=v.s,q==3||q==0&&0<v.X||!(A==1&&Bd(h,v)||A==2&&ll(h)))switch(w&&0<w.length&&(v=h.h,v.i=v.i.concat(w)),q){case 1:Wr(h,5);break;case 4:Wr(h,10);break;case 3:Wr(h,6);break;default:Wr(h,2)}}}function cl(h,v){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*v}function Wr(h,v){if(h.j.info("Error code "+v),v==2){var w=T(h.fb,h),A=h.Xa;const q=!A;A=new Ct(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||ks(A,"https"),Ds(A),q?Ps(A.toString(),w):Jn(A.toString(),w)}else ot(2);h.G=0,h.l&&h.l.sa(v),nu(h),Xc(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function nu(h){if(h.G=0,h.ka=[],h.l){const v=Jo(h.h);(v.length!=0||h.i.length!=0)&&(I(h.ka,v),I(h.ka,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.ra()}}function ru(h,v,w){var A=w instanceof Ct?An(w):new Ct(w);if(A.g!="")v&&(A.g=v+"."+A.g),ji(A,A.s);else{var q=m.location;A=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var Z=new Ct(null);A&&ks(Z,A),v&&(Z.g=v),q&&ji(Z,q),w&&(Z.l=w),A=Z}return w=h.D,v=h.ya,w&&v&&et(A,w,v),et(A,"VER",h.la),Bs(h,A),A}function iu(h,v,w){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new Qe(new Ii({eb:w})):new Qe(h.pa),v.Ha(h.J),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function su(){}r=su.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ua(){}Ua.prototype.g=function(h,v){return new fn(h,v)};function fn(h,v){mt.call(this),this.g=new Da(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!J(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!J(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new wr(this)}C(fn,mt),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){al(this.g)},fn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=Xn(h),h=w);v.i.push(new Gc(v.Ya++,h)),v.G==3&&Pa(v)},fn.prototype.N=function(){this.g.l=null,delete this.j,al(this.g),delete this.g,fn.aa.N.call(this)};function au(h){zr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const w in v){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}C(au,zr);function ou(){Ko.call(this),this.status=1}C(ou,Ko);function wr(h){this.g=h}C(wr,su),wr.prototype.ua=function(){Xe(this.g,"a")},wr.prototype.ta=function(h){Xe(this.g,new au(h))},wr.prototype.sa=function(h){Xe(this.g,new ou)},wr.prototype.ra=function(){Xe(this.g,"b")},Ua.prototype.createWebChannel=Ua.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,ME=function(){return new Ua},PE=function(){return Ai()},OE=hr,cp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ri.NO_ERROR=0,Ri.TIMEOUT=8,Ri.HTTP_ERROR=6,_h=Ri,Fr.COMPLETE="complete",DE=Fr,Yo.EventType=Br,Br.OPEN="a",Br.CLOSE="b",Br.ERROR="c",Br.MESSAGE="d",mt.prototype.listen=mt.prototype.K,rc=Yo,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,kE=Qe}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});const j0="@firebase/firestore",I0="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=new Lp("@firebase/firestore");function fo(){return ca.logLevel}function ve(r,...e){if(ca.logLevel<=Be.DEBUG){const t=e.map(zp);ca.debug(`Firestore (${Oo}): ${r}`,...t)}}function wi(r,...e){if(ca.logLevel<=Be.ERROR){const t=e.map(zp);ca.error(`Firestore (${Oo}): ${r}`,...t)}}function Eo(r,...e){if(ca.logLevel<=Be.WARN){const t=e.map(zp);ca.warn(`Firestore (${Oo}): ${r}`,...t)}}function zp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,UE(r,s,t)}function UE(r,e,t){let s=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw wi(s),new Error(s)}function We(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||UE(e,o,s)}function je(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(an.UNAUTHENTICATED))}shutdown(){}}class gR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yR{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let u=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new pi,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const g=u;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new pi)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string",31837,{l:s}),new LE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new an(e)}}class vR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=an.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _R{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new vR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class k0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const s=u=>{u.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new k0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new k0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=ER(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function Pe(r,e){return r<e?-1:r>e?1:0}function up(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return Pe(s,o);{const u=VE(),d=TR(u.encode(D0(r,t)),u.encode(D0(e,t)));return d!==0?d:Pe(s,o)}}t+=s>65535?2:1}return Pe(r.length,e.length)}function D0(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function TR(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Pe(r[t],e[t]);return Pe(r.length,e.length)}function To(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=-62135596800,P0=1e6;class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*P0);return new Ut(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<O0)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/P0}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-O0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Ut(0,0))}static max(){return new Ne(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="__name__";class Cr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ce(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Cr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=Cr.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Pe(e.length,t.length)}static compareSegments(e,t){const s=Cr.isNumericId(e),o=Cr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Cr.extractNumericId(e).compare(Cr.extractNumericId(t)):up(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return os.fromString(e.substring(4,e.length-2))}}class at extends Cr{construct(e,t,s){return new at(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new at(t)}static emptyPath(){return new at([])}}const bR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Cr{construct(e,t,s){return new Zt(e,t,s)}static isValidIdentifier(e){return bR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M0}static keyField(){return new Zt([M0])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ge(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ge(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ge(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(u(),o++)}if(u(),d)throw new ge(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(at.fromString(e))}static fromName(e){return new Te(at.fromString(e).popFirst(5))}static empty(){return new Te(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new at(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=-1;function xR(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(s===1e9?new Ut(t+1,0):new Ut(t,s));return new us(o,Te.empty(),e)}function AR(r){return new us(r.readTime,r.key,gc)}class us{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new us(Ne.min(),Te.empty(),gc)}static max(){return new us(Ne.max(),Te.empty(),gc)}}function SR(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(r.documentKey,e.documentKey),t!==0?t:Pe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(r){if(r.code!==ie.FAILED_PRECONDITION||r.message!==CR)throw r;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,s)=>{t(e)})}static reject(e){return new ae((t,s)=>{s(e)})}static waitFor(e){return new ae((t,s)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},g=>s(g))}),d=!0,u===o&&t()})}static or(e){let t=ae.resolve(!1);for(const s of e)t=t.next(o=>o?ae.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,u)=>{s.push(t.call(this,o,u))}),this.waitFor(s)}static mapArray(e,t){return new ae((s,o)=>{const u=e.length,d=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;t(e[y]).next(_=>{d[y]=_,++m,m===u&&s(d)},_=>o(_))}})}static doWhile(e,t){return new ae((s,o)=>{const u=()=>{e()===!0?t().next(()=>{u()},o):s()};u()})}}function NR(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Mo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>t.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}nd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp=-1;function rd(r){return r==null}function kh(r){return r===0&&1/r==-1/0}function jR(r){return typeof r=="number"&&Number.isInteger(r)&&!kh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="";function IR(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=U0(e)),e=kR(r.get(t),e);return U0(e)}function kR(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":t+="";break;case zE:t+="";break;default:t+=u}}return t}function U0(r){return r+zE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function vs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function FE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??Xt.RED,this.left=o??Xt.EMPTY,this.right=u??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Xt(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,s,o,u){return this}insert(e,t,s){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new V0(this.data.getIterator())}getIteratorFrom(e){return new V0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class V0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Lt(Zt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new qE("Invalid base64 string: "+u):u}}(e);return new Jt(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new Jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const DR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(r){if(We(!!r,39018),typeof r=="string"){let e=0;const t=DR.exec(r);if(We(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(r.seconds),nanos:At(r.nanos)}}function At(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ds(r){return typeof r=="string"?Jt.fromBase64String(r):Jt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="server_timestamp",$E="__type__",GE="__previous_value__",YE="__local_write_time__";function qp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[$E])===null||t===void 0?void 0:t.stringValue)===HE}function id(r){const e=r.mapValue.fields[GE];return qp(e)?id(e):e}function yc(r){const e=hs(r.mapValue.fields[YE].timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,t,s,o,u,d,m,g,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=_}}const Dh="(default)";class vc{constructor(e,t){this.projectId=e,this.database=t||Dh}static empty(){return new vc("","")}get isDefaultDatabase(){return this.database===Dh}isEqual(e){return e instanceof vc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="__type__",PR="__max__",hh={mapValue:{}},QE="__vector__",Oh="value";function fs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qp(r)?4:UR(r)?9007199254740991:MR(r)?10:11:Ce(28295,{value:r})}function Or(r,e){if(r===e)return!0;const t=fs(r);if(t!==fs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return yc(r).isEqual(yc(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=hs(o.timestampValue),m=hs(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return ds(o.bytesValue).isEqual(ds(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return At(o.geoPointValue.latitude)===At(u.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return At(o.integerValue)===At(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=At(o.doubleValue),m=At(u.doubleValue);return d===m?kh(d)===kh(m):isNaN(d)&&isNaN(m)}return!1}(r,e);case 9:return To(r.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:case 11:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(L0(d)!==L0(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!Or(d[g],m[g])))return!1;return!0}(r,e);default:return Ce(52216,{left:r})}}function _c(r,e){return(r.values||[]).find(t=>Or(t,e))!==void 0}function bo(r,e){if(r===e)return 0;const t=fs(r),s=fs(e);if(t!==s)return Pe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(r.booleanValue,e.booleanValue);case 2:return function(u,d){const m=At(u.integerValue||u.doubleValue),g=At(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(r,e);case 3:return B0(r.timestampValue,e.timestampValue);case 4:return B0(yc(r),yc(e));case 5:return up(r.stringValue,e.stringValue);case 6:return function(u,d){const m=ds(u),g=ds(d);return m.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),g=d.split("/");for(let y=0;y<m.length&&y<g.length;y++){const _=Pe(m[y],g[y]);if(_!==0)return _}return Pe(m.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,d){const m=Pe(At(u.latitude),At(d.latitude));return m!==0?m:Pe(At(u.longitude),At(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return z0(r.arrayValue,e.arrayValue);case 10:return function(u,d){var m,g,y,_;const b=u.fields||{},T=d.fields||{},j=(m=b[Oh])===null||m===void 0?void 0:m.arrayValue,C=(g=T[Oh])===null||g===void 0?void 0:g.arrayValue,k=Pe(((y=j==null?void 0:j.values)===null||y===void 0?void 0:y.length)||0,((_=C==null?void 0:C.values)===null||_===void 0?void 0:_.length)||0);return k!==0?k:z0(j,C)}(r.mapValue,e.mapValue);case 11:return function(u,d){if(u===hh.mapValue&&d===hh.mapValue)return 0;if(u===hh.mapValue)return 1;if(d===hh.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=d.fields||{},_=Object.keys(y);g.sort(),_.sort();for(let b=0;b<g.length&&b<_.length;++b){const T=up(g[b],_[b]);if(T!==0)return T;const j=bo(m[g[b]],y[_[b]]);if(j!==0)return j}return Pe(g.length,_.length)}(r.mapValue,e.mapValue);default:throw Ce(23264,{Pe:t})}}function B0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Pe(r,e);const t=hs(r),s=hs(e),o=Pe(t.seconds,s.seconds);return o!==0?o:Pe(t.nanos,s.nanos)}function z0(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=bo(t[o],s[o]);if(u)return u}return Pe(t.length,s.length)}function xo(r){return hp(r)}function hp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=hs(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return ds(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Te.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=hp(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${hp(t.fields[d])}`;return o+"}"}(r.mapValue):Ce(61005,{value:r})}function wh(r){switch(fs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=id(r);return e?16+wh(e):16;case 5:return 2*r.stringValue.length;case 6:return ds(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+wh(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return vs(s.fields,(u,d)=>{o+=u.length+wh(d)}),o}(r.mapValue);default:throw Ce(13486,{value:r})}}function F0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function dp(r){return!!r&&"integerValue"in r}function Hp(r){return!!r&&"arrayValue"in r}function q0(r){return!!r&&"nullValue"in r}function H0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Eh(r){return!!r&&"mapValue"in r}function MR(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[KE])===null||t===void 0?void 0:t.stringValue)===QE}function lc(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return vs(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=lc(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lc(r.arrayValue.values[t]);return e}return Object.assign({},r)}function UR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===PR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Eh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lc(t)}setAll(e){let t=Zt.emptyPath(),s={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}d?s[m.lastSegment()]=lc(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());Eh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Eh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){vs(t,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new bn(lc(this.value))}}function WE(r){const e=[];return vs(r.fields,(t,s)=>{const o=new Zt([t]);if(Eh(s)){const u=WE(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,s,o,u,d,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new on(e,0,Ne.min(),Ne.min(),Ne.min(),bn.empty(),0)}static newFoundDocument(e,t,s,o){return new on(e,1,t,Ne.min(),s,o,0)}static newNoDocument(e,t){return new on(e,2,t,Ne.min(),Ne.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Ne.min(),Ne.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t){this.position=e,this.inclusive=t}}function $0(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],d=r.position[o];if(u.field.isKeyField()?s=Te.comparator(Te.fromName(d.referenceValue),t.key):s=bo(d,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function G0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Or(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t="asc"){this.field=e,this.dir=t}}function LR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{}class It extends XE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new BR(e,t,s):t==="array-contains"?new qR(e,s):t==="in"?new HR(e,s):t==="not-in"?new $R(e,s):t==="array-contains-any"?new GR(e,s):new It(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new zR(e,s):new FR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bo(t,this.value)):t!==null&&fs(this.value)===fs(t)&&this.matchesComparison(bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends XE{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new cr(e,t)}matches(e){return ZE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ZE(r){return r.op==="and"}function JE(r){return VR(r)&&ZE(r)}function VR(r){for(const e of r.filters)if(e instanceof cr)return!1;return!0}function fp(r){if(r instanceof It)return r.field.canonicalString()+r.op.toString()+xo(r.value);if(JE(r))return r.filters.map(e=>fp(e)).join(",");{const e=r.filters.map(t=>fp(t)).join(",");return`${r.op}(${e})`}}function eT(r,e){return r instanceof It?function(s,o){return o instanceof It&&s.op===o.op&&s.field.isEqual(o.field)&&Or(s.value,o.value)}(r,e):r instanceof cr?function(s,o){return o instanceof cr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,d,m)=>u&&eT(d,o.filters[m]),!0):!1}(r,e):void Ce(19439)}function tT(r){return r instanceof It?function(t){return`${t.field.canonicalString()} ${t.op} ${xo(t.value)}`}(r):r instanceof cr?function(t){return t.op.toString()+" {"+t.getFilters().map(tT).join(" ,")+"}"}(r):"Filter"}class BR extends It{constructor(e,t,s){super(e,t,s),this.key=Te.fromName(s.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class zR extends It{constructor(e,t){super(e,"in",t),this.keys=nT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class FR extends It{constructor(e,t){super(e,"not-in",t),this.keys=nT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nT(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Te.fromName(s.referenceValue))}class qR extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hp(t)&&_c(t.arrayValue,this.value)}}class HR extends It{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_c(this.value.arrayValue,t)}}class $R extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(_c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_c(this.value.arrayValue,t)}}class GR extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>_c(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t=null,s=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.Ie=null}}function Y0(r,e=null,t=[],s=[],o=null,u=null,d=null){return new YR(r,e,t,s,o,u,d)}function $p(r){const e=je(r);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>fp(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),rd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>xo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>xo(s)).join(",")),e.Ie=t}return e.Ie}function Gp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!LR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!eT(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!G0(r.startAt,e.startAt)&&G0(r.endAt,e.endAt)}function mp(r){return Te.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,t=null,s=[],o=[],u=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function KR(r,e,t,s,o,u,d,m){return new Uo(r,e,t,s,o,u,d,m)}function Yp(r){return new Uo(r)}function K0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function rT(r){return r.collectionGroup!==null}function cc(r){const e=je(r);if(e.Ee===null){e.Ee=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Lt(Zt.comparator);return d.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new wc(u,s))}),t.has(Zt.keyField().canonicalString())||e.Ee.push(new wc(Zt.keyField(),s))}return e.Ee}function Ir(r){const e=je(r);return e.de||(e.de=QR(e,cc(r))),e.de}function QR(r,e){if(r.limitType==="F")return Y0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new wc(o.field,u)});const t=r.endAt?new Ph(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Ph(r.startAt.position,r.startAt.inclusive):null;return Y0(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function pp(r,e){const t=r.filters.concat([e]);return new Uo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Mh(r,e,t){return new Uo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function sd(r,e){return Gp(Ir(r),Ir(e))&&r.limitType===e.limitType}function iT(r){return`${$p(Ir(r))}|lt:${r.limitType}`}function mo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>tT(o)).join(", ")}]`),rd(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>xo(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>xo(o)).join(",")),`Target(${s})`}(Ir(r))}; limitType=${r.limitType})`}function ad(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Te.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of cc(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(d,m,g){const y=$0(d,m,g);return d.inclusive?y<=0:y<0}(s.startAt,cc(s),o)||s.endAt&&!function(d,m,g){const y=$0(d,m,g);return d.inclusive?y>=0:y>0}(s.endAt,cc(s),o))}(r,e)}function WR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function sT(r){return(e,t)=>{let s=!1;for(const o of cc(r)){const u=XR(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function XR(r,e,t){const s=r.field.isKeyField()?Te.comparator(e.key,t.key):function(u,d,m){const g=d.data.field(u),y=m.data.field(u);return g!==null&&y!==null?bo(g,y):Ce(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ce(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){vs(this.inner,(t,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return FE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new ft(Te.comparator);function Ei(){return ZR}const aT=new ft(Te.comparator);function ic(...r){let e=aT;for(const t of r)e=e.insert(t.key,t);return e}function oT(r){let e=aT;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ia(){return uc()}function lT(){return uc()}function uc(){return new ga(r=>r.toString(),(r,e)=>r.isEqual(e))}const JR=new ft(Te.comparator),eN=new Lt(Te.comparator);function ze(...r){let e=eN;for(const t of r)e=e.add(t);return e}const tN=new Lt(Pe);function nN(){return tN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kh(e)?"-0":e}}function cT(r){return{integerValue:""+r}}function uT(r,e){return jR(e)?cT(e):Kp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this._=void 0}}function rN(r,e,t){return r instanceof Ec?function(o,u){const d={fields:{[$E]:{stringValue:HE},[YE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&qp(u)&&(u=id(u)),u&&(d.fields[GE]=u),{mapValue:d}}(t,e):r instanceof Ao?dT(r,e):r instanceof So?fT(r,e):function(o,u){const d=hT(o,u),m=Q0(d)+Q0(o.Re);return dp(d)&&dp(o.Re)?cT(m):Kp(o.serializer,m)}(r,e)}function iN(r,e,t){return r instanceof Ao?dT(r,e):r instanceof So?fT(r,e):t}function hT(r,e){return r instanceof Tc?function(s){return dp(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Ec extends od{}class Ao extends od{constructor(e){super(),this.elements=e}}function dT(r,e){const t=mT(e);for(const s of r.elements)t.some(o=>Or(o,s))||t.push(s);return{arrayValue:{values:t}}}class So extends od{constructor(e){super(),this.elements=e}}function fT(r,e){let t=mT(e);for(const s of r.elements)t=t.filter(o=>!Or(o,s));return{arrayValue:{values:t}}}class Tc extends od{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Q0(r){return At(r.integerValue||r.doubleValue)}function mT(r){return Hp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t){this.field=e,this.transform=t}}function sN(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Ao&&o instanceof Ao||s instanceof So&&o instanceof So?To(s.elements,o.elements,Or):s instanceof Tc&&o instanceof Tc?Or(s.Re,o.Re):s instanceof Ec&&o instanceof Ec}(r.transform,e.transform)}class aN{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Th(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class cd{}function pT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new yT(r.key,sr.none()):new jc(r.key,r.data,sr.none());{const t=r.data,s=bn.empty();let o=new Lt(Zt.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);d===null&&u.length>1&&(u=u.popLast(),d=t.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new _s(r.key,s,new Dn(o.toArray()),sr.none())}}function oN(r,e,t){r instanceof jc?function(o,u,d){const m=o.value.clone(),g=X0(o.fieldTransforms,u,d.transformResults);m.setAll(g),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(r,e,t):r instanceof _s?function(o,u,d){if(!Th(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=X0(o.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(gT(o)),g.setAll(m),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,e,t):function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function hc(r,e,t,s){return r instanceof jc?function(u,d,m,g){if(!Th(u.precondition,d))return m;const y=u.value.clone(),_=Z0(u.fieldTransforms,g,d);return y.setAll(_),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null}(r,e,t,s):r instanceof _s?function(u,d,m,g){if(!Th(u.precondition,d))return m;const y=Z0(u.fieldTransforms,g,d),_=d.data;return _.setAll(gT(u)),_.setAll(y),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(b=>b.field))}(r,e,t,s):function(u,d,m){return Th(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(r,e,t)}function lN(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=hT(s.transform,o||null);u!=null&&(t===null&&(t=bn.empty()),t.set(s.field,u))}return t||null}function W0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&To(s,o,(u,d)=>sN(u,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class jc extends cd{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class _s extends cd{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function gT(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function X0(r,e,t){const s=new Map;We(r.length===t.length,32656,{Ve:t.length,me:r.length});for(let o=0;o<t.length;o++){const u=r[o],d=u.transform,m=e.data.field(u.field);s.set(u.field,iN(d,m,t[o]))}return s}function Z0(r,e,t){const s=new Map;for(const o of r){const u=o.transform,d=t.data.field(o.field);s.set(o.field,rN(u,d,e))}return s}class yT extends cd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cN extends cd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&oN(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=hc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=hc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=lT();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(o.key)?null:m;const g=pT(d,m);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Ne.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ze())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(t,s)=>W0(t,s))&&To(this.baseMutations,e.baseMutations,(t,s)=>W0(t,s))}}class Qp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){We(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return JR}();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new Qp(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,$e;function fN(r){switch(r){case ie.OK:return Ce(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ce(15467,{code:r})}}function vT(r){if(r===void 0)return wi("GRPC error has no .code"),ie.UNKNOWN;switch(r){case jt.OK:return ie.OK;case jt.CANCELLED:return ie.CANCELLED;case jt.UNKNOWN:return ie.UNKNOWN;case jt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case jt.INTERNAL:return ie.INTERNAL;case jt.UNAVAILABLE:return ie.UNAVAILABLE;case jt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case jt.NOT_FOUND:return ie.NOT_FOUND;case jt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case jt.ABORTED:return ie.ABORTED;case jt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case jt.DATA_LOSS:return ie.DATA_LOSS;default:return Ce(39323,{code:r})}}($e=jt||(jt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=new os([4294967295,4294967295],0);function J0(r){const e=VE().encode(r),t=new IE;return t.update(e),new Uint8Array(t.digest())}function ew(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new os([t,s],0),new os([o,u],0)]}class Wp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new sc(`Invalid padding: ${t}`);if(s<0)throw new sc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new sc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new sc(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=os.fromNumber(this.pe)}we(e,t,s){let o=e.add(t.multiply(os.fromNumber(s)));return o.compare(mN)===1&&(o=new os([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=J0(e),[s,o]=ew(t);for(let u=0;u<this.hashCount;u++){const d=this.we(s,o,u);if(!this.be(d))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Wp(u,o,t);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.pe===0)return;const t=J0(e),[s,o]=ew(t);for(let u=0;u<this.hashCount;u++){const d=this.we(s,o,u);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class sc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new ud(Ne.min(),o,new ft(Pe),Ei(),ze())}}class Ic{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ic(s,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t,s,o){this.De=e,this.removedTargetIds=t,this.key=s,this.ve=o}}class _T{constructor(e,t){this.targetId=e,this.Ce=t}}class wT{constructor(e,t,s=Jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class tw{constructor(){this.Fe=0,this.Me=nw(),this.xe=Jt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ze(),t=ze(),s=ze();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ce(38017,{changeType:u})}}),new Ic(this.xe,this.Oe,e,t,s)}Qe(){this.Ne=!1,this.Me=nw()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,We(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class pN{constructor(e){this.ze=e,this.je=new Map,this.He=Ei(),this.Je=dh(),this.Ye=dh(),this.Ze=new ft(Pe)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const s=this.rt(t);switch(e.state){case 0:this.it(t)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(t);break;case 3:this.it(t)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),s.ke(e.resumeToken));break;default:Ce(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((s,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,s=e.Ce.count,o=this._t(t);if(o){const u=o.target;if(mp(u))if(s===0){const d=new Te(u.path);this.tt(t,d,on.newNoDocument(d,Ne.min()))}else We(s===1,20013,{expectedCount:s});else{const d=this.ut(t);if(d!==s){const m=this.ct(e),g=m?this.lt(m,e,d):1;if(g!==0){this.st(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let d,m;try{d=ds(s).toUint8Array()}catch(g){if(g instanceof qE)return Eo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Wp(d,o,u)}catch(g){return Eo(g instanceof sc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.pe===0?null:m}lt(e,t,s){return t.Ce.count===s-this.Tt(e,t.targetId)?0:2}Tt(e,t){const s=this.ze.getRemoteKeysForTarget(t);let o=0;return s.forEach(u=>{const d=this.ze.Pt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.tt(t,u,null),o++)}),o}It(e){const t=new Map;this.je.forEach((u,d)=>{const m=this._t(d);if(m){if(u.current&&mp(m.target)){const g=new Te(m.target.path);this.Et(g).has(d)||this.dt(d,g)||this.tt(d,g,on.newNoDocument(g,e))}u.Le&&(t.set(d,u.qe()),u.Qe())}});let s=ze();this.Ye.forEach((u,d)=>{let m=!0;d.forEachWhile(g=>{const y=this._t(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.He.forEach((u,d)=>d.setReadTime(e));const o=new ud(e,t,this.Ze,this.He,s);return this.He=Ei(),this.Je=dh(),this.Ye=dh(),this.Ze=new ft(Pe),o}et(e,t){if(!this.it(e))return;const s=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,s),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),s&&(this.He=this.He.insert(t,s))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new tw,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Lt(Pe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Lt(Pe),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new tw),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function dh(){return new ft(Te.comparator)}function nw(){return new ft(Te.comparator)}const gN={asc:"ASCENDING",desc:"DESCENDING"},yN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vN={and:"AND",or:"OR"};class _N{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gp(r,e){return r.useProto3Json||rd(e)?e:{value:e}}function Uh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ET(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function wN(r,e){return Uh(r,e.toTimestamp())}function kr(r){return We(!!r,49232),Ne.fromTimestamp(function(t){const s=hs(t);return new Ut(s.seconds,s.nanos)}(r))}function Xp(r,e){return yp(r,e).canonicalString()}function yp(r,e){const t=function(o){return new at(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function TT(r){const e=at.fromString(r);return We(CT(e),10190,{key:e.toString()}),e}function vp(r,e){return Xp(r.databaseId,e.path)}function $m(r,e){const t=TT(e);if(t.get(1)!==r.databaseId.projectId)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Te(xT(t))}function bT(r,e){return Xp(r.databaseId,e)}function EN(r){const e=TT(r);return e.length===4?at.emptyPath():xT(e)}function _p(r){return new at(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function xT(r){return We(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function rw(r,e,t){return{name:vp(r,e),fields:t.value.mapValue.fields}}function TN(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ce(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(y,_){return y.useProto3Json?(We(_===void 0||typeof _=="string",58123),Jt.fromBase64String(_||"")):(We(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Jt.fromUint8Array(_||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(y){const _=y.code===void 0?ie.UNKNOWN:vT(y.code);return new ge(_,y.message||"")}(d);t=new wT(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=$m(r,s.document.name),u=kr(s.document.updateTime),d=s.document.createTime?kr(s.document.createTime):Ne.min(),m=new bn({mapValue:{fields:s.document.fields}}),g=on.newFoundDocument(o,u,d,m),y=s.targetIds||[],_=s.removedTargetIds||[];t=new bh(y,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=$m(r,s.document),u=s.readTime?kr(s.readTime):Ne.min(),d=on.newNoDocument(o,u),m=s.removedTargetIds||[];t=new bh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=$m(r,s.document),u=s.removedTargetIds||[];t=new bh([],u,o,null)}else{if(!("filter"in e))return Ce(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new dN(o,u),m=s.targetId;t=new _T(m,d)}}return t}function bN(r,e){let t;if(e instanceof jc)t={update:rw(r,e.key,e.value)};else if(e instanceof yT)t={delete:vp(r,e.key)};else if(e instanceof _s)t={update:rw(r,e.key,e.data),updateMask:kN(e.fieldMask)};else{if(!(e instanceof cN))return Ce(16599,{ft:e.type});t={verify:vp(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,d){const m=d.transform;if(m instanceof Ec)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ao)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof So)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Tc)return{fieldPath:d.field.canonicalString(),increment:m.Re};throw Ce(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:wN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ce(27497)}(r,e.precondition)),t}function xN(r,e){return r&&r.length>0?(We(e!==void 0,14353),r.map(t=>function(o,u){let d=o.updateTime?kr(o.updateTime):kr(u);return d.isEqual(Ne.min())&&(d=kr(u)),new aN(d,o.transformResults||[])}(t,e))):[]}function AN(r,e){return{documents:[bT(r,e.path)]}}function SN(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=bT(r,o);const u=function(y){if(y.length!==0)return ST(cr.create(y,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const d=function(y){if(y.length!==0)return y.map(_=>function(T){return{field:po(T.field),direction:NN(T.dir)}}(_))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=gp(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:o}}function CN(r){let e=EN(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){We(s===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];t.where&&(u=function(b){const T=AT(b);return T instanceof cr&&JE(T)?T.getFilters():[T]}(t.where));let d=[];t.orderBy&&(d=function(b){return b.map(T=>function(C){return new wc(go(C.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(T))}(t.orderBy));let m=null;t.limit&&(m=function(b){let T;return T=typeof b=="object"?b.value:b,rd(T)?null:T}(t.limit));let g=null;t.startAt&&(g=function(b){const T=!!b.before,j=b.values||[];return new Ph(j,T)}(t.startAt));let y=null;return t.endAt&&(y=function(b){const T=!b.before,j=b.values||[];return new Ph(j,T)}(t.endAt)),KR(e,o,d,u,m,"F",g,y)}function RN(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function AT(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=go(t.unaryFilter.field);return It.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=go(t.unaryFilter.field);return It.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=go(t.unaryFilter.field);return It.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=go(t.unaryFilter.field);return It.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}}(r):r.fieldFilter!==void 0?function(t){return It.create(go(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return cr.create(t.compositeFilter.filters.map(s=>AT(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}}(t.compositeFilter.op))}(r):Ce(30097,{filter:r})}function NN(r){return gN[r]}function jN(r){return yN[r]}function IN(r){return vN[r]}function po(r){return{fieldPath:r.canonicalString()}}function go(r){return Zt.fromServerFormat(r.fieldPath)}function ST(r){return r instanceof It?function(t){if(t.op==="=="){if(H0(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NAN"}};if(q0(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(H0(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NAN"}};if(q0(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(t.field),op:jN(t.op),value:t.value}}}(r):r instanceof cr?function(t){const s=t.getFilters().map(o=>ST(o));return s.length===1?s[0]:{compositeFilter:{op:IN(t.op),filters:s}}}(r):Ce(54877,{filter:r})}function kN(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function CT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t,s,o,u=Ne.min(),d=Ne.min(),m=Jt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.wt=e}}function ON(r){const e=CN({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Mh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.yn=new MN}addToCollectionParentIndex(e,t){return this.yn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(us.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(us.min())}updateCollectionGroup(e,t,s){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class MN{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Lt(at.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Lt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RT=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(RT,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Co(0)}static ir(){return new Co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="LruGarbageCollector",UN=1048576;function aw([r,e],[t,s]){const o=Pe(r,t);return o===0?Pe(e,s):o}class LN{constructor(e){this.cr=e,this.buffer=new Lt(aw),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();aw(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VN{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){ve(sw,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Mo(t)?ve(sw,"Ignoring IndexedDB error during garbage collection: ",t):await Po(t)}await this.Ir(3e5)})}}class BN{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(nd.le);const s=new LN(t);return this.Er.forEachTarget(e,o=>s.Pr(o.sequenceNumber)).next(()=>this.Er.Ar(e,o=>s.Pr(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Er.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(iw)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iw):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let s,o,u,d,m,g,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,d=Date.now(),this.nthSequenceNumber(e,o))).next(b=>(s=b,m=Date.now(),this.removeTargets(e,s,t))).next(b=>(u=b,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(b=>(y=Date.now(),fo()<=Be.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(y-g)+`ms
Total Duration: ${y-_}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b})))}}function zN(r,e){return new BN(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.changes=new ga(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ae.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&hc(s.mutation,o,Dn.empty(),Ut.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,ze()).next(()=>s))}getLocalViewOfDocuments(e,t,s=ze()){const o=ia();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(u=>{let d=ic();return u.forEach((m,g)=>{d=d.insert(m,g.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const s=ia();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,ze()))}populateOverlays(e,t,s){const o=[];return s.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,s,o){let u=Ei();const d=uc(),m=function(){return uc()}();return t.forEach((g,y)=>{const _=s.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof _s)?u=u.insert(y.key,y):_!==void 0?(d.set(y.key,_.mutation.getFieldMask()),hc(_.mutation,y,_.mutation.getFieldMask(),Ut.now())):d.set(y.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,u).next(g=>(g.forEach((y,_)=>d.set(y,_)),t.forEach((y,_)=>{var b;return m.set(y,new qN(_,(b=d.get(y))!==null&&b!==void 0?b:null))}),m))}recalculateAndSaveOverlays(e,t){const s=uc();let o=new ft((d,m)=>d-m),u=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(g=>{const y=t.get(g);if(y===null)return;let _=s.get(g)||Dn.empty();_=m.applyToLocalView(y,_),s.set(g,_);const b=(o.get(m.batchId)||ze()).add(g);o=o.insert(m.batchId,b)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,_=g.value,b=lT();_.forEach(T=>{if(!u.has(T)){const j=pT(t.get(T),s.get(T));j!==null&&b.set(T,j),u=u.add(T)}}),d.push(this.documentOverlayCache.saveOverlays(e,y,b))}return ae.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(d){return Te.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):ae.resolve(ia());let m=gc,g=u;return d.next(y=>ae.forEach(y,(_,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(_)?ae.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{g=g.insert(_,T)}))).next(()=>this.populateOverlays(e,y,u)).next(()=>this.computeViews(e,g,y,ze())).next(_=>({batchId:m,changes:oT(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(s=>{let o=ic();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let d=ic();return this.indexManager.getCollectionParents(e,u).next(m=>ae.forEach(m,g=>{const y=function(b,T){return new Uo(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(_=>{_.forEach((b,T)=>{d=d.insert(b,T)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o))).next(d=>{u.forEach((g,y)=>{const _=y.getKey();d.get(_)===null&&(d=d.insert(_,on.newInvalidDocument(_)))});let m=ic();return d.forEach((g,y)=>{const _=u.get(g);_!==void 0&&hc(_.mutation,y,Dn.empty(),Ut.now()),ad(t,y)&&(m=m.insert(g,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:kr(o.createTime)}}(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(o){return{name:o.name,query:ON(o.bundledQuery),readTime:kr(o.readTime)}}(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(){this.overlays=new ft(Te.comparator),this.Or=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ia();return ae.forEach(t,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,u)=>{this.St(e,t,u)}),ae.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Or.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Or.delete(s)),ae.resolve()}getOverlaysForCollection(e,t,s){const o=ia(),u=t.length+1,d=new Te(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new ft((y,_)=>y-_);const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let _=u.get(y.largestBatchId);_===null&&(_=ia(),u=u.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const m=ia(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,_)=>m.set(y,_)),!(m.size()>=o)););return ae.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Or.get(o.largestBatchId).delete(s.key);this.Or.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new hN(t,s));let u=this.Or.get(t);u===void 0&&(u=ze(),this.Or.set(t,u)),this.Or.set(t,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.Nr=new Lt($t.Br),this.Lr=new Lt($t.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const s=new $t(e,t);this.Nr=this.Nr.add(s),this.Lr=this.Lr.add(s)}qr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Qr(new $t(e,t))}$r(e,t){e.forEach(s=>this.removeReference(s,t))}Ur(e){const t=new Te(new at([])),s=new $t(t,e),o=new $t(t,e+1),u=[];return this.Lr.forEachInRange([s,o],d=>{this.Qr(d),u.push(d.key)}),u}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Te(new at([])),s=new $t(t,e),o=new $t(t,e+1);let u=ze();return this.Lr.forEachInRange([s,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new $t(e,0),s=this.Nr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class $t{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Te.comparator(e.key,t.key)||Pe(e.Gr,t.Gr)}static kr(e,t){return Pe(e.Gr,t.Gr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Lt($t.Br)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new uN(u,t,s,o);this.mutationQueue.push(d);for(const m of o)this.zr=this.zr.add(new $t(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ae.resolve(d)}lookupMutationBatch(e,t){return ae.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Hr(s),u=o<0?0:o;return ae.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Fp:this.Jn-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new $t(t,0),o=new $t(t,Number.POSITIVE_INFINITY),u=[];return this.zr.forEachInRange([s,o],d=>{const m=this.jr(d.Gr);u.push(m)}),ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Lt(Pe);return t.forEach(o=>{const u=new $t(o,0),d=new $t(o,Number.POSITIVE_INFINITY);this.zr.forEachInRange([u,d],m=>{s=s.add(m.Gr)})}),ae.resolve(this.Jr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;Te.isDocumentKey(u)||(u=u.child(""));const d=new $t(new Te(u),0);let m=new Lt(Pe);return this.zr.forEachWhile(g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Gr)),!0)},d),ae.resolve(this.Jr(m))}Jr(e){const t=[];return e.forEach(s=>{const o=this.jr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){We(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.zr;return ae.forEach(t.mutations,o=>{const u=new $t(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.zr=s})}Xn(e){}containsKey(e,t){const s=new $t(t,0),o=this.zr.firstAfterOrEqual(s);return ae.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.Zr=e,this.docs=function(){return new ft(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,d=this.Zr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ae.resolve(s?s.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let s=Ei();return t.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():on.newInvalidDocument(o))}),ae.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=Ei();const d=t.path,m=new Te(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:_}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||SR(AR(_),s)<=0||(o.has(_.key)||ad(t,_))&&(u=u.insert(_.key,_.mutableCopy()))}return ae.resolve(u)}getAllFromCollectionGroup(e,t,s,o){Ce(9500)}Xr(e,t){return ae.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new WN(this)}getSize(e){return ae.resolve(this.size)}}class WN extends FN{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.vr.addEntry(e,o)):this.vr.removeEntry(s)}),ae.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.persistence=e,this.ei=new ga(t=>$p(t),Gp),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.ti=0,this.ni=new Zp,this.targetCount=0,this.ri=Co.rr()}forEachTarget(e,t){return this.ei.forEach((s,o)=>t(o)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ti&&(this.ti=t),ae.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Co(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.ar(t),ae.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.ei.forEach((d,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.ei.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ae.waitFor(u).next(()=>o)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const s=this.ei.get(t)||null;return ae.resolve(s)}addMatchingKeys(e,t,s){return this.ni.qr(t,s),ae.resolve()}removeMatchingKeys(e,t,s){this.ni.$r(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),ae.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ni.Wr(t);return ae.resolve(s)}containsKey(e,t){return ae.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,t){this.ii={},this.overlays={},this.si=new nd(0),this.oi=!1,this.oi=!0,this._i=new YN,this.referenceDelegate=e(this),this.ai=new XN(this),this.indexManager=new PN,this.remoteDocumentCache=function(o){return new QN(o)}(s=>this.referenceDelegate.ui(s)),this.serializer=new DN(t),this.ci=new $N(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ii[e.toKey()];return s||(s=new KN(t,this.referenceDelegate),this.ii[e.toKey()]=s),s}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,s){ve("MemoryPersistence","Starting transaction:",e);const o=new ZN(this.si.next());return this.referenceDelegate.li(),s(o).next(u=>this.referenceDelegate.hi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Pi(e,t){return ae.or(Object.values(this.ii).map(s=>()=>s.containsKey(e,t)))}}class ZN extends RR{constructor(e){super(),this.currentSequenceNumber=e}}class Jp{constructor(e){this.persistence=e,this.Ti=new Zp,this.Ii=null}static Ei(e){return new Jp(e)}get di(){if(this.Ii)return this.Ii;throw Ce(60996)}addReference(e,t,s){return this.Ti.addReference(s,t),this.di.delete(s.toString()),ae.resolve()}removeReference(e,t,s){return this.Ti.removeReference(s,t),this.di.add(s.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(o=>this.di.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.di.add(u.toString()))}).next(()=>s.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.di,s=>{const o=Te.fromPath(s);return this.Ai(e,o).next(u=>{u||t.removeEntry(o,Ne.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return ae.or([()=>ae.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Lh{constructor(e,t){this.persistence=e,this.Ri=new ga(s=>IR(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=zN(this,t)}static Ei(e,t){return new Lh(e,t)}li(){}hi(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}Vr(e){let t=0;return this.Ar(e,s=>{t++}).next(()=>t)}Ar(e,t){return ae.forEach(this.Ri,(s,o)=>this.gr(e,s,o).next(u=>u?ae.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.Xr(e,d=>this.gr(e,d,t).next(m=>{m||(s++,u.removeEntry(d,Ne.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.Ri.set(s,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,s){return this.Ri.set(s,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),ae.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wh(e.data.value)),t}gr(e,t,s){return ae.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.Ri.get(t);return ae.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.ls=s,this.hs=o}static Ps(e,t){let s=ze(),o=ze();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new eg(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return QS()?8:NR(un())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.Rs(e,t).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.Vs(e,t,o,s).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new JN;return this.fs(e,t,d).next(m=>{if(u.result=m,this.Is)return this.gs(e,t,d,m.size)})}).next(()=>u.result)}gs(e,t,s,o){return s.documentReadCount<this.Es?(fo()<=Be.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ae.resolve()):(fo()<=Be.DEBUG&&ve("QueryEngine","Query:",mo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(fo()<=Be.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ir(t))):ae.resolve())}Rs(e,t){if(K0(t))return ae.resolve(null);let s=Ir(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Mh(t,null,"F"),s=Ir(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const d=ze(...u);return this.As.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(g=>{const y=this.ps(t,m);return this.ys(t,y,d,g.readTime)?this.Rs(e,Mh(t,null,"F")):this.ws(e,y,t,g)}))})))}Vs(e,t,s,o){return K0(t)||o.isEqual(Ne.min())?ae.resolve(null):this.As.getDocuments(e,s).next(u=>{const d=this.ps(t,u);return this.ys(t,d,s,o)?ae.resolve(null):(fo()<=Be.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),mo(t)),this.ws(e,d,t,xR(o,gc)).next(m=>m))})}ps(e,t){let s=new Lt(sT(e));return t.forEach((o,u)=>{ad(e,u)&&(s=s.add(u))}),s}ys(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}fs(e,t,s){return fo()<=Be.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",mo(t)),this.As.getDocumentsMatchingQuery(e,t,us.min(),s)}ws(e,t,s,o){return this.As.getDocumentsMatchingQuery(e,s,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="LocalStore",tj=3e8;class nj{constructor(e,t,s,o){this.persistence=e,this.bs=t,this.serializer=o,this.Ss=new ft(Pe),this.Ds=new ga(u=>$p(u),Gp),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(s)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HN(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function rj(r,e,t,s){return new nj(r,e,t,s)}async function jT(r,e){const t=je(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,t.Fs(e),t.mutationQueue.getAllMutationBatches(s))).next(u=>{const d=[],m=[];let g=ze();for(const y of o){d.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}for(const y of u){m.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(s,g).next(y=>({Ms:y,removedBatchIds:d,addedBatchIds:m}))})})}function ij(r,e){const t=je(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=t.Cs.newChangeBuffer({trackRemovals:!0});return function(m,g,y,_){const b=y.batch,T=b.keys();let j=ae.resolve();return T.forEach(C=>{j=j.next(()=>_.getEntry(g,C)).next(k=>{const I=y.docVersions.get(C);We(I!==null,48541),k.version.compareTo(I)<0&&(b.applyToRemoteDocument(k,y),k.isValidDocument()&&(k.setReadTime(y.commitVersion),_.addEntry(k)))})}),j.next(()=>m.mutationQueue.removeMutationBatch(g,b))}(t,s,e,u).next(()=>u.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let g=ze();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function IT(r){const e=je(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function sj(r,e){const t=je(r),s=e.snapshotVersion;let o=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Cs.newChangeBuffer({trackRemovals:!0});o=t.Ss;const m=[];e.targetChanges.forEach((_,b)=>{const T=o.get(b);if(!T)return;m.push(t.ai.removeMatchingKeys(u,_.removedDocuments,b).next(()=>t.ai.addMatchingKeys(u,_.addedDocuments,b)));let j=T.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?j=j.withResumeToken(Jt.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):_.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(_.resumeToken,s)),o=o.insert(b,j),function(k,I,z){return k.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=tj?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(T,j,_)&&m.push(t.ai.updateTargetData(u,j))});let g=Ei(),y=ze();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,_))}),m.push(aj(u,d,e.documentUpdates).next(_=>{g=_.xs,y=_.Os})),!s.isEqual(Ne.min())){const _=t.ai.getLastRemoteSnapshotVersion(u).next(b=>t.ai.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(_)}return ae.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,g,y)).next(()=>g)}).then(u=>(t.Ss=o,u))}function aj(r,e,t){let s=ze(),o=ze();return t.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let d=Ei();return t.forEach((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ne.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):ve(tg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)}),{xs:d,Os:o}})}function oj(r,e){const t=je(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Fp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function lj(r,e){const t=je(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.ai.getTargetData(s,e).next(u=>u?(o=u,ae.resolve(o)):t.ai.allocateTargetId(s).next(d=>(o=new is(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.ai.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Ss.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(s.targetId,s),t.Ds.set(e,s.targetId)),s})}async function wp(r,e,t){const s=je(r),o=s.Ss.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!Mo(d))throw d;ve(tg,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ss=s.Ss.remove(e),s.Ds.delete(o.target)}function ow(r,e,t){const s=je(r);let o=Ne.min(),u=ze();return s.persistence.runTransaction("Execute query","readwrite",d=>function(g,y,_){const b=je(g),T=b.Ds.get(_);return T!==void 0?ae.resolve(b.Ss.get(T)):b.ai.getTargetData(y,_)}(s,d,Ir(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.ai.getMatchingKeysForTargetId(d,m.targetId).next(g=>{u=g})}).next(()=>s.bs.getDocumentsMatchingQuery(d,e,t?o:Ne.min(),t?u:ze())).next(m=>(cj(s,WR(e),m),{documents:m,Ns:u})))}function cj(r,e,t){let s=r.vs.get(e)||Ne.min();t.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.vs.set(e,s)}class lw{constructor(){this.activeTargetIds=nN()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uj{constructor(){this.So=new lw,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,s){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new lw,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="ConnectivityMonitor";class uw{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){ve(cw,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){ve(cw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh=null;function Ep(){return fh===null?fh=function(){return 268435456+Math.round(2147483648*Math.random())}():fh++,"0x"+fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="RestConnection",dj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fj{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${s}/databases/${o}`,this.qo=this.databaseId.database===Dh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Qo(e,t,s,o,u){const d=Ep(),m=this.$o(e,t.toUriEncodedString());ve(Gm,`Sending RPC '${e}' ${d}:`,m,s);const g={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(g,o,u);const{host:y}=new URL(m),_=ma(y);return this.Ko(e,m,g,s,_).then(b=>(ve(Gm,`Received RPC '${e}' ${d}: `,b),b),b=>{throw Eo(Gm,`RPC '${e}' ${d} failed with error: `,b,"url: ",m,"request:",s),b})}Wo(e,t,s,o,u,d){return this.Qo(e,t,s,o,u)}Uo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}$o(e,t){const s=dj[e];return`${this.Lo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class pj extends fj{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,s,o,u){const d=Ep();return new Promise((m,g)=>{const y=new kE;y.setWithCredentials(!0),y.listenOnce(DE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case _h.NO_ERROR:const b=y.getResponseJson();ve(sn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),m(b);break;case _h.TIMEOUT:ve(sn,`RPC '${e}' ${d} timed out`),g(new ge(ie.DEADLINE_EXCEEDED,"Request time out"));break;case _h.HTTP_ERROR:const T=y.getStatus();if(ve(sn,`RPC '${e}' ${d} failed with status:`,T,"response text:",y.getResponseText()),T>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const C=j==null?void 0:j.error;if(C&&C.status&&C.message){const k=function(z){const J=z.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(J)>=0?J:ie.UNKNOWN}(C.status);g(new ge(k,C.message))}else g(new ge(ie.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ge(ie.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{s_:e,streamId:d,o_:y.getLastErrorCode(),__:y.getLastError()})}}finally{ve(sn,`RPC '${e}' ${d} completed.`)}});const _=JSON.stringify(o);ve(sn,`RPC '${e}' ${d} sending request:`,o),y.send(t,"POST",_,s,15)})}a_(e,t,s){const o=Ep(),u=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=ME(),m=PE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Uo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const _=u.join("");ve(sn,`Creating RPC '${e}' stream ${o}: ${_}`,g);const b=d.createWebChannel(_,g);let T=!1,j=!1;const C=new mj({Go:I=>{j?ve(sn,`Not sending because RPC '${e}' stream ${o} is closed:`,I):(T||(ve(sn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),T=!0),ve(sn,`RPC '${e}' stream ${o} sending:`,I),b.send(I))},zo:()=>b.close()}),k=(I,z,J)=>{I.listen(z,X=>{try{J(X)}catch(re){setTimeout(()=>{throw re},0)}})};return k(b,rc.EventType.OPEN,()=>{j||(ve(sn,`RPC '${e}' stream ${o} transport opened.`),C.t_())}),k(b,rc.EventType.CLOSE,()=>{j||(j=!0,ve(sn,`RPC '${e}' stream ${o} transport closed`),C.r_())}),k(b,rc.EventType.ERROR,I=>{j||(j=!0,Eo(sn,`RPC '${e}' stream ${o} transport errored. Name:`,I.name,"Message:",I.message),C.r_(new ge(ie.UNAVAILABLE,"The operation could not be completed")))}),k(b,rc.EventType.MESSAGE,I=>{var z;if(!j){const J=I.data[0];We(!!J,16349);const X=J,re=(X==null?void 0:X.error)||((z=X[0])===null||z===void 0?void 0:z.error);if(re){ve(sn,`RPC '${e}' stream ${o} received error:`,re);const ee=re.status;let ce=function(R){const S=jt[R];if(S!==void 0)return vT(S)}(ee),O=re.message;ce===void 0&&(ce=ie.INTERNAL,O="Unknown error status: "+ee+" with message "+re.message),j=!0,C.r_(new ge(ce,O)),b.close()}else ve(sn,`RPC '${e}' stream ${o} received:`,J),C.i_(J)}}),k(m,OE.STAT_EVENT,I=>{I.stat===cp.PROXY?ve(sn,`RPC '${e}' stream ${o} detected buffering proxy`):I.stat===cp.NOPROXY&&ve(sn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{C.n_()},0),C}}function Ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(r){return new _N(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,t,s=1e3,o=1.5,u=6e4){this.bi=e,this.timerId=t,this.u_=s,this.c_=o,this.l_=u,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),s=Math.max(0,Date.now()-this.T_),o=Math.max(0,t-s);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,o,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="PersistentStream";class DT{constructor(e,t,s,o,u,d,m,g){this.bi=e,this.R_=s,this.V_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new kT(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(wi(t.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.m_===t&&this.B_(s,o)},s=>{e(()=>{const o=new ge(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.L_(o)})})}B_(e,t){const s=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{s(()=>this.listener.jo())}),this.stream.Jo(()=>{s(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(o=>{s(()=>this.L_(o))}),this.stream.onMessage(o=>{s(()=>++this.p_==1?this.q_(o):this.onNext(o))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return ve(hw,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(ve(hw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gj extends DT{constructor(e,t,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,d),this.serializer=u}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=TN(this.serializer,e),s=function(u){if(!("targetChange"in u))return Ne.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Ne.min():d.readTime?kr(d.readTime):Ne.min()}(e);return this.listener.Q_(t,s)}U_(e){const t={};t.database=_p(this.serializer),t.addTarget=function(u,d){let m;const g=d.target;if(m=mp(g)?{documents:AN(u,g)}:{query:SN(u,g).gt},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=ET(u,d.resumeToken);const y=gp(u,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(Ne.min())>0){m.readTime=Uh(u,d.snapshotVersion.toTimestamp());const y=gp(u,d.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const s=RN(this.serializer,e);s&&(t.labels=s),this.F_(t)}K_(e){const t={};t.database=_p(this.serializer),t.removeTarget=e,this.F_(t)}}class yj extends DT{constructor(e,t,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,d),this.serializer=u}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=xN(e.writeResults,e.commitTime),s=kr(e.commitTime);return this.listener.j_(s,t)}H_(){const e={};e.database=_p(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>bN(this.serializer,s))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{}class _j extends vj{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.J_=!1}Y_(){if(this.J_)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,s,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.Qo(e,yp(t,s),o,u,d)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(ie.UNKNOWN,u.toString())})}Wo(e,t,s,o,u){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Wo(e,yp(t,s),o,d,m,u)).catch(d=>{throw d.name==="FirebaseError"?(d.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ge(ie.UNKNOWN,d.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class wj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(wi(t),this.ea=!1):ve("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="RemoteStore";class Ej{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=u,this.ca.vo(d=>{s.enqueueAndForget(async()=>{ya(this)&&(ve(ua,"Restarting streams for network reachability change."),await async function(g){const y=je(g);y.aa.add(4),await kc(y),y.la.set("Unknown"),y.aa.delete(4),await dd(y)}(this))})}),this.la=new wj(s,o)}}async function dd(r){if(ya(r))for(const e of r.ua)await e(!0)}async function kc(r){for(const e of r.ua)await e(!1)}function OT(r,e){const t=je(r);t._a.has(e.targetId)||(t._a.set(e.targetId,e),sg(t)?ig(t):Lo(t).b_()&&rg(t,e))}function ng(r,e){const t=je(r),s=Lo(t);t._a.delete(e),s.b_()&&PT(t,e),t._a.size===0&&(s.b_()?s.v_():ya(t)&&t.la.set("Unknown"))}function rg(r,e){if(r.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Lo(r).U_(e)}function PT(r,e){r.ha.Ke(e),Lo(r).K_(e)}function ig(r){r.ha=new pN({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r._a.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),Lo(r).start(),r.la.ta()}function sg(r){return ya(r)&&!Lo(r).w_()&&r._a.size>0}function ya(r){return je(r).aa.size===0}function MT(r){r.ha=void 0}async function Tj(r){r.la.set("Online")}async function bj(r){r._a.forEach((e,t)=>{rg(r,e)})}async function xj(r,e){MT(r),sg(r)?(r.la.ia(e),ig(r)):r.la.set("Unknown")}async function Aj(r,e,t){if(r.la.set("Online"),e instanceof wT&&e.state===2&&e.cause)try{await async function(o,u){const d=u.cause;for(const m of u.targetIds)o._a.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o._a.delete(m),o.ha.removeTarget(m))}(r,e)}catch(s){ve(ua,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Vh(r,s)}else if(e instanceof bh?r.ha.Xe(e):e instanceof _T?r.ha.ot(e):r.ha.nt(e),!t.isEqual(Ne.min()))try{const s=await IT(r.localStore);t.compareTo(s)>=0&&await function(u,d){const m=u.ha.It(d);return m.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const _=u._a.get(y);_&&u._a.set(y,_.withResumeToken(g.resumeToken,d))}}),m.targetMismatches.forEach((g,y)=>{const _=u._a.get(g);if(!_)return;u._a.set(g,_.withResumeToken(Jt.EMPTY_BYTE_STRING,_.snapshotVersion)),PT(u,g);const b=new is(_.target,g,y,_.sequenceNumber);rg(u,b)}),u.remoteSyncer.applyRemoteEvent(m)}(r,t)}catch(s){ve(ua,"Failed to raise snapshot:",s),await Vh(r,s)}}async function Vh(r,e,t){if(!Mo(e))throw e;r.aa.add(1),await kc(r),r.la.set("Offline"),t||(t=()=>IT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ve(ua,"Retrying IndexedDB access"),await t(),r.aa.delete(1),await dd(r)})}function UT(r,e){return e().catch(t=>Vh(r,t,e))}async function fd(r){const e=je(r),t=ms(e);let s=e.oa.length>0?e.oa[e.oa.length-1].batchId:Fp;for(;Sj(e);)try{const o=await oj(e.localStore,s);if(o===null){e.oa.length===0&&t.v_();break}s=o.batchId,Cj(e,o)}catch(o){await Vh(e,o)}LT(e)&&VT(e)}function Sj(r){return ya(r)&&r.oa.length<10}function Cj(r,e){r.oa.push(e);const t=ms(r);t.b_()&&t.W_&&t.G_(e.mutations)}function LT(r){return ya(r)&&!ms(r).w_()&&r.oa.length>0}function VT(r){ms(r).start()}async function Rj(r){ms(r).H_()}async function Nj(r){const e=ms(r);for(const t of r.oa)e.G_(t.mutations)}async function jj(r,e,t){const s=r.oa.shift(),o=Qp.from(s,e,t);await UT(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await fd(r)}async function Ij(r,e){e&&ms(r).W_&&await async function(s,o){if(function(d){return fN(d)&&d!==ie.ABORTED}(o.code)){const u=s.oa.shift();ms(s).D_(),await UT(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await fd(s)}}(r,e),LT(r)&&VT(r)}async function dw(r,e){const t=je(r);t.asyncQueue.verifyOperationInProgress(),ve(ua,"RemoteStore received new credentials");const s=ya(t);t.aa.add(3),await kc(t),s&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await dd(t)}async function kj(r,e){const t=je(r);e?(t.aa.delete(2),await dd(t)):e||(t.aa.add(2),await kc(t),t.la.set("Unknown"))}function Lo(r){return r.Pa||(r.Pa=function(t,s,o){const u=je(t);return u.Y_(),new gj(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{jo:Tj.bind(null,r),Jo:bj.bind(null,r),Zo:xj.bind(null,r),Q_:Aj.bind(null,r)}),r.ua.push(async e=>{e?(r.Pa.D_(),sg(r)?ig(r):r.la.set("Unknown")):(await r.Pa.stop(),MT(r))})),r.Pa}function ms(r){return r.Ta||(r.Ta=function(t,s,o){const u=je(t);return u.Y_(),new yj(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{jo:()=>Promise.resolve(),Jo:Rj.bind(null,r),Zo:Ij.bind(null,r),z_:Nj.bind(null,r),j_:jj.bind(null,r)}),r.ua.push(async e=>{e?(r.Ta.D_(),await fd(r)):(await r.Ta.stop(),r.oa.length>0&&(ve(ua,`Stopping write stream with ${r.oa.length} pending writes`),r.oa=[]))})),r.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const d=Date.now()+s,m=new ag(e,t,d,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function og(r,e){if(wi("AsyncQueue",`${e}: ${r}`),Mo(r))return new ge(ie.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{static emptySet(e){return new yo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Te.comparator(t.key,s.key):(t,s)=>Te.comparator(t.key,s.key),this.keyedMap=ic(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new yo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(){this.Ia=new ft(Te.comparator)}track(e){const t=e.doc.key,s=this.Ia.get(t);s?e.type!==0&&s.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&s.type!==1?this.Ia=this.Ia.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Ia=this.Ia.remove(t):e.type===1&&s.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Ce(63341,{Vt:e,Ea:s}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,s)=>{e.push(s)}),e}}class Ro{constructor(e,t,s,o,u,d,m,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new Ro(e,t,yo.emptySet(t),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class Oj{constructor(){this.queries=mw(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,s){const o=je(t),u=o.queries;o.queries=mw(),u.forEach((d,m)=>{for(const g of m.Ra)g.onError(s)})})(this,new ge(ie.ABORTED,"Firestore shutting down"))}}function mw(){return new ga(r=>iT(r),sd)}async function BT(r,e){const t=je(r);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.Va()&&e.ma()&&(s=2):(u=new Dj,s=e.ma()?0:1);try{switch(s){case 0:u.Aa=await t.onListen(o,!0);break;case 1:u.Aa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=og(d,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Ra.push(e),e.ga(t.onlineState),u.Aa&&e.pa(u.Aa)&&lg(t)}async function zT(r,e){const t=je(r),s=e.query;let o=3;const u=t.queries.get(s);if(u){const d=u.Ra.indexOf(e);d>=0&&(u.Ra.splice(d,1),u.Ra.length===0?o=e.ma()?0:1:!u.Va()&&e.ma()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Pj(r,e){const t=je(r);let s=!1;for(const o of e){const u=o.query,d=t.queries.get(u);if(d){for(const m of d.Ra)m.pa(o)&&(s=!0);d.Aa=o}}s&&lg(t)}function Mj(r,e,t){const s=je(r),o=s.queries.get(e);if(o)for(const u of o.Ra)u.onError(t);s.queries.delete(e)}function lg(r){r.fa.forEach(e=>{e.next()})}var Tp,pw;(pw=Tp||(Tp={})).ya="default",pw.Cache="cache";class FT{constructor(e,t,s){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=s||{}}pa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ro(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const s=t!=="Offline";return(!this.options.Fa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Tp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.key=e}}class HT{constructor(e){this.key=e}}class Uj{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=ze(),this.mutatedKeys=ze(),this.Ua=sT(e),this.Ka=new yo(this.Ua)}get Wa(){return this.qa}Ga(e,t){const s=t?t.za:new fw,o=t?t.Ka:this.Ka;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,b)=>{const T=o.get(_),j=ad(this.query,b)?b:null,C=!!T&&this.mutatedKeys.has(T.key),k=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let I=!1;T&&j?T.data.isEqual(j.data)?C!==k&&(s.track({type:3,doc:j}),I=!0):this.ja(T,j)||(s.track({type:2,doc:j}),I=!0,(g&&this.Ua(j,g)>0||y&&this.Ua(j,y)<0)&&(m=!0)):!T&&j?(s.track({type:0,doc:j}),I=!0):T&&!j&&(s.track({type:1,doc:T}),I=!0,(g||y)&&(m=!0)),I&&(j?(d=d.add(j),u=k?u.add(_):u.delete(_)):(d=d.delete(_),u=u.delete(_)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),u=u.delete(_.key),s.track({type:1,doc:_})}return{Ka:d,za:s,ys:m,mutatedKeys:u}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const d=e.za.da();d.sort((_,b)=>function(j,C){const k=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Vt:I})}};return k(j)-k(C)}(_.type,b.type)||this.Ua(_.doc,b.doc)),this.Ha(s),o=o!=null&&o;const m=t&&!o?this.Ja():[],g=this.$a.size===0&&this.current&&!o?1:0,y=g!==this.Qa;return this.Qa=g,d.length!==0||y?{snapshot:new Ro(this.query,e.Ka,u,d,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ya:m}:{Ya:m}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new fw,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=ze(),this.Ka.forEach(s=>{this.Za(s.key)&&(this.$a=this.$a.add(s.key))});const t=[];return e.forEach(s=>{this.$a.has(s)||t.push(new HT(s))}),this.$a.forEach(s=>{e.has(s)||t.push(new qT(s))}),t}Xa(e){this.qa=e.Ns,this.$a=ze();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Ro.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const cg="SyncEngine";class Lj{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Vj{constructor(e){this.key=e,this.tu=!1}}class Bj{constructor(e,t,s,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.nu={},this.ru=new ga(m=>iT(m),sd),this.iu=new Map,this.su=new Set,this.ou=new ft(Te.comparator),this._u=new Map,this.au=new Zp,this.uu={},this.cu=new Map,this.lu=Co.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function zj(r,e,t=!0){const s=WT(r);let o;const u=s.ru.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.eu()):o=await $T(s,e,t,!0),o}async function Fj(r,e){const t=WT(r);await $T(t,e,!0,!1)}async function $T(r,e,t,s){const o=await lj(r.localStore,Ir(e)),u=o.targetId,d=r.sharedClientState.addLocalQueryTarget(u,t);let m;return s&&(m=await qj(r,e,u,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&OT(r.remoteStore,o),m}async function qj(r,e,t,s,o){r.Pu=(b,T,j)=>async function(k,I,z,J){let X=I.view.Ga(z);X.ys&&(X=await ow(k.localStore,I.query,!1).then(({documents:O})=>I.view.Ga(O,X)));const re=J&&J.targetChanges.get(I.targetId),ee=J&&J.targetMismatches.get(I.targetId)!=null,ce=I.view.applyChanges(X,k.isPrimaryClient,re,ee);return yw(k,I.targetId,ce.Ya),ce.snapshot}(r,b,T,j);const u=await ow(r.localStore,e,!0),d=new Uj(e,u.Ns),m=d.Ga(u.documents),g=Ic.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=d.applyChanges(m,r.isPrimaryClient,g);yw(r,t,y.Ya);const _=new Lj(e,t,d);return r.ru.set(e,_),r.iu.has(t)?r.iu.get(t).push(e):r.iu.set(t,[e]),y.snapshot}async function Hj(r,e,t){const s=je(r),o=s.ru.get(e),u=s.iu.get(o.targetId);if(u.length>1)return s.iu.set(o.targetId,u.filter(d=>!sd(d,e))),void s.ru.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await wp(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&ng(s.remoteStore,o.targetId),bp(s,o.targetId)}).catch(Po)):(bp(s,o.targetId),await wp(s.localStore,o.targetId,!0))}async function $j(r,e){const t=je(r),s=t.ru.get(e),o=t.iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),ng(t.remoteStore,s.targetId))}async function Gj(r,e,t){const s=Jj(r);try{const o=await function(d,m){const g=je(d),y=Ut.now(),_=m.reduce((j,C)=>j.add(C.key),ze());let b,T;return g.persistence.runTransaction("Locally write mutations","readwrite",j=>{let C=Ei(),k=ze();return g.Cs.getEntries(j,_).next(I=>{C=I,C.forEach((z,J)=>{J.isValidDocument()||(k=k.add(z))})}).next(()=>g.localDocuments.getOverlayedDocuments(j,C)).next(I=>{b=I;const z=[];for(const J of m){const X=lN(J,b.get(J.key).overlayedDocument);X!=null&&z.push(new _s(J.key,X,WE(X.value.mapValue),sr.exists(!0)))}return g.mutationQueue.addMutationBatch(j,y,z,m)}).next(I=>{T=I;const z=I.applyToLocalDocumentSet(b,k);return g.documentOverlayCache.saveOverlays(j,I.batchId,z)})}).then(()=>({batchId:T.batchId,changes:oT(b)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,m,g){let y=d.uu[d.currentUser.toKey()];y||(y=new ft(Pe)),y=y.insert(m,g),d.uu[d.currentUser.toKey()]=y}(s,o.batchId,t),await Dc(s,o.changes),await fd(s.remoteStore)}catch(o){const u=og(o,"Failed to persist write");t.reject(u)}}async function GT(r,e){const t=je(r);try{const s=await sj(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t._u.get(u);d&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.tu=!0:o.modifiedDocuments.size>0?We(d.tu,14607):o.removedDocuments.size>0&&(We(d.tu,42227),d.tu=!1))}),await Dc(t,s,e)}catch(s){await Po(s)}}function gw(r,e,t){const s=je(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.ru.forEach((u,d)=>{const m=d.view.ga(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const g=je(d);g.onlineState=m;let y=!1;g.queries.forEach((_,b)=>{for(const T of b.Ra)T.ga(m)&&(y=!0)}),y&&lg(g)}(s.eventManager,e),o.length&&s.nu.Q_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Yj(r,e,t){const s=je(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s._u.get(e),u=o&&o.key;if(u){let d=new ft(Te.comparator);d=d.insert(u,on.newNoDocument(u,Ne.min()));const m=ze().add(u),g=new ud(Ne.min(),new Map,new ft(Pe),d,m);await GT(s,g),s.ou=s.ou.remove(u),s._u.delete(e),ug(s)}else await wp(s.localStore,e,!1).then(()=>bp(s,e,t)).catch(Po)}async function Kj(r,e){const t=je(r),s=e.batch.batchId;try{const o=await ij(t.localStore,e);KT(t,s,null),YT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Dc(t,o)}catch(o){await Po(o)}}async function Qj(r,e,t){const s=je(r);try{const o=await function(d,m){const g=je(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let _;return g.mutationQueue.lookupMutationBatch(y,m).next(b=>(We(b!==null,37113),_=b.keys(),g.mutationQueue.removeMutationBatch(y,b))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,_,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_)).next(()=>g.localDocuments.getDocuments(y,_))})}(s.localStore,e);KT(s,e,t),YT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Dc(s,o)}catch(o){await Po(o)}}function YT(r,e){(r.cu.get(e)||[]).forEach(t=>{t.resolve()}),r.cu.delete(e)}function KT(r,e,t){const s=je(r);let o=s.uu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.uu[s.currentUser.toKey()]=o}}function bp(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.iu.get(e))r.ru.delete(s),t&&r.nu.Tu(s,t);r.iu.delete(e),r.isPrimaryClient&&r.au.Ur(e).forEach(s=>{r.au.containsKey(s)||QT(r,s)})}function QT(r,e){r.su.delete(e.path.canonicalString());const t=r.ou.get(e);t!==null&&(ng(r.remoteStore,t),r.ou=r.ou.remove(e),r._u.delete(t),ug(r))}function yw(r,e,t){for(const s of t)s instanceof qT?(r.au.addReference(s.key,e),Wj(r,s)):s instanceof HT?(ve(cg,"Document no longer in limbo: "+s.key),r.au.removeReference(s.key,e),r.au.containsKey(s.key)||QT(r,s.key)):Ce(19791,{Iu:s})}function Wj(r,e){const t=e.key,s=t.path.canonicalString();r.ou.get(t)||r.su.has(s)||(ve(cg,"New document in limbo: "+t),r.su.add(s),ug(r))}function ug(r){for(;r.su.size>0&&r.ou.size<r.maxConcurrentLimboResolutions;){const e=r.su.values().next().value;r.su.delete(e);const t=new Te(at.fromString(e)),s=r.lu.next();r._u.set(s,new Vj(t)),r.ou=r.ou.insert(t,s),OT(r.remoteStore,new is(Ir(Yp(t.path)),s,"TargetPurposeLimboResolution",nd.le))}}async function Dc(r,e,t){const s=je(r),o=[],u=[],d=[];s.ru.isEmpty()||(s.ru.forEach((m,g)=>{d.push(s.Pu(g,e,t).then(y=>{var _;if((y||t)&&s.isPrimaryClient){const b=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))===null||_===void 0?void 0:_.current;s.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){o.push(y);const b=eg.Ps(g.targetId,y);u.push(b)}}))}),await Promise.all(d),s.nu.Q_(o),await async function(g,y){const _=je(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>ae.forEach(y,T=>ae.forEach(T.ls,j=>_.persistence.referenceDelegate.addReference(b,T.targetId,j)).next(()=>ae.forEach(T.hs,j=>_.persistence.referenceDelegate.removeReference(b,T.targetId,j)))))}catch(b){if(!Mo(b))throw b;ve(tg,"Failed to update sequence numbers: "+b)}for(const b of y){const T=b.targetId;if(!b.fromCache){const j=_.Ss.get(T),C=j.snapshotVersion,k=j.withLastLimboFreeSnapshotVersion(C);_.Ss=_.Ss.insert(T,k)}}}(s.localStore,u))}async function Xj(r,e){const t=je(r);if(!t.currentUser.isEqual(e)){ve(cg,"User change. New user:",e.toKey());const s=await jT(t.localStore,e);t.currentUser=e,function(u,d){u.cu.forEach(m=>{m.forEach(g=>{g.reject(new ge(ie.CANCELLED,d))})}),u.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Dc(t,s.Ms)}}function Zj(r,e){const t=je(r),s=t._u.get(e);if(s&&s.tu)return ze().add(s.key);{let o=ze();const u=t.iu.get(e);if(!u)return o;for(const d of u){const m=t.ru.get(d);o=o.unionWith(m.view.Wa)}return o}}function WT(r){const e=je(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=GT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yj.bind(null,e),e.nu.Q_=Pj.bind(null,e.eventManager),e.nu.Tu=Mj.bind(null,e.eventManager),e}function Jj(r){const e=je(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Kj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qj.bind(null,e),e}class Bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hd(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return rj(this.persistence,new ej,e.initialUser,this.serializer)}Ru(e){return new NT(Jp.Ei,this.serializer)}Au(e){return new uj}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bh.provider={build:()=>new Bh};class e2 extends Bh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){We(this.persistence.referenceDelegate instanceof Lh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new VN(s,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new NT(s=>Lh.Ei(s,t),this.serializer)}}class xp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>gw(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xj.bind(null,this.syncEngine),await kj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Oj}()}createDatastore(e){const t=hd(e.databaseInfo.databaseId),s=function(u){return new pj(u)}(e.databaseInfo);return function(u,d,m,g){return new _j(u,d,m,g)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,u,d,m){return new Ej(s,o,u,d,m)}(this.localStore,this.datastore,e.asyncQueue,t=>gw(this.syncEngine,t,0),function(){return uw.C()?new uw:new hj}())}createSyncEngine(e,t){return function(o,u,d,m,g,y,_){const b=new Bj(o,u,d,m,g,y);return _&&(b.hu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const u=je(o);ve(ua,"RemoteStore shutting down."),u.aa.add(5),await kc(u),u.ca.shutdown(),u.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}xp.provider={build:()=>new xp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):wi("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="FirestoreClient";class t2{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=an.UNAUTHENTICATED,this.clientId=BE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async d=>{ve(ps,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(ve(ps,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=og(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Km(r,e){r.asyncQueue.verifyOperationInProgress(),ve(ps,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await jT(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function vw(r,e){r.asyncQueue.verifyOperationInProgress();const t=await n2(r);ve(ps,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>dw(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>dw(e.remoteStore,o)),r._onlineComponents=e}async function n2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ve(ps,"Using user provided OfflineComponentProvider");try{await Km(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Eo("Error using user provided cache. Falling back to memory cache: "+t),await Km(r,new Bh)}}else ve(ps,"Using default OfflineComponentProvider"),await Km(r,new e2(void 0));return r._offlineComponents}async function ZT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ve(ps,"Using user provided OnlineComponentProvider"),await vw(r,r._uninitializedComponentsProvider._online)):(ve(ps,"Using default OnlineComponentProvider"),await vw(r,new xp))),r._onlineComponents}function r2(r){return ZT(r).then(e=>e.syncEngine)}async function JT(r){const e=await ZT(r),t=e.eventManager;return t.onListen=zj.bind(null,e.syncEngine),t.onUnlisten=Hj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Fj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$j.bind(null,e.syncEngine),t}function i2(r,e,t={}){const s=new pi;return r.asyncQueue.enqueueAndForget(async()=>function(u,d,m,g,y){const _=new XT({next:T=>{_.yu(),d.enqueueAndForget(()=>zT(u,b));const j=T.docs.has(m);!j&&T.fromCache?y.reject(new ge(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&T.fromCache&&g&&g.source==="server"?y.reject(new ge(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),b=new FT(Yp(m.path),_,{includeMetadataChanges:!0,Fa:!0});return BT(u,b)}(await JT(r),r.asyncQueue,e,t,s)),s.promise}function s2(r,e,t={}){const s=new pi;return r.asyncQueue.enqueueAndForget(async()=>function(u,d,m,g,y){const _=new XT({next:T=>{_.yu(),d.enqueueAndForget(()=>zT(u,b)),T.fromCache&&g.source==="server"?y.reject(new ge(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),b=new FT(m,_,{includeMetadataChanges:!0,Fa:!0});return BT(u,b)}(await JT(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(r,e,t){if(!t)throw new ge(ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function a2(r,e,t,s){if(e===!0&&s===!0)throw new ge(ie.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ww(r){if(!Te.isDocumentKey(r))throw new ge(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ew(r){if(Te.isDocumentKey(r))throw new ge(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function md(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ce(12329,{type:typeof r})}function Pr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ge(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=md(r);throw new ge(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function o2(r,e){if(e<=0)throw new ge(ie.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="firestore.googleapis.com",Tw=!0;class bw{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nb,this.ssl=Tw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Tw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UN)throw new ge(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eb((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pd{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new pR;switch(s.type){case"firstParty":return new _R(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ge(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Do("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=_w.get(t);s&&(ve("ComponentProvider","Removing Datastore"),_w.delete(t),s.terminate())}(this),Promise.resolve()}}function l2(r,e,t,s={}){var o;r=Pr(r,pd);const u=ma(e),d=r._getSettings(),m=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),g=`${e}:${t}`;d.host!==nb&&d.host!==g&&Eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},d),{host:g,ssl:u,emulatorOptions:s});if(!vi(y,m)&&(r._setSettings(y),u&&(Up(`https://${g}`),Do("Firestore",!0)),s.mockUserToken)){let _,b;if(typeof s.mockUserToken=="string")_=s.mockUserToken,b=an.MOCK_USER;else{_=AE(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new ge(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new an(T)}r._authCredentials=new gR(new LE(_,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ws(this.firestore,e,this._query)}}class gn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class ls extends ws{constructor(e,t,s){super(e,t,Yp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new Te(e))}withConverter(e){return new ls(this.firestore,e,this._path)}}function ln(r,e,...t){if(r=dt(r),tb("collection","path",e),r instanceof pd){const s=at.fromString(e,...t);return Ew(s),new ls(r,null,s)}{if(!(r instanceof gn||r instanceof ls))throw new ge(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(at.fromString(e,...t));return Ew(s),new ls(r.firestore,null,s)}}function yt(r,e,...t){if(r=dt(r),arguments.length===1&&(e=BE.newId()),tb("doc","path",e),r instanceof pd){const s=at.fromString(e,...t);return ww(s),new gn(r,null,new Te(s))}{if(!(r instanceof gn||r instanceof ls))throw new ge(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(at.fromString(e,...t));return ww(s),new gn(r.firestore,r instanceof ls?r.converter:null,new Te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="AsyncQueue";class Aw{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new kT(this,"async_queue_retry"),this.ju=()=>{const s=Ym();s&&ve(xw,"Visibility state changed to "+s.visibilityState),this.y_.A_()},this.Hu=e;const t=Ym();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Ym();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new pi;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Mo(e))throw e;ve(xw,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(s=>{throw this.Ku=s,this.Wu=!1,wi("INTERNAL UNHANDLED ERROR: ",Sw(s)),s}).then(s=>(this.Wu=!1,s))));return this.Hu=t,t}enqueueAfterDelay(e,t,s){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const o=ag.createAndSchedule(this,e,t,s,u=>this.Xu(u));return this.Uu.push(o),o}Ju(){this.Ku&&Ce(47125,{ec:Sw(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function Sw(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Vo extends pd{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Aw,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Aw(e),this._firestoreClient=void 0,await e}}}function c2(r,e){const t=typeof r=="object"?r:Bp(),s=typeof r=="string"?r:Dh,o=td(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=TE("firestore");u&&l2(o,...u)}return o}function hg(r){if(r._terminated)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||u2(r),r._firestoreClient}function u2(r){var e,t,s;const o=r._freezeSettings(),u=function(m,g,y,_){return new OR(m,g,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,eb(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new t2(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this._byteString=e}static fromBase64String(e){try{return new No(Jt.fromBase64String(e))}catch(t){throw new ge(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new No(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=/^__.*__$/;class d2{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,t,this.fieldTransforms):new jc(e,this.data,t,this.fieldTransforms)}}class rb{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new _s(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ib(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{oc:r})}}class yd{constructor(e,t,s,o,u,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this._c(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new yd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ac({path:s,cc:!1});return o.lc(e),o}hc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ac({path:s,cc:!1});return o._c(),o}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return zh(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(ib(this.oc)&&h2.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class f2{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||hd(e)}dc(e,t,s,o=!1){return new yd({oc:e,methodName:t,Ec:s,path:Zt.emptyPath(),cc:!1,Ic:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vd(r){const e=r._freezeSettings(),t=hd(r._databaseId);return new f2(r._databaseId,!!e.ignoreUndefinedProperties,t)}function sb(r,e,t,s,o,u={}){const d=r.dc(u.merge||u.mergeFields?2:0,e,t,o);vg("Data must be an object, but it was:",d,s);const m=ob(s,d);let g,y;if(u.merge)g=new Dn(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const _=[];for(const b of u.mergeFields){const T=Ap(e,b,t);if(!d.contains(T))throw new ge(ie.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);cb(_,T)||_.push(T)}g=new Dn(_),y=d.fieldTransforms.filter(b=>g.covers(b.field))}else g=null,y=d.fieldTransforms;return new d2(new bn(m),g,y)}class _d extends va{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _d}}function ab(r,e,t){return new yd({oc:3,Ec:e.settings.Ec,methodName:r._methodName,cc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class mg extends va{_toFieldTransform(e){return new ld(e.path,new Ec)}isEqual(e){return e instanceof mg}}class pg extends va{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=ab(this,e,!0),s=this.Ac.map(u=>_a(u,t)),o=new Ao(s);return new ld(e.path,o)}isEqual(e){return e instanceof pg&&vi(this.Ac,e.Ac)}}class gg extends va{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=ab(this,e,!0),s=this.Ac.map(u=>_a(u,t)),o=new So(s);return new ld(e.path,o)}isEqual(e){return e instanceof gg&&vi(this.Ac,e.Ac)}}class yg extends va{constructor(e,t){super(e),this.Rc=t}_toFieldTransform(e){const t=new Tc(e.serializer,uT(e.serializer,this.Rc));return new ld(e.path,t)}isEqual(e){return e instanceof yg&&this.Rc===e.Rc}}function m2(r,e,t,s){const o=r.dc(1,e,t);vg("Data must be an object, but it was:",o,s);const u=[],d=bn.empty();vs(s,(g,y)=>{const _=_g(e,g,t);y=dt(y);const b=o.hc(_);if(y instanceof _d)u.push(_);else{const T=_a(y,b);T!=null&&(u.push(_),d.set(_,T))}});const m=new Dn(u);return new rb(d,m,o.fieldTransforms)}function p2(r,e,t,s,o,u){const d=r.dc(1,e,t),m=[Ap(e,s,t)],g=[o];if(u.length%2!=0)throw new ge(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)m.push(Ap(e,u[T])),g.push(u[T+1]);const y=[],_=bn.empty();for(let T=m.length-1;T>=0;--T)if(!cb(y,m[T])){const j=m[T];let C=g[T];C=dt(C);const k=d.hc(j);if(C instanceof _d)y.push(j);else{const I=_a(C,k);I!=null&&(y.push(j),_.set(j,I))}}const b=new Dn(y);return new rb(_,b,d.fieldTransforms)}function g2(r,e,t,s=!1){return _a(t,r.dc(s?4:3,e))}function _a(r,e){if(lb(r=dt(r)))return vg("Unsupported field value:",e,r),ob(r,e);if(r instanceof va)return function(s,o){if(!ib(o.oc))throw o.Tc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Tc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(s,o){const u=[];let d=0;for(const m of s){let g=_a(m,o.Pc(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=dt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return uT(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ut.fromDate(s);return{timestampValue:Uh(o.serializer,u)}}if(s instanceof Ut){const u=new Ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Uh(o.serializer,u)}}if(s instanceof dg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof No)return{bytesValue:ET(o.serializer,s._byteString)};if(s instanceof gn){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Tc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Xp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof fg)return function(d,m){return{mapValue:{fields:{[KE]:{stringValue:QE},[Oh]:{arrayValue:{values:d.toArray().map(y=>{if(typeof y!="number")throw m.Tc("VectorValues must only contain numeric values.");return Kp(m.serializer,y)})}}}}}}(s,o);throw o.Tc(`Unsupported field value: ${md(s)}`)}(r,e)}function ob(r,e){const t={};return FE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vs(r,(s,o)=>{const u=_a(o,e.uc(s));u!=null&&(t[s]=u)}),{mapValue:{fields:t}}}function lb(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ut||r instanceof dg||r instanceof No||r instanceof gn||r instanceof va||r instanceof fg)}function vg(r,e,t){if(!lb(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=md(t);throw s==="an object"?e.Tc(r+" a custom object"):e.Tc(r+" "+s)}}function Ap(r,e,t){if((e=dt(e))instanceof gd)return e._internalPath;if(typeof e=="string")return _g(r,e);throw zh("Field path arguments must be of type string or ",r,!1,void 0,t)}const y2=new RegExp("[~\\*/\\[\\]]");function _g(r,e,t){if(e.search(y2)>=0)throw zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new gd(...e.split("."))._internalPath}catch{throw zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function zh(r,e,t,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new ge(ie.INVALID_ARGUMENT,m+r+g)}function cb(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new v2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class v2 extends ub{data(){return super.data()}}function wd(r,e){return typeof e=="string"?_g(r,e):e instanceof gd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ge(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wg{}class Eg extends wg{}function ar(r,e,...t){let s=[];e instanceof wg&&s.push(e),s=s.concat(t),function(u){const d=u.filter(g=>g instanceof Tg).length,m=u.filter(g=>g instanceof Ed).length;if(d>1||d>0&&m>0)throw new ge(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Ed extends Eg{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Ed(e,t,s)}_apply(e){const t=this._parse(e);return hb(e._query,t),new ws(e.firestore,e.converter,pp(e._query,t))}_parse(e){const t=vd(e.firestore);return function(u,d,m,g,y,_,b){let T;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ge(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Rw(b,_);const C=[];for(const k of b)C.push(Cw(g,u,k));T={arrayValue:{values:C}}}else T=Cw(g,u,b)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Rw(b,_),T=g2(m,d,b,_==="in"||_==="not-in");return It.create(y,_,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Rr(r,e,t){const s=e,o=wd("where",r);return Ed._create(o,s,t)}class Tg extends wg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tg(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:cr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,u){let d=o;const m=u.getFlattenedFilters();for(const g of m)hb(d,g),d=pp(d,g)}(e._query,t),new ws(e.firestore,e.converter,pp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bg extends Eg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new bg(e,t)}_apply(e){const t=function(o,u,d){if(o.startAt!==null)throw new ge(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ge(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wc(u,d)}(e._query,this._field,this._direction);return new ws(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new Uo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function rr(r,e="asc"){const t=e,s=wd("orderBy",r);return bg._create(s,t)}class xg extends Eg{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new xg(e,t,s)}_apply(e){return new ws(e.firestore,e.converter,Mh(e._query,this._limit,this._limitType))}}function Fh(r){return o2("limit",r),xg._create("limit",r,"F")}function Cw(r,e,t){if(typeof(t=dt(t))=="string"){if(t==="")throw new ge(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rT(e)&&t.indexOf("/")!==-1)throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(at.fromString(t));if(!Te.isDocumentKey(s))throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return F0(r,new Te(s))}if(t instanceof gn)return F0(r,t._key);throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${md(t)}.`)}function Rw(r,e){if(!Array.isArray(r)||r.length===0)throw new ge(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hb(r,e){const t=function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ge(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class w2{convertValue(e,t="none"){switch(fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return vs(e,(o,u)=>{s[o]=this.convertValue(u,t)}),s}convertVectorValue(e){var t,s,o;const u=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[Oh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>At(d.doubleValue));return new fg(u)}convertGeoPoint(e){return new dg(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=id(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(yc(e));default:return null}}convertTimestamp(e){const t=hs(e);return new Ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=at.fromString(e);We(CT(s),9688,{name:e});const o=new vc(s.get(1),s.get(3)),u=new Te(s.popFirst(5));return o.isEqual(t)||wi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fb extends ub{constructor(e,t,s,o,u,d){super(e,t,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(wd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class xh extends fb{data(e={}){return super.data(e)}}class E2{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ac(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new xh(this._firestore,this._userDataWriter,s.key,s,new ac(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const g=new xh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ac(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new xh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ac(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),_=d.indexOf(m.doc.key)),{type:T2(m.type),doc:g,oldIndex:y,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function T2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(r){r=Pr(r,gn);const e=Pr(r.firestore,Vo);return i2(hg(e),r._key).then(t=>b2(e,r,t))}class mb extends w2{constructor(e){super(),this.firestore=e}convertBytes(e){return new No(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}function Kn(r){r=Pr(r,ws);const e=Pr(r.firestore,Vo),t=hg(e),s=new mb(e);return _2(r._query),s2(t,r._query).then(o=>new E2(e,s,r,o))}function pb(r,e,t){r=Pr(r,gn);const s=Pr(r.firestore,Vo),o=db(r.converter,e,t);return Sg(s,[sb(vd(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,sr.none())])}function Qn(r,e,t,...s){r=Pr(r,gn);const o=Pr(r.firestore,Vo),u=vd(o);let d;return d=typeof(e=dt(e))=="string"||e instanceof gd?p2(u,"updateDoc",r._key,e,t,s):m2(u,"updateDoc",r._key,e),Sg(o,[d.toMutation(r._key,sr.exists(!0))])}function Ag(r,e){const t=Pr(r.firestore,Vo),s=yt(r),o=db(r.converter,e);return Sg(t,[sb(vd(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,sr.exists(!1))]).then(()=>s)}function Sg(r,e){return function(s,o){const u=new pi;return s.asyncQueue.enqueueAndForget(async()=>Gj(await r2(s),o,u)),u.promise}(hg(r),e)}function b2(r,e,t){const s=t.docs.get(e._key),o=new mb(r);return new fb(r,o,e._key,s,new ac(t.hasPendingWrites,t.fromCache),e.converter)}function cn(){return new mg("serverTimestamp")}function gb(...r){return new pg("arrayUnion",r)}function Cg(...r){return new gg("arrayRemove",r)}function x2(r){return new yg("increment",r)}(function(e,t=!0){(function(o){Oo=o})(pa),la(new cs("firestore",(s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),m=new Vo(new yR(s.getProvider("auth-internal")),new wR(d,s.getProvider("app-check-internal")),function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ge(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vc(y.options.projectId,_)}(d,o),d);return u=Object.assign({useFetchStreams:t},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),jr(j0,I0,e),jr(j0,I0,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="firebasestorage.googleapis.com",vb="storageBucket",A2=2*60*1e3,S2=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t extends Lr{constructor(e,t,s=0){super(Qm(e),`Firebase Storage: ${t} (${Qm(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vt||(vt={}));function Qm(r){return"storage/"+r}function Rg(){const r="An unknown error occurred, please check the error payload for server response.";return new _t(vt.UNKNOWN,r)}function C2(r){return new _t(vt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function R2(r){return new _t(vt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function N2(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _t(vt.UNAUTHENTICATED,r)}function j2(){return new _t(vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function I2(r){return new _t(vt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function k2(){return new _t(vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function D2(){return new _t(vt.CANCELED,"User canceled the upload/download.")}function O2(r){return new _t(vt.INVALID_URL,"Invalid URL '"+r+"'.")}function P2(r){return new _t(vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function M2(){return new _t(vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vb+"' property when initializing the app?")}function U2(){return new _t(vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function L2(){return new _t(vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function V2(r){return new _t(vt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Sp(r){return new _t(vt.INVALID_ARGUMENT,r)}function _b(){return new _t(vt.APP_DELETED,"The Firebase app was deleted.")}function B2(r){return new _t(vt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function dc(r,e){return new _t(vt.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function ec(r){throw new _t(vt.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=On.makeFromUrl(e,t)}catch{return new On(e,"")}if(s.path==="")return s;throw P2(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function y(re){re.path_=decodeURIComponent(re.path)}const _="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",j=new RegExp(`^https?://${b}/${_}/b/${o}/o${T}`,"i"),C={bucket:1,path:3},k=t===yb?"(?:storage.googleapis.com|storage.cloud.google.com)":t,I="([^?#]*)",z=new RegExp(`^https?://${k}/${o}/${I}`,"i"),X=[{regex:m,indices:g,postModify:u},{regex:j,indices:C,postModify:y},{regex:z,indices:{bucket:1,path:2},postModify:y}];for(let re=0;re<X.length;re++){const ee=X[re],ce=ee.regex.exec(e);if(ce){const O=ce[ee.indices.bucket];let N=ce[ee.indices.path];N||(N=""),s=new On(O,N),ee.postModify(s);break}}if(s==null)throw O2(e);return s}}class z2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(r,e,t){let s=1,o=null,u=null,d=!1,m=0;function g(){return m===2}let y=!1;function _(...I){y||(y=!0,e.apply(null,I))}function b(I){o=setTimeout(()=>{o=null,r(j,g())},I)}function T(){u&&clearTimeout(u)}function j(I,...z){if(y){T();return}if(I){T(),_.call(null,I,...z);return}if(g()||d){T(),_.call(null,I,...z);return}s<64&&(s*=2);let X;m===1?(m=2,X=0):X=(s+Math.random())*1e3,b(X)}let C=!1;function k(I){C||(C=!0,T(),!y&&(o!==null?(I||(m=2),clearTimeout(o),b(0)):I||(m=1)))}return b(0),u=setTimeout(()=>{d=!0,k(!0)},t),k}function q2(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(r){return r!==void 0}function $2(r){return typeof r=="object"&&!Array.isArray(r)}function Ng(r){return typeof r=="string"||r instanceof String}function Nw(r){return jg()&&r instanceof Blob}function jg(){return typeof Blob<"u"}function jw(r,e,t,s){if(s<e)throw Sp(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>t)throw Sp(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(r,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${r}`}function wb(r){const e=encodeURIComponent;let t="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var aa;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(aa||(aa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(r,e){const t=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=e.indexOf(r)!==-1;return t||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,t,s,o,u,d,m,g,y,_,b,T=!0,j=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=_,this.connectionFactory_=b,this.retry=T,this.isUsingEmulator=j,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,k)=>{this.resolve_=C,this.reject_=k,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new mh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=m=>{const g=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const m=u.getErrorCode()===aa.NO_ERROR,g=u.getStatus();if(!m||G2(g,this.additionalRetryCodes_)&&this.retry){const _=u.getErrorCode()===aa.ABORT;s(!1,new mh(!1,null,_));return}const y=this.successCodes_.indexOf(g)!==-1;s(!0,new mh(y,u))})},t=(s,o)=>{const u=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());H2(g)?u(g):u()}catch(g){d(g)}else if(m!==null){const g=Rg();g.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,g)):d(g)}else if(o.canceled){const g=this.appDelete_?_b():D2();d(g)}else{const g=k2();d(g)}};this.canceled_?t(!1,new mh(!1,null,!0)):this.backoffId_=F2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&q2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mh{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function K2(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function Q2(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function W2(r,e){e&&(r["X-Firebase-GMPID"]=e)}function X2(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function Z2(r,e,t,s,o,u,d=!0,m=!1){const g=wb(r.urlParams),y=r.url+g,_=Object.assign({},r.headers);return W2(_,e),K2(_,t),Q2(_,u),X2(_,s),new Y2(y,r.method,_,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,d,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function eI(...r){const e=J2();if(e!==void 0){const t=new e;for(let s=0;s<r.length;s++)t.append(r[s]);return t.getBlob()}else{if(jg())return new Blob(r);throw new _t(vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function tI(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(r){if(typeof atob>"u")throw V2("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wm{constructor(e,t){this.data=e,this.contentType=t||null}}function rI(r,e){switch(r){case Nr.RAW:return new Wm(Eb(e));case Nr.BASE64:case Nr.BASE64URL:return new Wm(Tb(r,e));case Nr.DATA_URL:return new Wm(sI(e),aI(e))}throw Rg()}function Eb(r){const e=[];for(let t=0;t<r.length;t++){let s=r.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=s,d=r.charCodeAt(++t);s=65536|(u&1023)<<10|d&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function iI(r){let e;try{e=decodeURIComponent(r)}catch{throw dc(Nr.DATA_URL,"Malformed data URL.")}return Eb(e)}function Tb(r,e){switch(r){case Nr.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw dc(r,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Nr.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw dc(r,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=nI(e)}catch(o){throw o.message.includes("polyfill")?o:dc(r,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class bb{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw dc(Nr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=oI(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function sI(r){const e=new bb(r);return e.base64?Tb(Nr.BASE64,e.rest):iI(e.rest)}function aI(r){return new bb(r).contentType}function oI(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t){let s=0,o="";Nw(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(Nw(this.data_)){const s=this.data_,o=tI(s,e,t);return o===null?null:new es(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new es(s,!0)}}static getBlob(...e){if(jg()){const t=e.map(s=>s instanceof es?s.data_:s);return new es(eI.apply(null,t))}else{const t=e.map(d=>Ng(d)?rI(Nr.RAW,d).data:d.data_);let s=0;t.forEach(d=>{s+=d.byteLength});const o=new Uint8Array(s);let u=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)o[u++]=d[m]}),new es(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(r){let e;try{e=JSON.parse(r)}catch{return null}return $2(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function cI(r,e){const t=e.split("/").filter(s=>s.length>0).join("/");return r.length===0?t:r+"/"+t}function Ab(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(r,e){return e}class pn{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||uI}}let ph=null;function hI(r){return!Ng(r)||r.length<2?r:Ab(r)}function Sb(){if(ph)return ph;const r=[];r.push(new pn("bucket")),r.push(new pn("generation")),r.push(new pn("metageneration")),r.push(new pn("name","fullPath",!0));function e(u,d){return hI(d)}const t=new pn("name");t.xform=e,r.push(t);function s(u,d){return d!==void 0?Number(d):d}const o=new pn("size");return o.xform=s,r.push(o),r.push(new pn("timeCreated")),r.push(new pn("updated")),r.push(new pn("md5Hash",null,!0)),r.push(new pn("cacheControl",null,!0)),r.push(new pn("contentDisposition",null,!0)),r.push(new pn("contentEncoding",null,!0)),r.push(new pn("contentLanguage",null,!0)),r.push(new pn("contentType",null,!0)),r.push(new pn("metadata","customMetadata",!0)),ph=r,ph}function dI(r,e){function t(){const s=r.bucket,o=r.fullPath,u=new On(s,o);return e._makeStorageReference(u)}Object.defineProperty(r,"ref",{get:t})}function fI(r,e,t){const s={};s.type="file";const o=t.length;for(let u=0;u<o;u++){const d=t[u];s[d.local]=d.xform(s,e[d.server])}return dI(s,r),s}function Cb(r,e,t){const s=xb(e);return s===null?null:fI(r,s,t)}function mI(r,e,t,s){const o=xb(e);if(o===null||!Ng(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(y=>{const _=r.bucket,b=r.fullPath,T="/b/"+d(_)+"/o/"+d(b),j=Ig(T,t,s),C=wb({alt:"media",token:y});return j+C})[0]}function pI(r,e){const t={},s=e.length;for(let o=0;o<s;o++){const u=e[o];u.writable&&(t[u.server]=r[u.local])}return JSON.stringify(t)}class Rb{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(r){if(!r)throw Rg()}function gI(r,e){function t(s,o){const u=Cb(r,o,e);return Nb(u!==null),u}return t}function yI(r,e){function t(s,o){const u=Cb(r,o,e);return Nb(u!==null),mI(u,o,r.host,r._protocol)}return t}function jb(r){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=j2():o=N2():t.getStatus()===402?o=R2(r.bucket):t.getStatus()===403?o=I2(r.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function vI(r){const e=jb(r);function t(s,o){let u=e(s,o);return s.getStatus()===404&&(u=C2(r.path)),u.serverResponse=o.serverResponse,u}return t}function _I(r,e,t){const s=e.fullServerUrl(),o=Ig(s,r.host,r._protocol),u="GET",d=r.maxOperationRetryTime,m=new Rb(o,u,yI(r,t),d);return m.errorHandler=vI(e),m}function wI(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function EI(r,e,t){const s=Object.assign({},t);return s.fullPath=r.path,s.size=e.size(),s.contentType||(s.contentType=wI(null,e)),s}function TI(r,e,t,s,o){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function m(){let X="";for(let re=0;re<2;re++)X=X+Math.random().toString().slice(2);return X}const g=m();d["Content-Type"]="multipart/related; boundary="+g;const y=EI(e,s,o),_=pI(y,t),b="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+g+"--",j=es.getBlob(b,s,T);if(j===null)throw U2();const C={name:y.fullPath},k=Ig(u,r.host,r._protocol),I="POST",z=r.maxUploadRetryTime,J=new Rb(k,I,gI(r,t),z);return J.urlParams=C,J.headers=d,J.body=j.uploadData(),J.errorHandler=jb(e),J}class bI{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=aa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=aa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=aa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o,u){if(this.sent_)throw ec("cannot .send() more than once");if(ma(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ec("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ec("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ec("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ec("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class xI extends bI{initXhr(){this.xhr_.responseType="text"}}function Ib(){return new xI}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,t){this._service=e,t instanceof On?this._location=t:this._location=On.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ha(e,t)}get root(){const e=new On(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ab(this._location.path)}get storage(){return this._service}get parent(){const e=lI(this._location.path);if(e===null)return null;const t=new On(this._location.bucket,e);return new ha(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw B2(e)}}function AI(r,e,t){r._throwIfRoot("uploadBytes");const s=TI(r.storage,r._location,Sb(),new es(e,!0),t);return r.storage.makeRequestWithTokens(s,Ib).then(o=>({metadata:o,ref:r}))}function SI(r){r._throwIfRoot("getDownloadURL");const e=_I(r.storage,r._location,Sb());return r.storage.makeRequestWithTokens(e,Ib).then(t=>{if(t===null)throw L2();return t})}function CI(r,e){const t=cI(r._location.path,e),s=new On(r._location.bucket,t);return new ha(r.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(r){return/^[A-Za-z]+:\/\//.test(r)}function NI(r,e){return new ha(r,e)}function kb(r,e){if(r instanceof kg){const t=r;if(t._bucket==null)throw M2();const s=new ha(t,t._bucket);return e!=null?kb(s,e):s}else return e!==void 0?CI(r,e):r}function jI(r,e){if(e&&RI(e)){if(r instanceof kg)return NI(r,e);throw Sp("To use ref(service, url), the first argument must be a Storage instance.")}else return kb(r,e)}function Iw(r,e){const t=e==null?void 0:e[vb];return t==null?null:On.makeFromBucketSpec(t,r)}function II(r,e,t,s={}){r.host=`${e}:${t}`;const o=ma(e);o&&(Up(`https://${r.host}`),Do("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:u}=s;u&&(r._overrideAuthToken=typeof u=="string"?u:AE(u,r.app.options.projectId))}class kg{constructor(e,t,s,o,u,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=yb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=A2,this._maxUploadRetryTime=S2,this._requests=new Set,o!=null?this._bucket=On.makeFromBucketSpec(o,this._host):this._bucket=Iw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=On.makeFromBucketSpec(this._url,e):this._bucket=Iw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ha(this,e)}_makeRequest(e,t,s,o,u=!0){if(this._deleted)return new z2(_b());{const d=Z2(e,this._appId,s,o,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const kw="@firebase/storage",Dw="0.13.10";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="storage";function Td(r,e,t){return r=dt(r),AI(r,e,t)}function bd(r){return r=dt(r),SI(r)}function xd(r,e){return r=dt(r),jI(r,e)}function kI(r=Bp(),e){r=dt(r),Do("Storage",!1);const s=td(r,Db).getImmediate({identifier:e}),o=TE("storage");return o&&DI(s,...o),s}function DI(r,e,t,s={}){II(r,e,t,s)}function OI(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new kg(t,s,o,e,pa)}function PI(){la(new cs(Db,OI,"PUBLIC").setMultipleInstances(!0)),jr(kw,Dw,""),jr(kw,Dw,"esm2017")}PI();function Dg(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function Ob(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MI=Ob,Pb=new Rc("auth","Firebase",Ob());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Lp("@firebase/auth");function UI(r,...e){qh.logLevel<=Be.WARN&&qh.warn(`Auth (${pa}): ${r}`,...e)}function Ah(r,...e){qh.logLevel<=Be.ERROR&&qh.error(`Auth (${pa}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(r,...e){throw Pg(r,...e)}function or(r,...e){return Pg(r,...e)}function Og(r,e,t){const s=Object.assign(Object.assign({},MI()),{[e]:t});return new Rc("auth","Firebase",s).create(e,{appName:r.name})}function gi(r){return Og(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LI(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Wn(r,"argument-error"),Og(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pg(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Pb.create(r,...e)}function Se(r,e,...t){if(!r)throw Pg(e,...t)}function di(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ah(e),new Error(e)}function Ti(r,e){r||di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function VI(){return Ow()==="http:"||Ow()==="https:"}function Ow(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VI()||GS()||"connection"in navigator)?navigator.onLine:!0}function zI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ti(t>e,"Short delay should be less than long delay!"),this.isMobile=qS()||YS()}get(){return BI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(r,e){Ti(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HI=new Oc(3e4,6e4);function bi(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Vr(r,e,t,s,o={}){return Ub(r,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const m=Nc(Object.assign({key:r.config.apiKey},d)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:g},u);return $S()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&ma(r.emulatorConfig.host)&&(y.credentials="include"),Mb.fetch()(await Lb(r,r.config.apiHost,t,m),y)})}async function Ub(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},FI),e);try{const o=new GI(r),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw gh(r,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw gh(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw gh(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw gh(r,"user-disabled",d);const _=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Og(r,_,y);Wn(r,_)}}catch(o){if(o instanceof Lr)throw o;Wn(r,"network-request-failed",{message:String(o)})}}async function Pc(r,e,t,s,o={}){const u=await Vr(r,e,t,s,o);return"mfaPendingCredential"in u&&Wn(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function Lb(r,e,t,s){const o=`${e}${t}?${s}`,u=r,d=u.config.emulator?Mg(r.config,o):`${r.config.apiScheme}://${o}`;return qI.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function $I(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(or(this.auth,"network-request-failed")),HI.get())})}}function gh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=or(r,e,s);return o.customData._tokenResponse=t,o}function Pw(r){return r!==void 0&&r.enterprise!==void 0}class YI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return $I(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KI(r,e){return Vr(r,"GET","/v2/recaptchaConfig",bi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(r,e){return Vr(r,"POST","/v1/accounts:delete",e)}async function Hh(r,e){return Vr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WI(r,e=!1){const t=dt(r),s=await t.getIdToken(e),o=Ug(s);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:fc(Xm(o.auth_time)),issuedAtTime:fc(Xm(o.iat)),expirationTime:fc(Xm(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Xm(r){return Number(r)*1e3}function Ug(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Ah("JWT malformed, contained fewer than 3 sections"),null;try{const o=wE(t);return o?JSON.parse(o):(Ah("Failed to decode base64 JWT payload"),null)}catch(o){return Ah("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Mw(r){const e=Ug(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Lr&&XI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function XI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fc(this.lastLoginAt),this.creationTime=fc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $h(r){var e;const t=r.auth,s=await r.getIdToken(),o=await jo(r,Hh(t,{idToken:s}));Se(o==null?void 0:o.users.length,t,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?Vb(u.providerUserInfo):[],m=ek(r.providerData,d),g=r.isAnonymous,y=!(r.email&&u.passwordHash)&&!(m!=null&&m.length),_=g?y:!1,b={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Rp(u.createdAt,u.lastLoginAt),isAnonymous:_};Object.assign(r,b)}async function JI(r){const e=dt(r);await $h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ek(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Vb(r){return r.map(e=>{var{providerId:t}=e,s=Dg(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(r,e){const t=await Ub(r,{},async()=>{const s=Nc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,d=await Lb(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",Mb.fetch()(d,{method:"POST",headers:m,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nk(r,e){return Vr(r,"POST","/v2/accounts:revokeToken",bi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=Mw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await tk(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,d=new vo;return s&&(Se(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Se(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vo,this.toJSON())}_performRefresh(){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ir{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,u=Dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ZI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Rp(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await jo(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return WI(this,e)}reload(){return JI(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await $h(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tn(this.auth.app))return Promise.reject(gi(this.auth));const e=await this.getIdToken();return await jo(this,QI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,u,d,m,g,y,_;const b=(s=t.displayName)!==null&&s!==void 0?s:void 0,T=(o=t.email)!==null&&o!==void 0?o:void 0,j=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,C=(d=t.photoURL)!==null&&d!==void 0?d:void 0,k=(m=t.tenantId)!==null&&m!==void 0?m:void 0,I=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,z=(y=t.createdAt)!==null&&y!==void 0?y:void 0,J=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:X,emailVerified:re,isAnonymous:ee,providerData:ce,stsTokenManager:O}=t;Se(X&&O,e,"internal-error");const N=vo.fromJSON(this.name,O);Se(typeof X=="string",e,"internal-error"),Ji(b,e.name),Ji(T,e.name),Se(typeof re=="boolean",e,"internal-error"),Se(typeof ee=="boolean",e,"internal-error"),Ji(j,e.name),Ji(C,e.name),Ji(k,e.name),Ji(I,e.name),Ji(z,e.name),Ji(J,e.name);const R=new ir({uid:X,auth:e,email:T,emailVerified:re,displayName:b,isAnonymous:ee,photoURL:C,phoneNumber:j,tenantId:k,stsTokenManager:N,createdAt:z,lastLoginAt:J});return ce&&Array.isArray(ce)&&(R.providerData=ce.map(S=>Object.assign({},S))),I&&(R._redirectEventId=I),R}static async _fromIdTokenResponse(e,t,s=!1){const o=new vo;o.updateFromServerResponse(t);const u=new ir({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await $h(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Vb(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new vo;m.updateFromIdToken(s);const g=new ir({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Rp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=new Map;function fi(r){Ti(r instanceof Function,"Expected a class definition");let e=Uw.get(r);return e?(Ti(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Uw.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Bb.type="NONE";const Lw=Bb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(r,e,t){return`firebase:${r}:${e}:${t}`}class _o{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Sh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Sh("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Hh(this.auth,{idToken:e}).catch(()=>{});return t?ir._fromGetAccountInfoResponse(this.auth,t,e):null}return ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new _o(fi(Lw),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||fi(Lw);const d=Sh(s,e.config.apiKey,e.name);let m=null;for(const y of t)try{const _=await y._get(d);if(_){let b;if(typeof _=="string"){const T=await Hh(e,{idToken:_}).catch(()=>{});if(!T)break;b=await ir._fromGetAccountInfoResponse(e,T,_)}else b=ir._fromJSON(e,_);y!==u&&(m=b),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new _o(u,e,s):(u=g[0],m&&await u._set(d,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new _o(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Hb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Gb(e))return"Blackberry";if(Yb(e))return"Webos";if(Fb(e))return"Safari";if((e.includes("chrome/")||qb(e))&&!e.includes("edge/"))return"Chrome";if($b(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function zb(r=un()){return/firefox\//i.test(r)}function Fb(r=un()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qb(r=un()){return/crios\//i.test(r)}function Hb(r=un()){return/iemobile/i.test(r)}function $b(r=un()){return/android/i.test(r)}function Gb(r=un()){return/blackberry/i.test(r)}function Yb(r=un()){return/webos/i.test(r)}function Lg(r=un()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function rk(r=un()){var e;return Lg(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ik(){return KS()&&document.documentMode===10}function Kb(r=un()){return Lg(r)||$b(r)||Yb(r)||Gb(r)||/windows phone/i.test(r)||Hb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(r,e=[]){let t;switch(r){case"Browser":t=Vw(un());break;case"Worker":t=`${Vw(un())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((d,m)=>{try{const g=e(u);d(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(r,e={}){return Vr(r,"GET","/v2/passwordPolicy",bi(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=6;class lk{constructor(e){var t,s,o,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:ok,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,u,d,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bw(this),this.idTokenSubscription=new Bw(this),this.beforeStateQueue=new sk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fi(t)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Hh(this,{idToken:e}),s=await ir._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Tn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===m)&&(g!=null&&g.user)&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $h(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tn(this.app))return Promise.reject(gi(this));const t=e?dt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tn(this.app)?Promise.reject(gi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tn(this.app)?Promise.reject(gi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ak(this),t=new lk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await nk(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fi(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[fi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Qb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&UI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function xi(r){return dt(r)}class Bw{constructor(e){this.auth=e,this.observer=null,this.addObserver=nC(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ad={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uk(r){Ad=r}function Wb(r){return Ad.loadJS(r)}function hk(){return Ad.recaptchaEnterpriseScript}function dk(){return Ad.gapiScript}function fk(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class mk{constructor(){this.enterprise=new pk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class pk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const gk="recaptcha-enterprise",Xb="NO_RECAPTCHA";class yk{constructor(e){this.type=gk,this.auth=xi(e)}async verify(e="verify",t=!1){async function s(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{KI(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new YI(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(g=>{m(g)})})}function o(u,d,m){const g=window.grecaptcha;Pw(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(Xb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mk().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{s(this.auth).then(m=>{if(!t&&Pw(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=hk();g.length!==0&&(g+=m),Wb(g).then(()=>{o(m,u,d)}).catch(y=>{d(y)})}}).catch(m=>{d(m)})})}}async function zw(r,e,t,s=!1,o=!1){const u=new yk(r);let d;if(o)d=Xb;else try{d=await u.verify(t)}catch{d=await u.verify(t,!0)}const m=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Gh(r,e,t,s,o){var u;if(!((u=r._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await zw(r,e,t,t==="getOobCode");return s(r,d)}else return s(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await zw(r,e,t,t==="getOobCode");return s(r,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(r,e){const t=td(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(vi(u,e??{}))return o;Wn(o,"already-initialized")}return t.initialize({options:e})}function _k(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(fi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function wk(r,e,t){const s=xi(r);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=Zb(e),{host:d,port:m}=Ek(e),g=m===null?"":`:${m}`,y={url:`${u}//${d}${g}/`},_=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(vi(y,s.config.emulator)&&vi(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,ma(d)?(Do("Auth",!0),Up(`${u}//${d}${g}`)):Tk()}function Zb(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Ek(r){const e=Zb(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:Fw(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:Fw(d)}}}function Fw(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Tk(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return di("not implemented")}_getIdTokenResponse(e){return di("not implemented")}_linkToIdToken(e,t){return di("not implemented")}_getReauthenticationResolver(e){return di("not implemented")}}async function bk(r,e){return Vr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(r,e){return Pc(r,"POST","/v1/accounts:signInWithPassword",bi(r,e))}async function Ak(r,e){return Vr(r,"POST","/v1/accounts:sendOobCode",bi(r,e))}async function Sk(r,e){return Ak(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(r,e){return Pc(r,"POST","/v1/accounts:signInWithEmailLink",bi(r,e))}async function Rk(r,e){return Pc(r,"POST","/v1/accounts:signInWithEmailLink",bi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends Vg{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new bc(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new bc(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gh(e,t,"signInWithPassword",xk);case"emailLink":return Ck(e,{email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gh(e,s,"signUpPassword",bk);case"emailLink":return Rk(e,{idToken:t,email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(r,e){return Pc(r,"POST","/v1/accounts:signInWithIdp",bi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="http://localhost";class da extends Vg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new da(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,u=Dg(t,["providerId","signInMethod"]);if(!s||!o)return null;const d=new da(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return wo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,wo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wo(e,t)}buildRequest(){const e={requestUri:Nk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ik(r){const e=tc(nc(r)).link,t=e?tc(nc(e)).deep_link_id:null,s=tc(nc(r)).deep_link_id;return(s?tc(nc(s)).link:null)||s||t||e||r}class Bg{constructor(e){var t,s,o,u,d,m;const g=tc(nc(e)),y=(t=g.apiKey)!==null&&t!==void 0?t:null,_=(s=g.oobCode)!==null&&s!==void 0?s:null,b=jk((o=g.mode)!==null&&o!==void 0?o:null);Se(y&&_&&b,"argument-error"),this.apiKey=y,this.operation=b,this.code=_,this.continueUrl=(u=g.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(d=g.lang)!==null&&d!==void 0?d:null,this.tenantId=(m=g.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=Ik(e);try{return new Bg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.providerId=Bo.PROVIDER_ID}static credential(e,t){return bc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Bg.parseLink(t);return Se(s,"argument-error"),bc._fromEmailAndCode(e,s.code,s.tenantId)}}Bo.PROVIDER_ID="password";Bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends zg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Mc{constructor(){super("facebook.com")}static credential(e){return da._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return da._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return hi.credential(t,s)}catch{return null}}}hi.GOOGLE_SIGN_IN_METHOD="google.com";hi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Mc{constructor(){super("github.com")}static credential(e){return da._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.GITHUB_SIGN_IN_METHOD="github.com";ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Mc{constructor(){super("twitter.com")}static credential(e,t){return da._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return rs.credential(t,s)}catch{return null}}}rs.TWITTER_SIGN_IN_METHOD="twitter.com";rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kk(r,e){return Pc(r,"POST","/v1/accounts:signUp",bi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await ir._fromIdTokenResponse(e,s,o),d=qw(s);return new fa({user:u,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=qw(s);return new fa({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function qw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends Lr{constructor(e,t,s,o){var u;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Yh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Yh(e,t,s,o)}}function Jb(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Yh._fromErrorAndOperation(r,u,e,s):u})}async function Dk(r,e,t=!1){const s=await jo(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return fa._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(r,e,t=!1){const{auth:s}=r;if(Tn(s.app))return Promise.reject(gi(s));const o="reauthenticate";try{const u=await jo(r,Jb(s,o,e,r),t);Se(u.idToken,s,"internal-error");const d=Ug(u.idToken);Se(d,s,"internal-error");const{sub:m}=d;return Se(r.uid===m,s,"user-mismatch"),fa._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Wn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ex(r,e,t=!1){if(Tn(r.app))return Promise.reject(gi(r));const s="signIn",o=await Jb(r,s,e),u=await fa._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(u.user),u}async function Pk(r,e){return ex(xi(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(r){const e=xi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Mk(r,e,t){const s=xi(r);await Gh(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Sk)}async function Uk(r,e,t){if(Tn(r.app))return Promise.reject(gi(r));const s=xi(r),d=await Gh(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kk).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&tx(r),g}),m=await fa._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function Lk(r,e,t){return Tn(r.app)?Promise.reject(gi(r)):Pk(dt(r),Bo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&tx(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(r,e){return Vr(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Np(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=dt(r),u={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await jo(s,Vk(s.auth,u));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const m=s.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function Bk(r,e,t,s){return dt(r).onIdTokenChanged(e,t,s)}function zk(r,e,t){return dt(r).beforeAuthStateChanged(e,t)}function Fk(r,e,t,s){return dt(r).onAuthStateChanged(e,t,s)}function qk(r){return dt(r).signOut()}const Kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kh,"1"),this.storage.removeItem(Kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=1e3,$k=10;class rx extends nx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Kb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);ik()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,$k):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},Hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rx.type="LOCAL";const Gk=rx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix extends nx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ix.type="SESSION";const sx=ix;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Sd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async y=>y(t.origin,u)),g=await Yk(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,g)=>{const y=Fg("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(b){const T=b;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(T.data.response);break;default:clearTimeout(_),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(){return window}function Qk(r){Dr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(){return typeof Dr().WorkerGlobalScope<"u"&&typeof Dr().importScripts=="function"}async function Wk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xk(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function Zk(){return ax()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="firebaseLocalStorageDb",Jk=1,Qh="firebaseLocalStorage",lx="fbase_key";class Uc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Cd(r,e){return r.transaction([Qh],e?"readwrite":"readonly").objectStore(Qh)}function eD(){const r=indexedDB.deleteDatabase(ox);return new Uc(r).toPromise()}function jp(){const r=indexedDB.open(ox,Jk);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Qh,{keyPath:lx})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Qh)?e(s):(s.close(),await eD(),e(await jp()))})})}async function Hw(r,e,t){const s=Cd(r,!0).put({[lx]:e,value:t});return new Uc(s).toPromise()}async function tD(r,e){const t=Cd(r,!1).get(e),s=await new Uc(t).toPromise();return s===void 0?null:s.value}function $w(r,e){const t=Cd(r,!0).delete(e);return new Uc(t).toPromise()}const nD=800,rD=3;class cx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>rD)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ax()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sd._getInstance(Zk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Wk(),!this.activeServiceWorker)return;this.sender=new Kk(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Xk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jp();return await Hw(e,Kh,"1"),await $w(e,Kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Hw(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>tD(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$w(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Cd(o,!1).getAll();return new Uc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cx.type="LOCAL";const iD=cx;new Oc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(r,e){return e?fi(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends Vg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function sD(r){return ex(r.auth,new qg(r),r.bypassAuthState)}function aD(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),Ok(t,new qg(r),r.bypassAuthState)}async function oD(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),Dk(t,new qg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sD;case"linkViaPopup":case"linkViaRedirect":return oD;case"reauthViaPopup":case"reauthViaRedirect":return aD;default:Wn(this.auth,"internal-error")}}resolve(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=new Oc(2e3,1e4);async function cD(r,e,t){if(Tn(r.app))return Promise.reject(or(r,"operation-not-supported-in-this-environment"));const s=xi(r);LI(r,e,zg);const o=ux(s,t);return new sa(s,"signInViaPopup",e,o).executeNotNull()}class sa extends hx{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,sa.currentPopupAction&&sa.currentPopupAction.cancel(),sa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Ti(this.filter.length===1,"Popup operations only handle one event");const e=Fg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lD.get())};e()}}sa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="pendingRedirect",Ch=new Map;class hD extends hx{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Ch.get(this.auth._key());if(!e){try{const s=await dD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Ch.set(this.auth._key(),e)}return this.bypassAuthState||Ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dD(r,e){const t=pD(e),s=mD(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function fD(r,e){Ch.set(r._key(),e)}function mD(r){return fi(r._redirectPersistence)}function pD(r){return Sh(uD,r.config.apiKey,r.name)}async function gD(r,e,t=!1){if(Tn(r.app))return Promise.reject(gi(r));const s=xi(r),o=ux(s,e),d=await new hD(s,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=10*60*1e3;class vD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_D(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!dx(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(or(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gw(e))}saveEventToCache(e){this.cachedEventUids.add(Gw(e)),this.lastProcessedEventTime=Date.now()}}function Gw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function dx({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _D(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dx(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(r,e={}){return Vr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TD=/^https?/;async function bD(r){if(r.config.emulator)return;const{authorizedDomains:e}=await wD(r);for(const t of e)try{if(xD(t))return}catch{}Wn(r,"unauthorized-domain")}function xD(r){const e=Cp(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!TD.test(t))return!1;if(ED.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=new Oc(3e4,6e4);function Yw(){const r=Dr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function SD(r){return new Promise((e,t)=>{var s,o,u;function d(){Yw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yw(),t(or(r,"network-request-failed"))},timeout:AD.get()})}if(!((o=(s=Dr().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Dr().gapi)===null||u===void 0)&&u.load)d();else{const m=fk("iframefcb");return Dr()[m]=()=>{gapi.load?d():t(or(r,"network-request-failed"))},Wb(`${dk()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Rh=null,e})}let Rh=null;function CD(r){return Rh=Rh||SD(r),Rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=new Oc(5e3,15e3),ND="__/auth/iframe",jD="emulator/auth/iframe",ID={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DD(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Mg(e,jD):`https://${r.config.authDomain}/${ND}`,s={apiKey:e.apiKey,appName:r.name,v:pa},o=kD.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${Nc(s).slice(1)}`}async function OD(r){const e=await CD(r),t=Dr().gapi;return Se(t,r,"internal-error"),e.open({where:document.body,url:DD(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ID,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=or(r,"network-request-failed"),m=Dr().setTimeout(()=>{u(d)},RD.get());function g(){Dr().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MD=500,UD=600,LD="_blank",VD="http://localhost";class Kw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BD(r,e,t,s=MD,o=UD){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g=Object.assign(Object.assign({},PD),{width:s.toString(),height:o.toString(),top:u,left:d}),y=un().toLowerCase();t&&(m=qb(y)?LD:t),zb(y)&&(e=e||VD,g.scrollbars="yes");const _=Object.entries(g).reduce((T,[j,C])=>`${T}${j}=${C},`,"");if(rk(y)&&m!=="_self")return zD(e||"",m),new Kw(null);const b=window.open(e||"",m,_);Se(b,r,"popup-blocked");try{b.focus()}catch{}return new Kw(b)}function zD(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="__/auth/handler",qD="emulator/auth/handler",HD=encodeURIComponent("fac");async function Qw(r,e,t,s,o,u){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:pa,eventId:o};if(e instanceof zg){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",tC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,b]of Object.entries({}))d[_]=b}if(e instanceof Mc){const _=e.getScopes().filter(b=>b!=="");_.length>0&&(d.scopes=_.join(","))}r.tenantId&&(d.tid=r.tenantId);const m=d;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await r._getAppCheckToken(),y=g?`#${HD}=${encodeURIComponent(g)}`:"";return`${$D(r)}?${Nc(m).slice(1)}${y}`}function $D({config:r}){return r.emulator?Mg(r,qD):`https://${r.authDomain}/${FD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="webStorageSupport";class GD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sx,this._completeRedirectFn=gD,this._overrideRedirectResult=fD}async _openPopup(e,t,s,o){var u;Ti((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await Qw(e,t,s,Cp(),o);return BD(e,d,Fg())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await Qw(e,t,s,Cp(),o);return Qk(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(Ti(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await OD(e),s=new vD(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Zm,{type:Zm},o=>{var u;const d=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Zm];d!==void 0&&t(!!d),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Kb()||Fb()||Lg()}}const YD=GD;var Ww="@firebase/auth",Xw="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WD(r){la(new cs("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;Se(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qb(r)},y=new ck(s,o,u,g);return _k(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),la(new cs("auth-internal",e=>{const t=xi(e.getProvider("auth").getImmediate());return(s=>new KD(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(Ww,Xw,QD(r)),jr(Ww,Xw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=5*60,ZD=xE("authIdTokenMaxAge")||XD;let Zw=null;const JD=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>ZD)return;const o=t==null?void 0:t.token;Zw!==o&&(Zw=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function eO(r=Bp()){const e=td(r,"auth");if(e.isInitialized())return e.getImmediate();const t=vk(r,{popupRedirectResolver:YD,persistence:[iD,Gk,sx]}),s=xE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=JD(u.toString());zk(t,d,()=>d(t.currentUser)),Bk(t,m=>d(m))}}const o=EE("auth");return o?wk(t,`http://${o}`):Do("Auth",!1),t}function tO(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}uk({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=or("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",tO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WD("Browser");const nO={apiKey:"AIzaSyAMKxVJqQyhB726ZIpqzrnlJwlVMEompzI",authDomain:"chocolate-review-web.firebaseapp.com",projectId:"chocolate-review-web",storageBucket:"chocolate-review-web.firebasestorage.app",messagingSenderId:"40760554846",appId:"1:40760554846:web:af7701c50e3a44c13acbcf",measurementId:"G-CQXWMKJDQW"},Hg=RE(nO),Ve=c2(Hg),Rd=kI(Hg),gs=eO(Hg),Nd=ln(Ve,"chocolates");ln(Ve,"makers");ln(Ve,"reviews");const fx=ln(Ve,"tags"),mx=async r=>{if(!r)return null;try{const e=await yn(yt(Ve,"makers",r));if(e.exists()){const t=e.data();return t.name||t.brand||t.title||t.maker||"Unknown Maker"}}catch(e){console.error("Error fetching maker:",e)}return"Unknown Maker"},rO=async r=>{if(r.maker&&typeof r.maker=="string"&&r.maker!=="Unknown Maker")return console.log("✅ Chocolate already has direct maker name:",r.maker),r;if(r.makerId||r.MakerID){console.log("🔄 Looking up maker by ID for legacy chocolate");const e=await mx(r.makerId||r.MakerID);return{...r,maker:e||"Unknown Maker"}}return{...r,maker:"Unknown Maker"}},jd=async r=>{console.log("🔄 Enriching",r.length,"chocolates with maker names...");const e=await Promise.all(r.map(t=>rO(t)));return console.log("✅ Enrichment complete"),e},$g=async()=>{try{console.log("📥 Fetching all chocolates...");const e=(await Kn(Nd)).docs.map(s=>({id:s.id,...s.data()}));console.log("📊 Raw chocolates fetched:",e.length);const t=await jd(e);return console.log("✅ All chocolates enriched with maker names"),t}catch(r){throw console.error("💥 Error fetching chocolates:",r),r}},px=async r=>{console.log("🔍 getChocolateById called with ID:",r);try{const e=yt(Ve,"chocolates",r),t=await yn(e);if(t.exists()){const s={id:t.id,...t.data()};if(console.log("📄 Raw chocolate data from database:",{maker:s.maker,makerId:s.makerId,MakerID:s.MakerID,isUserContributed:s.isUserContributed}),s.isUserContributed&&s.maker&&typeof s.maker=="string")return console.log("✅ User-contributed chocolate with direct maker name:",s.maker),s;if(s.maker&&typeof s.maker=="string"&&s.maker!=="Unknown Maker")return console.log("✅ Chocolate with direct maker name:",s.maker),s;if(s.makerId||s.MakerID){console.log("🔄 Legacy chocolate, looking up maker by ID:",s.makerId||s.MakerID);const o=await mx(s.makerId||s.MakerID),u={...s,maker:o||"Unknown Maker"};return console.log("✅ Enriched legacy chocolate data with maker:",u.maker),u}return console.log("❌ No maker information found, using Unknown Maker"),{...s,maker:"Unknown Maker"}}else throw console.log("❌ Chocolate not found in database"),new Error("Chocolate not found")}catch(e){throw console.error("💥 Error in getChocolateById:",e),e}},gx=async r=>{try{console.log("🔍 Searching for:",r);const e=await Kn(fx),t={};e.docs.forEach(g=>{const y=g.data();t[g.id]=y.name.toLowerCase()});const o=(await Kn(Nd)).docs.map(g=>({id:g.id,...g.data()}));console.log("📊 Total chocolates in database:",o.length);const u=await jd(o),d=r.toLowerCase().trim();console.log("🎯 Searching for term:",d);const m=u.filter(g=>{const y=g.name&&g.name.toLowerCase().includes(d),_=g.maker&&g.maker.toLowerCase().includes(d),b=g.origin&&g.origin.toLowerCase().includes(d),T=g.type&&g.type.toLowerCase().includes(d);let j=!1;g.tagIds&&Array.isArray(g.tagIds)&&(j=g.tagIds.some(k=>t[k]&&t[k].includes(d)));const C=y||_||b||T||j;return C&&console.log("✅ Match found:",g.name,"by",g.maker),C});return console.log("🎯 Search results:",m.length,"matches found"),m}catch(e){throw console.error("💥 Error searching chocolates:",e),e}},iO=async(r=10)=>{try{console.log("⭐ Fetching featured chocolates...");const e=ar(ln(Ve,"chocolates"),Rr("averageRating",">",0),rr("averageRating","desc"),rr("reviewCount","desc"),Fh(r)),t=await Kn(e);if(t.empty)return console.log("📭 No chocolates found in database, returning sample data"),Jw(r);const s=t.docs.map(u=>({id:u.id,...u.data()}));console.log(`📊 Found ${s.length} featured chocolates in database`);const o=await jd(s);return console.log("✅ Featured chocolates enriched with maker names"),o}catch(e){return console.error("💥 Error getting featured chocolates:",e),console.log("🔄 Falling back to sample data due to error"),Jw(r)}},sO=async r=>{try{let e;r?e=ar(ln(Ve,"chocolates"),Rr(r.field,r.operator,r.value),rr("averageRating","desc"),Fh(100)):e=ar(ln(Ve,"chocolates"),rr("averageRating","desc"),Fh(100));const t=await Kn(e);if(t.empty)return eE(r==null?void 0:r.value);const s=t.docs.map(o=>({id:o.id,...o.data()}));return await jd(s)}catch(e){return console.error("Error getting chocolates by category:",e),eE(r==null?void 0:r.value)}},aO=async(r,e)=>{let t=null;if(e){const o=xd(Rd,`chocolate-images/${Date.now()}_${e.name}`);await Td(o,e),t=await bd(o)}return{id:(await Ag(Nd,{...r,imageUrl:t,createdAt:new Date,updatedAt:new Date,averageRating:0,reviewCount:0})).id,...r,imageUrl:t}},yx=async()=>(await Kn(fx)).docs.map(e=>({id:e.id,...e.data()})),oO=async(r,e)=>{try{const t=xd(Rd,`chocolate-images/${r}_${Date.now()}`);await Td(t,e);const s=await bd(t),o=yt(Ve,"chocolates",r);return await Qn(o,{imageUrl:s,updatedAt:new Date}),s}catch(t){throw console.error("Error updating chocolate image:",t),t}},Jw=r=>[{id:"1",name:"Madagascan Dark 72%",maker:"Terroir Artisan",type:"Dark",origin:"Madagascar",cacaoPercentage:72,averageRating:4.8,ratings:186,imageUrl:"/placeholder-chocolate.jpg"},{id:"2",name:"Sea Salt Caramel",maker:"Wild Coast Chocolate",type:"Dark Milk",origin:"Ecuador",cacaoPercentage:55,averageRating:4.9,ratings:203,imageUrl:"/placeholder-chocolate.jpg"},{id:"3",name:"Peruvian Single Origin",maker:"Craft Origins",type:"Dark",origin:"Peru",cacaoPercentage:70,averageRating:4.7,ratings:156,imageUrl:"/placeholder-chocolate.jpg"},{id:"4",name:"Vanilla Bean White",maker:"Alpine Confections",type:"White",origin:"Various",cacaoPercentage:33,averageRating:4.5,ratings:98,imageUrl:"/placeholder-chocolate.jpg"},{id:"5",name:"Hazelnut Crunch",maker:"Artisan Delights",type:"Milk",origin:"Italy",cacaoPercentage:45,averageRating:4.6,ratings:124,imageUrl:"/placeholder-chocolate.jpg"}].slice(0,r),eE=r=>[{id:"d1",name:"Madagascar 72% Dark",maker:"Terroir Artisan",type:"Dark",origin:"Madagascar",cacaoPercentage:72,averageRating:4.8,ratings:186,imageUrl:"/placeholder-chocolate.jpg"}],lO=async(r,e)=>{console.log("🍫 Starting addUserChocolate process..."),console.log("📄 Chocolate data received:",r),console.log("🖼️ Image file received:",e?{name:e.name,size:`${(e.size/1024/1024).toFixed(2)}MB`,type:e.type}:"No image file");try{let t=null;if(e){console.log("📤 Starting image upload...");const d=Date.now(),m=e.name.replace(/[^a-zA-Z0-9.-]/g,"_"),g=`user-contributions/${r.createdBy}/${d}_${m}`;console.log("📁 Upload path:",g);const y=xd(Rd,g);try{console.log("⬆️ Uploading to Firebase Storage...");const _=await Td(y,e);console.log("✅ Upload successful, getting download URL..."),t=await bd(y),console.log("🔗 Download URL obtained:",t)}catch(_){console.error("❌ Image upload failed:",_),console.log("⚠️ Proceeding without image due to upload failure"),t=`https://placehold.co/300x300?text=${encodeURIComponent(r.name.substring(0,20))}`}}else console.log("📷 No image provided, using placeholder"),t=`https://placehold.co/300x300?text=${encodeURIComponent(r.name.substring(0,20))}`;const s={name:r.name,maker:r.maker,type:r.type,origin:r.origin,cacaoPercentage:r.cacaoPercentage,description:r.description,tags:r.tags||[],imageUrl:t,createdBy:r.createdBy,createdByName:r.createdByName,isUserContributed:!0,status:"approved",createdAt:cn(),updatedAt:cn(),contributionDate:cn(),averageRating:0,reviewCount:0,ratings:0};console.log("💾 Final chocolate object (check maker field):",{maker:s.maker,isUserContributed:s.isUserContributed,name:s.name});const o=await Ag(Nd,s);console.log("✅ Chocolate saved with ID:",o.id);try{console.log("📊 Updating user contribution stats..."),await cO(r.createdBy,"chocolatesAdded"),await uO(r.createdBy),console.log("✅ User stats updated")}catch(d){console.error("⚠️ Failed to update user stats (non-critical):",d)}const u={id:o.id,...s,maker:r.maker};return console.log("🎉 addUserChocolate completed successfully:",u),u}catch(t){throw console.error("💥 Error in addUserChocolate:",t),console.error("📋 Error details:",{code:t.code,message:t.message,stack:t.stack}),t}},cO=async(r,e,t=1)=>{try{const s=yt(Ve,"users",r);(await yn(s)).exists()?await Qn(s,{[`stats.${e}`]:x2(t),updatedAt:cn()}):await pb(s,{stats:{[e]:t},createdAt:cn(),updatedAt:cn()},{merge:!0})}catch(s){throw console.error("Error updating user contribution stats:",s),s}},uO=async r=>{try{const e=yt(Ve,"users",r),t=await yn(e);if(!t.exists())return;const s=t.data(),o=s.stats||{},u=s.badges||[],d=[...u],m=o.chocolatesAdded||0;m>=1&&!d.includes("Contributor")&&d.push("Contributor"),m>=5&&!d.includes("Chocolate Scout")&&d.push("Chocolate Scout"),m>=10&&!d.includes("Database Builder")&&d.push("Database Builder"),m>=25&&!d.includes("Chocolate Curator")&&d.push("Chocolate Curator"),m>=50&&!d.includes("Master Contributor")&&d.push("Master Contributor"),d.length>u.length&&await Qn(e,{badges:d,updatedAt:cn()})}catch(e){console.error("Error checking and awarding badges:",e)}},hO=async r=>{try{console.log("🔍 Getting reviews for user:",r);const e=ar(ln(Ve,"reviews"),Rr("userId","==",r),rr("createdAt","desc")),t=await Kn(e);if(t.empty)return console.log("No reviews found for user"),[];const s=[];for(const o of t.docs){const u={id:o.id,...o.data()};if(console.log("📝 Processing review:",u.id),u.chocolate&&u.chocolate.name)console.log("✅ Review already has chocolate data"),s.push(u);else try{console.log("🔍 Fetching chocolate data for ID:",u.chocolateId);const d=await px(u.chocolateId);u.chocolate={id:d.id,name:d.name,maker:d.maker,imageUrl:d.imageUrl||"https://placehold.co/300x300?text=Chocolate"},console.log("✅ Added chocolate data:",u.chocolate.name),s.push(u)}catch(d){console.error("❌ Failed to fetch chocolate for review:",u.id,d),u.chocolate={id:u.chocolateId||"unknown",name:"Unknown Chocolate",maker:"Unknown Maker",imageUrl:"https://placehold.co/300x300?text=Unknown"},s.push(u)}}return console.log("✅ Processed",s.length,"reviews with chocolate data"),s}catch(e){return console.error("Error getting user reviews:",e),[]}},vx=async r=>{try{const e={...r,createdAt:cn()},t=await Ag(ln(Ve,"reviews"),e);return await dO(r.chocolateId),await fO(r.userId),{id:t.id,...e}}catch(e){throw console.error("Error adding review:",e),e}},dO=async r=>{try{const e=ar(ln(Ve,"reviews"),Rr("chocolateId","==",r)),t=await Kn(e);if(!t.empty){const s=t.docs.map(m=>m.data()),u=s.reduce((m,g)=>m+g.rating,0)/s.length,d=yt(Ve,"chocolates",r);await Qn(d,{averageRating:u,reviewCount:s.length,updatedAt:cn()})}}catch(e){throw console.error("Error updating chocolate rating:",e),e}},fO=async r=>{try{const e=ar(ln(Ve,"reviews"),Rr("userId","==",r)),s=(await Kn(e)).size,o=yt(Ve,"users",r);await Qn(o,{reviewCount:s,updatedAt:cn()})}catch(e){console.error("Error updating user review count:",e)}},mO=async(r=3)=>{try{const e=ar(ln(Ve,"reviews"),rr("createdAt","desc"),Fh(10)),t=await Kn(e);if(!t.empty){const s=[];for(const m of t.docs){const g={id:m.id,...m.data()};try{const y=await yn(yt(Ve,"chocolates",g.chocolateId));y.exists()&&(g.chocolate={id:y.id,...y.data()},s.push(g))}catch(y){console.error("Error fetching chocolate for review:",y)}}const o=s.map(m=>{const g=m.rating||0,y=m.text?m.text.length:0,_=m.createdAt?(Date.now()-m.createdAt.toDate().getTime())/(1e3*60*60*24):999,b=g*.4+Math.min(y/200,1)*.3+Math.max(0,(30-_)/30)*.3;return{...m,featuredScore:b}}),u=[],d=new Set;return o.sort((m,g)=>g.featuredScore-m.featuredScore).forEach(m=>{!d.has(m.chocolateId)&&u.length<r&&(u.push(m),d.add(m.chocolateId))}),u}return[]}catch(e){return console.error("Error getting featured reviews:",e),[]}},pO=async(r,e,t)=>{try{console.log("Creating user account...");const s=await Uk(gs,r,e);console.log("Updating user profile..."),await Np(s.user,{displayName:t}),console.log("Creating user profile in Firestore...");const o=await Wh(s.user,{displayName:t});return console.log("User registration complete"),s.user}catch(s){throw console.error("Registration error:",s),s}},gO=async(r,e)=>{try{return(await Lk(gs,r,e)).user}catch(t){throw t}},yO=async()=>{try{console.log("Starting Google sign-in process");const r=new hi;r.setCustomParameters({prompt:"select_account"}),console.log("Initialized Google provider");const e=await cD(gs,r);return console.log("Google sign-in successful",e.user.uid),console.log("Checking if user profile exists"),(await yn(yt(Ve,"users",e.user.uid))).exists()?console.log("User profile already exists"):(console.log("Creating new user profile for Google user"),await Wh(e.user)),e.user}catch(r){throw console.error("Google sign-in error:",r),r.code==="auth/popup-closed-by-user"?new Error("Sign-in cancelled. You closed the login popup."):r.code==="auth/popup-blocked"?new Error("Login popup was blocked. Please enable popups for this site."):r.code==="auth/cancelled-popup-request"?new Error("Sign-in cancelled."):r}},Wh=async(r,e={})=>{if(!r)throw new Error("User object is required");const t=yt(Ve,"users",r.uid);try{if((await yn(t)).exists())return console.log("Profile already exists, returning existing profile"),oa(r.uid);const{displayName:o,email:u,photoURL:d}=r,m={displayName:o||e.displayName||"",email:u,photoURL:d||"",bio:"",location:"",favoriteChocolateTypes:[],isProfilePublic:!0,createdAt:cn(),reviewCount:0,tastingCount:0,favorites:[],badges:["Newcomer"],preferences:{favoriteTypes:[],dietaryRestrictions:[],flavorPreferences:[]},wantToTry:[],...e};return console.log("Creating profile with data:",m),await pb(t,m),console.log("Profile created successfully"),oa(r.uid)}catch(s){throw console.error("Error creating user profile:",s),new Error(`Failed to create user profile: ${s.message}`)}},oa=async r=>{try{const e=await yn(yt(Ve,"users",r));return e.exists()?{id:e.id,...e.data()}:(console.log("User profile not found for:",r),null)}catch(e){throw console.error("Error getting user profile:",e),e}},vO=async(r,e)=>{try{const t=`profile-pictures/${r}-${Date.now()}.${e.name.split(".").pop()}`,s=xd(Rd,t);console.log("Uploading profile picture...");const o=await Td(s,e),u=await bd(o.ref);return console.log("Profile picture uploaded successfully:",u),u}catch(t){throw console.error("Error uploading profile picture:",t),new Error(`Failed to upload profile picture: ${t.message}`)}},_O=async(r,e)=>{try{const t=yt(Ve,"users",r);if(e.profilePicture){console.log("Uploading new profile picture...");const s=await oa(r),o=await vO(r,e.profilePicture),u={};e.displayName&&(u.displayName=e.displayName),o&&(u.photoURL=o),Object.keys(u).length>0&&await Np(gs.currentUser,u);const d={...e,photoURL:o,updatedAt:cn()};return delete d.profilePicture,await Qn(t,d),console.log("Profile updated with new picture"),await oa(r)}else{const s={...e,updatedAt:cn()};return e.displayName&&await Np(gs.currentUser,{displayName:e.displayName}),await Qn(t,s),console.log("Profile updated successfully"),await oa(r)}}catch(t){throw console.error("Error updating user profile:",t),new Error(`Failed to update profile: ${t.message}`)}},wO=async()=>{try{return await qk(gs),!0}catch(r){throw r}},EO=async r=>{try{return await Mk(gs,r),!0}catch(e){throw e}},TO=r=>Fk(gs,r),_x=P.createContext();function Es(){return P.useContext(_x)}function bO({children:r}){const[e,t]=P.useState(null),[s,o]=P.useState(null),[u,d]=P.useState(!0),[m,g]=P.useState(null),[y,_]=P.useState(!1);P.useEffect(()=>TO(async C=>{d(!0),g(null);try{if(C){console.log("User authenticated:",C.uid),t(C);try{console.log("Loading user profile...");let k=await oa(C.uid);if(!k){console.log("No profile found, creating new profile..."),_(!0);try{k=await Wh(C),console.log("Profile created successfully:",k==null?void 0:k.id)}catch(I){console.error("Error creating profile:",I),await new Promise(z=>setTimeout(z,1e3));try{k=await Wh(C),console.log("Profile created on retry:",k==null?void 0:k.id)}catch(z){console.error("Profile creation failed on retry:",z),k={id:C.uid,displayName:C.displayName||"",email:C.email,photoURL:C.photoURL||"",reviewCount:0,tastingCount:0,favorites:[],badges:["Newcomer"],preferences:{favoriteTypes:[],dietaryRestrictions:[],flavorPreferences:[]},wantToTry:[]},console.log("Using minimal profile as fallback")}}finally{_(!1)}}console.log("User profile loaded:",k?"success":"failed"),o(k)}catch(k){console.error("Error loading user profile:",k),g("Failed to load user profile"),o({id:C.uid,displayName:C.displayName||"User",email:C.email,photoURL:C.photoURL||"",reviewCount:0,tastingCount:0,favorites:[],badges:["Newcomer"],preferences:{favoriteTypes:[],dietaryRestrictions:[],flavorPreferences:[]},wantToTry:[]})}}else console.log("No user authenticated"),t(null),o(null),_(!1)}catch(k){console.error("Auth state change error:",k),g("Authentication error")}finally{d(!1)}}),[]);const T={currentUser:e,userProfile:s,loading:u,error:m,profileCreating:y,refreshProfile:async()=>{if(e)try{const j=await oa(e.uid);o(j)}catch(j){console.error("Error refreshing profile:",j)}}};return l.jsx(_x.Provider,{value:T,children:r})}const xO=async(r,e)=>{try{const t=yt(Ve,"users",r);return await Qn(t,{favorites:Cg(e),updatedAt:cn()}),!0}catch(t){throw console.error("Error removing from favorites:",t),t}},AO=async r=>{try{const e=await yn(yt(Ve,"users",r));if(!e.exists())return[];const t=e.data().favorites||[];if(t.length===0)return[];const s=[];for(const o of t)try{const u=await yn(yt(Ve,"chocolates",o));u.exists()&&s.push({id:u.id,...u.data()})}catch(u){console.error(`Error fetching chocolate ${o}:`,u)}return s}catch(e){throw console.error("Error getting favorite chocolates:",e),e}},SO=async(r,e)=>{try{const t=await yn(yt(Ve,"users",r));return t.exists()?(t.data().favorites||[]).includes(e):!1}catch(t){return console.error("Error checking if chocolate is favorited:",t),!1}},CO=async(r,e)=>{try{const t=yt(Ve,"users",r),s=await yn(t);if(!s.exists())throw new Error("User not found");return(s.data().favorites||[]).includes(e)?(await Qn(t,{favorites:Cg(e),updatedAt:cn()}),!1):(await Qn(t,{favorites:gb(e),updatedAt:cn()}),!0)}catch(t){throw console.error("Error toggling favorite:",t),t}},RO=async(r,e)=>{try{const t=yt(Ve,"users",r),s={chocolateId:e.id,name:e.name,maker:e.maker,imageUrl:e.imageUrl||"https://placehold.co/300x300?text=Chocolate",addedAt:new Date};return await Qn(t,{wantToTry:gb(s)}),s}catch(t){throw console.error("Error adding to want to try:",t),t}},wx=async(r,e)=>{var t;try{const s=yt(Ve,"users",r),d=(((t=(await yn(s)).data())==null?void 0:t.wantToTry)||[]).find(m=>m.chocolateId===e.id);d&&await Qn(s,{wantToTry:Cg(d)})}catch(s){throw console.error("Error removing from want to try:",s),s}},NO=async(r,e)=>{var t;try{const s=yt(Ve,"users",r);return(((t=(await yn(s)).data())==null?void 0:t.wantToTry)||[]).some(d=>d.chocolateId===e)}catch(s){return console.error("Error checking want to try status:",s),!1}},jO=async r=>{var e;try{const t=yt(Ve,"users",r),s=await yn(t);return s.exists()?(((e=s.data())==null?void 0:e.wantToTry)||[]).sort((u,d)=>{const m=u.addedAt instanceof Date?u.addedAt:new Date(u.addedAt);return(d.addedAt instanceof Date?d.addedAt:new Date(d.addedAt))-m}):[]}catch(t){throw console.error("Error getting want to try list:",t),t}};function Ex({chocolateId:r,size:e="medium",className:t="",showText:s=!1}){const{currentUser:o}=Es(),[u,d]=P.useState(!1),[m,g]=P.useState(!1),[y,_]=P.useState(!1);P.useEffect(()=>{(async()=>{if(o&&r)try{const k=await SO(o.uid,r);d(k)}catch(k){console.error("Error checking favorite status:",k)}})()},[o,r]);const b=async C=>{if(C.preventDefault(),C.stopPropagation(),!o){alert("Please sign in to save favorites!");return}if(!m)try{g(!0),_(!0);const k=await CO(o.uid,r);d(k),setTimeout(()=>_(!1),600)}catch(k){console.error("Error toggling favorite:",k),alert("Error updating favorite. Please try again.")}finally{g(!1)}};if(!o)return null;const T=()=>m?"Updating...":u?"Favorited":"Add to Favorites",j=t.includes("detail-page");return l.jsxs("button",{onClick:b,disabled:m,className:`
        favorite-button 
        ${e} 
        ${u?"favorited":""} 
        ${y?"animating":""} 
        ${m?"loading":""} 
        ${t}
      `,title:u?"Remove from favorites":"Add to favorites","aria-label":u?"Remove from favorites":"Add to favorites",children:[l.jsx("svg",{className:"heart-icon",viewBox:"0 0 24 24",fill:u?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),(s||j)&&l.jsx("span",{className:"button-text",children:T()}),m&&l.jsx("div",{className:"loading-spinner",children:l.jsx("svg",{className:"spinner",viewBox:"0 0 24 24",children:l.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"60",strokeDashoffset:"60",children:l.jsx("animate",{attributeName:"stroke-dashoffset",dur:"1s",values:"60;0",repeatCount:"indefinite"})})})})]})}function Tx({chocolate:r,currentUser:e,className:t="",showText:s=!1,size:o="medium"}){const[u,d]=P.useState(!1),[m,g]=P.useState(!1),[y,_]=P.useState(!1);P.useEffect(()=>{e&&r&&b()},[e,r]);const b=async()=>{try{const k=await NO(e.uid,r.id);d(k)}catch(k){console.error("Error checking want to try status:",k)}},T=async k=>{if(k.preventDefault(),k.stopPropagation(),!e){alert("Please sign in to add chocolates to your want to try list");return}g(!0);try{u?(await wx(e.uid,r),d(!1),s||(_(!0),setTimeout(()=>_(!1),2e3))):(await RO(e.uid,r),d(!0),s||(_(!0),setTimeout(()=>_(!1),2e3)))}catch(I){console.error("Error updating want to try list:",I),alert("Failed to update want to try list. Please try again.")}finally{g(!1)}};if(!e)return null;const j=()=>m?"Updating...":u?"Added to List":"Want to Try",C=t.includes("detail-page");return l.jsxs("div",{className:`want-to-try-container ${C?"detail-page":"relative"}`,children:[l.jsx("button",{onClick:T,disabled:m,className:`
          want-to-try-button
          ${s||C?"with-text":"icon-only"}
          ${o}
          ${u?"in-want-to-try":""}
          ${m?"loading":""}
          ${t}
        `,title:u?"Remove from want to try list":"Add to want to try list","aria-label":u?"Remove from want to try list":"Add to want to try list",children:m?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"loading-spinner"}),(s||C)&&l.jsx("span",{className:"button-text",children:"Updating..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("svg",{className:"bookmark-icon",fill:u?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),(s||C)&&l.jsx("span",{className:"button-text",children:j()})]})}),!s&&!C&&y&&l.jsxs("div",{className:"tooltip",children:[u?"Added to want to try!":"Removed from want to try!",l.jsx("div",{className:"tooltip-arrow"})]})]})}function zo({chocolate:r,featured:e=!1,className:t=""}){const{currentUser:s}=Es(),o=()=>r?r.name||r.title||"Unnamed Chocolate":"Unknown Chocolate",u=()=>r&&(r.maker||r.brand)||"Unknown Maker",d=m=>{const g=[],y=Math.floor(m),_=m%1>=.5;for(let b=1;b<=5;b++)b<=y?g.push(l.jsx("span",{className:"star filled",children:"★"},b)):b===y+1&&_?g.push(l.jsx("span",{className:"star half",children:"★"},b)):g.push(l.jsx("span",{className:"star empty",children:"☆"},b));return g};return r?l.jsxs("div",{className:`chocolate-card ${e?"featured":""} ${t}`,children:[l.jsx(pe,{to:`/chocolate/${r.id}`,className:"chocolate-link",children:l.jsx("div",{className:"image-container",children:l.jsx("img",{src:r.imageUrl||"/placeholder-chocolate.jpg",alt:o(),className:"card-image"})})}),l.jsxs("div",{className:"card-actions",children:[l.jsx(Ex,{chocolateId:r.id,size:"medium",className:"card-overlay"}),l.jsx(Tx,{chocolate:r,currentUser:s,className:"shadow-sm"})]}),l.jsxs("div",{className:"card-content",children:[l.jsx(pe,{to:`/maker?maker=${encodeURIComponent(u())}`,className:"card-maker-link",onClick:m=>m.stopPropagation(),children:l.jsx("p",{className:"card-maker",children:u()})}),l.jsx(pe,{to:`/chocolate/${r.id}`,className:"chocolate-title-link",onClick:m=>m.stopPropagation(),children:l.jsx("h3",{className:"card-title",children:o()})}),l.jsxs("div",{className:"card-details",children:[l.jsx("span",{className:"origin",children:r.origin||"Unknown"}),l.jsxs("span",{className:"percentage",children:[r.cacaoPercentage||0,"% Cacao"]})]}),l.jsxs("div",{className:"card-rating",children:[l.jsx("span",{className:"rating-value",children:(r.averageRating||0).toFixed(1)}),l.jsx("div",{className:"stars",children:d(r.averageRating||0)}),l.jsxs("span",{className:"rating-count",children:["(",r.reviewCount||r.ratings||0,")"]})]})]})]}):l.jsx("div",{className:"chocolate-card error",children:"Chocolate data not available"})}function xc({title:r,description:e,keywords:t,url:s,chocolateName:o,rating:u,reviewCount:d}){const m="Chocly - Best Chocolate Reviews & Ratings",g="Discover the world's finest chocolates through expert reviews and ratings. Find dark chocolate, milk chocolate, and artisan chocolate recommendations from real chocolate lovers.",y="chocolate reviews, chocolate ratings, best chocolate, dark chocolate, milk chocolate, chocolate tasting, chocolate brands",_="https://chocly.co",b=r?`${r} | Chocly`:m,T=e||g,j=t||y,C=s?`${_}${s}`:_,k={"@context":"https://schema.org","@type":o?"Product":"WebSite",name:o||"Chocly",description:T,url:C,...o&&u&&{aggregateRating:{"@type":"AggregateRating",ratingValue:u,reviewCount:d||1,bestRating:5,worstRating:1}}};return J1.useEffect(()=>{document.title=b;const I=(X,re,ee=!1)=>{const ce=ee?"property":"name";let O=document.querySelector(`meta[${ce}="${X}"]`);O||(O=document.createElement("meta"),O.setAttribute(ce,X),document.head.appendChild(O)),O.setAttribute("content",re)};I("description",T),I("keywords",j),I("robots","index, follow"),I("og:title",b,!0),I("og:description",T,!0),I("og:url",C,!0),I("og:type","website",!0),I("og:site_name","Chocly",!0),I("twitter:card","summary_large_image"),I("twitter:title",b),I("twitter:description",T);let z=document.querySelector('link[rel="canonical"]');z||(z=document.createElement("link"),z.rel="canonical",document.head.appendChild(z)),z.href=C;let J=document.querySelector("#chocly-schema");J||(J=document.createElement("script"),J.type="application/ld+json",J.id="chocly-schema",document.head.appendChild(J)),J.textContent=JSON.stringify(k)},[b,T,j,C,o,u,d]),null}const IO="/assets/Firefly%20hero%20image-DZhn2HXw.jpg",Jm=[{id:"1",name:"Madagascan Dark 72%",maker:"Terroir Artisan",type:"Dark",origin:"Madagascar",cacaoPercentage:72,averageRating:4.8,ratings:186,imageUrl:"/placeholder-chocolate.jpg",className:"madagascar-dark"},{id:"2",name:"Sea Salt Caramel",maker:"Wild Coast Chocolate",type:"Dark Milk",origin:"Ecuador",cacaoPercentage:55,averageRating:4.9,ratings:203,imageUrl:"/placeholder-chocolate.jpg",className:"sea-salt-caramel"},{id:"3",name:"Peruvian Single Origin",maker:"Craft Origins",type:"Dark",origin:"Peru",cacaoPercentage:70,averageRating:4.7,ratings:156,imageUrl:"/placeholder-chocolate.jpg",className:"peruvian-origin"},{id:"4",name:"Vanilla Bean White",maker:"Alpine Confections",type:"White",origin:"Various",cacaoPercentage:33,averageRating:4.5,ratings:98,imageUrl:"/placeholder-chocolate.jpg",className:"vanilla-white"},{id:"5",name:"Hazelnut Crunch",maker:"Artisan Delights",type:"Milk",origin:"Italy",cacaoPercentage:45,averageRating:4.6,ratings:124,imageUrl:"/placeholder-chocolate.jpg",className:"hazelnut-crunch"},{id:"6",name:"Truffle Collection",maker:"Premium Chocolatiers",type:"Dark",origin:"Belgium",cacaoPercentage:65,averageRating:4.9,ratings:234,imageUrl:"/placeholder-chocolate.jpg",className:"truffle-collection"}];function kO(){const[r,e]=P.useState(""),[t,s]=P.useState([]),[o,u]=P.useState([]),[d,m]=P.useState(!0),[g,y]=P.useState(null),[_,b]=P.useState(0),T=ys(),j=ee=>{ee.preventDefault(),r.trim()&&T(`/search?query=${encodeURIComponent(r)}`)};P.useEffect(()=>{(async()=>{try{m(!0),console.log("Fetching homepage data...");const ce=["Lindt","Theo","Alter Eco","Hu"];try{const N=await iO(50);if(console.log("All chocolates fetched:",N),N&&N.length>0){const R=N.filter(M=>M.maker&&ce.some(B=>M.maker.toLowerCase().includes(B.toLowerCase())));console.log("Chocolates from preferred makers:",R);let S=[];if(R.length>=6)S=R.slice(0,6),console.log("Using 6 chocolates from preferred makers:",S.map(M=>`${M.name} by ${M.maker}`));else if(R.length>0){const M=6-R.length,B=N.filter(D=>!ce.some(Q=>D.maker&&D.maker.toLowerCase().includes(Q.toLowerCase()))).slice(0,M);S=[...R,...B],console.log(`Using ${R.length} from preferred makers and ${B.length} others:`,S.map(D=>`${D.name} by ${D.maker}`))}else S=N.slice(0,6),console.log("No preferred makers found, using top 6 overall:",S.map(M=>`${M.name} by ${M.maker}`));s(S),console.log("Final featured chocolates set")}else console.log("No real chocolates found, using sample data"),s(Jm)}catch(N){console.error("Error fetching real chocolates:",N),console.log("Falling back to sample chocolates"),s(Jm)}const O=await mO(3);console.log("Featured reviews:",O),u(O),m(!1)}catch(ce){console.error("Error fetching homepage data:",ce),y(ce.message),s(Jm),m(!1)}})()},[]);const C=Math.ceil(t.length/3),k=t.slice(_*3,_*3+3),I=()=>{b(ee=>ee>=C-1?0:ee+1)},z=()=>{b(ee=>ee<=0?C-1:ee-1)},J=ee=>{b(ee)},X=ee=>{const ce=[],O=Math.floor(ee),N=ee%1!==0;for(let R=1;R<=5;R++)R<=O?ce.push(l.jsx("span",{className:"star filled",children:"★"},R)):R===O+1&&N?ce.push(l.jsx("span",{className:"star half",children:"★"},R)):ce.push(l.jsx("span",{className:"star empty",children:"★"},R));return ce},re=ee=>{if(!ee)return"";try{return(typeof ee.toDate=="function"?ee.toDate():new Date(ee.seconds*1e3)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return""}};return d?l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading chocolatey goodness..."})]}):l.jsxs("div",{className:"home-page",children:[l.jsx(xc,{title:"Best Chocolate Reviews & Ratings",description:"Discover the world's finest chocolates through expert reviews and ratings. Join our community of chocolate enthusiasts to explore, review, and share premium chocolates.",keywords:"chocolate reviews, chocolate ratings, best chocolate, dark chocolate, milk chocolate, artisan chocolate, chocolate tasting, chocolate community",url:"/"}),l.jsx("section",{className:"hero-section",style:{backgroundImage:`linear-gradient(rgba(93, 64, 55, 0.85), rgba(93, 64, 55, 0.85)), url(${IO})`},children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"hero-content",children:[l.jsx("h1",{className:"hero-title display-1",children:"Discover Your Perfect Chocolate"}),l.jsx("p",{className:"hero-subtitle",children:"Join our community of chocolate enthusiasts to explore, review, and share the world's finest chocolates"}),l.jsxs("form",{onSubmit:j,className:"search-container",children:[l.jsx("input",{type:"text",placeholder:"Search for a chocolate, origin, or maker...",className:"search-input",value:r,onChange:ee=>e(ee.target.value)}),l.jsx("button",{type:"submit",className:"search-button",children:"Search"})]}),l.jsxs("div",{className:"hero-actions",children:[l.jsx(pe,{to:"/browse",className:"btn btn-primary",children:"Explore Chocolates"}),l.jsx(pe,{to:"/signup",className:"btn btn-secondary",children:"Join Community"})]})]})})}),l.jsx("section",{className:"featured-section",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{className:"section-title display-2",children:"Featured Chocolates"}),l.jsx("p",{className:"section-subtitle",children:"Premium chocolates from renowned makers, curated for excellence"}),l.jsx(pe,{to:"/browse",className:"view-all",children:"View All Chocolates"})]}),l.jsxs("div",{className:"featured-container",children:[l.jsx("div",{className:"chocolate-cards",children:k.map(ee=>l.jsx(zo,{chocolate:ee,featured:!0},ee.id))}),C>1&&l.jsxs("div",{className:"carousel-controls",children:[l.jsx("button",{className:"carousel-btn",onClick:z,disabled:_===0,children:"←"}),l.jsx("div",{className:"carousel-indicators",children:Array.from({length:C},(ee,ce)=>l.jsx("button",{className:`carousel-dot ${ce===_?"active":""}`,onClick:()=>J(ce)},ce))}),l.jsx("button",{className:"carousel-btn",onClick:I,disabled:_===C-1,children:"→"})]})]})]})}),l.jsx("section",{className:"how-it-works",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"how-it-works-content",children:[l.jsx("h2",{className:"section-title",children:"How Chocly Works"}),l.jsx("p",{className:"section-subtitle",children:"Join our chocolate community in three simple steps"})]}),l.jsxs("div",{className:"steps-visual",children:[l.jsxs("div",{className:"step-card",children:[l.jsx("div",{className:"step-icon discover",children:l.jsx("svg",{viewBox:"0 0 24 24",children:l.jsx("path",{d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"})})}),l.jsxs("div",{className:"step-content",children:[l.jsx("h3",{className:"step-title",children:"Discover"}),l.jsx("p",{className:"step-description",children:"Explore our extensive chocolate database and find chocolates based on origin, flavor profile, or maker"})]})]}),l.jsxs("div",{className:"step-card",children:[l.jsx("div",{className:"step-icon taste",children:l.jsx("svg",{viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.5 16.5,17.4 13,17.9V21H11V17.9C7.5,17.4 5,14.5 5,11V10H7V11A5,5 0 0,0 12,16A5,5 0 0,0 17,11V10H19V11Z"})})}),l.jsxs("div",{className:"step-content",children:[l.jsx("h3",{className:"step-title",children:"Taste & Rate"}),l.jsx("p",{className:"step-description",children:"Develop your palate by tasting and rating chocolates, tracking your personal chocolate journey"})]})]}),l.jsxs("div",{className:"step-card",children:[l.jsx("div",{className:"step-icon connect",children:l.jsx("svg",{viewBox:"0 0 24 24",children:l.jsx("path",{d:"M16.5,6.5A2,2 0 0,1 18.5,8.5A2,2 0 0,1 16.5,10.5A2,2 0 0,1 14.5,8.5A2,2 0 0,1 16.5,6.5M16.5,12A3.5,3.5 0 0,0 20,8.5A3.5,3.5 0 0,0 16.5,5A3.5,3.5 0 0,0 13,8.5A3.5,3.5 0 0,0 16.5,12M7.5,6.5A2,2 0 0,1 9.5,8.5A2,2 0 0,1 7.5,10.5A2,2 0 0,1 5.5,8.5A2,2 0 0,1 7.5,6.5M7.5,12A3.5,3.5 0 0,0 11,8.5A3.5,3.5 0 0,0 7.5,5A3.5,3.5 0 0,0 4,8.5A3.5,3.5 0 0,0 7.5,12M21.5,17.5H14V16.25C14,14.75 13.75,13.5 11.75,13.5C10.5,13.5 9.25,14 7.75,14.5C6.25,15 5.25,15.25 4,15.25V17L4.75,17.25C5.5,17.5 5.75,17.75 6.25,18.25C6.75,18.75 7.5,19.5 8.5,20.25C9.5,21 9.75,21 11,21C12.25,21 12.5,21 13.5,20.25C14.5,19.5 15.25,18.75 15.75,18.25C16.25,17.75 16.5,17.5 17.25,17.25L18,17H21.5V17.5Z"})})}),l.jsxs("div",{className:"step-content",children:[l.jsx("h3",{className:"step-title",children:"Connect"}),l.jsx("p",{className:"step-description",children:"Share recommendations, follow fellow chocolate lovers, and join tasting events in your area"})]})]})]})]})}),l.jsx("section",{className:"reviews-section",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{className:"section-title display-2",children:"Community Reviews"}),l.jsx("p",{className:"section-subtitle",children:"Discover what chocolate lovers are saying"}),o.length>0&&l.jsx(pe,{to:"/browse",className:"view-all",children:"Explore More Chocolates"})]}),l.jsx("div",{className:"reviews-grid",children:o.length>0?o.map(ee=>{var ce,O;return l.jsxs("div",{className:"review-card",children:[l.jsxs("div",{className:"review-header",children:[l.jsxs("div",{className:"review-user",children:[l.jsx("span",{className:"user-name",children:ee.user||"Anonymous User"}),l.jsx("span",{className:"review-date",children:re(ee.createdAt)})]}),l.jsx("div",{className:"review-rating",children:X(ee.rating)})]}),l.jsxs("div",{className:"review-chocolate",children:[l.jsx("div",{className:"chocolate-image"}),l.jsxs("div",{className:"chocolate-info",children:[l.jsx("h4",{className:"chocolate-name",children:(ce=ee.chocolate)==null?void 0:ce.name}),l.jsx("p",{className:"chocolate-maker",children:(O=ee.chocolate)==null?void 0:O.maker})]})]}),l.jsx("p",{className:"review-text",children:ee.text&&ee.text.length>150?`${ee.text.substring(0,150)}...`:ee.text}),l.jsx(pe,{to:`/chocolate/${ee.chocolateId}`,className:"read-more",children:"Read Full Review"})]},ee.id)}):l.jsxs("div",{className:"no-reviews-message",children:[l.jsx("h3",{children:"Be the First to Review!"}),l.jsx("p",{children:"No reviews yet, but that's where you come in! Share your chocolate discoveries with the community."}),l.jsx(pe,{to:"/browse",className:"btn btn-primary btn-sm",children:"Find Chocolates to Review"})]})})]})}),l.jsx("section",{className:"cta-section",children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"cta-content",children:[l.jsx("h2",{className:"cta-title",children:"Ready to join our chocolate community?"}),l.jsx("p",{className:"cta-text",children:"Create a free account to start tracking your tastings, save favorites, and connect with fellow chocolate enthusiasts"}),l.jsxs("div",{className:"cta-buttons",children:[l.jsx(pe,{to:"/login",className:"btn-sign-in",children:"Sign In"}),l.jsx(pe,{to:"/signup",className:"btn-create-account",children:"Create Account"})]})]})})})]})}function bx({rating:r,size:e="small",interactive:t=!1,onRatingChange:s}){const o=[],u=d=>{t&&s&&s(d)};for(let d=1;d<=5;d++){let m="star";d<=Math.floor(r)?m+=" filled":d-.5<=r&&(m+=" half-filled"),e==="large"&&(m+=" star-large"),t&&(m+=" interactive"),o.push(l.jsx("span",{className:m,onClick:()=>u(d),children:"★"},d))}return l.jsx("div",{className:"rating-stars",children:o})}function DO({review:r}){const e=r.createdAt?typeof r.createdAt.toDate=="function"?r.createdAt.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):new Date(r.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return l.jsxs("div",{className:"review-item",children:[l.jsxs("div",{className:"review-header",children:[l.jsx("span",{className:"username",children:r.user||"Anonymous User"}),l.jsx("div",{className:"review-rating-stars",children:l.jsx(bx,{rating:r.rating})}),e&&l.jsx("span",{className:"review-date",children:e})]}),l.jsx("p",{className:"review-text",children:r.text})]})}function OO({chocolateId:r,chocolateName:e,onQuickReview:t,hasUserReviewed:s,existingReview:o}){const{currentUser:u}=Es(),[d,m]=P.useState(!1),[g,y]=P.useState((o==null?void 0:o.rating)||0),[_,b]=P.useState(0),[T,j]=P.useState((o==null?void 0:o.text)||""),[C,k]=P.useState(!1);console.log("QuickReviewCTA - currentUser:",u),console.log("QuickReviewCTA - hasUserReviewed:",s),console.log("QuickReviewCTA - existingReview:",o);const I=async ce=>{if(ce.preventDefault(),g===0){alert("Please select a rating");return}k(!0);try{await t({rating:g,text:T.trim(),chocolateId:r,isUpdate:s})}catch(O){console.error("Error submitting review:",O)}finally{k(!1)}},z=ce=>{y(ce),d||m(!0)},J=ce=>{b(ce)},X=()=>{b(0)},re=ce=>{const O=ce+1,R=O<=(_||g);return l.jsx("button",{type:"button",className:`star-button ${R?"filled":"empty"}`,onClick:()=>z(O),onMouseEnter:()=>J(O),onMouseLeave:X,"aria-label":`Rate ${O} star${O!==1?"s":""}`,disabled:C,children:"★"},ce)},ee=ce=>({1:"Poor",2:"Fair",3:"Good",4:"Very Good",5:"Excellent"})[ce]||"";return s&&!o?l.jsxs("div",{className:"review-cta-completed",children:[l.jsx("span",{children:"Thanks for your review!"}),l.jsx("button",{className:"edit-review-btn",onClick:()=>m(!0),children:"Edit Review"})]}):u?l.jsx("div",{className:"review-cta-banner",children:l.jsxs("div",{className:"cta-content",children:[l.jsxs("div",{className:"cta-text",children:[l.jsx("h3",{children:s?"Update Your Review":"Rate This Chocolate"}),l.jsx("p",{children:"Click stars to rate, then optionally add your thoughts"})]}),d?l.jsxs("form",{onSubmit:I,className:"review-form",children:[l.jsxs("div",{className:"form-rating",children:[l.jsx("label",{htmlFor:"rating-stars",children:"Your Rating *"}),l.jsx("div",{id:"rating-stars",className:"rating-stars",children:[0,1,2,3,4].map(re)}),g>0&&l.jsxs("div",{className:"rating-feedback",children:[l.jsx("span",{className:"rating-text",children:ee(g)}),l.jsxs("span",{className:"rating-value",children:["(",g,"/5)"]})]})]}),l.jsxs("div",{className:"form-text",children:[l.jsx("label",{htmlFor:"review-text",children:"Your Thoughts (Optional)"}),l.jsx("textarea",{id:"review-text",value:T,onChange:ce=>j(ce.target.value),placeholder:"What did you think of this chocolate? How did it taste?",rows:3,maxLength:500,disabled:C}),l.jsxs("div",{className:"char-count",children:[T.length,"/500"]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",onClick:()=>{m(!1),y((o==null?void 0:o.rating)||0),j((o==null?void 0:o.text)||"")},className:"btn-cancel",disabled:C,children:"Cancel"}),l.jsx("button",{type:"submit",disabled:g===0||C,className:"btn-submit",children:C?"Submitting...":s?"Update Review":"Submit Review"})]})]}):l.jsxs("div",{className:"quick-rating-only",children:[l.jsx("div",{className:"rating-stars",children:[0,1,2,3,4].map(re)}),g>0&&l.jsxs("div",{className:"rating-preview",children:[l.jsx("span",{className:"rating-text",children:ee(g)}),l.jsxs("span",{className:"rating-value",children:["(",g,"/5)"]})]})]})]})}):l.jsx("div",{className:"review-cta-banner",children:l.jsxs("div",{className:"cta-content",children:[l.jsxs("div",{className:"cta-text",children:[l.jsxs("h3",{children:["Rate ",e]}),l.jsx("p",{children:"Share your experience with fellow chocolate lovers"})]}),l.jsx("div",{className:"cta-actions",children:l.jsx("a",{href:"/login",className:"cta-button primary",children:"Sign In to Review"})})]})})}function PO(){var M,B,D;const{id:r}=Zh(),[e,t]=P.useState(null),[s,o]=P.useState([]),[u,d]=P.useState([]),[m,g]=P.useState(!0),[y,_]=P.useState(null),[b,T]=P.useState(0),[j,C]=P.useState(""),[k,I]=P.useState(!1),{currentUser:z}=Es(),J=()=>{if(!e)return{};const Q=s.length>0?s.reduce((ye,Ie)=>ye+Ie.rating,0)/s.length:e.averageRating||0,de=`${e.name} by ${e.maker} - ${e.cacaoPercentage}% Chocolate`,Y=X(Q),le=re();return{title:de,description:Y,keywords:le,rating:Q,reviewCount:s.length}},X=Q=>{if(!e)return"";const de=[];de.push(`${e.name} by ${e.maker} chocolate review`),s.length>0&&de.push(`Rated ${Q.toFixed(1)}/5 stars by ${s.length} chocolate lover${s.length!==1?"s":""}`);const Y=[];return e.cacaoPercentage&&Y.push(`${e.cacaoPercentage}% cacao`),e.type&&Y.push(`${e.type.toLowerCase()} chocolate`),e.origin&&Y.push(`from ${e.origin}`),Y.length>0&&de.push(`This ${Y.join(", ")} offers exceptional quality`),de.push("Read detailed tasting notes, compare prices, and see why chocolate enthusiasts recommend this bar"),de.join(". ")+"."},re=()=>{if(!e)return"";const Q=new Set;return Q.add(e.name),Q.add(`${e.name} review`),Q.add(`${e.name} rating`),Q.add(`${e.name} chocolate`),Q.add(`${e.name} bar`),Q.add(e.maker),Q.add(`${e.maker} chocolate`),Q.add(`${e.maker} ${e.name}`),Q.add(`best ${e.maker} chocolate`),e.type&&(Q.add(`${e.type.toLowerCase()} chocolate`),Q.add(`best ${e.type.toLowerCase()} chocolate`),Q.add(`${e.type.toLowerCase()} chocolate review`),Q.add(`premium ${e.type.toLowerCase()} chocolate`)),e.cacaoPercentage&&(Q.add(`${e.cacaoPercentage}% chocolate`),Q.add(`${e.cacaoPercentage}% cacao`),Q.add(`${e.cacaoPercentage} percent chocolate`),Q.add(`${e.cacaoPercentage}% dark chocolate`)),e.origin&&(Q.add(`${e.origin} chocolate`),Q.add(`chocolate from ${e.origin}`),Q.add(`${e.origin} cacao`),Q.add(`single origin ${e.origin}`)),Q.add(`buy ${e.name}`),Q.add(`${e.name} price`),Q.add(`where to buy ${e.name}`),Q.add(`${e.name} online`),Q.add(`order ${e.name}`),Q.add(`${e.name} vs`),Q.add(`chocolate like ${e.name}`),Q.add(`similar to ${e.name}`),Q.add(`${e.maker} comparison`),Q.add("chocolate review"),Q.add("chocolate rating"),Q.add("chocolate tasting notes"),Q.add("premium chocolate"),Q.add("artisan chocolate"),Array.from(Q).join(", ")},ee=async()=>{try{const Q=ar(ln(Ve,"reviews"),Rr("chocolateId","==",r),rr("createdAt","desc")),Y=(await Kn(Q)).docs.map(le=>({id:le.id,...le.data()}));o(Y)}catch(Q){console.error("Error fetching reviews:",Q)}};P.useEffect(()=>{r&&(async()=>{try{g(!0);const de=await px(r);t(de),await ee(),de!=null&&de.tags&&d(de.tags),g(!1)}catch(de){console.error("Error fetching chocolate details:",de),_(de.message),g(!1)}})()},[r]);const ce=async Q=>{var de,Y;try{const le={chocolateId:Q.chocolateId,userId:z.uid,rating:Q.rating,text:Q.text||"",user:z.displayName||((de=z.email)==null?void 0:de.split("@")[0])||"Anonymous User",userName:z.displayName||((Y=z.email)==null?void 0:Y.split("@")[0])||"Anonymous User",userPhotoURL:z.photoURL||null,helpful:0,createdAt:new Date,chocolate:{id:e.id,name:e.name,maker:e.maker,imageUrl:e.imageUrl||"https://placehold.co/300x300?text=Chocolate"}};await vx(le),I(!0),await ee(),setTimeout(()=>I(!1),3e3)}catch(le){console.error("Error submitting review:",le),alert("Error submitting review. Please try again.")}},O=s.some(Q=>Q.userId===(z==null?void 0:z.uid));if(m)return l.jsxs("div",{className:"loading-container",children:[l.jsxs("div",{className:"loading-animation",children:[l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{})]}),l.jsx("p",{children:"Loading chocolate details..."})]});if(y||!e)return l.jsxs("div",{className:"chocolate-detail-page",children:[l.jsx(xc,{title:"Chocolate Not Found",description:"The chocolate you're looking for could not be found. Browse our collection of premium chocolates with reviews and ratings.",url:`/chocolate/${r}`}),l.jsx("div",{className:"container",children:l.jsxs("div",{className:"error-message",children:[l.jsx("h1",{children:"Chocolate Not Found"}),l.jsx("p",{children:"Sorry, we couldn't find the chocolate you're looking for."}),l.jsx(pe,{to:"/browse",className:"btn btn-primary",children:"Browse All Chocolates"})]})})]});e.flavorProfile;const N=Array.isArray(e.ingredients)?e.ingredients:e.ingredients?e.ingredients.split(",").map(Q=>Q.trim()):[],R=s.length>0?s.reduce((Q,de)=>Q+de.rating,0)/s.length:e.averageRating||0,S=J();return l.jsxs("div",{className:"chocolate-detail-page",children:[l.jsx(xc,{title:S.title,description:S.description,keywords:S.keywords,url:`/chocolate/${e.id}`,chocolateName:e.name,rating:S.rating,reviewCount:S.reviewCount,type:"product"}),l.jsx("div",{className:"detail-header",children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"detail-header-content",children:[l.jsx("div",{className:"detail-image",children:l.jsx("img",{src:e.imageUrl||"https://placehold.co/300x300?text=Chocolate",alt:`${e.name} by ${e.maker} - ${e.cacaoPercentage}% chocolate bar`})}),l.jsxs("div",{className:"detail-info",children:[l.jsx(pe,{to:`/maker?maker=${encodeURIComponent(e.maker||"Unknown Maker")}`,className:"maker-link-prominent",children:l.jsx("h2",{className:"maker-name-prominent",children:e.maker||"Unknown Maker"})}),l.jsx("h1",{className:"chocolate-name",children:e.name}),l.jsxs("h2",{className:"chocolate-subtitle",children:["Premium ",e.type," Chocolate",e.origin&&` from ${e.origin}`,e.cacaoPercentage&&` - ${e.cacaoPercentage}% Cacao`]}),l.jsxs("div",{className:"chocolate-specs",children:[l.jsx("span",{className:"origin",children:e.origin||"Origin Unknown"}),l.jsxs("span",{className:"percentage",children:[e.cacaoPercentage||0,"% Cacao"]}),e.type&&l.jsx("span",{className:"type",children:e.type})]}),(e.description||e.details||e.subtitle)&&l.jsx("div",{className:"chocolate-details",children:l.jsx("span",{className:"details-text",children:e.description||e.details||e.subtitle})}),l.jsxs("div",{className:"rating-section",children:[l.jsxs("div",{className:"average-rating",children:[l.jsx("span",{className:"rating-number",children:R.toFixed(1)}),l.jsx(bx,{rating:R}),l.jsxs("span",{className:"rating-count",children:["(",s.length," customer review",s.length!==1?"s":"",")"]})]}),l.jsx("div",{className:"rating-summary-text",children:s.length>0&&l.jsxs("p",{className:"rating-description",children:["Based on ",s.length," customer review",s.length!==1?"s":"",",",e.name," receives an average rating of ",R.toFixed(1)," out of 5 stars."]})})]}),l.jsx(OO,{chocolateId:e.id,chocolateName:e.name,onQuickReview:ce,hasUserReviewed:O,existingReview:O?s.find(Q=>Q.userId===(z==null?void 0:z.uid)):null}),l.jsxs("div",{className:"action-buttons",children:[l.jsx(Ex,{chocolateId:e.id,size:"large",className:"detail-page-favorite",showText:!0}),l.jsx(Tx,{chocolate:e,currentUser:z,className:"detail-page-want-to-try",showText:!0,size:"large"})]}),u.length>0&&l.jsxs("div",{className:"tags-section",children:[l.jsx("h3",{children:"Popular Chocolate Tags"}),l.jsx("div",{className:"tags-list",children:u.map((Q,de)=>l.jsx("span",{className:"tag",children:Q},de))})]})]})]})})}),l.jsxs("div",{className:"container",children:[e.description&&!(e.description||e.details||e.subtitle)&&l.jsxs("section",{className:"description-section",children:[l.jsxs("h3",{children:["About ",e.name," by ",e.maker]}),l.jsxs("p",{className:"description",children:[e.description,e.origin&&` This exceptional ${(M=e.type)==null?void 0:M.toLowerCase()} chocolate is crafted from ${e.origin} cacao beans.`,e.cacaoPercentage&&` At ${e.cacaoPercentage}% cacao content, it offers ${e.cacaoPercentage>=80?"an intense, complex flavor profile":e.cacaoPercentage>=70?"a perfect balance of richness and sweetness":"smooth, approachable flavors"}.`]})]}),l.jsxs("section",{className:"ingredients-section",children:[l.jsxs("h3",{children:["Ingredients in ",e.name]}),N.length>0?l.jsx("ul",{className:"ingredients-list",children:N.map((Q,de)=>l.jsx("li",{children:Q},de))}):l.jsxs("p",{children:["Complete ingredient information for ",e.name," by ",e.maker," is being updated. Contact us for specific ingredient details."]})]}),e.nutritionalInfo&&l.jsxs("section",{className:"nutrition-section",children:[l.jsxs("h3",{children:["Nutritional Information for ",e.name]}),l.jsx("div",{className:"nutrition-info",children:Object.entries(e.nutritionalInfo).map(([Q,de])=>l.jsxs("div",{className:"nutrition-item",children:[l.jsx("span",{className:"nutrition-label",children:Q.charAt(0).toUpperCase()+Q.slice(1).replace(/([A-Z])/g," $1")}),l.jsx("span",{className:"nutrition-value",children:typeof de=="number"?de+(Q.includes("calories")?"":"g"):de})]},Q))})]}),l.jsxs("section",{className:"reviews-section",children:[l.jsxs("h3",{children:["Customer Reviews for ",e.name," (",s.length,")"]}),k&&l.jsx("div",{className:"review-success-message",children:"✅ Your review has been added successfully!"}),s.length>0?l.jsx("div",{className:"reviews-list",children:s.map(Q=>l.jsx(DO,{review:Q},Q.id))}):l.jsxs("div",{className:"no-reviews",children:[l.jsxs("h4",{children:["Be the First to Review ",e.name]}),l.jsxs("p",{children:["Share your experience with ",e.name," by ",e.maker,". Help other chocolate lovers discover this ",e.cacaoPercentage,"% ",(B=e.type)==null?void 0:B.toLowerCase()," chocolate."]}),!z&&l.jsxs("p",{children:[l.jsx(pe,{to:"/login",children:"Sign in"})," to write the first review of ",e.name,"."]})]})]}),l.jsxs("section",{className:"buying-guide-section",children:[l.jsxs("h3",{children:["Where to Buy ",e.name]}),l.jsxs("div",{className:"coming-soon-notice",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"🚀 Coming Soon:"})," We're building an integrated shopping experience to help you find the best prices for ",e.name," by ",e.maker," across trusted retailers."]}),l.jsxs("p",{children:["Our upcoming price comparison tool will show real-time availability and pricing for this premium ",e.cacaoPercentage,"% ",(D=e.type)==null?void 0:D.toLowerCase()," chocolate from multiple sources, including specialty chocolate shops, online retailers, and direct from ",e.maker,"."]})]}),l.jsxs("div",{className:"current-options",children:[l.jsx("h4",{children:"Current Shopping Options:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Specialty Chocolate Retailers:"})," Visit local gourmet food stores and chocolate boutiques"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Online Gourmet Stores:"})," Check premium food retailers for ",e.name]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Direct from Maker:"})," Purchase directly from ",e.maker,"'s official website"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Artisan Food Markets:"})," Look for ",e.name," at farmer's markets and food festivals"]})]})]}),l.jsx("div",{className:"alternatives",children:l.jsxs("p",{children:[l.jsx("strong",{children:"Looking for similar chocolates?"})," While we prepare our shopping integration, explore other ",e.cacaoPercentage,"% chocolates",e.origin&&` or premium chocolates from ${e.origin}`,"in our ",l.jsx(pe,{to:"/browse",children:"chocolate database"}),"."]})})]})]})]})}function MO(){const[r]=yE(),e=r.get("query")||"",[t,s]=P.useState([]),[o,u]=P.useState(!0),[d,m]=P.useState(null),[g,y]=P.useState("relevance"),[_,b]=P.useState("all");P.useEffect(()=>{(async()=>{if(!e.trim()){s([]),u(!1);return}try{u(!0);const z=await gx(e);s(z),u(!1)}catch(z){console.error("Search error:",z),m(z.message),u(!1)}})()},[e]);const j=[...t.filter(I=>_==="all"?!0:I.type&&I.type.toLowerCase()===_.toLowerCase())].sort((I,z)=>{switch(g){case"rating":return(z.averageRating||0)-(I.averageRating||0);case"cacao-high":return(z.cacaoPercentage||0)-(I.cacaoPercentage||0);case"cacao-low":return(I.cacaoPercentage||0)-(z.cacaoPercentage||0);case"name":return(I.name||"").localeCompare(z.name||"");default:return 0}}),C=I=>{y(I.target.value)},k=I=>{b(I.target.value)};return o?l.jsx("div",{className:"loading",children:"Searching..."}):d?l.jsxs("div",{className:"error",children:["Error: ",d]}):l.jsx("div",{className:"search-results-page",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"search-header",children:[l.jsx("h1",{children:"Search Results"}),e&&l.jsxs("p",{className:"search-query",children:['Showing results for "',e,'"']})]}),t.length>0?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"search-filters",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{htmlFor:"type-filter",children:"Filter by:"}),l.jsxs("select",{id:"type-filter",value:_,onChange:k,children:[l.jsx("option",{value:"all",children:"All Types"}),l.jsx("option",{value:"dark",children:"Dark Chocolate"}),l.jsx("option",{value:"milk",children:"Milk Chocolate"}),l.jsx("option",{value:"white",children:"White Chocolate"}),l.jsx("option",{value:"ruby",children:"Ruby Chocolate"})]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{htmlFor:"sort-by",children:"Sort by:"}),l.jsxs("select",{id:"sort-by",value:g,onChange:C,children:[l.jsx("option",{value:"relevance",children:"Relevance"}),l.jsx("option",{value:"rating",children:"Highest Rating"}),l.jsx("option",{value:"cacao-high",children:"Cacao % (High to Low)"}),l.jsx("option",{value:"cacao-low",children:"Cacao % (Low to High)"}),l.jsx("option",{value:"name",children:"Name (A-Z)"})]})]})]}),l.jsxs("p",{className:"results-count",children:[j.length," chocolate",j.length!==1?"s":""," found"]}),l.jsx("div",{className:"results-grid",children:j.map(I=>l.jsx(zo,{chocolate:I},I.id))})]}):l.jsxs("div",{className:"no-results",children:[l.jsx("p",{children:"No chocolates found matching your search."}),l.jsxs("p",{children:["Try different keywords or ",l.jsx(pe,{to:"/",children:"browse all chocolates"}),"."]})]})]})})}const UO=({name:r})=>({Newcomer:l.jsx("svg",{className:"badge-icon newcomer",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,17V16H9V14H13V13H10A1,1 0 0,1 9,12V9A1,1 0 0,1 10,8H11V7H13V8H15V10H11V11H14A1,1 0 0,1 15,12V15A1,1 0 0,1 14,16H13V17H11Z"})}),Reviewer:l.jsx("svg",{className:"badge-icon reviewer",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"})}),Enthusiast:l.jsx("svg",{className:"badge-icon enthusiast",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M16,5V11H21V5M10,11H15V5H10M16,18H21V12H16M10,18H15V12H10M4,18H9V12H4M4,11H9V5H4V11Z"})}),Connoisseur:l.jsx("svg",{className:"badge-icon connoisseur",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,10.84 21.79,9.69 21.39,8.61L19.79,10.21C19.93,10.8 20,11.4 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.6,4 13.2,4.07 13.79,4.21L15.4,2.6C14.31,2.21 13.16,2 12,2M19,2L15,6V7.5L12.45,10.05C12.3,10 12.15,10 12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12C14,11.85 14,11.7 13.95,11.55L16.5,9H18L22,5H19V2M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12H16A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8V6Z"})})})[r]||null;function LO(){var ke,Ae,wt;const{currentUser:r,userProfile:e,loading:t,error:s,profileCreating:o,refreshProfile:u}=Es(),[d,m]=P.useState("overview"),[g,y]=P.useState([]),[_,b]=P.useState([]),[T,j]=P.useState(!1),[C,k]=P.useState(0),[I,z]=P.useState(!1),[J,X]=P.useState([]),[re,ee]=P.useState({displayName:"",bio:"",location:"",favoriteChocolateTypes:[],isProfilePublic:!0,profilePicture:null}),[ce,O]=P.useState({favoriteTypes:[],dietaryRestrictions:[],flavorPreferences:[]});if(ys(),!t&&!r)return l.jsx("div",{className:"profile-page",children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"profile-not-logged-in",children:[l.jsx("h2",{children:"You need to sign in"}),l.jsx("p",{children:"Please log in or create an account to view your profile."}),l.jsxs("div",{className:"auth-buttons",children:[l.jsx(pe,{to:"/auth",className:"auth-button",children:"Log In"}),l.jsx(pe,{to:"/auth",className:"auth-button signup",children:"Sign Up"})]})]})})});if(t)return l.jsx("div",{className:"profile-page",children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading your profile..."})]})})});if(r&&(!e||o))return l.jsx("div",{className:"profile-page",children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"profile-not-logged-in",children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[l.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"🍫"}),l.jsx("h2",{children:"Setting up your chocolate journey!"}),l.jsx("p",{children:"We're creating your profile. This should only take a moment."})]}),l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Creating your profile..."})]}),l.jsxs("div",{style:{textAlign:"center",marginTop:"2rem"},children:[l.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:"This is taking longer than expected."}),l.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[l.jsxs("button",{onClick:()=>{k(H=>H+1),u()},style:{color:"var(--primary)",background:"white",border:"2px solid var(--primary)",padding:"0.5rem 1rem",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem"},children:["Refresh Profile ",C>0&&`(${C})`]}),l.jsx("button",{onClick:()=>window.location.reload(),style:{color:"var(--primary)",background:"white",border:"2px solid var(--primary)",padding:"0.5rem 1rem",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem"},children:"Reload Page"}),l.jsx(pe,{to:"/",style:{color:"white",background:"var(--primary)",border:"2px solid var(--primary)",padding:"0.5rem 1rem",borderRadius:"8px",textDecoration:"none",fontSize:"0.9rem"},children:"Go to Homepage"})]}),s&&l.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#FEE2E2",color:"#DC2626",borderRadius:"8px",fontSize:"0.9rem"},children:[l.jsx("strong",{children:"Error:"})," ",s]})]})]})})});P.useEffect(()=>{r&&e&&(N(),ee({displayName:e.displayName||"",bio:e.bio||"",location:e.location||"",favoriteChocolateTypes:e.favoriteChocolateTypes||[],isProfilePublic:e.isProfilePublic!==!1,profilePicture:null}))},[r,e]);const N=async()=>{j(!0);try{const[H,me,Ge]=await Promise.all([hO(r.uid).catch(()=>[]),AO(r.uid).catch(()=>[]),jO(r.uid).catch(()=>[])]);y(H),b(me),X(Ge),e.preferences&&O(e.preferences)}catch(H){console.error("Error loading user data:",H)}finally{j(!1)}},R=async H=>{try{await wx(r.uid,H),X(me=>me.filter(Ge=>Ge.chocolateId!==H.id))}catch(me){console.error("Error removing from want to try:",me),alert("Error removing from want to try list. Please try again.")}},S=()=>({totalReviews:g.length,averageRating:g.length>0?(g.reduce((H,me)=>H+me.rating,0)/g.length).toFixed(1):0,favoriteChocolates:_.length,chocolatesDiscovered:g.length}),M=H=>{if(!H)return"Recently";try{let me;if(H instanceof Date)me=H;else if(H!=null&&H.toDate&&typeof H.toDate=="function")me=H.toDate();else if(H!=null&&H.seconds)me=new Date(H.seconds*1e3);else if(typeof H=="string"||typeof H=="number")me=new Date(H);else return"Recently";if(isNaN(me.getTime()))return"Recently";const Vt=new Date().getTime()-me.getTime(),ct=Math.floor(Vt/(1e3*60*60*24));if(ct===0)return"Today";if(ct===1)return"Yesterday";if(ct<7)return`${ct} day${ct!==1?"s":""} ago`;if(ct<30){const en=Math.floor(ct/7);return`${en} week${en!==1?"s":""} ago`}else if(ct<365){const en=Math.floor(ct/30);return`${en} month${en!==1?"s":""} ago`}else return me.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(me){return console.error("Error formatting date:",me,H),"Recently"}},B=H=>{if(!H)return"No date available";try{let me;if(H.toDate&&typeof H.toDate=="function")me=H.toDate();else if(H.seconds)me=new Date(H.seconds*1e3);else if(typeof H=="string"||typeof H=="number")me=new Date(H);else if(H instanceof Date)me=H;else return"Invalid date";if(isNaN(me.getTime()))return"Invalid date";const Vt=Math.abs(new Date-me),ct=Math.ceil(Vt/(1e3*60*60*24));if(ct===1)return"Yesterday";if(ct<7)return`${ct} days ago`;if(ct<30){const en=Math.floor(ct/7);return`${en} week${en>1?"s":""} ago`}else return me.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(me){return console.error("Error formatting date:",me,H),"Date unavailable"}},D=()=>{const H=["Newcomer"],me=g.length;return me>=5&&H.push("Reviewer"),me>=20&&H.push("Enthusiast"),me>=50&&H.push("Connoisseur"),H},Q=async H=>{try{await xO(r.uid,H),b(me=>me.filter(Ge=>Ge.id!==H))}catch(me){console.error("Error removing favorite:",me),alert("Error removing from favorites. Please try again.")}},de=(H,me)=>{O(Ge=>({...Ge,[H]:Ge[H].includes(me)?Ge[H].filter(Vt=>Vt!==me):[...Ge[H],me]}))},Y=async()=>{try{console.log("Saving preferences:",ce),alert("Preferences saved successfully!")}catch(H){console.error("Error saving preferences:",H),alert("Error saving preferences. Please try again.")}},le=()=>{z(!0)},ye=()=>{z(!1),ee({displayName:e.displayName||"",bio:e.bio||"",location:e.location||"",favoriteChocolateTypes:e.favoriteChocolateTypes||[],isProfilePublic:e.isProfilePublic!==!1,profilePicture:null})},Ie=(H,me)=>{ee(Ge=>({...Ge,[H]:me}))},L=H=>{ee(me=>({...me,favoriteChocolateTypes:me.favoriteChocolateTypes.includes(H)?me.favoriteChocolateTypes.filter(Ge=>Ge!==H):[...me.favoriteChocolateTypes,H]}))},oe=H=>{const me=H.target.files[0];if(me){if(!me.type.startsWith("image/")){alert("Please select an image file");return}if(me.size>5*1024*1024){alert("Image must be smaller than 5MB");return}ee(Ge=>({...Ge,profilePicture:me}))}},fe=async()=>{if(!re.displayName.trim()){alert("Display name is required");return}j(!0);try{const H={displayName:re.displayName.trim(),bio:re.bio.trim(),location:re.location.trim(),favoriteChocolateTypes:re.favoriteChocolateTypes,isProfilePublic:re.isProfilePublic};re.profilePicture&&(H.profilePicture=re.profilePicture),await _O(r.uid,H),await u(),alert("Profile updated successfully!"),z(!1)}catch(H){console.error("Error saving profile:",H),alert("Error saving profile: "+H.message)}finally{j(!1)}},ue=S(),Ee=D();return l.jsx("div",{className:"profile-page",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"profile-header",children:[l.jsxs("div",{className:"profile-header-main",children:[l.jsx("div",{className:"profile-avatar",children:e!=null&&e.photoURL?l.jsx("img",{src:e.photoURL,alt:e.displayName||"User"}):l.jsx("div",{className:"avatar-placeholder",children:e!=null&&e.displayName?e.displayName.charAt(0).toUpperCase():"U"})}),l.jsxs("div",{className:"profile-info",children:[l.jsx("h1",{children:(e==null?void 0:e.displayName)||"User"}),l.jsxs("p",{className:"member-since",children:["Member since ",((wt=(Ae=(ke=e==null?void 0:e.createdAt)==null?void 0:ke.toDate)==null?void 0:Ae.call(ke))==null?void 0:wt.toLocaleDateString())||"Recently"]}),(e==null?void 0:e.location)&&l.jsxs("p",{className:"user-location",children:["📍 ",e.location]}),(e==null?void 0:e.bio)&&l.jsx("p",{className:"user-bio",children:e.bio}),l.jsx("div",{className:"profile-badges",children:Ee.map(H=>l.jsxs("div",{className:"badge",children:[l.jsx(UO,{name:H}),l.jsx("span",{children:H})]},H))})]})]}),l.jsx("div",{className:"profile-actions",children:l.jsx("button",{className:"edit-profile-button",onClick:le,disabled:I,children:I?"Editing...":"Edit Profile"})})]}),I&&l.jsxs("div",{className:"edit-profile-section",children:[l.jsxs("div",{className:"edit-profile-header",children:[l.jsx("h3",{children:"Edit Your Profile"}),l.jsx("div",{className:"edit-actions",children:l.jsx("button",{className:"cancel-btn",onClick:ye,disabled:T,children:"Cancel"})})]}),l.jsxs("div",{className:"edit-profile-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsx("label",{className:"form-label",children:"Profile Picture"}),l.jsxs("div",{className:"profile-picture-upload",children:[l.jsx("div",{className:"current-picture",children:e!=null&&e.photoURL?l.jsx("img",{src:e.photoURL,alt:"Current profile"}):l.jsx("div",{className:"avatar-placeholder",children:e!=null&&e.displayName?e.displayName.charAt(0).toUpperCase():"U"})}),l.jsxs("div",{className:"upload-controls",children:[l.jsx("input",{type:"file",id:"profile-picture",accept:"image/*",onChange:oe,style:{display:"none"}}),l.jsx("label",{htmlFor:"profile-picture",className:"upload-btn",children:"Choose New Picture"}),re.profilePicture&&l.jsxs("p",{className:"file-selected",children:["✓ ",re.profilePicture.name]}),l.jsx("p",{className:"upload-hint",children:"JPG, PNG or GIF. Max 5MB."})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("label",{className:"form-label",children:"Display Name *"}),l.jsx("input",{type:"text",value:re.displayName,onChange:H=>Ie("displayName",H.target.value),placeholder:"Your display name",className:"form-input",maxLength:50}),l.jsx("p",{className:"form-hint",children:"This is how other users will see your name"})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("label",{className:"form-label",children:"Location"}),l.jsx("input",{type:"text",value:re.location,onChange:H=>Ie("location",H.target.value),placeholder:"City, Country",className:"form-input",maxLength:100}),l.jsx("p",{className:"form-hint",children:"Help others discover chocolate communities near you"})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("label",{className:"form-label",children:"About Me"}),l.jsx("textarea",{value:re.bio,onChange:H=>Ie("bio",H.target.value),placeholder:"Tell us about your chocolate journey...",className:"form-textarea",rows:4,maxLength:500}),l.jsxs("p",{className:"form-hint",children:[re.bio.length,"/500 characters"]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("label",{className:"form-label",children:"Favorite Chocolate Types"}),l.jsx("div",{className:"checkbox-grid",children:["Dark Chocolate","Milk Chocolate","White Chocolate","Single Origin","Bean-to-Bar","Artisanal","Organic","Fair Trade"].map(H=>l.jsxs("label",{className:"checkbox-item",children:[l.jsx("input",{type:"checkbox",checked:re.favoriteChocolateTypes.includes(H),onChange:()=>L(H)}),l.jsx("span",{children:H})]},H))}),l.jsx("p",{className:"form-hint",children:"These will be highlighted on your profile"})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("label",{className:"form-label",children:"Privacy Settings"}),l.jsxs("div",{className:"privacy-options",children:[l.jsxs("label",{className:"radio-item",children:[l.jsx("input",{type:"radio",name:"privacy",checked:re.isProfilePublic===!0,onChange:()=>Ie("isProfilePublic",!0)}),l.jsxs("div",{className:"radio-content",children:[l.jsx("span",{className:"radio-title",children:"🌍 Public Profile"}),l.jsx("span",{className:"radio-description",children:"Other users can see your profile, reviews, and favorites"})]})]}),l.jsxs("label",{className:"radio-item",children:[l.jsx("input",{type:"radio",name:"privacy",checked:re.isProfilePublic===!1,onChange:()=>Ie("isProfilePublic",!1)}),l.jsxs("div",{className:"radio-content",children:[l.jsx("span",{className:"radio-title",children:"🔒 Private Profile"}),l.jsx("span",{className:"radio-description",children:"Only you can see your profile details"})]})]})]})]}),l.jsx("div",{className:"form-actions-bottom",children:l.jsx("button",{className:"save-btn-bottom",onClick:fe,disabled:T,children:T?"Saving Changes...":"Save Changes"})})]})]}),l.jsxs("div",{className:"profile-nav",children:[l.jsx("button",{className:`profile-nav-link ${d==="overview"?"active":""}`,onClick:()=>m("overview"),children:"Overview"}),l.jsxs("button",{className:`profile-nav-link ${d==="reviews"?"active":""}`,onClick:()=>m("reviews"),children:["Reviews (",ue.totalReviews,")"]}),l.jsxs("button",{className:`profile-nav-link ${d==="favorites"?"active":""}`,onClick:()=>m("favorites"),children:["Favorites (",_.length,")"]}),l.jsxs("button",{className:`profile-nav-link ${d==="wantToTry"?"active":""}`,onClick:()=>m("wantToTry"),children:["Want to Try (",J.length,")"]}),l.jsx("button",{className:`profile-nav-link ${d==="preferences"?"active":""}`,onClick:()=>m("preferences"),children:"Preferences"})]}),l.jsxs("div",{className:"profile-content",children:[d==="overview"&&l.jsxs("div",{className:"overview-tab",children:[l.jsxs("div",{className:"stats-grid",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-number",children:ue.totalReviews}),l.jsx("div",{className:"stat-label",children:"Reviews Written"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-number",children:ue.averageRating}),l.jsx("div",{className:"stat-label",children:"Average Rating"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-number",children:ue.favoriteChocolates}),l.jsx("div",{className:"stat-label",children:"Favorite Chocolates"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-number",children:ue.chocolatesDiscovered}),l.jsx("div",{className:"stat-label",children:"Chocolates Discovered"})]})]}),l.jsxs("div",{className:"recent-activity",children:[l.jsx("h3",{children:"Recent Activity"}),g.length>0?l.jsx("div",{className:"activity-list",children:g.slice(0,3).map(H=>{var me;return l.jsxs("div",{className:"activity-item",children:[l.jsxs("div",{className:"activity-content",children:[l.jsxs("p",{children:["Reviewed ",l.jsx("strong",{children:((me=H.chocolate)==null?void 0:me.name)||"Unknown Chocolate"})]}),l.jsx("p",{className:"activity-date",children:B(H.createdAt)})]}),l.jsx("div",{className:"activity-rating",children:[1,2,3,4,5].map(Ge=>l.jsx("span",{className:`star ${Ge<=H.rating?"filled":""}`,children:"★"},Ge))})]},H.id)})}):l.jsx("div",{className:"no-activity",children:l.jsxs("p",{children:["No recent activity. ",l.jsx(pe,{to:"/browse",children:"Start exploring chocolates!"})]})})]})]}),d==="reviews"&&l.jsxs("div",{className:"reviews-tab",children:[l.jsx("h3",{children:"Your Reviews"}),T?l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading reviews..."})]}):g.length>0?l.jsx("div",{className:"reviews-list",children:g.map(H=>{var me,Ge;return l.jsxs("div",{className:"review-item",children:[l.jsxs("div",{className:"review-header",children:[l.jsx("h4",{className:"reviewed-chocolate",children:((me=H.chocolate)==null?void 0:me.name)||"Unknown Chocolate"}),l.jsx("div",{className:"review-rating",children:[1,2,3,4,5].map(Vt=>l.jsx("span",{className:`star ${Vt<=H.rating?"filled":""}`,children:"★"},Vt))})]}),l.jsx("p",{className:"review-maker",children:((Ge=H.chocolate)==null?void 0:Ge.maker)||"Unknown Maker"}),H.title&&l.jsxs("h5",{className:"review-title",children:['"',H.title,'"']}),l.jsx("p",{className:"review-text",children:H.text}),l.jsxs("div",{className:"review-footer",children:[l.jsx("p",{className:"review-date",children:B(H.createdAt)}),l.jsx(pe,{to:`/chocolate/${H.chocolateId}`,className:"view-chocolate-link",children:"View Chocolate"})]})]},H.id)})}):l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"📝"}),l.jsx("h4",{children:"No reviews yet"}),l.jsx("p",{children:"Share your chocolate experiences with the community!"}),l.jsx(pe,{to:"/browse",className:"btn btn-primary",children:"Find Chocolates to Review"})]})]}),d==="favorites"&&l.jsxs("div",{className:"favorites-tab",children:[l.jsx("h3",{children:"Your Favorite Chocolates"}),T?l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading favorites..."})]}):_.length>0?l.jsx("div",{className:"favorites-grid",children:_.map(H=>l.jsxs("div",{className:"favorite-chocolate-card",children:[l.jsx("div",{className:"favorite-image",children:H.imageUrl?l.jsx("img",{src:H.imageUrl,alt:H.name}):l.jsx("div",{className:"placeholder-image",children:l.jsx("span",{children:"🍫"})})}),l.jsxs("div",{className:"favorite-info",children:[l.jsx("h4",{className:"favorite-name",children:H.name}),l.jsx("p",{className:"favorite-maker",children:H.maker}),H.type&&l.jsx("span",{className:"favorite-type",children:H.type}),H.averageRating&&l.jsxs("div",{className:"favorite-rating",children:[l.jsx("span",{className:"rating-value",children:H.averageRating.toFixed(1)}),l.jsx("div",{className:"stars",children:[1,2,3,4,5].map(me=>l.jsx("span",{className:`star ${me<=Math.round(H.averageRating)?"filled":""}`,children:"★"},me))})]})]}),l.jsxs("div",{className:"favorite-actions",children:[l.jsx(pe,{to:`/chocolate/${H.id}`,className:"view-chocolate-btn",children:"View"}),l.jsx("button",{onClick:()=>Q(H.id),className:"remove-favorite-btn",children:"Remove"})]})]},H.id))}):l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"💔"}),l.jsx("h4",{children:"No favorites yet"}),l.jsx("p",{children:"Start exploring chocolates and add some to your favorites!"}),l.jsx(pe,{to:"/browse",className:"btn btn-primary",children:"Discover Chocolates"})]})]}),d==="wantToTry"&&l.jsxs("div",{className:"profile-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("h3",{children:["Want to Try (",J.length,")"]}),l.jsx("p",{children:"Chocolates you're planning to taste"})]}),J.length>0?l.jsx("div",{className:"want-to-try-grid",children:J.map(H=>l.jsxs("div",{className:"want-to-try-card",children:[l.jsx("div",{className:"want-to-try-image",children:H.imageUrl?l.jsx("img",{src:H.imageUrl,alt:H.name}):l.jsx("div",{className:"placeholder-image",children:"🍫"})}),l.jsxs("div",{className:"want-to-try-info",children:[l.jsx("h4",{className:"want-to-try-name",children:H.name}),l.jsx("p",{className:"want-to-try-maker",children:H.maker}),l.jsxs("p",{className:"want-to-try-date",children:["Added ",M(H.addedAt)]})]}),l.jsxs("div",{className:"want-to-try-actions",children:[l.jsx(pe,{to:`/chocolate/${H.chocolateId}`,className:"view-chocolate-btn",children:"View Details"}),l.jsx("button",{onClick:()=>R(H),className:"remove-want-to-try-btn",children:"Remove"})]})]},H.chocolateId))}):l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:"📝"}),l.jsx("h4",{children:"No chocolates in your want to try list yet"}),l.jsx("p",{children:"Start exploring chocolates and click the bookmark icon to add them here!"}),l.jsx(pe,{to:"/browse",className:"browse-chocolates-btn",children:"Browse Chocolates"})]})]}),d==="preferences"&&l.jsxs("div",{className:"preferences-tab",children:[l.jsx("h3",{children:"Your Preferences"}),l.jsxs("div",{className:"preferences-form",children:[l.jsxs("div",{className:"preference-section",children:[l.jsx("h4",{children:"Favorite Types"}),l.jsx("div",{className:"preference-options",children:["Dark","Milk","White","Single Origin","Bean-to-Bar"].map(H=>l.jsxs("label",{className:"preference-option",children:[l.jsx("input",{type:"checkbox",checked:ce.favoriteTypes.includes(H),onChange:()=>de("favoriteTypes",H)}),H]},H))})]}),l.jsxs("div",{className:"preference-section",children:[l.jsx("h4",{children:"Dietary Restrictions"}),l.jsx("div",{className:"preference-options",children:["Vegan","Gluten-Free","Nut-Free","Dairy-Free","Sugar-Free"].map(H=>l.jsxs("label",{className:"preference-option",children:[l.jsx("input",{type:"checkbox",checked:ce.dietaryRestrictions.includes(H),onChange:()=>de("dietaryRestrictions",H)}),H]},H))})]}),l.jsxs("div",{className:"preference-section",children:[l.jsx("h4",{children:"Flavor Preferences"}),l.jsx("div",{className:"preference-options",children:["Fruity","Nutty","Floral","Earthy","Spicy","Sweet"].map(H=>l.jsxs("label",{className:"preference-option",children:[l.jsx("input",{type:"checkbox",checked:ce.flavorPreferences.includes(H),onChange:()=>de("flavorPreferences",H)}),H]},H))})]}),l.jsx("button",{onClick:Y,className:"save-preferences-btn",children:"Save Preferences"})]})]})]})]})})}function VO(){const[r,e]=P.useState([]),[t,s]=P.useState([]),[o,u]=P.useState([]),[d,m]=P.useState(!0),[g,y]=P.useState(null),[_,b]=P.useState({maker:"",type:"",origin:"",tagId:"",minCacao:"",maxCacao:""}),[T,j]=P.useState("rating"),[C,k]=P.useState(!1),I=(S,M)=>{const B=S.map(D=>D[M]).filter(D=>D&&D.trim()!=="").map(D=>typeof D=="string"?D.trim():D);return[...new Set(B)].sort()};P.useEffect(()=>{(async()=>{try{m(!0);const[M,B]=await Promise.all([$g(),yx()]);e(M),s(M),u(B),m(!1)}catch(M){y(M.message),m(!1)}})()},[]),P.useEffect(()=>{let S=[...r];_.maker&&(S=S.filter(M=>M.maker&&M.maker.toLowerCase().includes(_.maker.toLowerCase()))),_.type&&(S=S.filter(M=>M.type&&M.type.toLowerCase()===_.type.toLowerCase())),_.origin&&(S=S.filter(M=>M.origin&&M.origin.toLowerCase().includes(_.origin.toLowerCase()))),_.tagId&&(S=S.filter(M=>M.tagIds&&M.tagIds.includes(_.tagId))),_.minCacao&&(S=S.filter(M=>M.cacaoPercentage>=parseInt(_.minCacao))),_.maxCacao&&(S=S.filter(M=>M.cacaoPercentage<=parseInt(_.maxCacao))),s(S)},[_,r]);const z=()=>[...t].sort((S,M)=>{switch(T){case"rating":return(M.averageRating||0)-(S.averageRating||0);case"popularity":return(M.reviewCount||0)-(S.reviewCount||0);case"cacao-high":return(M.cacaoPercentage||0)-(S.cacaoPercentage||0);case"cacao-low":return(S.cacaoPercentage||0)-(M.cacaoPercentage||0);case"name":return S.name.localeCompare(M.name);case"maker":return(S.maker||"").localeCompare(M.maker||"");default:return 0}}),J=(S,M)=>{b(B=>({...B,[S]:M}))},X=()=>{b({maker:"",type:"",origin:"",tagId:"",minCacao:"",maxCacao:""})},re=Object.values(_).some(S=>S!==""),ee=Object.values(_).filter(S=>S!=="").length;if(d)return l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading chocolates..."})]});if(g)return l.jsxs("div",{className:"error full-width",children:["Error: ",g]});const ce=z(),O=I(r,"maker"),N=I(r,"type"),R=I(r,"origin");return l.jsx("div",{className:"browse-page",children:l.jsxs("div",{className:"container",children:[l.jsx("div",{className:"modern-filter-bar",children:l.jsxs("div",{className:"filter-controls",children:[l.jsxs("button",{className:`filter-toggle ${C?"active":""}`,onClick:()=>k(!C),children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polygon",{points:"22,3 2,3 10,12.46 10,19 14,21 14,12.46"})}),l.jsx("span",{children:"Filters"}),ee>0&&l.jsx("span",{className:"filter-badge",children:ee})]}),l.jsx("div",{className:"sort-dropdown",children:l.jsxs("select",{value:T,onChange:S=>j(S.target.value),className:"modern-select",children:[l.jsx("option",{value:"rating",children:"⭐ Highest Rated"}),l.jsx("option",{value:"popularity",children:"🔥 Most Popular"}),l.jsx("option",{value:"cacao-high",children:"📈 Cacao % (High)"}),l.jsx("option",{value:"cacao-low",children:"📉 Cacao % (Low)"}),l.jsx("option",{value:"name",children:"🔤 Name (A-Z)"}),l.jsx("option",{value:"maker",children:"🏭 Maker (A-Z)"}),l.jsx("option",{value:"newest",children:"✨ Newest First"}),l.jsx("option",{value:"price-low",children:"💰 Price (Low)"}),l.jsx("option",{value:"price-high",children:"💎 Price (High)"})]})}),re&&l.jsxs("button",{onClick:X,className:"clear-filters-modern",children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"Clear All"]}),l.jsx("div",{className:"results-summary",children:l.jsxs("span",{className:"results-count",children:[t.length," chocolate",t.length!==1?"s":""]})})]})}),l.jsx("div",{className:`modern-filters ${C?"expanded":""}`,children:l.jsxs("div",{className:"filters-grid-modern",children:[l.jsxs("div",{className:"filter-card",children:[l.jsxs("label",{className:"filter-label",children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Chocolate Maker"]}),l.jsxs("select",{value:_.maker,onChange:S=>J("maker",S.target.value),className:"modern-filter-select",children:[l.jsxs("option",{value:"",children:["All Makers (",O.length,")"]}),O.map(S=>l.jsx("option",{value:S,children:S},S))]})]}),l.jsxs("div",{className:"filter-card",children:[l.jsxs("label",{className:"filter-label",children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M12 1v6m0 6v6m11-7h-6m-6 0H1"})]}),"Chocolate Type"]}),l.jsxs("select",{value:_.type,onChange:S=>J("type",S.target.value),className:"modern-filter-select",children:[l.jsxs("option",{value:"",children:["All Types (",N.length,")"]}),N.map(S=>l.jsxs("option",{value:S,children:[S," ",S==="Dark"?"🍫":S==="Milk"?"🥛":S==="White"?"🤍":"✨"]},S))]})]}),l.jsxs("div",{className:"filter-card",children:[l.jsxs("label",{className:"filter-label",children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),l.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),"Origin Country"]}),l.jsxs("select",{value:_.origin,onChange:S=>J("origin",S.target.value),className:"modern-filter-select",children:[l.jsxs("option",{value:"",children:["All Origins (",R.length,")"]}),R.map(S=>l.jsxs("option",{value:S,children:["🌍 ",S]},S))]})]}),l.jsxs("div",{className:"filter-card",children:[l.jsxs("label",{className:"filter-label",children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),l.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),"Special Tags"]}),l.jsxs("select",{value:_.tagId,onChange:S=>J("tagId",S.target.value),className:"modern-filter-select",children:[l.jsx("option",{value:"",children:"All Tags"}),l.jsx("option",{value:"organic",children:"🌱 Organic"}),l.jsx("option",{value:"fair-trade",children:"🤝 Fair Trade"}),l.jsx("option",{value:"single-origin",children:"🎯 Single Origin"}),l.jsx("option",{value:"bean-to-bar",children:"🔄 Bean to Bar"}),l.jsx("option",{value:"raw",children:"⚡ Raw"}),l.jsx("option",{value:"vegan",children:"🌿 Vegan"}),l.jsx("option",{value:"sugar-free",children:"🚫 Sugar Free"}),l.jsx("option",{value:"award-winning",children:"🏆 Award Winning"})]})]}),l.jsxs("div",{className:"filter-card",children:[l.jsxs("label",{className:"filter-label",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})}),"Minimum Rating"]}),l.jsxs("select",{value:_.minRating||"",onChange:S=>J("minRating",S.target.value),className:"modern-filter-select",children:[l.jsx("option",{value:"",children:"Any Rating"}),l.jsx("option",{value:"4.5",children:"⭐⭐⭐⭐⭐ 4.5+ Exceptional"}),l.jsx("option",{value:"4.0",children:"⭐⭐⭐⭐ 4.0+ Excellent"}),l.jsx("option",{value:"3.5",children:"⭐⭐⭐ 3.5+ Very Good"}),l.jsx("option",{value:"3.0",children:"⭐⭐ 3.0+ Good"})]})]}),l.jsxs("div",{className:"filter-card cacao-card",children:[l.jsxs("label",{className:"filter-label",children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M8 12h8M12 8v8"})]}),"Cacao Percentage Range"]}),l.jsxs("div",{className:"cacao-range",children:[l.jsx("input",{type:"number",placeholder:"Min %",value:_.cacaoMin||"",onChange:S=>J("cacaoMin",S.target.value),className:"cacao-input",min:"0",max:"100"}),l.jsx("span",{className:"cacao-separator",children:"to"}),l.jsx("input",{type:"number",placeholder:"Max %",value:_.cacaoMax||"",onChange:S=>J("cacaoMax",S.target.value),className:"cacao-input",min:"0",max:"100"})]}),l.jsx("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",color:"#6B7280",textAlign:"center"},children:"💡 Most dark chocolates: 70-85% • Milk chocolates: 30-50%"})]})]})}),ce.length>0?l.jsx("div",{className:"chocolate-grid",children:ce.map(S=>l.jsx(zo,{chocolate:S},S.id))}):l.jsxs("div",{className:"no-results-modern",children:[l.jsx("div",{className:"no-results-icon",children:l.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M16 16s-1.5-2-4-2-4 2-4 2"}),l.jsx("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),l.jsx("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]})}),l.jsx("h3",{children:"No chocolates found"}),l.jsx("p",{children:"Try adjusting your filters to discover more chocolates"}),re&&l.jsx("button",{onClick:X,className:"btn btn-primary",children:"Clear All Filters"})]})]})})}function BO(){return l.jsx("div",{className:"barcode-search-page",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"construction-banner",children:[l.jsx("div",{className:"construction-icon",children:"🚧"}),l.jsxs("div",{className:"construction-content",children:[l.jsx("h2",{children:"Under Construction"}),l.jsx("p",{children:"We're working hard to bring you an amazing barcode scanning experience!"})]}),l.jsx("div",{className:"construction-icon",children:"⚙️"})]}),l.jsxs("div",{className:"page-header",children:[l.jsx("h1",{children:"Find Chocolates by Barcode"}),l.jsx("p",{className:"page-description",children:"Scan or enter a barcode to quickly find information about a chocolate product."})]}),l.jsxs("div",{className:"scanner-preview",children:[l.jsx("div",{className:"coming-soon-overlay",children:l.jsxs("div",{className:"coming-soon-content",children:[l.jsx("div",{className:"coming-soon-icon",children:"📱"}),l.jsx("h3",{children:"Coming Soon!"}),l.jsx("p",{children:"We're building an advanced barcode scanning system that will include:"}),l.jsxs("ul",{className:"feature-list",children:[l.jsx("li",{children:"📸 Real-time camera scanning"}),l.jsx("li",{children:"🔍 Instant chocolate identification"}),l.jsx("li",{children:"📊 Automatic product details"}),l.jsx("li",{children:"⚡ Lightning-fast results"}),l.jsx("li",{children:"📱 Mobile app integration"})]}),l.jsx("div",{className:"eta-badge",children:l.jsx("span",{className:"eta-text",children:"Expected Launch: Coming Soon"})})]})}),l.jsxs("div",{className:"scanner-mockup",children:[l.jsx("div",{className:"mock-camera",children:l.jsxs("div",{className:"camera-viewfinder",children:[l.jsx("div",{className:"scan-line"}),l.jsx("div",{className:"corner top-left"}),l.jsx("div",{className:"corner top-right"}),l.jsx("div",{className:"corner bottom-left"}),l.jsx("div",{className:"corner bottom-right"})]})}),l.jsxs("div",{className:"mock-controls",children:[l.jsx("button",{className:"mock-btn",disabled:!0,children:"📸 Scan Barcode"}),l.jsx("button",{className:"mock-btn",disabled:!0,children:"📋 Enter Manually"})]})]})]}),l.jsxs("div",{className:"info-section",children:[l.jsx("h2",{children:"What's Coming"}),l.jsxs("div",{className:"info-grid",children:[l.jsxs("div",{className:"info-card",children:[l.jsx("div",{className:"info-icon",children:"🎯"}),l.jsx("h3",{children:"Instant Recognition"}),l.jsx("p",{children:"Point your camera at any chocolate barcode and get instant product information from our growing database."})]}),l.jsxs("div",{className:"info-card",children:[l.jsx("div",{className:"info-icon",children:"🌐"}),l.jsx("h3",{children:"Global Database"}),l.jsx("p",{children:"We're partnering with Open Food Facts and building our own comprehensive chocolate database."})]}),l.jsxs("div",{className:"info-card",children:[l.jsx("div",{className:"info-icon",children:"📱"}),l.jsx("h3",{children:"Mobile First"}),l.jsx("p",{children:"Our upcoming mobile app will make scanning barcodes as easy as taking a photo."})]}),l.jsxs("div",{className:"info-card",children:[l.jsx("div",{className:"info-icon",children:"⚡"}),l.jsx("h3",{children:"Smart Features"}),l.jsx("p",{children:"Get reviews, ratings, ingredients, and recommendations instantly after scanning."})]})]}),l.jsxs("div",{className:"current-alternative",children:[l.jsx("h3",{children:"In the Meantime"}),l.jsx("p",{children:"While we're building this feature, you can still discover amazing chocolates by:"}),l.jsxs("div",{className:"alternative-actions",children:[l.jsx("a",{href:"/browse",className:"action-btn primary",children:"🍫 Browse All Chocolates"}),l.jsx("a",{href:"/search",className:"action-btn secondary",children:"🔍 Search by Name"}),l.jsx("a",{href:"/add-chocolate",className:"action-btn secondary",children:"➕ Add New Chocolate"})]})]})]}),l.jsxs("div",{className:"progress-section",children:[l.jsx("h3",{children:"Development Progress"}),l.jsxs("div",{className:"progress-items",children:[l.jsxs("div",{className:"progress-item completed",children:[l.jsx("div",{className:"progress-icon",children:"✅"}),l.jsx("span",{children:"Database Architecture"})]}),l.jsxs("div",{className:"progress-item completed",children:[l.jsx("div",{className:"progress-icon",children:"✅"}),l.jsx("span",{children:"UI/UX Design"})]}),l.jsxs("div",{className:"progress-item in-progress",children:[l.jsx("div",{className:"progress-icon",children:"🔄"}),l.jsx("span",{children:"Barcode Recognition Engine"})]}),l.jsxs("div",{className:"progress-item pending",children:[l.jsx("div",{className:"progress-icon",children:"⏳"}),l.jsx("span",{children:"Mobile App Integration"})]}),l.jsxs("div",{className:"progress-item pending",children:[l.jsx("div",{className:"progress-icon",children:"⏳"}),l.jsx("span",{children:"Beta Testing"})]})]})]})]})})}function zO(){const{categorySlug:r}=Zh(),[e,t]=P.useState([]),[s,o]=P.useState(!0),[u,d]=P.useState(null),[m,g]=P.useState("rating"),y=k=>k==="origin"?"Single Origin":k==="artisan"?"Artisan Craft":k.charAt(0).toUpperCase()+k.slice(1)+" Chocolate",_=k=>{switch(k){case"dark":return"Bold, intense flavors with higher cacao percentages, typically ranging from 55% to 100%.";case"milk":return"Smooth and creamy with a balance of cocoa and dairy notes, offering a more approachable chocolate experience.";case"white":return"Made with cocoa butter, sugar, and milk, without cocoa solids, creating a rich, sweet flavor profile.";case"origin":return"Chocolates made from beans sourced from a single region, showcasing the unique terroir of specific locations.";case"artisan":return"Small-batch chocolates crafted with meticulous attention to detail, often using traditional methods and premium ingredients.";default:return"Explore our chocolate collection"}},b=k=>{g(k.target.value)},T=k=>({dark:"/category-dark.jpg",milk:"/category-milk.jpg",white:"/category-white.jpg",origin:"/category-origin.jpg",artisan:"/category-artisan.jpg"})[k]||"/category-default.jpg";P.useEffect(()=>{(async()=>{try{o(!0);let I;r==="origin"?I={field:"tagIds",operator:"array-contains",value:"single-origin"}:r==="artisan"?I={field:"tagIds",operator:"array-contains",value:"bean-to-bar"}:I={field:"type",operator:"==",value:r.charAt(0).toUpperCase()+r.slice(1)};const z=await sO(I);t(z),o(!1)}catch(I){console.error("Error fetching category data:",I),d(I.message),o(!1)}})()},[r]);const j=()=>[...e].sort((k,I)=>{switch(m){case"rating":return(I.averageRating||0)-(k.averageRating||0);case"popularity":return(I.ratings||0)-(k.ratings||0);case"cacao-high":return(I.cacaoPercentage||0)-(k.cacaoPercentage||0);case"cacao-low":return(k.cacaoPercentage||0)-(I.cacaoPercentage||0);case"name":return k.name.localeCompare(I.name);default:return 0}});if(s)return l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsxs("p",{children:["Loading ",y(r),"..."]})]});if(u)return l.jsxs("div",{className:"error-container",children:[l.jsxs("p",{children:["Error: ",u]}),l.jsx(pe,{to:"/",className:"btn btn-primary",children:"Return Home"})]});const C=j();return l.jsxs("div",{className:"category-page",children:[l.jsx("div",{className:"category-hero",style:{backgroundImage:`linear-gradient(rgba(58, 42, 31, 0.7), rgba(58, 42, 31, 0.7)), url(${T(r)})`},children:l.jsxs("div",{className:"container",children:[l.jsx("h1",{children:y(r)}),l.jsx("p",{className:"category-description",children:_(r)})]})}),l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"category-controls",children:[l.jsxs("div",{className:"results-count",children:[e.length," ",e.length===1?"chocolate":"chocolates"," found"]}),l.jsxs("div",{className:"sort-control",children:[l.jsx("label",{htmlFor:"sort-by",children:"Sort by:"}),l.jsxs("select",{id:"sort-by",value:m,onChange:b,children:[l.jsx("option",{value:"rating",children:"Highest Rated"}),l.jsx("option",{value:"popularity",children:"Most Popular"}),l.jsx("option",{value:"cacao-high",children:"Cacao % (High to Low)"}),l.jsx("option",{value:"cacao-low",children:"Cacao % (Low to High)"}),l.jsx("option",{value:"name",children:"Name (A-Z)"})]})]})]}),C.length>0?l.jsx("div",{className:"chocolates-grid",children:C.map(k=>l.jsx(zo,{chocolate:k},k.id))}):l.jsxs("div",{className:"no-chocolates",children:[l.jsx("p",{children:"No chocolates found in this category."}),l.jsx(pe,{to:"/browse",className:"btn btn-primary",children:"Browse All Chocolates"})]})]})]})}function FO(){const{categoryType:r,categoryValue:e}=Zh(),[t,s]=P.useState([]),[o,u]=P.useState(!0),[d,m]=P.useState(null),g=ys(),y=()=>{var j;const T=(j={percentage:{70:{title:"Best 70% Dark Chocolate Reviews & Ratings",description:"Discover premium 70% dark chocolate bars with expert reviews and ratings. Perfect balance of intensity and smoothness from top chocolate makers worldwide.",keywords:"70% chocolate, 70% dark chocolate, 70% cacao, best 70 percent chocolate, 70% chocolate review, premium dark chocolate",guide:"70% dark chocolate offers the perfect balance between intense chocolate flavor and approachable sweetness. This cacao percentage is ideal for both newcomers to dark chocolate and experienced enthusiasts.",benefits:"Rich in antioxidants, moderate caffeine content, and complex flavor development make 70% chocolate both delicious and healthful."},85:{title:"Best 85% Dark Chocolate - Ultra Premium Reviews",description:"Explore intense 85% dark chocolate bars for serious chocolate lovers. Read expert reviews of the most complex and sophisticated dark chocolates available.",keywords:"85% chocolate, 85% dark chocolate, 85% cacao, ultra dark chocolate, intense chocolate, 85 percent chocolate review",guide:"85% dark chocolate is for the serious chocolate connoisseur. With minimal sugar, these bars showcase pure cacao flavors in their most intense form.",benefits:"Maximum antioxidant content, minimal sugar, and pure chocolate essence make 85% bars the ultimate health-conscious indulgence."},100:{title:"100% Dark Chocolate - Pure Cacao Reviews",description:"Experience pure chocolate with our 100% cacao bar reviews. No sugar, just pure chocolate intensity from master chocolatiers.",keywords:"100% chocolate, 100% cacao, pure chocolate, unsweetened chocolate, 100 percent chocolate, pure cacao bars",guide:"100% chocolate contains zero sugar - just pure cacao. These bars offer the most authentic chocolate experience possible.",benefits:"Pure antioxidants, zero sugar, and the true essence of cacao terroir without any additives."}},origin:{ecuador:{title:"Ecuador Chocolate - Single Origin Reviews & Ratings",description:"Discover exceptional Ecuador chocolate with our comprehensive reviews. From Arriba Nacional beans to modern craft chocolate, explore Ecuador's finest.",keywords:"Ecuador chocolate, Ecuador cacao, Arriba Nacional, Ecuador single origin, chocolate from Ecuador, Ecuador chocolate review",guide:"Ecuador produces some of the world's finest cacao, particularly the legendary Arriba Nacional variety known for its floral and fruity notes.",benefits:"Ecuador's diverse microclimates create chocolates with unique flavor profiles ranging from bright and fruity to rich and earthy."},madagascar:{title:"Madagascar Chocolate - Exotic Single Origin Reviews",description:"Explore unique Madagascar chocolate bars with distinctive red fruit and spice notes. Read reviews of the best Madagascar single origin chocolates.",keywords:"Madagascar chocolate, Madagascar cacao, Sambirano Valley, Madagascar single origin, exotic chocolate, Madagascar chocolate review",guide:"Madagascar chocolate is renowned for its distinctive red fruit notes and subtle spice characteristics, particularly from the Sambirano Valley.",benefits:"Unique terroir creates chocolates with bright acidity, red fruit notes, and exotic spice undertones found nowhere else."},venezuela:{title:"Venezuela Chocolate - Premium Criollo Reviews",description:"Experience Venezuela's legendary Criollo cacao in our chocolate reviews. From Chuao to Sur del Lago, discover Venezuela's chocolate treasures.",keywords:"Venezuela chocolate, Criollo cacao, Chuao chocolate, Venezuela single origin, premium Venezuelan chocolate, Venezuela chocolate review",guide:"Venezuela is home to the rare Criollo cacao variety, considered the most prized cacao in the world for its complex flavor profile.",benefits:"Criollo beans offer unparalleled complexity with nutty, fruity, and spicy notes that showcase chocolate at its finest."}},type:{dark:{title:"Best Dark Chocolate Reviews & Ratings",description:"Comprehensive dark chocolate reviews from 70% to 100% cacao. Find your perfect dark chocolate with expert ratings and tasting notes.",keywords:"dark chocolate, dark chocolate review, best dark chocolate, premium dark chocolate, dark chocolate rating, artisan dark chocolate",guide:"Dark chocolate ranges from approachable 70% bars to intense 100% pure cacao. Each percentage offers unique flavor experiences.",benefits:"High antioxidant content, potential heart health benefits, and complex flavor development make dark chocolate both delicious and nutritious."},milk:{title:"Best Milk Chocolate Reviews & Premium Ratings",description:"Discover exceptional milk chocolate beyond the ordinary. Read reviews of premium milk chocolate bars from artisan chocolatiers worldwide.",keywords:"milk chocolate, premium milk chocolate, artisan milk chocolate, best milk chocolate, milk chocolate review, gourmet milk chocolate",guide:"Premium milk chocolate balances creamy dairy notes with chocolate intensity, creating sophisticated flavors far beyond mass-market bars.",benefits:"Creamy texture, approachable sweetness, and comfort appeal make quality milk chocolate perfect for both newcomers and connoisseurs."},white:{title:"Best White Chocolate Reviews & Artisan Ratings",description:"Explore premium white chocolate made with real cocoa butter. Read reviews of the finest white chocolate bars and artisan creations.",keywords:"white chocolate, premium white chocolate, artisan white chocolate, best white chocolate, white chocolate review, cocoa butter chocolate",guide:"True white chocolate contains cocoa butter, vanilla, and sugar. Premium versions showcase the subtle complexity of quality cocoa butter.",benefits:"Smooth texture, subtle vanilla notes, and versatility in pairing make quality white chocolate a sophisticated treat."}}}[r])==null?void 0:j[e.toLowerCase()];return T||{title:`${e} Chocolate Reviews`,description:`Explore ${e} chocolate with our comprehensive reviews and ratings.`,keywords:`${e} chocolate, ${e} chocolate review`,guide:`Discover the unique characteristics of ${e} chocolate.`,benefits:`Learn about the special qualities that make ${e} chocolate distinctive.`}};P.useEffect(()=>{r&&e&&(async()=>{try{u(!0);let T;switch(r){case"percentage":const k=parseInt(e);T=ar(ln(Ve,"chocolates"),Rr("cacaoPercentage",">=",k-2),Rr("cacaoPercentage","<=",k+2),rr("cacaoPercentage"),rr("averageRating","desc"));break;case"origin":T=ar(ln(Ve,"chocolates"),Rr("origin","==",e),rr("averageRating","desc"));break;case"type":T=ar(ln(Ve,"chocolates"),Rr("type","==",e),rr("averageRating","desc"));break;default:throw new Error("Invalid category type")}const C=(await Kn(T)).docs.map(k=>({id:k.id,...k.data()}));s(C),u(!1)}catch(T){console.error("Error fetching category chocolates:",T),m(T.message),u(!1)}})()},[r,e]);const _=y();return o?l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsxs("p",{children:["Loading ",e," chocolates..."]})]}):d?l.jsxs("div",{className:"category-page",children:[l.jsx(xc,{title:"Category Not Found",description:"The chocolate category you're looking for could not be found."}),l.jsx("div",{className:"container",children:l.jsxs("div",{className:"error-message",children:[l.jsx("h1",{children:"Category Not Found"}),l.jsx("p",{children:"Sorry, we couldn't find chocolates in this category."}),l.jsx(pe,{to:"/browse",className:"btn btn-primary",children:"Browse All Chocolates"})]})})]}):l.jsxs("div",{className:"category-landing-page",children:[l.jsx(xc,{title:_.title,description:_.description,keywords:_.keywords,url:`/category/${r}/${e}`}),l.jsx("section",{className:"category-hero",children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"category-header",children:[l.jsxs("nav",{className:"breadcrumb",children:[l.jsx(pe,{to:"/",children:"Home"}),l.jsx("span",{children:"›"}),l.jsx(pe,{to:"/browse",children:"Browse"}),l.jsx("span",{children:"›"}),l.jsxs("span",{children:[e," Chocolate"]})]}),l.jsx("h1",{children:_.title.split(" - ")[0]}),l.jsx("p",{className:"category-description",children:_.description}),t.length>0&&l.jsxs("div",{className:"category-stats",children:[l.jsxs("span",{className:"stat",children:[l.jsx("strong",{children:t.length})," chocolates found"]}),l.jsxs("span",{className:"stat",children:[l.jsx("strong",{children:t.filter(b=>b.averageRating>=4).length})," highly rated"]}),l.jsxs("span",{className:"stat",children:[l.jsx("strong",{children:new Set(t.map(b=>b.maker)).size})," different makers"]})]})]})})}),l.jsx("section",{className:"category-content",children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"content-grid",children:[l.jsxs("div",{className:"guide-section",children:[l.jsxs("h2",{children:["About ",e," Chocolate"]}),l.jsx("p",{children:_.guide}),l.jsxs("h3",{children:["Why Choose ",e," Chocolate?"]}),l.jsx("p",{children:_.benefits}),r==="percentage"&&l.jsxs("div",{className:"tasting-tips",children:[l.jsx("h3",{children:"Tasting Tips"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Let the chocolate melt on your tongue to release full flavors"}),l.jsx("li",{children:"Look for notes that develop as the chocolate melts"}),l.jsx("li",{children:"Pay attention to the finish - how long flavors linger"}),l.jsx("li",{children:"Compare different origins at the same percentage"})]})]})]}),l.jsxs("div",{className:"quick-filters",children:[l.jsx("h3",{children:"Refine Your Search"}),l.jsxs("div",{className:"filter-links",children:[l.jsx(pe,{to:"/browse?sort=rating",className:"filter-link",children:"Highest Rated"}),l.jsx(pe,{to:"/browse?sort=popularity",className:"filter-link",children:"Most Reviewed"}),r!=="percentage"&&l.jsx(pe,{to:"/category/percentage/70",className:"filter-link",children:"70% Chocolate"}),r!=="origin"&&l.jsx(pe,{to:"/category/origin/ecuador",className:"filter-link",children:"Ecuador Origin"})]})]})]})})}),l.jsx("section",{className:"chocolates-section",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"section-header",children:[l.jsxs("h2",{children:["Top ",e," Chocolates"]}),l.jsx("div",{className:"sort-controls",children:l.jsxs("select",{onChange:b=>{const T=b.target.value;g(`/browse?${r}=${e}&sort=${T}`)},children:[l.jsx("option",{value:"rating",children:"Highest Rated"}),l.jsx("option",{value:"popularity",children:"Most Reviews"}),l.jsx("option",{value:"name",children:"Name A-Z"}),l.jsx("option",{value:"cacao-high",children:"Cacao % High-Low"})]})})]}),t.length>0?l.jsx("div",{className:"chocolates-grid",children:t.map(b=>l.jsx(zo,{chocolate:b},b.id))}):l.jsxs("div",{className:"no-chocolates",children:[l.jsxs("h3",{children:["No ",e," Chocolates Found"]}),l.jsx("p",{children:"We're always adding new chocolates to our database. Check back soon or explore other categories."}),l.jsxs("div",{className:"alternative-links",children:[l.jsx(pe,{to:"/browse",className:"btn btn-primary",children:"Browse All Chocolates"}),l.jsx(pe,{to:"/category/type/dark",className:"btn btn-secondary",children:"Dark Chocolate"})]})]})]})}),l.jsx("section",{className:"related-categories",children:l.jsxs("div",{className:"container",children:[l.jsx("h2",{children:"Explore Related Categories"}),l.jsxs("div",{className:"category-links",children:[r!=="percentage"&&l.jsxs(l.Fragment,{children:[l.jsxs(pe,{to:"/category/percentage/70",className:"category-link",children:[l.jsx("h3",{children:"70% Chocolate"}),l.jsx("p",{children:"Perfect balance of intensity and smoothness"})]}),l.jsxs(pe,{to:"/category/percentage/85",className:"category-link",children:[l.jsx("h3",{children:"85% Chocolate"}),l.jsx("p",{children:"For serious dark chocolate lovers"})]})]}),r!=="origin"&&l.jsxs(l.Fragment,{children:[l.jsxs(pe,{to:"/category/origin/ecuador",className:"category-link",children:[l.jsx("h3",{children:"Ecuador Chocolate"}),l.jsx("p",{children:"Legendary Arriba Nacional cacao"})]}),l.jsxs(pe,{to:"/category/origin/madagascar",className:"category-link",children:[l.jsx("h3",{children:"Madagascar Chocolate"}),l.jsx("p",{children:"Distinctive red fruit notes"})]})]}),r!=="type"&&l.jsxs(l.Fragment,{children:[l.jsxs(pe,{to:"/category/type/dark",className:"category-link",children:[l.jsx("h3",{children:"Dark Chocolate"}),l.jsx("p",{children:"Rich, complex, and sophisticated"})]}),l.jsxs(pe,{to:"/category/type/milk",className:"category-link",children:[l.jsx("h3",{children:"Milk Chocolate"}),l.jsx("p",{children:"Creamy, smooth, and approachable"})]})]})]})]})})]})}function qO(){const{makerName:r}=Zh(),[e]=yE(),t=e.get("maker"),s=r||t,[o,u]=P.useState([]),[d,m]=P.useState(!0),[g,y]=P.useState(null),[_,b]=P.useState("rating");P.useEffect(()=>{(async()=>{if(s)try{m(!0),console.log("🔍 Searching for chocolates by maker:",s);const k=await $g();console.log("📊 Total chocolates retrieved:",k.length);const I=k.filter(z=>{if(!z.maker)return!1;const J=z.maker.toLowerCase().trim(),X=s.toLowerCase().trim();return J===X?(console.log("✅ Exact match found:",z.name,"by",z.maker),!0):J.includes(X)||X.includes(J)?(console.log("✅ Partial match found:",z.name,"by",z.maker),!0):!1});console.log("🎯 Chocolates found for maker:",I.length),console.log("📋 Maker chocolates:",I.map(z=>`${z.name} by ${z.maker}`)),u(I),m(!1)}catch(k){console.error("💥 Error fetching maker chocolates:",k),y(k.message),m(!1)}})()},[s]);const T=()=>[...o].sort((C,k)=>{switch(_){case"rating":return(k.averageRating||0)-(C.averageRating||0);case"popularity":return(k.ratings||k.reviewCount||0)-(C.ratings||C.reviewCount||0);case"cacao-high":return(k.cacaoPercentage||0)-(C.cacaoPercentage||0);case"cacao-low":return(C.cacaoPercentage||0)-(k.cacaoPercentage||0);case"name":return(C.name||"").localeCompare(k.name||"");default:return 0}});if(d)return l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsxs("p",{children:["Loading chocolates by ",s,"..."]})]});if(g)return l.jsx("div",{className:"error-container",children:l.jsxs("p",{children:["Error: ",g]})});const j=T();return l.jsx("div",{className:"maker-page",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"maker-header",children:[l.jsxs("h1",{children:["Chocolates by ",s]}),l.jsxs("p",{className:"maker-description",children:["Explore all chocolates made by ",s," in our collection"]})]}),l.jsxs("div",{className:"maker-controls",children:[l.jsxs("div",{className:"results-count",children:[o.length," ",o.length===1?"chocolate":"chocolates"," found"]}),l.jsxs("div",{className:"sort-control",children:[l.jsx("label",{htmlFor:"sort-by",children:"Sort by:"}),l.jsxs("select",{id:"sort-by",value:_,onChange:C=>b(C.target.value),children:[l.jsx("option",{value:"rating",children:"Highest Rated"}),l.jsx("option",{value:"popularity",children:"Most Popular"}),l.jsx("option",{value:"cacao-high",children:"Cacao % (High to Low)"}),l.jsx("option",{value:"cacao-low",children:"Cacao % (Low to High)"}),l.jsx("option",{value:"name",children:"Name (A-Z)"})]})]})]}),j.length>0?l.jsx("div",{className:"chocolates-grid",children:j.map(C=>l.jsx(zo,{chocolate:C},C.id))}):l.jsxs("div",{className:"no-chocolates",children:[l.jsxs("p",{children:['No chocolates found for "',s,'".']}),l.jsx("p",{children:"This might be due to variations in how the maker name is stored."}),l.jsxs("div",{className:"debug-info",style:{marginTop:"1rem",padding:"1rem",background:"#f5f5f5",borderRadius:"8px"},children:[l.jsx("p",{children:l.jsx("strong",{children:"Debug Info:"})}),l.jsxs("p",{children:['Searched for: "',s,'"']}),l.jsx("p",{children:"Try searching for part of the maker name in the main search."})]})]})]})})}function xx({onImageSelect:r,currentImage:e=null}){const[t,s]=P.useState(e),[o,u]=P.useState(""),d=g=>{if(g.target.files&&g.target.files[0]){const y=g.target.files[0];if(u(""),y.size>5*1024*1024){u("File too large. Please choose an image under 5MB.");return}if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(y.type)&&!y.name.match(/\.(jpg|jpeg|png|webp)$/i)){u("Please upload a JPG, PNG, or WebP image. HEIC files are not supported.");return}const b=new FileReader;b.onload=T=>{s(T.target.result)},b.readAsDataURL(y),r&&typeof r=="function"&&r(y)}},m=()=>{s(null),u(""),r&&typeof r=="function"&&r(null)};return l.jsxs("div",{className:"image-uploader",children:[l.jsx("div",{className:"image-preview-container",children:t?l.jsxs("div",{className:"preview-wrapper",children:[l.jsx("img",{src:t,alt:"Preview",className:"image-preview"}),l.jsx("button",{type:"button",className:"remove-image-btn",onClick:m,title:"Remove image",children:"×"})]}):l.jsxs("div",{className:"image-placeholder",children:[l.jsx("span",{children:"📷"}),l.jsx("span",{children:"No Image Selected"})]})}),l.jsx("div",{className:"upload-controls",children:l.jsxs("label",{className:"upload-button",children:[t?"Change Image":"Upload Label Image",l.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:d,style:{display:"none"}})]})}),o&&l.jsx("div",{className:"error-message",children:o}),l.jsxs("div",{className:"upload-info",children:["Supports JPG, PNG, and WebP files up to 5MB",l.jsx("br",{}),l.jsx("small",{children:"iPhone users: Photos will be automatically converted to JPG"})]})]})}const HO=["Dark","Milk","White","Ruby","Dark Milk","Flavored/Infused","Blonde"],$O=["Fruity","Nutty","Floral","Spicy","Earthy","Caramel","Vanilla","Berry","Citrus","Coffee","Honey","Smoky","Creamy","Bitter","Sweet"],GO=["Organic","Fair Trade","Bean-to-Bar","Raw","Sugar-Free","Dairy-Free","Vegan","Gluten-Free","Single Estate","Award Winner"];function YO(){const{currentUser:r}=Es(),e=ys();P.useEffect(()=>{r||e("/auth")},[r,e]);const[t,s]=P.useState({name:"",maker:"",types:[],origin:"",cacaoPercentage:"",flavorTags:[],attributeTags:[],customTags:""}),[o,u]=P.useState({rating:0,text:"",title:""}),[d,m]=P.useState(null),[g,y]=P.useState(!1),[_,b]=P.useState(!1),[T,j]=P.useState(!1),[C,k]=P.useState({flavors:!1,attributes:!1}),[I,z]=P.useState(null),[J,X]=P.useState(!1),[re,ee]=P.useState([]);P.useEffect(()=>{(async()=>{await yx()})()},[]);const ce=async()=>{if(!t.name||!t.maker){z(null),ee([]);return}X(!0);try{const Q=`${t.name} ${t.maker}`.toLowerCase(),de=await gx(Q),Y=de.find(ye=>ye.name.toLowerCase()===t.name.toLowerCase()&&ye.maker.toLowerCase()===t.maker.toLowerCase()),le=de.filter(ye=>ye.maker.toLowerCase()===t.maker.toLowerCase()&&(ye.name.toLowerCase().includes(t.name.toLowerCase())||t.name.toLowerCase().includes(ye.name.toLowerCase())));ee(le),Y?z(`⚠️ This chocolate already exists! 
Found: "${Y.name}" by ${Y.maker}
Please review before continuing.`):le.length>0?z(`⚠️ Found ${le.length} similar chocolate(s) from ${t.maker}. 
Please review before continuing.`):(z(null),ee([]))}catch(Q){console.error("Error checking duplicates:",Q)}finally{X(!1)}};P.useEffect(()=>{const Q=setTimeout(()=>{ce()},1e3);return()=>clearTimeout(Q)},[t.name,t.maker,t.types]);const O=Q=>{const{name:de,value:Y}=Q.target;s(le=>({...le,[de]:Y}))},N=Q=>{const{name:de,value:Y}=Q.target;u(le=>({...le,[de]:Y}))},R=Q=>{u(de=>({...de,rating:Q}))},S=Q=>{m(Q)},M=Q=>{s(de=>({...de,types:de.types.includes(Q)?de.types.filter(Y=>Y!==Q):[...de.types,Q]}))},B=(Q,de)=>{s(Y=>({...Y,[Q]:Y[Q].includes(de)?Y[Q].filter(le=>le!==de):[...Y[Q],de]}))},D=async Q=>{if(Q.preventDefault(),!r){alert("Please sign in to add chocolates");return}if(!t.name.trim()){alert("Please enter a chocolate name");return}if(!t.maker.trim()){alert("Please enter a maker name");return}if(t.types.length===0){alert("Please select at least one chocolate type");return}if(!o.rating){alert("Please select a rating");return}if(!o.text.trim()){alert("Please write a review");return}if(!(re.length>0&&!window.confirm(`Warning: Found ${re.length} similar chocolate(s). Are you sure this is a new, unique chocolate?`))){y(!0);try{console.log("🚀 Form submission started");const de=[...t.flavorTags,...t.attributeTags,...t.customTags.split(",").map(Ie=>Ie.trim()).filter(Ie=>Ie)],Y={name:t.name.trim(),maker:t.maker.trim(),type:t.types.join(", "),origin:t.origin.trim()||null,cacaoPercentage:t.cacaoPercentage?parseInt(t.cacaoPercentage):null,tags:de},le=await lO(Y,d);console.log("✅ Chocolate added successfully:",le);const ye={...o,chocolateId:le,userId:r.uid,userName:r.displayName||"Chocolate Lover",userPhotoURL:r.photoURL||null,helpfulVotes:0,createdAt:new Date};await vx(ye),console.log("✅ Review added successfully"),b(!0),j(!0),setTimeout(()=>{e(`/chocolate/${le}`)},2e3)}catch(de){console.error("❌ Error adding chocolate:",de),alert(`Error adding chocolate: ${de.message}`)}finally{y(!1)}}};return l.jsx("div",{className:"add-chocolate-page",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"page-header",children:[l.jsx("h1",{children:"Create a New Chocolate Page"}),l.jsx("p",{children:"Add a chocolate to our database and be the first to review it!"})]}),l.jsxs("form",{onSubmit:D,className:"add-chocolate-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("span",{className:"section-icon",children:"✨"}),l.jsx("h2",{children:"Chocolate Details"})]}),l.jsxs("div",{className:"form-grid",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"name",children:"Chocolate Name / Flavor *"}),l.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:O,placeholder:"e.g., Madagascar Dark 70% or Raspberry Truffle",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"maker",children:"Maker/Brand *"}),l.jsx("input",{type:"text",id:"maker",name:"maker",value:t.maker,onChange:O,placeholder:"e.g., Valrhona, Lindt",required:!0})]})]}),l.jsxs("div",{className:"form-grid-three",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"origin",children:"Origin"}),l.jsx("input",{type:"text",id:"origin",name:"origin",value:t.origin,onChange:O,placeholder:"e.g., Ecuador"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"cacaoPercentage",children:"Cacao %"}),l.jsx("input",{type:"number",id:"cacaoPercentage",name:"cacaoPercentage",value:t.cacaoPercentage,onChange:O,placeholder:"70",min:"1",max:"100"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"type",children:"Type * (Select all that apply)"}),l.jsx("div",{className:"type-selector",children:HO.map(Q=>l.jsx("button",{type:"button",onClick:()=>M(Q),className:`type-button ${t.types.includes(Q)?"selected":""}`,children:Q},Q))})]})]}),I&&l.jsxs("div",{className:"duplicate-warning",children:[l.jsx("p",{children:I}),re.length>0&&l.jsxs("div",{className:"similar-chocolates",children:[l.jsx("p",{children:"Similar chocolates found:"}),l.jsx("ul",{children:re.map(Q=>l.jsx("li",{children:l.jsxs("a",{href:`/chocolate/${Q.id}`,target:"_blank",rel:"noopener noreferrer",children:[Q.name," by ",Q.maker]})},Q.id))})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("span",{className:"section-icon",children:"🍫"}),l.jsx("h2",{children:"Flavor Profile"})]}),l.jsxs("div",{className:"tag-selection",children:[l.jsx("p",{className:"tag-helper",children:"Select all flavors you taste:"}),t.flavorTags.length>0&&l.jsxs("div",{className:"selected-tags-summary",children:[l.jsxs("strong",{children:[t.flavorTags.length," selected:"]})," ",t.flavorTags.join(", ")]}),l.jsxs("div",{className:`tag-section-wrapper ${C.flavors?"expanded":""}`,children:[l.jsx("div",{className:"tag-scroll-container",children:l.jsx("div",{className:"tag-grid",children:$O.map(Q=>l.jsx("button",{type:"button",onClick:()=>B("flavorTags",Q),className:`tag-button ${t.flavorTags.includes(Q)?"selected":""}`,children:Q},Q))})}),l.jsx("button",{type:"button",className:`tag-expand-toggle ${C.flavors?"expanded":""}`,onClick:()=>k(Q=>({...Q,flavors:!Q.flavors})),children:C.flavors?"Show Less":"Show All Flavors"})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("span",{className:"section-icon",children:"🏆"}),l.jsx("h2",{children:"Special Attributes"})]}),l.jsxs("div",{className:"tag-selection",children:[l.jsx("p",{className:"tag-helper",children:"Check all that apply:"}),t.attributeTags.length>0&&l.jsxs("div",{className:"selected-tags-summary",children:[l.jsxs("strong",{children:[t.attributeTags.length," selected:"]})," ",t.attributeTags.join(", ")]}),l.jsxs("div",{className:`tag-section-wrapper ${C.attributes?"expanded":""}`,children:[l.jsx("div",{className:"tag-scroll-container",children:l.jsx("div",{className:"tag-grid",children:GO.map(Q=>l.jsx("button",{type:"button",onClick:()=>B("attributeTags",Q),className:`tag-button ${t.attributeTags.includes(Q)?"selected":""}`,children:Q},Q))})}),l.jsx("button",{type:"button",className:`tag-expand-toggle ${C.attributes?"expanded":""}`,onClick:()=>k(Q=>({...Q,attributes:!Q.attributes})),children:C.attributes?"Show Less":"Show All Attributes"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"customTags",children:"Additional Tags"}),l.jsx("input",{type:"text",id:"customTags",name:"customTags",value:t.customTags,onChange:O,placeholder:"Add custom tags separated by commas"})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("span",{className:"section-icon",children:"📷"}),l.jsx("h2",{children:"Add a Photo"})]}),l.jsx(xx,{onImageSelected:S,existingImageUrl:null,maxSizeInMB:5}),d&&l.jsxs("p",{className:"image-selected",children:["✓ Image selected: ",d.name]})]}),l.jsxs("div",{className:"form-section review-section-enhanced",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("span",{className:"section-icon",children:"⭐"}),l.jsx("h2",{children:"Write the First Review!"})]}),l.jsx("div",{className:"review-intro-enhanced",children:l.jsx("p",{children:"Be the first to share your thoughts about this chocolate! Your review helps others discover great chocolate."})}),l.jsxs("div",{className:"rating-group",children:[l.jsx("label",{children:"Your Rating *"}),l.jsxs("div",{className:"rating-input-container",children:[l.jsx("div",{className:"rating-input",children:[1,2,3,4,5].map(Q=>l.jsx("button",{type:"button",onClick:()=>R(Q),className:`star-button ${o.rating>=Q?"filled":""}`,"aria-label":`Rate ${Q} star${Q!==1?"s":""}`,children:"★"},Q))}),o.rating>0&&l.jsxs("div",{className:"rating-feedback","data-rating":o.rating,children:[l.jsxs("span",{className:"rating-text",children:[o.rating===1&&"Not for me",o.rating===2&&"It was okay",o.rating===3&&"Good chocolate",o.rating===4&&"Really enjoyed it!",o.rating===5&&"Outstanding!"]}),l.jsxs("span",{className:"rating-description",children:[o.rating===1&&"This chocolate didn't meet my expectations",o.rating===2&&"Average, but I've had better",o.rating===3&&"A solid chocolate worth trying",o.rating===4&&"Definitely would buy again",o.rating===5&&"One of the best I've ever had!"]})]})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"reviewTitle",children:"Review Title *"}),l.jsx("input",{type:"text",id:"reviewTitle",name:"title",value:o.title,onChange:N,placeholder:"Sum up your experience in a few words",maxLength:"100",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"reviewText",children:"Your Review *"}),l.jsx("textarea",{id:"reviewText",name:"text",value:o.text,onChange:N,placeholder:"Share your tasting notes, texture, aroma, and overall experience...",rows:"6",required:!0,minLength:"50",maxLength:"2000"}),l.jsxs("div",{className:"textarea-footer",children:[l.jsxs("span",{className:`character-count ${o.text.length<50?"text-warning":o.text.length>1800?"text-danger":""}`,children:[o.text.length," / 2000 characters",o.text.length<50&&" (min 50)"]}),l.jsx("span",{className:"helper-text",children:o.text.length<50?"Add more details about taste, texture, and experience":"Great review! Help others discover amazing chocolate"})]})]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",onClick:()=>e("/"),className:"cancel-button",disabled:g,children:"Cancel"}),l.jsx("button",{type:"submit",className:"submit-button",disabled:g||t.types.length===0,children:g?"Adding Chocolate...":"Add Chocolate & Review"})]})]}),_&&l.jsx("div",{className:"modal-overlay",children:l.jsxs("div",{className:"success-modal",children:[l.jsx("div",{className:"success-icon",children:"🎉"}),l.jsx("h2",{children:"Chocolate Added Successfully!"}),l.jsx("p",{children:"Thank you for contributing to our chocolate community!"}),l.jsx("div",{className:"success-animation",children:l.jsx("div",{className:"chocolate-icon",children:"🍫"})}),l.jsx("p",{className:"redirect-message",children:"Redirecting to your chocolate page..."})]})})]})})}function ep(){const r=ys();ur();const{currentUser:e,loading:t}=Es();P.useEffect(()=>{!t&&e&&(console.log("✅ User already logged in, redirecting to profile"),setTimeout(()=>{r("/profile",{replace:!0})},100))},[e,t,r]);const[s,o]=P.useState(!1),[u,d]=P.useState(""),[m,g]=P.useState(""),[y,_]=P.useState(""),[b,T]=P.useState(""),[j,C]=P.useState(!1),[k,I]=P.useState(""),[z,J]=P.useState(""),[X,re]=P.useState(!1),ee=async R=>{console.log(`🔑 Starting ${R} authentication`),C(!0),I("");try{let S;R==="Google"&&(S=await yO()),console.log(`✅ ${R} auth successful:`,S.uid),re(!0),setTimeout(()=>{console.log("🚀 Redirecting to profile after successful auth");try{r("/profile",{replace:!0})}catch(M){console.error("Navigation error:",M),window.location.href="/profile"}},1500)}catch(S){console.error(`❌ ${R} auth error:`,S),I(S.message||`Failed to sign in with ${R}`),re(!1)}finally{C(!1)}},ce=async R=>{if(R.preventDefault(),console.log(`🔑 Starting ${s?"signup":"login"} with email`),s&&m!==y){I("Passwords do not match");return}C(!0),I("");try{let S;s?S=await pO(u,m,b):S=await gO(u,m),console.log("✅ Email auth successful:",S.uid),re(!0),setTimeout(()=>{console.log("🚀 Redirecting to profile after successful auth");try{r("/profile",{replace:!0})}catch(M){console.error("Navigation error:",M),window.location.href="/profile"}},1500)}catch(S){console.error("❌ Email auth error:",S),I(S.message),re(!1)}finally{C(!1)}},O=async()=>{if(!u){I("Please enter your email address first");return}try{await EO(u),J("Password reset email sent! Check your inbox."),I("")}catch{I("Error sending reset email. Please try again.")}},N=()=>{o(!s),I(""),J("")};return X?l.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #FDFCFC 0%, #F8F9FA 100%)"},children:l.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"20px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.1)",textAlign:"center",maxWidth:"400px",width:"90%"},children:[l.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem",animation:"bounce 2s infinite"},children:"🍫"}),l.jsx("h2",{style:{color:"#2D1810",marginBottom:"1rem"},children:"Welcome to Chocly!"}),l.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:"Successfully signed in. Redirecting to your profile..."}),l.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #F4A261",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}})]})}):l.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #FDFCFC 0%, #F8F9FA 100%)",padding:"1rem"},children:l.jsxs("div",{style:{background:"white",padding:"2.5rem",borderRadius:"20px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.1)",width:"100%",maxWidth:"400px"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[l.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"🍫"}),l.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",color:"#2D1810",marginBottom:"0.5rem"},children:s?"Join Chocly":"Welcome Back"}),l.jsx("p",{style:{color:"#666",fontSize:"1rem"},children:s?"Create your chocolate journey":"Sign in to continue your chocolate journey"})]}),k&&l.jsx("div",{style:{background:"#FEE2E2",border:"1px solid #FCA5A5",color:"#DC2626",padding:"0.875rem",borderRadius:"12px",marginBottom:"1rem",fontSize:"0.9rem"},children:k}),z&&l.jsx("div",{style:{background:"#D1FAE5",border:"1px solid #86EFAC",color:"#059669",padding:"0.875rem",borderRadius:"12px",marginBottom:"1rem",fontSize:"0.9rem"},children:z}),l.jsx("div",{style:{marginBottom:"1.5rem"},children:l.jsxs("button",{onClick:()=>ee("Google"),disabled:j,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.875rem 0.75rem",borderRadius:"12px",fontWeight:600,fontSize:"0.9rem",cursor:j?"not-allowed":"pointer",transition:"all 0.3s ease",border:"2px solid #E5E7EB",minHeight:"48px",background:"white",color:"#374151",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)",opacity:j?.7:1},children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12.545 10.239v3.821h5.445c-0.712 2.315-2.647 3.972-5.445 3.972-3.332 0-6.033-2.701-6.033-6.032s2.701-6.032 6.033-6.032c1.498 0 2.866 0.549 3.921 1.453l2.814-2.814c-1.79-1.677-4.184-2.702-6.735-2.702-5.522 0-10 4.478-10 10s4.478 10 10 10c8.396 0 10.201-7.835 9.412-11.566l-9.412-0.1z"})}),"Google"]})}),l.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"1.5rem 0",fontSize:"0.875rem",color:"#9CA3AF"},children:[l.jsx("div",{style:{flex:1,height:"1px",background:"#E5E7EB"}}),l.jsx("span",{style:{padding:"0 1rem"},children:"or continue with email"}),l.jsx("div",{style:{flex:1,height:"1px",background:"#E5E7EB"}})]}),l.jsxs("form",{onSubmit:ce,children:[s&&l.jsx("input",{type:"text",placeholder:"Full Name",value:b,onChange:R=>T(R.target.value),style:{width:"100%",padding:"0.875rem",border:"2px solid #E5E7EB",borderRadius:"12px",fontSize:"1rem",marginBottom:"0.75rem",transition:"border-color 0.3s",outline:"none"},required:!0}),l.jsx("input",{type:"email",placeholder:"Email address",value:u,onChange:R=>d(R.target.value),style:{width:"100%",padding:"0.875rem",border:"2px solid #E5E7EB",borderRadius:"12px",fontSize:"1rem",marginBottom:"0.75rem",transition:"border-color 0.3s",outline:"none"},required:!0}),l.jsx("input",{type:"password",placeholder:"Password",value:m,onChange:R=>g(R.target.value),style:{width:"100%",padding:"0.875rem",border:"2px solid #E5E7EB",borderRadius:"12px",fontSize:"1rem",marginBottom:"0.75rem",transition:"border-color 0.3s",outline:"none"},required:!0}),s&&l.jsx("input",{type:"password",placeholder:"Confirm Password",value:y,onChange:R=>_(R.target.value),style:{width:"100%",padding:"0.875rem",border:"2px solid #E5E7EB",borderRadius:"12px",fontSize:"1rem",marginBottom:"0.75rem",transition:"border-color 0.3s",outline:"none"},required:!0}),l.jsx("button",{type:"submit",disabled:j,style:{width:"100%",background:"linear-gradient(135deg, #F4A261 0%, #F4D03F 100%)",color:"#2D1810",border:"none",padding:"0.875rem",borderRadius:"12px",fontSize:"1rem",fontWeight:700,cursor:j?"not-allowed":"pointer",transition:"all 0.3s ease",marginBottom:"1rem",opacity:j?.7:1},children:j?"Please wait...":s?"Create Account":"Sign In"})]}),l.jsxs("div",{style:{textAlign:"center",fontSize:"0.9rem"},children:[!s&&l.jsx("button",{onClick:O,style:{background:"none",border:"none",color:"#F4A261",cursor:"pointer",textDecoration:"underline",marginBottom:"1rem",fontSize:"0.9rem"},children:"Forgot your password?"}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"#666"},children:s?"Already have an account?":"Don't have an account?"})," ",l.jsx("button",{onClick:N,style:{background:"none",border:"none",color:"#F4A261",cursor:"pointer",fontWeight:600,textDecoration:"underline"},children:s?"Sign In":"Sign Up"})]})]})]})})}const KO="/assets/logo-B6Il3ES6.png";function QO(){const[r,e]=P.useState(""),[t,s]=P.useState(!1),[o,u]=P.useState(!1),[d,m]=P.useState(!1),g=P.useRef(null),y=P.useRef(null),_=P.useRef(null),b=P.useRef(null),T=ys(),j=ur(),{currentUser:C,userProfile:k}=Es(),I=j.pathname==="/",z=R=>{R.preventDefault(),r.trim()&&(T(`/search?query=${encodeURIComponent(r)}`),e(""),m(!1))},J=()=>{s(!t),t||m(!1)},X=()=>{u(!o),o||m(!1)},re=()=>{m(!d),d||(s(!1),u(!1),setTimeout(()=>{b.current&&b.current.focus()},150))},ee=async()=>{try{await wO(),u(!1),T("/")}catch(R){console.error("Error logging out:",R)}};P.useEffect(()=>{function R(S){g.current&&!g.current.contains(S.target)&&s(!1),y.current&&!y.current.contains(S.target)&&u(!1),_.current&&!_.current.contains(S.target)&&m(!1)}return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[]),P.useEffect(()=>{function R(S){S.key==="Escape"&&d&&(m(!1),e(""))}return document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}},[d]);const ce=()=>k!=null&&k.displayName?k.displayName:C!=null&&C.displayName?C.displayName:C!=null&&C.email?C.email.split("@")[0]:"User",O=()=>k!=null&&k.photoURL||C!=null&&C.photoURL?(k==null?void 0:k.photoURL)||(C==null?void 0:C.photoURL):null,N=()=>ce().charAt(0).toUpperCase();return l.jsx("header",{className:"header",children:l.jsxs("div",{className:"container",children:[l.jsx(pe,{to:"/",className:"logo",children:l.jsx("img",{src:KO,alt:"Chocly",className:"logo-image"})}),!I&&l.jsxs("div",{className:"search-section",ref:_,children:[l.jsx("button",{className:`search-toggle ${d?"active":""}`,onClick:re,"aria-label":d?"Close search":"Open search",children:l.jsxs("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),l.jsxs("form",{className:`search-form-expandable ${d?"open":""}`,onSubmit:z,children:[l.jsx("input",{ref:b,type:"text",placeholder:"Search chocolates, makers...",value:r,onChange:R=>e(R.target.value),className:"search-input-expandable"}),l.jsx("button",{type:"submit",className:"search-submit-btn",children:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("path",{d:"M21 21l-4.35-4.35"})]})})]})]}),l.jsxs("div",{className:"header-actions",children:[C&&l.jsxs(pe,{to:"/add-chocolate",className:"add-chocolate-btn",children:[l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),l.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),l.jsx("span",{className:"add-chocolate-text",children:"Add Chocolate"})]}),C?l.jsxs("div",{className:"user-menu-container",ref:y,children:[l.jsxs("button",{className:"user-menu-toggle",onClick:X,children:[l.jsx("div",{className:"user-avatar",children:O()?l.jsx("img",{src:O(),alt:ce()}):l.jsx("span",{className:"user-initials",children:N()})}),l.jsx("span",{className:"user-name",children:ce()}),l.jsx("svg",{className:`chevron ${o?"open":""}`,width:"16",height:"16",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M7 10l5 5 5-5z",fill:"currentColor"})})]}),l.jsxs("div",{className:`user-dropdown ${o?"open":""}`,children:[l.jsxs(pe,{to:"/profile",onClick:()=>u(!1),className:"user-dropdown-item",children:[l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"My Profile"]}),l.jsxs(pe,{to:"/add-chocolate",onClick:()=>u(!1),className:"user-dropdown-item",children:[l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),l.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Add Chocolate"]}),l.jsxs("button",{onClick:ee,className:"user-dropdown-item logout",children:[l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16,17 21,12 16,7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Sign Out"]})]})]}):l.jsx(pe,{to:"/auth",className:"auth-btn primary-btn",children:"Sign In"}),l.jsxs("div",{className:"nav-container",ref:g,children:[l.jsx("button",{className:"menu-toggle",onClick:J,"aria-label":"Menu",children:l.jsxs("span",{className:`menu-icon ${t?"open":""}`,children:[l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{})]})}),l.jsxs("nav",{className:`nav ${t?"open":""}`,children:[l.jsxs("div",{className:"nav-section",children:[l.jsx("h3",{children:"Browse"}),l.jsx(pe,{to:"/",onClick:()=>s(!1),children:"Home"}),l.jsx(pe,{to:"/browse",onClick:()=>s(!1),children:"All Chocolates"}),l.jsxs(pe,{to:"/barcode",onClick:()=>s(!1),children:["Barcode Search",l.jsx("span",{className:"under-construction",children:"Under Construction"})]})]}),l.jsxs("div",{className:"nav-section",children:[l.jsx("h3",{children:"Community"}),C&&l.jsx(pe,{to:"/add-chocolate",onClick:()=>s(!1),children:"Add Chocolate"}),l.jsx(pe,{to:"/about",onClick:()=>s(!1),children:"About Us"}),l.jsx(pe,{to:"/contact",onClick:()=>s(!1),children:"Contact"})]}),!C&&l.jsxs("div",{className:"nav-section",children:[l.jsx("h3",{children:"Account"}),l.jsx(pe,{to:"/login",onClick:()=>s(!1),children:"Log In"}),l.jsx(pe,{to:"/signup",onClick:()=>s(!1),children:"Sign Up"})]})]})]})]})]})})}function WO(){const r=new Date().getFullYear();return l.jsx("footer",{className:"footer",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"footer-content",children:[l.jsxs("div",{className:"footer-logo",children:[l.jsx(pe,{to:"/",className:"logo-link",children:l.jsx("h2",{children:"Chocly"})}),l.jsx("p",{className:"tagline",children:"Discover better chocolate."})]}),l.jsxs("div",{className:"footer-links",children:[l.jsxs("div",{className:"footer-links-column",children:[l.jsx("h3",{children:"Explore"}),l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx(pe,{to:"/browse",children:"All Chocolates"})}),l.jsx("li",{children:l.jsxs(pe,{to:"/barcode",children:["Barcode Search ",l.jsx("span",{className:"footer-badge",children:"Under Construction"})]})}),l.jsx("li",{children:l.jsx(pe,{to:"/about",children:"About Us"})}),l.jsx("li",{children:l.jsx(pe,{to:"/contact",children:"Contact"})})]})]}),l.jsxs("div",{className:"footer-links-column",children:[l.jsx("h3",{children:"Account"}),l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx(pe,{to:"/signup",children:"Sign Up"})}),l.jsx("li",{children:l.jsx(pe,{to:"/login",children:"Log In"})}),l.jsx("li",{children:l.jsx(pe,{to:"/profile",children:"My Profile"})})]})]}),l.jsxs("div",{className:"footer-links-column",children:[l.jsx("h3",{children:"Company"}),l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx(pe,{to:"/privacy-policy",children:"Privacy Policy"})}),l.jsx("li",{children:l.jsx(pe,{to:"/terms-of-service",children:"Terms of Service"})})]})]})]})]}),l.jsxs("div",{className:"footer-bottom",children:[l.jsxs("p",{className:"copyright",children:["© ",r," Chocly. All rights reserved."]}),l.jsxs("div",{className:"social-icons",children:[l.jsx("a",{href:"#",className:"social-icon instagram","aria-label":"Instagram",children:l.jsx("span",{className:"sr-only",children:"Instagram"})}),l.jsx("a",{href:"#",className:"social-icon twitter","aria-label":"Twitter",children:l.jsx("span",{className:"sr-only",children:"Twitter"})}),l.jsx("a",{href:"#",className:"social-icon facebook","aria-label":"Facebook",children:l.jsx("span",{className:"sr-only",children:"Facebook"})})]})]})]})})}function XO(){const{pathname:r}=ur();return P.useEffect(()=>{window.scrollTo(0,0);const e=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{window.scrollTo(0,0)})})},t=document.querySelectorAll("img");if(t.length>0){let o=0;t.forEach(u=>{u.complete?o++:u.onload=()=>{o++,o===t.length&&e()}}),o===t.length&&e()}const s=()=>{document.querySelectorAll(".loading-container, .loading-spinner, .loading-animation").length===0?e():setTimeout(s,100)};setTimeout(s,50),setTimeout(()=>{window.scrollTo(0,0)},1e3)},[r]),null}function ZO(){const[r,e]=P.useState([]),[t,s]=P.useState(!0),[o,u]=P.useState({});P.useEffect(()=>{(async()=>{try{const g=await $g();g.sort((y,_)=>y.name.localeCompare(_.name)),e(g)}catch(g){console.error("Error fetching chocolates:",g)}finally{s(!1)}})()},[]);const d=async(m,g)=>{u(y=>({...y,[m]:"uploading"}));try{await oO(m,g),u(y=>({...y,[m]:"success"})),e(y=>y.map(_=>_.id===m?{..._,imageUrl:URL.createObjectURL(g)}:_))}catch(y){console.error("Error uploading image:",y),u(_=>({..._,[m]:"error"}))}};return l.jsx("div",{className:"batch-upload-page",children:l.jsxs("div",{className:"container",children:[l.jsx("h1",{children:"Batch Image Upload"}),l.jsx("p",{className:"page-description",children:"Upload label images for multiple chocolates"}),t?l.jsx("div",{className:"loading",children:"Loading chocolates..."}):l.jsx("div",{className:"chocolates-grid",children:r.map(m=>l.jsxs("div",{className:"chocolate-upload-card",children:[l.jsxs("div",{className:"chocolate-info",children:[l.jsx("h3",{children:m.name}),l.jsx("p",{children:m.maker})]}),l.jsx("div",{className:"chocolate-image-container",children:m.imageUrl?l.jsx("img",{src:m.imageUrl,alt:m.name,className:"chocolate-image"}):l.jsx("div",{className:"no-image-placeholder",children:"No label image"})}),l.jsxs("div",{className:"upload-controls",children:[l.jsxs("label",{className:`upload-button ${o[m.id]==="uploading"?"disabled":""}`,children:[m.imageUrl?"Change Image":"Upload Image",l.jsx("input",{type:"file",accept:"image/*",disabled:o[m.id]==="uploading",style:{display:"none"},onChange:g=>{g.target.files&&g.target.files[0]&&d(m.id,g.target.files[0])}})]}),o[m.id]==="uploading"&&l.jsx("span",{className:"status-text uploading",children:"Uploading..."}),o[m.id]==="success"&&l.jsx("span",{className:"status-text success",children:"✓ Uploaded"}),o[m.id]==="error"&&l.jsx("span",{className:"status-text error",children:"Error uploading"})]})]},m.id))})]})})}function JO(){const[r,e]=P.useState(!1),[t,s]=P.useState(""),[o,u]=P.useState({name:"",makerId:"",type:"",origin:"",cacaoPercentage:"",description:"",ingredients:""}),[d,m]=P.useState(null),[g,y]=P.useState(null),[_,b]=P.useState(!1),T=k=>{const{name:I,value:z}=k.target;u({...o,[I]:z})},j=k=>{m(k),y(URL.createObjectURL(k))},C=async k=>{k.preventDefault();try{b(!0),s("");const I={name:o.name,makerId:o.makerId,type:o.type,origin:o.origin,cacaoPercentage:parseFloat(o.cacaoPercentage)||0,description:o.description,ingredients:o.ingredients.split(",").map(z=>z.trim())};await aO(I,d),s("Chocolate added successfully!"),u({name:"",makerId:"",type:"",origin:"",cacaoPercentage:"",description:"",ingredients:""}),m(null),y(null)}catch(I){s(`Error adding chocolate: ${I.message}`),console.error("Error adding chocolate:",I)}finally{b(!1)}};return l.jsx("div",{className:"admin-page",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"admin-header",children:[l.jsx("h1",{children:"Chocolate Admin Dashboard"}),l.jsxs("div",{className:"admin-links",children:[l.jsx(pe,{to:"/admin/batch-upload",className:"admin-link",children:"Batch Image Upload"}),l.jsx(pe,{to:"/",className:"back-link",children:"Back to Home"})]})]}),l.jsxs("div",{className:"admin-section",children:[l.jsx("h2",{children:"Admin Tools"}),l.jsxs("div",{className:"admin-actions",children:[l.jsx("p",{className:"info-text",children:"Use the form below to manually add new chocolates to the database. For bulk operations, use the Batch Image Upload tool."}),t&&l.jsx("div",{className:"message",children:t})]})]}),l.jsxs("div",{className:"admin-section",children:[l.jsx("h2",{children:"Add New Chocolate"}),l.jsxs("form",{onSubmit:C,className:"admin-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"name",children:"Chocolate Name"}),l.jsx("input",{type:"text",id:"name",name:"name",value:o.name,onChange:T,required:!0,placeholder:"e.g., Madagascar Dark 70%"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"makerId",children:"Maker"}),l.jsx("input",{type:"text",id:"makerId",name:"makerId",value:o.makerId,onChange:T,required:!0,placeholder:"e.g., Valrhona, Lindt, etc."})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"type",children:"Type"}),l.jsxs("select",{id:"type",name:"type",value:o.type,onChange:T,required:!0,children:[l.jsx("option",{value:"",children:"Select a type"}),l.jsx("option",{value:"Dark",children:"Dark"}),l.jsx("option",{value:"Milk",children:"Milk"}),l.jsx("option",{value:"White",children:"White"}),l.jsx("option",{value:"Ruby",children:"Ruby"}),l.jsx("option",{value:"Dark Milk",children:"Dark Milk"}),l.jsx("option",{value:"Single Origin",children:"Single Origin"}),l.jsx("option",{value:"Flavored",children:"Flavored"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"origin",children:"Origin"}),l.jsx("input",{type:"text",id:"origin",name:"origin",value:o.origin,onChange:T,placeholder:"e.g., Madagascar, Ecuador, Venezuela"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"cacaoPercentage",children:"Cacao Percentage"}),l.jsx("input",{type:"number",id:"cacaoPercentage",name:"cacaoPercentage",value:o.cacaoPercentage,onChange:T,min:"0",max:"100",placeholder:"e.g. 70"})]}),l.jsxs("div",{className:"form-group full-width",children:[l.jsx("label",{children:"Chocolate Label Image"}),l.jsx(xx,{onImageSelected:j,currentImageUrl:g}),l.jsx("p",{className:"field-helper",children:"Upload a clear image of the chocolate label or packaging"})]}),l.jsxs("div",{className:"form-group full-width",children:[l.jsx("label",{htmlFor:"description",children:"Description"}),l.jsx("textarea",{id:"description",name:"description",value:o.description,onChange:T,rows:"4",required:!0,placeholder:"Describe the chocolate's taste, texture, and characteristics..."})]}),l.jsxs("div",{className:"form-group full-width",children:[l.jsx("label",{htmlFor:"ingredients",children:"Ingredients"}),l.jsx("textarea",{id:"ingredients",name:"ingredients",value:o.ingredients,onChange:T,rows:"2",placeholder:"Comma-separated list: cocoa beans, sugar, cocoa butter, vanilla, etc."}),l.jsx("p",{className:"field-helper",children:"Separate each ingredient with a comma"})]}),l.jsx("button",{type:"submit",className:"admin-button",disabled:_,children:_?"Adding Chocolate...":"Add Chocolate"})]})]}),l.jsxs("div",{className:"admin-section",children:[l.jsx("h2",{children:"Database Statistics"}),l.jsxs("div",{className:"stats-info",children:[l.jsx("p",{children:"Use your Firebase console to view detailed database statistics and manage your chocolate collection."}),l.jsx("p",{children:"For bulk image uploads, use the Batch Image Upload tool above."})]})]})]})})}const eP="/assets/About%20Us%20Image-DSbnjCR8.jpg";function tP(){return l.jsx("div",{className:"about-page",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"about-header",children:[l.jsx("h1",{children:"About Chocly"}),l.jsx("p",{className:"tagline",children:"For the love of all things chocolate"})]}),l.jsxs("section",{className:"about-story",children:[l.jsxs("div",{className:"story-content",children:[l.jsx("h2",{children:"Our Story"}),l.jsx("p",{children:"Chocly was born from a personal journey of discovery and delight. Inspired by the cravings and curiosities of a chocolate-loving wife during pregnancy, our founder embarked on a quest to catalogue favorite bars, explore new and exciting flavors, and research the next must-try indulgence. What began as a loving endeavor has blossomed into Chocly, a platform for all chocolate enthusiasts to share their experiences, learn from others, and navigate the delicious world of premium chocolate together."})]}),l.jsx("div",{className:"story-image",children:l.jsx("img",{src:eP,alt:"Chocly founder and the inspiration behind our chocolate journey",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"12px"}})})]}),l.jsxs("section",{className:"mission-section",children:[l.jsx("div",{className:"mission-overlay"}),l.jsxs("div",{className:"mission-content",children:[l.jsx("h2",{children:"Our Mission"}),l.jsx("p",{className:"mission-statement",children:"To help everyone discover and enjoy better chocolate."}),l.jsx("p",{className:"mission-description",children:"We believe that chocolate is more than just a treat—it's an experience, an art form, and a connection to cultures and traditions around the world. Our aim is to make premium chocolate accessible to everyone, creating a community where chocolate lovers can share their discoveries and expand their palates."})]})]}),l.jsxs("section",{className:"values-section",children:[l.jsx("h2",{children:"What Drives Us"}),l.jsxs("div",{className:"values-grid",children:[l.jsxs("div",{className:"value-card",children:[l.jsx("div",{className:"value-icon quality"}),l.jsx("h3",{children:"Quality"}),l.jsx("p",{children:"We champion chocolate crafted with care, highlighting makers who prioritize quality ingredients and ethical practices."})]}),l.jsxs("div",{className:"value-card",children:[l.jsx("div",{className:"value-icon community"}),l.jsx("h3",{children:"Community"}),l.jsx("p",{children:"We believe in the power of shared experiences and diverse perspectives to enrich our chocolate journeys."})]}),l.jsxs("div",{className:"value-card",children:[l.jsx("div",{className:"value-icon discovery"}),l.jsx("h3",{children:"Discovery"}),l.jsx("p",{children:"We're committed to helping people break out of their chocolate comfort zones and discover new favorites."})]}),l.jsxs("div",{className:"value-card",children:[l.jsx("div",{className:"value-icon education"}),l.jsx("h3",{children:"Education"}),l.jsx("p",{children:"We seek to deepen understanding of chocolate—from bean to bar—empowering informed choices."})]})]})]}),l.jsxs("section",{className:"team-section",children:[l.jsx("h2",{children:"Meet Our Team"}),l.jsx("p",{className:"team-intro",children:"We're a group of passionate chocolate enthusiasts dedicated to building the best platform for chocolate lovers everywhere."}),l.jsx("div",{className:"team-grid",children:l.jsx("div",{className:"team-placeholder",children:l.jsx("p",{children:"Team photos coming soon!"})})})]}),l.jsxs("section",{className:"join-section",children:[l.jsx("h2",{children:"Join Our Chocolate Revolution"}),l.jsx("p",{children:"Whether you're a casual chocolate enjoyer or a dedicated connoisseur, Chocly is the place for you. Sign up today to start tracking your chocolate journey, sharing your discoveries, and connecting with fellow enthusiasts."}),l.jsxs("div",{className:"cta-buttons",children:[l.jsx("a",{href:"/signup",className:"cta-button primary",children:"Join Chocly"}),l.jsx("a",{href:"/browse",className:"cta-button secondary",children:"Explore Chocolates"})]})]})]})})}function nP(){const[r,e]=P.useState({name:"",email:"",subject:"",message:""}),[t,s]=P.useState(!1),[o,u]=P.useState(!1),d=g=>{const{name:y,value:_}=g.target;e(b=>({...b,[y]:_}))},m=g=>{g.preventDefault(),u(!0);const y=encodeURIComponent(`Chocly Contact: ${r.subject}`),_=encodeURIComponent(`Name: ${r.name}
Email: ${r.email}
Subject: ${r.subject}

Message:
${r.message}`),b=`mailto:paulemickan@gmail.com?subject=${y}&body=${_}`;window.location.href=b,s(!0),u(!1),e({name:"",email:"",subject:"",message:""}),setTimeout(()=>{s(!1)},5e3)};return l.jsx("div",{className:"contact-page",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"contact-header",children:[l.jsx("h1",{children:"Get in Touch"}),l.jsx("p",{className:"tagline",children:"We'd love to hear from you!"})]}),l.jsxs("div",{className:"contact-content",children:[l.jsxs("div",{className:"contact-info",children:[l.jsxs("div",{className:"contact-section",children:[l.jsx("h2",{children:"Let's Connect"}),l.jsx("p",{children:"Have questions about chocolate? Want to suggest a new feature? Or maybe you just want to say hello? We're here for all your chocolate-related inquiries."})]}),l.jsxs("div",{className:"contact-section",children:[l.jsx("h3",{children:"Follow Us"}),l.jsxs("div",{className:"social-links",children:[l.jsxs("a",{href:"#",className:"social-link",children:[l.jsx("span",{className:"social-icon instagram"}),l.jsx("span",{children:"@chocly"})]}),l.jsxs("a",{href:"#",className:"social-link",children:[l.jsx("span",{className:"social-icon facebook"}),l.jsx("span",{children:"Chocly"})]})]})]}),l.jsxs("div",{className:"contact-section",children:[l.jsx("h3",{children:"Quick Response"}),l.jsx("p",{className:"email-note",children:"We aim to respond to all inquiries within 48 hours."})]}),l.jsx("div",{className:"contact-image",children:l.jsx("div",{className:"image-placeholder",children:l.jsx("span",{children:"Chocly Team"})})})]}),l.jsxs("div",{className:"contact-form-container",children:[l.jsx("h2",{children:"Send Us a Message"}),t&&l.jsx("div",{className:"success-message",children:l.jsx("p",{children:"Thank you for your message! Your email client should have opened with a pre-filled message. We'll be in touch soon."})}),l.jsxs("form",{className:"contact-form",onSubmit:m,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"name",children:"Your Name"}),l.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:d,required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email Address"}),l.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:d,required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"subject",children:"Subject"}),l.jsx("input",{type:"text",id:"subject",name:"subject",value:r.subject,onChange:d,required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"message",children:"Your Message"}),l.jsx("textarea",{id:"message",name:"message",value:r.message,onChange:d,rows:"5",required:!0})]}),l.jsx("button",{type:"submit",className:"submit-button",disabled:o,children:o?"Sending...":"Send Message"})]})]})]}),l.jsxs("div",{className:"faq-section",children:[l.jsx("h2",{children:"Frequently Asked Questions"}),l.jsxs("div",{className:"faq-grid",children:[l.jsxs("div",{className:"faq-item",children:[l.jsx("h3",{children:"How do I create an account?"}),l.jsx("p",{children:'Click the "Sign Up" button in the top right corner of the page and follow the instructions to create your Chocly account.'})]}),l.jsxs("div",{className:"faq-item",children:[l.jsx("h3",{children:"Can I add a chocolate that's not in the database?"}),l.jsx("p",{children:'Absolutely! You can suggest new chocolates to add to our database. Look for the "Add Chocolate" option in your profile menu.'})]}),l.jsxs("div",{className:"faq-item",children:[l.jsx("h3",{children:"How do I leave a review?"}),l.jsx("p",{children:"Navigate to any chocolate's detail page and scroll down to the review section. You can rate the chocolate and share your thoughts there."})]}),l.jsxs("div",{className:"faq-item",children:[l.jsx("h3",{children:"Is Chocly available as a mobile app?"}),l.jsx("p",{children:"We're currently working on mobile apps for iOS and Android. Stay tuned for updates!"})]})]})]})]})})}function rP(){const e=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return l.jsx("div",{className:"legal-page privacy-policy",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"legal-header",children:[l.jsx("h1",{children:"Privacy Policy"}),l.jsxs("p",{className:"last-updated",children:["Last Updated: ",e]})]}),l.jsxs("div",{className:"legal-content",children:[l.jsx("section",{className:"legal-section",children:l.jsx("p",{className:"intro-text",children:"At Chocly, we take your privacy seriously. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website and use our services. Please read this privacy policy carefully. If you do not agree with the terms of this privacy policy, please do not access the site."})}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"Information We Collect"}),l.jsx("h3",{children:"Personal Data"}),l.jsx("p",{children:"We may collect personal information that you voluntarily provide to us when you register on our platform, express interest in obtaining information about us or our products and services, participate in activities on the platform, or otherwise contact us. The personal information we collect may include:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Name and contact information (email address, phone number)"}),l.jsx("li",{children:"Account credentials (username, password)"}),l.jsx("li",{children:"Profile information (profile picture, biography)"}),l.jsx("li",{children:"User-generated content (reviews, ratings, comments, uploads)"}),l.jsx("li",{children:"Preferences and interests related to chocolate"})]}),l.jsx("h3",{children:"Automatically Collected Information"}),l.jsx("p",{children:"When you visit our platform, we may automatically collect certain information about your device and your interaction with our platform. This information might include:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Device information (IP address, browser type, operating system)"}),l.jsx("li",{children:"Usage data (pages visited, time spent on pages, links clicked)"}),l.jsx("li",{children:"Location data (country, city)"}),l.jsx("li",{children:"Cookies and similar tracking technologies"})]})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"How We Use Your Information"}),l.jsx("p",{children:"We may use the information we collect for various purposes, including to:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Create and manage your user account"}),l.jsx("li",{children:"Provide and maintain our services"}),l.jsx("li",{children:"Personalize your experience on our platform"}),l.jsx("li",{children:"Process transactions and send related information"}),l.jsx("li",{children:"Respond to your inquiries and provide customer support"}),l.jsx("li",{children:"Send you administrative information, updates, and marketing communications"}),l.jsx("li",{children:"Improve our platform, products, and services"}),l.jsx("li",{children:"Protect against fraudulent, unauthorized, or illegal activity"}),l.jsx("li",{children:"Comply with legal obligations"})]})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"Sharing Your Information"}),l.jsx("p",{children:"We may share your information in the following situations:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"With Service Providers:"})," We may share your information with third-party vendors, service providers, contractors, or agents who perform services for us."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"For Business Transfers:"})," We may share or transfer your information in connection with, or during negotiations of, any merger, sale of company assets, financing, or acquisition of all or a portion of our business."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"With Your Consent:"})," We may disclose your information for any other purpose with your consent."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"With Other Users:"})," When you share personal information or interact in public areas of the platform, such information may be viewed by all users and may be publicly distributed."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"For Legal Compliance:"})," We may disclose your information where required to do so by law or in response to valid requests by public authorities."]})]})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"User-Generated Content"}),l.jsx("p",{children:"Our platform allows you to upload, post, and share content, including reviews, ratings, comments, and images. Any information you post or share through these activities will be available to other users of the platform and the public. You should be aware that any information you provide in these areas may be read, collected, and used by others who access them."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"Storage and Security"}),l.jsx("p",{children:"We use commercially reasonable measures to protect your personal information from unauthorized access, use, or disclosure. However, please be aware that no method of electronic transmission or storage is 100% secure, and we cannot guarantee absolute security of your data."}),l.jsx("p",{children:"We will retain your personal information only for as long as is necessary for the purposes set out in this privacy policy, unless a longer retention period is required or permitted by law."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"Your Privacy Rights"}),l.jsx("p",{children:"Depending on your location, you may have certain rights regarding your personal information, including:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"The right to access the personal information we have about you"}),l.jsx("li",{children:"The right to request correction of inaccurate personal information"}),l.jsx("li",{children:"The right to request deletion of your personal information"}),l.jsx("li",{children:"The right to object to processing of your personal information"}),l.jsx("li",{children:"The right to data portability"}),l.jsx("li",{children:"The right to withdraw consent"})]}),l.jsx("p",{children:"To exercise these rights, please contact us using the contact information provided below. Please note that we may ask you to verify your identity before responding to such requests."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"Cookies and Similar Technologies"}),l.jsx("p",{children:"We use cookies and similar tracking technologies to collect and use information about you and your interaction with our platform. We use these technologies to collect information about your browsing activities over time and across different websites. You can instruct your browser to refuse all cookies or to indicate when a cookie is being sent. However, if you do not accept cookies, you may not be able to use some portions of our platform."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"Children's Privacy"}),l.jsx("p",{children:"Our platform is not intended for individuals under the age of 13. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and you are aware that your child has provided us with personal information, please contact us."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"Changes to This Privacy Policy"}),l.jsx("p",{children:'We may update our privacy policy from time to time. We will notify you of any changes by posting the new privacy policy on this page and updating the "Last Updated" date at the top of this policy. You are advised to review this privacy policy periodically for any changes.'})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"Contact Us"}),l.jsx("p",{children:"If you have questions or comments about this privacy policy, please contact us at:"}),l.jsxs("p",{className:"contact-info",children:["Email: privacy@chocly.co",l.jsx("br",{}),"Address: 123 Chocolate Lane, Sweet City, CA 94000"]})]})]})]})})}function iP(){const e=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return l.jsx("div",{className:"legal-page terms-of-service",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"legal-header",children:[l.jsx("h1",{children:"Terms of Service"}),l.jsxs("p",{className:"last-updated",children:["Last Updated: ",e]})]}),l.jsxs("div",{className:"legal-content",children:[l.jsx("section",{className:"legal-section",children:l.jsx("p",{className:"intro-text",children:'Welcome to Chocly! These Terms of Service ("Terms") govern your access to and use of the Chocly website and services. Please read these Terms carefully before using our services. By accessing or using our services, you agree to be bound by these Terms and our Privacy Policy.'})}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"1. Acceptance of Terms"}),l.jsx("p",{children:"By accessing or using Chocly, you agree to be bound by these Terms. If you do not agree to all the terms and conditions of this agreement, you may not access or use our services."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"2. Changes to Terms"}),l.jsx("p",{children:'We reserve the right to modify these Terms at any time. We will provide notice of significant changes by posting the updated Terms on this page with a new "Last Updated" date. Your continued use of Chocly after any changes to the Terms constitutes your acceptance of such changes.'})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"3. Account Registration and Security"}),l.jsx("p",{children:"To access certain features of Chocly, you may be required to register for an account. When registering, you agree to provide accurate, current, and complete information. You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account. You agree to notify us immediately of any unauthorized use of your account."}),l.jsx("p",{children:"We reserve the right to suspend or terminate your account at our discretion if we believe that you have violated these Terms or if your account shows signs of fraud, abuse, or suspicious activity."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"4. User Content"}),l.jsx("h3",{children:"4.1 Content Ownership"}),l.jsx("p",{children:'You retain all ownership rights to the content you post, upload, or share on Chocly ("User Content"). By submitting User Content, you grant Chocly a worldwide, non-exclusive, royalty-free, sublicensable, and transferable license to use, reproduce, distribute, prepare derivative works of, display, and perform the User Content in connection with the operation and promotion of Chocly.'}),l.jsx("h3",{children:"4.2 Content Restrictions"}),l.jsx("p",{children:"You agree not to post, upload, or share any User Content that:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Violates any law or regulation"}),l.jsx("li",{children:"Infringes upon the rights of any third party, including intellectual property rights"}),l.jsx("li",{children:"Is false, misleading, defamatory, or deceptive"}),l.jsx("li",{children:"Contains sexually explicit or pornographic material"}),l.jsx("li",{children:"Promotes discrimination, bigotry, racism, or hatred against any individual or group"}),l.jsx("li",{children:"Is threatening, abusive, or harassing toward any individual or group"}),l.jsx("li",{children:"Promotes illegal or harmful activities"}),l.jsx("li",{children:"Contains viruses, malware, or other harmful code"})]}),l.jsx("h3",{children:"4.3 Content Moderation"}),l.jsx("p",{children:"We reserve the right, but have no obligation, to monitor, edit, or remove any User Content that we determine, in our sole discretion, violates these Terms or is otherwise objectionable. We are not responsible for the accuracy, completeness, appropriateness, or legality of User Content."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"5. Intellectual Property Rights"}),l.jsx("p",{children:"The Chocly name, logo, and all related names, logos, product and service names, designs, and slogans are trademarks of Chocly or its affiliates or licensors. You may not use such marks without our prior written permission."}),l.jsx("p",{children:"All content, features, and functionality of Chocly that is not User Content, including but not limited to text, graphics, images, logos, button icons, software, and the compilation thereof, is the exclusive property of Chocly, its licensors, or its content suppliers and is protected by copyright, trademark, and other intellectual property laws."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"6. Prohibited Activities"}),l.jsx("p",{children:"You agree not to engage in any of the following prohibited activities:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Using Chocly for any illegal purpose or in violation of any local, state, national, or international law"}),l.jsx("li",{children:"Impersonating any person or entity, or falsely stating or otherwise misrepresenting your affiliation with a person or entity"}),l.jsx("li",{children:"Interfering with or disrupting the operation of Chocly or the servers or networks connected to Chocly"}),l.jsx("li",{children:"Attempting to gain unauthorized access to Chocly, user accounts, or computer systems or networks connected to Chocly"}),l.jsx("li",{children:"Collecting or storing personal data about other users without their permission"}),l.jsx("li",{children:"Using automated means, including spiders, robots, crawlers, or data mining tools, to download data from Chocly"}),l.jsx("li",{children:"Introducing any viruses, Trojan horses, worms, or other material that is malicious or technologically harmful"})]})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"7. Third-Party Links and Content"}),l.jsx("p",{children:"Chocly may contain links to third-party websites or services that are not owned or controlled by Chocly. We have no control over, and assume no responsibility for, the content, privacy policies, or practices of any third-party websites or services. You further acknowledge and agree that Chocly shall not be responsible or liable, directly or indirectly, for any damage or loss caused or alleged to be caused by or in connection with the use of or reliance on any such content, goods, or services available on or through any such websites or services."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"8. Disclaimer of Warranties"}),l.jsx("p",{children:'Chocly is provided on an "AS IS" and "AS AVAILABLE" basis, without warranties of any kind, either express or implied, including, but not limited to, implied warranties of merchantability, fitness for a particular purpose, non-infringement, or course of performance.'}),l.jsx("p",{children:"We do not warrant that (a) Chocly will function uninterrupted, secure, or available at any particular time or location; (b) any errors or defects will be corrected; (c) Chocly is free of viruses or other harmful components; or (d) the results of using Chocly will meet your requirements."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"9. Limitation of Liability"}),l.jsx("p",{children:"To the maximum extent permitted by applicable law, in no event shall Chocly, its directors, employees, partners, agents, suppliers, or affiliates be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from (a) your access to or use of or inability to access or use Chocly; (b) any conduct or content of any third party on Chocly; (c) any content obtained from Chocly; and (d) unauthorized access, use, or alteration of your transmissions or content, whether based on warranty, contract, tort (including negligence), or any other legal theory, whether or not we have been informed of the possibility of such damage."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"10. Indemnification"}),l.jsx("p",{children:"You agree to defend, indemnify, and hold harmless Chocly, its directors, employees, partners, agents, suppliers, and affiliates from and against any claims, liabilities, damages, judgments, awards, losses, costs, expenses, or fees (including reasonable attorneys' fees) arising out of or relating to your violation of these Terms or your use of Chocly, including, but not limited to, your User Content, any use of Chocly's content, services, and products other than as expressly authorized in these Terms, or your use of any information obtained from Chocly."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"11. Termination"}),l.jsx("p",{children:"We may terminate or suspend your account and bar access to Chocly immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach these Terms."}),l.jsx("p",{children:"If you wish to terminate your account, you may simply discontinue using Chocly or contact us to request account deletion. All provisions of the Terms which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity, and limitations of liability."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"12. Governing Law"}),l.jsx("p",{children:"These Terms shall be governed and construed in accordance with the laws of the State of California, United States, without regard to its conflict of law provisions. Our failure to enforce any right or provision of these Terms will not be considered a waiver of those rights."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"13. Dispute Resolution"}),l.jsx("p",{children:"Any disputes arising out of or relating to these Terms or your use of Chocly shall be resolved through binding arbitration in accordance with the rules of the American Arbitration Association, except that each party retains the right to seek injunctive or other equitable relief in a court of competent jurisdiction to prevent the actual or threatened infringement or misappropriation of intellectual property rights."})]}),l.jsxs("section",{className:"legal-section",children:[l.jsx("h2",{children:"14. Contact Information"}),l.jsx("p",{children:"If you have any questions about these Terms, please contact us at:"}),l.jsxs("p",{className:"contact-info",children:["Email: terms@chocly.com",l.jsx("br",{}),"Address: 123 Chocolate Lane, Sweet City, CA 94000"]})]})]})]})})}function sP(){return l.jsx(TS,{basename:"/",children:l.jsx(bO,{children:l.jsxs("div",{className:"app",children:[l.jsx(QO,{}),l.jsx("main",{className:"main-content",children:l.jsxs(XA,{children:[l.jsx(xt,{path:"/",element:l.jsx(kO,{})}),l.jsx(xt,{path:"/chocolate/:id",element:l.jsx(PO,{})}),l.jsx(xt,{path:"/search",element:l.jsx(MO,{})}),l.jsx(xt,{path:"/browse",element:l.jsx(VO,{})}),l.jsx(xt,{path:"/barcode",element:l.jsx(BO,{})}),l.jsx(xt,{path:"/profile",element:l.jsx(LO,{})}),l.jsx(xt,{path:"/auth",element:l.jsx(ep,{})}),l.jsx(xt,{path:"/login",element:l.jsx(ep,{})}),l.jsx(xt,{path:"/signup",element:l.jsx(ep,{})}),l.jsx(xt,{path:"/category",element:l.jsx(zO,{})}),l.jsx(xt,{path:"/category/:categoryType/:categoryValue",element:l.jsx(FO,{})}),l.jsx(xt,{path:"/maker",element:l.jsx(qO,{})}),l.jsx(xt,{path:"/add-chocolate",element:l.jsx(YO,{})}),l.jsx(xt,{path:"/batch-upload",element:l.jsx(ZO,{})}),l.jsx(xt,{path:"/admin",element:l.jsx(JO,{})}),l.jsx(xt,{path:"/about",element:l.jsx(tP,{})}),l.jsx(xt,{path:"/contact",element:l.jsx(nP,{})}),l.jsx(xt,{path:"/privacy",element:l.jsx(rP,{})}),l.jsx(xt,{path:"/terms",element:l.jsx(iP,{})}),l.jsx(xt,{path:"*",element:l.jsx("div",{children:"Page not found"})})]})}),l.jsx(WO,{}),l.jsx(XO,{})]})})})}aA.createRoot(document.getElementById("root")).render(l.jsx(P.StrictMode,{children:l.jsx(sP,{})}));
