(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();var jm={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0;function W1(){if(r0)return Ql;r0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Ql.Fragment=e,Ql.jsx=t,Ql.jsxs=t,Ql}var i0;function X1(){return i0||(i0=1,jm.exports=W1()),jm.exports}var u=X1(),Dm={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0;function Z1(){if(s0)return je;s0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),x=Symbol.iterator;function T(V){return V===null||typeof V!="object"?null:(V=x&&V[x]||V["@@iterator"],typeof V=="function"?V:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,j={};function k(V,ae,he){this.props=V,this.context=ae,this.refs=j,this.updater=he||D}k.prototype.isReactComponent={},k.prototype.setState=function(V,ae){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ae,"setState")},k.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function z(){}z.prototype=k.prototype;function X(V,ae,he){this.props=V,this.context=ae,this.refs=j,this.updater=he||D}var Q=X.prototype=new z;Q.constructor=X,C(Q,k.prototype),Q.isPureReactComponent=!0;var ne=Array.isArray,J={H:null,A:null,T:null,S:null,V:null},oe=Object.prototype.hasOwnProperty;function U(V,ae,he,le,ve,Ie){return he=Ie.ref,{$$typeof:r,type:V,key:ae,ref:he!==void 0?he:null,props:Ie}}function N(V,ae){return U(V.type,ae,void 0,void 0,void 0,V.props)}function A(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function S(V){var ae={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(he){return ae[he]})}var I=/\/+/g;function L(V,ae){return typeof V=="object"&&V!==null&&V.key!=null?S(""+V.key):ae.toString(36)}function O(){}function $e(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(O,O):(V.status="pending",V.then(function(ae){V.status==="pending"&&(V.status="fulfilled",V.value=ae)},function(ae){V.status==="pending"&&(V.status="rejected",V.reason=ae)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Ke(V,ae,he,le,ve){var Ie=typeof V;(Ie==="undefined"||Ie==="boolean")&&(V=null);var be=!1;if(V===null)be=!0;else switch(Ie){case"bigint":case"string":case"number":be=!0;break;case"object":switch(V.$$typeof){case r:case e:be=!0;break;case _:return be=V._init,Ke(be(V._payload),ae,he,le,ve)}}if(be)return ve=ve(V),be=le===""?"."+L(V,0):le,ne(ve)?(he="",be!=null&&(he=be.replace(I,"$&/")+"/"),Ke(ve,ae,he,"",function(fe){return fe})):ve!=null&&(A(ve)&&(ve=N(ve,he+(ve.key==null||V&&V.key===ve.key?"":(""+ve.key).replace(I,"$&/")+"/")+be)),ae.push(ve)),1;be=0;var Et=le===""?".":le+":";if(ne(V))for(var H=0;H<V.length;H++)le=V[H],Ie=Et+L(le,H),be+=Ke(le,ae,he,Ie,ve);else if(H=T(V),typeof H=="function")for(V=H.call(V),H=0;!(le=V.next()).done;)le=le.value,Ie=Et+L(le,H++),be+=Ke(le,ae,he,Ie,ve);else if(Ie==="object"){if(typeof V.then=="function")return Ke($e(V),ae,he,le,ve);throw ae=String(V),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return be}function Z(V,ae,he){if(V==null)return V;var le=[],ve=0;return Ke(V,le,"","",function(Ie){return ae.call(he,Ie,ve++)}),le}function ce(V){if(V._status===-1){var ae=V._result;ae=ae(),ae.then(function(he){(V._status===0||V._status===-1)&&(V._status=1,V._result=he)},function(he){(V._status===0||V._status===-1)&&(V._status=2,V._result=he)}),V._status===-1&&(V._status=0,V._result=ae)}if(V._status===1)return V._result.default;throw V._result}var de=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function Se(){}return je.Children={map:Z,forEach:function(V,ae,he){Z(V,function(){ae.apply(this,arguments)},he)},count:function(V){var ae=0;return Z(V,function(){ae++}),ae},toArray:function(V){return Z(V,function(ae){return ae})||[]},only:function(V){if(!A(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},je.Component=k,je.Fragment=t,je.Profiler=o,je.PureComponent=X,je.StrictMode=s,je.Suspense=g,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,je.__COMPILER_RUNTIME={__proto__:null,c:function(V){return J.H.useMemoCache(V)}},je.cache=function(V){return function(){return V.apply(null,arguments)}},je.cloneElement=function(V,ae,he){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var le=C({},V.props),ve=V.key,Ie=void 0;if(ae!=null)for(be in ae.ref!==void 0&&(Ie=void 0),ae.key!==void 0&&(ve=""+ae.key),ae)!oe.call(ae,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ae.ref===void 0||(le[be]=ae[be]);var be=arguments.length-2;if(be===1)le.children=he;else if(1<be){for(var Et=Array(be),H=0;H<be;H++)Et[H]=arguments[H+2];le.children=Et}return U(V.type,ve,void 0,void 0,Ie,le)},je.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:c,_context:V},V},je.createElement=function(V,ae,he){var le,ve={},Ie=null;if(ae!=null)for(le in ae.key!==void 0&&(Ie=""+ae.key),ae)oe.call(ae,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ve[le]=ae[le]);var be=arguments.length-2;if(be===1)ve.children=he;else if(1<be){for(var Et=Array(be),H=0;H<be;H++)Et[H]=arguments[H+2];ve.children=Et}if(V&&V.defaultProps)for(le in be=V.defaultProps,be)ve[le]===void 0&&(ve[le]=be[le]);return U(V,Ie,void 0,void 0,null,ve)},je.createRef=function(){return{current:null}},je.forwardRef=function(V){return{$$typeof:m,render:V}},je.isValidElement=A,je.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:ce}},je.memo=function(V,ae){return{$$typeof:y,type:V,compare:ae===void 0?null:ae}},je.startTransition=function(V){var ae=J.T,he={};J.T=he;try{var le=V(),ve=J.S;ve!==null&&ve(he,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Se,de)}catch(Ie){de(Ie)}finally{J.T=ae}},je.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},je.use=function(V){return J.H.use(V)},je.useActionState=function(V,ae,he){return J.H.useActionState(V,ae,he)},je.useCallback=function(V,ae){return J.H.useCallback(V,ae)},je.useContext=function(V){return J.H.useContext(V)},je.useDebugValue=function(){},je.useDeferredValue=function(V,ae){return J.H.useDeferredValue(V,ae)},je.useEffect=function(V,ae,he){var le=J.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(V,ae)},je.useId=function(){return J.H.useId()},je.useImperativeHandle=function(V,ae,he){return J.H.useImperativeHandle(V,ae,he)},je.useInsertionEffect=function(V,ae){return J.H.useInsertionEffect(V,ae)},je.useLayoutEffect=function(V,ae){return J.H.useLayoutEffect(V,ae)},je.useMemo=function(V,ae){return J.H.useMemo(V,ae)},je.useOptimistic=function(V,ae){return J.H.useOptimistic(V,ae)},je.useReducer=function(V,ae,he){return J.H.useReducer(V,ae,he)},je.useRef=function(V){return J.H.useRef(V)},je.useState=function(V){return J.H.useState(V)},je.useSyncExternalStore=function(V,ae,he){return J.H.useSyncExternalStore(V,ae,he)},je.useTransition=function(){return J.H.useTransition()},je.version="19.1.0",je}var a0;function jp(){return a0||(a0=1,Dm.exports=Z1()),Dm.exports}var P=jp(),km={exports:{}},Wl={},Om={exports:{}},Pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function J1(){return o0||(o0=1,function(r){function e(Z,ce){var de=Z.length;Z.push(ce);e:for(;0<de;){var Se=de-1>>>1,V=Z[Se];if(0<o(V,ce))Z[Se]=ce,Z[de]=V,de=Se;else break e}}function t(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var ce=Z[0],de=Z.pop();if(de!==ce){Z[0]=de;e:for(var Se=0,V=Z.length,ae=V>>>1;Se<ae;){var he=2*(Se+1)-1,le=Z[he],ve=he+1,Ie=Z[ve];if(0>o(le,de))ve<V&&0>o(Ie,le)?(Z[Se]=Ie,Z[ve]=de,Se=ve):(Z[Se]=le,Z[he]=de,Se=he);else if(ve<V&&0>o(Ie,de))Z[Se]=Ie,Z[ve]=de,Se=ve;else break e}}return ce}function o(Z,ce){var de=Z.sortIndex-ce.sortIndex;return de!==0?de:Z.id-ce.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var g=[],y=[],_=1,x=null,T=3,D=!1,C=!1,j=!1,k=!1,z=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ne(Z){for(var ce=t(y);ce!==null;){if(ce.callback===null)s(y);else if(ce.startTime<=Z)s(y),ce.sortIndex=ce.expirationTime,e(g,ce);else break;ce=t(y)}}function J(Z){if(j=!1,ne(Z),!C)if(t(g)!==null)C=!0,oe||(oe=!0,L());else{var ce=t(y);ce!==null&&Ke(J,ce.startTime-Z)}}var oe=!1,U=-1,N=5,A=-1;function S(){return k?!0:!(r.unstable_now()-A<N)}function I(){if(k=!1,oe){var Z=r.unstable_now();A=Z;var ce=!0;try{e:{C=!1,j&&(j=!1,X(U),U=-1),D=!0;var de=T;try{t:{for(ne(Z),x=t(g);x!==null&&!(x.expirationTime>Z&&S());){var Se=x.callback;if(typeof Se=="function"){x.callback=null,T=x.priorityLevel;var V=Se(x.expirationTime<=Z);if(Z=r.unstable_now(),typeof V=="function"){x.callback=V,ne(Z),ce=!0;break t}x===t(g)&&s(g),ne(Z)}else s(g);x=t(g)}if(x!==null)ce=!0;else{var ae=t(y);ae!==null&&Ke(J,ae.startTime-Z),ce=!1}}break e}finally{x=null,T=de,D=!1}ce=void 0}}finally{ce?L():oe=!1}}}var L;if(typeof Q=="function")L=function(){Q(I)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,$e=O.port2;O.port1.onmessage=I,L=function(){$e.postMessage(null)}}else L=function(){z(I,0)};function Ke(Z,ce){U=z(function(){Z(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(Z){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var de=T;T=ce;try{return Z()}finally{T=de}},r.unstable_requestPaint=function(){k=!0},r.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var de=T;T=Z;try{return ce()}finally{T=de}},r.unstable_scheduleCallback=function(Z,ce,de){var Se=r.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Se+de:Se):de=Se,Z){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=de+V,Z={id:_++,callback:ce,priorityLevel:Z,startTime:de,expirationTime:V,sortIndex:-1},de>Se?(Z.sortIndex=de,e(y,Z),t(g)===null&&Z===t(y)&&(j?(X(U),U=-1):j=!0,Ke(J,de-Se))):(Z.sortIndex=V,e(g,Z),C||D||(C=!0,oe||(oe=!0,L()))),Z},r.unstable_shouldYield=S,r.unstable_wrapCallback=function(Z){var ce=T;return function(){var de=T;T=ce;try{return Z.apply(this,arguments)}finally{T=de}}}}(Pm)),Pm}var l0;function eA(){return l0||(l0=1,Om.exports=J1()),Om.exports}var Mm={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0;function tA(){if(c0)return rn;c0=1;var r=jp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,_){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:g,containerInfo:y,implementation:_}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,rn.createPortal=function(g,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,_)},rn.flushSync=function(g){var y=d.T,_=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=_,s.d.f()}},rn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},rn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},rn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var _=y.as,x=m(_,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,D=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:T,fetchPriority:D}):_==="script"&&s.d.X(g,{crossOrigin:x,integrity:T,fetchPriority:D,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},rn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=m(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},rn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,x=m(_,y.crossOrigin);s.d.L(g,_,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},rn.preloadModule=function(g,y){if(typeof g=="string")if(y){var _=m(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},rn.requestFormReset=function(g){s.d.r(g)},rn.unstable_batchedUpdates=function(g,y){return g(y)},rn.useFormState=function(g,y,_){return d.H.useFormState(g,y,_)},rn.useFormStatus=function(){return d.H.useHostTransitionStatus()},rn.version="19.1.0",rn}var u0;function nA(){if(u0)return Mm.exports;u0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Mm.exports=tA(),Mm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function rA(){if(h0)return Wl;h0=1;var r=eA(),e=jp(),t=nA();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(s(188))}function g(n){var i=n.alternate;if(!i){if(i=c(n),i===null)throw Error(s(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return m(f),n;if(p===l)return m(f),i;p=p.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=p;else{for(var w=!1,b=f.child;b;){if(b===a){w=!0,a=f,l=p;break}if(b===l){w=!0,l=f,a=p;break}b=b.sibling}if(!w){for(b=p.child;b;){if(b===a){w=!0,a=p,l=f;break}if(b===l){w=!0,l=p,a=f;break}b=b.sibling}if(!w)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:i}function y(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=y(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,x=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),X=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),S=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=I&&n[I]||n["@@iterator"],typeof n=="function"?n:null)}var O=Symbol.for("react.client.reference");function $e(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===O?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case k:return"Profiler";case j:return"StrictMode";case J:return"Suspense";case oe:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case D:return"Portal";case Q:return(n.displayName||"Context")+".Provider";case X:return(n._context.displayName||"Context")+".Consumer";case ne:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case U:return i=n.displayName||null,i!==null?i:$e(n.type)||"Memo";case N:i=n._payload,n=n._init;try{return $e(n(i))}catch{}}return null}var Ke=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Se=[],V=-1;function ae(n){return{current:n}}function he(n){0>V||(n.current=Se[V],Se[V]=null,V--)}function le(n,i){V++,Se[V]=n.current,n.current=i}var ve=ae(null),Ie=ae(null),be=ae(null),Et=ae(null);function H(n,i){switch(le(be,i),le(Ie,n),le(ve,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?j_(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=j_(i),n=D_(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}he(ve),le(ve,n)}function fe(){he(ve),he(Ie),he(be)}function He(n){n.memoizedState!==null&&le(Et,n);var i=ve.current,a=D_(i,n.type);i!==a&&(le(Ie,n),le(ve,a))}function Vt(n){Ie.current===n&&(he(ve),he(Ie)),Et.current===n&&(he(Et),Hl._currentValue=de)}var ct=Object.prototype.hasOwnProperty,en=r.unstable_scheduleCallback,_s=r.unstable_cancelCallback,zo=r.unstable_shouldYield,Lc=r.unstable_requestPaint,Pn=r.unstable_now,Id=r.unstable_getCurrentPriorityLevel,Fo=r.unstable_ImmediatePriority,_a=r.unstable_UserBlockingPriority,Es=r.unstable_NormalPriority,jd=r.unstable_LowPriority,Ea=r.unstable_IdlePriority,qo=r.log,Vc=r.unstable_setDisableYieldValue,mt=null,Xe=null;function bn(n){if(typeof qo=="function"&&Vc(n),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(mt,n)}catch{}}var tn=Math.clz32?Math.clz32:ws,Bc=Math.log,Dd=Math.LN2;function ws(n){return n>>>=0,n===0?32:31-(Bc(n)/Dd|0)|0}var Ts=256,bs=4194304;function Wn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function wa(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,p=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var b=l&134217727;return b!==0?(l=b&~p,l!==0?f=Wn(l):(w&=b,w!==0?f=Wn(w):a||(a=b&~n,a!==0&&(f=Wn(a))))):(b=l&~p,b!==0?f=Wn(b):w!==0?f=Wn(w):a||(a=l&~n,a!==0&&(f=Wn(a)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,a=i&-i,p>=a||p===32&&(a&4194048)!==0)?i:f}function xs(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Ho(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Go(){var n=Ts;return Ts<<=1,(Ts&4194048)===0&&(Ts=256),n}function $o(){var n=bs;return bs<<=1,(bs&62914560)===0&&(bs=4194304),n}function Ur(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Lr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Yo(n,i,a,l,f,p){var w=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var b=n.entanglements,M=n.expirationTimes,$=n.hiddenUpdates;for(a=w&~a;0<a;){var ee=31-tn(a),ie=1<<ee;b[ee]=0,M[ee]=-1;var Y=$[ee];if(Y!==null)for($[ee]=null,ee=0;ee<Y.length;ee++){var K=Y[ee];K!==null&&(K.lane&=-536870913)}a&=~ie}l!==0&&lr(n,l,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(w&~i))}function lr(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-tn(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function Ko(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-tn(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function Ti(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ta(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function bi(){var n=ce.p;return n!==0?n:(n=window.event,n===void 0?32:X_(n.type))}function zc(n,i){var a=ce.p;try{return ce.p=n,i()}finally{ce.p=a}}var ot=Math.random().toString(36).slice(2),Dt="__reactFiber$"+ot,St="__reactProps$"+ot,Mn="__reactContainer$"+ot,Qo="__reactEvents$"+ot,kd="__reactListeners$"+ot,xi="__reactHandles$"+ot,Fc="__reactResources$"+ot,As="__reactMarker$"+ot;function Ai(n){delete n[Dt],delete n[St],delete n[Qo],delete n[kd],delete n[xi]}function Vr(n){var i=n[Dt];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Mn]||a[Dt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=M_(n);n!==null;){if(a=n[Dt])return a;n=M_(n)}return i}n=a,a=n.parentNode}return null}function cr(n){if(n=n[Dt]||n[Mn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function ur(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function un(n){var i=n[Fc];return i||(i=n[Fc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function wt(n){n[As]=!0}var Wo=new Set,ba={};function Xn(n,i){Br(n,i),Br(n+"Capture",i)}function Br(n,i){for(ba[n]=i,n=0;n<i.length;n++)Wo.add(i[n])}var qc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hc={},Ss={};function Gc(n){return ct.call(Ss,n)?!0:ct.call(Hc,n)?!1:qc.test(n)?Ss[n]=!0:(Hc[n]=!0,!1)}function Si(n,i,a){if(Gc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function hr(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function $t(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}var Rs,$c;function zr(n){if(Rs===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Rs=i&&i[1]||"",$c=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rs+n+$c}var xa=!1;function Aa(n,i){if(!n||xa)return"";xa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(K){var Y=K}Reflect.construct(n,[],ie)}else{try{ie.call()}catch(K){Y=K}n.call(ie.prototype)}}else{try{throw Error()}catch(K){Y=K}(ie=n())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),w=p[0],b=p[1];if(w&&b){var M=w.split(`
`),$=b.split(`
`);for(f=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;if(l===M.length||f===$.length)for(l=M.length-1,f=$.length-1;1<=l&&0<=f&&M[l]!==$[f];)f--;for(;1<=l&&0<=f;l--,f--)if(M[l]!==$[f]){if(l!==1||f!==1)do if(l--,f--,0>f||M[l]!==$[f]){var ee=`
`+M[l].replace(" at new "," at ");return n.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",n.displayName)),ee}while(1<=l&&0<=f);break}}}finally{xa=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?zr(a):""}function Xo(n){switch(n.tag){case 26:case 27:case 5:return zr(n.type);case 16:return zr("Lazy");case 13:return zr("Suspense");case 19:return zr("SuspenseList");case 0:case 15:return Aa(n.type,!1);case 11:return Aa(n.type.render,!1);case 1:return Aa(n.type,!0);case 31:return zr("Activity");default:return""}}function Sa(n){try{var i="";do i+=Xo(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function hn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Zo(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Od(n){var i=Zo(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),l=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(w){l=""+w,p.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ra(n){n._valueTracker||(n._valueTracker=Od(n))}function Jo(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Zo(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Cs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Pd=/[\n"\\]/g;function Rt(n){return n.replace(Pd,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function xn(n,i,a,l,f,p,w,b){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),i!=null?w==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+hn(i)):n.value!==""+hn(i)&&(n.value=""+hn(i)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),i!=null?Ri(n,w,hn(i)):a!=null?Ri(n,w,hn(a)):l!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+hn(b):n.removeAttribute("name")}function Ns(n,i,a,l,f,p,w,b){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||i!=null))return;a=a!=null?""+hn(a):"",i=i!=null?""+hn(i):a,b||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=b?n.checked:!!l,n.defaultChecked=!!l,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w)}function Ri(n,i,a){i==="number"&&Cs(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Fr(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+hn(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function et(n,i,a){if(i!=null&&(i=""+hn(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+hn(a):""}function Is(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(Ke(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=hn(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Un(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var js=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yc(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||js.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function el(n,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Yc(n,f,l)}else for(var p in i)i.hasOwnProperty(p)&&Yc(n,p,i[p])}function tl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Md=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ud=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ca(n){return Ud.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var qr=null;function Ln(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Hr=null,Gr=null;function nl(n){var i=cr(n);if(i&&(n=i.stateNode)){var a=n[St]||null;e:switch(n=i.stateNode,i.type){case"input":if(xn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[St]||null;if(!f)throw Error(s(90));xn(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Jo(l)}break e;case"textarea":et(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Fr(n,!!a.multiple,i,!1)}}}var dr=!1;function Kc(n,i,a){if(dr)return n(i,a);dr=!0;try{var l=n(i);return l}finally{if(dr=!1,(Hr!==null||Gr!==null)&&(zu(),Hr&&(i=Hr,n=Gr,Gr=Hr=null,nl(i),n)))for(i=0;i<n.length;i++)nl(n[i])}}function Ds(n,i){var a=n.stateNode;if(a===null)return null;var l=a[St]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vn=!1;if(Zn)try{var ks={};Object.defineProperty(ks,"passive",{get:function(){Vn=!0}}),window.addEventListener("test",ks,ks),window.removeEventListener("test",ks,ks)}catch{Vn=!1}var fr=null,Ci=null,$r=null;function rl(){if($r)return $r;var n,i=Ci,a=i.length,l,f="value"in fr?fr.value:fr.textContent,p=f.length;for(n=0;n<a&&i[n]===f[n];n++);var w=a-n;for(l=1;l<=w&&i[a-l]===f[p-l];l++);return $r=f.slice(n,1<l?1-l:void 0)}function mr(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function pr(){return!0}function il(){return!1}function Bt(n){function i(a,l,f,p,w){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(a=n[b],this[b]=a?a(p):p[b]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?pr:il,this.isPropagationStopped=il,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),i}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Na=Bt(Qe),Os=_({},Qe,{view:0,detail:0}),Qc=Bt(Os),Ia,ja,gr,Ps=_({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==gr&&(gr&&n.type==="mousemove"?(Ia=n.screenX-gr.screenX,ja=n.screenY-gr.screenY):ja=Ia=0,gr=n),Ia)},movementY:function(n){return"movementY"in n?n.movementY:ja}}),Bn=Bt(Ps),Wc=_({},Ps,{dataTransfer:0}),Ld=Bt(Wc),Ms=_({},Os,{relatedTarget:0}),Da=Bt(Ms),sl=_({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),ka=Bt(sl),Xc=_({},Qe,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Oa=Bt(Xc),Vd=_({},Qe,{data:0}),al=Bt(Vd),Us={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ol(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Jc[n])?!!i[n]:!1}function Ls(){return ol}var eu=_({},Os,{key:function(n){if(n.key){var i=Us[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=mr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Zc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(n){return n.type==="keypress"?mr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?mr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Pa=Bt(eu),tu=_({},Ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ll=Bt(tu),Yr=_({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),nu=Bt(Yr),ru=_({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),iu=Bt(ru),su=_({},Ps,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ma=Bt(su),dn=_({},Qe,{newState:0,oldState:0}),au=Bt(dn),ou=[9,13,27,32],yr=Zn&&"CompositionEvent"in window,h=null;Zn&&"documentMode"in document&&(h=document.documentMode);var v=Zn&&"TextEvent"in window&&!h,E=Zn&&(!yr||h&&8<h&&11>=h),R=" ",q=!1;function W(n,i){switch(n){case"keyup":return ou.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ve=!1;function kt(n,i){switch(n){case"compositionend":return ue(i);case"keypress":return i.which!==32?null:(q=!0,R);case"textInput":return n=i.data,n===R&&q?null:n;default:return null}}function Be(n,i){if(Ve)return n==="compositionend"||!yr&&W(n,i)?(n=rl(),$r=Ci=fr=null,Ve=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return E&&i.locale!=="ko"?null:i.data;default:return null}}var zt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ot(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!zt[n.type]:i==="textarea"}function Kr(n,i,a,l){Hr?Gr?Gr.push(l):Gr=[l]:Hr=l,i=Yu(i,"onChange"),0<i.length&&(a=new Na("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Yt=null,vr=null;function cl(n){S_(n,0)}function lu(n){var i=ur(n);if(Jo(i))return n}function Yg(n,i){if(n==="change")return i}var Kg=!1;if(Zn){var Bd;if(Zn){var zd="oninput"in document;if(!zd){var Qg=document.createElement("div");Qg.setAttribute("oninput","return;"),zd=typeof Qg.oninput=="function"}Bd=zd}else Bd=!1;Kg=Bd&&(!document.documentMode||9<document.documentMode)}function Wg(){Yt&&(Yt.detachEvent("onpropertychange",Xg),vr=Yt=null)}function Xg(n){if(n.propertyName==="value"&&lu(vr)){var i=[];Kr(i,vr,n,Ln(n)),Kc(cl,i)}}function Sx(n,i,a){n==="focusin"?(Wg(),Yt=i,vr=a,Yt.attachEvent("onpropertychange",Xg)):n==="focusout"&&Wg()}function Rx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return lu(vr)}function Cx(n,i){if(n==="click")return lu(i)}function Nx(n,i){if(n==="input"||n==="change")return lu(i)}function Ix(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var An=typeof Object.is=="function"?Object.is:Ix;function ul(n,i){if(An(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!ct.call(i,f)||!An(n[f],i[f]))return!1}return!0}function Zg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Jg(n,i){var a=Zg(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Zg(a)}}function ey(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?ey(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function ty(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Cs(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Cs(n.document)}return i}function Fd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var jx=Zn&&"documentMode"in document&&11>=document.documentMode,Ua=null,qd=null,hl=null,Hd=!1;function ny(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hd||Ua==null||Ua!==Cs(l)||(l=Ua,"selectionStart"in l&&Fd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),hl&&ul(hl,l)||(hl=l,l=Yu(qd,"onSelect"),0<l.length&&(i=new Na("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Ua)))}function Vs(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var La={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionrun:Vs("Transition","TransitionRun"),transitionstart:Vs("Transition","TransitionStart"),transitioncancel:Vs("Transition","TransitionCancel"),transitionend:Vs("Transition","TransitionEnd")},Gd={},ry={};Zn&&(ry=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function Bs(n){if(Gd[n])return Gd[n];if(!La[n])return n;var i=La[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in ry)return Gd[n]=i[a];return n}var iy=Bs("animationend"),sy=Bs("animationiteration"),ay=Bs("animationstart"),Dx=Bs("transitionrun"),kx=Bs("transitionstart"),Ox=Bs("transitioncancel"),oy=Bs("transitionend"),ly=new Map,$d="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$d.push("scrollEnd");function Jn(n,i){ly.set(n,i),Xn(i,[n])}var cy=new WeakMap;function zn(n,i){if(typeof n=="object"&&n!==null){var a=cy.get(n);return a!==void 0?a:(i={value:n,source:i,stack:Sa(i)},cy.set(n,i),i)}return{value:n,source:i,stack:Sa(i)}}var Fn=[],Va=0,Yd=0;function cu(){for(var n=Va,i=Yd=Va=0;i<n;){var a=Fn[i];Fn[i++]=null;var l=Fn[i];Fn[i++]=null;var f=Fn[i];Fn[i++]=null;var p=Fn[i];if(Fn[i++]=null,l!==null&&f!==null){var w=l.pending;w===null?f.next=f:(f.next=w.next,w.next=f),l.pending=f}p!==0&&uy(a,f,p)}}function uu(n,i,a,l){Fn[Va++]=n,Fn[Va++]=i,Fn[Va++]=a,Fn[Va++]=l,Yd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Kd(n,i,a,l){return uu(n,i,a,l),hu(n)}function Ba(n,i){return uu(n,null,null,i),hu(n)}function uy(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,p=n.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&i!==null&&(f=31-tn(a),n=p.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),p):null}function hu(n){if(50<Ml)throw Ml=0,tm=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var za={};function Px(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(n,i,a,l){return new Px(n,i,a,l)}function Qd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Qr(n,i){var a=n.alternate;return a===null?(a=Sn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function hy(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function du(n,i,a,l,f,p){var w=0;if(l=n,typeof n=="function")Qd(n)&&(w=1);else if(typeof n=="string")w=U1(n,a,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=Sn(31,a,i,f),n.elementType=A,n.lanes=p,n;case C:return zs(a.children,f,p,i);case j:w=8,f|=24;break;case k:return n=Sn(12,a,i,f|2),n.elementType=k,n.lanes=p,n;case J:return n=Sn(13,a,i,f),n.elementType=J,n.lanes=p,n;case oe:return n=Sn(19,a,i,f),n.elementType=oe,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case z:case Q:w=10;break e;case X:w=9;break e;case ne:w=11;break e;case U:w=14;break e;case N:w=16,l=null;break e}w=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return i=Sn(w,a,i,f),i.elementType=n,i.type=l,i.lanes=p,i}function zs(n,i,a,l){return n=Sn(7,n,l,i),n.lanes=a,n}function Wd(n,i,a){return n=Sn(6,n,null,i),n.lanes=a,n}function Xd(n,i,a){return i=Sn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Fa=[],qa=0,fu=null,mu=0,qn=[],Hn=0,Fs=null,Wr=1,Xr="";function qs(n,i){Fa[qa++]=mu,Fa[qa++]=fu,fu=n,mu=i}function dy(n,i,a){qn[Hn++]=Wr,qn[Hn++]=Xr,qn[Hn++]=Fs,Fs=n;var l=Wr;n=Xr;var f=32-tn(l)-1;l&=~(1<<f),a+=1;var p=32-tn(i)+f;if(30<p){var w=f-f%5;p=(l&(1<<w)-1).toString(32),l>>=w,f-=w,Wr=1<<32-tn(i)+f|a<<f|l,Xr=p+n}else Wr=1<<p|a<<f|l,Xr=n}function Zd(n){n.return!==null&&(qs(n,1),dy(n,1,0))}function Jd(n){for(;n===fu;)fu=Fa[--qa],Fa[qa]=null,mu=Fa[--qa],Fa[qa]=null;for(;n===Fs;)Fs=qn[--Hn],qn[Hn]=null,Xr=qn[--Hn],qn[Hn]=null,Wr=qn[--Hn],qn[Hn]=null}var fn=null,pt=null,Ye=!1,Hs=null,_r=!1,ef=Error(s(519));function Gs(n){var i=Error(s(418,""));throw ml(zn(i,n)),ef}function fy(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Dt]=n,i[St]=l,a){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(a=0;a<Ll.length;a++)Me(Ll[a],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":Me("invalid",i),Ns(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ra(i);break;case"select":Me("invalid",i);break;case"textarea":Me("invalid",i),Is(i,l.value,l.defaultValue,l.children),Ra(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||I_(i.textContent,a)?(l.popover!=null&&(Me("beforetoggle",i),Me("toggle",i)),l.onScroll!=null&&Me("scroll",i),l.onScrollEnd!=null&&Me("scrollend",i),l.onClick!=null&&(i.onclick=Ku),i=!0):i=!1,i||Gs(n)}function my(n){for(fn=n.return;fn;)switch(fn.tag){case 5:case 13:_r=!1;return;case 27:case 3:_r=!0;return;default:fn=fn.return}}function dl(n){if(n!==fn)return!1;if(!Ye)return my(n),Ye=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||ym(n.type,n.memoizedProps)),a=!a),a&&pt&&Gs(n),my(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){pt=tr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}pt=null}}else i===27?(i=pt,Hi(n.type)?(n=wm,wm=null,pt=n):pt=i):pt=fn?tr(n.stateNode.nextSibling):null;return!0}function fl(){pt=fn=null,Ye=!1}function py(){var n=Hs;return n!==null&&(_n===null?_n=n:_n.push.apply(_n,n),Hs=null),n}function ml(n){Hs===null?Hs=[n]:Hs.push(n)}var tf=ae(null),$s=null,Zr=null;function Ni(n,i,a){le(tf,i._currentValue),i._currentValue=a}function Jr(n){n._currentValue=tf.current,he(tf)}function nf(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function rf(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var w=f.child;p=p.firstContext;e:for(;p!==null;){var b=p;p=f;for(var M=0;M<i.length;M++)if(b.context===i[M]){p.lanes|=a,b=p.alternate,b!==null&&(b.lanes|=a),nf(p.return,a,n),l||(w=null);break e}p=b.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(s(341));w.lanes|=a,p=w.alternate,p!==null&&(p.lanes|=a),nf(w,a,n),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===n){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function pl(n,i,a,l){n=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var b=f.type;An(f.pendingProps.value,w.value)||(n!==null?n.push(b):n=[b])}}else if(f===Et.current){if(w=f.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Hl):n=[Hl])}f=f.return}n!==null&&rf(i,n,a,l),i.flags|=262144}function pu(n){for(n=n.firstContext;n!==null;){if(!An(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ys(n){$s=n,Zr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function nn(n){return gy($s,n)}function gu(n,i){return $s===null&&Ys(n),gy(n,i)}function gy(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Zr===null){if(n===null)throw Error(s(308));Zr=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Zr=Zr.next=i;return a}var Mx=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},Ux=r.unstable_scheduleCallback,Lx=r.unstable_NormalPriority,Pt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sf(){return{controller:new Mx,data:new Map,refCount:0}}function gl(n){n.refCount--,n.refCount===0&&Ux(Lx,function(){n.controller.abort()})}var yl=null,af=0,Ha=0,Ga=null;function Vx(n,i){if(yl===null){var a=yl=[];af=0,Ha=lm(),Ga={status:"pending",value:void 0,then:function(l){a.push(l)}}}return af++,i.then(yy,yy),i}function yy(){if(--af===0&&yl!==null){Ga!==null&&(Ga.status="fulfilled");var n=yl;yl=null,Ha=0,Ga=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Bx(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var vy=Z.S;Z.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Vx(n,i),vy!==null&&vy(n,i)};var Ks=ae(null);function of(){var n=Ks.current;return n!==null?n:st.pooledCache}function yu(n,i){i===null?le(Ks,Ks.current):le(Ks,i.pool)}function _y(){var n=of();return n===null?null:{parent:Pt._currentValue,pool:n}}var vl=Error(s(460)),Ey=Error(s(474)),vu=Error(s(542)),lf={then:function(){}};function wy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function _u(){}function Ty(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(_u,_u),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,xy(n),n;default:if(typeof i.status=="string")i.then(_u,_u);else{if(n=st,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,xy(n),n}throw _l=i,vl}}var _l=null;function by(){if(_l===null)throw Error(s(459));var n=_l;return _l=null,n}function xy(n){if(n===vl||n===vu)throw Error(s(483))}var Ii=!1;function cf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ji(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Di(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ze&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=hu(n),uy(n,null,a),i}return uu(n,l,i,a),hu(n)}function El(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Ko(n,a)}}function hf(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?f=p=i:p=p.next=i}else f=p=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var df=!1;function wl(){if(df){var n=Ga;if(n!==null)throw n}}function Tl(n,i,a,l){df=!1;var f=n.updateQueue;Ii=!1;var p=f.firstBaseUpdate,w=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var M=b,$=M.next;M.next=null,w===null?p=$:w.next=$,w=M;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,b=ee.lastBaseUpdate,b!==w&&(b===null?ee.firstBaseUpdate=$:b.next=$,ee.lastBaseUpdate=M))}if(p!==null){var ie=f.baseState;w=0,ee=$=M=null,b=p;do{var Y=b.lane&-536870913,K=Y!==b.lane;if(K?(ze&Y)===Y:(l&Y)===Y){Y!==0&&Y===Ha&&(df=!0),ee!==null&&(ee=ee.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Re=n,we=b;Y=i;var rt=a;switch(we.tag){case 1:if(Re=we.payload,typeof Re=="function"){ie=Re.call(rt,ie,Y);break e}ie=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=we.payload,Y=typeof Re=="function"?Re.call(rt,ie,Y):Re,Y==null)break e;ie=_({},ie,Y);break e;case 2:Ii=!0}}Y=b.callback,Y!==null&&(n.flags|=64,K&&(n.flags|=8192),K=f.callbacks,K===null?f.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ee===null?($=ee=K,M=ie):ee=ee.next=K,w|=Y;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;K=b,b=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);ee===null&&(M=ie),f.baseState=M,f.firstBaseUpdate=$,f.lastBaseUpdate=ee,p===null&&(f.shared.lanes=0),Bi|=w,n.lanes=w,n.memoizedState=ie}}function Ay(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function Sy(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Ay(a[n],i)}var $a=ae(null),Eu=ae(0);function Ry(n,i){n=ai,le(Eu,n),le($a,i),ai=n|i.baseLanes}function ff(){le(Eu,ai),le($a,$a.current)}function mf(){ai=Eu.current,he($a),he(Eu)}var ki=0,De=null,tt=null,Ct=null,wu=!1,Ya=!1,Qs=!1,Tu=0,bl=0,Ka=null,zx=0;function Tt(){throw Error(s(321))}function pf(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!An(n[a],i[a]))return!1;return!0}function gf(n,i,a,l,f,p){return ki=p,De=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Z.H=n===null||n.memoizedState===null?uv:hv,Qs=!1,p=a(l,f),Qs=!1,Ya&&(p=Ny(i,a,l,f)),Cy(n),p}function Cy(n){Z.H=Cu;var i=tt!==null&&tt.next!==null;if(ki=0,Ct=tt=De=null,wu=!1,bl=0,Ka=null,i)throw Error(s(300));n===null||Ft||(n=n.dependencies,n!==null&&pu(n)&&(Ft=!0))}function Ny(n,i,a,l){De=n;var f=0;do{if(Ya&&(Ka=null),bl=0,Ya=!1,25<=f)throw Error(s(301));if(f+=1,Ct=tt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Z.H=Kx,p=i(a,l)}while(Ya);return p}function Fx(){var n=Z.H,i=n.useState()[0];return i=typeof i.then=="function"?xl(i):i,n=n.useState()[0],(tt!==null?tt.memoizedState:null)!==n&&(De.flags|=1024),i}function yf(){var n=Tu!==0;return Tu=0,n}function vf(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function _f(n){if(wu){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}wu=!1}ki=0,Ct=tt=De=null,Ya=!1,bl=Tu=0,Ka=null}function yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?De.memoizedState=Ct=n:Ct=Ct.next=n,Ct}function Nt(){if(tt===null){var n=De.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var i=Ct===null?De.memoizedState:Ct.next;if(i!==null)Ct=i,tt=n;else{if(n===null)throw De.alternate===null?Error(s(467)):Error(s(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Ct===null?De.memoizedState=Ct=n:Ct=Ct.next=n}return Ct}function Ef(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xl(n){var i=bl;return bl+=1,Ka===null&&(Ka=[]),n=Ty(Ka,n,i),i=De,(Ct===null?i.memoizedState:Ct.next)===null&&(i=i.alternate,Z.H=i===null||i.memoizedState===null?uv:hv),n}function bu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return xl(n);if(n.$$typeof===Q)return nn(n)}throw Error(s(438,String(n)))}function wf(n){var i=null,a=De.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=De.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Ef(),De.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=S;return i.index++,a}function ei(n,i){return typeof i=="function"?i(n):i}function xu(n){var i=Nt();return Tf(i,tt,n)}function Tf(n,i,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=n.baseQueue,p=l.pending;if(p!==null){if(f!==null){var w=f.next;f.next=p.next,p.next=w}i.baseQueue=f=p,l.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{i=f.next;var b=w=null,M=null,$=i,ee=!1;do{var ie=$.lane&-536870913;if(ie!==$.lane?(ze&ie)===ie:(ki&ie)===ie){var Y=$.revertLane;if(Y===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ie===Ha&&(ee=!0);else if((ki&Y)===Y){$=$.next,Y===Ha&&(ee=!0);continue}else ie={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},M===null?(b=M=ie,w=p):M=M.next=ie,De.lanes|=Y,Bi|=Y;ie=$.action,Qs&&a(p,ie),p=$.hasEagerState?$.eagerState:a(p,ie)}else Y={lane:ie,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},M===null?(b=M=Y,w=p):M=M.next=Y,De.lanes|=ie,Bi|=ie;$=$.next}while($!==null&&$!==i);if(M===null?w=p:M.next=b,!An(p,n.memoizedState)&&(Ft=!0,ee&&(a=Ga,a!==null)))throw a;n.memoizedState=p,n.baseState=w,n.baseQueue=M,l.lastRenderedState=p}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function bf(n){var i=Nt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,p=i.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do p=n(p,w.action),w=w.next;while(w!==f);An(p,i.memoizedState)||(Ft=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,l]}function Iy(n,i,a){var l=De,f=Nt(),p=Ye;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=i();var w=!An((tt||f).memoizedState,a);w&&(f.memoizedState=a,Ft=!0),f=f.queue;var b=ky.bind(null,l,f,n);if(Al(2048,8,b,[n]),f.getSnapshot!==i||w||Ct!==null&&Ct.memoizedState.tag&1){if(l.flags|=2048,Qa(9,Au(),Dy.bind(null,l,f,a,i),null),st===null)throw Error(s(349));p||(ki&124)!==0||jy(l,i,a)}return a}function jy(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=De.updateQueue,i===null?(i=Ef(),De.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Dy(n,i,a,l){i.value=a,i.getSnapshot=l,Oy(i)&&Py(n)}function ky(n,i,a){return a(function(){Oy(i)&&Py(n)})}function Oy(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!An(n,a)}catch{return!0}}function Py(n){var i=Ba(n,2);i!==null&&jn(i,n,2)}function xf(n){var i=yn();if(typeof n=="function"){var a=n;if(n=a(),Qs){bn(!0);try{a()}finally{bn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:n},i}function My(n,i,a,l){return n.baseState=a,Tf(n,tt,typeof l=="function"?l:ei)}function qx(n,i,a,l,f){if(Ru(n))throw Error(s(485));if(n=i.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};Z.T!==null?a(!0):p.isTransition=!1,l(p),a=i.pending,a===null?(p.next=i.pending=p,Uy(i,p)):(p.next=a.next,i.pending=a.next=p)}}function Uy(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var p=Z.T,w={};Z.T=w;try{var b=a(f,l),M=Z.S;M!==null&&M(w,b),Ly(n,i,b)}catch($){Af(n,i,$)}finally{Z.T=p}}else try{p=a(f,l),Ly(n,i,p)}catch($){Af(n,i,$)}}function Ly(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Vy(n,i,l)},function(l){return Af(n,i,l)}):Vy(n,i,a)}function Vy(n,i,a){i.status="fulfilled",i.value=a,By(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,Uy(n,a)))}function Af(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,By(i),i=i.next;while(i!==l)}n.action=null}function By(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function zy(n,i){return i}function Fy(n,i){if(Ye){var a=st.formState;if(a!==null){e:{var l=De;if(Ye){if(pt){t:{for(var f=pt,p=_r;f.nodeType!==8;){if(!p){f=null;break t}if(f=tr(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){pt=tr(f.nextSibling),l=f.data==="F!";break e}}Gs(l)}l=!1}l&&(i=a[0])}}return a=yn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zy,lastRenderedState:i},a.queue=l,a=ov.bind(null,De,l),l.dispatch=a,l=xf(!1),p=If.bind(null,De,!1,l.queue),l=yn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=qx.bind(null,De,f,p,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function qy(n){var i=Nt();return Hy(i,tt,n)}function Hy(n,i,a){if(i=Tf(n,i,zy)[0],n=xu(ei)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=xl(i)}catch(w){throw w===vl?vu:w}else l=i;i=Nt();var f=i.queue,p=f.dispatch;return a!==i.memoizedState&&(De.flags|=2048,Qa(9,Au(),Hx.bind(null,f,a),null)),[l,p,n]}function Hx(n,i){n.action=i}function Gy(n){var i=Nt(),a=tt;if(a!==null)return Hy(i,a,n);Nt(),i=i.memoizedState,a=Nt();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function Qa(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=De.updateQueue,i===null&&(i=Ef(),De.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function Au(){return{destroy:void 0,resource:void 0}}function $y(){return Nt().memoizedState}function Su(n,i,a,l){var f=yn();l=l===void 0?null:l,De.flags|=n,f.memoizedState=Qa(1|i,Au(),a,l)}function Al(n,i,a,l){var f=Nt();l=l===void 0?null:l;var p=f.memoizedState.inst;tt!==null&&l!==null&&pf(l,tt.memoizedState.deps)?f.memoizedState=Qa(i,p,a,l):(De.flags|=n,f.memoizedState=Qa(1|i,p,a,l))}function Yy(n,i){Su(8390656,8,n,i)}function Ky(n,i){Al(2048,8,n,i)}function Qy(n,i){return Al(4,2,n,i)}function Wy(n,i){return Al(4,4,n,i)}function Xy(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Zy(n,i,a){a=a!=null?a.concat([n]):null,Al(4,4,Xy.bind(null,i,n),a)}function Sf(){}function Jy(n,i){var a=Nt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&pf(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function ev(n,i){var a=Nt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&pf(i,l[1]))return l[0];if(l=n(),Qs){bn(!0);try{n()}finally{bn(!1)}}return a.memoizedState=[l,i],l}function Rf(n,i,a){return a===void 0||(ki&1073741824)!==0?n.memoizedState=i:(n.memoizedState=a,n=r_(),De.lanes|=n,Bi|=n,a)}function tv(n,i,a,l){return An(a,i)?a:$a.current!==null?(n=Rf(n,a,l),An(n,i)||(Ft=!0),n):(ki&42)===0?(Ft=!0,n.memoizedState=a):(n=r_(),De.lanes|=n,Bi|=n,i)}function nv(n,i,a,l,f){var p=ce.p;ce.p=p!==0&&8>p?p:8;var w=Z.T,b={};Z.T=b,If(n,!1,i,a);try{var M=f(),$=Z.S;if($!==null&&$(b,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ee=Bx(M,l);Sl(n,i,ee,In(n))}else Sl(n,i,l,In(n))}catch(ie){Sl(n,i,{then:function(){},status:"rejected",reason:ie},In())}finally{ce.p=p,Z.T=w}}function Gx(){}function Cf(n,i,a,l){if(n.tag!==5)throw Error(s(476));var f=rv(n).queue;nv(n,f,i,de,a===null?Gx:function(){return iv(n),a(l)})}function rv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:de},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function iv(n){var i=rv(n).next.queue;Sl(n,i,{},In())}function Nf(){return nn(Hl)}function sv(){return Nt().memoizedState}function av(){return Nt().memoizedState}function $x(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=In();n=ji(a);var l=Di(i,n,a);l!==null&&(jn(l,i,a),El(l,i,a)),i={cache:sf()},n.payload=i;return}i=i.return}}function Yx(n,i,a){var l=In();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ru(n)?lv(i,a):(a=Kd(n,i,a,l),a!==null&&(jn(a,n,l),cv(a,i,l)))}function ov(n,i,a){var l=In();Sl(n,i,a,l)}function Sl(n,i,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ru(n))lv(i,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,b=p(w,a);if(f.hasEagerState=!0,f.eagerState=b,An(b,w))return uu(n,i,f,0),st===null&&cu(),!1}catch{}finally{}if(a=Kd(n,i,f,l),a!==null)return jn(a,n,l),cv(a,i,l),!0}return!1}function If(n,i,a,l){if(l={lane:2,revertLane:lm(),action:l,hasEagerState:!1,eagerState:null,next:null},Ru(n)){if(i)throw Error(s(479))}else i=Kd(n,a,l,2),i!==null&&jn(i,n,2)}function Ru(n){var i=n.alternate;return n===De||i!==null&&i===De}function lv(n,i){Ya=wu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function cv(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Ko(n,a)}}var Cu={readContext:nn,use:bu,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt},uv={readContext:nn,use:bu,useCallback:function(n,i){return yn().memoizedState=[n,i===void 0?null:i],n},useContext:nn,useEffect:Yy,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Su(4194308,4,Xy.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Su(4194308,4,n,i)},useInsertionEffect:function(n,i){Su(4,2,n,i)},useMemo:function(n,i){var a=yn();i=i===void 0?null:i;var l=n();if(Qs){bn(!0);try{n()}finally{bn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=yn();if(a!==void 0){var f=a(i);if(Qs){bn(!0);try{a(i)}finally{bn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=Yx.bind(null,De,n),[l.memoizedState,n]},useRef:function(n){var i=yn();return n={current:n},i.memoizedState=n},useState:function(n){n=xf(n);var i=n.queue,a=ov.bind(null,De,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Sf,useDeferredValue:function(n,i){var a=yn();return Rf(a,n,i)},useTransition:function(){var n=xf(!1);return n=nv.bind(null,De,n.queue,!0,!1),yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=De,f=yn();if(Ye){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),st===null)throw Error(s(349));(ze&124)!==0||jy(l,i,a)}f.memoizedState=a;var p={value:a,getSnapshot:i};return f.queue=p,Yy(ky.bind(null,l,p,n),[n]),l.flags|=2048,Qa(9,Au(),Dy.bind(null,l,p,a,i),null),a},useId:function(){var n=yn(),i=st.identifierPrefix;if(Ye){var a=Xr,l=Wr;a=(l&~(1<<32-tn(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=Tu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=zx++,i="«"+i+"r"+a.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:Nf,useFormState:Fy,useActionState:Fy,useOptimistic:function(n){var i=yn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=If.bind(null,De,!0,a),a.dispatch=i,[n,i]},useMemoCache:wf,useCacheRefresh:function(){return yn().memoizedState=$x.bind(null,De)}},hv={readContext:nn,use:bu,useCallback:Jy,useContext:nn,useEffect:Ky,useImperativeHandle:Zy,useInsertionEffect:Qy,useLayoutEffect:Wy,useMemo:ev,useReducer:xu,useRef:$y,useState:function(){return xu(ei)},useDebugValue:Sf,useDeferredValue:function(n,i){var a=Nt();return tv(a,tt.memoizedState,n,i)},useTransition:function(){var n=xu(ei)[0],i=Nt().memoizedState;return[typeof n=="boolean"?n:xl(n),i]},useSyncExternalStore:Iy,useId:sv,useHostTransitionStatus:Nf,useFormState:qy,useActionState:qy,useOptimistic:function(n,i){var a=Nt();return My(a,tt,n,i)},useMemoCache:wf,useCacheRefresh:av},Kx={readContext:nn,use:bu,useCallback:Jy,useContext:nn,useEffect:Ky,useImperativeHandle:Zy,useInsertionEffect:Qy,useLayoutEffect:Wy,useMemo:ev,useReducer:bf,useRef:$y,useState:function(){return bf(ei)},useDebugValue:Sf,useDeferredValue:function(n,i){var a=Nt();return tt===null?Rf(a,n,i):tv(a,tt.memoizedState,n,i)},useTransition:function(){var n=bf(ei)[0],i=Nt().memoizedState;return[typeof n=="boolean"?n:xl(n),i]},useSyncExternalStore:Iy,useId:sv,useHostTransitionStatus:Nf,useFormState:Gy,useActionState:Gy,useOptimistic:function(n,i){var a=Nt();return tt!==null?My(a,tt,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:wf,useCacheRefresh:av},Wa=null,Rl=0;function Nu(n){var i=Rl;return Rl+=1,Wa===null&&(Wa=[]),Ty(Wa,n,i)}function Cl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Iu(n,i){throw i.$$typeof===x?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function dv(n){var i=n._init;return i(n._payload)}function fv(n){function i(F,B){if(n){var G=F.deletions;G===null?(F.deletions=[B],F.flags|=16):G.push(B)}}function a(F,B){if(!n)return null;for(;B!==null;)i(F,B),B=B.sibling;return null}function l(F){for(var B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function f(F,B){return F=Qr(F,B),F.index=0,F.sibling=null,F}function p(F,B,G){return F.index=G,n?(G=F.alternate,G!==null?(G=G.index,G<B?(F.flags|=67108866,B):G):(F.flags|=67108866,B)):(F.flags|=1048576,B)}function w(F){return n&&F.alternate===null&&(F.flags|=67108866),F}function b(F,B,G,te){return B===null||B.tag!==6?(B=Wd(G,F.mode,te),B.return=F,B):(B=f(B,G),B.return=F,B)}function M(F,B,G,te){var ge=G.type;return ge===C?ee(F,B,G.props.children,te,G.key):B!==null&&(B.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===N&&dv(ge)===B.type)?(B=f(B,G.props),Cl(B,G),B.return=F,B):(B=du(G.type,G.key,G.props,null,F.mode,te),Cl(B,G),B.return=F,B)}function $(F,B,G,te){return B===null||B.tag!==4||B.stateNode.containerInfo!==G.containerInfo||B.stateNode.implementation!==G.implementation?(B=Xd(G,F.mode,te),B.return=F,B):(B=f(B,G.children||[]),B.return=F,B)}function ee(F,B,G,te,ge){return B===null||B.tag!==7?(B=zs(G,F.mode,te,ge),B.return=F,B):(B=f(B,G),B.return=F,B)}function ie(F,B,G){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Wd(""+B,F.mode,G),B.return=F,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case T:return G=du(B.type,B.key,B.props,null,F.mode,G),Cl(G,B),G.return=F,G;case D:return B=Xd(B,F.mode,G),B.return=F,B;case N:var te=B._init;return B=te(B._payload),ie(F,B,G)}if(Ke(B)||L(B))return B=zs(B,F.mode,G,null),B.return=F,B;if(typeof B.then=="function")return ie(F,Nu(B),G);if(B.$$typeof===Q)return ie(F,gu(F,B),G);Iu(F,B)}return null}function Y(F,B,G,te){var ge=B!==null?B.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return ge!==null?null:b(F,B,""+G,te);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case T:return G.key===ge?M(F,B,G,te):null;case D:return G.key===ge?$(F,B,G,te):null;case N:return ge=G._init,G=ge(G._payload),Y(F,B,G,te)}if(Ke(G)||L(G))return ge!==null?null:ee(F,B,G,te,null);if(typeof G.then=="function")return Y(F,B,Nu(G),te);if(G.$$typeof===Q)return Y(F,B,gu(F,G),te);Iu(F,G)}return null}function K(F,B,G,te,ge){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return F=F.get(G)||null,b(B,F,""+te,ge);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case T:return F=F.get(te.key===null?G:te.key)||null,M(B,F,te,ge);case D:return F=F.get(te.key===null?G:te.key)||null,$(B,F,te,ge);case N:var Oe=te._init;return te=Oe(te._payload),K(F,B,G,te,ge)}if(Ke(te)||L(te))return F=F.get(G)||null,ee(B,F,te,ge,null);if(typeof te.then=="function")return K(F,B,G,Nu(te),ge);if(te.$$typeof===Q)return K(F,B,G,gu(B,te),ge);Iu(B,te)}return null}function Re(F,B,G,te){for(var ge=null,Oe=null,ye=B,Te=B=0,Ht=null;ye!==null&&Te<G.length;Te++){ye.index>Te?(Ht=ye,ye=null):Ht=ye.sibling;var Ge=Y(F,ye,G[Te],te);if(Ge===null){ye===null&&(ye=Ht);break}n&&ye&&Ge.alternate===null&&i(F,ye),B=p(Ge,B,Te),Oe===null?ge=Ge:Oe.sibling=Ge,Oe=Ge,ye=Ht}if(Te===G.length)return a(F,ye),Ye&&qs(F,Te),ge;if(ye===null){for(;Te<G.length;Te++)ye=ie(F,G[Te],te),ye!==null&&(B=p(ye,B,Te),Oe===null?ge=ye:Oe.sibling=ye,Oe=ye);return Ye&&qs(F,Te),ge}for(ye=l(ye);Te<G.length;Te++)Ht=K(ye,F,Te,G[Te],te),Ht!==null&&(n&&Ht.alternate!==null&&ye.delete(Ht.key===null?Te:Ht.key),B=p(Ht,B,Te),Oe===null?ge=Ht:Oe.sibling=Ht,Oe=Ht);return n&&ye.forEach(function(Qi){return i(F,Qi)}),Ye&&qs(F,Te),ge}function we(F,B,G,te){if(G==null)throw Error(s(151));for(var ge=null,Oe=null,ye=B,Te=B=0,Ht=null,Ge=G.next();ye!==null&&!Ge.done;Te++,Ge=G.next()){ye.index>Te?(Ht=ye,ye=null):Ht=ye.sibling;var Qi=Y(F,ye,Ge.value,te);if(Qi===null){ye===null&&(ye=Ht);break}n&&ye&&Qi.alternate===null&&i(F,ye),B=p(Qi,B,Te),Oe===null?ge=Qi:Oe.sibling=Qi,Oe=Qi,ye=Ht}if(Ge.done)return a(F,ye),Ye&&qs(F,Te),ge;if(ye===null){for(;!Ge.done;Te++,Ge=G.next())Ge=ie(F,Ge.value,te),Ge!==null&&(B=p(Ge,B,Te),Oe===null?ge=Ge:Oe.sibling=Ge,Oe=Ge);return Ye&&qs(F,Te),ge}for(ye=l(ye);!Ge.done;Te++,Ge=G.next())Ge=K(ye,F,Te,Ge.value,te),Ge!==null&&(n&&Ge.alternate!==null&&ye.delete(Ge.key===null?Te:Ge.key),B=p(Ge,B,Te),Oe===null?ge=Ge:Oe.sibling=Ge,Oe=Ge);return n&&ye.forEach(function(Q1){return i(F,Q1)}),Ye&&qs(F,Te),ge}function rt(F,B,G,te){if(typeof G=="object"&&G!==null&&G.type===C&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case T:e:{for(var ge=G.key;B!==null;){if(B.key===ge){if(ge=G.type,ge===C){if(B.tag===7){a(F,B.sibling),te=f(B,G.props.children),te.return=F,F=te;break e}}else if(B.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===N&&dv(ge)===B.type){a(F,B.sibling),te=f(B,G.props),Cl(te,G),te.return=F,F=te;break e}a(F,B);break}else i(F,B);B=B.sibling}G.type===C?(te=zs(G.props.children,F.mode,te,G.key),te.return=F,F=te):(te=du(G.type,G.key,G.props,null,F.mode,te),Cl(te,G),te.return=F,F=te)}return w(F);case D:e:{for(ge=G.key;B!==null;){if(B.key===ge)if(B.tag===4&&B.stateNode.containerInfo===G.containerInfo&&B.stateNode.implementation===G.implementation){a(F,B.sibling),te=f(B,G.children||[]),te.return=F,F=te;break e}else{a(F,B);break}else i(F,B);B=B.sibling}te=Xd(G,F.mode,te),te.return=F,F=te}return w(F);case N:return ge=G._init,G=ge(G._payload),rt(F,B,G,te)}if(Ke(G))return Re(F,B,G,te);if(L(G)){if(ge=L(G),typeof ge!="function")throw Error(s(150));return G=ge.call(G),we(F,B,G,te)}if(typeof G.then=="function")return rt(F,B,Nu(G),te);if(G.$$typeof===Q)return rt(F,B,gu(F,G),te);Iu(F,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,B!==null&&B.tag===6?(a(F,B.sibling),te=f(B,G),te.return=F,F=te):(a(F,B),te=Wd(G,F.mode,te),te.return=F,F=te),w(F)):a(F,B)}return function(F,B,G,te){try{Rl=0;var ge=rt(F,B,G,te);return Wa=null,ge}catch(ye){if(ye===vl||ye===vu)throw ye;var Oe=Sn(29,ye,null,F.mode);return Oe.lanes=te,Oe.return=F,Oe}finally{}}}var Xa=fv(!0),mv=fv(!1),Gn=ae(null),Er=null;function Oi(n){var i=n.alternate;le(Mt,Mt.current&1),le(Gn,n),Er===null&&(i===null||$a.current!==null||i.memoizedState!==null)&&(Er=n)}function pv(n){if(n.tag===22){if(le(Mt,Mt.current),le(Gn,n),Er===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Er=n)}}else Pi()}function Pi(){le(Mt,Mt.current),le(Gn,Gn.current)}function ti(n){he(Gn),Er===n&&(Er=null),he(Mt)}var Mt=ae(0);function ju(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Em(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function jf(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:_({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Df={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=In(),f=ji(l);f.payload=i,a!=null&&(f.callback=a),i=Di(n,f,l),i!==null&&(jn(i,n,l),El(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=In(),f=ji(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Di(n,f,l),i!==null&&(jn(i,n,l),El(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=In(),l=ji(a);l.tag=2,i!=null&&(l.callback=i),i=Di(n,l,a),i!==null&&(jn(i,n,a),El(i,n,a))}};function gv(n,i,a,l,f,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,p,w):i.prototype&&i.prototype.isPureReactComponent?!ul(a,l)||!ul(f,p):!0}function yv(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&Df.enqueueReplaceState(i,i.state,null)}function Ws(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=_({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var Du=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function vv(n){Du(n)}function _v(n){console.error(n)}function Ev(n){Du(n)}function ku(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function wv(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function kf(n,i,a){return a=ji(a),a.tag=3,a.payload={element:null},a.callback=function(){ku(n,i)},a}function Tv(n){return n=ji(n),n.tag=3,n}function bv(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;n.payload=function(){return f(p)},n.callback=function(){wv(i,a,l)}}var w=a.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){wv(i,a,l),typeof f!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function Qx(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&pl(i,a,f,!0),a=Gn.current,a!==null){switch(a.tag){case 13:return Er===null?rm():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===lf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),sm(n,l,f)),!1;case 22:return a.flags|=65536,l===lf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),sm(n,l,f)),!1}throw Error(s(435,a.tag))}return sm(n,l,f),rm(),!1}if(Ye)return i=Gn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==ef&&(n=Error(s(422),{cause:l}),ml(zn(n,a)))):(l!==ef&&(i=Error(s(423),{cause:l}),ml(zn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=zn(l,a),f=kf(n.stateNode,l,f),hf(n,f),gt!==4&&(gt=2)),!1;var p=Error(s(520),{cause:l});if(p=zn(p,a),Pl===null?Pl=[p]:Pl.push(p),gt!==4&&(gt=2),i===null)return!0;l=zn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=kf(a.stateNode,l,n),hf(a,n),!1;case 1:if(i=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(zi===null||!zi.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Tv(f),bv(f,n,a,l),hf(a,f),!1}a=a.return}while(a!==null);return!1}var xv=Error(s(461)),Ft=!1;function Kt(n,i,a,l){i.child=n===null?mv(i,null,a,l):Xa(i,n.child,a,l)}function Av(n,i,a,l,f){a=a.render;var p=i.ref;if("ref"in l){var w={};for(var b in l)b!=="ref"&&(w[b]=l[b])}else w=l;return Ys(i),l=gf(n,i,a,w,p,f),b=yf(),n!==null&&!Ft?(vf(n,i,f),ni(n,i,f)):(Ye&&b&&Zd(i),i.flags|=1,Kt(n,i,l,f),i.child)}function Sv(n,i,a,l,f){if(n===null){var p=a.type;return typeof p=="function"&&!Qd(p)&&p.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=p,Rv(n,i,p,l,f)):(n=du(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!zf(n,f)){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:ul,a(w,l)&&n.ref===i.ref)return ni(n,i,f)}return i.flags|=1,n=Qr(p,l),n.ref=i.ref,n.return=i,i.child=n}function Rv(n,i,a,l,f){if(n!==null){var p=n.memoizedProps;if(ul(p,l)&&n.ref===i.ref)if(Ft=!1,i.pendingProps=l=p,zf(n,f))(n.flags&131072)!==0&&(Ft=!0);else return i.lanes=n.lanes,ni(n,i,f)}return Of(n,i,a,l,f)}function Cv(n,i,a){var l=i.pendingProps,f=l.children,p=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=p!==null?p.baseLanes|a:a,n!==null){for(f=i.child=n.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;i.childLanes=p&~l}else i.childLanes=0,i.child=null;return Nv(n,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&yu(i,p!==null?p.cachePool:null),p!==null?Ry(i,p):ff(),pv(i);else return i.lanes=i.childLanes=536870912,Nv(n,i,p!==null?p.baseLanes|a:a,a)}else p!==null?(yu(i,p.cachePool),Ry(i,p),Pi(),i.memoizedState=null):(n!==null&&yu(i,null),ff(),Pi());return Kt(n,i,f,a),i.child}function Nv(n,i,a,l){var f=of();return f=f===null?null:{parent:Pt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},n!==null&&yu(i,null),ff(),pv(i),n!==null&&pl(n,i,l,!0),null}function Ou(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function Of(n,i,a,l,f){return Ys(i),a=gf(n,i,a,l,void 0,f),l=yf(),n!==null&&!Ft?(vf(n,i,f),ni(n,i,f)):(Ye&&l&&Zd(i),i.flags|=1,Kt(n,i,a,f),i.child)}function Iv(n,i,a,l,f,p){return Ys(i),i.updateQueue=null,a=Ny(i,l,a,f),Cy(n),l=yf(),n!==null&&!Ft?(vf(n,i,p),ni(n,i,p)):(Ye&&l&&Zd(i),i.flags|=1,Kt(n,i,a,p),i.child)}function jv(n,i,a,l,f){if(Ys(i),i.stateNode===null){var p=za,w=a.contextType;typeof w=="object"&&w!==null&&(p=nn(w)),p=new a(l,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Df,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=l,p.state=i.memoizedState,p.refs={},cf(i),w=a.contextType,p.context=typeof w=="object"&&w!==null?nn(w):za,p.state=i.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(jf(i,a,w,l),p.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&Df.enqueueReplaceState(p,p.state,null),Tl(i,l,p,f),wl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){p=i.stateNode;var b=i.memoizedProps,M=Ws(a,b);p.props=M;var $=p.context,ee=a.contextType;w=za,typeof ee=="object"&&ee!==null&&(w=nn(ee));var ie=a.getDerivedStateFromProps;ee=typeof ie=="function"||typeof p.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,ee||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b||$!==w)&&yv(i,p,l,w),Ii=!1;var Y=i.memoizedState;p.state=Y,Tl(i,l,p,f),wl(),$=i.memoizedState,b||Y!==$||Ii?(typeof ie=="function"&&(jf(i,a,ie,l),$=i.memoizedState),(M=Ii||gv(i,a,M,l,Y,$,w))?(ee||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=$),p.props=l,p.state=$,p.context=w,l=M):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{p=i.stateNode,uf(n,i),w=i.memoizedProps,ee=Ws(a,w),p.props=ee,ie=i.pendingProps,Y=p.context,$=a.contextType,M=za,typeof $=="object"&&$!==null&&(M=nn($)),b=a.getDerivedStateFromProps,($=typeof b=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==ie||Y!==M)&&yv(i,p,l,M),Ii=!1,Y=i.memoizedState,p.state=Y,Tl(i,l,p,f),wl();var K=i.memoizedState;w!==ie||Y!==K||Ii||n!==null&&n.dependencies!==null&&pu(n.dependencies)?(typeof b=="function"&&(jf(i,a,b,l),K=i.memoizedState),(ee=Ii||gv(i,a,ee,l,Y,K,M)||n!==null&&n.dependencies!==null&&pu(n.dependencies))?($||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,K,M),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,K,M)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=K),p.props=l,p.state=K,p.context=M,l=ee):(typeof p.componentDidUpdate!="function"||w===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),l=!1)}return p=l,Ou(n,i),l=(i.flags&128)!==0,p||l?(p=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&l?(i.child=Xa(i,n.child,null,f),i.child=Xa(i,null,a,f)):Kt(n,i,a,f),i.memoizedState=p.state,n=i.child):n=ni(n,i,f),n}function Dv(n,i,a,l){return fl(),i.flags|=256,Kt(n,i,a,l),i.child}var Pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mf(n){return{baseLanes:n,cachePool:_y()}}function Uf(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=$n),n}function kv(n,i,a){var l=i.pendingProps,f=!1,p=(i.flags&128)!==0,w;if((w=p)||(w=n!==null&&n.memoizedState===null?!1:(Mt.current&2)!==0),w&&(f=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ye){if(f?Oi(i):Pi(),Ye){var b=pt,M;if(M=b){e:{for(M=b,b=_r;M.nodeType!==8;){if(!b){b=null;break e}if(M=tr(M.nextSibling),M===null){b=null;break e}}b=M}b!==null?(i.memoizedState={dehydrated:b,treeContext:Fs!==null?{id:Wr,overflow:Xr}:null,retryLane:536870912,hydrationErrors:null},M=Sn(18,null,null,0),M.stateNode=b,M.return=i,i.child=M,fn=i,pt=null,M=!0):M=!1}M||Gs(i)}if(b=i.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Em(b)?i.lanes=32:i.lanes=536870912,null;ti(i)}return b=l.children,l=l.fallback,f?(Pi(),f=i.mode,b=Pu({mode:"hidden",children:b},f),l=zs(l,f,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,f=i.child,f.memoizedState=Mf(a),f.childLanes=Uf(n,w,a),i.memoizedState=Pf,l):(Oi(i),Lf(i,b))}if(M=n.memoizedState,M!==null&&(b=M.dehydrated,b!==null)){if(p)i.flags&256?(Oi(i),i.flags&=-257,i=Vf(n,i,a)):i.memoizedState!==null?(Pi(),i.child=n.child,i.flags|=128,i=null):(Pi(),f=l.fallback,b=i.mode,l=Pu({mode:"visible",children:l.children},b),f=zs(f,b,a,null),f.flags|=2,l.return=i,f.return=i,l.sibling=f,i.child=l,Xa(i,n.child,null,a),l=i.child,l.memoizedState=Mf(a),l.childLanes=Uf(n,w,a),i.memoizedState=Pf,i=f);else if(Oi(i),Em(b)){if(w=b.nextSibling&&b.nextSibling.dataset,w)var $=w.dgst;w=$,l=Error(s(419)),l.stack="",l.digest=w,ml({value:l,source:null,stack:null}),i=Vf(n,i,a)}else if(Ft||pl(n,i,a,!1),w=(a&n.childLanes)!==0,Ft||w){if(w=st,w!==null&&(l=a&-a,l=(l&42)!==0?1:Ti(l),l=(l&(w.suspendedLanes|a))!==0?0:l,l!==0&&l!==M.retryLane))throw M.retryLane=l,Ba(n,l),jn(w,n,l),xv;b.data==="$?"||rm(),i=Vf(n,i,a)}else b.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=M.treeContext,pt=tr(b.nextSibling),fn=i,Ye=!0,Hs=null,_r=!1,n!==null&&(qn[Hn++]=Wr,qn[Hn++]=Xr,qn[Hn++]=Fs,Wr=n.id,Xr=n.overflow,Fs=i),i=Lf(i,l.children),i.flags|=4096);return i}return f?(Pi(),f=l.fallback,b=i.mode,M=n.child,$=M.sibling,l=Qr(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,$!==null?f=Qr($,f):(f=zs(f,b,a,null),f.flags|=2),f.return=i,l.return=i,l.sibling=f,i.child=l,l=f,f=i.child,b=n.child.memoizedState,b===null?b=Mf(a):(M=b.cachePool,M!==null?($=Pt._currentValue,M=M.parent!==$?{parent:$,pool:$}:M):M=_y(),b={baseLanes:b.baseLanes|a,cachePool:M}),f.memoizedState=b,f.childLanes=Uf(n,w,a),i.memoizedState=Pf,l):(Oi(i),a=n.child,n=a.sibling,a=Qr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(w=i.deletions,w===null?(i.deletions=[n],i.flags|=16):w.push(n)),i.child=a,i.memoizedState=null,a)}function Lf(n,i){return i=Pu({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Pu(n,i){return n=Sn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Vf(n,i,a){return Xa(i,n.child,null,a),n=Lf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Ov(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),nf(n.return,i,a)}function Bf(n,i,a,l,f){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=a,p.tailMode=f)}function Pv(n,i,a){var l=i.pendingProps,f=l.revealOrder,p=l.tail;if(Kt(n,i,l.children,a),l=Mt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ov(n,a,i);else if(n.tag===19)Ov(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(le(Mt,l),f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&ju(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Bf(i,!1,f,a,p);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&ju(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Bf(i,!0,a,null,p);break;case"together":Bf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ni(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Bi|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(pl(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,a=Qr(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Qr(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function zf(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&pu(n)))}function Wx(n,i,a){switch(i.tag){case 3:H(i,i.stateNode.containerInfo),Ni(i,Pt,n.memoizedState.cache),fl();break;case 27:case 5:He(i);break;case 4:H(i,i.stateNode.containerInfo);break;case 10:Ni(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Oi(i),i.flags|=128,null):(a&i.child.childLanes)!==0?kv(n,i,a):(Oi(i),n=ni(n,i,a),n!==null?n.sibling:null);Oi(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(pl(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Pv(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(Mt,Mt.current),l)break;return null;case 22:case 23:return i.lanes=0,Cv(n,i,a);case 24:Ni(i,Pt,n.memoizedState.cache)}return ni(n,i,a)}function Mv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Ft=!0;else{if(!zf(n,a)&&(i.flags&128)===0)return Ft=!1,Wx(n,i,a);Ft=(n.flags&131072)!==0}else Ft=!1,Ye&&(i.flags&1048576)!==0&&dy(i,mu,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var l=i.elementType,f=l._init;if(l=f(l._payload),i.type=l,typeof l=="function")Qd(l)?(n=Ws(l,n),i.tag=1,i=jv(null,i,l,n,a)):(i.tag=0,i=Of(null,i,l,n,a));else{if(l!=null){if(f=l.$$typeof,f===ne){i.tag=11,i=Av(null,i,l,n,a);break e}else if(f===U){i.tag=14,i=Sv(null,i,l,n,a);break e}}throw i=$e(l)||l,Error(s(306,i,""))}}return i;case 0:return Of(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Ws(l,i.pendingProps),jv(n,i,l,f,a);case 3:e:{if(H(i,i.stateNode.containerInfo),n===null)throw Error(s(387));l=i.pendingProps;var p=i.memoizedState;f=p.element,uf(n,i),Tl(i,l,null,a);var w=i.memoizedState;if(l=w.cache,Ni(i,Pt,l),l!==p.cache&&rf(i,[Pt],a,!0),wl(),l=w.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Dv(n,i,l,a);break e}else if(l!==f){f=zn(Error(s(424)),i),ml(f),i=Dv(n,i,l,a);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(pt=tr(n.firstChild),fn=i,Ye=!0,Hs=null,_r=!0,a=mv(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(fl(),l===f){i=ni(n,i,a);break e}Kt(n,i,l,a)}i=i.child}return i;case 26:return Ou(n,i),n===null?(a=B_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ye||(a=i.type,n=i.pendingProps,l=Qu(be.current).createElement(a),l[Dt]=i,l[St]=n,Wt(l,a,n),wt(l),i.stateNode=l):i.memoizedState=B_(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return He(i),n===null&&Ye&&(l=i.stateNode=U_(i.type,i.pendingProps,be.current),fn=i,_r=!0,f=pt,Hi(i.type)?(wm=f,pt=tr(l.firstChild)):pt=f),Kt(n,i,i.pendingProps.children,a),Ou(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ye&&((f=l=pt)&&(l=x1(l,i.type,i.pendingProps,_r),l!==null?(i.stateNode=l,fn=i,pt=tr(l.firstChild),_r=!1,f=!0):f=!1),f||Gs(i)),He(i),f=i.type,p=i.pendingProps,w=n!==null?n.memoizedProps:null,l=p.children,ym(f,p)?l=null:w!==null&&ym(f,w)&&(i.flags|=32),i.memoizedState!==null&&(f=gf(n,i,Fx,null,null,a),Hl._currentValue=f),Ou(n,i),Kt(n,i,l,a),i.child;case 6:return n===null&&Ye&&((n=a=pt)&&(a=A1(a,i.pendingProps,_r),a!==null?(i.stateNode=a,fn=i,pt=null,n=!0):n=!1),n||Gs(i)),null;case 13:return kv(n,i,a);case 4:return H(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=Xa(i,null,l,a):Kt(n,i,l,a),i.child;case 11:return Av(n,i,i.type,i.pendingProps,a);case 7:return Kt(n,i,i.pendingProps,a),i.child;case 8:return Kt(n,i,i.pendingProps.children,a),i.child;case 12:return Kt(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Ni(i,i.type,l.value),Kt(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Ys(i),f=nn(f),l=l(f),i.flags|=1,Kt(n,i,l,a),i.child;case 14:return Sv(n,i,i.type,i.pendingProps,a);case 15:return Rv(n,i,i.type,i.pendingProps,a);case 19:return Pv(n,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},n===null?(a=Pu(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Qr(n.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Cv(n,i,a);case 24:return Ys(i),l=nn(Pt),n===null?(f=of(),f===null&&(f=st,p=sf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),i.memoizedState={parent:l,cache:f},cf(i),Ni(i,Pt,f)):((n.lanes&a)!==0&&(uf(n,i),Tl(i,null,null,a),wl()),f=n.memoizedState,p=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ni(i,Pt,l)):(l=p.cache,Ni(i,Pt,l),l!==f.cache&&rf(i,[Pt],a,!0))),Kt(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ri(n){n.flags|=4}function Uv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!G_(i)){if(i=Gn.current,i!==null&&((ze&4194048)===ze?Er!==null:(ze&62914560)!==ze&&(ze&536870912)===0||i!==Er))throw _l=lf,Ey;n.flags|=8192}}function Mu(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?$o():536870912,n.lanes|=i,to|=i)}function Nl(n,i){if(!Ye)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function ut(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function Xx(n,i,a){var l=i.pendingProps;switch(Jd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(i),null;case 1:return ut(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Jr(Pt),fe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(dl(i)?ri(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,py())),ut(i),null;case 26:return a=i.memoizedState,n===null?(ri(i),a!==null?(ut(i),Uv(i,a)):(ut(i),i.flags&=-16777217)):a?a!==n.memoizedState?(ri(i),ut(i),Uv(i,a)):(ut(i),i.flags&=-16777217):(n.memoizedProps!==l&&ri(i),ut(i),i.flags&=-16777217),null;case 27:Vt(i),a=be.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ri(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ut(i),null}n=ve.current,dl(i)?fy(i):(n=U_(f,l,a),i.stateNode=n,ri(i))}return ut(i),null;case 5:if(Vt(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ri(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ut(i),null}if(n=ve.current,dl(i))fy(i);else{switch(f=Qu(be.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}n[Dt]=i,n[St]=l;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(Wt(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ri(i)}}return ut(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&ri(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(n=be.current,dl(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=fn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Dt]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||I_(n.nodeValue,a)),n||Gs(i)}else n=Qu(n).createTextNode(l),n[Dt]=i,i.stateNode=n}return ut(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=dl(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Dt]=i}else fl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ut(i),f=!1}else f=py(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(ti(i),i):(ti(i),null)}if(ti(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var p=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),Mu(i,i.updateQueue),ut(i),null;case 4:return fe(),n===null&&dm(i.stateNode.containerInfo),ut(i),null;case 10:return Jr(i.type),ut(i),null;case 19:if(he(Mt),f=i.memoizedState,f===null)return ut(i),null;if(l=(i.flags&128)!==0,p=f.rendering,p===null)if(l)Nl(f,!1);else{if(gt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=ju(n),p!==null){for(i.flags|=128,Nl(f,!1),n=p.updateQueue,i.updateQueue=n,Mu(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)hy(a,n),a=a.sibling;return le(Mt,Mt.current&1|2),i.child}n=n.sibling}f.tail!==null&&Pn()>Vu&&(i.flags|=128,l=!0,Nl(f,!1),i.lanes=4194304)}else{if(!l)if(n=ju(p),n!==null){if(i.flags|=128,l=!0,n=n.updateQueue,i.updateQueue=n,Mu(i,n),Nl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Ye)return ut(i),null}else 2*Pn()-f.renderingStartTime>Vu&&a!==536870912&&(i.flags|=128,l=!0,Nl(f,!1),i.lanes=4194304);f.isBackwards?(p.sibling=i.child,i.child=p):(n=f.last,n!==null?n.sibling=p:i.child=p,f.last=p)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Pn(),i.sibling=null,n=Mt.current,le(Mt,l?n&1|2:n&1),i):(ut(i),null);case 22:case 23:return ti(i),mf(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ut(i),i.subtreeFlags&6&&(i.flags|=8192)):ut(i),a=i.updateQueue,a!==null&&Mu(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&he(Ks),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Jr(Pt),ut(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Zx(n,i){switch(Jd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Jr(Pt),fe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Vt(i),null;case 13:if(ti(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));fl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return he(Mt),null;case 4:return fe(),null;case 10:return Jr(i.type),null;case 22:case 23:return ti(i),mf(),n!==null&&he(Ks),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Jr(Pt),null;case 25:return null;default:return null}}function Lv(n,i){switch(Jd(i),i.tag){case 3:Jr(Pt),fe();break;case 26:case 27:case 5:Vt(i);break;case 4:fe();break;case 13:ti(i);break;case 19:he(Mt);break;case 10:Jr(i.type);break;case 22:case 23:ti(i),mf(),n!==null&&he(Ks);break;case 24:Jr(Pt)}}function Il(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var p=a.create,w=a.inst;l=p(),w.destroy=l}a=a.next}while(a!==f)}}catch(b){it(i,i.return,b)}}function Mi(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&n)===n){var w=l.inst,b=w.destroy;if(b!==void 0){w.destroy=void 0,f=i;var M=a,$=b;try{$()}catch(ee){it(f,M,ee)}}}l=l.next}while(l!==p)}}catch(ee){it(i,i.return,ee)}}function Vv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{Sy(i,a)}catch(l){it(n,n.return,l)}}}function Bv(n,i,a){a.props=Ws(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){it(n,i,l)}}function jl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){it(n,i,f)}}function wr(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){it(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){it(n,i,f)}else a.current=null}function zv(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){it(n,n.return,f)}}function Ff(n,i,a){try{var l=n.stateNode;_1(l,n.type,a,i),l[St]=i}catch(f){it(n,n.return,f)}}function Fv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Hi(n.type)||n.tag===4}function qf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Fv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Hi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Hf(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ku));else if(l!==4&&(l===27&&Hi(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(Hf(n,i,a),n=n.sibling;n!==null;)Hf(n,i,a),n=n.sibling}function Uu(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Hi(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Uu(n,i,a),n=n.sibling;n!==null;)Uu(n,i,a),n=n.sibling}function qv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Wt(i,l,a),i[Dt]=n,i[St]=a}catch(p){it(n,n.return,p)}}var ii=!1,bt=!1,Gf=!1,Hv=typeof WeakSet=="function"?WeakSet:Set,qt=null;function Jx(n,i){if(n=n.containerInfo,pm=th,n=ty(n),Fd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,b=-1,M=-1,$=0,ee=0,ie=n,Y=null;t:for(;;){for(var K;ie!==a||f!==0&&ie.nodeType!==3||(b=w+f),ie!==p||l!==0&&ie.nodeType!==3||(M=w+l),ie.nodeType===3&&(w+=ie.nodeValue.length),(K=ie.firstChild)!==null;)Y=ie,ie=K;for(;;){if(ie===n)break t;if(Y===a&&++$===f&&(b=w),Y===p&&++ee===l&&(M=w),(K=ie.nextSibling)!==null)break;ie=Y,Y=ie.parentNode}ie=K}a=b===-1||M===-1?null:{start:b,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(gm={focusedElem:n,selectionRange:a},th=!1,qt=i;qt!==null;)if(i=qt,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,qt=n;else for(;qt!==null;){switch(i=qt,p=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,a=i,f=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var Re=Ws(a.type,f,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Re,p),l.__reactInternalSnapshotBeforeUpdate=n}catch(we){it(a,a.return,we)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)_m(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":_m(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,qt=n;break}qt=i.return}}function Gv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ui(n,a),l&4&&Il(5,a);break;case 1:if(Ui(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(w){it(a,a.return,w)}else{var f=Ws(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(w){it(a,a.return,w)}}l&64&&Vv(a),l&512&&jl(a,a.return);break;case 3:if(Ui(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Sy(n,i)}catch(w){it(a,a.return,w)}}break;case 27:i===null&&l&4&&qv(a);case 26:case 5:Ui(n,a),i===null&&l&4&&zv(a),l&512&&jl(a,a.return);break;case 12:Ui(n,a);break;case 13:Ui(n,a),l&4&&Kv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=l1.bind(null,a),S1(n,a))));break;case 22:if(l=a.memoizedState!==null||ii,!l){i=i!==null&&i.memoizedState!==null||bt,f=ii;var p=bt;ii=l,(bt=i)&&!p?Li(n,a,(a.subtreeFlags&8772)!==0):Ui(n,a),ii=f,bt=p}break;case 30:break;default:Ui(n,a)}}function $v(n){var i=n.alternate;i!==null&&(n.alternate=null,$v(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ai(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var lt=null,vn=!1;function si(n,i,a){for(a=a.child;a!==null;)Yv(n,i,a),a=a.sibling}function Yv(n,i,a){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(mt,a)}catch{}switch(a.tag){case 26:bt||wr(a,i),si(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:bt||wr(a,i);var l=lt,f=vn;Hi(a.type)&&(lt=a.stateNode,vn=!1),si(n,i,a),Bl(a.stateNode),lt=l,vn=f;break;case 5:bt||wr(a,i);case 6:if(l=lt,f=vn,lt=null,si(n,i,a),lt=l,vn=f,lt!==null)if(vn)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(p){it(a,i,p)}else try{lt.removeChild(a.stateNode)}catch(p){it(a,i,p)}break;case 18:lt!==null&&(vn?(n=lt,P_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Kl(n)):P_(lt,a.stateNode));break;case 4:l=lt,f=vn,lt=a.stateNode.containerInfo,vn=!0,si(n,i,a),lt=l,vn=f;break;case 0:case 11:case 14:case 15:bt||Mi(2,a,i),bt||Mi(4,a,i),si(n,i,a);break;case 1:bt||(wr(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Bv(a,i,l)),si(n,i,a);break;case 21:si(n,i,a);break;case 22:bt=(l=bt)||a.memoizedState!==null,si(n,i,a),bt=l;break;default:si(n,i,a)}}function Kv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Kl(n)}catch(a){it(i,i.return,a)}}function e1(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Hv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Hv),i;default:throw Error(s(435,n.tag))}}function $f(n,i){var a=e1(n);i.forEach(function(l){var f=c1.bind(null,n,l);a.has(l)||(a.add(l),l.then(f,f))})}function Rn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],p=n,w=i,b=w;e:for(;b!==null;){switch(b.tag){case 27:if(Hi(b.type)){lt=b.stateNode,vn=!1;break e}break;case 5:lt=b.stateNode,vn=!1;break e;case 3:case 4:lt=b.stateNode.containerInfo,vn=!0;break e}b=b.return}if(lt===null)throw Error(s(160));Yv(p,w,f),lt=null,vn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Qv(i,n),i=i.sibling}var er=null;function Qv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Rn(i,n),Cn(n),l&4&&(Mi(3,n,n.return),Il(3,n),Mi(5,n,n.return));break;case 1:Rn(i,n),Cn(n),l&512&&(bt||a===null||wr(a,a.return)),l&64&&ii&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=er;if(Rn(i,n),Cn(n),l&512&&(bt||a===null||wr(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[As]||p[Dt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),Wt(p,l,a),p[Dt]=n,wt(p),l=p;break e;case"link":var w=q_("link","href",f).get(l+(a.href||""));if(w){for(var b=0;b<w.length;b++)if(p=w[b],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){w.splice(b,1);break t}}p=f.createElement(l),Wt(p,l,a),f.head.appendChild(p);break;case"meta":if(w=q_("meta","content",f).get(l+(a.content||""))){for(b=0;b<w.length;b++)if(p=w[b],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){w.splice(b,1);break t}}p=f.createElement(l),Wt(p,l,a),f.head.appendChild(p);break;default:throw Error(s(468,l))}p[Dt]=n,wt(p),l=p}n.stateNode=l}else H_(f,n.type,n.stateNode);else n.stateNode=F_(f,l,n.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?H_(f,n.type,n.stateNode):F_(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Ff(n,n.memoizedProps,a.memoizedProps)}break;case 27:Rn(i,n),Cn(n),l&512&&(bt||a===null||wr(a,a.return)),a!==null&&l&4&&Ff(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Rn(i,n),Cn(n),l&512&&(bt||a===null||wr(a,a.return)),n.flags&32){f=n.stateNode;try{Un(f,"")}catch(K){it(n,n.return,K)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Ff(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Gf=!0);break;case 6:if(Rn(i,n),Cn(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(K){it(n,n.return,K)}}break;case 3:if(Zu=null,f=er,er=Wu(i.containerInfo),Rn(i,n),er=f,Cn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Kl(i.containerInfo)}catch(K){it(n,n.return,K)}Gf&&(Gf=!1,Wv(n));break;case 4:l=er,er=Wu(n.stateNode.containerInfo),Rn(i,n),Cn(n),er=l;break;case 12:Rn(i,n),Cn(n);break;case 13:Rn(i,n),Cn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Zf=Pn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,$f(n,l)));break;case 22:f=n.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,$=ii,ee=bt;if(ii=$||f,bt=ee||M,Rn(i,n),bt=ee,ii=$,Cn(n),l&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||M||ii||bt||Xs(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){M=a=i;try{if(p=M.stateNode,f)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{b=M.stateNode;var ie=M.memoizedProps.style,Y=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;b.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(K){it(M,M.return,K)}}}else if(i.tag===6){if(a===null){M=i;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(K){it(M,M.return,K)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,$f(n,a))));break;case 19:Rn(i,n),Cn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,$f(n,l)));break;case 30:break;case 21:break;default:Rn(i,n),Cn(n)}}function Cn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(Fv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,p=qf(n);Uu(n,p,f);break;case 5:var w=a.stateNode;a.flags&32&&(Un(w,""),a.flags&=-33);var b=qf(n);Uu(n,b,w);break;case 3:case 4:var M=a.stateNode.containerInfo,$=qf(n);Hf(n,$,M);break;default:throw Error(s(161))}}catch(ee){it(n,n.return,ee)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Wv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Wv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Ui(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Gv(n,i.alternate,i),i=i.sibling}function Xs(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Mi(4,i,i.return),Xs(i);break;case 1:wr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Bv(i,i.return,a),Xs(i);break;case 27:Bl(i.stateNode);case 26:case 5:wr(i,i.return),Xs(i);break;case 22:i.memoizedState===null&&Xs(i);break;case 30:Xs(i);break;default:Xs(i)}n=n.sibling}}function Li(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,p=i,w=p.flags;switch(p.tag){case 0:case 11:case 15:Li(f,p,a),Il(4,p);break;case 1:if(Li(f,p,a),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch($){it(l,l.return,$)}if(l=p,f=l.updateQueue,f!==null){var b=l.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)Ay(M[f],b)}catch($){it(l,l.return,$)}}a&&w&64&&Vv(p),jl(p,p.return);break;case 27:qv(p);case 26:case 5:Li(f,p,a),a&&l===null&&w&4&&zv(p),jl(p,p.return);break;case 12:Li(f,p,a);break;case 13:Li(f,p,a),a&&w&4&&Kv(f,p);break;case 22:p.memoizedState===null&&Li(f,p,a),jl(p,p.return);break;case 30:break;default:Li(f,p,a)}i=i.sibling}}function Yf(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&gl(a))}function Kf(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&gl(n))}function Tr(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Xv(n,i,a,l),i=i.sibling}function Xv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Tr(n,i,a,l),f&2048&&Il(9,i);break;case 1:Tr(n,i,a,l);break;case 3:Tr(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&gl(n)));break;case 12:if(f&2048){Tr(n,i,a,l),n=i.stateNode;try{var p=i.memoizedProps,w=p.id,b=p.onPostCommit;typeof b=="function"&&b(w,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(M){it(i,i.return,M)}}else Tr(n,i,a,l);break;case 13:Tr(n,i,a,l);break;case 23:break;case 22:p=i.stateNode,w=i.alternate,i.memoizedState!==null?p._visibility&2?Tr(n,i,a,l):Dl(n,i):p._visibility&2?Tr(n,i,a,l):(p._visibility|=2,Za(n,i,a,l,(i.subtreeFlags&10256)!==0)),f&2048&&Yf(w,i);break;case 24:Tr(n,i,a,l),f&2048&&Kf(i.alternate,i);break;default:Tr(n,i,a,l)}}function Za(n,i,a,l,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var p=n,w=i,b=a,M=l,$=w.flags;switch(w.tag){case 0:case 11:case 15:Za(p,w,b,M,f),Il(8,w);break;case 23:break;case 22:var ee=w.stateNode;w.memoizedState!==null?ee._visibility&2?Za(p,w,b,M,f):Dl(p,w):(ee._visibility|=2,Za(p,w,b,M,f)),f&&$&2048&&Yf(w.alternate,w);break;case 24:Za(p,w,b,M,f),f&&$&2048&&Kf(w.alternate,w);break;default:Za(p,w,b,M,f)}i=i.sibling}}function Dl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:Dl(a,l),f&2048&&Yf(l.alternate,l);break;case 24:Dl(a,l),f&2048&&Kf(l.alternate,l);break;default:Dl(a,l)}i=i.sibling}}var kl=8192;function Ja(n){if(n.subtreeFlags&kl)for(n=n.child;n!==null;)Zv(n),n=n.sibling}function Zv(n){switch(n.tag){case 26:Ja(n),n.flags&kl&&n.memoizedState!==null&&V1(er,n.memoizedState,n.memoizedProps);break;case 5:Ja(n);break;case 3:case 4:var i=er;er=Wu(n.stateNode.containerInfo),Ja(n),er=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=kl,kl=16777216,Ja(n),kl=i):Ja(n));break;default:Ja(n)}}function Jv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Ol(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];qt=l,t_(l,n)}Jv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)e_(n),n=n.sibling}function e_(n){switch(n.tag){case 0:case 11:case 15:Ol(n),n.flags&2048&&Mi(9,n,n.return);break;case 3:Ol(n);break;case 12:Ol(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Lu(n)):Ol(n);break;default:Ol(n)}}function Lu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];qt=l,t_(l,n)}Jv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Mi(8,i,i.return),Lu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Lu(i));break;default:Lu(i)}n=n.sibling}}function t_(n,i){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:Mi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:gl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,qt=l;else e:for(a=n;qt!==null;){l=qt;var f=l.sibling,p=l.return;if($v(l),l===a){qt=null;break e}if(f!==null){f.return=p,qt=f;break e}qt=p}}}var t1={getCacheForType:function(n){var i=nn(Pt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},n1=typeof WeakMap=="function"?WeakMap:Map,Ze=0,st=null,Pe=null,ze=0,Je=0,Nn=null,Vi=!1,eo=!1,Qf=!1,ai=0,gt=0,Bi=0,Zs=0,Wf=0,$n=0,to=0,Pl=null,_n=null,Xf=!1,Zf=0,Vu=1/0,Bu=null,zi=null,Qt=0,Fi=null,no=null,ro=0,Jf=0,em=null,n_=null,Ml=0,tm=null;function In(){if((Ze&2)!==0&&ze!==0)return ze&-ze;if(Z.T!==null){var n=Ha;return n!==0?n:lm()}return bi()}function r_(){$n===0&&($n=(ze&536870912)===0||Ye?Go():536870912);var n=Gn.current;return n!==null&&(n.flags|=32),$n}function jn(n,i,a){(n===st&&(Je===2||Je===9)||n.cancelPendingCommit!==null)&&(io(n,0),qi(n,ze,$n,!1)),Lr(n,a),((Ze&2)===0||n!==st)&&(n===st&&((Ze&2)===0&&(Zs|=a),gt===4&&qi(n,ze,$n,!1)),br(n))}function i_(n,i,a){if((Ze&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&n.expiredLanes)===0||xs(n,i),f=l?s1(n,i):im(n,i,!0),p=l;do{if(f===0){eo&&!l&&qi(n,i,0,!1);break}else{if(a=n.current.alternate,p&&!r1(a)){f=im(n,i,!1),p=!1;continue}if(f===2){if(p=i,n.errorRecoveryDisabledLanes&p)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var b=n;f=Pl;var M=b.current.memoizedState.isDehydrated;if(M&&(io(b,w).flags|=256),w=im(b,w,!1),w!==2){if(Qf&&!M){b.errorRecoveryDisabledLanes|=p,Zs|=p,f=4;break e}p=_n,_n=f,p!==null&&(_n===null?_n=p:_n.push.apply(_n,p))}f=w}if(p=!1,f!==2)continue}}if(f===1){io(n,0),qi(n,i,0,!0);break}e:{switch(l=n,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:qi(l,i,$n,!Vi);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Zf+300-Pn(),10<f)){if(qi(l,i,$n,!Vi),wa(l,0,!0)!==0)break e;l.timeoutHandle=k_(s_.bind(null,l,a,_n,Bu,Xf,i,$n,Zs,to,Vi,p,2,-0,0),f);break e}s_(l,a,_n,Bu,Xf,i,$n,Zs,to,Vi,p,0,-0,0)}}break}while(!0);br(n)}function s_(n,i,a,l,f,p,w,b,M,$,ee,ie,Y,K){if(n.timeoutHandle=-1,ie=i.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(ql={stylesheets:null,count:0,unsuspend:L1},Zv(i),ie=B1(),ie!==null)){n.cancelPendingCommit=ie(d_.bind(null,n,i,p,a,l,f,w,b,M,ee,1,Y,K)),qi(n,p,w,!$);return}d_(n,i,p,a,l,f,w,b,M)}function r1(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],p=f.getSnapshot;f=f.value;try{if(!An(p(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function qi(n,i,a,l){i&=~Wf,i&=~Zs,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var p=31-tn(f),w=1<<p;l[p]=-1,f&=~w}a!==0&&lr(n,a,i)}function zu(){return(Ze&6)===0?(Ul(0),!1):!0}function nm(){if(Pe!==null){if(Je===0)var n=Pe.return;else n=Pe,Zr=$s=null,_f(n),Wa=null,Rl=0,n=Pe;for(;n!==null;)Lv(n.alternate,n),n=n.return;Pe=null}}function io(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,w1(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),nm(),st=n,Pe=a=Qr(n.current,null),ze=i,Je=0,Nn=null,Vi=!1,eo=xs(n,i),Qf=!1,to=$n=Wf=Zs=Bi=gt=0,_n=Pl=null,Xf=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-tn(l),p=1<<f;i|=n[f],l&=~p}return ai=i,cu(),a}function a_(n,i){De=null,Z.H=Cu,i===vl||i===vu?(i=by(),Je=3):i===Ey?(i=by(),Je=4):Je=i===xv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Nn=i,Pe===null&&(gt=1,ku(n,zn(i,n.current)))}function o_(){var n=Z.H;return Z.H=Cu,n===null?Cu:n}function l_(){var n=Z.A;return Z.A=t1,n}function rm(){gt=4,Vi||(ze&4194048)!==ze&&Gn.current!==null||(eo=!0),(Bi&134217727)===0&&(Zs&134217727)===0||st===null||qi(st,ze,$n,!1)}function im(n,i,a){var l=Ze;Ze|=2;var f=o_(),p=l_();(st!==n||ze!==i)&&(Bu=null,io(n,i)),i=!1;var w=gt;e:do try{if(Je!==0&&Pe!==null){var b=Pe,M=Nn;switch(Je){case 8:nm(),w=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(i=!0);var $=Je;if(Je=0,Nn=null,so(n,b,M,$),a&&eo){w=0;break e}break;default:$=Je,Je=0,Nn=null,so(n,b,M,$)}}i1(),w=gt;break}catch(ee){a_(n,ee)}while(!0);return i&&n.shellSuspendCounter++,Zr=$s=null,Ze=l,Z.H=f,Z.A=p,Pe===null&&(st=null,ze=0,cu()),w}function i1(){for(;Pe!==null;)c_(Pe)}function s1(n,i){var a=Ze;Ze|=2;var l=o_(),f=l_();st!==n||ze!==i?(Bu=null,Vu=Pn()+500,io(n,i)):eo=xs(n,i);e:do try{if(Je!==0&&Pe!==null){i=Pe;var p=Nn;t:switch(Je){case 1:Je=0,Nn=null,so(n,i,p,1);break;case 2:case 9:if(wy(p)){Je=0,Nn=null,u_(i);break}i=function(){Je!==2&&Je!==9||st!==n||(Je=7),br(n)},p.then(i,i);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:wy(p)?(Je=0,Nn=null,u_(i)):(Je=0,Nn=null,so(n,i,p,7));break;case 5:var w=null;switch(Pe.tag){case 26:w=Pe.memoizedState;case 5:case 27:var b=Pe;if(!w||G_(w)){Je=0,Nn=null;var M=b.sibling;if(M!==null)Pe=M;else{var $=b.return;$!==null?(Pe=$,Fu($)):Pe=null}break t}}Je=0,Nn=null,so(n,i,p,5);break;case 6:Je=0,Nn=null,so(n,i,p,6);break;case 8:nm(),gt=6;break e;default:throw Error(s(462))}}a1();break}catch(ee){a_(n,ee)}while(!0);return Zr=$s=null,Z.H=l,Z.A=f,Ze=a,Pe!==null?0:(st=null,ze=0,cu(),gt)}function a1(){for(;Pe!==null&&!zo();)c_(Pe)}function c_(n){var i=Mv(n.alternate,n,ai);n.memoizedProps=n.pendingProps,i===null?Fu(n):Pe=i}function u_(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=Iv(a,i,i.pendingProps,i.type,void 0,ze);break;case 11:i=Iv(a,i,i.pendingProps,i.type.render,i.ref,ze);break;case 5:_f(i);default:Lv(a,i),i=Pe=hy(i,ai),i=Mv(a,i,ai)}n.memoizedProps=n.pendingProps,i===null?Fu(n):Pe=i}function so(n,i,a,l){Zr=$s=null,_f(i),Wa=null,Rl=0;var f=i.return;try{if(Qx(n,f,i,a,ze)){gt=1,ku(n,zn(a,n.current)),Pe=null;return}}catch(p){if(f!==null)throw Pe=f,p;gt=1,ku(n,zn(a,n.current)),Pe=null;return}i.flags&32768?(Ye||l===1?n=!0:eo||(ze&536870912)!==0?n=!1:(Vi=n=!0,(l===2||l===9||l===3||l===6)&&(l=Gn.current,l!==null&&l.tag===13&&(l.flags|=16384))),h_(i,n)):Fu(i)}function Fu(n){var i=n;do{if((i.flags&32768)!==0){h_(i,Vi);return}n=i.return;var a=Xx(i.alternate,i,ai);if(a!==null){Pe=a;return}if(i=i.sibling,i!==null){Pe=i;return}Pe=i=n}while(i!==null);gt===0&&(gt=5)}function h_(n,i){do{var a=Zx(n.alternate,n);if(a!==null){a.flags&=32767,Pe=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Pe=n;return}Pe=n=a}while(n!==null);gt=6,Pe=null}function d_(n,i,a,l,f,p,w,b,M){n.cancelPendingCommit=null;do qu();while(Qt!==0);if((Ze&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(p=i.lanes|i.childLanes,p|=Yd,Yo(n,a,p,w,b,M),n===st&&(Pe=st=null,ze=0),no=i,Fi=n,ro=a,Jf=p,em=f,n_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,u1(Es,function(){return y_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null,f=ce.p,ce.p=2,w=Ze,Ze|=4;try{Jx(n,i,a)}finally{Ze=w,ce.p=f,Z.T=l}}Qt=1,f_(),m_(),p_()}}function f_(){if(Qt===1){Qt=0;var n=Fi,i=no,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Z.T,Z.T=null;var l=ce.p;ce.p=2;var f=Ze;Ze|=4;try{Qv(i,n);var p=gm,w=ty(n.containerInfo),b=p.focusedElem,M=p.selectionRange;if(w!==b&&b&&b.ownerDocument&&ey(b.ownerDocument.documentElement,b)){if(M!==null&&Fd(b)){var $=M.start,ee=M.end;if(ee===void 0&&(ee=$),"selectionStart"in b)b.selectionStart=$,b.selectionEnd=Math.min(ee,b.value.length);else{var ie=b.ownerDocument||document,Y=ie&&ie.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),Re=b.textContent.length,we=Math.min(M.start,Re),rt=M.end===void 0?we:Math.min(M.end,Re);!K.extend&&we>rt&&(w=rt,rt=we,we=w);var F=Jg(b,we),B=Jg(b,rt);if(F&&B&&(K.rangeCount!==1||K.anchorNode!==F.node||K.anchorOffset!==F.offset||K.focusNode!==B.node||K.focusOffset!==B.offset)){var G=ie.createRange();G.setStart(F.node,F.offset),K.removeAllRanges(),we>rt?(K.addRange(G),K.extend(B.node,B.offset)):(G.setEnd(B.node,B.offset),K.addRange(G))}}}}for(ie=[],K=b;K=K.parentNode;)K.nodeType===1&&ie.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ie.length;b++){var te=ie[b];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}th=!!pm,gm=pm=null}finally{Ze=f,ce.p=l,Z.T=a}}n.current=i,Qt=2}}function m_(){if(Qt===2){Qt=0;var n=Fi,i=no,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Z.T,Z.T=null;var l=ce.p;ce.p=2;var f=Ze;Ze|=4;try{Gv(n,i.alternate,i)}finally{Ze=f,ce.p=l,Z.T=a}}Qt=3}}function p_(){if(Qt===4||Qt===3){Qt=0,Lc();var n=Fi,i=no,a=ro,l=n_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Qt=5:(Qt=0,no=Fi=null,g_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(zi=null),Ta(a),i=i.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(mt,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Z.T,f=ce.p,ce.p=2,Z.T=null;try{for(var p=n.onRecoverableError,w=0;w<l.length;w++){var b=l[w];p(b.value,{componentStack:b.stack})}}finally{Z.T=i,ce.p=f}}(ro&3)!==0&&qu(),br(n),f=n.pendingLanes,(a&4194090)!==0&&(f&42)!==0?n===tm?Ml++:(Ml=0,tm=n):Ml=0,Ul(0)}}function g_(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,gl(i)))}function qu(n){return f_(),m_(),p_(),y_()}function y_(){if(Qt!==5)return!1;var n=Fi,i=Jf;Jf=0;var a=Ta(ro),l=Z.T,f=ce.p;try{ce.p=32>a?32:a,Z.T=null,a=em,em=null;var p=Fi,w=ro;if(Qt=0,no=Fi=null,ro=0,(Ze&6)!==0)throw Error(s(331));var b=Ze;if(Ze|=4,e_(p.current),Xv(p,p.current,w,a),Ze=b,Ul(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(mt,p)}catch{}return!0}finally{ce.p=f,Z.T=l,g_(n,i)}}function v_(n,i,a){i=zn(a,i),i=kf(n.stateNode,i,2),n=Di(n,i,2),n!==null&&(Lr(n,2),br(n))}function it(n,i,a){if(n.tag===3)v_(n,n,a);else for(;i!==null;){if(i.tag===3){v_(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(zi===null||!zi.has(l))){n=zn(a,n),a=Tv(2),l=Di(i,a,2),l!==null&&(bv(a,l,i,n),Lr(l,2),br(l));break}}i=i.return}}function sm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new n1;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Qf=!0,f.add(a),n=o1.bind(null,n,i,a),i.then(n,n))}function o1(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,st===n&&(ze&a)===a&&(gt===4||gt===3&&(ze&62914560)===ze&&300>Pn()-Zf?(Ze&2)===0&&io(n,0):Wf|=a,to===ze&&(to=0)),br(n)}function __(n,i){i===0&&(i=$o()),n=Ba(n,i),n!==null&&(Lr(n,i),br(n))}function l1(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),__(n,a)}function c1(n,i){var a=0;switch(n.tag){case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),__(n,a)}function u1(n,i){return en(n,i)}var Hu=null,ao=null,am=!1,Gu=!1,om=!1,Js=0;function br(n){n!==ao&&n.next===null&&(ao===null?Hu=ao=n:ao=ao.next=n),Gu=!0,am||(am=!0,d1())}function Ul(n,i){if(!om&&Gu){om=!0;do for(var a=!1,l=Hu;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var w=l.suspendedLanes,b=l.pingedLanes;p=(1<<31-tn(42|n)+1)-1,p&=f&~(w&~b),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,b_(l,p))}else p=ze,p=wa(l,l===st?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||xs(l,p)||(a=!0,b_(l,p));l=l.next}while(a);om=!1}}function h1(){E_()}function E_(){Gu=am=!1;var n=0;Js!==0&&(E1()&&(n=Js),Js=0);for(var i=Pn(),a=null,l=Hu;l!==null;){var f=l.next,p=w_(l,i);p===0?(l.next=null,a===null?Hu=f:a.next=f,f===null&&(ao=a)):(a=l,(n!==0||(p&3)!==0)&&(Gu=!0)),l=f}Ul(n)}function w_(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var w=31-tn(p),b=1<<w,M=f[w];M===-1?((b&a)===0||(b&l)!==0)&&(f[w]=Ho(b,i)):M<=i&&(n.expiredLanes|=b),p&=~b}if(i=st,a=ze,a=wa(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(Je===2||Je===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&_s(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||xs(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&_s(l),Ta(a)){case 2:case 8:a=_a;break;case 32:a=Es;break;case 268435456:a=Ea;break;default:a=Es}return l=T_.bind(null,n),a=en(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&_s(l),n.callbackPriority=2,n.callbackNode=null,2}function T_(n,i){if(Qt!==0&&Qt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(qu()&&n.callbackNode!==a)return null;var l=ze;return l=wa(n,n===st?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(i_(n,l,i),w_(n,Pn()),n.callbackNode!=null&&n.callbackNode===a?T_.bind(null,n):null)}function b_(n,i){if(qu())return null;i_(n,i,!0)}function d1(){T1(function(){(Ze&6)!==0?en(Fo,h1):E_()})}function lm(){return Js===0&&(Js=Go()),Js}function x_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ca(""+n)}function A_(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function f1(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var p=x_((f[St]||null).action),w=l.submitter;w&&(i=(i=w[St]||null)?x_(i.formAction):w.getAttribute("formAction"),i!==null&&(p=i,w=null));var b=new Na("action","action",null,l,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Js!==0){var M=w?A_(f,w):new FormData(f);Cf(a,{pending:!0,data:M,method:f.method,action:p},null,M)}}else typeof p=="function"&&(b.preventDefault(),M=w?A_(f,w):new FormData(f),Cf(a,{pending:!0,data:M,method:f.method,action:p},p,M))},currentTarget:f}]})}}for(var cm=0;cm<$d.length;cm++){var um=$d[cm],m1=um.toLowerCase(),p1=um[0].toUpperCase()+um.slice(1);Jn(m1,"on"+p1)}Jn(iy,"onAnimationEnd"),Jn(sy,"onAnimationIteration"),Jn(ay,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(Dx,"onTransitionRun"),Jn(kx,"onTransitionStart"),Jn(Ox,"onTransitionCancel"),Jn(oy,"onTransitionEnd"),Br("onMouseEnter",["mouseout","mouseover"]),Br("onMouseLeave",["mouseout","mouseover"]),Br("onPointerEnter",["pointerout","pointerover"]),Br("onPointerLeave",["pointerout","pointerover"]),Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function S_(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var p=void 0;if(i)for(var w=l.length-1;0<=w;w--){var b=l[w],M=b.instance,$=b.currentTarget;if(b=b.listener,M!==p&&f.isPropagationStopped())break e;p=b,f.currentTarget=$;try{p(f)}catch(ee){Du(ee)}f.currentTarget=null,p=M}else for(w=0;w<l.length;w++){if(b=l[w],M=b.instance,$=b.currentTarget,b=b.listener,M!==p&&f.isPropagationStopped())break e;p=b,f.currentTarget=$;try{p(f)}catch(ee){Du(ee)}f.currentTarget=null,p=M}}}}function Me(n,i){var a=i[Qo];a===void 0&&(a=i[Qo]=new Set);var l=n+"__bubble";a.has(l)||(R_(i,n,2,!1),a.add(l))}function hm(n,i,a){var l=0;i&&(l|=4),R_(a,n,l,i)}var $u="_reactListening"+Math.random().toString(36).slice(2);function dm(n){if(!n[$u]){n[$u]=!0,Wo.forEach(function(a){a!=="selectionchange"&&(g1.has(a)||hm(a,!1,n),hm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[$u]||(i[$u]=!0,hm("selectionchange",!1,i))}}function R_(n,i,a,l){switch(X_(i)){case 2:var f=q1;break;case 8:f=H1;break;default:f=Sm}a=f.bind(null,i,a,n),f=void 0,!Vn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function fm(n,i,a,l,f){var p=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var b=l.stateNode.containerInfo;if(b===f)break;if(w===4)for(w=l.return;w!==null;){var M=w.tag;if((M===3||M===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;b!==null;){if(w=Vr(b),w===null)return;if(M=w.tag,M===5||M===6||M===26||M===27){l=p=w;continue e}b=b.parentNode}}l=l.return}Kc(function(){var $=p,ee=Ln(a),ie=[];e:{var Y=ly.get(n);if(Y!==void 0){var K=Na,Re=n;switch(n){case"keypress":if(mr(a)===0)break e;case"keydown":case"keyup":K=Pa;break;case"focusin":Re="focus",K=Da;break;case"focusout":Re="blur",K=Da;break;case"beforeblur":case"afterblur":K=Da;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Ld;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=nu;break;case iy:case sy:case ay:K=ka;break;case oy:K=iu;break;case"scroll":case"scrollend":K=Qc;break;case"wheel":K=Ma;break;case"copy":case"cut":case"paste":K=Oa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=ll;break;case"toggle":case"beforetoggle":K=au}var we=(i&4)!==0,rt=!we&&(n==="scroll"||n==="scrollend"),F=we?Y!==null?Y+"Capture":null:Y;we=[];for(var B=$,G;B!==null;){var te=B;if(G=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||G===null||F===null||(te=Ds(B,F),te!=null&&we.push(Vl(B,te,G))),rt)break;B=B.return}0<we.length&&(Y=new K(Y,Re,null,a,ee),ie.push({event:Y,listeners:we}))}}if((i&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",K=n==="mouseout"||n==="pointerout",Y&&a!==qr&&(Re=a.relatedTarget||a.fromElement)&&(Vr(Re)||Re[Mn]))break e;if((K||Y)&&(Y=ee.window===ee?ee:(Y=ee.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(Re=a.relatedTarget||a.toElement,K=$,Re=Re?Vr(Re):null,Re!==null&&(rt=c(Re),we=Re.tag,Re!==rt||we!==5&&we!==27&&we!==6)&&(Re=null)):(K=null,Re=$),K!==Re)){if(we=Bn,te="onMouseLeave",F="onMouseEnter",B="mouse",(n==="pointerout"||n==="pointerover")&&(we=ll,te="onPointerLeave",F="onPointerEnter",B="pointer"),rt=K==null?Y:ur(K),G=Re==null?Y:ur(Re),Y=new we(te,B+"leave",K,a,ee),Y.target=rt,Y.relatedTarget=G,te=null,Vr(ee)===$&&(we=new we(F,B+"enter",Re,a,ee),we.target=G,we.relatedTarget=rt,te=we),rt=te,K&&Re)t:{for(we=K,F=Re,B=0,G=we;G;G=oo(G))B++;for(G=0,te=F;te;te=oo(te))G++;for(;0<B-G;)we=oo(we),B--;for(;0<G-B;)F=oo(F),G--;for(;B--;){if(we===F||F!==null&&we===F.alternate)break t;we=oo(we),F=oo(F)}we=null}else we=null;K!==null&&C_(ie,Y,K,we,!1),Re!==null&&rt!==null&&C_(ie,rt,Re,we,!0)}}e:{if(Y=$?ur($):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var ge=Yg;else if(Ot(Y))if(Kg)ge=Nx;else{ge=Rx;var Oe=Sx}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?$&&tl($.elementType)&&(ge=Yg):ge=Cx;if(ge&&(ge=ge(n,$))){Kr(ie,ge,a,ee);break e}Oe&&Oe(n,Y,$),n==="focusout"&&$&&Y.type==="number"&&$.memoizedProps.value!=null&&Ri(Y,"number",Y.value)}switch(Oe=$?ur($):window,n){case"focusin":(Ot(Oe)||Oe.contentEditable==="true")&&(Ua=Oe,qd=$,hl=null);break;case"focusout":hl=qd=Ua=null;break;case"mousedown":Hd=!0;break;case"contextmenu":case"mouseup":case"dragend":Hd=!1,ny(ie,a,ee);break;case"selectionchange":if(jx)break;case"keydown":case"keyup":ny(ie,a,ee)}var ye;if(yr)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Ve?W(n,a)&&(Te="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(E&&a.locale!=="ko"&&(Ve||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Ve&&(ye=rl()):(fr=ee,Ci="value"in fr?fr.value:fr.textContent,Ve=!0)),Oe=Yu($,Te),0<Oe.length&&(Te=new al(Te,n,null,a,ee),ie.push({event:Te,listeners:Oe}),ye?Te.data=ye:(ye=ue(a),ye!==null&&(Te.data=ye)))),(ye=v?kt(n,a):Be(n,a))&&(Te=Yu($,"onBeforeInput"),0<Te.length&&(Oe=new al("onBeforeInput","beforeinput",null,a,ee),ie.push({event:Oe,listeners:Te}),Oe.data=ye)),f1(ie,n,$,a,ee)}S_(ie,i)})}function Vl(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Yu(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Ds(n,a),f!=null&&l.unshift(Vl(n,f,p)),f=Ds(n,i),f!=null&&l.push(Vl(n,f,p))),n.tag===3)return l;n=n.return}return[]}function oo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function C_(n,i,a,l,f){for(var p=i._reactName,w=[];a!==null&&a!==l;){var b=a,M=b.alternate,$=b.stateNode;if(b=b.tag,M!==null&&M===l)break;b!==5&&b!==26&&b!==27||$===null||(M=$,f?($=Ds(a,p),$!=null&&w.unshift(Vl(a,$,M))):f||($=Ds(a,p),$!=null&&w.push(Vl(a,$,M)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var y1=/\r\n?/g,v1=/\u0000|\uFFFD/g;function N_(n){return(typeof n=="string"?n:""+n).replace(y1,`
`).replace(v1,"")}function I_(n,i){return i=N_(i),N_(n)===i}function Ku(){}function nt(n,i,a,l,f,p){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Un(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Un(n,""+l);break;case"className":hr(n,"class",l);break;case"tabIndex":hr(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":hr(n,a,l);break;case"style":el(n,l,p);break;case"data":if(i!=="object"){hr(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ca(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(i!=="input"&&nt(n,i,"name",f.name,f,null),nt(n,i,"formEncType",f.formEncType,f,null),nt(n,i,"formMethod",f.formMethod,f,null),nt(n,i,"formTarget",f.formTarget,f,null)):(nt(n,i,"encType",f.encType,f,null),nt(n,i,"method",f.method,f,null),nt(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ca(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Ku);break;case"onScroll":l!=null&&Me("scroll",n);break;case"onScrollEnd":l!=null&&Me("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ca(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Me("beforetoggle",n),Me("toggle",n),Si(n,"popover",l);break;case"xlinkActuate":$t(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":$t(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":$t(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":$t(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":$t(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":$t(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":$t(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":$t(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":$t(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Si(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Md.get(a)||a,Si(n,a,l))}}function mm(n,i,a,l,f,p){switch(a){case"style":el(n,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Un(n,l):(typeof l=="number"||typeof l=="bigint")&&Un(n,""+l);break;case"onScroll":l!=null&&Me("scroll",n);break;case"onScrollEnd":l!=null&&Me("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Ku);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ba.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),p=n[St]||null,p=p!=null?p[a]:null,typeof p=="function"&&n.removeEventListener(i,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Si(n,a,l)}}}function Wt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",n),Me("load",n);var l=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var w=a[p];if(w!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(n,i,p,w,a,null)}}f&&nt(n,i,"srcSet",a.srcSet,a,null),l&&nt(n,i,"src",a.src,a,null);return;case"input":Me("invalid",n);var b=p=w=f=null,M=null,$=null;for(l in a)if(a.hasOwnProperty(l)){var ee=a[l];if(ee!=null)switch(l){case"name":f=ee;break;case"type":w=ee;break;case"checked":M=ee;break;case"defaultChecked":$=ee;break;case"value":p=ee;break;case"defaultValue":b=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,i));break;default:nt(n,i,l,ee,a,null)}}Ns(n,p,b,M,$,w,f,!1),Ra(n);return;case"select":Me("invalid",n),l=w=p=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":p=b;break;case"defaultValue":w=b;break;case"multiple":l=b;default:nt(n,i,f,b,a,null)}i=p,a=w,n.multiple=!!l,i!=null?Fr(n,!!l,i,!1):a!=null&&Fr(n,!!l,a,!0);return;case"textarea":Me("invalid",n),p=f=l=null;for(w in a)if(a.hasOwnProperty(w)&&(b=a[w],b!=null))switch(w){case"value":l=b;break;case"defaultValue":f=b;break;case"children":p=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:nt(n,i,w,b,a,null)}Is(n,l,f,p),Ra(n);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:nt(n,i,M,l,a,null)}return;case"dialog":Me("beforetoggle",n),Me("toggle",n),Me("cancel",n),Me("close",n);break;case"iframe":case"object":Me("load",n);break;case"video":case"audio":for(l=0;l<Ll.length;l++)Me(Ll[l],n);break;case"image":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"embed":case"source":case"link":Me("error",n),Me("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(l=a[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(n,i,$,l,a,null)}return;default:if(tl(i)){for(ee in a)a.hasOwnProperty(ee)&&(l=a[ee],l!==void 0&&mm(n,i,ee,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&nt(n,i,b,l,a,null))}function _1(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,w=null,b=null,M=null,$=null,ee=null;for(K in a){var ie=a[K];if(a.hasOwnProperty(K)&&ie!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":M=ie;default:l.hasOwnProperty(K)||nt(n,i,K,null,l,ie)}}for(var Y in l){var K=l[Y];if(ie=a[Y],l.hasOwnProperty(Y)&&(K!=null||ie!=null))switch(Y){case"type":p=K;break;case"name":f=K;break;case"checked":$=K;break;case"defaultChecked":ee=K;break;case"value":w=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:K!==ie&&nt(n,i,Y,K,l,ie)}}xn(n,w,b,M,$,ee,p,f);return;case"select":K=w=b=Y=null;for(p in a)if(M=a[p],a.hasOwnProperty(p)&&M!=null)switch(p){case"value":break;case"multiple":K=M;default:l.hasOwnProperty(p)||nt(n,i,p,null,l,M)}for(f in l)if(p=l[f],M=a[f],l.hasOwnProperty(f)&&(p!=null||M!=null))switch(f){case"value":Y=p;break;case"defaultValue":b=p;break;case"multiple":w=p;default:p!==M&&nt(n,i,f,p,l,M)}i=b,a=w,l=K,Y!=null?Fr(n,!!a,Y,!1):!!l!=!!a&&(i!=null?Fr(n,!!a,i,!0):Fr(n,!!a,a?[]:"",!1));return;case"textarea":K=Y=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:nt(n,i,b,null,l,f)}for(w in l)if(f=l[w],p=a[w],l.hasOwnProperty(w)&&(f!=null||p!=null))switch(w){case"value":Y=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&nt(n,i,w,f,l,p)}et(n,Y,K);return;case"option":for(var Re in a)if(Y=a[Re],a.hasOwnProperty(Re)&&Y!=null&&!l.hasOwnProperty(Re))switch(Re){case"selected":n.selected=!1;break;default:nt(n,i,Re,null,l,Y)}for(M in l)if(Y=l[M],K=a[M],l.hasOwnProperty(M)&&Y!==K&&(Y!=null||K!=null))switch(M){case"selected":n.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:nt(n,i,M,Y,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)Y=a[we],a.hasOwnProperty(we)&&Y!=null&&!l.hasOwnProperty(we)&&nt(n,i,we,null,l,Y);for($ in l)if(Y=l[$],K=a[$],l.hasOwnProperty($)&&Y!==K&&(Y!=null||K!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:nt(n,i,$,Y,l,K)}return;default:if(tl(i)){for(var rt in a)Y=a[rt],a.hasOwnProperty(rt)&&Y!==void 0&&!l.hasOwnProperty(rt)&&mm(n,i,rt,void 0,l,Y);for(ee in l)Y=l[ee],K=a[ee],!l.hasOwnProperty(ee)||Y===K||Y===void 0&&K===void 0||mm(n,i,ee,Y,l,K);return}}for(var F in a)Y=a[F],a.hasOwnProperty(F)&&Y!=null&&!l.hasOwnProperty(F)&&nt(n,i,F,null,l,Y);for(ie in l)Y=l[ie],K=a[ie],!l.hasOwnProperty(ie)||Y===K||Y==null&&K==null||nt(n,i,ie,Y,l,K)}var pm=null,gm=null;function Qu(n){return n.nodeType===9?n:n.ownerDocument}function j_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function D_(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function ym(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var vm=null;function E1(){var n=window.event;return n&&n.type==="popstate"?n===vm?!1:(vm=n,!0):(vm=null,!1)}var k_=typeof setTimeout=="function"?setTimeout:void 0,w1=typeof clearTimeout=="function"?clearTimeout:void 0,O_=typeof Promise=="function"?Promise:void 0,T1=typeof queueMicrotask=="function"?queueMicrotask:typeof O_<"u"?function(n){return O_.resolve(null).then(n).catch(b1)}:k_;function b1(n){setTimeout(function(){throw n})}function Hi(n){return n==="head"}function P_(n,i){var a=i,l=0,f=0;do{var p=a.nextSibling;if(n.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<l&&8>l){a=l;var w=n.ownerDocument;if(a&1&&Bl(w.documentElement),a&2&&Bl(w.body),a&4)for(a=w.head,Bl(a),w=a.firstChild;w;){var b=w.nextSibling,M=w.nodeName;w[As]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&w.rel.toLowerCase()==="stylesheet"||a.removeChild(w),w=b}}if(f===0){n.removeChild(p),Kl(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=p}while(a);Kl(i)}function _m(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":_m(a),Ai(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function x1(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[As])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=tr(n.nextSibling),n===null)break}return null}function A1(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=tr(n.nextSibling),n===null))return null;return n}function Em(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function S1(n,i){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function tr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var wm=null;function M_(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function U_(n,i,a){switch(i=Qu(a),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Bl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ai(n)}var Yn=new Map,L_=new Set;function Wu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var oi=ce.d;ce.d={f:R1,r:C1,D:N1,C:I1,L:j1,m:D1,X:O1,S:k1,M:P1};function R1(){var n=oi.f(),i=zu();return n||i}function C1(n){var i=cr(n);i!==null&&i.tag===5&&i.type==="form"?iv(i):oi.r(n)}var lo=typeof document>"u"?null:document;function V_(n,i,a){var l=lo;if(l&&typeof i=="string"&&i){var f=Rt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),L_.has(f)||(L_.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Wt(i,"link",n),wt(i),l.head.appendChild(i)))}}function N1(n){oi.D(n),V_("dns-prefetch",n,null)}function I1(n,i){oi.C(n,i),V_("preconnect",n,i)}function j1(n,i,a){oi.L(n,i,a);var l=lo;if(l&&n&&i){var f='link[rel="preload"][as="'+Rt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Rt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Rt(a.imageSizes)+'"]')):f+='[href="'+Rt(n)+'"]';var p=f;switch(i){case"style":p=co(n);break;case"script":p=uo(n)}Yn.has(p)||(n=_({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Yn.set(p,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(zl(p))||i==="script"&&l.querySelector(Fl(p))||(i=l.createElement("link"),Wt(i,"link",n),wt(i),l.head.appendChild(i)))}}function D1(n,i){oi.m(n,i);var a=lo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Rt(l)+'"][href="'+Rt(n)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=uo(n)}if(!Yn.has(p)&&(n=_({rel:"modulepreload",href:n},i),Yn.set(p,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fl(p)))return}l=a.createElement("link"),Wt(l,"link",n),wt(l),a.head.appendChild(l)}}}function k1(n,i,a){oi.S(n,i,a);var l=lo;if(l&&n){var f=un(l).hoistableStyles,p=co(n);i=i||"default";var w=f.get(p);if(!w){var b={loading:0,preload:null};if(w=l.querySelector(zl(p)))b.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Yn.get(p))&&Tm(n,a);var M=w=l.createElement("link");wt(M),Wt(M,"link",n),M._p=new Promise(function($,ee){M.onload=$,M.onerror=ee}),M.addEventListener("load",function(){b.loading|=1}),M.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Xu(w,i,l)}w={type:"stylesheet",instance:w,count:1,state:b},f.set(p,w)}}}function O1(n,i){oi.X(n,i);var a=lo;if(a&&n){var l=un(a).hoistableScripts,f=uo(n),p=l.get(f);p||(p=a.querySelector(Fl(f)),p||(n=_({src:n,async:!0},i),(i=Yn.get(f))&&bm(n,i),p=a.createElement("script"),wt(p),Wt(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function P1(n,i){oi.M(n,i);var a=lo;if(a&&n){var l=un(a).hoistableScripts,f=uo(n),p=l.get(f);p||(p=a.querySelector(Fl(f)),p||(n=_({src:n,async:!0,type:"module"},i),(i=Yn.get(f))&&bm(n,i),p=a.createElement("script"),wt(p),Wt(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function B_(n,i,a,l){var f=(f=be.current)?Wu(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=co(a.href),a=un(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=co(a.href);var p=un(f).hoistableStyles,w=p.get(n);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,w),(p=f.querySelector(zl(n)))&&!p._p&&(w.instance=p,w.state.loading=5),Yn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(n,a),p||M1(f,n,a,w.state))),i&&l===null)throw Error(s(528,""));return w}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=uo(a),a=un(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function co(n){return'href="'+Rt(n)+'"'}function zl(n){return'link[rel="stylesheet"]['+n+"]"}function z_(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function M1(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Wt(i,"link",a),wt(i),n.head.appendChild(i))}function uo(n){return'[src="'+Rt(n)+'"]'}function Fl(n){return"script[async]"+n}function F_(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+Rt(a.href)+'"]');if(l)return i.instance=l,wt(l),l;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),wt(l),Wt(l,"style",f),Xu(l,a.precedence,n),i.instance=l;case"stylesheet":f=co(a.href);var p=n.querySelector(zl(f));if(p)return i.state.loading|=4,i.instance=p,wt(p),p;l=z_(a),(f=Yn.get(f))&&Tm(l,f),p=(n.ownerDocument||n).createElement("link"),wt(p);var w=p;return w._p=new Promise(function(b,M){w.onload=b,w.onerror=M}),Wt(p,"link",l),i.state.loading|=4,Xu(p,a.precedence,n),i.instance=p;case"script":return p=uo(a.src),(f=n.querySelector(Fl(p)))?(i.instance=f,wt(f),f):(l=a,(f=Yn.get(p))&&(l=_({},a),bm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),wt(f),Wt(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Xu(l,a.precedence,n));return i.instance}function Xu(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,w=0;w<l.length;w++){var b=l[w];if(b.dataset.precedence===i)p=b;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function Tm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function bm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Zu=null;function q_(n,i,a){if(Zu===null){var l=new Map,f=Zu=new Map;f.set(a,l)}else f=Zu,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var p=a[f];if(!(p[As]||p[Dt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(i)||"";w=n+w;var b=l.get(w);b?b.push(p):l.set(w,[p])}}return l}function H_(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function U1(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function G_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var ql=null;function L1(){}function V1(n,i,a){if(ql===null)throw Error(s(475));var l=ql;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=co(a.href),p=n.querySelector(zl(f));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=Ju.bind(l),n.then(l,l)),i.state.loading|=4,i.instance=p,wt(p);return}p=n.ownerDocument||n,a=z_(a),(f=Yn.get(f))&&Tm(a,f),p=p.createElement("link"),wt(p);var w=p;w._p=new Promise(function(b,M){w.onload=b,w.onerror=M}),Wt(p,"link",a),i.instance=p}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Ju.bind(l),n.addEventListener("load",i),n.addEventListener("error",i))}}function B1(){if(ql===null)throw Error(s(475));var n=ql;return n.stylesheets&&n.count===0&&xm(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&xm(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Ju(){if(this.count--,this.count===0){if(this.stylesheets)xm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var eh=null;function xm(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,eh=new Map,i.forEach(z1,n),eh=null,Ju.call(n))}function z1(n,i){if(!(i.state.loading&4)){var a=eh.get(n);if(a)var l=a.get(null);else{a=new Map,eh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var w=f[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(a.set(w.dataset.precedence,w),l=w)}l&&a.set(null,l)}f=i.instance,w=f.getAttribute("data-precedence"),p=a.get(w)||l,p===l&&a.set(null,f),a.set(w,f),this.count++,l=Ju.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var Hl={$$typeof:Q,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function F1(n,i,a,l,f,p,w,b){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function $_(n,i,a,l,f,p,w,b,M,$,ee,ie){return n=new F1(n,i,a,w,b,M,$,ie),i=1,p===!0&&(i|=24),p=Sn(3,null,null,i),n.current=p,p.stateNode=n,i=sf(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:i},cf(p),n}function Y_(n){return n?(n=za,n):za}function K_(n,i,a,l,f,p){f=Y_(f),l.context===null?l.context=f:l.pendingContext=f,l=ji(i),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=Di(n,l,i),a!==null&&(jn(a,n,i),El(a,n,i))}function Q_(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Am(n,i){Q_(n,i),(n=n.alternate)&&Q_(n,i)}function W_(n){if(n.tag===13){var i=Ba(n,67108864);i!==null&&jn(i,n,67108864),Am(n,67108864)}}var th=!0;function q1(n,i,a,l){var f=Z.T;Z.T=null;var p=ce.p;try{ce.p=2,Sm(n,i,a,l)}finally{ce.p=p,Z.T=f}}function H1(n,i,a,l){var f=Z.T;Z.T=null;var p=ce.p;try{ce.p=8,Sm(n,i,a,l)}finally{ce.p=p,Z.T=f}}function Sm(n,i,a,l){if(th){var f=Rm(l);if(f===null)fm(n,i,l,nh,a),Z_(n,l);else if($1(f,n,i,a,l))l.stopPropagation();else if(Z_(n,l),i&4&&-1<G1.indexOf(n)){for(;f!==null;){var p=cr(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=Wn(p.pendingLanes);if(w!==0){var b=p;for(b.pendingLanes|=2,b.entangledLanes|=2;w;){var M=1<<31-tn(w);b.entanglements[1]|=M,w&=~M}br(p),(Ze&6)===0&&(Vu=Pn()+500,Ul(0))}}break;case 13:b=Ba(p,2),b!==null&&jn(b,p,2),zu(),Am(p,2)}if(p=Rm(l),p===null&&fm(n,i,l,nh,a),p===f)break;f=p}f!==null&&l.stopPropagation()}else fm(n,i,l,null,a)}}function Rm(n){return n=Ln(n),Cm(n)}var nh=null;function Cm(n){if(nh=null,n=Vr(n),n!==null){var i=c(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=d(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return nh=n,null}function X_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Id()){case Fo:return 2;case _a:return 8;case Es:case jd:return 32;case Ea:return 268435456;default:return 32}default:return 32}}var Nm=!1,Gi=null,$i=null,Yi=null,Gl=new Map,$l=new Map,Ki=[],G1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Z_(n,i){switch(n){case"focusin":case"focusout":Gi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":Gl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(i.pointerId)}}function Yl(n,i,a,l,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},i!==null&&(i=cr(i),i!==null&&W_(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function $1(n,i,a,l,f){switch(i){case"focusin":return Gi=Yl(Gi,n,i,a,l,f),!0;case"dragenter":return $i=Yl($i,n,i,a,l,f),!0;case"mouseover":return Yi=Yl(Yi,n,i,a,l,f),!0;case"pointerover":var p=f.pointerId;return Gl.set(p,Yl(Gl.get(p)||null,n,i,a,l,f)),!0;case"gotpointercapture":return p=f.pointerId,$l.set(p,Yl($l.get(p)||null,n,i,a,l,f)),!0}return!1}function J_(n){var i=Vr(n.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){n.blockedOn=i,zc(n.priority,function(){if(a.tag===13){var l=In();l=Ti(l);var f=Ba(a,l);f!==null&&jn(f,a,l),Am(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Rm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);qr=l,a.target.dispatchEvent(l),qr=null}else return i=cr(a),i!==null&&W_(i),n.blockedOn=a,!1;i.shift()}return!0}function e0(n,i,a){rh(n)&&a.delete(i)}function Y1(){Nm=!1,Gi!==null&&rh(Gi)&&(Gi=null),$i!==null&&rh($i)&&($i=null),Yi!==null&&rh(Yi)&&(Yi=null),Gl.forEach(e0),$l.forEach(e0)}function ih(n,i){n.blockedOn===i&&(n.blockedOn=null,Nm||(Nm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Y1)))}var sh=null;function t0(n){sh!==n&&(sh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){sh===n&&(sh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(Cm(l||a)===null)continue;break}var p=cr(a);p!==null&&(n.splice(i,3),i-=3,Cf(p,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Kl(n){function i(M){return ih(M,n)}Gi!==null&&ih(Gi,n),$i!==null&&ih($i,n),Yi!==null&&ih(Yi,n),Gl.forEach(i),$l.forEach(i);for(var a=0;a<Ki.length;a++){var l=Ki[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Ki.length&&(a=Ki[0],a.blockedOn===null);)J_(a),a.blockedOn===null&&Ki.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],p=a[l+1],w=f[St]||null;if(typeof p=="function")w||t0(a);else if(w){var b=null;if(p&&p.hasAttribute("formAction")){if(f=p,w=p[St]||null)b=w.formAction;else if(Cm(f)!==null)continue}else b=w.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),t0(a)}}}function Im(n){this._internalRoot=n}ah.prototype.render=Im.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=In();K_(a,l,n,i,null,null)},ah.prototype.unmount=Im.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;K_(n.current,2,null,n,null,null),zu(),i[Mn]=null}};function ah(n){this._internalRoot=n}ah.prototype.unstable_scheduleHydration=function(n){if(n){var i=bi();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Ki.length&&i!==0&&i<Ki[a].priority;a++);Ki.splice(a,0,n),a===0&&J_(n)}};var n0=e.version;if(n0!=="19.1.0")throw Error(s(527,n0,"19.1.0"));ce.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=g(i),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var K1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{mt=oh.inject(K1),Xe=oh}catch{}}return Wl.createRoot=function(n,i){if(!o(n))throw Error(s(299));var a=!1,l="",f=vv,p=_v,w=Ev,b=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(b=i.unstable_transitionCallbacks)),i=$_(n,1,!1,null,null,a,l,f,p,w,b,null),n[Mn]=i.current,dm(n),new Im(i)},Wl.hydrateRoot=function(n,i,a){if(!o(n))throw Error(s(299));var l=!1,f="",p=vv,w=_v,b=Ev,M=null,$=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(w=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks),a.formState!==void 0&&($=a.formState)),i=$_(n,1,!0,i,a??null,l,f,p,w,b,M,$),i.context=Y_(null),a=i.current,l=In(),l=Ti(l),f=ji(l),f.callback=null,Di(a,f,l),a=l,i.current.lanes=a,Lr(i,a),br(i),n[Mn]=i.current,dm(n),new ah(i)},Wl.version="19.1.0",Wl}var d0;function iA(){if(d0)return km.exports;d0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),km.exports=rA(),km.exports}var sA=iA(),Xl={},f0;function aA(){if(f0)return Xl;f0=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.parse=d,Xl.serialize=y;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,c=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function d(T,D){const C=new c,j=T.length;if(j<2)return C;const k=(D==null?void 0:D.decode)||_;let z=0;do{const X=T.indexOf("=",z);if(X===-1)break;const Q=T.indexOf(";",z),ne=Q===-1?j:Q;if(X>ne){z=T.lastIndexOf(";",X-1)+1;continue}const J=m(T,z,X),oe=g(T,X,J),U=T.slice(J,oe);if(C[U]===void 0){let N=m(T,X+1,ne),A=g(T,ne,N);const S=k(T.slice(N,A));C[U]=S}z=ne+1}while(z<j);return C}function m(T,D,C){do{const j=T.charCodeAt(D);if(j!==32&&j!==9)return D}while(++D<C);return C}function g(T,D,C){for(;D>C;){const j=T.charCodeAt(--D);if(j!==32&&j!==9)return D+1}return C}function y(T,D,C){const j=(C==null?void 0:C.encode)||encodeURIComponent;if(!r.test(T))throw new TypeError(`argument name is invalid: ${T}`);const k=j(D);if(!e.test(k))throw new TypeError(`argument val is invalid: ${D}`);let z=T+"="+k;if(!C)return z;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);z+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);z+="; Domain="+C.domain}if(C.path){if(!s.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);z+="; Path="+C.path}if(C.expires){if(!x(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);z+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(z+="; HttpOnly"),C.secure&&(z+="; Secure"),C.partitioned&&(z+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return z}function _(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function x(T){return o.call(T)==="[object Date]"}return Xl}aA();var m0="popstate";function oA(r={}){function e(s,o){let{pathname:c,search:d,hash:m}=s.location;return ep("",{pathname:c,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:fc(o)}return cA(e,t,null,r)}function ht(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function sr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lA(){return Math.random().toString(36).substring(2,10)}function p0(r,e){return{usr:r.state,key:r.key,idx:e}}function ep(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Io(e):e,state:t,key:e&&e.key||s||lA()}}function fc({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Io(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function cA(r,e,t,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,d=o.history,m="POP",g=null,y=_();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function _(){return(d.state||{idx:null}).idx}function x(){m="POP";let k=_(),z=k==null?null:k-y;y=k,g&&g({action:m,location:j.location,delta:z})}function T(k,z){m="PUSH";let X=ep(j.location,k,z);y=_()+1;let Q=p0(X,y),ne=j.createHref(X);try{d.pushState(Q,"",ne)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;o.location.assign(ne)}c&&g&&g({action:m,location:j.location,delta:1})}function D(k,z){m="REPLACE";let X=ep(j.location,k,z);y=_();let Q=p0(X,y),ne=j.createHref(X);d.replaceState(Q,"",ne),c&&g&&g({action:m,location:j.location,delta:0})}function C(k){return uA(k)}let j={get action(){return m},get location(){return r(o,d)},listen(k){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(m0,x),g=k,()=>{o.removeEventListener(m0,x),g=null}},createHref(k){return e(o,k)},createURL:C,encodeLocation(k){let z=C(k);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:T,replace:D,go(k){return d.go(k)}};return j}function uA(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ht(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:fc(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function iw(r,e,t="/"){return hA(r,e,t,!1)}function hA(r,e,t,s){let o=typeof e=="string"?Io(e):e,c=mi(o.pathname||"/",t);if(c==null)return null;let d=sw(r);dA(d);let m=null;for(let g=0;m==null&&g<d.length;++g){let y=bA(c);m=wA(d[g],y,s)}return m}function sw(r,e=[],t=[],s=""){let o=(c,d,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};g.relativePath.startsWith("/")&&(ht(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length));let y=hi([s,g.relativePath]),_=t.concat(g);c.children&&c.children.length>0&&(ht(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),sw(c.children,e,_,y)),!(c.path==null&&!c.index)&&e.push({path:y,score:_A(y,c.index),routesMeta:_})};return r.forEach((c,d)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))o(c,d);else for(let g of aw(c.path))o(c,d,g)}),e}function aw(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),c=t.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let d=aw(s.join("/")),m=[];return m.push(...d.map(g=>g===""?c:[c,g].join("/"))),o&&m.push(...d),m.map(g=>r.startsWith("/")&&g===""?"/":g)}function dA(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:EA(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var fA=/^:[\w-]+$/,mA=3,pA=2,gA=1,yA=10,vA=-2,g0=r=>r==="*";function _A(r,e){let t=r.split("/"),s=t.length;return t.some(g0)&&(s+=vA),e&&(s+=pA),t.filter(o=>!g0(o)).reduce((o,c)=>o+(fA.test(c)?mA:c===""?gA:yA),s)}function EA(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function wA(r,e,t=!1){let{routesMeta:s}=r,o={},c="/",d=[];for(let m=0;m<s.length;++m){let g=s[m],y=m===s.length-1,_=c==="/"?e:e.slice(c.length)||"/",x=Nh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},_),T=g.route;if(!x&&y&&t&&!s[s.length-1].route.index&&(x=Nh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},_)),!x)return null;Object.assign(o,x.params),d.push({params:o,pathname:hi([c,x.pathname]),pathnameBase:RA(hi([c,x.pathnameBase])),route:T}),x.pathnameBase!=="/"&&(c=hi([c,x.pathnameBase]))}return d}function Nh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=TA(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((y,{paramName:_,isOptional:x},T)=>{if(_==="*"){let C=m[T]||"";d=c.slice(0,c.length-C.length).replace(/(.)\/+$/,"$1")}const D=m[T];return x&&!D?y[_]=void 0:y[_]=(D||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:r}}function TA(r,e=!1,t=!0){sr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function bA(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function mi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function xA(r,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Io(r):r;return{pathname:t?t.startsWith("/")?t:AA(t,e):e,search:CA(s),hash:NA(o)}}function AA(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Um(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SA(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ow(r){let e=SA(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function lw(r,e,t,s=!1){let o;typeof r=="string"?o=Io(r):(o={...r},ht(!o.pathname||!o.pathname.includes("?"),Um("?","pathname","search",o)),ht(!o.pathname||!o.pathname.includes("#"),Um("#","pathname","hash",o)),ht(!o.search||!o.search.includes("#"),Um("#","search","hash",o)));let c=r===""||o.pathname==="",d=c?"/":o.pathname,m;if(d==null)m=t;else{let x=e.length-1;if(!s&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),x-=1;o.pathname=T.join("/")}m=x>=0?e[x]:"/"}let g=xA(o,m),y=d&&d!=="/"&&d.endsWith("/"),_=(c||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||_)&&(g.pathname+="/"),g}var hi=r=>r.join("/").replace(/\/\/+/g,"/"),RA=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),CA=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,NA=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function IA(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var cw=["POST","PUT","PATCH","DELETE"];new Set(cw);var jA=["GET",...cw];new Set(jA);var jo=P.createContext(null);jo.displayName="DataRouter";var Xh=P.createContext(null);Xh.displayName="DataRouterState";var uw=P.createContext({isTransitioning:!1});uw.displayName="ViewTransition";var DA=P.createContext(new Map);DA.displayName="Fetchers";var kA=P.createContext(null);kA.displayName="Await";var Dr=P.createContext(null);Dr.displayName="Navigation";var xc=P.createContext(null);xc.displayName="Location";var kr=P.createContext({outlet:null,matches:[],isDataRoute:!1});kr.displayName="Route";var Dp=P.createContext(null);Dp.displayName="RouteError";function OA(r,{relative:e}={}){ht(Ac(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=P.useContext(Dr),{hash:o,pathname:c,search:d}=Sc(r,{relative:e}),m=c;return t!=="/"&&(m=c==="/"?t:hi([t,c])),s.createHref({pathname:m,search:d,hash:o})}function Ac(){return P.useContext(xc)!=null}function Or(){return ht(Ac(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(xc).location}var hw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dw(r){P.useContext(Dr).static||P.useLayoutEffect(r)}function da(){let{isDataRoute:r}=P.useContext(kr);return r?YA():PA()}function PA(){ht(Ac(),"useNavigate() may be used only in the context of a <Router> component.");let r=P.useContext(jo),{basename:e,navigator:t}=P.useContext(Dr),{matches:s}=P.useContext(kr),{pathname:o}=Or(),c=JSON.stringify(ow(s)),d=P.useRef(!1);return dw(()=>{d.current=!0}),P.useCallback((g,y={})=>{if(sr(d.current,hw),!d.current)return;if(typeof g=="number"){t.go(g);return}let _=lw(g,JSON.parse(c),o,y.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:hi([e,_.pathname])),(y.replace?t.replace:t.push)(_,y.state,y)},[e,t,c,o,r])}P.createContext(null);function kp(){let{matches:r}=P.useContext(kr),e=r[r.length-1];return e?e.params:{}}function Sc(r,{relative:e}={}){let{matches:t}=P.useContext(kr),{pathname:s}=Or(),o=JSON.stringify(ow(t));return P.useMemo(()=>lw(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function MA(r,e){return fw(r,e)}function fw(r,e,t,s){var X;ht(Ac(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:c}=P.useContext(Dr),{matches:d}=P.useContext(kr),m=d[d.length-1],g=m?m.params:{},y=m?m.pathname:"/",_=m?m.pathnameBase:"/",x=m&&m.route;{let Q=x&&x.path||"";mw(y,!x||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let T=Or(),D;if(e){let Q=typeof e=="string"?Io(e):e;ht(_==="/"||((X=Q.pathname)==null?void 0:X.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),D=Q}else D=T;let C=D.pathname||"/",j=C;if(_!=="/"){let Q=_.replace(/^\//,"").split("/");j="/"+C.replace(/^\//,"").split("/").slice(Q.length).join("/")}let k=!c&&t&&t.matches&&t.matches.length>0?t.matches:iw(r,{pathname:j});sr(x||k!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),sr(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=zA(k&&k.map(Q=>Object.assign({},Q,{params:Object.assign({},g,Q.params),pathname:hi([_,o.encodeLocation?o.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?_:hi([_,o.encodeLocation?o.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),d,t,s);return e&&z?P.createElement(xc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},z):z}function UA(){let r=$A(),e=IA(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:c},"ErrorBoundary")," or"," ",P.createElement("code",{style:c},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:o},t):null,d)}var LA=P.createElement(UA,null),VA=class extends P.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?P.createElement(kr.Provider,{value:this.props.routeContext},P.createElement(Dp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function BA({routeContext:r,match:e,children:t}){let s=P.useContext(jo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(kr.Provider,{value:r},t)}function zA(r,e=[],t=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,c=t==null?void 0:t.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);ht(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let d=!1,m=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=g),y.route.id){let{loaderData:_,errors:x}=t,T=y.route.loader&&!_.hasOwnProperty(y.route.id)&&(!x||x[y.route.id]===void 0);if(y.route.lazy||T){d=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((g,y,_)=>{let x,T=!1,D=null,C=null;t&&(x=c&&y.route.id?c[y.route.id]:void 0,D=y.route.errorElement||LA,d&&(m<0&&_===0?(mw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,C=null):m===_&&(T=!0,C=y.route.hydrateFallbackElement||null)));let j=e.concat(o.slice(0,_+1)),k=()=>{let z;return x?z=D:T?z=C:y.route.Component?z=P.createElement(y.route.Component,null):y.route.element?z=y.route.element:z=g,P.createElement(BA,{match:y,routeContext:{outlet:g,matches:j,isDataRoute:t!=null},children:z})};return t&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?P.createElement(VA,{location:t.location,revalidation:t.revalidation,component:D,error:x,children:k(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):k()},null)}function Op(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FA(r){let e=P.useContext(jo);return ht(e,Op(r)),e}function qA(r){let e=P.useContext(Xh);return ht(e,Op(r)),e}function HA(r){let e=P.useContext(kr);return ht(e,Op(r)),e}function Pp(r){let e=HA(r),t=e.matches[e.matches.length-1];return ht(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function GA(){return Pp("useRouteId")}function $A(){var s;let r=P.useContext(Dp),e=qA("useRouteError"),t=Pp("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function YA(){let{router:r}=FA("useNavigate"),e=Pp("useNavigate"),t=P.useRef(!1);return dw(()=>{t.current=!0}),P.useCallback(async(o,c={})=>{sr(t.current,hw),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...c}))},[r,e])}var y0={};function mw(r,e,t){!e&&!y0[r]&&(y0[r]=!0,sr(!1,t))}P.memo(KA);function KA({routes:r,future:e,state:t}){return fw(r,void 0,t,e)}function xt(r){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function QA({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:c=!1}){ht(!Ac(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),m=P.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof t=="string"&&(t=Io(t));let{pathname:g="/",search:y="",hash:_="",state:x=null,key:T="default"}=t,D=P.useMemo(()=>{let C=mi(g,d);return C==null?null:{location:{pathname:C,search:y,hash:_,state:x,key:T},navigationType:s}},[d,g,y,_,x,T,s]);return sr(D!=null,`<Router basename="${d}"> is not able to match the URL "${g}${y}${_}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:P.createElement(Dr.Provider,{value:m},P.createElement(xc.Provider,{children:e,value:D}))}function WA({children:r,location:e}){return MA(tp(r),e)}function tp(r,e=[]){let t=[];return P.Children.forEach(r,(s,o)=>{if(!P.isValidElement(s))return;let c=[...e,o];if(s.type===P.Fragment){t.push.apply(t,tp(s.props.children,c));return}ht(s.type===xt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=tp(s.props.children,c)),t.push(d)}),t}var yh="get",vh="application/x-www-form-urlencoded";function Zh(r){return r!=null&&typeof r.tagName=="string"}function XA(r){return Zh(r)&&r.tagName.toLowerCase()==="button"}function ZA(r){return Zh(r)&&r.tagName.toLowerCase()==="form"}function JA(r){return Zh(r)&&r.tagName.toLowerCase()==="input"}function eS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function tS(r,e){return r.button===0&&(!e||e==="_self")&&!eS(r)}function np(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,t)=>{let s=r[t];return e.concat(Array.isArray(s)?s.map(o=>[t,o]):[[t,s]])},[]))}function nS(r,e){let t=np(r);return e&&e.forEach((s,o)=>{t.has(o)||e.getAll(o).forEach(c=>{t.append(o,c)})}),t}var lh=null;function rS(){if(lh===null)try{new FormData(document.createElement("form"),0),lh=!1}catch{lh=!0}return lh}var iS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lm(r){return r!=null&&!iS.has(r)?(sr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vh}"`),null):r}function sS(r,e){let t,s,o,c,d;if(ZA(r)){let m=r.getAttribute("action");s=m?mi(m,e):null,t=r.getAttribute("method")||yh,o=Lm(r.getAttribute("enctype"))||vh,c=new FormData(r)}else if(XA(r)||JA(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||m.getAttribute("action");if(s=g?mi(g,e):null,t=r.getAttribute("formmethod")||m.getAttribute("method")||yh,o=Lm(r.getAttribute("formenctype"))||Lm(m.getAttribute("enctype"))||vh,c=new FormData(m,r),!rS()){let{name:y,type:_,value:x}=r;if(_==="image"){let T=y?`${y}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else y&&c.append(y,x)}}else{if(Zh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=yh,s=null,o=vh,d=r}return c&&o==="text/plain"&&(d=c,c=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:c,body:d}}function Mp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function aS(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function lS(r,e,t){let s=await Promise.all(r.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await aS(c,t);return d.links?d.links():[]}return[]}));return dS(s.flat(1).filter(oS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function v0(r,e,t,s,o,c){let d=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,m=(g,y)=>{var _;return t[y].pathname!==g.pathname||((_=t[y].route.path)==null?void 0:_.endsWith("*"))&&t[y].params["*"]!==g.params["*"]};return c==="assets"?e.filter((g,y)=>d(g,y)||m(g,y)):c==="data"?e.filter((g,y)=>{var x;let _=s.routes[g.route.id];if(!_||!_.hasLoader)return!1;if(d(g,y)||m(g,y))return!0;if(g.route.shouldRevalidate){let T=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((x=t[0])==null?void 0:x.params)||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function cS(r,e,{includeHydrateFallback:t}={}){return uS(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function uS(r){return[...new Set(r)]}function hS(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function dS(r,e){let t=new Set;return new Set(e),r.reduce((s,o)=>{let c=JSON.stringify(hS(o));return t.has(c)||(t.add(c),s.push({key:c,link:o})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fS=new Set([100,101,204,205]);function mS(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&mi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function pw(){let r=P.useContext(jo);return Mp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function pS(){let r=P.useContext(Xh);return Mp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Up=P.createContext(void 0);Up.displayName="FrameworkContext";function gw(){let r=P.useContext(Up);return Mp(r,"You must render this element inside a <HydratedRouter> element"),r}function gS(r,e){let t=P.useContext(Up),[s,o]=P.useState(!1),[c,d]=P.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:y,onMouseLeave:_,onTouchStart:x}=e,T=P.useRef(null);P.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let j=z=>{z.forEach(X=>{d(X.isIntersecting)})},k=new IntersectionObserver(j,{threshold:.5});return T.current&&k.observe(T.current),()=>{k.disconnect()}}},[r]),P.useEffect(()=>{if(s){let j=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(j)}}},[s]);let D=()=>{o(!0)},C=()=>{o(!1),d(!1)};return t?r!=="intent"?[c,T,{}]:[c,T,{onFocus:Zl(m,D),onBlur:Zl(g,C),onMouseEnter:Zl(y,D),onMouseLeave:Zl(_,C),onTouchStart:Zl(x,D)}]:[!1,T,{}]}function Zl(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function yS({page:r,...e}){let{router:t}=pw(),s=P.useMemo(()=>iw(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?P.createElement(_S,{page:r,matches:s,...e}):null}function vS(r){let{manifest:e,routeModules:t}=gw(),[s,o]=P.useState([]);return P.useEffect(()=>{let c=!1;return lS(r,e,t).then(d=>{c||o(d)}),()=>{c=!0}},[r,e,t]),s}function _S({page:r,matches:e,...t}){let s=Or(),{manifest:o,routeModules:c}=gw(),{basename:d}=pw(),{loaderData:m,matches:g}=pS(),y=P.useMemo(()=>v0(r,e,g,o,s,"data"),[r,e,g,o,s]),_=P.useMemo(()=>v0(r,e,g,o,s,"assets"),[r,e,g,o,s]),x=P.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let C=new Set,j=!1;if(e.forEach(z=>{var Q;let X=o.routes[z.route.id];!X||!X.hasLoader||(!y.some(ne=>ne.route.id===z.route.id)&&z.route.id in m&&((Q=c[z.route.id])!=null&&Q.shouldRevalidate)||X.hasClientLoader?j=!0:C.add(z.route.id))}),C.size===0)return[];let k=mS(r,d);return j&&C.size>0&&k.searchParams.set("_routes",e.filter(z=>C.has(z.route.id)).map(z=>z.route.id).join(",")),[k.pathname+k.search]},[d,m,s,o,y,e,r,c]),T=P.useMemo(()=>cS(_,o),[_,o]),D=vS(_);return P.createElement(P.Fragment,null,x.map(C=>P.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),T.map(C=>P.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),D.map(({key:C,link:j})=>P.createElement("link",{key:C,...j})))}function ES(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var yw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yw&&(window.__reactRouterVersion="7.6.0")}catch{}function wS({basename:r,children:e,window:t}){let s=P.useRef();s.current==null&&(s.current=oA({window:t,v5Compat:!0}));let o=s.current,[c,d]=P.useState({action:o.action,location:o.location}),m=P.useCallback(g=>{P.startTransition(()=>d(g))},[d]);return P.useLayoutEffect(()=>o.listen(m),[o,m]),P.createElement(QA,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o})}var vw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_e=P.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:c,replace:d,state:m,target:g,to:y,preventScrollReset:_,viewTransition:x,...T},D){let{basename:C}=P.useContext(Dr),j=typeof y=="string"&&vw.test(y),k,z=!1;if(typeof y=="string"&&j&&(k=y,yw))try{let A=new URL(window.location.href),S=y.startsWith("//")?new URL(A.protocol+y):new URL(y),I=mi(S.pathname,C);S.origin===A.origin&&I!=null?y=I+S.search+S.hash:z=!0}catch{sr(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=OA(y,{relative:o}),[Q,ne,J]=gS(s,T),oe=AS(y,{replace:d,state:m,target:g,preventScrollReset:_,relative:o,viewTransition:x});function U(A){e&&e(A),A.defaultPrevented||oe(A)}let N=P.createElement("a",{...T,...J,href:k||X,onClick:z||c?e:U,ref:ES(D,ne),target:g,"data-discover":!j&&t==="render"?"true":void 0});return Q&&!j?P.createElement(P.Fragment,null,N,P.createElement(yS,{page:X})):N});_e.displayName="Link";var TS=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:c,to:d,viewTransition:m,children:g,...y},_){let x=Sc(d,{relative:y.relative}),T=Or(),D=P.useContext(Xh),{navigator:C,basename:j}=P.useContext(Dr),k=D!=null&&IS(x)&&m===!0,z=C.encodeLocation?C.encodeLocation(x).pathname:x.pathname,X=T.pathname,Q=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;t||(X=X.toLowerCase(),Q=Q?Q.toLowerCase():null,z=z.toLowerCase()),Q&&j&&(Q=mi(Q,j)||Q);const ne=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let J=X===z||!o&&X.startsWith(z)&&X.charAt(ne)==="/",oe=Q!=null&&(Q===z||!o&&Q.startsWith(z)&&Q.charAt(z.length)==="/"),U={isActive:J,isPending:oe,isTransitioning:k},N=J?e:void 0,A;typeof s=="function"?A=s(U):A=[s,J?"active":null,oe?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let S=typeof c=="function"?c(U):c;return P.createElement(_e,{...y,"aria-current":N,className:A,ref:_,style:S,to:d,viewTransition:m},typeof g=="function"?g(U):g)});TS.displayName="NavLink";var bS=P.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:c,method:d=yh,action:m,onSubmit:g,relative:y,preventScrollReset:_,viewTransition:x,...T},D)=>{let C=CS(),j=NS(m,{relative:y}),k=d.toLowerCase()==="get"?"get":"post",z=typeof m=="string"&&vw.test(m),X=Q=>{if(g&&g(Q),Q.defaultPrevented)return;Q.preventDefault();let ne=Q.nativeEvent.submitter,J=(ne==null?void 0:ne.getAttribute("formmethod"))||d;C(ne||Q.currentTarget,{fetcherKey:e,method:J,navigate:t,replace:o,state:c,relative:y,preventScrollReset:_,viewTransition:x})};return P.createElement("form",{ref:D,method:k,action:j,onSubmit:s?g:X,...T,"data-discover":!z&&r==="render"?"true":void 0})});bS.displayName="Form";function xS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _w(r){let e=P.useContext(jo);return ht(e,xS(r)),e}function AS(r,{target:e,replace:t,state:s,preventScrollReset:o,relative:c,viewTransition:d}={}){let m=da(),g=Or(),y=Sc(r,{relative:c});return P.useCallback(_=>{if(tS(_,e)){_.preventDefault();let x=t!==void 0?t:fc(g)===fc(y);m(r,{replace:x,state:s,preventScrollReset:o,relative:c,viewTransition:d})}},[g,m,y,t,s,e,r,o,c,d])}function Ew(r){sr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(np(r)),t=P.useRef(!1),s=Or(),o=P.useMemo(()=>nS(s.search,t.current?null:e.current),[s.search]),c=da(),d=P.useCallback((m,g)=>{const y=np(typeof m=="function"?m(o):m);t.current=!0,c("?"+y,g)},[c,o]);return[o,d]}var SS=0,RS=()=>`__${String(++SS)}__`;function CS(){let{router:r}=_w("useSubmit"),{basename:e}=P.useContext(Dr),t=GA();return P.useCallback(async(s,o={})=>{let{action:c,method:d,encType:m,formData:g,body:y}=sS(s,e);if(o.navigate===!1){let _=o.fetcherKey||RS();await r.fetch(_,t,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function NS(r,{relative:e}={}){let{basename:t}=P.useContext(Dr),s=P.useContext(kr);ht(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...Sc(r||".",{relative:e})},d=Or();if(r==null){c.search=d.search;let m=new URLSearchParams(c.search),g=m.getAll("index");if(g.some(_=>_==="")){m.delete("index"),g.filter(x=>x).forEach(x=>m.append("index",x));let _=m.toString();c.search=_?`?${_}`:""}}return(!r||r===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:hi([t,c.pathname])),fc(c)}function IS(r,e={}){let t=P.useContext(uw);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=_w("useViewTransitionState"),o=Sc(r,{relative:e.relative});if(!t.isTransitioning)return!1;let c=mi(t.currentLocation.pathname,s)||t.currentLocation.pathname,d=mi(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Nh(o.pathname,d)!=null||Nh(o.pathname,c)!=null}[...fS];const jS=()=>{};var _0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},DS=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[t++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[t++],d=r[t++],m=r[t++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[t++],d=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Tw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],d=o+1<r.length,m=d?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,_=c>>2,x=(c&3)<<4|m>>4;let T=(m&15)<<2|y>>6,D=y&63;g||(D=64,d||(T=64)),s.push(t[_],t[x],t[T],t[D])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ww(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):DS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const x=o<r.length?t[r.charAt(o)]:64;if(++o,c==null||m==null||y==null||x==null)throw new kS;const T=c<<2|m>>4;if(s.push(T),y!==64){const D=m<<4&240|y>>2;if(s.push(D),x!==64){const C=y<<6&192|x;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class kS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OS=function(r){const e=ww(r);return Tw.encodeByteArray(e,!0)},Ih=function(r){return OS(r).replace(/\./g,"")},bw=function(r){try{return Tw.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=()=>PS().__FIREBASE_DEFAULTS__,US=()=>{if(typeof process>"u"||typeof _0>"u")return;const r=_0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},LS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&bw(r[1]);return e&&JSON.parse(e)},Jh=()=>{try{return jS()||MS()||US()||LS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},xw=r=>{var e,t;return(t=(e=Jh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},Aw=r=>{const e=xw(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Sw=()=>{var r;return(r=Jh())===null||r===void 0?void 0:r.config},Rw=r=>{var e;return(e=Jh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(r){return r.endsWith(".cloudworkstations.dev")}async function Lp(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ih(JSON.stringify(t)),Ih(JSON.stringify(d)),""].join(".")}const ac={};function BS(){const r={prod:[],emulator:[]};for(const e of Object.keys(ac))ac[e]?r.emulator.push(e):r.prod.push(e);return r}function zS(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let E0=!1;function Do(r,e){if(typeof window>"u"||typeof document>"u"||!fa(window.location.host)||ac[r]===e||ac[r]||E0)return;ac[r]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",c=BS().prod.length>0;function d(){const T=document.getElementById(s);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,D){T.setAttribute("width","24"),T.setAttribute("id",D),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{E0=!0,d()},T}function _(T,D){T.setAttribute("id",D),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=zS(s),D=t("text"),C=document.getElementById(D)||document.createElement("span"),j=t("learnmore"),k=document.getElementById(j)||document.createElement("a"),z=t("preprendIcon"),X=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Q=T.element;m(Q),_(k,j);const ne=y();g(X,z),Q.append(X,C,k,ne),document.body.appendChild(Q)}c?(C.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function qS(){var r;const e=(r=Jh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function $S(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YS(){const r=cn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function KS(){return!qS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QS(){try{return typeof indexedDB=="object"}catch{return!1}}function WS(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="FirebaseError";class Pr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=XS,Object.setPrototypeOf(this,Pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rc.prototype.create)}}class Rc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?ZS(c,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Pr(o,m,s)}}function ZS(r,e){return r.replace(JS,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const JS=/\{\$([^}]+)}/g;function eR(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function pi(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const c=r[o],d=e[o];if(w0(c)&&w0(d)){if(!pi(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function w0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ec(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function tc(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function tR(r,e){const t=new nR(r,e);return t.subscribe.bind(t)}class nR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");rR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Vm),o.error===void 0&&(o.error=Vm),o.complete===void 0&&(o.complete=Vm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rR(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Vm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(r){return r&&r._delegate?r._delegate:r}class as{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new VS;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aR(e))try{this.getOrInitializeService({instanceIdentifier:ea})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ea){return this.instances.has(e)}getOptions(e=ea){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&d.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),c=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(o,c);const d=this.instances.get(o);return d&&e(d,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:sR(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ea){return this.component?this.component.multipleInstances?e:ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sR(r){return r===ea?void 0:r}function aR(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new iR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const lR={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},cR=Ue.INFO,uR={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},hR=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=uR[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vp{constructor(e){this.name=e,this._logLevel=cR,this._logHandler=hR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const dR=(r,e)=>e.some(t=>r instanceof t);let T0,b0;function fR(){return T0||(T0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mR(){return b0||(b0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nw=new WeakMap,rp=new WeakMap,Iw=new WeakMap,Bm=new WeakMap,Bp=new WeakMap;function pR(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{t(ns(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Nw.set(t,r)}).catch(()=>{}),Bp.set(e,r),e}function gR(r){if(rp.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{t(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});rp.set(r,e)}let ip={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return rp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Iw.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ns(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function yR(r){ip=r(ip)}function vR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(zm(this),e,...t);return Iw.set(s,e.sort?e.sort():[e]),ns(s)}:mR().includes(r)?function(...e){return r.apply(zm(this),e),ns(Nw.get(this))}:function(...e){return ns(r.apply(zm(this),e))}}function _R(r){return typeof r=="function"?vR(r):(r instanceof IDBTransaction&&gR(r),dR(r,fR())?new Proxy(r,ip):r)}function ns(r){if(r instanceof IDBRequest)return pR(r);if(Bm.has(r))return Bm.get(r);const e=_R(r);return e!==r&&(Bm.set(r,e),Bp.set(e,r)),e}const zm=r=>Bp.get(r);function ER(r,e,{blocked:t,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(r,e),m=ns(d);return s&&d.addEventListener("upgradeneeded",g=>{s(ns(d.result),g.oldVersion,g.newVersion,ns(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const wR=["get","getKey","getAll","getAllKeys","count"],TR=["put","add","delete","clear"],Fm=new Map;function x0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Fm.get(e))return Fm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=TR.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||wR.includes(t)))return;const c=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),o&&g.done]))[0]};return Fm.set(e,c),c}yR(r=>({...r,get:(e,t,s)=>x0(e,t)||r.get(e,t,s),has:(e,t)=>!!x0(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xR(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function xR(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sp="@firebase/app",A0="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new Vp("@firebase/app"),AR="@firebase/app-compat",SR="@firebase/analytics-compat",RR="@firebase/analytics",CR="@firebase/app-check-compat",NR="@firebase/app-check",IR="@firebase/auth",jR="@firebase/auth-compat",DR="@firebase/database",kR="@firebase/data-connect",OR="@firebase/database-compat",PR="@firebase/functions",MR="@firebase/functions-compat",UR="@firebase/installations",LR="@firebase/installations-compat",VR="@firebase/messaging",BR="@firebase/messaging-compat",zR="@firebase/performance",FR="@firebase/performance-compat",qR="@firebase/remote-config",HR="@firebase/remote-config-compat",GR="@firebase/storage",$R="@firebase/storage-compat",YR="@firebase/firestore",KR="@firebase/vertexai",QR="@firebase/firestore-compat",WR="firebase",XR="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="[DEFAULT]",ZR={[sp]:"fire-core",[AR]:"fire-core-compat",[RR]:"fire-analytics",[SR]:"fire-analytics-compat",[NR]:"fire-app-check",[CR]:"fire-app-check-compat",[IR]:"fire-auth",[jR]:"fire-auth-compat",[DR]:"fire-rtdb",[kR]:"fire-data-connect",[OR]:"fire-rtdb-compat",[PR]:"fire-fn",[MR]:"fire-fn-compat",[UR]:"fire-iid",[LR]:"fire-iid-compat",[VR]:"fire-fcm",[BR]:"fire-fcm-compat",[zR]:"fire-perf",[FR]:"fire-perf-compat",[qR]:"fire-rc",[HR]:"fire-rc-compat",[GR]:"fire-gcs",[$R]:"fire-gcs-compat",[YR]:"fire-fst",[QR]:"fire-fst-compat",[KR]:"fire-vertex","fire-js":"fire-js",[WR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new Map,JR=new Map,op=new Map;function S0(r,e){try{r.container.addComponent(e)}catch(t){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function sa(r){const e=r.name;if(op.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;op.set(e,r);for(const t of jh.values())S0(t,r);for(const t of JR.values())S0(t,r);return!0}function ed(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function wn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rs=new Rc("app","Firebase",eC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new as("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=XR;function jw(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:ap,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw rs.create("bad-app-name",{appName:String(o)});if(t||(t=Sw()),!t)throw rs.create("no-options");const c=jh.get(o);if(c){if(pi(t,c.options)&&pi(s,c.config))return c;throw rs.create("duplicate-app",{appName:o})}const d=new oR(o);for(const g of op.values())d.addComponent(g);const m=new tC(t,s,d);return jh.set(o,m),m}function zp(r=ap){const e=jh.get(r);if(!e&&r===ap&&Sw())return jw();if(!e)throw rs.create("no-app",{appName:r});return e}function Sr(r,e,t){var s;let o=(s=ZR[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const c=o.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const m=[`Unable to register library "${o}" with version "${e}":`];c&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(m.join(" "));return}sa(new as(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="firebase-heartbeat-database",rC=1,mc="firebase-heartbeat-store";let qm=null;function Dw(){return qm||(qm=ER(nC,rC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(mc)}catch(t){console.warn(t)}}}}).catch(r=>{throw rs.create("idb-open",{originalErrorMessage:r.message})})),qm}async function iC(r){try{const t=(await Dw()).transaction(mc),s=await t.objectStore(mc).get(kw(r));return await t.done,s}catch(e){if(e instanceof Pr)gi.warn(e.message);else{const t=rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gi.warn(t.message)}}}async function R0(r,e){try{const s=(await Dw()).transaction(mc,"readwrite");await s.objectStore(mc).put(e,kw(r)),await s.done}catch(t){if(t instanceof Pr)gi.warn(t.message);else{const s=rs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gi.warn(s.message)}}}function kw(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=1024,aC=30;class oC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new cC(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=C0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>aC){const d=uC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){gi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=C0(),{heartbeatsToSend:s,unsentEntries:o}=lC(this._heartbeatsCache.heartbeats),c=Ih(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return gi.warn(t),""}}}function C0(){return new Date().toISOString().substring(0,10)}function lC(r,e=sC){const t=[];let s=r.slice();for(const o of r){const c=t.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),N0(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),N0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class cC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QS()?WS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await iC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return R0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return R0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function N0(r){return Ih(JSON.stringify({version:2,heartbeats:r})).length}function uC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(r){sa(new as("platform-logger",e=>new bR(e),"PRIVATE")),sa(new as("heartbeat",e=>new oC(e),"PRIVATE")),Sr(sp,A0,r),Sr(sp,A0,"esm2017"),Sr("fire-js","")}hC("");var dC="firebase",fC="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr(dC,fC,"app");var I0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,Ow;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,N){function A(){}A.prototype=N.prototype,U.D=N.prototype,U.prototype=new A,U.prototype.constructor=U,U.C=function(S,I,L){for(var O=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)O[$e-2]=arguments[$e];return N.prototype[I].apply(S,O)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(U,N,A){A||(A=0);var S=Array(16);if(typeof N=="string")for(var I=0;16>I;++I)S[I]=N.charCodeAt(A++)|N.charCodeAt(A++)<<8|N.charCodeAt(A++)<<16|N.charCodeAt(A++)<<24;else for(I=0;16>I;++I)S[I]=N[A++]|N[A++]<<8|N[A++]<<16|N[A++]<<24;N=U.g[0],A=U.g[1],I=U.g[2];var L=U.g[3],O=N+(L^A&(I^L))+S[0]+3614090360&4294967295;N=A+(O<<7&4294967295|O>>>25),O=L+(I^N&(A^I))+S[1]+3905402710&4294967295,L=N+(O<<12&4294967295|O>>>20),O=I+(A^L&(N^A))+S[2]+606105819&4294967295,I=L+(O<<17&4294967295|O>>>15),O=A+(N^I&(L^N))+S[3]+3250441966&4294967295,A=I+(O<<22&4294967295|O>>>10),O=N+(L^A&(I^L))+S[4]+4118548399&4294967295,N=A+(O<<7&4294967295|O>>>25),O=L+(I^N&(A^I))+S[5]+1200080426&4294967295,L=N+(O<<12&4294967295|O>>>20),O=I+(A^L&(N^A))+S[6]+2821735955&4294967295,I=L+(O<<17&4294967295|O>>>15),O=A+(N^I&(L^N))+S[7]+4249261313&4294967295,A=I+(O<<22&4294967295|O>>>10),O=N+(L^A&(I^L))+S[8]+1770035416&4294967295,N=A+(O<<7&4294967295|O>>>25),O=L+(I^N&(A^I))+S[9]+2336552879&4294967295,L=N+(O<<12&4294967295|O>>>20),O=I+(A^L&(N^A))+S[10]+4294925233&4294967295,I=L+(O<<17&4294967295|O>>>15),O=A+(N^I&(L^N))+S[11]+2304563134&4294967295,A=I+(O<<22&4294967295|O>>>10),O=N+(L^A&(I^L))+S[12]+1804603682&4294967295,N=A+(O<<7&4294967295|O>>>25),O=L+(I^N&(A^I))+S[13]+4254626195&4294967295,L=N+(O<<12&4294967295|O>>>20),O=I+(A^L&(N^A))+S[14]+2792965006&4294967295,I=L+(O<<17&4294967295|O>>>15),O=A+(N^I&(L^N))+S[15]+1236535329&4294967295,A=I+(O<<22&4294967295|O>>>10),O=N+(I^L&(A^I))+S[1]+4129170786&4294967295,N=A+(O<<5&4294967295|O>>>27),O=L+(A^I&(N^A))+S[6]+3225465664&4294967295,L=N+(O<<9&4294967295|O>>>23),O=I+(N^A&(L^N))+S[11]+643717713&4294967295,I=L+(O<<14&4294967295|O>>>18),O=A+(L^N&(I^L))+S[0]+3921069994&4294967295,A=I+(O<<20&4294967295|O>>>12),O=N+(I^L&(A^I))+S[5]+3593408605&4294967295,N=A+(O<<5&4294967295|O>>>27),O=L+(A^I&(N^A))+S[10]+38016083&4294967295,L=N+(O<<9&4294967295|O>>>23),O=I+(N^A&(L^N))+S[15]+3634488961&4294967295,I=L+(O<<14&4294967295|O>>>18),O=A+(L^N&(I^L))+S[4]+3889429448&4294967295,A=I+(O<<20&4294967295|O>>>12),O=N+(I^L&(A^I))+S[9]+568446438&4294967295,N=A+(O<<5&4294967295|O>>>27),O=L+(A^I&(N^A))+S[14]+3275163606&4294967295,L=N+(O<<9&4294967295|O>>>23),O=I+(N^A&(L^N))+S[3]+4107603335&4294967295,I=L+(O<<14&4294967295|O>>>18),O=A+(L^N&(I^L))+S[8]+1163531501&4294967295,A=I+(O<<20&4294967295|O>>>12),O=N+(I^L&(A^I))+S[13]+2850285829&4294967295,N=A+(O<<5&4294967295|O>>>27),O=L+(A^I&(N^A))+S[2]+4243563512&4294967295,L=N+(O<<9&4294967295|O>>>23),O=I+(N^A&(L^N))+S[7]+1735328473&4294967295,I=L+(O<<14&4294967295|O>>>18),O=A+(L^N&(I^L))+S[12]+2368359562&4294967295,A=I+(O<<20&4294967295|O>>>12),O=N+(A^I^L)+S[5]+4294588738&4294967295,N=A+(O<<4&4294967295|O>>>28),O=L+(N^A^I)+S[8]+2272392833&4294967295,L=N+(O<<11&4294967295|O>>>21),O=I+(L^N^A)+S[11]+1839030562&4294967295,I=L+(O<<16&4294967295|O>>>16),O=A+(I^L^N)+S[14]+4259657740&4294967295,A=I+(O<<23&4294967295|O>>>9),O=N+(A^I^L)+S[1]+2763975236&4294967295,N=A+(O<<4&4294967295|O>>>28),O=L+(N^A^I)+S[4]+1272893353&4294967295,L=N+(O<<11&4294967295|O>>>21),O=I+(L^N^A)+S[7]+4139469664&4294967295,I=L+(O<<16&4294967295|O>>>16),O=A+(I^L^N)+S[10]+3200236656&4294967295,A=I+(O<<23&4294967295|O>>>9),O=N+(A^I^L)+S[13]+681279174&4294967295,N=A+(O<<4&4294967295|O>>>28),O=L+(N^A^I)+S[0]+3936430074&4294967295,L=N+(O<<11&4294967295|O>>>21),O=I+(L^N^A)+S[3]+3572445317&4294967295,I=L+(O<<16&4294967295|O>>>16),O=A+(I^L^N)+S[6]+76029189&4294967295,A=I+(O<<23&4294967295|O>>>9),O=N+(A^I^L)+S[9]+3654602809&4294967295,N=A+(O<<4&4294967295|O>>>28),O=L+(N^A^I)+S[12]+3873151461&4294967295,L=N+(O<<11&4294967295|O>>>21),O=I+(L^N^A)+S[15]+530742520&4294967295,I=L+(O<<16&4294967295|O>>>16),O=A+(I^L^N)+S[2]+3299628645&4294967295,A=I+(O<<23&4294967295|O>>>9),O=N+(I^(A|~L))+S[0]+4096336452&4294967295,N=A+(O<<6&4294967295|O>>>26),O=L+(A^(N|~I))+S[7]+1126891415&4294967295,L=N+(O<<10&4294967295|O>>>22),O=I+(N^(L|~A))+S[14]+2878612391&4294967295,I=L+(O<<15&4294967295|O>>>17),O=A+(L^(I|~N))+S[5]+4237533241&4294967295,A=I+(O<<21&4294967295|O>>>11),O=N+(I^(A|~L))+S[12]+1700485571&4294967295,N=A+(O<<6&4294967295|O>>>26),O=L+(A^(N|~I))+S[3]+2399980690&4294967295,L=N+(O<<10&4294967295|O>>>22),O=I+(N^(L|~A))+S[10]+4293915773&4294967295,I=L+(O<<15&4294967295|O>>>17),O=A+(L^(I|~N))+S[1]+2240044497&4294967295,A=I+(O<<21&4294967295|O>>>11),O=N+(I^(A|~L))+S[8]+1873313359&4294967295,N=A+(O<<6&4294967295|O>>>26),O=L+(A^(N|~I))+S[15]+4264355552&4294967295,L=N+(O<<10&4294967295|O>>>22),O=I+(N^(L|~A))+S[6]+2734768916&4294967295,I=L+(O<<15&4294967295|O>>>17),O=A+(L^(I|~N))+S[13]+1309151649&4294967295,A=I+(O<<21&4294967295|O>>>11),O=N+(I^(A|~L))+S[4]+4149444226&4294967295,N=A+(O<<6&4294967295|O>>>26),O=L+(A^(N|~I))+S[11]+3174756917&4294967295,L=N+(O<<10&4294967295|O>>>22),O=I+(N^(L|~A))+S[2]+718787259&4294967295,I=L+(O<<15&4294967295|O>>>17),O=A+(L^(I|~N))+S[9]+3951481745&4294967295,U.g[0]=U.g[0]+N&4294967295,U.g[1]=U.g[1]+(I+(O<<21&4294967295|O>>>11))&4294967295,U.g[2]=U.g[2]+I&4294967295,U.g[3]=U.g[3]+L&4294967295}s.prototype.u=function(U,N){N===void 0&&(N=U.length);for(var A=N-this.blockSize,S=this.B,I=this.h,L=0;L<N;){if(I==0)for(;L<=A;)o(this,U,L),L+=this.blockSize;if(typeof U=="string"){for(;L<N;)if(S[I++]=U.charCodeAt(L++),I==this.blockSize){o(this,S),I=0;break}}else for(;L<N;)if(S[I++]=U[L++],I==this.blockSize){o(this,S),I=0;break}}this.h=I,this.o+=N},s.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var N=1;N<U.length-8;++N)U[N]=0;var A=8*this.o;for(N=U.length-8;N<U.length;++N)U[N]=A&255,A/=256;for(this.u(U),U=Array(16),N=A=0;4>N;++N)for(var S=0;32>S;S+=8)U[A++]=this.g[N]>>>S&255;return U};function c(U,N){var A=m;return Object.prototype.hasOwnProperty.call(A,U)?A[U]:A[U]=N(U)}function d(U,N){this.h=N;for(var A=[],S=!0,I=U.length-1;0<=I;I--){var L=U[I]|0;S&&L==N||(A[I]=L,S=!1)}this.g=A}var m={};function g(U){return-128<=U&&128>U?c(U,function(N){return new d([N|0],0>N?-1:0)}):new d([U|0],0>U?-1:0)}function y(U){if(isNaN(U)||!isFinite(U))return x;if(0>U)return k(y(-U));for(var N=[],A=1,S=0;U>=A;S++)N[S]=U/A|0,A*=4294967296;return new d(N,0)}function _(U,N){if(U.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(U.charAt(0)=="-")return k(_(U.substring(1),N));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=y(Math.pow(N,8)),S=x,I=0;I<U.length;I+=8){var L=Math.min(8,U.length-I),O=parseInt(U.substring(I,I+L),N);8>L?(L=y(Math.pow(N,L)),S=S.j(L).add(y(O))):(S=S.j(A),S=S.add(y(O)))}return S}var x=g(0),T=g(1),D=g(16777216);r=d.prototype,r.m=function(){if(j(this))return-k(this).m();for(var U=0,N=1,A=0;A<this.g.length;A++){var S=this.i(A);U+=(0<=S?S:4294967296+S)*N,N*=4294967296}return U},r.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(C(this))return"0";if(j(this))return"-"+k(this).toString(U);for(var N=y(Math.pow(U,6)),A=this,S="";;){var I=ne(A,N).g;A=z(A,I.j(N));var L=((0<A.g.length?A.g[0]:A.h)>>>0).toString(U);if(A=I,C(A))return L+S;for(;6>L.length;)L="0"+L;S=L+S}},r.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function C(U){if(U.h!=0)return!1;for(var N=0;N<U.g.length;N++)if(U.g[N]!=0)return!1;return!0}function j(U){return U.h==-1}r.l=function(U){return U=z(this,U),j(U)?-1:C(U)?0:1};function k(U){for(var N=U.g.length,A=[],S=0;S<N;S++)A[S]=~U.g[S];return new d(A,~U.h).add(T)}r.abs=function(){return j(this)?k(this):this},r.add=function(U){for(var N=Math.max(this.g.length,U.g.length),A=[],S=0,I=0;I<=N;I++){var L=S+(this.i(I)&65535)+(U.i(I)&65535),O=(L>>>16)+(this.i(I)>>>16)+(U.i(I)>>>16);S=O>>>16,L&=65535,O&=65535,A[I]=O<<16|L}return new d(A,A[A.length-1]&-2147483648?-1:0)};function z(U,N){return U.add(k(N))}r.j=function(U){if(C(this)||C(U))return x;if(j(this))return j(U)?k(this).j(k(U)):k(k(this).j(U));if(j(U))return k(this.j(k(U)));if(0>this.l(D)&&0>U.l(D))return y(this.m()*U.m());for(var N=this.g.length+U.g.length,A=[],S=0;S<2*N;S++)A[S]=0;for(S=0;S<this.g.length;S++)for(var I=0;I<U.g.length;I++){var L=this.i(S)>>>16,O=this.i(S)&65535,$e=U.i(I)>>>16,Ke=U.i(I)&65535;A[2*S+2*I]+=O*Ke,X(A,2*S+2*I),A[2*S+2*I+1]+=L*Ke,X(A,2*S+2*I+1),A[2*S+2*I+1]+=O*$e,X(A,2*S+2*I+1),A[2*S+2*I+2]+=L*$e,X(A,2*S+2*I+2)}for(S=0;S<N;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=N;S<2*N;S++)A[S]=0;return new d(A,0)};function X(U,N){for(;(U[N]&65535)!=U[N];)U[N+1]+=U[N]>>>16,U[N]&=65535,N++}function Q(U,N){this.g=U,this.h=N}function ne(U,N){if(C(N))throw Error("division by zero");if(C(U))return new Q(x,x);if(j(U))return N=ne(k(U),N),new Q(k(N.g),k(N.h));if(j(N))return N=ne(U,k(N)),new Q(k(N.g),N.h);if(30<U.g.length){if(j(U)||j(N))throw Error("slowDivide_ only works with positive integers.");for(var A=T,S=N;0>=S.l(U);)A=J(A),S=J(S);var I=oe(A,1),L=oe(S,1);for(S=oe(S,2),A=oe(A,2);!C(S);){var O=L.add(S);0>=O.l(U)&&(I=I.add(A),L=O),S=oe(S,1),A=oe(A,1)}return N=z(U,I.j(N)),new Q(I,N)}for(I=x;0<=U.l(N);){for(A=Math.max(1,Math.floor(U.m()/N.m())),S=Math.ceil(Math.log(A)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),L=y(A),O=L.j(N);j(O)||0<O.l(U);)A-=S,L=y(A),O=L.j(N);C(L)&&(L=T),I=I.add(L),U=z(U,O)}return new Q(I,U)}r.A=function(U){return ne(this,U).h},r.and=function(U){for(var N=Math.max(this.g.length,U.g.length),A=[],S=0;S<N;S++)A[S]=this.i(S)&U.i(S);return new d(A,this.h&U.h)},r.or=function(U){for(var N=Math.max(this.g.length,U.g.length),A=[],S=0;S<N;S++)A[S]=this.i(S)|U.i(S);return new d(A,this.h|U.h)},r.xor=function(U){for(var N=Math.max(this.g.length,U.g.length),A=[],S=0;S<N;S++)A[S]=this.i(S)^U.i(S);return new d(A,this.h^U.h)};function J(U){for(var N=U.g.length+1,A=[],S=0;S<N;S++)A[S]=U.i(S)<<1|U.i(S-1)>>>31;return new d(A,U.h)}function oe(U,N){var A=N>>5;N%=32;for(var S=U.g.length-A,I=[],L=0;L<S;L++)I[L]=0<N?U.i(L+A)>>>N|U.i(L+A+1)<<32-N:U.i(L+A);return new d(I,U.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Ow=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=_,is=d}).apply(typeof I0<"u"?I0:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pw,nc,Mw,_h,lp,Uw,Lw,Vw;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,E){return h==Array.prototype||h==Object.prototype||(h[v]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=t(this);function o(h,v){if(v)e:{var E=s;h=h.split(".");for(var R=0;R<h.length-1;R++){var q=h[R];if(!(q in E))break e;E=E[q]}h=h[h.length-1],R=E[h],v=v(R),v!=R&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}function c(h,v){h instanceof String&&(h+="");var E=0,R=!1,q={next:function(){if(!R&&E<h.length){var W=E++;return{value:v(W,h[W]),done:!1}}return R=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(h){return h||function(){return c(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function g(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function y(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function _(h,v,E){return h.call.apply(h.bind,arguments)}function x(h,v,E){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,R),h.apply(v,q)}}return function(){return h.apply(v,arguments)}}function T(h,v,E){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:x,T.apply(null,arguments)}function D(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function C(h,v){function E(){}E.prototype=v.prototype,h.aa=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(R,q,W){for(var ue=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)ue[Ve-2]=arguments[Ve];return v.prototype[q].apply(R,ue)}}function j(h){const v=h.length;if(0<v){const E=Array(v);for(let R=0;R<v;R++)E[R]=h[R];return E}return[]}function k(h,v){for(let E=1;E<arguments.length;E++){const R=arguments[E];if(g(R)){const q=h.length||0,W=R.length||0;h.length=q+W;for(let ue=0;ue<W;ue++)h[q+ue]=R[ue]}else h.push(R)}}class z{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function X(h){return/^[\s\xa0]*$/.test(h)}function Q(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function ne(h){return ne[" "](h),h}ne[" "]=function(){};var J=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function oe(h,v,E){for(const R in h)v.call(E,h[R],R,h)}function U(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function N(h){const v={};for(const E in h)v[E]=h[E];return v}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(h,v){let E,R;for(let q=1;q<arguments.length;q++){R=arguments[q];for(E in R)h[E]=R[E];for(let W=0;W<A.length;W++)E=A[W],Object.prototype.hasOwnProperty.call(R,E)&&(h[E]=R[E])}}function I(h){var v=1;h=h.split(":");const E=[];for(;0<v&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function L(h){m.setTimeout(()=>{throw h},0)}function O(){var h=Se;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class $e{constructor(){this.h=this.g=null}add(v,E){const R=Ke.get();R.set(v,E),this.h?this.h.next=R:this.g=R,this.h=R}}var Ke=new z(()=>new Z,h=>h.reset());class Z{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,de=!1,Se=new $e,V=()=>{const h=m.Promise.resolve(void 0);ce=()=>{h.then(ae)}};var ae=()=>{for(var h;h=O();){try{h.h.call(h.g)}catch(E){L(E)}var v=Ke;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}de=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};m.addEventListener("test",E,v),m.removeEventListener("test",E,v)}catch{}return h}();function Ie(h,v){if(le.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(J){e:{try{ne(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement);this.relatedTarget=v,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:be[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ie.aa.h.call(this)}}C(Ie,le);var be={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),H=0;function fe(h,v,E,R,q){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!R,this.ha=q,this.key=++H,this.da=this.fa=!1}function He(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Vt(h){this.src=h,this.g={},this.h=0}Vt.prototype.add=function(h,v,E,R,q){var W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);var ue=en(h,v,R,q);return-1<ue?(v=h[ue],E||(v.fa=!1)):(v=new fe(v,this.src,W,!!R,q),v.fa=E,h.push(v)),v};function ct(h,v){var E=v.type;if(E in h.g){var R=h.g[E],q=Array.prototype.indexOf.call(R,v,void 0),W;(W=0<=q)&&Array.prototype.splice.call(R,q,1),W&&(He(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function en(h,v,E,R){for(var q=0;q<h.length;++q){var W=h[q];if(!W.da&&W.listener==v&&W.capture==!!E&&W.ha==R)return q}return-1}var _s="closure_lm_"+(1e6*Math.random()|0),zo={};function Lc(h,v,E,R,q){if(Array.isArray(v)){for(var W=0;W<v.length;W++)Lc(h,v[W],E,R,q);return null}return E=Vc(E),h&&h[Et]?h.K(v,E,y(R)?!!R.capture:!1,q):Pn(h,v,E,!1,R,q)}function Pn(h,v,E,R,q,W){if(!v)throw Error("Invalid event type");var ue=y(q)?!!q.capture:!!q,Ve=Ea(h);if(Ve||(h[_s]=Ve=new Vt(h)),E=Ve.add(v,E,R,ue,W),E.proxy)return E;if(R=Id(),E.proxy=R,R.src=h,R.listener=E,h.addEventListener)ve||(q=ue),q===void 0&&(q=!1),h.addEventListener(v.toString(),R,q);else if(h.attachEvent)h.attachEvent(Es(v.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Id(){function h(E){return v.call(h.src,h.listener,E)}const v=jd;return h}function Fo(h,v,E,R,q){if(Array.isArray(v))for(var W=0;W<v.length;W++)Fo(h,v[W],E,R,q);else R=y(R)?!!R.capture:!!R,E=Vc(E),h&&h[Et]?(h=h.i,v=String(v).toString(),v in h.g&&(W=h.g[v],E=en(W,E,R,q),-1<E&&(He(W[E]),Array.prototype.splice.call(W,E,1),W.length==0&&(delete h.g[v],h.h--)))):h&&(h=Ea(h))&&(v=h.g[v.toString()],h=-1,v&&(h=en(v,E,R,q)),(E=-1<h?v[h]:null)&&_a(E))}function _a(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Et])ct(v.i,h);else{var E=h.type,R=h.proxy;v.removeEventListener?v.removeEventListener(E,R,h.capture):v.detachEvent?v.detachEvent(Es(E),R):v.addListener&&v.removeListener&&v.removeListener(R),(E=Ea(v))?(ct(E,h),E.h==0&&(E.src=null,v[_s]=null)):He(h)}}}function Es(h){return h in zo?zo[h]:zo[h]="on"+h}function jd(h,v){if(h.da)h=!0;else{v=new Ie(v,this);var E=h.listener,R=h.ha||h.src;h.fa&&_a(h),h=E.call(R,v)}return h}function Ea(h){return h=h[_s],h instanceof Vt?h:null}var qo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vc(h){return typeof h=="function"?h:(h[qo]||(h[qo]=function(v){return h.handleEvent(v)}),h[qo])}function mt(){he.call(this),this.i=new Vt(this),this.M=this,this.F=null}C(mt,he),mt.prototype[Et]=!0,mt.prototype.removeEventListener=function(h,v,E,R){Fo(this,h,v,E,R)};function Xe(h,v){var E,R=h.F;if(R)for(E=[];R;R=R.F)E.push(R);if(h=h.M,R=v.type||v,typeof v=="string")v=new le(v,h);else if(v instanceof le)v.target=v.target||h;else{var q=v;v=new le(R,h),S(v,q)}if(q=!0,E)for(var W=E.length-1;0<=W;W--){var ue=v.g=E[W];q=bn(ue,R,!0,v)&&q}if(ue=v.g=h,q=bn(ue,R,!0,v)&&q,q=bn(ue,R,!1,v)&&q,E)for(W=0;W<E.length;W++)ue=v.g=E[W],q=bn(ue,R,!1,v)&&q}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var E=h.g[v],R=0;R<E.length;R++)He(E[R]);delete h.g[v],h.h--}}this.F=null},mt.prototype.K=function(h,v,E,R){return this.i.add(String(h),v,!1,E,R)},mt.prototype.L=function(h,v,E,R){return this.i.add(String(h),v,!0,E,R)};function bn(h,v,E,R){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,W=0;W<v.length;++W){var ue=v[W];if(ue&&!ue.da&&ue.capture==E){var Ve=ue.listener,kt=ue.ha||ue.src;ue.fa&&ct(h.i,ue),q=Ve.call(kt,R)!==!1&&q}}return q&&!R.defaultPrevented}function tn(h,v,E){if(typeof h=="function")E&&(h=T(h,E));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:m.setTimeout(h,v||0)}function Bc(h){h.g=tn(()=>{h.g=null,h.i&&(h.i=!1,Bc(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Dd extends he{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Bc(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ws(h){he.call(this),this.h=h,this.g={}}C(ws,he);var Ts=[];function bs(h){oe(h.g,function(v,E){this.g.hasOwnProperty(E)&&_a(v)},h),h.g={}}ws.prototype.N=function(){ws.aa.N.call(this),bs(this)},ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wn=m.JSON.stringify,wa=m.JSON.parse,xs=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function Ho(){}Ho.prototype.h=null;function Go(h){return h.h||(h.h=h.i())}function $o(){}var Ur={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lr(){le.call(this,"d")}C(Lr,le);function Yo(){le.call(this,"c")}C(Yo,le);var lr={},Ko=null;function Ti(){return Ko=Ko||new mt}lr.La="serverreachability";function Ta(h){le.call(this,lr.La,h)}C(Ta,le);function bi(h){const v=Ti();Xe(v,new Ta(v))}lr.STAT_EVENT="statevent";function zc(h,v){le.call(this,lr.STAT_EVENT,h),this.stat=v}C(zc,le);function ot(h){const v=Ti();Xe(v,new zc(v,h))}lr.Ma="timingevent";function Dt(h,v){le.call(this,lr.Ma,h),this.size=v}C(Dt,le);function St(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},v)}function Mn(){this.g=!0}Mn.prototype.xa=function(){this.g=!1};function Qo(h,v,E,R,q,W){h.info(function(){if(h.g)if(W)for(var ue="",Ve=W.split("&"),kt=0;kt<Ve.length;kt++){var Be=Ve[kt].split("=");if(1<Be.length){var zt=Be[0];Be=Be[1];var Ot=zt.split("_");ue=2<=Ot.length&&Ot[1]=="type"?ue+(zt+"="+Be+"&"):ue+(zt+"=redacted&")}}else ue=null;else ue=W;return"XMLHTTP REQ ("+R+") [attempt "+q+"]: "+v+`
`+E+`
`+ue})}function kd(h,v,E,R,q,W,ue){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+q+"]: "+v+`
`+E+`
`+W+" "+ue})}function xi(h,v,E,R){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+As(h,E)+(R?" "+R:"")})}function Fc(h,v){h.info(function(){return"TIMEOUT: "+v})}Mn.prototype.info=function(){};function As(h,v){if(!h.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var R=E[h];if(!(2>R.length)){var q=R[1];if(Array.isArray(q)&&!(1>q.length)){var W=q[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ue=1;ue<q.length;ue++)q[ue]=""}}}}return Wn(E)}catch{return v}}var Ai={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cr;function ur(){}C(ur,Ho),ur.prototype.g=function(){return new XMLHttpRequest},ur.prototype.i=function(){return{}},cr=new ur;function un(h,v,E,R){this.j=h,this.i=v,this.l=E,this.R=R||1,this.U=new ws(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wt}function wt(){this.i=null,this.g="",this.h=!1}var Wo={},ba={};function Xn(h,v,E){h.L=1,h.v=Is(xn(v)),h.m=E,h.P=!0,Br(h,null)}function Br(h,v){h.F=Date.now(),Ss(h),h.A=xn(h.v);var E=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),nl(E.i,"t",R),h.C=0,E=h.j.J,h.h=new wt,h.g=iu(h.j,E?v:null,!h.m),0<h.O&&(h.M=new Dd(T(h.Y,h,h.g),h.O)),v=h.U,E=h.g,R=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(Ts[0]=q.toString()),q=Ts);for(var W=0;W<q.length;W++){var ue=Lc(E,q[W],R||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),bi(),Qo(h.i,h.u,h.A,h.l,h.R,h.m)}un.prototype.ca=function(h){h=h.target;const v=this.M;v&&Bn(h)==3?v.j():this.Y(h)},un.prototype.Y=function(h){try{if(h==this.g)e:{const Ot=Bn(this.g);var v=this.g.Ba();const Kr=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||Wc(this.g)))){this.J||Ot!=4||v==7||(v==8||0>=Kr?bi(3):bi(2)),Si(this);var E=this.g.Z();this.X=E;t:if(qc(this)){var R=Wc(this.g);h="";var q=R.length,W=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$t(this),hr(this);var ue="";break t}this.h.i=new m.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,h+=this.h.i.decode(R[v],{stream:!(W&&v==q-1)});R.length=0,this.h.g+=h,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=E==200,kd(this.i,this.u,this.A,this.l,this.R,Ot,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,kt=this.g;if((Ve=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Ve)){var Be=Ve;break t}}Be=null}if(E=Be)xi(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rs(this,E);else{this.o=!1,this.s=3,ot(12),$t(this),hr(this);break e}}if(this.P){E=!0;let Yt;for(;!this.J&&this.C<ue.length;)if(Yt=Hc(this,ue),Yt==ba){Ot==4&&(this.s=4,ot(14),E=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Wo){this.s=4,ot(15),xi(this.i,this.l,ue,"[Invalid Chunk]"),E=!1;break}else xi(this.i,this.l,Yt,null),Rs(this,Yt);if(qc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||ue.length!=0||this.h.h||(this.s=1,ot(16),E=!1),this.o=this.o&&E,!E)xi(this.i,this.l,ue,"[Invalid Chunked Response]"),$t(this),hr(this);else if(0<ue.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Ls(zt),zt.M=!0,ot(11))}}else xi(this.i,this.l,ue,null),Rs(this,ue);Ot==4&&$t(this),this.o&&!this.J&&(Ot==4?tu(this.j,this):(this.o=!1,Ss(this)))}else Ld(this.g),E==400&&0<ue.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),$t(this),hr(this)}}}catch{}finally{}};function qc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Hc(h,v){var E=h.C,R=v.indexOf(`
`,E);return R==-1?ba:(E=Number(v.substring(E,R)),isNaN(E)?Wo:(R+=1,R+E>v.length?ba:(v=v.slice(R,R+E),h.C=R+E,v)))}un.prototype.cancel=function(){this.J=!0,$t(this)};function Ss(h){h.S=Date.now()+h.I,Gc(h,h.I)}function Gc(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=St(T(h.ba,h),v)}function Si(h){h.B&&(m.clearTimeout(h.B),h.B=null)}un.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Fc(this.i,this.A),this.L!=2&&(bi(),ot(17)),$t(this),this.s=2,hr(this)):Gc(this,this.S-h)};function hr(h){h.j.G==0||h.J||tu(h.j,h)}function $t(h){Si(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,bs(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Rs(h,v){try{var E=h.j;if(E.G!=0&&(E.g==h||Xo(E.h,h))){if(!h.K&&Xo(E.h,h)&&E.G==3){try{var R=E.Da.g.parse(v)}catch{R=null}if(Array.isArray(R)&&R.length==3){var q=R;if(q[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)Pa(E),ka(E);else break e;ol(E),ot(18)}}else E.za=q[1],0<E.za-E.T&&37500>q[2]&&E.F&&E.v==0&&!E.C&&(E.C=St(T(E.Za,E),6e3));if(1>=Aa(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Yr(E,11)}else if((h.K||E.g==h)&&Pa(E),!X(v))for(q=E.Da.g.parse(v),v=0;v<q.length;v++){let Be=q[v];if(E.T=Be[0],Be=Be[1],E.G==2)if(Be[0]=="c"){E.K=Be[1],E.ia=Be[2];const zt=Be[3];zt!=null&&(E.la=zt,E.j.info("VER="+E.la));const Ot=Be[4];Ot!=null&&(E.Aa=Ot,E.j.info("SVER="+E.Aa));const Kr=Be[5];Kr!=null&&typeof Kr=="number"&&0<Kr&&(R=1.5*Kr,E.L=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const Yt=h.g;if(Yt){const vr=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vr){var W=R.h;W.g||vr.indexOf("spdy")==-1&&vr.indexOf("quic")==-1&&vr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Sa(W,W.h),W.h=null))}if(R.D){const cl=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;cl&&(R.ya=cl,et(R.I,R.D,cl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),R=E;var ue=h;if(R.qa=ru(R,R.J?R.ia:null,R.W),ue.K){hn(R.h,ue);var Ve=ue,kt=R.L;kt&&(Ve.I=kt),Ve.B&&(Si(Ve),Ss(Ve)),R.g=ue}else Jc(R);0<E.i.length&&Oa(E)}else Be[0]!="stop"&&Be[0]!="close"||Yr(E,7);else E.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Yr(E,7):sl(E):Be[0]!="noop"&&E.l&&E.l.ta(Be),E.v=0)}}bi(4)}catch{}}var $c=class{constructor(h,v){this.g=h,this.map=v}};function zr(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Aa(h){return h.h?1:h.g?h.g.size:0}function Xo(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Sa(h,v){h.g?h.g.add(v):h.h=v}function hn(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}zr.prototype.cancel=function(){if(this.i=Zo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Zo(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.D);return v}return j(h.i)}function Od(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var v=[],E=h.length,R=0;R<E;R++)v.push(h[R]);return v}v=[],E=0;for(R in h)v[E++]=h[R];return v}function Ra(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var v=[];h=h.length;for(var E=0;E<h;E++)v.push(E);return v}v=[],E=0;for(const R in h)v[E++]=R;return v}}}function Jo(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var E=Ra(h),R=Od(h),q=R.length,W=0;W<q;W++)v.call(void 0,R[W],E&&E[W],h)}var Cs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pd(h,v){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var R=h[E].indexOf("="),q=null;if(0<=R){var W=h[E].substring(0,R);q=h[E].substring(R+1)}else W=h[E];v(W,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Rt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Rt){this.h=h.h,Ns(this,h.j),this.o=h.o,this.g=h.g,Ri(this,h.s),this.l=h.l;var v=h.i,E=new qr;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),Fr(this,E),this.m=h.m}else h&&(v=String(h).match(Cs))?(this.h=!1,Ns(this,v[1]||"",!0),this.o=Un(v[2]||""),this.g=Un(v[3]||"",!0),Ri(this,v[4]),this.l=Un(v[5]||"",!0),Fr(this,v[6]||"",!0),this.m=Un(v[7]||"")):(this.h=!1,this.i=new qr(null,this.h))}Rt.prototype.toString=function(){var h=[],v=this.j;v&&h.push(js(v,el,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(js(v,el,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(js(E,E.charAt(0)=="/"?Md:tl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",js(E,Ca)),h.join("")};function xn(h){return new Rt(h)}function Ns(h,v,E){h.j=E?Un(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ri(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Fr(h,v,E){v instanceof qr?(h.i=v,Kc(h.i,h.h)):(E||(v=js(v,Ud)),h.i=new qr(v,h.h))}function et(h,v,E){h.i.set(v,E)}function Is(h){return et(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Un(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function js(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,Yc),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Yc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var el=/[#\/\?@]/g,tl=/[#\?:]/g,Md=/[#\?]/g,Ud=/[#\?@]/g,Ca=/#/g;function qr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Ln(h){h.g||(h.g=new Map,h.h=0,h.i&&Pd(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}r=qr.prototype,r.add=function(h,v){Ln(this),this.i=null,h=dr(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function Hr(h,v){Ln(h),v=dr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Gr(h,v){return Ln(h),v=dr(h,v),h.g.has(v)}r.forEach=function(h,v){Ln(this),this.g.forEach(function(E,R){E.forEach(function(q){h.call(v,q,R,this)},this)},this)},r.na=function(){Ln(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let R=0;R<v.length;R++){const q=h[R];for(let W=0;W<q.length;W++)E.push(v[R])}return E},r.V=function(h){Ln(this);let v=[];if(typeof h=="string")Gr(this,h)&&(v=v.concat(this.g.get(dr(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)v=v.concat(h[E])}return v},r.set=function(h,v){return Ln(this),this.i=null,h=dr(this,h),Gr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},r.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function nl(h,v,E){Hr(h,v),0<E.length&&(h.i=null,h.g.set(dr(h,v),j(E)),h.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var R=v[E];const W=encodeURIComponent(String(R)),ue=this.V(R);for(R=0;R<ue.length;R++){var q=W;ue[R]!==""&&(q+="="+encodeURIComponent(String(ue[R]))),h.push(q)}}return this.i=h.join("&")};function dr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Kc(h,v){v&&!h.j&&(Ln(h),h.i=null,h.g.forEach(function(E,R){var q=R.toLowerCase();R!=q&&(Hr(this,R),nl(this,q,E))},h)),h.j=v}function Ds(h,v){const E=new Mn;if(m.Image){const R=new Image;R.onload=D(Vn,E,"TestLoadImage: loaded",!0,v,R),R.onerror=D(Vn,E,"TestLoadImage: error",!1,v,R),R.onabort=D(Vn,E,"TestLoadImage: abort",!1,v,R),R.ontimeout=D(Vn,E,"TestLoadImage: timeout",!1,v,R),m.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else v(!1)}function Zn(h,v){const E=new Mn,R=new AbortController,q=setTimeout(()=>{R.abort(),Vn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:R.signal}).then(W=>{clearTimeout(q),W.ok?Vn(E,"TestPingServer: ok",!0,v):Vn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),Vn(E,"TestPingServer: error",!1,v)})}function Vn(h,v,E,R,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),R(E)}catch{}}function ks(){this.g=new xs}function fr(h,v,E){const R=E||"";try{Jo(h,function(q,W){let ue=q;y(q)&&(ue=Wn(q)),v.push(R+W+"="+encodeURIComponent(ue))})}catch(q){throw v.push(R+"type="+encodeURIComponent("_badmap")),q}}function Ci(h){this.l=h.Ub||null,this.j=h.eb||!1}C(Ci,Ho),Ci.prototype.g=function(){return new $r(this.l,this.j)},Ci.prototype.i=function(h){return function(){return h}}({});function $r(h,v){mt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C($r,mt),r=$r.prototype,r.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,pr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||m).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mr(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,pr(this)),this.g&&(this.readyState=3,pr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function rl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?mr(this):pr(this),this.readyState==3&&rl(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,mr(this))},r.Qa=function(h){this.g&&(this.response=h,mr(this))},r.ga=function(){this.g&&mr(this)};function mr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,pr(h)}r.setRequestHeader=function(h,v){this.u.append(h,v)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function pr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty($r.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function il(h){let v="";return oe(h,function(E,R){v+=R,v+=":",v+=E,v+=`\r
`}),v}function Bt(h,v,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=il(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):et(h,v,E))}function Qe(h){mt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Qe,mt);var Na=/^https?$/i,Os=["POST","PUT"];r=Qe.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,v,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cr.g(),this.v=this.o?Go(this.o):Go(cr),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(W){Qc(this,W);return}if(h=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var q in R)E.set(q,R[q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const W of R.keys())E.set(W,R.get(W));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(W=>W.toLowerCase()=="content-type"),q=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Os,v,void 0))||R||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ue]of E)this.g.setRequestHeader(W,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ps(this),this.u=!0,this.g.send(h),this.u=!1}catch(W){Qc(this,W)}};function Qc(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Ia(h),gr(h)}function Ia(h){h.A||(h.A=!0,Xe(h,"complete"),Xe(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Xe(this,"complete"),Xe(this,"abort"),gr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gr(this,!0)),Qe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ja(this):this.bb())},r.bb=function(){ja(this)};function ja(h){if(h.h&&typeof d<"u"&&(!h.v[1]||Bn(h)!=4||h.Z()!=2)){if(h.u&&Bn(h)==4)tn(h.Ea,0,h);else if(Xe(h,"readystatechange"),Bn(h)==4){h.h=!1;try{const ue=h.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var R;if(R=ue===0){var q=String(h.D).match(Cs)[1]||null;!q&&m.self&&m.self.location&&(q=m.self.location.protocol.slice(0,-1)),R=!Na.test(q?q.toLowerCase():"")}E=R}if(E)Xe(h,"complete"),Xe(h,"success");else{h.m=6;try{var W=2<Bn(h)?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.Z()+"]",Ia(h)}}finally{gr(h)}}}}function gr(h,v){if(h.g){Ps(h);const E=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Xe(h,"ready");try{E.onreadystatechange=R}catch{}}}function Ps(h){h.I&&(m.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function Bn(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),wa(v)}};function Wc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ld(h){const v={};h=(h.g&&2<=Bn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(X(h[R]))continue;var E=I(h[R]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const W=v[q]||[];v[q]=W,W.push(E)}U(v,function(R){return R.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function Da(h){this.Aa=0,this.i=[],this.j=new Mn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ms("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ms("baseRetryDelayMs",5e3,h),this.cb=Ms("retryDelaySeedMs",1e4,h),this.Wa=Ms("forwardChannelMaxRetries",2,h),this.wa=Ms("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new zr(h&&h.concurrentRequestLimit),this.Da=new ks,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Da.prototype,r.la=8,r.G=1,r.connect=function(h,v,E,R){ot(0),this.W=h,this.H=v||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.I=ru(this,null,this.W),Oa(this)};function sl(h){if(Xc(h),h.G==3){var v=h.U++,E=xn(h.I);if(et(E,"SID",h.K),et(E,"RID",v),et(E,"TYPE","terminate"),Us(h,E),v=new un(h,h.j,v),v.L=2,v.v=Is(xn(E)),E=!1,m.navigator&&m.navigator.sendBeacon)try{E=m.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&m.Image&&(new Image().src=v.v,E=!0),E||(v.g=iu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ss(v)}nu(h)}function ka(h){h.g&&(Ls(h),h.g.cancel(),h.g=null)}function Xc(h){ka(h),h.u&&(m.clearTimeout(h.u),h.u=null),Pa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function Oa(h){if(!xa(h.h)&&!h.s){h.s=!0;var v=h.Ga;ce||V(),de||(ce(),de=!0),Se.add(v,h),h.B=0}}function Vd(h,v){return Aa(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=St(T(h.Ga,h,v),ll(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new un(this,this.j,h);let W=this.o;if(this.S&&(W?(W=N(W),S(W,this.S)):W=this.S),this.m!==null||this.O||(q.H=W,W=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(v+=R,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Zc(this,q,v),E=xn(this.I),et(E,"RID",h),et(E,"CVER",22),this.D&&et(E,"X-HTTP-Session-Id",this.D),Us(this,E),W&&(this.O?v="headers="+encodeURIComponent(String(il(W)))+"&"+v:this.m&&Bt(E,this.m,W)),Sa(this.h,q),this.Ua&&et(E,"TYPE","init"),this.P?(et(E,"$req",v),et(E,"SID","null"),q.T=!0,Xn(q,E,null)):Xn(q,E,v),this.G=2}}else this.G==3&&(h?al(this,h):this.i.length==0||xa(this.h)||al(this))};function al(h,v){var E;v?E=v.l:E=h.U++;const R=xn(h.I);et(R,"SID",h.K),et(R,"RID",E),et(R,"AID",h.T),Us(h,R),h.m&&h.o&&Bt(R,h.m,h.o),E=new un(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Zc(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Sa(h.h,E),Xn(E,R,v)}function Us(h,v){h.H&&oe(h.H,function(E,R){et(v,R,E)}),h.l&&Jo({},function(E,R){et(v,R,E)})}function Zc(h,v,E){E=Math.min(h.i.length,E);var R=h.l?T(h.l.Na,h.l,h):null;e:{var q=h.i;let W=-1;for(;;){const ue=["count="+E];W==-1?0<E?(W=q[0].g,ue.push("ofs="+W)):W=0:ue.push("ofs="+W);let Ve=!0;for(let kt=0;kt<E;kt++){let Be=q[kt].g;const zt=q[kt].map;if(Be-=W,0>Be)W=Math.max(0,q[kt].g-100),Ve=!1;else try{fr(zt,ue,"req"+Be+"_")}catch{R&&R(zt)}}if(Ve){R=ue.join("&");break e}}}return h=h.i.splice(0,E),v.D=h,R}function Jc(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;ce||V(),de||(ce(),de=!0),Se.add(v,h),h.v=0}}function ol(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=St(T(h.Fa,h),ll(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,eu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=St(T(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),ka(this),eu(this))};function Ls(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function eu(h){h.g=new un(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=xn(h.qa);et(v,"RID","rpc"),et(v,"SID",h.K),et(v,"AID",h.T),et(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&et(v,"TO",h.ja),et(v,"TYPE","xmlhttp"),Us(h,v),h.m&&h.o&&Bt(v,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Is(xn(v)),E.m=null,E.P=!0,Br(E,h)}r.Za=function(){this.C!=null&&(this.C=null,ka(this),ol(this),ot(19))};function Pa(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function tu(h,v){var E=null;if(h.g==v){Pa(h),Ls(h),h.g=null;var R=2}else if(Xo(h.h,v))E=v.D,hn(h.h,v),R=1;else return;if(h.G!=0){if(v.o)if(R==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var q=h.B;R=Ti(),Xe(R,new Dt(R,E)),Oa(h)}else Jc(h);else if(q=v.s,q==3||q==0&&0<v.X||!(R==1&&Vd(h,v)||R==2&&ol(h)))switch(E&&0<E.length&&(v=h.h,v.i=v.i.concat(E)),q){case 1:Yr(h,5);break;case 4:Yr(h,10);break;case 3:Yr(h,6);break;default:Yr(h,2)}}}function ll(h,v){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*v}function Yr(h,v){if(h.j.info("Error code "+v),v==2){var E=T(h.fb,h),R=h.Xa;const q=!R;R=new Rt(R||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ns(R,"https"),Is(R),q?Ds(R.toString(),E):Zn(R.toString(),E)}else ot(2);h.G=0,h.l&&h.l.sa(v),nu(h),Xc(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function nu(h){if(h.G=0,h.ka=[],h.l){const v=Zo(h.h);(v.length!=0||h.i.length!=0)&&(k(h.ka,v),k(h.ka,h.i),h.h.i.length=0,j(h.i),h.i.length=0),h.l.ra()}}function ru(h,v,E){var R=E instanceof Rt?xn(E):new Rt(E);if(R.g!="")v&&(R.g=v+"."+R.g),Ri(R,R.s);else{var q=m.location;R=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var W=new Rt(null);R&&Ns(W,R),v&&(W.g=v),q&&Ri(W,q),E&&(W.l=E),R=W}return E=h.D,v=h.ya,E&&v&&et(R,E,v),et(R,"VER",h.la),Us(h,R),R}function iu(h,v,E){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new Qe(new Ci({eb:E})):new Qe(h.pa),v.Ha(h.J),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function su(){}r=su.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ma(){}Ma.prototype.g=function(h,v){return new dn(h,v)};function dn(h,v){mt.call(this),this.g=new Da(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!X(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!X(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new yr(this)}C(dn,mt),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){sl(this.g)},dn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=Wn(h),h=E);v.i.push(new $c(v.Ya++,h)),v.G==3&&Oa(v)},dn.prototype.N=function(){this.g.l=null,delete this.j,sl(this.g),delete this.g,dn.aa.N.call(this)};function au(h){Lr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}C(au,Lr);function ou(){Yo.call(this),this.status=1}C(ou,Yo);function yr(h){this.g=h}C(yr,su),yr.prototype.ua=function(){Xe(this.g,"a")},yr.prototype.ta=function(h){Xe(this.g,new au(h))},yr.prototype.sa=function(h){Xe(this.g,new ou)},yr.prototype.ra=function(){Xe(this.g,"b")},Ma.prototype.createWebChannel=Ma.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,Vw=function(){return new Ma},Lw=function(){return Ti()},Uw=lr,lp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ai.NO_ERROR=0,Ai.TIMEOUT=8,Ai.HTTP_ERROR=6,_h=Ai,Vr.COMPLETE="complete",Mw=Vr,$o.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",mt.prototype.listen=mt.prototype.K,nc=$o,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,Pw=Qe}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});const j0="@firebase/firestore",D0="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new Vp("@firebase/firestore");function ho(){return aa.logLevel}function pe(r,...e){if(aa.logLevel<=Ue.DEBUG){const t=e.map(Fp);aa.debug(`Firestore (${ko}): ${r}`,...t)}}function yi(r,...e){if(aa.logLevel<=Ue.ERROR){const t=e.map(Fp);aa.error(`Firestore (${ko}): ${r}`,...t)}}function Eo(r,...e){if(aa.logLevel<=Ue.WARN){const t=e.map(Fp);aa.warn(`Firestore (${ko}): ${r}`,...t)}}function Fp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Bw(r,s,t)}function Bw(r,e,t){let s=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw yi(s),new Error(s)}function We(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||Bw(e,o,s)}function Ne(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Pr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(an.UNAUTHENTICATED))}shutdown(){}}class pC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gC{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let c=new di;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new di,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new di)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string",31837,{l:s}),new zw(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new an(e)}}class yC{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=an.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vC{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new yC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class k0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _C{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const s=c=>{c.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,pe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const o=c=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new k0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new k0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=EC(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<t&&(s+=e.charAt(o[c]%62))}return s}}function ke(r,e){return r<e?-1:r>e?1:0}function cp(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return ke(s,o);{const c=Fw(),d=wC(c.encode(O0(r,t)),c.encode(O0(e,t)));return d!==0?d:ke(s,o)}}t+=s>65535?2:1}return ke(r.length,e.length)}function O0(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function wC(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return ke(r[t],e[t]);return ke(r.length,e.length)}function wo(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=-62135596800,M0=1e6;class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*M0);return new Ut(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<P0)throw new me(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/M0}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-P0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Ut(0,0))}static max(){return new Ce(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="__name__";class xr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return xr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const c=xr.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return ke(e.length,t.length)}static compareSegments(e,t){const s=xr.isNumericId(e),o=xr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?xr.extractNumericId(e).compare(xr.extractNumericId(t)):cp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return is.fromString(e.substring(4,e.length-2))}}class at extends xr{construct(e,t,s){return new at(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new me(re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new at(t)}static emptyPath(){return new at([])}}const TC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends xr{construct(e,t,s){return new Zt(e,t,s)}static isValidIdentifier(e){return TC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===U0}static keyField(){return new Zt([U0])}static fromServerFormat(e){const t=[];let s="",o=0;const c=()=>{if(s.length===0)throw new me(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new me(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new me(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(c(),o++)}if(c(),d)throw new me(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(at.fromString(e))}static fromName(e){return new Ee(at.fromString(e).popFirst(5))}static empty(){return new Ee(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new at(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=-1;function bC(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(s===1e9?new Ut(t+1,0):new Ut(t,s));return new os(o,Ee.empty(),e)}function xC(r){return new os(r.readTime,r.key,pc)}class os{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new os(Ce.min(),Ee.empty(),pc)}static max(){return new os(Ce.max(),Ee.empty(),pc)}}function AC(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(r.documentKey,e.documentKey),t!==0?t:ke(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(r){if(r.code!==re.FAILED_PRECONDITION||r.message!==SC)throw r;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,s)=>{t(e)})}static reject(e){return new se((t,s)=>{s(e)})}static waitFor(e){return new se((t,s)=>{let o=0,c=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++c,d&&c===o&&t()},g=>s(g))}),d=!0,c===o&&t()})}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next(o=>o?se.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,c)=>{s.push(t.call(this,o,c))}),this.waitFor(s)}static mapArray(e,t){return new se((s,o)=>{const c=e.length,d=new Array(c);let m=0;for(let g=0;g<c;g++){const y=g;t(e[y]).next(_=>{d[y]=_,++m,m===c&&s(d)},_=>o(_))}})}static doWhile(e,t){return new se((s,o)=>{const c=()=>{e()===!0?t().next(()=>{c()},o):s()};c()})}}function CC(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Po(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>t.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}td.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=-1;function nd(r){return r==null}function Dh(r){return r===0&&1/r==-1/0}function NC(r){return typeof r=="number"&&Number.isInteger(r)&&!Dh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="";function IC(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=L0(e)),e=jC(r.get(t),e);return L0(e)}function jC(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":t+="";break;case Hw:t+="";break;default:t+=c}}return t}function L0(r){return r+Hw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ps(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Gw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,s,o,c){this.key=e,this.value=t,this.color=s??Xt.RED,this.left=o??Xt.EMPTY,this.right=c??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,c){return new Xt(e??this.key,t??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,s),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,s,o,c){return this}insert(e,t,s){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new B0(this.data.getIterator())}getIteratorFrom(e){return new B0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class B0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Lt(Zt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new $w("Invalid base64 string: "+c):c}}(e);return new Jt(t)}static fromUint8Array(e){const t=function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c}(e);return new Jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const DC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ls(r){if(We(!!r,39018),typeof r=="string"){let e=0;const t=DC.exec(r);if(We(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(r.seconds),nanos:At(r.nanos)}}function At(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function cs(r){return typeof r=="string"?Jt.fromBase64String(r):Jt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="server_timestamp",Kw="__type__",Qw="__previous_value__",Ww="__local_write_time__";function Hp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Kw])===null||t===void 0?void 0:t.stringValue)===Yw}function rd(r){const e=r.mapValue.fields[Qw];return Hp(e)?rd(e):e}function gc(r){const e=ls(r.mapValue.fields[Ww].timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t,s,o,c,d,m,g,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=_}}const kh="(default)";class yc{constructor(e,t){this.projectId=e,this.database=t||kh}static empty(){return new yc("","")}get isDefaultDatabase(){return this.database===kh}isEqual(e){return e instanceof yc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="__type__",OC="__max__",hh={mapValue:{}},Zw="__vector__",Oh="value";function us(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Hp(r)?4:MC(r)?9007199254740991:PC(r)?10:11:Ae(28295,{value:r})}function Ir(r,e){if(r===e)return!0;const t=us(r);if(t!==us(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return gc(r).isEqual(gc(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=ls(o.timestampValue),m=ls(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,c){return cs(o.bytesValue).isEqual(cs(c.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,c){return At(o.geoPointValue.latitude)===At(c.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(c.geoPointValue.longitude)}(r,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return At(o.integerValue)===At(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=At(o.doubleValue),m=At(c.doubleValue);return d===m?Dh(d)===Dh(m):isNaN(d)&&isNaN(m)}return!1}(r,e);case 9:return wo(r.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:case 11:return function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(V0(d)!==V0(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!Ir(d[g],m[g])))return!1;return!0}(r,e);default:return Ae(52216,{left:r})}}function vc(r,e){return(r.values||[]).find(t=>Ir(t,e))!==void 0}function To(r,e){if(r===e)return 0;const t=us(r),s=us(e);if(t!==s)return ke(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(r.booleanValue,e.booleanValue);case 2:return function(c,d){const m=At(c.integerValue||c.doubleValue),g=At(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(r,e);case 3:return z0(r.timestampValue,e.timestampValue);case 4:return z0(gc(r),gc(e));case 5:return cp(r.stringValue,e.stringValue);case 6:return function(c,d){const m=cs(c),g=cs(d);return m.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(c,d){const m=c.split("/"),g=d.split("/");for(let y=0;y<m.length&&y<g.length;y++){const _=ke(m[y],g[y]);if(_!==0)return _}return ke(m.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,d){const m=ke(At(c.latitude),At(d.latitude));return m!==0?m:ke(At(c.longitude),At(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return F0(r.arrayValue,e.arrayValue);case 10:return function(c,d){var m,g,y,_;const x=c.fields||{},T=d.fields||{},D=(m=x[Oh])===null||m===void 0?void 0:m.arrayValue,C=(g=T[Oh])===null||g===void 0?void 0:g.arrayValue,j=ke(((y=D==null?void 0:D.values)===null||y===void 0?void 0:y.length)||0,((_=C==null?void 0:C.values)===null||_===void 0?void 0:_.length)||0);return j!==0?j:F0(D,C)}(r.mapValue,e.mapValue);case 11:return function(c,d){if(c===hh.mapValue&&d===hh.mapValue)return 0;if(c===hh.mapValue)return 1;if(d===hh.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),y=d.fields||{},_=Object.keys(y);g.sort(),_.sort();for(let x=0;x<g.length&&x<_.length;++x){const T=cp(g[x],_[x]);if(T!==0)return T;const D=To(m[g[x]],y[_[x]]);if(D!==0)return D}return ke(g.length,_.length)}(r.mapValue,e.mapValue);default:throw Ae(23264,{Pe:t})}}function z0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ke(r,e);const t=ls(r),s=ls(e),o=ke(t.seconds,s.seconds);return o!==0?o:ke(t.nanos,s.nanos)}function F0(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const c=To(t[o],s[o]);if(c)return c}return ke(t.length,s.length)}function bo(r){return up(r)}function up(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=ls(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return cs(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Ee.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const c of t.values||[])o?o=!1:s+=",",s+=up(c);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const d of s)c?c=!1:o+=",",o+=`${d}:${up(t.fields[d])}`;return o+"}"}(r.mapValue):Ae(61005,{value:r})}function Eh(r){switch(us(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rd(r);return e?16+Eh(e):16;case 5:return 2*r.stringValue.length;case 6:return cs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,c)=>o+Eh(c),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return ps(s.fields,(c,d)=>{o+=c.length+Eh(d)}),o}(r.mapValue);default:throw Ae(13486,{value:r})}}function q0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function hp(r){return!!r&&"integerValue"in r}function Gp(r){return!!r&&"arrayValue"in r}function H0(r){return!!r&&"nullValue"in r}function G0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function wh(r){return!!r&&"mapValue"in r}function PC(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Xw])===null||t===void 0?void 0:t.stringValue)===Zw}function oc(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ps(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=oc(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oc(r.arrayValue.values[t]);return e}return Object.assign({},r)}function MC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===OC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!wh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(t)}setAll(e){let t=Zt.emptyPath(),s={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}d?s[m.lastSegment()]=oc(d):o.push(m.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,s,o)}delete(e){const t=this.field(e.popLast());wh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];wh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){ps(t,(o,c)=>e[o]=c);for(const o of s)delete e[o]}clone(){return new Tn(oc(this.value))}}function Jw(r){const e=[];return ps(r.fields,(t,s)=>{const o=new Zt([t]);if(wh(s)){const c=Jw(s.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,s,o,c,d,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new on(e,0,Ce.min(),Ce.min(),Ce.min(),Tn.empty(),0)}static newFoundDocument(e,t,s,o){return new on(e,1,t,Ce.min(),s,o,0)}static newNoDocument(e,t){return new on(e,2,t,Ce.min(),Ce.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Ce.min(),Ce.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t){this.position=e,this.inclusive=t}}function $0(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const c=e[o],d=r.position[o];if(c.field.isKeyField()?s=Ee.comparator(Ee.fromName(d.referenceValue),t.key):s=To(d,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Y0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ir(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t="asc"){this.field=e,this.dir=t}}function UC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{}class jt extends eT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new VC(e,t,s):t==="array-contains"?new FC(e,s):t==="in"?new qC(e,s):t==="not-in"?new HC(e,s):t==="array-contains-any"?new GC(e,s):new jt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new BC(e,s):new zC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(To(t,this.value)):t!==null&&us(this.value)===us(t)&&this.matchesComparison(To(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ar extends eT{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ar(e,t)}matches(e){return tT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function tT(r){return r.op==="and"}function nT(r){return LC(r)&&tT(r)}function LC(r){for(const e of r.filters)if(e instanceof ar)return!1;return!0}function dp(r){if(r instanceof jt)return r.field.canonicalString()+r.op.toString()+bo(r.value);if(nT(r))return r.filters.map(e=>dp(e)).join(",");{const e=r.filters.map(t=>dp(t)).join(",");return`${r.op}(${e})`}}function rT(r,e){return r instanceof jt?function(s,o){return o instanceof jt&&s.op===o.op&&s.field.isEqual(o.field)&&Ir(s.value,o.value)}(r,e):r instanceof ar?function(s,o){return o instanceof ar&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((c,d,m)=>c&&rT(d,o.filters[m]),!0):!1}(r,e):void Ae(19439)}function iT(r){return r instanceof jt?function(t){return`${t.field.canonicalString()} ${t.op} ${bo(t.value)}`}(r):r instanceof ar?function(t){return t.op.toString()+" {"+t.getFilters().map(iT).join(" ,")+"}"}(r):"Filter"}class VC extends jt{constructor(e,t,s){super(e,t,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class BC extends jt{constructor(e,t){super(e,"in",t),this.keys=sT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zC extends jt{constructor(e,t){super(e,"not-in",t),this.keys=sT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sT(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Ee.fromName(s.referenceValue))}class FC extends jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gp(t)&&vc(t.arrayValue,this.value)}}class qC extends jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&vc(this.value.arrayValue,t)}}class HC extends jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!vc(this.value.arrayValue,t)}}class GC extends jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>vc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,t=null,s=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.Ie=null}}function K0(r,e=null,t=[],s=[],o=null,c=null,d=null){return new $C(r,e,t,s,o,c,d)}function $p(r){const e=Ne(r);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>dp(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),nd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>bo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>bo(s)).join(",")),e.Ie=t}return e.Ie}function Yp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!UC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!rT(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Y0(r.startAt,e.startAt)&&Y0(r.endAt,e.endAt)}function fp(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t=null,s=[],o=[],c=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function YC(r,e,t,s,o,c,d,m){return new Mo(r,e,t,s,o,c,d,m)}function Kp(r){return new Mo(r)}function Q0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function aT(r){return r.collectionGroup!==null}function lc(r){const e=Ne(r);if(e.Ee===null){e.Ee=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ee.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Lt(Zt.comparator);return d.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ee.push(new _c(c,s))}),t.has(Zt.keyField().canonicalString())||e.Ee.push(new _c(Zt.keyField(),s))}return e.Ee}function Rr(r){const e=Ne(r);return e.de||(e.de=KC(e,lc(r))),e.de}function KC(r,e){if(r.limitType==="F")return K0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new _c(o.field,c)});const t=r.endAt?new Ph(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Ph(r.startAt.position,r.startAt.inclusive):null;return K0(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function mp(r,e){const t=r.filters.concat([e]);return new Mo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Mh(r,e,t){return new Mo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function id(r,e){return Yp(Rr(r),Rr(e))&&r.limitType===e.limitType}function oT(r){return`${$p(Rr(r))}|lt:${r.limitType}`}function fo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>iT(o)).join(", ")}]`),nd(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>bo(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>bo(o)).join(",")),`Target(${s})`}(Rr(r))}; limitType=${r.limitType})`}function sd(r,e){return e.isFoundDocument()&&function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ee.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(r,e)&&function(s,o){for(const c of lc(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(d,m,g){const y=$0(d,m,g);return d.inclusive?y<=0:y<0}(s.startAt,lc(s),o)||s.endAt&&!function(d,m,g){const y=$0(d,m,g);return d.inclusive?y>=0:y>0}(s.endAt,lc(s),o))}(r,e)}function QC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function lT(r){return(e,t)=>{let s=!1;for(const o of lc(r)){const c=WC(o,e,t);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function WC(r,e,t){const s=r.field.isKeyField()?Ee.comparator(e.key,t.key):function(c,d,m){const g=d.data.field(c),y=m.data.field(c);return g!==null&&y!==null?To(g,y):Ae(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,(t,s)=>{for(const[o,c]of s)e(o,c)})}isEmpty(){return Gw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=new ft(Ee.comparator);function vi(){return XC}const cT=new ft(Ee.comparator);function rc(...r){let e=cT;for(const t of r)e=e.insert(t.key,t);return e}function uT(r){let e=cT;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ta(){return cc()}function hT(){return cc()}function cc(){return new pa(r=>r.toString(),(r,e)=>r.isEqual(e))}const ZC=new ft(Ee.comparator),JC=new Lt(Ee.comparator);function Le(...r){let e=JC;for(const t of r)e=e.add(t);return e}const eN=new Lt(ke);function tN(){return eN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dh(e)?"-0":e}}function dT(r){return{integerValue:""+r}}function fT(r,e){return NC(e)?dT(e):Qp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this._=void 0}}function nN(r,e,t){return r instanceof Ec?function(o,c){const d={fields:{[Kw]:{stringValue:Yw},[Ww]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Hp(c)&&(c=rd(c)),c&&(d.fields[Qw]=c),{mapValue:d}}(t,e):r instanceof xo?pT(r,e):r instanceof Ao?gT(r,e):function(o,c){const d=mT(o,c),m=W0(d)+W0(o.Re);return hp(d)&&hp(o.Re)?dT(m):Qp(o.serializer,m)}(r,e)}function rN(r,e,t){return r instanceof xo?pT(r,e):r instanceof Ao?gT(r,e):t}function mT(r,e){return r instanceof wc?function(s){return hp(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class Ec extends ad{}class xo extends ad{constructor(e){super(),this.elements=e}}function pT(r,e){const t=yT(e);for(const s of r.elements)t.some(o=>Ir(o,s))||t.push(s);return{arrayValue:{values:t}}}class Ao extends ad{constructor(e){super(),this.elements=e}}function gT(r,e){let t=yT(e);for(const s of r.elements)t=t.filter(o=>!Ir(o,s));return{arrayValue:{values:t}}}class wc extends ad{constructor(e,t){super(),this.serializer=e,this.Re=t}}function W0(r){return At(r.integerValue||r.doubleValue)}function yT(r){return Gp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.field=e,this.transform=t}}function iN(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof xo&&o instanceof xo||s instanceof Ao&&o instanceof Ao?wo(s.elements,o.elements,Ir):s instanceof wc&&o instanceof wc?Ir(s.Re,o.Re):s instanceof Ec&&o instanceof Ec}(r.transform,e.transform)}class sN{constructor(e,t){this.version=e,this.transformResults=t}}class rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Th(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class ld{}function vT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new ET(r.key,rr.none()):new Nc(r.key,r.data,rr.none());{const t=r.data,s=Tn.empty();let o=new Lt(Zt.comparator);for(let c of e.fields)if(!o.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?s.delete(c):s.set(c,d),o=o.add(c)}return new gs(r.key,s,new Dn(o.toArray()),rr.none())}}function aN(r,e,t){r instanceof Nc?function(o,c,d){const m=o.value.clone(),g=Z0(o.fieldTransforms,c,d.transformResults);m.setAll(g),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(r,e,t):r instanceof gs?function(o,c,d){if(!Th(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Z0(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(_T(o)),g.setAll(m),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,e,t):function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function uc(r,e,t,s){return r instanceof Nc?function(c,d,m,g){if(!Th(c.precondition,d))return m;const y=c.value.clone(),_=J0(c.fieldTransforms,g,d);return y.setAll(_),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null}(r,e,t,s):r instanceof gs?function(c,d,m,g){if(!Th(c.precondition,d))return m;const y=J0(c.fieldTransforms,g,d),_=d.data;return _.setAll(_T(c)),_.setAll(y),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(x=>x.field))}(r,e,t,s):function(c,d,m){return Th(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(r,e,t)}function oN(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),c=mT(s.transform,o||null);c!=null&&(t===null&&(t=Tn.empty()),t.set(s.field,c))}return t||null}function X0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&wo(s,o,(c,d)=>iN(c,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Nc extends ld{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class gs extends ld{constructor(e,t,s,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function _T(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Z0(r,e,t){const s=new Map;We(r.length===t.length,32656,{Ve:t.length,me:r.length});for(let o=0;o<t.length;o++){const c=r[o],d=c.transform,m=e.data.field(c.field);s.set(c.field,rN(d,m,t[o]))}return s}function J0(r,e,t){const s=new Map;for(const o of r){const c=o.transform,d=t.data.field(o.field);s.set(o.field,nN(c,d,e))}return s}class ET extends ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lN extends ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&aN(c,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=uc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=uc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=hT();return this.mutations.forEach(o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(o.key)?null:m;const g=vT(d,m);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Ce.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&wo(this.mutations,e.mutations,(t,s)=>X0(t,s))&&wo(this.baseMutations,e.baseMutations,(t,s)=>X0(t,s))}}class Wp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){We(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return ZC}();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,s[d].version);return new Wp(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Fe;function dN(r){switch(r){case re.OK:return Ae(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function wT(r){if(r===void 0)return yi("GRPC error has no .code"),re.UNKNOWN;switch(r){case It.OK:return re.OK;case It.CANCELLED:return re.CANCELLED;case It.UNKNOWN:return re.UNKNOWN;case It.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case It.INTERNAL:return re.INTERNAL;case It.UNAVAILABLE:return re.UNAVAILABLE;case It.UNAUTHENTICATED:return re.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case It.NOT_FOUND:return re.NOT_FOUND;case It.ALREADY_EXISTS:return re.ALREADY_EXISTS;case It.PERMISSION_DENIED:return re.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case It.ABORTED:return re.ABORTED;case It.OUT_OF_RANGE:return re.OUT_OF_RANGE;case It.UNIMPLEMENTED:return re.UNIMPLEMENTED;case It.DATA_LOSS:return re.DATA_LOSS;default:return Ae(39323,{code:r})}}(Fe=It||(It={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=new is([4294967295,4294967295],0);function eE(r){const e=Fw().encode(r),t=new Ow;return t.update(e),new Uint8Array(t.digest())}function tE(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new is([t,s],0),new is([o,c],0)]}class Xp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ic(`Invalid padding: ${t}`);if(s<0)throw new ic(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ic(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ic(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=is.fromNumber(this.pe)}we(e,t,s){let o=e.add(t.multiply(is.fromNumber(s)));return o.compare(fN)===1&&(o=new is([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=eE(e),[s,o]=tE(t);for(let c=0;c<this.hashCount;c++){const d=this.we(s,o,c);if(!this.be(d))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Xp(c,o,t);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.pe===0)return;const t=eE(e),[s,o]=tE(t);for(let c=0;c<this.hashCount;c++){const d=this.we(s,o,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t,s,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new cd(Ce.min(),o,new ft(ke),vi(),Le())}}class Ic{constructor(e,t,s,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ic(s,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t,s,o){this.De=e,this.removedTargetIds=t,this.key=s,this.ve=o}}class TT{constructor(e,t){this.targetId=e,this.Ce=t}}class bT{constructor(e,t,s=Jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class nE{constructor(){this.Fe=0,this.Me=rE(),this.xe=Jt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Le(),t=Le(),s=Le();return this.Me.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:c})}}),new Ic(this.xe,this.Oe,e,t,s)}Qe(){this.Ne=!1,this.Me=rE()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,We(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class mN{constructor(e){this.ze=e,this.je=new Map,this.He=vi(),this.Je=dh(),this.Ye=dh(),this.Ze=new ft(ke)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const s=this.rt(t);switch(e.state){case 0:this.it(t)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(t);break;case 3:this.it(t)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),s.ke(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((s,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,s=e.Ce.count,o=this._t(t);if(o){const c=o.target;if(fp(c))if(s===0){const d=new Ee(c.path);this.tt(t,d,on.newNoDocument(d,Ce.min()))}else We(s===1,20013,{expectedCount:s});else{const d=this.ut(t);if(d!==s){const m=this.ct(e),g=m?this.lt(m,e,d):1;if(g!==0){this.st(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=t;let d,m;try{d=cs(s).toUint8Array()}catch(g){if(g instanceof $w)return Eo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Xp(d,o,c)}catch(g){return Eo(g instanceof ic?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.pe===0?null:m}lt(e,t,s){return t.Ce.count===s-this.Tt(e,t.targetId)?0:2}Tt(e,t){const s=this.ze.getRemoteKeysForTarget(t);let o=0;return s.forEach(c=>{const d=this.ze.Pt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.tt(t,c,null),o++)}),o}It(e){const t=new Map;this.je.forEach((c,d)=>{const m=this._t(d);if(m){if(c.current&&fp(m.target)){const g=new Ee(m.target.path);this.Et(g).has(d)||this.dt(d,g)||this.tt(d,g,on.newNoDocument(g,e))}c.Le&&(t.set(d,c.qe()),c.Qe())}});let s=Le();this.Ye.forEach((c,d)=>{let m=!0;d.forEachWhile(g=>{const y=this._t(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.He.forEach((c,d)=>d.setReadTime(e));const o=new cd(e,t,this.Ze,this.He,s);return this.He=vi(),this.Je=dh(),this.Ye=dh(),this.Ze=new ft(ke),o}et(e,t){if(!this.it(e))return;const s=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,s),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),s&&(this.He=this.He.insert(t,s))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new nE,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Lt(ke),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Lt(ke),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new nE),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function dh(){return new ft(Ee.comparator)}function rE(){return new ft(Ee.comparator)}const pN={asc:"ASCENDING",desc:"DESCENDING"},gN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yN={and:"AND",or:"OR"};class vN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pp(r,e){return r.useProto3Json||nd(e)?e:{value:e}}function Uh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function _N(r,e){return Uh(r,e.toTimestamp())}function Cr(r){return We(!!r,49232),Ce.fromTimestamp(function(t){const s=ls(t);return new Ut(s.seconds,s.nanos)}(r))}function Zp(r,e){return gp(r,e).canonicalString()}function gp(r,e){const t=function(o){return new at(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function AT(r){const e=at.fromString(r);return We(IT(e),10190,{key:e.toString()}),e}function yp(r,e){return Zp(r.databaseId,e.path)}function Hm(r,e){const t=AT(e);if(t.get(1)!==r.databaseId.projectId)throw new me(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new me(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ee(RT(t))}function ST(r,e){return Zp(r.databaseId,e)}function EN(r){const e=AT(r);return e.length===4?at.emptyPath():RT(e)}function vp(r){return new at(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function RT(r){return We(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function iE(r,e,t){return{name:yp(r,e),fields:t.value.mapValue.fields}}function wN(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(y,_){return y.useProto3Json?(We(_===void 0||typeof _=="string",58123),Jt.fromBase64String(_||"")):(We(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Jt.fromUint8Array(_||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(y){const _=y.code===void 0?re.UNKNOWN:wT(y.code);return new me(_,y.message||"")}(d);t=new bT(s,o,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Hm(r,s.document.name),c=Cr(s.document.updateTime),d=s.document.createTime?Cr(s.document.createTime):Ce.min(),m=new Tn({mapValue:{fields:s.document.fields}}),g=on.newFoundDocument(o,c,d,m),y=s.targetIds||[],_=s.removedTargetIds||[];t=new bh(y,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Hm(r,s.document),c=s.readTime?Cr(s.readTime):Ce.min(),d=on.newNoDocument(o,c),m=s.removedTargetIds||[];t=new bh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Hm(r,s.document),c=s.removedTargetIds||[];t=new bh([],c,o,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,d=new hN(o,c),m=s.targetId;t=new TT(m,d)}}return t}function TN(r,e){let t;if(e instanceof Nc)t={update:iE(r,e.key,e.value)};else if(e instanceof ET)t={delete:yp(r,e.key)};else if(e instanceof gs)t={update:iE(r,e.key,e.data),updateMask:jN(e.fieldMask)};else{if(!(e instanceof lN))return Ae(16599,{ft:e.type});t={verify:yp(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,d){const m=d.transform;if(m instanceof Ec)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof xo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ao)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof wc)return{fieldPath:d.field.canonicalString(),increment:m.Re};throw Ae(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:_N(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ae(27497)}(r,e.precondition)),t}function bN(r,e){return r&&r.length>0?(We(e!==void 0,14353),r.map(t=>function(o,c){let d=o.updateTime?Cr(o.updateTime):Cr(c);return d.isEqual(Ce.min())&&(d=Cr(c)),new sN(d,o.transformResults||[])}(t,e))):[]}function xN(r,e){return{documents:[ST(r,e.path)]}}function AN(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=ST(r,o);const c=function(y){if(y.length!==0)return NT(ar.create(y,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const d=function(y){if(y.length!==0)return y.map(_=>function(T){return{field:mo(T.field),direction:CN(T.dir)}}(_))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=pp(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:o}}function SN(r){let e=EN(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){We(s===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let c=[];t.where&&(c=function(x){const T=CT(x);return T instanceof ar&&nT(T)?T.getFilters():[T]}(t.where));let d=[];t.orderBy&&(d=function(x){return x.map(T=>function(C){return new _c(po(C.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(T))}(t.orderBy));let m=null;t.limit&&(m=function(x){let T;return T=typeof x=="object"?x.value:x,nd(T)?null:T}(t.limit));let g=null;t.startAt&&(g=function(x){const T=!!x.before,D=x.values||[];return new Ph(D,T)}(t.startAt));let y=null;return t.endAt&&(y=function(x){const T=!x.before,D=x.values||[];return new Ph(D,T)}(t.endAt)),YC(e,o,d,c,m,"F",g,y)}function RN(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CT(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=po(t.unaryFilter.field);return jt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=po(t.unaryFilter.field);return jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=po(t.unaryFilter.field);return jt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=po(t.unaryFilter.field);return jt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(r):r.fieldFilter!==void 0?function(t){return jt.create(po(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return ar.create(t.compositeFilter.filters.map(s=>CT(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(t.compositeFilter.op))}(r):Ae(30097,{filter:r})}function CN(r){return pN[r]}function NN(r){return gN[r]}function IN(r){return yN[r]}function mo(r){return{fieldPath:r.canonicalString()}}function po(r){return Zt.fromServerFormat(r.fieldPath)}function NT(r){return r instanceof jt?function(t){if(t.op==="=="){if(G0(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NAN"}};if(H0(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(G0(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NAN"}};if(H0(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(t.field),op:NN(t.op),value:t.value}}}(r):r instanceof ar?function(t){const s=t.getFilters().map(o=>NT(o));return s.length===1?s[0]:{compositeFilter:{op:IN(t.op),filters:s}}}(r):Ae(54877,{filter:r})}function jN(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,t,s,o,c=Ce.min(),d=Ce.min(),m=Jt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.wt=e}}function kN(r){const e=SN({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Mh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.yn=new PN}addToCollectionParentIndex(e,t){return this.yn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(os.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(os.min())}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class PN{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Lt(at.comparator),c=!o.has(s);return this.index[t]=o.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Lt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jT=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(jT,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new So(0)}static ir(){return new So(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="LruGarbageCollector",MN=1048576;function oE([r,e],[t,s]){const o=ke(r,t);return o===0?ke(e,s):o}class UN{constructor(e){this.cr=e,this.buffer=new Lt(oE),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();oE(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class LN{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){pe(aE,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Po(t)?pe(aE,"Ignoring IndexedDB error during garbage collection: ",t):await Oo(t)}await this.Ir(3e5)})}}class VN{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return se.resolve(td.le);const s=new UN(t);return this.Er.forEachTarget(e,o=>s.Pr(o.sequenceNumber)).next(()=>this.Er.Ar(e,o=>s.Pr(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Er.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(sE)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sE):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let s,o,c,d,m,g,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,d=Date.now(),this.nthSequenceNumber(e,o))).next(x=>(s=x,m=Date.now(),this.removeTargets(e,s,t))).next(x=>(c=x,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(x=>(y=Date.now(),ho()<=Ue.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${x} documents in `+(y-g)+`ms
Total Duration: ${y-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:x})))}}function BN(r,e){return new VN(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(){this.changes=new pa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&uc(s.mutation,o,Dn.empty(),Ut.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Le()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Le()){const o=ta();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(c=>{let d=rc();return c.forEach((m,g)=>{d=d.insert(m,g.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const s=ta();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Le()))}populateOverlays(e,t,s){const o=[];return s.forEach(c=>{t.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,s,o){let c=vi();const d=cc(),m=function(){return cc()}();return t.forEach((g,y)=>{const _=s.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof gs)?c=c.insert(y.key,y):_!==void 0?(d.set(y.key,_.mutation.getFieldMask()),uc(_.mutation,y,_.mutation.getFieldMask(),Ut.now())):d.set(y.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((y,_)=>d.set(y,_)),t.forEach((y,_)=>{var x;return m.set(y,new FN(_,(x=d.get(y))!==null&&x!==void 0?x:null))}),m))}recalculateAndSaveOverlays(e,t){const s=cc();let o=new ft((d,m)=>d-m),c=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(g=>{const y=t.get(g);if(y===null)return;let _=s.get(g)||Dn.empty();_=m.applyToLocalView(y,_),s.set(g,_);const x=(o.get(m.batchId)||Le()).add(g);o=o.insert(m.batchId,x)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,_=g.value,x=hT();_.forEach(T=>{if(!c.has(T)){const D=vT(t.get(T),s.get(T));D!==null&&x.set(T,D),c=c.add(T)}}),d.push(this.documentOverlayCache.saveOverlays(e,y,x))}return se.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(d){return Ee.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-c.size):se.resolve(ta());let m=pc,g=c;return d.next(y=>se.forEach(y,(_,x)=>(m<x.largestBatchId&&(m=x.largestBatchId),c.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{g=g.insert(_,T)}))).next(()=>this.populateOverlays(e,y,c)).next(()=>this.computeViews(e,g,y,Le())).next(_=>({batchId:m,changes:uT(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(s=>{let o=rc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const c=t.collectionGroup;let d=rc();return this.indexManager.getCollectionParents(e,c).next(m=>se.forEach(m,g=>{const y=function(x,T){return new Mo(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(_=>{_.forEach((x,T)=>{d=d.insert(x,T)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,o))).next(d=>{c.forEach((g,y)=>{const _=y.getKey();d.get(_)===null&&(d=d.insert(_,on.newInvalidDocument(_)))});let m=rc();return d.forEach((g,y)=>{const _=c.get(g);_!==void 0&&uc(_.mutation,y,Dn.empty(),Ut.now()),sd(t,y)&&(m=m.insert(g,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return se.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Cr(o.createTime)}}(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(o){return{name:o.name,query:kN(o.bundledQuery),readTime:Cr(o.readTime)}}(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(){this.overlays=new ft(Ee.comparator),this.Or=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ta();return se.forEach(t,o=>this.getOverlay(e,o).next(c=>{c!==null&&s.set(o,c)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,c)=>{this.St(e,t,c)}),se.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Or.get(s);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Or.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const o=ta(),c=t.length+1,d=new Ee(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&o.set(g.getKey(),g)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let c=new ft((y,_)=>y-_);const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let _=c.get(y.largestBatchId);_===null&&(_=ta(),c=c.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const m=ta(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,_)=>m.set(y,_)),!(m.size()>=o)););return se.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Or.get(o.largestBatchId).delete(s.key);this.Or.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new uN(t,s));let c=this.Or.get(t);c===void 0&&(c=Le(),this.Or.set(t,c)),this.Or.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(){this.Nr=new Lt(Gt.Br),this.Lr=new Lt(Gt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const s=new Gt(e,t);this.Nr=this.Nr.add(s),this.Lr=this.Lr.add(s)}qr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Qr(new Gt(e,t))}$r(e,t){e.forEach(s=>this.removeReference(s,t))}Ur(e){const t=new Ee(new at([])),s=new Gt(t,e),o=new Gt(t,e+1),c=[];return this.Lr.forEachInRange([s,o],d=>{this.Qr(d),c.push(d.key)}),c}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Ee(new at([])),s=new Gt(t,e),o=new Gt(t,e+1);let c=Le();return this.Lr.forEachInRange([s,o],d=>{c=c.add(d.key)}),c}containsKey(e){const t=new Gt(e,0),s=this.Nr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Gt{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Ee.comparator(e.key,t.key)||ke(e.Gr,t.Gr)}static kr(e,t){return ke(e.Gr,t.Gr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Lt(Gt.Br)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const c=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new cN(c,t,s,o);this.mutationQueue.push(d);for(const m of o)this.zr=this.zr.add(new Gt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,t){return se.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Hr(s),c=o<0?0:o;return se.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?qp:this.Jn-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Gt(t,0),o=new Gt(t,Number.POSITIVE_INFINITY),c=[];return this.zr.forEachInRange([s,o],d=>{const m=this.jr(d.Gr);c.push(m)}),se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Lt(ke);return t.forEach(o=>{const c=new Gt(o,0),d=new Gt(o,Number.POSITIVE_INFINITY);this.zr.forEachInRange([c,d],m=>{s=s.add(m.Gr)})}),se.resolve(this.Jr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let c=s;Ee.isDocumentKey(c)||(c=c.child(""));const d=new Gt(new Ee(c),0);let m=new Lt(ke);return this.zr.forEachWhile(g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Gr)),!0)},d),se.resolve(this.Jr(m))}Jr(e){const t=[];return e.forEach(s=>{const o=this.jr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){We(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.zr;return se.forEach(t.mutations,o=>{const c=new Gt(o.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.zr=s})}Xn(e){}containsKey(e,t){const s=new Gt(t,0),o=this.zr.firstAfterOrEqual(s);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.Zr=e,this.docs=function(){return new ft(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),c=o?o.size:0,d=this.Zr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let s=vi();return t.forEach(o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():on.newInvalidDocument(o))}),se.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let c=vi();const d=t.path,m=new Ee(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:_}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||AC(xC(_),s)<=0||(o.has(_.key)||sd(t,_))&&(c=c.insert(_.key,_.mutableCopy()))}return se.resolve(c)}getAllFromCollectionGroup(e,t,s,o){Ae(9500)}Xr(e,t){return se.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new QN(this)}getSize(e){return se.resolve(this.size)}}class QN extends zN{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.vr.addEntry(e,o)):this.vr.removeEntry(s)}),se.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.persistence=e,this.ei=new pa(t=>$p(t),Yp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ti=0,this.ni=new Jp,this.targetCount=0,this.ri=So.rr()}forEachTarget(e,t){return this.ei.forEach((s,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ti&&(this.ti=t),se.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new So(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.ar(t),se.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let o=0;const c=[];return this.ei.forEach((d,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.ei.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(c).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.ei.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this.ni.qr(t,s),se.resolve()}removeMatchingKeys(e,t,s){this.ni.$r(t,s);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach(d=>{c.push(o.markPotentiallyOrphaned(e,d))}),se.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ni.Wr(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,t){this.ii={},this.overlays={},this.si=new td(0),this.oi=!1,this.oi=!0,this._i=new $N,this.referenceDelegate=e(this),this.ai=new WN(this),this.indexManager=new ON,this.remoteDocumentCache=function(o){return new KN(o)}(s=>this.referenceDelegate.ui(s)),this.serializer=new DN(t),this.ci=new HN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ii[e.toKey()];return s||(s=new YN(t,this.referenceDelegate),this.ii[e.toKey()]=s),s}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,s){pe("MemoryPersistence","Starting transaction:",e);const o=new XN(this.si.next());return this.referenceDelegate.li(),s(o).next(c=>this.referenceDelegate.hi(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Pi(e,t){return se.or(Object.values(this.ii).map(s=>()=>s.containsKey(e,t)))}}class XN extends RC{constructor(e){super(),this.currentSequenceNumber=e}}class eg{constructor(e){this.persistence=e,this.Ti=new Jp,this.Ii=null}static Ei(e){return new eg(e)}get di(){if(this.Ii)return this.Ii;throw Ae(60996)}addReference(e,t,s){return this.Ti.addReference(s,t),this.di.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Ti.removeReference(s,t),this.di.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(o=>this.di.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(c=>this.di.add(c.toString()))}).next(()=>s.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.di,s=>{const o=Ee.fromPath(s);return this.Ai(e,o).next(c=>{c||t.removeEntry(o,Ce.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return se.or([()=>se.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Lh{constructor(e,t){this.persistence=e,this.Ri=new pa(s=>IC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=BN(this,t)}static Ei(e,t){return new Lh(e,t)}li(){}hi(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}Vr(e){let t=0;return this.Ar(e,s=>{t++}).next(()=>t)}Ar(e,t){return se.forEach(this.Ri,(s,o)=>this.gr(e,s,o).next(c=>c?se.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.Xr(e,d=>this.gr(e,d,t).next(m=>{m||(s++,c.removeEntry(d,Ce.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.Ri.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,t,s){return this.Ri.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),se.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Eh(e.data.value)),t}gr(e,t,s){return se.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.Ri.get(t);return se.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.ls=s,this.hs=o}static Ps(e,t){let s=Le(),o=Le();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new tg(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return KS()?8:CC(cn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,s,o){const c={result:null};return this.Rs(e,t).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.Vs(e,t,o,s).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new ZN;return this.fs(e,t,d).next(m=>{if(c.result=m,this.Is)return this.gs(e,t,d,m.size)})}).next(()=>c.result)}gs(e,t,s,o){return s.documentReadCount<this.Es?(ho()<=Ue.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),se.resolve()):(ho()<=Ue.DEBUG&&pe("QueryEngine","Query:",fo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(ho()<=Ue.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rr(t))):se.resolve())}Rs(e,t){if(Q0(t))return se.resolve(null);let s=Rr(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Mh(t,null,"F"),s=Rr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const d=Le(...c);return this.As.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(g=>{const y=this.ps(t,m);return this.ys(t,y,d,g.readTime)?this.Rs(e,Mh(t,null,"F")):this.ws(e,y,t,g)}))})))}Vs(e,t,s,o){return Q0(t)||o.isEqual(Ce.min())?se.resolve(null):this.As.getDocuments(e,s).next(c=>{const d=this.ps(t,c);return this.ys(t,d,s,o)?se.resolve(null):(ho()<=Ue.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),fo(t)),this.ws(e,d,t,bC(o,pc)).next(m=>m))})}ps(e,t){let s=new Lt(lT(e));return t.forEach((o,c)=>{sd(e,c)&&(s=s.add(c))}),s}ys(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}fs(e,t,s){return ho()<=Ue.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",fo(t)),this.As.getDocumentsMatchingQuery(e,t,os.min(),s)}ws(e,t,s,o){return this.As.getDocumentsMatchingQuery(e,s,o).next(c=>(t.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="LocalStore",e2=3e8;class t2{constructor(e,t,s,o){this.persistence=e,this.bs=t,this.serializer=o,this.Ss=new ft(ke),this.Ds=new pa(c=>$p(c),Yp),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(s)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qN(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function n2(r,e,t,s){return new t2(r,e,t,s)}async function kT(r,e){const t=Ne(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(c=>(o=c,t.Fs(e),t.mutationQueue.getAllMutationBatches(s))).next(c=>{const d=[],m=[];let g=Le();for(const y of o){d.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}for(const y of c){m.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(s,g).next(y=>({Ms:y,removedBatchIds:d,addedBatchIds:m}))})})}function r2(r,e){const t=Ne(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),c=t.Cs.newChangeBuffer({trackRemovals:!0});return function(m,g,y,_){const x=y.batch,T=x.keys();let D=se.resolve();return T.forEach(C=>{D=D.next(()=>_.getEntry(g,C)).next(j=>{const k=y.docVersions.get(C);We(k!==null,48541),j.version.compareTo(k)<0&&(x.applyToRemoteDocument(j,y),j.isValidDocument()&&(j.setReadTime(y.commitVersion),_.addEntry(j)))})}),D.next(()=>m.mutationQueue.removeMutationBatch(g,x))}(t,s,e,c).next(()=>c.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let g=Le();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function OT(r){const e=Ne(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function i2(r,e){const t=Ne(r),s=e.snapshotVersion;let o=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=t.Cs.newChangeBuffer({trackRemovals:!0});o=t.Ss;const m=[];e.targetChanges.forEach((_,x)=>{const T=o.get(x);if(!T)return;m.push(t.ai.removeMatchingKeys(c,_.removedDocuments,x).next(()=>t.ai.addMatchingKeys(c,_.addedDocuments,x)));let D=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(x)!==null?D=D.withResumeToken(Jt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):_.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(_.resumeToken,s)),o=o.insert(x,D),function(j,k,z){return j.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=e2?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(T,D,_)&&m.push(t.ai.updateTargetData(c,D))});let g=vi(),y=Le();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,_))}),m.push(s2(c,d,e.documentUpdates).next(_=>{g=_.xs,y=_.Os})),!s.isEqual(Ce.min())){const _=t.ai.getLastRemoteSnapshotVersion(c).next(x=>t.ai.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(_)}return se.waitFor(m).next(()=>d.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,g,y)).next(()=>g)}).then(c=>(t.Ss=o,c))}function s2(r,e,t){let s=Le(),o=Le();return t.forEach(c=>s=s.add(c)),e.getEntries(r,s).next(c=>{let d=vi();return t.forEach((m,g)=>{const y=c.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ce.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):pe(ng,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)}),{xs:d,Os:o}})}function a2(r,e){const t=Ne(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=qp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function o2(r,e){const t=Ne(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.ai.getTargetData(s,e).next(c=>c?(o=c,se.resolve(o)):t.ai.allocateTargetId(s).next(d=>(o=new ts(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.ai.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Ss.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(s.targetId,s),t.Ds.set(e,s.targetId)),s})}async function _p(r,e,t){const s=Ne(r),o=s.Ss.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!Po(d))throw d;pe(ng,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ss=s.Ss.remove(e),s.Ds.delete(o.target)}function lE(r,e,t){const s=Ne(r);let o=Ce.min(),c=Le();return s.persistence.runTransaction("Execute query","readwrite",d=>function(g,y,_){const x=Ne(g),T=x.Ds.get(_);return T!==void 0?se.resolve(x.Ss.get(T)):x.ai.getTargetData(y,_)}(s,d,Rr(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.ai.getMatchingKeysForTargetId(d,m.targetId).next(g=>{c=g})}).next(()=>s.bs.getDocumentsMatchingQuery(d,e,t?o:Ce.min(),t?c:Le())).next(m=>(l2(s,QC(e),m),{documents:m,Ns:c})))}function l2(r,e,t){let s=r.vs.get(e)||Ce.min();t.forEach((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),r.vs.set(e,s)}class cE{constructor(){this.activeTargetIds=tN()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class c2{constructor(){this.So=new cE,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,s){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new cE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="ConnectivityMonitor";class hE{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){pe(uE,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){pe(uE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh=null;function Ep(){return fh===null?fh=function(){return 268435456+Math.round(2147483648*Math.random())}():fh++,"0x"+fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="RestConnection",h2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class d2{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${s}/databases/${o}`,this.qo=this.databaseId.database===kh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Qo(e,t,s,o,c){const d=Ep(),m=this.$o(e,t.toUriEncodedString());pe(Gm,`Sending RPC '${e}' ${d}:`,m,s);const g={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(g,o,c);const{host:y}=new URL(m),_=fa(y);return this.Ko(e,m,g,s,_).then(x=>(pe(Gm,`Received RPC '${e}' ${d}: `,x),x),x=>{throw Eo(Gm,`RPC '${e}' ${d} failed with error: `,x,"url: ",m,"request:",s),x})}Wo(e,t,s,o,c,d){return this.Qo(e,t,s,o,c)}Uo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ko}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,c)=>e[c]=o),s&&s.headers.forEach((o,c)=>e[c]=o)}$o(e,t){const s=h2[e];return`${this.Lo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class m2 extends d2{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,s,o,c){const d=Ep();return new Promise((m,g)=>{const y=new Pw;y.setWithCredentials(!0),y.listenOnce(Mw.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case _h.NO_ERROR:const x=y.getResponseJson();pe(sn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(x)),m(x);break;case _h.TIMEOUT:pe(sn,`RPC '${e}' ${d} timed out`),g(new me(re.DEADLINE_EXCEEDED,"Request time out"));break;case _h.HTTP_ERROR:const T=y.getStatus();if(pe(sn,`RPC '${e}' ${d} failed with status:`,T,"response text:",y.getResponseText()),T>0){let D=y.getResponseJson();Array.isArray(D)&&(D=D[0]);const C=D==null?void 0:D.error;if(C&&C.status&&C.message){const j=function(z){const X=z.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(X)>=0?X:re.UNKNOWN}(C.status);g(new me(j,C.message))}else g(new me(re.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new me(re.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{s_:e,streamId:d,o_:y.getLastErrorCode(),__:y.getLastError()})}}finally{pe(sn,`RPC '${e}' ${d} completed.`)}});const _=JSON.stringify(o);pe(sn,`RPC '${e}' ${d} sending request:`,o),y.send(t,"POST",_,s,15)})}a_(e,t,s){const o=Ep(),c=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Vw(),m=Lw(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Uo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const _=c.join("");pe(sn,`Creating RPC '${e}' stream ${o}: ${_}`,g);const x=d.createWebChannel(_,g);let T=!1,D=!1;const C=new f2({Go:k=>{D?pe(sn,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(T||(pe(sn,`Opening RPC '${e}' stream ${o} transport.`),x.open(),T=!0),pe(sn,`RPC '${e}' stream ${o} sending:`,k),x.send(k))},zo:()=>x.close()}),j=(k,z,X)=>{k.listen(z,Q=>{try{X(Q)}catch(ne){setTimeout(()=>{throw ne},0)}})};return j(x,nc.EventType.OPEN,()=>{D||(pe(sn,`RPC '${e}' stream ${o} transport opened.`),C.t_())}),j(x,nc.EventType.CLOSE,()=>{D||(D=!0,pe(sn,`RPC '${e}' stream ${o} transport closed`),C.r_())}),j(x,nc.EventType.ERROR,k=>{D||(D=!0,Eo(sn,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),C.r_(new me(re.UNAVAILABLE,"The operation could not be completed")))}),j(x,nc.EventType.MESSAGE,k=>{var z;if(!D){const X=k.data[0];We(!!X,16349);const Q=X,ne=(Q==null?void 0:Q.error)||((z=Q[0])===null||z===void 0?void 0:z.error);if(ne){pe(sn,`RPC '${e}' stream ${o} received error:`,ne);const J=ne.status;let oe=function(A){const S=It[A];if(S!==void 0)return wT(S)}(J),U=ne.message;oe===void 0&&(oe=re.INTERNAL,U="Unknown error status: "+J+" with message "+ne.message),D=!0,C.r_(new me(oe,U)),x.close()}else pe(sn,`RPC '${e}' stream ${o} received:`,X),C.i_(X)}}),j(m,Uw.STAT_EVENT,k=>{k.stat===lp.PROXY?pe(sn,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===lp.NOPROXY&&pe(sn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{C.n_()},0),C}}function $m(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(r){return new vN(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,t,s=1e3,o=1.5,c=6e4){this.bi=e,this.timerId=t,this.u_=s,this.c_=o,this.l_=c,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),s=Math.max(0,Date.now()-this.T_),o=Math.max(0,t-s);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,o,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="PersistentStream";class MT{constructor(e,t,s,o,c,d,m,g){this.bi=e,this.R_=s,this.V_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new PT(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(yi(t.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.m_===t&&this.B_(s,o)},s=>{e(()=>{const o=new me(re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.L_(o)})})}B_(e,t){const s=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{s(()=>this.listener.jo())}),this.stream.Jo(()=>{s(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(o=>{s(()=>this.L_(o))}),this.stream.onMessage(o=>{s(()=>++this.p_==1?this.q_(o):this.onNext(o))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return pe(dE,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(pe(dE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class p2 extends MT{constructor(e,t,s,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,d),this.serializer=c}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=wN(this.serializer,e),s=function(c){if(!("targetChange"in c))return Ce.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ce.min():d.readTime?Cr(d.readTime):Ce.min()}(e);return this.listener.Q_(t,s)}U_(e){const t={};t.database=vp(this.serializer),t.addTarget=function(c,d){let m;const g=d.target;if(m=fp(g)?{documents:xN(c,g)}:{query:AN(c,g).gt},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=xT(c,d.resumeToken);const y=pp(c,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(Ce.min())>0){m.readTime=Uh(c,d.snapshotVersion.toTimestamp());const y=pp(c,d.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const s=RN(this.serializer,e);s&&(t.labels=s),this.F_(t)}K_(e){const t={};t.database=vp(this.serializer),t.removeTarget=e,this.F_(t)}}class g2 extends MT{constructor(e,t,s,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,d),this.serializer=c}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=bN(e.writeResults,e.commitTime),s=Cr(e.commitTime);return this.listener.j_(s,t)}H_(){const e={};e.database=vp(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>TN(this.serializer,s))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{}class v2 extends y2{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.J_=!1}Y_(){if(this.J_)throw new me(re.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,s,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Qo(e,gp(t,s),o,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new me(re.UNKNOWN,c.toString())})}Wo(e,t,s,o,c){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Wo(e,gp(t,s),o,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new me(re.UNKNOWN,d.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class _2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(yi(t),this.ea=!1):pe("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="RemoteStore";class E2{constructor(e,t,s,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=c,this.ca.vo(d=>{s.enqueueAndForget(async()=>{ga(this)&&(pe(oa,"Restarting streams for network reachability change."),await async function(g){const y=Ne(g);y.aa.add(4),await jc(y),y.la.set("Unknown"),y.aa.delete(4),await hd(y)}(this))})}),this.la=new _2(s,o)}}async function hd(r){if(ga(r))for(const e of r.ua)await e(!0)}async function jc(r){for(const e of r.ua)await e(!1)}function UT(r,e){const t=Ne(r);t._a.has(e.targetId)||(t._a.set(e.targetId,e),ag(t)?sg(t):Uo(t).b_()&&ig(t,e))}function rg(r,e){const t=Ne(r),s=Uo(t);t._a.delete(e),s.b_()&&LT(t,e),t._a.size===0&&(s.b_()?s.v_():ga(t)&&t.la.set("Unknown"))}function ig(r,e){if(r.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uo(r).U_(e)}function LT(r,e){r.ha.Ke(e),Uo(r).K_(e)}function sg(r){r.ha=new mN({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r._a.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),Uo(r).start(),r.la.ta()}function ag(r){return ga(r)&&!Uo(r).w_()&&r._a.size>0}function ga(r){return Ne(r).aa.size===0}function VT(r){r.ha=void 0}async function w2(r){r.la.set("Online")}async function T2(r){r._a.forEach((e,t)=>{ig(r,e)})}async function b2(r,e){VT(r),ag(r)?(r.la.ia(e),sg(r)):r.la.set("Unknown")}async function x2(r,e,t){if(r.la.set("Online"),e instanceof bT&&e.state===2&&e.cause)try{await async function(o,c){const d=c.cause;for(const m of c.targetIds)o._a.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o._a.delete(m),o.ha.removeTarget(m))}(r,e)}catch(s){pe(oa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Vh(r,s)}else if(e instanceof bh?r.ha.Xe(e):e instanceof TT?r.ha.ot(e):r.ha.nt(e),!t.isEqual(Ce.min()))try{const s=await OT(r.localStore);t.compareTo(s)>=0&&await function(c,d){const m=c.ha.It(d);return m.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const _=c._a.get(y);_&&c._a.set(y,_.withResumeToken(g.resumeToken,d))}}),m.targetMismatches.forEach((g,y)=>{const _=c._a.get(g);if(!_)return;c._a.set(g,_.withResumeToken(Jt.EMPTY_BYTE_STRING,_.snapshotVersion)),LT(c,g);const x=new ts(_.target,g,y,_.sequenceNumber);ig(c,x)}),c.remoteSyncer.applyRemoteEvent(m)}(r,t)}catch(s){pe(oa,"Failed to raise snapshot:",s),await Vh(r,s)}}async function Vh(r,e,t){if(!Po(e))throw e;r.aa.add(1),await jc(r),r.la.set("Offline"),t||(t=()=>OT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{pe(oa,"Retrying IndexedDB access"),await t(),r.aa.delete(1),await hd(r)})}function BT(r,e){return e().catch(t=>Vh(r,t,e))}async function dd(r){const e=Ne(r),t=hs(e);let s=e.oa.length>0?e.oa[e.oa.length-1].batchId:qp;for(;A2(e);)try{const o=await a2(e.localStore,s);if(o===null){e.oa.length===0&&t.v_();break}s=o.batchId,S2(e,o)}catch(o){await Vh(e,o)}zT(e)&&FT(e)}function A2(r){return ga(r)&&r.oa.length<10}function S2(r,e){r.oa.push(e);const t=hs(r);t.b_()&&t.W_&&t.G_(e.mutations)}function zT(r){return ga(r)&&!hs(r).w_()&&r.oa.length>0}function FT(r){hs(r).start()}async function R2(r){hs(r).H_()}async function C2(r){const e=hs(r);for(const t of r.oa)e.G_(t.mutations)}async function N2(r,e,t){const s=r.oa.shift(),o=Wp.from(s,e,t);await BT(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await dd(r)}async function I2(r,e){e&&hs(r).W_&&await async function(s,o){if(function(d){return dN(d)&&d!==re.ABORTED}(o.code)){const c=s.oa.shift();hs(s).D_(),await BT(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o)),await dd(s)}}(r,e),zT(r)&&FT(r)}async function fE(r,e){const t=Ne(r);t.asyncQueue.verifyOperationInProgress(),pe(oa,"RemoteStore received new credentials");const s=ga(t);t.aa.add(3),await jc(t),s&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await hd(t)}async function j2(r,e){const t=Ne(r);e?(t.aa.delete(2),await hd(t)):e||(t.aa.add(2),await jc(t),t.la.set("Unknown"))}function Uo(r){return r.Pa||(r.Pa=function(t,s,o){const c=Ne(t);return c.Y_(),new p2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(r.datastore,r.asyncQueue,{jo:w2.bind(null,r),Jo:T2.bind(null,r),Zo:b2.bind(null,r),Q_:x2.bind(null,r)}),r.ua.push(async e=>{e?(r.Pa.D_(),ag(r)?sg(r):r.la.set("Unknown")):(await r.Pa.stop(),VT(r))})),r.Pa}function hs(r){return r.Ta||(r.Ta=function(t,s,o){const c=Ne(t);return c.Y_(),new g2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(r.datastore,r.asyncQueue,{jo:()=>Promise.resolve(),Jo:R2.bind(null,r),Zo:I2.bind(null,r),z_:C2.bind(null,r),j_:N2.bind(null,r)}),r.ua.push(async e=>{e?(r.Ta.D_(),await dd(r)):(await r.Ta.stop(),r.oa.length>0&&(pe(oa,`Stopping write stream with ${r.oa.length} pending writes`),r.oa=[]))})),r.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,t,s,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,c){const d=Date.now()+s,m=new og(e,t,d,o,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lg(r,e){if(yi("AsyncQueue",`${e}: ${r}`),Po(r))return new me(re.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{static emptySet(e){return new go(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ee.comparator(t.key,s.key):(t,s)=>Ee.comparator(t.key,s.key),this.keyedMap=rc(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof go)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new go;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.Ia=new ft(Ee.comparator)}track(e){const t=e.doc.key,s=this.Ia.get(t);s?e.type!==0&&s.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&s.type!==1?this.Ia=this.Ia.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Ia=this.Ia.remove(t):e.type===1&&s.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Ae(63341,{Vt:e,Ea:s}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,s)=>{e.push(s)}),e}}class Ro{constructor(e,t,s,o,c,d,m,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,c){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new Ro(e,t,go.emptySet(t),d,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class k2{constructor(){this.queries=pE(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,s){const o=Ne(t),c=o.queries;o.queries=pE(),c.forEach((d,m)=>{for(const g of m.Ra)g.onError(s)})})(this,new me(re.ABORTED,"Firestore shutting down"))}}function pE(){return new pa(r=>oT(r),id)}async function qT(r,e){const t=Ne(r);let s=3;const o=e.query;let c=t.queries.get(o);c?!c.Va()&&e.ma()&&(s=2):(c=new D2,s=e.ma()?0:1);try{switch(s){case 0:c.Aa=await t.onListen(o,!0);break;case 1:c.Aa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=lg(d,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Ra.push(e),e.ga(t.onlineState),c.Aa&&e.pa(c.Aa)&&cg(t)}async function HT(r,e){const t=Ne(r),s=e.query;let o=3;const c=t.queries.get(s);if(c){const d=c.Ra.indexOf(e);d>=0&&(c.Ra.splice(d,1),c.Ra.length===0?o=e.ma()?0:1:!c.Va()&&e.ma()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function O2(r,e){const t=Ne(r);let s=!1;for(const o of e){const c=o.query,d=t.queries.get(c);if(d){for(const m of d.Ra)m.pa(o)&&(s=!0);d.Aa=o}}s&&cg(t)}function P2(r,e,t){const s=Ne(r),o=s.queries.get(e);if(o)for(const c of o.Ra)c.onError(t);s.queries.delete(e)}function cg(r){r.fa.forEach(e=>{e.next()})}var wp,gE;(gE=wp||(wp={})).ya="default",gE.Cache="cache";class GT{constructor(e,t,s){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=s||{}}pa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ro(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const s=t!=="Offline";return(!this.options.Fa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==wp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){this.key=e}}class YT{constructor(e){this.key=e}}class M2{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Le(),this.mutatedKeys=Le(),this.Ua=lT(e),this.Ka=new go(this.Ua)}get Wa(){return this.qa}Ga(e,t){const s=t?t.za:new mE,o=t?t.Ka:this.Ka;let c=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,x)=>{const T=o.get(_),D=sd(this.query,x)?x:null,C=!!T&&this.mutatedKeys.has(T.key),j=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let k=!1;T&&D?T.data.isEqual(D.data)?C!==j&&(s.track({type:3,doc:D}),k=!0):this.ja(T,D)||(s.track({type:2,doc:D}),k=!0,(g&&this.Ua(D,g)>0||y&&this.Ua(D,y)<0)&&(m=!0)):!T&&D?(s.track({type:0,doc:D}),k=!0):T&&!D&&(s.track({type:1,doc:T}),k=!0,(g||y)&&(m=!0)),k&&(D?(d=d.add(D),c=j?c.add(_):c.delete(_)):(d=d.delete(_),c=c.delete(_)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),c=c.delete(_.key),s.track({type:1,doc:_})}return{Ka:d,za:s,ys:m,mutatedKeys:c}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const c=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const d=e.za.da();d.sort((_,x)=>function(D,C){const j=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:k})}};return j(D)-j(C)}(_.type,x.type)||this.Ua(_.doc,x.doc)),this.Ha(s),o=o!=null&&o;const m=t&&!o?this.Ja():[],g=this.$a.size===0&&this.current&&!o?1:0,y=g!==this.Qa;return this.Qa=g,d.length!==0||y?{snapshot:new Ro(this.query,e.Ka,c,d,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ya:m}:{Ya:m}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new mE,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Le(),this.Ka.forEach(s=>{this.Za(s.key)&&(this.$a=this.$a.add(s.key))});const t=[];return e.forEach(s=>{this.$a.has(s)||t.push(new YT(s))}),this.$a.forEach(s=>{e.has(s)||t.push(new $T(s))}),t}Xa(e){this.qa=e.Ns,this.$a=Le();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Ro.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const ug="SyncEngine";class U2{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class L2{constructor(e){this.key=e,this.tu=!1}}class V2{constructor(e,t,s,o,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.nu={},this.ru=new pa(m=>oT(m),id),this.iu=new Map,this.su=new Set,this.ou=new ft(Ee.comparator),this._u=new Map,this.au=new Jp,this.uu={},this.cu=new Map,this.lu=So.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function B2(r,e,t=!0){const s=JT(r);let o;const c=s.ru.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.eu()):o=await KT(s,e,t,!0),o}async function z2(r,e){const t=JT(r);await KT(t,e,!0,!1)}async function KT(r,e,t,s){const o=await o2(r.localStore,Rr(e)),c=o.targetId,d=r.sharedClientState.addLocalQueryTarget(c,t);let m;return s&&(m=await F2(r,e,c,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&UT(r.remoteStore,o),m}async function F2(r,e,t,s,o){r.Pu=(x,T,D)=>async function(j,k,z,X){let Q=k.view.Ga(z);Q.ys&&(Q=await lE(j.localStore,k.query,!1).then(({documents:U})=>k.view.Ga(U,Q)));const ne=X&&X.targetChanges.get(k.targetId),J=X&&X.targetMismatches.get(k.targetId)!=null,oe=k.view.applyChanges(Q,j.isPrimaryClient,ne,J);return vE(j,k.targetId,oe.Ya),oe.snapshot}(r,x,T,D);const c=await lE(r.localStore,e,!0),d=new M2(e,c.Ns),m=d.Ga(c.documents),g=Ic.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=d.applyChanges(m,r.isPrimaryClient,g);vE(r,t,y.Ya);const _=new U2(e,t,d);return r.ru.set(e,_),r.iu.has(t)?r.iu.get(t).push(e):r.iu.set(t,[e]),y.snapshot}async function q2(r,e,t){const s=Ne(r),o=s.ru.get(e),c=s.iu.get(o.targetId);if(c.length>1)return s.iu.set(o.targetId,c.filter(d=>!id(d,e))),void s.ru.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await _p(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&rg(s.remoteStore,o.targetId),Tp(s,o.targetId)}).catch(Oo)):(Tp(s,o.targetId),await _p(s.localStore,o.targetId,!0))}async function H2(r,e){const t=Ne(r),s=t.ru.get(e),o=t.iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),rg(t.remoteStore,s.targetId))}async function G2(r,e,t){const s=Z2(r);try{const o=await function(d,m){const g=Ne(d),y=Ut.now(),_=m.reduce((D,C)=>D.add(C.key),Le());let x,T;return g.persistence.runTransaction("Locally write mutations","readwrite",D=>{let C=vi(),j=Le();return g.Cs.getEntries(D,_).next(k=>{C=k,C.forEach((z,X)=>{X.isValidDocument()||(j=j.add(z))})}).next(()=>g.localDocuments.getOverlayedDocuments(D,C)).next(k=>{x=k;const z=[];for(const X of m){const Q=oN(X,x.get(X.key).overlayedDocument);Q!=null&&z.push(new gs(X.key,Q,Jw(Q.value.mapValue),rr.exists(!0)))}return g.mutationQueue.addMutationBatch(D,y,z,m)}).next(k=>{T=k;const z=k.applyToLocalDocumentSet(x,j);return g.documentOverlayCache.saveOverlays(D,k.batchId,z)})}).then(()=>({batchId:T.batchId,changes:uT(x)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,m,g){let y=d.uu[d.currentUser.toKey()];y||(y=new ft(ke)),y=y.insert(m,g),d.uu[d.currentUser.toKey()]=y}(s,o.batchId,t),await Dc(s,o.changes),await dd(s.remoteStore)}catch(o){const c=lg(o,"Failed to persist write");t.reject(c)}}async function QT(r,e){const t=Ne(r);try{const s=await i2(t.localStore,e);e.targetChanges.forEach((o,c)=>{const d=t._u.get(c);d&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.tu=!0:o.modifiedDocuments.size>0?We(d.tu,14607):o.removedDocuments.size>0&&(We(d.tu,42227),d.tu=!1))}),await Dc(t,s,e)}catch(s){await Oo(s)}}function yE(r,e,t){const s=Ne(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.ru.forEach((c,d)=>{const m=d.view.ga(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const g=Ne(d);g.onlineState=m;let y=!1;g.queries.forEach((_,x)=>{for(const T of x.Ra)T.ga(m)&&(y=!0)}),y&&cg(g)}(s.eventManager,e),o.length&&s.nu.Q_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function $2(r,e,t){const s=Ne(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s._u.get(e),c=o&&o.key;if(c){let d=new ft(Ee.comparator);d=d.insert(c,on.newNoDocument(c,Ce.min()));const m=Le().add(c),g=new cd(Ce.min(),new Map,new ft(ke),d,m);await QT(s,g),s.ou=s.ou.remove(c),s._u.delete(e),hg(s)}else await _p(s.localStore,e,!1).then(()=>Tp(s,e,t)).catch(Oo)}async function Y2(r,e){const t=Ne(r),s=e.batch.batchId;try{const o=await r2(t.localStore,e);XT(t,s,null),WT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Dc(t,o)}catch(o){await Oo(o)}}async function K2(r,e,t){const s=Ne(r);try{const o=await function(d,m){const g=Ne(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let _;return g.mutationQueue.lookupMutationBatch(y,m).next(x=>(We(x!==null,37113),_=x.keys(),g.mutationQueue.removeMutationBatch(y,x))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,_,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_)).next(()=>g.localDocuments.getDocuments(y,_))})}(s.localStore,e);XT(s,e,t),WT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Dc(s,o)}catch(o){await Oo(o)}}function WT(r,e){(r.cu.get(e)||[]).forEach(t=>{t.resolve()}),r.cu.delete(e)}function XT(r,e,t){const s=Ne(r);let o=s.uu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),s.uu[s.currentUser.toKey()]=o}}function Tp(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.iu.get(e))r.ru.delete(s),t&&r.nu.Tu(s,t);r.iu.delete(e),r.isPrimaryClient&&r.au.Ur(e).forEach(s=>{r.au.containsKey(s)||ZT(r,s)})}function ZT(r,e){r.su.delete(e.path.canonicalString());const t=r.ou.get(e);t!==null&&(rg(r.remoteStore,t),r.ou=r.ou.remove(e),r._u.delete(t),hg(r))}function vE(r,e,t){for(const s of t)s instanceof $T?(r.au.addReference(s.key,e),Q2(r,s)):s instanceof YT?(pe(ug,"Document no longer in limbo: "+s.key),r.au.removeReference(s.key,e),r.au.containsKey(s.key)||ZT(r,s.key)):Ae(19791,{Iu:s})}function Q2(r,e){const t=e.key,s=t.path.canonicalString();r.ou.get(t)||r.su.has(s)||(pe(ug,"New document in limbo: "+t),r.su.add(s),hg(r))}function hg(r){for(;r.su.size>0&&r.ou.size<r.maxConcurrentLimboResolutions;){const e=r.su.values().next().value;r.su.delete(e);const t=new Ee(at.fromString(e)),s=r.lu.next();r._u.set(s,new L2(t)),r.ou=r.ou.insert(t,s),UT(r.remoteStore,new ts(Rr(Kp(t.path)),s,"TargetPurposeLimboResolution",td.le))}}async function Dc(r,e,t){const s=Ne(r),o=[],c=[],d=[];s.ru.isEmpty()||(s.ru.forEach((m,g)=>{d.push(s.Pu(g,e,t).then(y=>{var _;if((y||t)&&s.isPrimaryClient){const x=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))===null||_===void 0?void 0:_.current;s.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(y){o.push(y);const x=tg.Ps(g.targetId,y);c.push(x)}}))}),await Promise.all(d),s.nu.Q_(o),await async function(g,y){const _=Ne(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>se.forEach(y,T=>se.forEach(T.ls,D=>_.persistence.referenceDelegate.addReference(x,T.targetId,D)).next(()=>se.forEach(T.hs,D=>_.persistence.referenceDelegate.removeReference(x,T.targetId,D)))))}catch(x){if(!Po(x))throw x;pe(ng,"Failed to update sequence numbers: "+x)}for(const x of y){const T=x.targetId;if(!x.fromCache){const D=_.Ss.get(T),C=D.snapshotVersion,j=D.withLastLimboFreeSnapshotVersion(C);_.Ss=_.Ss.insert(T,j)}}}(s.localStore,c))}async function W2(r,e){const t=Ne(r);if(!t.currentUser.isEqual(e)){pe(ug,"User change. New user:",e.toKey());const s=await kT(t.localStore,e);t.currentUser=e,function(c,d){c.cu.forEach(m=>{m.forEach(g=>{g.reject(new me(re.CANCELLED,d))})}),c.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Dc(t,s.Ms)}}function X2(r,e){const t=Ne(r),s=t._u.get(e);if(s&&s.tu)return Le().add(s.key);{let o=Le();const c=t.iu.get(e);if(!c)return o;for(const d of c){const m=t.ru.get(d);o=o.unionWith(m.view.Wa)}return o}}function JT(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=QT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$2.bind(null,e),e.nu.Q_=O2.bind(null,e.eventManager),e.nu.Tu=P2.bind(null,e.eventManager),e}function Z2(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K2.bind(null,e),e}class Bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ud(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return n2(this.persistence,new JN,e.initialUser,this.serializer)}Ru(e){return new DT(eg.Ei,this.serializer)}Au(e){return new c2}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bh.provider={build:()=>new Bh};class J2 extends Bh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){We(this.persistence.referenceDelegate instanceof Lh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new LN(s,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new DT(s=>Lh.Ei(s,t),this.serializer)}}class bp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>yE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=W2.bind(null,this.syncEngine),await j2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new k2}()}createDatastore(e){const t=ud(e.databaseInfo.databaseId),s=function(c){return new m2(c)}(e.databaseInfo);return function(c,d,m,g){return new v2(c,d,m,g)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,c,d,m){return new E2(s,o,c,d,m)}(this.localStore,this.datastore,e.asyncQueue,t=>yE(this.syncEngine,t,0),function(){return hE.C()?new hE:new u2}())}createSyncEngine(e,t){return function(o,c,d,m,g,y,_){const x=new V2(o,c,d,m,g,y);return _&&(x.hu=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const c=Ne(o);pe(oa,"RemoteStore shutting down."),c.aa.add(5),await jc(c),c.ca.shutdown(),c.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}bp.provider={build:()=>new bp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="FirestoreClient";class eI{constructor(e,t,s,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=an.UNAUTHENTICATED,this.clientId=qw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async d=>{pe(ds,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(pe(ds,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=lg(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Ym(r,e){r.asyncQueue.verifyOperationInProgress(),pe(ds,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await kT(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function _E(r,e){r.asyncQueue.verifyOperationInProgress();const t=await tI(r);pe(ds,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>fE(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>fE(e.remoteStore,o)),r._onlineComponents=e}async function tI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){pe(ds,"Using user provided OfflineComponentProvider");try{await Ym(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Eo("Error using user provided cache. Falling back to memory cache: "+t),await Ym(r,new Bh)}}else pe(ds,"Using default OfflineComponentProvider"),await Ym(r,new J2(void 0));return r._offlineComponents}async function tb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(pe(ds,"Using user provided OnlineComponentProvider"),await _E(r,r._uninitializedComponentsProvider._online)):(pe(ds,"Using default OnlineComponentProvider"),await _E(r,new bp))),r._onlineComponents}function nI(r){return tb(r).then(e=>e.syncEngine)}async function nb(r){const e=await tb(r),t=e.eventManager;return t.onListen=B2.bind(null,e.syncEngine),t.onUnlisten=q2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=z2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=H2.bind(null,e.syncEngine),t}function rI(r,e,t={}){const s=new di;return r.asyncQueue.enqueueAndForget(async()=>function(c,d,m,g,y){const _=new eb({next:T=>{_.yu(),d.enqueueAndForget(()=>HT(c,x));const D=T.docs.has(m);!D&&T.fromCache?y.reject(new me(re.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&T.fromCache&&g&&g.source==="server"?y.reject(new me(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),x=new GT(Kp(m.path),_,{includeMetadataChanges:!0,Fa:!0});return qT(c,x)}(await nb(r),r.asyncQueue,e,t,s)),s.promise}function iI(r,e,t={}){const s=new di;return r.asyncQueue.enqueueAndForget(async()=>function(c,d,m,g,y){const _=new eb({next:T=>{_.yu(),d.enqueueAndForget(()=>HT(c,x)),T.fromCache&&g.source==="server"?y.reject(new me(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),x=new GT(m,_,{includeMetadataChanges:!0,Fa:!0});return qT(c,x)}(await nb(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(r,e,t){if(!t)throw new me(re.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function sI(r,e,t,s){if(e===!0&&s===!0)throw new me(re.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function wE(r){if(!Ee.isDocumentKey(r))throw new me(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function TE(r){if(Ee.isDocumentKey(r))throw new me(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function fd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function jr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new me(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fd(r);throw new me(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function aI(r,e){if(e<=0)throw new me(re.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="firestore.googleapis.com",bE=!0;class xE{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new me(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sb,this.ssl=bE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:bE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MN)throw new me(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rb((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class md{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new mC;switch(s.type){case"firstParty":return new vC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new me(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Do("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=EE.get(t);s&&(pe("ComponentProvider","Removing Datastore"),EE.delete(t),s.terminate())}(this),Promise.resolve()}}function oI(r,e,t,s={}){var o;r=jr(r,md);const c=fa(e),d=r._getSettings(),m=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),g=`${e}:${t}`;d.host!==sb&&d.host!==g&&Eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},d),{host:g,ssl:c,emulatorOptions:s});if(!pi(y,m)&&(r._setSettings(y),c&&(Lp(`https://${g}`),Do("Firestore",!0)),s.mockUserToken)){let _,x;if(typeof s.mockUserToken=="string")_=s.mockUserToken,x=an.MOCK_USER;else{_=Cw(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new me(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new an(T)}r._authCredentials=new pC(new zw(_,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ys(this.firestore,e,this._query)}}class pn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}}class ss extends ys{constructor(e,t,s){super(e,t,Kp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Ee(e))}withConverter(e){return new ss(this.firestore,e,this._path)}}function On(r,e,...t){if(r=dt(r),ib("collection","path",e),r instanceof md){const s=at.fromString(e,...t);return TE(s),new ss(r,null,s)}{if(!(r instanceof pn||r instanceof ss))throw new me(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(at.fromString(e,...t));return TE(s),new ss(r.firestore,null,s)}}function yt(r,e,...t){if(r=dt(r),arguments.length===1&&(e=qw.newId()),ib("doc","path",e),r instanceof md){const s=at.fromString(e,...t);return wE(s),new pn(r,null,new Ee(s))}{if(!(r instanceof pn||r instanceof ss))throw new me(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(at.fromString(e,...t));return wE(s),new pn(r.firestore,r instanceof ss?r.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="AsyncQueue";class SE{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new PT(this,"async_queue_retry"),this.ju=()=>{const s=$m();s&&pe(AE,"Visibility state changed to "+s.visibilityState),this.y_.A_()},this.Hu=e;const t=$m();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=$m();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new di;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Po(e))throw e;pe(AE,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(s=>{throw this.Ku=s,this.Wu=!1,yi("INTERNAL UNHANDLED ERROR: ",RE(s)),s}).then(s=>(this.Wu=!1,s))));return this.Hu=t,t}enqueueAfterDelay(e,t,s){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const o=og.createAndSchedule(this,e,t,s,c=>this.Xu(c));return this.Uu.push(o),o}Ju(){this.Ku&&Ae(47125,{ec:RE(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function RE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Lo extends md{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new SE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new SE(e),this._firestoreClient=void 0,await e}}}function lI(r,e){const t=typeof r=="object"?r:zp(),s=typeof r=="string"?r:kh,o=ed(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=Aw("firestore");c&&oI(o,...c)}return o}function dg(r){if(r._terminated)throw new me(re.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||cI(r),r._firestoreClient}function cI(r){var e,t,s;const o=r._freezeSettings(),c=function(m,g,y,_){return new kC(m,g,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,rb(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new eI(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Co(Jt.fromBase64String(e))}catch(t){throw new me(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Co(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=/^__.*__$/;class hI{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new gs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nc(e,this.data,t,this.fieldTransforms)}}class ab{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new gs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ob(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{oc:r})}}class gd{constructor(e,t,s,o,c,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this._c(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new gd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ac({path:s,cc:!1});return o.lc(e),o}hc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ac({path:s,cc:!1});return o._c(),o}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return zh(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(ob(this.oc)&&uI.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class dI{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||ud(e)}dc(e,t,s,o=!1){return new gd({oc:e,methodName:t,Ec:s,path:Zt.emptyPath(),cc:!1,Ic:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yd(r){const e=r._freezeSettings(),t=ud(r._databaseId);return new dI(r._databaseId,!!e.ignoreUndefinedProperties,t)}function lb(r,e,t,s,o,c={}){const d=r.dc(c.merge||c.mergeFields?2:0,e,t,o);_g("Data must be an object, but it was:",d,s);const m=ub(s,d);let g,y;if(c.merge)g=new Dn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const _=[];for(const x of c.mergeFields){const T=xp(e,x,t);if(!d.contains(T))throw new me(re.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);db(_,T)||_.push(T)}g=new Dn(_),y=d.fieldTransforms.filter(x=>g.covers(x.field))}else g=null,y=d.fieldTransforms;return new hI(new Tn(m),g,y)}class vd extends ya{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vd}}function cb(r,e,t){return new gd({oc:3,Ec:e.settings.Ec,methodName:r._methodName,cc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class pg extends ya{_toFieldTransform(e){return new od(e.path,new Ec)}isEqual(e){return e instanceof pg}}class gg extends ya{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=cb(this,e,!0),s=this.Ac.map(c=>va(c,t)),o=new xo(s);return new od(e.path,o)}isEqual(e){return e instanceof gg&&pi(this.Ac,e.Ac)}}class yg extends ya{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=cb(this,e,!0),s=this.Ac.map(c=>va(c,t)),o=new Ao(s);return new od(e.path,o)}isEqual(e){return e instanceof yg&&pi(this.Ac,e.Ac)}}class vg extends ya{constructor(e,t){super(e),this.Rc=t}_toFieldTransform(e){const t=new wc(e.serializer,fT(e.serializer,this.Rc));return new od(e.path,t)}isEqual(e){return e instanceof vg&&this.Rc===e.Rc}}function fI(r,e,t,s){const o=r.dc(1,e,t);_g("Data must be an object, but it was:",o,s);const c=[],d=Tn.empty();ps(s,(g,y)=>{const _=Eg(e,g,t);y=dt(y);const x=o.hc(_);if(y instanceof vd)c.push(_);else{const T=va(y,x);T!=null&&(c.push(_),d.set(_,T))}});const m=new Dn(c);return new ab(d,m,o.fieldTransforms)}function mI(r,e,t,s,o,c){const d=r.dc(1,e,t),m=[xp(e,s,t)],g=[o];if(c.length%2!=0)throw new me(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)m.push(xp(e,c[T])),g.push(c[T+1]);const y=[],_=Tn.empty();for(let T=m.length-1;T>=0;--T)if(!db(y,m[T])){const D=m[T];let C=g[T];C=dt(C);const j=d.hc(D);if(C instanceof vd)y.push(D);else{const k=va(C,j);k!=null&&(y.push(D),_.set(D,k))}}const x=new Dn(y);return new ab(_,x,d.fieldTransforms)}function pI(r,e,t,s=!1){return va(t,r.dc(s?4:3,e))}function va(r,e){if(hb(r=dt(r)))return _g("Unsupported field value:",e,r),ub(r,e);if(r instanceof ya)return function(s,o){if(!ob(o.oc))throw o.Tc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Tc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(s,o){const c=[];let d=0;for(const m of s){let g=va(m,o.Pc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}}(r,e)}return function(s,o){if((s=dt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return fT(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Ut.fromDate(s);return{timestampValue:Uh(o.serializer,c)}}if(s instanceof Ut){const c=new Ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Uh(o.serializer,c)}}if(s instanceof fg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Co)return{bytesValue:xT(o.serializer,s._byteString)};if(s instanceof pn){const c=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw o.Tc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Zp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof mg)return function(d,m){return{mapValue:{fields:{[Xw]:{stringValue:Zw},[Oh]:{arrayValue:{values:d.toArray().map(y=>{if(typeof y!="number")throw m.Tc("VectorValues must only contain numeric values.");return Qp(m.serializer,y)})}}}}}}(s,o);throw o.Tc(`Unsupported field value: ${fd(s)}`)}(r,e)}function ub(r,e){const t={};return Gw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(r,(s,o)=>{const c=va(o,e.uc(s));c!=null&&(t[s]=c)}),{mapValue:{fields:t}}}function hb(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ut||r instanceof fg||r instanceof Co||r instanceof pn||r instanceof ya||r instanceof mg)}function _g(r,e,t){if(!hb(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=fd(t);throw s==="an object"?e.Tc(r+" a custom object"):e.Tc(r+" "+s)}}function xp(r,e,t){if((e=dt(e))instanceof pd)return e._internalPath;if(typeof e=="string")return Eg(r,e);throw zh("Field path arguments must be of type string or ",r,!1,void 0,t)}const gI=new RegExp("[~\\*/\\[\\]]");function Eg(r,e,t){if(e.search(gI)>=0)throw zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new pd(...e.split("."))._internalPath}catch{throw zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function zh(r,e,t,s,o){const c=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new me(re.INVALID_ARGUMENT,m+r+g)}function db(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,t,s,o,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_d("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class yI extends fb{data(){return super.data()}}function _d(r,e){return typeof e=="string"?Eg(r,e):e instanceof pd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new me(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wg{}class Tg extends wg{}function fs(r,e,...t){let s=[];e instanceof wg&&s.push(e),s=s.concat(t),function(c){const d=c.filter(g=>g instanceof bg).length,m=c.filter(g=>g instanceof Ed).length;if(d>1||d>0&&m>0)throw new me(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Ed extends Tg{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Ed(e,t,s)}_apply(e){const t=this._parse(e);return mb(e._query,t),new ys(e.firestore,e.converter,mp(e._query,t))}_parse(e){const t=yd(e.firestore);return function(c,d,m,g,y,_,x){let T;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new me(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){NE(x,_);const C=[];for(const j of x)C.push(CE(g,c,j));T={arrayValue:{values:C}}}else T=CE(g,c,x)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||NE(x,_),T=pI(m,d,x,_==="in"||_==="not-in");return jt.create(y,_,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Vo(r,e,t){const s=e,o=_d("where",r);return Ed._create(o,s,t)}class bg extends wg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bg(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:ar.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,c){let d=o;const m=c.getFlattenedFilters();for(const g of m)mb(d,g),d=mp(d,g)}(e._query,t),new ys(e.firestore,e.converter,mp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xg extends Tg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xg(e,t)}_apply(e){const t=function(o,c,d){if(o.startAt!==null)throw new me(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new me(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _c(c,d)}(e._query,this._field,this._direction);return new ys(e.firestore,e.converter,function(o,c){const d=o.explicitOrderBy.concat([c]);return new Mo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function la(r,e="asc"){const t=e,s=_d("orderBy",r);return xg._create(s,t)}class Ag extends Tg{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Ag(e,t,s)}_apply(e){return new ys(e.firestore,e.converter,Mh(e._query,this._limit,this._limitType))}}function Fh(r){return aI("limit",r),Ag._create("limit",r,"F")}function CE(r,e,t){if(typeof(t=dt(t))=="string"){if(t==="")throw new me(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aT(e)&&t.indexOf("/")!==-1)throw new me(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(at.fromString(t));if(!Ee.isDocumentKey(s))throw new me(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return q0(r,new Ee(s))}if(t instanceof pn)return q0(r,t._key);throw new me(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fd(t)}.`)}function NE(r,e){if(!Array.isArray(r)||r.length===0)throw new me(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mb(r,e){const t=function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new me(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _I{convertValue(e,t="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ps(e,(o,c)=>{s[o]=this.convertValue(c,t)}),s}convertVectorValue(e){var t,s,o;const c=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[Oh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>At(d.doubleValue));return new mg(c)}convertGeoPoint(e){return new fg(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=rd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(gc(e));default:return null}}convertTimestamp(e){const t=ls(e);return new Ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=at.fromString(e);We(IT(s),9688,{name:e});const o=new yc(s.get(1),s.get(3)),c=new Ee(s.popFirst(5));return o.isEqual(t)||yi(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gb extends fb{constructor(e,t,s,o,c,d){super(e,t,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(_d("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class xh extends gb{data(e={}){return super.data(e)}}class EI{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new sc(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new xh(this._firestore,this._userDataWriter,s.key,s,new sc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const g=new xh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new sc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const g=new xh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new sc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),_=d.indexOf(m.doc.key)),{type:wI(m.type),doc:g,oldIndex:y,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wI(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(r){r=jr(r,pn);const e=jr(r.firestore,Lo);return rI(dg(e),r._key).then(t=>TI(e,r,t))}class yb extends _I{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}function or(r){r=jr(r,ys);const e=jr(r.firestore,Lo),t=dg(e),s=new yb(e);return vI(r._query),iI(t,r._query).then(o=>new EI(e,s,r,o))}function vb(r,e,t){r=jr(r,pn);const s=jr(r.firestore,Lo),o=pb(r.converter,e,t);return Rg(s,[lb(yd(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,rr.none())])}function Kn(r,e,t,...s){r=jr(r,pn);const o=jr(r.firestore,Lo),c=yd(o);let d;return d=typeof(e=dt(e))=="string"||e instanceof pd?mI(c,"updateDoc",r._key,e,t,s):fI(c,"updateDoc",r._key,e),Rg(o,[d.toMutation(r._key,rr.exists(!0))])}function Sg(r,e){const t=jr(r.firestore,Lo),s=yt(r),o=pb(r.converter,e);return Rg(t,[lb(yd(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,rr.exists(!1))]).then(()=>s)}function Rg(r,e){return function(s,o){const c=new di;return s.asyncQueue.enqueueAndForget(async()=>G2(await nI(s),o,c)),c.promise}(dg(r),e)}function TI(r,e,t){const s=t.docs.get(e._key),o=new yb(r);return new gb(r,o,e._key,s,new sc(t.hasPendingWrites,t.fromCache),e.converter)}function ln(){return new pg("serverTimestamp")}function _b(...r){return new gg("arrayUnion",r)}function Cg(...r){return new yg("arrayRemove",r)}function bI(r){return new vg("increment",r)}(function(e,t=!0){(function(o){ko=o})(ma),sa(new as("firestore",(s,{instanceIdentifier:o,options:c})=>{const d=s.getProvider("app").getImmediate(),m=new Lo(new gC(s.getProvider("auth-internal")),new _C(d,s.getProvider("app-check-internal")),function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new me(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yc(y.options.projectId,_)}(d,o),d);return c=Object.assign({useFetchStreams:t},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Sr(j0,D0,e),Sr(j0,D0,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="firebasestorage.googleapis.com",wb="storageBucket",xI=2*60*1e3,AI=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t extends Pr{constructor(e,t,s=0){super(Km(e),`Firebase Storage: ${t} (${Km(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Km(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vt||(vt={}));function Km(r){return"storage/"+r}function Ng(){const r="An unknown error occurred, please check the error payload for server response.";return new _t(vt.UNKNOWN,r)}function SI(r){return new _t(vt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function RI(r){return new _t(vt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function CI(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _t(vt.UNAUTHENTICATED,r)}function NI(){return new _t(vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function II(r){return new _t(vt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function jI(){return new _t(vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function DI(){return new _t(vt.CANCELED,"User canceled the upload/download.")}function kI(r){return new _t(vt.INVALID_URL,"Invalid URL '"+r+"'.")}function OI(r){return new _t(vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function PI(){return new _t(vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wb+"' property when initializing the app?")}function MI(){return new _t(vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function UI(){return new _t(vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function LI(r){return new _t(vt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ap(r){return new _t(vt.INVALID_ARGUMENT,r)}function Tb(){return new _t(vt.APP_DELETED,"The Firebase app was deleted.")}function VI(r){return new _t(vt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hc(r,e){return new _t(vt.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function Jl(r){throw new _t(vt.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=kn.makeFromUrl(e,t)}catch{return new kn(e,"")}if(s.path==="")return s;throw OI(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function c(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function y(ne){ne.path_=decodeURIComponent(ne.path)}const _="v[A-Za-z0-9_]+",x=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",D=new RegExp(`^https?://${x}/${_}/b/${o}/o${T}`,"i"),C={bucket:1,path:3},j=t===Eb?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",z=new RegExp(`^https?://${j}/${o}/${k}`,"i"),Q=[{regex:m,indices:g,postModify:c},{regex:D,indices:C,postModify:y},{regex:z,indices:{bucket:1,path:2},postModify:y}];for(let ne=0;ne<Q.length;ne++){const J=Q[ne],oe=J.regex.exec(e);if(oe){const U=oe[J.indices.bucket];let N=oe[J.indices.path];N||(N=""),s=new kn(U,N),J.postModify(s);break}}if(s==null)throw kI(e);return s}}class BI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(r,e,t){let s=1,o=null,c=null,d=!1,m=0;function g(){return m===2}let y=!1;function _(...k){y||(y=!0,e.apply(null,k))}function x(k){o=setTimeout(()=>{o=null,r(D,g())},k)}function T(){c&&clearTimeout(c)}function D(k,...z){if(y){T();return}if(k){T(),_.call(null,k,...z);return}if(g()||d){T(),_.call(null,k,...z);return}s<64&&(s*=2);let Q;m===1?(m=2,Q=0):Q=(s+Math.random())*1e3,x(Q)}let C=!1;function j(k){C||(C=!0,T(),!y&&(o!==null?(k||(m=2),clearTimeout(o),x(0)):k||(m=1)))}return x(0),c=setTimeout(()=>{d=!0,j(!0)},t),j}function FI(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(r){return r!==void 0}function HI(r){return typeof r=="object"&&!Array.isArray(r)}function Ig(r){return typeof r=="string"||r instanceof String}function IE(r){return jg()&&r instanceof Blob}function jg(){return typeof Blob<"u"}function jE(r,e,t,s){if(s<e)throw Ap(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>t)throw Ap(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(r,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${r}`}function bb(r){const e=encodeURIComponent;let t="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var ra;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(ra||(ra={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(r,e){const t=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,c=e.indexOf(r)!==-1;return t||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,t,s,o,c,d,m,g,y,_,x,T=!0,D=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=_,this.connectionFactory_=x,this.retry=T,this.isUsingEmulator=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,j)=>{this.resolve_=C,this.reject_=j,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new mh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const g=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===ra.NO_ERROR,g=c.getStatus();if(!m||GI(g,this.additionalRetryCodes_)&&this.retry){const _=c.getErrorCode()===ra.ABORT;s(!1,new mh(!1,null,_));return}const y=this.successCodes_.indexOf(g)!==-1;s(!0,new mh(y,c))})},t=(s,o)=>{const c=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());qI(g)?c(g):c()}catch(g){d(g)}else if(m!==null){const g=Ng();g.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,g)):d(g)}else if(o.canceled){const g=this.appDelete_?Tb():DI();d(g)}else{const g=jI();d(g)}};this.canceled_?t(!1,new mh(!1,null,!0)):this.backoffId_=zI(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mh{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function YI(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function KI(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QI(r,e){e&&(r["X-Firebase-GMPID"]=e)}function WI(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function XI(r,e,t,s,o,c,d=!0,m=!1){const g=bb(r.urlParams),y=r.url+g,_=Object.assign({},r.headers);return QI(_,e),YI(_,t),KI(_,c),WI(_,s),new $I(y,r.method,_,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,d,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function JI(...r){const e=ZI();if(e!==void 0){const t=new e;for(let s=0;s<r.length;s++)t.append(r[s]);return t.getBlob()}else{if(jg())return new Blob(r);throw new _t(vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ej(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(r){if(typeof atob>"u")throw LI("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qm{constructor(e,t){this.data=e,this.contentType=t||null}}function nj(r,e){switch(r){case Ar.RAW:return new Qm(xb(e));case Ar.BASE64:case Ar.BASE64URL:return new Qm(Ab(r,e));case Ar.DATA_URL:return new Qm(ij(e),sj(e))}throw Ng()}function xb(r){const e=[];for(let t=0;t<r.length;t++){let s=r.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const c=s,d=r.charCodeAt(++t);s=65536|(c&1023)<<10|d&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function rj(r){let e;try{e=decodeURIComponent(r)}catch{throw hc(Ar.DATA_URL,"Malformed data URL.")}return xb(e)}function Ab(r,e){switch(r){case Ar.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw hc(r,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ar.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw hc(r,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=tj(e)}catch(o){throw o.message.includes("polyfill")?o:hc(r,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class Sb{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw hc(Ar.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=aj(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function ij(r){const e=new Sb(r);return e.base64?Ab(Ar.BASE64,e.rest):rj(e.rest)}function sj(r){return new Sb(r).contentType}function aj(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t){let s=0,o="";IE(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(IE(this.data_)){const s=this.data_,o=ej(s,e,t);return o===null?null:new Xi(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new Xi(s,!0)}}static getBlob(...e){if(jg()){const t=e.map(s=>s instanceof Xi?s.data_:s);return new Xi(JI.apply(null,t))}else{const t=e.map(d=>Ig(d)?nj(Ar.RAW,d).data:d.data_);let s=0;t.forEach(d=>{s+=d.byteLength});const o=new Uint8Array(s);let c=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)o[c++]=d[m]}),new Xi(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(r){let e;try{e=JSON.parse(r)}catch{return null}return HI(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function lj(r,e){const t=e.split("/").filter(s=>s.length>0).join("/");return r.length===0?t:r+"/"+t}function Cb(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(r,e){return e}class mn{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||cj}}let ph=null;function uj(r){return!Ig(r)||r.length<2?r:Cb(r)}function Nb(){if(ph)return ph;const r=[];r.push(new mn("bucket")),r.push(new mn("generation")),r.push(new mn("metageneration")),r.push(new mn("name","fullPath",!0));function e(c,d){return uj(d)}const t=new mn("name");t.xform=e,r.push(t);function s(c,d){return d!==void 0?Number(d):d}const o=new mn("size");return o.xform=s,r.push(o),r.push(new mn("timeCreated")),r.push(new mn("updated")),r.push(new mn("md5Hash",null,!0)),r.push(new mn("cacheControl",null,!0)),r.push(new mn("contentDisposition",null,!0)),r.push(new mn("contentEncoding",null,!0)),r.push(new mn("contentLanguage",null,!0)),r.push(new mn("contentType",null,!0)),r.push(new mn("metadata","customMetadata",!0)),ph=r,ph}function hj(r,e){function t(){const s=r.bucket,o=r.fullPath,c=new kn(s,o);return e._makeStorageReference(c)}Object.defineProperty(r,"ref",{get:t})}function dj(r,e,t){const s={};s.type="file";const o=t.length;for(let c=0;c<o;c++){const d=t[c];s[d.local]=d.xform(s,e[d.server])}return hj(s,r),s}function Ib(r,e,t){const s=Rb(e);return s===null?null:dj(r,s,t)}function fj(r,e,t,s){const o=Rb(e);if(o===null||!Ig(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const d=encodeURIComponent;return c.split(",").map(y=>{const _=r.bucket,x=r.fullPath,T="/b/"+d(_)+"/o/"+d(x),D=Dg(T,t,s),C=bb({alt:"media",token:y});return D+C})[0]}function mj(r,e){const t={},s=e.length;for(let o=0;o<s;o++){const c=e[o];c.writable&&(t[c.server]=r[c.local])}return JSON.stringify(t)}class jb{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(r){if(!r)throw Ng()}function pj(r,e){function t(s,o){const c=Ib(r,o,e);return Db(c!==null),c}return t}function gj(r,e){function t(s,o){const c=Ib(r,o,e);return Db(c!==null),fj(c,o,r.host,r._protocol)}return t}function kb(r){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=NI():o=CI():t.getStatus()===402?o=RI(r.bucket):t.getStatus()===403?o=II(r.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function yj(r){const e=kb(r);function t(s,o){let c=e(s,o);return s.getStatus()===404&&(c=SI(r.path)),c.serverResponse=o.serverResponse,c}return t}function vj(r,e,t){const s=e.fullServerUrl(),o=Dg(s,r.host,r._protocol),c="GET",d=r.maxOperationRetryTime,m=new jb(o,c,gj(r,t),d);return m.errorHandler=yj(e),m}function _j(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function Ej(r,e,t){const s=Object.assign({},t);return s.fullPath=r.path,s.size=e.size(),s.contentType||(s.contentType=_j(null,e)),s}function wj(r,e,t,s,o){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function m(){let Q="";for(let ne=0;ne<2;ne++)Q=Q+Math.random().toString().slice(2);return Q}const g=m();d["Content-Type"]="multipart/related; boundary="+g;const y=Ej(e,s,o),_=mj(y,t),x="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+g+"--",D=Xi.getBlob(x,s,T);if(D===null)throw MI();const C={name:y.fullPath},j=Dg(c,r.host,r._protocol),k="POST",z=r.maxUploadRetryTime,X=new jb(j,k,pj(r,t),z);return X.urlParams=C,X.headers=d,X.body=D.uploadData(),X.errorHandler=kb(e),X}class Tj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ra.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ra.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ra.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o,c){if(this.sent_)throw Jl("cannot .send() more than once");if(fa(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),c!==void 0)for(const d in c)c.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,c[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Jl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class bj extends Tj{initXhr(){this.xhr_.responseType="text"}}function Ob(){return new bj}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,t){this._service=e,t instanceof kn?this._location=t:this._location=kn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ca(e,t)}get root(){const e=new kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Cb(this._location.path)}get storage(){return this._service}get parent(){const e=oj(this._location.path);if(e===null)return null;const t=new kn(this._location.bucket,e);return new ca(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw VI(e)}}function xj(r,e,t){r._throwIfRoot("uploadBytes");const s=wj(r.storage,r._location,Nb(),new Xi(e,!0),t);return r.storage.makeRequestWithTokens(s,Ob).then(o=>({metadata:o,ref:r}))}function Aj(r){r._throwIfRoot("getDownloadURL");const e=vj(r.storage,r._location,Nb());return r.storage.makeRequestWithTokens(e,Ob).then(t=>{if(t===null)throw UI();return t})}function Sj(r,e){const t=lj(r._location.path,e),s=new kn(r._location.bucket,t);return new ca(r.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(r){return/^[A-Za-z]+:\/\//.test(r)}function Cj(r,e){return new ca(r,e)}function Pb(r,e){if(r instanceof kg){const t=r;if(t._bucket==null)throw PI();const s=new ca(t,t._bucket);return e!=null?Pb(s,e):s}else return e!==void 0?Sj(r,e):r}function Nj(r,e){if(e&&Rj(e)){if(r instanceof kg)return Cj(r,e);throw Ap("To use ref(service, url), the first argument must be a Storage instance.")}else return Pb(r,e)}function DE(r,e){const t=e==null?void 0:e[wb];return t==null?null:kn.makeFromBucketSpec(t,r)}function Ij(r,e,t,s={}){r.host=`${e}:${t}`;const o=fa(e);o&&(Lp(`https://${r.host}`),Do("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:c}=s;c&&(r._overrideAuthToken=typeof c=="string"?c:Cw(c,r.app.options.projectId))}class kg{constructor(e,t,s,o,c,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=Eb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=xI,this._maxUploadRetryTime=AI,this._requests=new Set,o!=null?this._bucket=kn.makeFromBucketSpec(o,this._host):this._bucket=DE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=kn.makeFromBucketSpec(this._url,e):this._bucket=DE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ca(this,e)}_makeRequest(e,t,s,o,c=!0){if(this._deleted)return new BI(Tb());{const d=XI(e,this._appId,s,o,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const kE="@firebase/storage",OE="0.13.10";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="storage";function wd(r,e,t){return r=dt(r),xj(r,e,t)}function Td(r){return r=dt(r),Aj(r)}function bd(r,e){return r=dt(r),Nj(r,e)}function jj(r=zp(),e){r=dt(r),Do("Storage",!1);const s=ed(r,Mb).getImmediate({identifier:e}),o=Aw("storage");return o&&Dj(s,...o),s}function Dj(r,e,t,s={}){Ij(r,e,t,s)}function kj(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new kg(t,s,o,e,ma)}function Oj(){sa(new as(Mb,kj,"PUBLIC").setMultipleInstances(!0)),Sr(kE,OE,""),Sr(kE,OE,"esm2017")}Oj();function Og(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function Ub(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Pj=Ub,Lb=new Rc("auth","Firebase",Ub());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Vp("@firebase/auth");function Mj(r,...e){qh.logLevel<=Ue.WARN&&qh.warn(`Auth (${ma}): ${r}`,...e)}function Ah(r,...e){qh.logLevel<=Ue.ERROR&&qh.error(`Auth (${ma}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(r,...e){throw Mg(r,...e)}function ir(r,...e){return Mg(r,...e)}function Pg(r,e,t){const s=Object.assign(Object.assign({},Pj()),{[e]:t});return new Rc("auth","Firebase",s).create(e,{appName:r.name})}function fi(r){return Pg(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uj(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Qn(r,"argument-error"),Pg(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mg(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Lb.create(r,...e)}function xe(r,e,...t){if(!r)throw Mg(e,...t)}function ci(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ah(e),new Error(e)}function _i(r,e){r||ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function Lj(){return PE()==="http:"||PE()==="https:"}function PE(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lj()||GS()||"connection"in navigator)?navigator.onLine:!0}function Bj(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t){this.shortDelay=e,this.longDelay=t,_i(t>e,"Short delay should be less than long delay!"),this.isMobile=FS()||$S()}get(){return Vj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(r,e){_i(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qj=new kc(3e4,6e4);function Ei(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Mr(r,e,t,s,o={}){return Bb(r,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const m=Cc(Object.assign({key:r.config.apiKey},d)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:g},c);return HS()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&fa(r.emulatorConfig.host)&&(y.credentials="include"),Vb.fetch()(await zb(r,r.config.apiHost,t,m),y)})}async function Bb(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},zj),e);try{const o=new Gj(r),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw gh(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw gh(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw gh(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw gh(r,"user-disabled",d);const _=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Pg(r,_,y);Qn(r,_)}}catch(o){if(o instanceof Pr)throw o;Qn(r,"network-request-failed",{message:String(o)})}}async function Oc(r,e,t,s,o={}){const c=await Mr(r,e,t,s,o);return"mfaPendingCredential"in c&&Qn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function zb(r,e,t,s){const o=`${e}${t}?${s}`,c=r,d=c.config.emulator?Ug(r.config,o):`${r.config.apiScheme}://${o}`;return Fj.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function Hj(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Gj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ir(this.auth,"network-request-failed")),qj.get())})}}function gh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=ir(r,e,s);return o.customData._tokenResponse=t,o}function ME(r){return r!==void 0&&r.enterprise!==void 0}class $j{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Hj(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Yj(r,e){return Mr(r,"GET","/v2/recaptchaConfig",Ei(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kj(r,e){return Mr(r,"POST","/v1/accounts:delete",e)}async function Hh(r,e){return Mr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Qj(r,e=!1){const t=dt(r),s=await t.getIdToken(e),o=Lg(s);xe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:s,authTime:dc(Wm(o.auth_time)),issuedAtTime:dc(Wm(o.iat)),expirationTime:dc(Wm(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Wm(r){return Number(r)*1e3}function Lg(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Ah("JWT malformed, contained fewer than 3 sections"),null;try{const o=bw(t);return o?JSON.parse(o):(Ah("Failed to decode base64 JWT payload"),null)}catch(o){return Ah("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function UE(r){const e=Lg(r);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Pr&&Wj(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Wj({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dc(this.lastLoginAt),this.creationTime=dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gh(r){var e;const t=r.auth,s=await r.getIdToken(),o=await No(r,Hh(t,{idToken:s}));xe(o==null?void 0:o.users.length,t,"internal-error");const c=o.users[0];r._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?Fb(c.providerUserInfo):[],m=Jj(r.providerData,d),g=r.isAnonymous,y=!(r.email&&c.passwordHash)&&!(m!=null&&m.length),_=g?y:!1,x={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:m,metadata:new Rp(c.createdAt,c.lastLoginAt),isAnonymous:_};Object.assign(r,x)}async function Zj(r){const e=dt(r);await Gh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Jj(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Fb(r){return r.map(e=>{var{providerId:t}=e,s=Og(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(r,e){const t=await Bb(r,{},async()=>{const s=Cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,d=await zb(r,o,"/v1/token",`key=${c}`),m=await r._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",Vb.fetch()(d,{method:"POST",headers:m,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tD(r,e){return Mr(r,"POST","/v2/accounts:revokeToken",Ei(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):UE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=UE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:c}=await eD(e,t);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:c}=t,d=new yo;return s&&(xe(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(xe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(xe(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yo,this.toJSON())}_performRefresh(){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(r,e){xe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class nr{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,c=Og(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Rp(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await No(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Qj(this,e)}reload(){return Zj(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new nr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Gh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wn(this.auth.app))return Promise.reject(fi(this.auth));const e=await this.getIdToken();return await No(this,Kj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,c,d,m,g,y,_;const x=(s=t.displayName)!==null&&s!==void 0?s:void 0,T=(o=t.email)!==null&&o!==void 0?o:void 0,D=(c=t.phoneNumber)!==null&&c!==void 0?c:void 0,C=(d=t.photoURL)!==null&&d!==void 0?d:void 0,j=(m=t.tenantId)!==null&&m!==void 0?m:void 0,k=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,z=(y=t.createdAt)!==null&&y!==void 0?y:void 0,X=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:Q,emailVerified:ne,isAnonymous:J,providerData:oe,stsTokenManager:U}=t;xe(Q&&U,e,"internal-error");const N=yo.fromJSON(this.name,U);xe(typeof Q=="string",e,"internal-error"),Wi(x,e.name),Wi(T,e.name),xe(typeof ne=="boolean",e,"internal-error"),xe(typeof J=="boolean",e,"internal-error"),Wi(D,e.name),Wi(C,e.name),Wi(j,e.name),Wi(k,e.name),Wi(z,e.name),Wi(X,e.name);const A=new nr({uid:Q,auth:e,email:T,emailVerified:ne,displayName:x,isAnonymous:J,photoURL:C,phoneNumber:D,tenantId:j,stsTokenManager:N,createdAt:z,lastLoginAt:X});return oe&&Array.isArray(oe)&&(A.providerData=oe.map(S=>Object.assign({},S))),k&&(A._redirectEventId=k),A}static async _fromIdTokenResponse(e,t,s=!1){const o=new yo;o.updateFromServerResponse(t);const c=new nr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Gh(c),c}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];xe(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Fb(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new yo;m.updateFromIdToken(s);const g=new nr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Rp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=new Map;function ui(r){_i(r instanceof Function,"Expected a class definition");let e=LE.get(r);return e?(_i(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,LE.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qb.type="NONE";const VE=qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(r,e,t){return`firebase:${r}:${e}:${t}`}class vo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=Sh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Sh("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Hh(this.auth,{idToken:e}).catch(()=>{});return t?nr._fromGetAccountInfoResponse(this.auth,t,e):null}return nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new vo(ui(VE),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||ui(VE);const d=Sh(s,e.config.apiKey,e.name);let m=null;for(const y of t)try{const _=await y._get(d);if(_){let x;if(typeof _=="string"){const T=await Hh(e,{idToken:_}).catch(()=>{});if(!T)break;x=await nr._fromGetAccountInfoResponse(e,T,_)}else x=nr._fromJSON(e,_);y!==c&&(m=x),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new vo(c,e,s):(c=g[0],m&&await c._set(d,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new vo(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Hb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Qb(e))return"Blackberry";if(Wb(e))return"Webos";if(Gb(e))return"Safari";if((e.includes("chrome/")||$b(e))&&!e.includes("edge/"))return"Chrome";if(Kb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Hb(r=cn()){return/firefox\//i.test(r)}function Gb(r=cn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $b(r=cn()){return/crios\//i.test(r)}function Yb(r=cn()){return/iemobile/i.test(r)}function Kb(r=cn()){return/android/i.test(r)}function Qb(r=cn()){return/blackberry/i.test(r)}function Wb(r=cn()){return/webos/i.test(r)}function Vg(r=cn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function nD(r=cn()){var e;return Vg(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rD(){return YS()&&document.documentMode===10}function Xb(r=cn()){return Vg(r)||Kb(r)||Wb(r)||Qb(r)||/windows phone/i.test(r)||Yb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(r,e=[]){let t;switch(r){case"Browser":t=BE(cn());break;case"Worker":t=`${BE(cn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ma}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((d,m)=>{try{const g=e(c);d(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(r,e={}){return Mr(r,"GET","/v2/passwordPolicy",Ei(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=6;class oD{constructor(e){var t,s,o,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:aD,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,c,d,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zE(this),this.idTokenSubscription=new zE(this),this.beforeStateQueue=new iD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ui(t)),this._initializationPromise=this.queue(async()=>{var s,o,c;if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Hh(this,{idToken:e}),s=await nr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(wn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===m)&&(g!=null&&g.user)&&(o=g.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Bj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wn(this.app))return Promise.reject(fi(this));const t=e?dt(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wn(this.app)?Promise.reject(fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wn(this.app)?Promise.reject(fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sD(this),t=new oD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await tD(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ui(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[ui(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Mj(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function wi(r){return dt(r)}class zE{constructor(e){this.auth=e,this.observer=null,this.addObserver=tR(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cD(r){xd=r}function Jb(r){return xd.loadJS(r)}function uD(){return xd.recaptchaEnterpriseScript}function hD(){return xd.gapiScript}function dD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class fD{constructor(){this.enterprise=new mD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class mD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const pD="recaptcha-enterprise",ex="NO_RECAPTCHA";class gD{constructor(e){this.type=pD,this.auth=wi(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{Yj(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new $j(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(g=>{m(g)})})}function o(c,d,m){const g=window.grecaptcha;ME(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(ex)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fD().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(m=>{if(!t&&ME(window.grecaptcha))o(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=uD();g.length!==0&&(g+=m),Jb(g).then(()=>{o(m,c,d)}).catch(y=>{d(y)})}}).catch(m=>{d(m)})})}}async function FE(r,e,t,s=!1,o=!1){const c=new gD(r);let d;if(o)d=ex;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const m=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function $h(r,e,t,s,o){var c;if(!((c=r._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await FE(r,e,t,t==="getOobCode");return s(r,d)}else return s(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await FE(r,e,t,t==="getOobCode");return s(r,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(r,e){const t=ed(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(pi(c,e??{}))return o;Qn(o,"already-initialized")}return t.initialize({options:e})}function vD(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ui);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function _D(r,e,t){const s=wi(r);xe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=tx(e),{host:d,port:m}=ED(e),g=m===null?"":`:${m}`,y={url:`${c}//${d}${g}/`},_=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){xe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),xe(pi(y,s.config.emulator)&&pi(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,fa(d)?(Do("Auth",!0),Lp(`${c}//${d}${g}`)):wD()}function tx(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function ED(r){const e=tx(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:qE(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:qE(d)}}}function qE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function wD(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ci("not implemented")}_getIdTokenResponse(e){return ci("not implemented")}_linkToIdToken(e,t){return ci("not implemented")}_getReauthenticationResolver(e){return ci("not implemented")}}async function TD(r,e){return Mr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(r,e){return Oc(r,"POST","/v1/accounts:signInWithPassword",Ei(r,e))}async function xD(r,e){return Mr(r,"POST","/v1/accounts:sendOobCode",Ei(r,e))}async function AD(r,e){return xD(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(r,e){return Oc(r,"POST","/v1/accounts:signInWithEmailLink",Ei(r,e))}async function RD(r,e){return Oc(r,"POST","/v1/accounts:signInWithEmailLink",Ei(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends Bg{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Tc(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Tc(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $h(e,t,"signInWithPassword",bD);case"emailLink":return SD(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $h(e,s,"signUpPassword",TD);case"emailLink":return RD(e,{idToken:t,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(r,e){return Oc(r,"POST","/v1/accounts:signInWithIdp",Ei(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD="http://localhost";class ua extends Bg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ua(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,c=Og(t,["providerId","signInMethod"]);if(!s||!o)return null;const d=new ua(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return _o(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,_o(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_o(e,t)}buildRequest(){const e={requestUri:CD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Cc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ID(r){const e=ec(tc(r)).link,t=e?ec(tc(e)).deep_link_id:null,s=ec(tc(r)).deep_link_id;return(s?ec(tc(s)).link:null)||s||t||e||r}class zg{constructor(e){var t,s,o,c,d,m;const g=ec(tc(e)),y=(t=g.apiKey)!==null&&t!==void 0?t:null,_=(s=g.oobCode)!==null&&s!==void 0?s:null,x=ND((o=g.mode)!==null&&o!==void 0?o:null);xe(y&&_&&x,"argument-error"),this.apiKey=y,this.operation=x,this.code=_,this.continueUrl=(c=g.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(d=g.lang)!==null&&d!==void 0?d:null,this.tenantId=(m=g.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=ID(e);try{return new zg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.providerId=Bo.PROVIDER_ID}static credential(e,t){return Tc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=zg.parseLink(t);return xe(s,"argument-error"),Tc._fromEmailAndCode(e,s.code,s.tenantId)}}Bo.PROVIDER_ID="password";Bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends Fg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Pc{constructor(){super("facebook.com")}static credential(e){return ua._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ua._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return li.credential(t,s)}catch{return null}}}li.GOOGLE_SIGN_IN_METHOD="google.com";li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Pc{constructor(){super("github.com")}static credential(e){return ua._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.GITHUB_SIGN_IN_METHOD="github.com";Ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Pc{constructor(){super("twitter.com")}static credential(e,t){return ua._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return es.credential(t,s)}catch{return null}}}es.TWITTER_SIGN_IN_METHOD="twitter.com";es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(r,e){return Oc(r,"POST","/v1/accounts:signUp",Ei(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const c=await nr._fromIdTokenResponse(e,s,o),d=HE(s);return new ha({user:c,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=HE(s);return new ha({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function HE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends Pr{constructor(e,t,s,o){var c;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Yh.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Yh(e,t,s,o)}}function nx(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Yh._fromErrorAndOperation(r,c,e,s):c})}async function DD(r,e,t=!1){const s=await No(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ha._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(r,e,t=!1){const{auth:s}=r;if(wn(s.app))return Promise.reject(fi(s));const o="reauthenticate";try{const c=await No(r,nx(s,o,e,r),t);xe(c.idToken,s,"internal-error");const d=Lg(c.idToken);xe(d,s,"internal-error");const{sub:m}=d;return xe(r.uid===m,s,"user-mismatch"),ha._forOperation(r,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Qn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rx(r,e,t=!1){if(wn(r.app))return Promise.reject(fi(r));const s="signIn",o=await nx(r,s,e),c=await ha._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(c.user),c}async function OD(r,e){return rx(wi(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ix(r){const e=wi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PD(r,e,t){const s=wi(r);await $h(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",AD)}async function MD(r,e,t){if(wn(r.app))return Promise.reject(fi(r));const s=wi(r),d=await $h(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jD).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&ix(r),g}),m=await ha._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function UD(r,e,t){return wn(r.app)?Promise.reject(fi(r)):OD(dt(r),Bo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&ix(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(r,e){return Mr(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cp(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=dt(r),c={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await No(s,LD(s.auth,c));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const m=s.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function VD(r,e,t,s){return dt(r).onIdTokenChanged(e,t,s)}function BD(r,e,t){return dt(r).beforeAuthStateChanged(e,t)}function zD(r,e,t,s){return dt(r).onAuthStateChanged(e,t,s)}function FD(r){return dt(r).signOut()}const Kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kh,"1"),this.storage.removeItem(Kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=1e3,HD=10;class ax extends sx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);rD()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,HD):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},qD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ax.type="LOCAL";const GD=ax;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox extends sx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ox.type="SESSION";const lx=ox;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Ad(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:c}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async y=>y(t.origin,c)),g=await $D(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ad.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,g)=>{const y=qg("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(x){const T=x;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(T.data.response);break;default:clearTimeout(_),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return window}function KD(r){Nr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(){return typeof Nr().WorkerGlobalScope<"u"&&typeof Nr().importScripts=="function"}async function QD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WD(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function XD(){return cx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="firebaseLocalStorageDb",ZD=1,Qh="firebaseLocalStorage",hx="fbase_key";class Mc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Sd(r,e){return r.transaction([Qh],e?"readwrite":"readonly").objectStore(Qh)}function JD(){const r=indexedDB.deleteDatabase(ux);return new Mc(r).toPromise()}function Np(){const r=indexedDB.open(ux,ZD);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Qh,{keyPath:hx})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Qh)?e(s):(s.close(),await JD(),e(await Np()))})})}async function GE(r,e,t){const s=Sd(r,!0).put({[hx]:e,value:t});return new Mc(s).toPromise()}async function ek(r,e){const t=Sd(r,!1).get(e),s=await new Mc(t).toPromise();return s===void 0?null:s.value}function $E(r,e){const t=Sd(r,!0).delete(e);return new Mc(t).toPromise()}const tk=800,nk=3;class dx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Np(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>nk)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ad._getInstance(XD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await QD(),!this.activeServiceWorker)return;this.sender=new YD(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Np();return await GE(e,Kh,"1"),await $E(e,Kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>GE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>ek(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$E(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Sd(o,!1).getAll();return new Mc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dx.type="LOCAL";const rk=dx;new kc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(r,e){return e?ui(e):(xe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg extends Bg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _o(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ik(r){return rx(r.auth,new Hg(r),r.bypassAuthState)}function sk(r){const{auth:e,user:t}=r;return xe(t,e,"internal-error"),kD(t,new Hg(r),r.bypassAuthState)}async function ak(r){const{auth:e,user:t}=r;return xe(t,e,"internal-error"),DD(t,new Hg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,t,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ik;case"linkViaPopup":case"linkViaRedirect":return ak;case"reauthViaPopup":case"reauthViaRedirect":return sk;default:Qn(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=new kc(2e3,1e4);async function lk(r,e,t){if(wn(r.app))return Promise.reject(ir(r,"operation-not-supported-in-this-environment"));const s=wi(r);Uj(r,e,Fg);const o=fx(s,t);return new na(s,"signInViaPopup",e,o).executeNotNull()}class na extends mx{constructor(e,t,s,o,c){super(e,t,o,c),this.provider=s,this.authWindow=null,this.pollId=null,na.currentPopupAction&&na.currentPopupAction.cancel(),na.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,na.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ok.get())};e()}}na.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="pendingRedirect",Rh=new Map;class uk extends mx{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Rh.get(this.auth._key());if(!e){try{const s=await hk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Rh.set(this.auth._key(),e)}return this.bypassAuthState||Rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hk(r,e){const t=mk(e),s=fk(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function dk(r,e){Rh.set(r._key(),e)}function fk(r){return ui(r._redirectPersistence)}function mk(r){return Sh(ck,r.config.apiKey,r.name)}async function pk(r,e,t=!1){if(wn(r.app))return Promise.reject(fi(r));const s=wi(r),o=fx(s,e),d=await new uk(s,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=10*60*1e3;class yk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!px(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(ir(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gk&&this.cachedEventUids.clear(),this.cachedEventUids.has(YE(e))}saveEventToCache(e){this.cachedEventUids.add(YE(e)),this.lastProcessedEventTime=Date.now()}}function YE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function px({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vk(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return px(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(r,e={}){return Mr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wk=/^https?/;async function Tk(r){if(r.config.emulator)return;const{authorizedDomains:e}=await _k(r);for(const t of e)try{if(bk(t))return}catch{}Qn(r,"unauthorized-domain")}function bk(r){const e=Sp(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!wk.test(t))return!1;if(Ek.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=new kc(3e4,6e4);function KE(){const r=Nr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Ak(r){return new Promise((e,t)=>{var s,o,c;function d(){KE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KE(),t(ir(r,"network-request-failed"))},timeout:xk.get()})}if(!((o=(s=Nr().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=Nr().gapi)===null||c===void 0)&&c.load)d();else{const m=dD("iframefcb");return Nr()[m]=()=>{gapi.load?d():t(ir(r,"network-request-failed"))},Jb(`${hD()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Ch=null,e})}let Ch=null;function Sk(r){return Ch=Ch||Ak(r),Ch}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=new kc(5e3,15e3),Ck="__/auth/iframe",Nk="emulator/auth/iframe",Ik={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dk(r){const e=r.config;xe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Ug(e,Nk):`https://${r.config.authDomain}/${Ck}`,s={apiKey:e.apiKey,appName:r.name,v:ma},o=jk.get(r.config.apiHost);o&&(s.eid=o);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${Cc(s).slice(1)}`}async function kk(r){const e=await Sk(r),t=Nr().gapi;return xe(t,r,"internal-error"),e.open({where:document.body,url:Dk(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ik,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=ir(r,"network-request-failed"),m=Nr().setTimeout(()=>{c(d)},Rk.get());function g(){Nr().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pk=500,Mk=600,Uk="_blank",Lk="http://localhost";class QE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Vk(r,e,t,s=Pk,o=Mk){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g=Object.assign(Object.assign({},Ok),{width:s.toString(),height:o.toString(),top:c,left:d}),y=cn().toLowerCase();t&&(m=$b(y)?Uk:t),Hb(y)&&(e=e||Lk,g.scrollbars="yes");const _=Object.entries(g).reduce((T,[D,C])=>`${T}${D}=${C},`,"");if(nD(y)&&m!=="_self")return Bk(e||"",m),new QE(null);const x=window.open(e||"",m,_);xe(x,r,"popup-blocked");try{x.focus()}catch{}return new QE(x)}function Bk(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="__/auth/handler",Fk="emulator/auth/handler",qk=encodeURIComponent("fac");async function WE(r,e,t,s,o,c){xe(r.config.authDomain,r,"auth-domain-config-required"),xe(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:ma,eventId:o};if(e instanceof Fg){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",eR(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,x]of Object.entries({}))d[_]=x}if(e instanceof Pc){const _=e.getScopes().filter(x=>x!=="");_.length>0&&(d.scopes=_.join(","))}r.tenantId&&(d.tid=r.tenantId);const m=d;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await r._getAppCheckToken(),y=g?`#${qk}=${encodeURIComponent(g)}`:"";return`${Hk(r)}?${Cc(m).slice(1)}${y}`}function Hk({config:r}){return r.emulator?Ug(r,Fk):`https://${r.authDomain}/${zk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="webStorageSupport";class Gk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lx,this._completeRedirectFn=pk,this._overrideRedirectResult=dk}async _openPopup(e,t,s,o){var c;_i((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await WE(e,t,s,Sp(),o);return Vk(e,d,qg())}async _openRedirect(e,t,s,o){await this._originValidation(e);const c=await WE(e,t,s,Sp(),o);return KD(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(_i(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await kk(e),s=new yk(e);return t.register("authEvent",o=>(xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xm,{type:Xm},o=>{var c;const d=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[Xm];d!==void 0&&t(!!d),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Tk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Xb()||Gb()||Vg()}}const $k=Gk;var XE="@firebase/auth",ZE="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Qk(r){sa(new as("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;xe(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zb(r)},y=new lD(s,o,c,g);return vD(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),sa(new as("auth-internal",e=>{const t=wi(e.getProvider("auth").getImmediate());return(s=>new Yk(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sr(XE,ZE,Kk(r)),Sr(XE,ZE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=5*60,Xk=Rw("authIdTokenMaxAge")||Wk;let JE=null;const Zk=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Xk)return;const o=t==null?void 0:t.token;JE!==o&&(JE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Jk(r=zp()){const e=ed(r,"auth");if(e.isInitialized())return e.getImmediate();const t=yD(r,{popupRedirectResolver:$k,persistence:[rk,GD,lx]}),s=Rw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=Zk(c.toString());BD(t,d,()=>d(t.currentUser)),VD(t,m=>d(m))}}const o=xw("auth");return o?_D(t,`http://${o}`):Do("Auth",!1),t}function eO(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}cD({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const c=ir("internal-error");c.customData=o,t(c)},s.type="text/javascript",s.charset="UTF-8",eO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Qk("Browser");const tO={apiKey:"AIzaSyAMKxVJqQyhB726ZIpqzrnlJwlVMEompzI",authDomain:"chocolate-review-web.firebaseapp.com",projectId:"chocolate-review-web",storageBucket:"chocolate-review-web.firebasestorage.app",messagingSenderId:"40760554846",appId:"1:40760554846:web:af7701c50e3a44c13acbcf",measurementId:"G-CQXWMKJDQW"},Gg=jw(tO),qe=lI(Gg),Rd=jj(Gg),ms=Jk(Gg),Cd=On(qe,"chocolates");On(qe,"makers");On(qe,"reviews");const gx=On(qe,"tags"),yx=async r=>{if(!r)return null;try{const e=await gn(yt(qe,"makers",r));if(e.exists()){const t=e.data();return t.name||t.brand||t.title||t.maker||"Unknown Maker"}}catch(e){console.error("Error fetching maker:",e)}return"Unknown Maker"},nO=async r=>{if(r.maker&&typeof r.maker=="string"&&r.maker!=="Unknown Maker")return console.log("✅ Chocolate already has direct maker name:",r.maker),r;if(r.makerId||r.MakerID){console.log("🔄 Looking up maker by ID for legacy chocolate");const e=await yx(r.makerId||r.MakerID);return{...r,maker:e||"Unknown Maker"}}return{...r,maker:"Unknown Maker"}},Nd=async r=>{console.log("🔄 Enriching",r.length,"chocolates with maker names...");const e=await Promise.all(r.map(t=>nO(t)));return console.log("✅ Enrichment complete"),e},$g=async()=>{try{console.log("📥 Fetching all chocolates...");const e=(await or(Cd)).docs.map(s=>({id:s.id,...s.data()}));console.log("📊 Raw chocolates fetched:",e.length);const t=await Nd(e);return console.log("✅ All chocolates enriched with maker names"),t}catch(r){throw console.error("💥 Error fetching chocolates:",r),r}},vx=async r=>{console.log("🔍 getChocolateById called with ID:",r);try{const e=yt(qe,"chocolates",r),t=await gn(e);if(t.exists()){const s={id:t.id,...t.data()};if(console.log("📄 Raw chocolate data from database:",{maker:s.maker,makerId:s.makerId,MakerID:s.MakerID,isUserContributed:s.isUserContributed}),s.isUserContributed&&s.maker&&typeof s.maker=="string")return console.log("✅ User-contributed chocolate with direct maker name:",s.maker),s;if(s.maker&&typeof s.maker=="string"&&s.maker!=="Unknown Maker")return console.log("✅ Chocolate with direct maker name:",s.maker),s;if(s.makerId||s.MakerID){console.log("🔄 Legacy chocolate, looking up maker by ID:",s.makerId||s.MakerID);const o=await yx(s.makerId||s.MakerID),c={...s,maker:o||"Unknown Maker"};return console.log("✅ Enriched legacy chocolate data with maker:",c.maker),c}return console.log("❌ No maker information found, using Unknown Maker"),{...s,maker:"Unknown Maker"}}else throw console.log("❌ Chocolate not found in database"),new Error("Chocolate not found")}catch(e){throw console.error("💥 Error in getChocolateById:",e),e}},_x=async r=>{try{console.log("🔍 Searching for:",r);const e=await or(gx),t={};e.docs.forEach(g=>{const y=g.data();t[g.id]=y.name.toLowerCase()});const o=(await or(Cd)).docs.map(g=>({id:g.id,...g.data()}));console.log("📊 Total chocolates in database:",o.length);const c=await Nd(o),d=r.toLowerCase().trim();console.log("🎯 Searching for term:",d);const m=c.filter(g=>{const y=g.name&&g.name.toLowerCase().includes(d),_=g.maker&&g.maker.toLowerCase().includes(d),x=g.origin&&g.origin.toLowerCase().includes(d),T=g.type&&g.type.toLowerCase().includes(d);let D=!1;g.tagIds&&Array.isArray(g.tagIds)&&(D=g.tagIds.some(j=>t[j]&&t[j].includes(d)));const C=y||_||x||T||D;return C&&console.log("✅ Match found:",g.name,"by",g.maker),C});return console.log("🎯 Search results:",m.length,"matches found"),m}catch(e){throw console.error("💥 Error searching chocolates:",e),e}},rO=async(r=10)=>{try{console.log("⭐ Fetching featured chocolates...");const e=fs(On(qe,"chocolates"),Vo("averageRating",">",0),la("averageRating","desc"),la("reviewCount","desc"),Fh(r)),t=await or(e);if(t.empty)return console.log("📭 No chocolates found in database, returning sample data"),ew(r);const s=t.docs.map(c=>({id:c.id,...c.data()}));console.log(`📊 Found ${s.length} featured chocolates in database`);const o=await Nd(s);return console.log("✅ Featured chocolates enriched with maker names"),o}catch(e){return console.error("💥 Error getting featured chocolates:",e),console.log("🔄 Falling back to sample data due to error"),ew(r)}},iO=async r=>{try{let e;r?e=fs(On(qe,"chocolates"),Vo(r.field,r.operator,r.value),la("averageRating","desc"),Fh(100)):e=fs(On(qe,"chocolates"),la("averageRating","desc"),Fh(100));const t=await or(e);if(t.empty)return tw(r==null?void 0:r.value);const s=t.docs.map(o=>({id:o.id,...o.data()}));return await Nd(s)}catch(e){return console.error("Error getting chocolates by category:",e),tw(r==null?void 0:r.value)}},sO=async(r,e)=>{let t=null;if(e){const o=bd(Rd,`chocolate-images/${Date.now()}_${e.name}`);await wd(o,e),t=await Td(o)}return{id:(await Sg(Cd,{...r,imageUrl:t,createdAt:new Date,updatedAt:new Date,averageRating:0,reviewCount:0})).id,...r,imageUrl:t}},Ex=async()=>(await or(gx)).docs.map(e=>({id:e.id,...e.data()})),aO=async(r,e)=>{try{const t=bd(Rd,`chocolate-images/${r}_${Date.now()}`);await wd(t,e);const s=await Td(t),o=yt(qe,"chocolates",r);return await Kn(o,{imageUrl:s,updatedAt:new Date}),s}catch(t){throw console.error("Error updating chocolate image:",t),t}},ew=r=>[{id:"1",name:"Madagascan Dark 72%",maker:"Terroir Artisan",type:"Dark",origin:"Madagascar",cacaoPercentage:72,averageRating:4.8,ratings:186,imageUrl:"/placeholder-chocolate.jpg"},{id:"2",name:"Sea Salt Caramel",maker:"Wild Coast Chocolate",type:"Dark Milk",origin:"Ecuador",cacaoPercentage:55,averageRating:4.9,ratings:203,imageUrl:"/placeholder-chocolate.jpg"},{id:"3",name:"Peruvian Single Origin",maker:"Craft Origins",type:"Dark",origin:"Peru",cacaoPercentage:70,averageRating:4.7,ratings:156,imageUrl:"/placeholder-chocolate.jpg"},{id:"4",name:"Vanilla Bean White",maker:"Alpine Confections",type:"White",origin:"Various",cacaoPercentage:33,averageRating:4.5,ratings:98,imageUrl:"/placeholder-chocolate.jpg"},{id:"5",name:"Hazelnut Crunch",maker:"Artisan Delights",type:"Milk",origin:"Italy",cacaoPercentage:45,averageRating:4.6,ratings:124,imageUrl:"/placeholder-chocolate.jpg"}].slice(0,r),tw=r=>[{id:"d1",name:"Madagascar 72% Dark",maker:"Terroir Artisan",type:"Dark",origin:"Madagascar",cacaoPercentage:72,averageRating:4.8,ratings:186,imageUrl:"/placeholder-chocolate.jpg"}],oO=async(r,e)=>{console.log("🍫 Starting addUserChocolate process..."),console.log("📄 Chocolate data received:",r),console.log("🖼️ Image file received:",e?{name:e.name,size:`${(e.size/1024/1024).toFixed(2)}MB`,type:e.type}:"No image file");try{let t=null;if(e){console.log("📤 Starting image upload...");const d=Date.now(),m=e.name.replace(/[^a-zA-Z0-9.-]/g,"_"),g=`user-contributions/${r.createdBy}/${d}_${m}`;console.log("📁 Upload path:",g);const y=bd(Rd,g);try{console.log("⬆️ Uploading to Firebase Storage...");const _=await wd(y,e);console.log("✅ Upload successful, getting download URL..."),t=await Td(y),console.log("🔗 Download URL obtained:",t)}catch(_){console.error("❌ Image upload failed:",_),console.log("⚠️ Proceeding without image due to upload failure"),t=`https://placehold.co/300x300?text=${encodeURIComponent(r.name.substring(0,20))}`}}else console.log("📷 No image provided, using placeholder"),t=`https://placehold.co/300x300?text=${encodeURIComponent(r.name.substring(0,20))}`;const s={name:r.name,maker:r.maker,type:r.type,origin:r.origin,cacaoPercentage:r.cacaoPercentage,description:r.description,tags:r.tags||[],imageUrl:t,createdBy:r.createdBy,createdByName:r.createdByName,isUserContributed:!0,status:"approved",createdAt:ln(),updatedAt:ln(),contributionDate:ln(),averageRating:0,reviewCount:0,ratings:0};console.log("💾 Final chocolate object (check maker field):",{maker:s.maker,isUserContributed:s.isUserContributed,name:s.name});const o=await Sg(Cd,s);console.log("✅ Chocolate saved with ID:",o.id);try{console.log("📊 Updating user contribution stats..."),await lO(r.createdBy,"chocolatesAdded"),await cO(r.createdBy),console.log("✅ User stats updated")}catch(d){console.error("⚠️ Failed to update user stats (non-critical):",d)}const c={id:o.id,...s,maker:r.maker};return console.log("🎉 addUserChocolate completed successfully:",c),c}catch(t){throw console.error("💥 Error in addUserChocolate:",t),console.error("📋 Error details:",{code:t.code,message:t.message,stack:t.stack}),t}},lO=async(r,e,t=1)=>{try{const s=yt(qe,"users",r);(await gn(s)).exists()?await Kn(s,{[`stats.${e}`]:bI(t),updatedAt:ln()}):await vb(s,{stats:{[e]:t},createdAt:ln(),updatedAt:ln()},{merge:!0})}catch(s){throw console.error("Error updating user contribution stats:",s),s}},cO=async r=>{try{const e=yt(qe,"users",r),t=await gn(e);if(!t.exists())return;const s=t.data(),o=s.stats||{},c=s.badges||[],d=[...c],m=o.chocolatesAdded||0;m>=1&&!d.includes("Contributor")&&d.push("Contributor"),m>=5&&!d.includes("Chocolate Scout")&&d.push("Chocolate Scout"),m>=10&&!d.includes("Database Builder")&&d.push("Database Builder"),m>=25&&!d.includes("Chocolate Curator")&&d.push("Chocolate Curator"),m>=50&&!d.includes("Master Contributor")&&d.push("Master Contributor"),d.length>c.length&&await Kn(e,{badges:d,updatedAt:ln()})}catch(e){console.error("Error checking and awarding badges:",e)}},uO=async r=>{try{console.log("🔍 Getting reviews for user:",r);const e=fs(On(qe,"reviews"),Vo("userId","==",r),la("createdAt","desc")),t=await or(e);if(t.empty)return console.log("No reviews found for user"),[];const s=[];for(const o of t.docs){const c={id:o.id,...o.data()};if(console.log("📝 Processing review:",c.id),c.chocolate&&c.chocolate.name)console.log("✅ Review already has chocolate data"),s.push(c);else try{console.log("🔍 Fetching chocolate data for ID:",c.chocolateId);const d=await vx(c.chocolateId);c.chocolate={id:d.id,name:d.name,maker:d.maker,imageUrl:d.imageUrl||"https://placehold.co/300x300?text=Chocolate"},console.log("✅ Added chocolate data:",c.chocolate.name),s.push(c)}catch(d){console.error("❌ Failed to fetch chocolate for review:",c.id,d),c.chocolate={id:c.chocolateId||"unknown",name:"Unknown Chocolate",maker:"Unknown Maker",imageUrl:"https://placehold.co/300x300?text=Unknown"},s.push(c)}}return console.log("✅ Processed",s.length,"reviews with chocolate data"),s}catch(e){return console.error("Error getting user reviews:",e),[]}},Ip=async r=>{try{const e={...r,createdAt:ln()},t=await Sg(On(qe,"reviews"),e);return await hO(r.chocolateId),await dO(r.userId),{id:t.id,...e}}catch(e){throw console.error("Error adding review:",e),e}},hO=async r=>{try{const e=fs(On(qe,"reviews"),Vo("chocolateId","==",r)),t=await or(e);if(!t.empty){const s=t.docs.map(m=>m.data()),c=s.reduce((m,g)=>m+g.rating,0)/s.length,d=yt(qe,"chocolates",r);await Kn(d,{averageRating:c,reviewCount:s.length,updatedAt:ln()})}}catch(e){throw console.error("Error updating chocolate rating:",e),e}},dO=async r=>{try{const e=fs(On(qe,"reviews"),Vo("userId","==",r)),s=(await or(e)).size,o=yt(qe,"users",r);await Kn(o,{reviewCount:s,updatedAt:ln()})}catch(e){console.error("Error updating user review count:",e)}},fO=async(r=3)=>{try{const e=fs(On(qe,"reviews"),la("createdAt","desc"),Fh(10)),t=await or(e);if(!t.empty){const s=[];for(const m of t.docs){const g={id:m.id,...m.data()};try{const y=await gn(yt(qe,"chocolates",g.chocolateId));y.exists()&&(g.chocolate={id:y.id,...y.data()},s.push(g))}catch(y){console.error("Error fetching chocolate for review:",y)}}const o=s.map(m=>{const g=m.rating||0,y=m.text?m.text.length:0,_=m.createdAt?(Date.now()-m.createdAt.toDate().getTime())/(1e3*60*60*24):999,x=g*.4+Math.min(y/200,1)*.3+Math.max(0,(30-_)/30)*.3;return{...m,featuredScore:x}}),c=[],d=new Set;return o.sort((m,g)=>g.featuredScore-m.featuredScore).forEach(m=>{!d.has(m.chocolateId)&&c.length<r&&(c.push(m),d.add(m.chocolateId))}),c}return[]}catch(e){return console.error("Error getting featured reviews:",e),[]}},mO=async(r,e,t)=>{try{console.log("Creating user account...");const s=await MD(ms,r,e);console.log("Updating user profile..."),await Cp(s.user,{displayName:t}),console.log("Creating user profile in Firestore...");const o=await Wh(s.user,{displayName:t});return console.log("User registration complete"),s.user}catch(s){throw console.error("Registration error:",s),s}},pO=async(r,e)=>{try{return(await UD(ms,r,e)).user}catch(t){throw t}},gO=async()=>{try{console.log("Starting Google sign-in process");const r=new li;r.setCustomParameters({prompt:"select_account"}),console.log("Initialized Google provider");const e=await lk(ms,r);return console.log("Google sign-in successful",e.user.uid),console.log("Checking if user profile exists"),(await gn(yt(qe,"users",e.user.uid))).exists()?console.log("User profile already exists"):(console.log("Creating new user profile for Google user"),await Wh(e.user)),e.user}catch(r){throw console.error("Google sign-in error:",r),r.code==="auth/popup-closed-by-user"?new Error("Sign-in cancelled. You closed the login popup."):r.code==="auth/popup-blocked"?new Error("Login popup was blocked. Please enable popups for this site."):r.code==="auth/cancelled-popup-request"?new Error("Sign-in cancelled."):r}},Wh=async(r,e={})=>{if(!r)throw new Error("User object is required");const t=yt(qe,"users",r.uid);try{if((await gn(t)).exists())return console.log("Profile already exists, returning existing profile"),ia(r.uid);const{displayName:o,email:c,photoURL:d}=r,m={displayName:o||e.displayName||"",email:c,photoURL:d||"",bio:"",location:"",favoriteChocolateTypes:[],isProfilePublic:!0,createdAt:ln(),reviewCount:0,tastingCount:0,favorites:[],badges:["Newcomer"],preferences:{favoriteTypes:[],dietaryRestrictions:[],flavorPreferences:[]},wantToTry:[],...e};return console.log("Creating profile with data:",m),await vb(t,m),console.log("Profile created successfully"),ia(r.uid)}catch(s){throw console.error("Error creating user profile:",s),new Error(`Failed to create user profile: ${s.message}`)}},ia=async r=>{try{const e=await gn(yt(qe,"users",r));return e.exists()?{id:e.id,...e.data()}:(console.log("User profile not found for:",r),null)}catch(e){throw console.error("Error getting user profile:",e),e}},yO=async(r,e)=>{try{const t=`profile-pictures/${r}-${Date.now()}.${e.name.split(".").pop()}`,s=bd(Rd,t);console.log("Uploading profile picture...");const o=await wd(s,e),c=await Td(o.ref);return console.log("Profile picture uploaded successfully:",c),c}catch(t){throw console.error("Error uploading profile picture:",t),new Error(`Failed to upload profile picture: ${t.message}`)}},vO=async(r,e)=>{try{const t=yt(qe,"users",r);if(e.profilePicture){console.log("Uploading new profile picture...");const s=await ia(r),o=await yO(r,e.profilePicture),c={};e.displayName&&(c.displayName=e.displayName),o&&(c.photoURL=o),Object.keys(c).length>0&&await Cp(ms.currentUser,c);const d={...e,photoURL:o,updatedAt:ln()};return delete d.profilePicture,await Kn(t,d),console.log("Profile updated with new picture"),await ia(r)}else{const s={...e,updatedAt:ln()};return e.displayName&&await Cp(ms.currentUser,{displayName:e.displayName}),await Kn(t,s),console.log("Profile updated successfully"),await ia(r)}}catch(t){throw console.error("Error updating user profile:",t),new Error(`Failed to update profile: ${t.message}`)}},_O=async()=>{try{return await FD(ms),!0}catch(r){throw r}},EO=async r=>{try{return await PD(ms,r),!0}catch(e){throw e}},wO=r=>zD(ms,r),wx=P.createContext();function vs(){return P.useContext(wx)}function TO({children:r}){const[e,t]=P.useState(null),[s,o]=P.useState(null),[c,d]=P.useState(!0),[m,g]=P.useState(null),[y,_]=P.useState(!1);P.useEffect(()=>wO(async C=>{d(!0),g(null);try{if(C){console.log("User authenticated:",C.uid),t(C);try{console.log("Loading user profile...");let j=await ia(C.uid);if(!j){console.log("No profile found, creating new profile..."),_(!0);try{j=await Wh(C),console.log("Profile created successfully:",j==null?void 0:j.id)}catch(k){console.error("Error creating profile:",k),await new Promise(z=>setTimeout(z,1e3));try{j=await Wh(C),console.log("Profile created on retry:",j==null?void 0:j.id)}catch(z){console.error("Profile creation failed on retry:",z),j={id:C.uid,displayName:C.displayName||"",email:C.email,photoURL:C.photoURL||"",reviewCount:0,tastingCount:0,favorites:[],badges:["Newcomer"],preferences:{favoriteTypes:[],dietaryRestrictions:[],flavorPreferences:[]},wantToTry:[]},console.log("Using minimal profile as fallback")}}finally{_(!1)}}console.log("User profile loaded:",j?"success":"failed"),o(j)}catch(j){console.error("Error loading user profile:",j),g("Failed to load user profile"),o({id:C.uid,displayName:C.displayName||"User",email:C.email,photoURL:C.photoURL||"",reviewCount:0,tastingCount:0,favorites:[],badges:["Newcomer"],preferences:{favoriteTypes:[],dietaryRestrictions:[],flavorPreferences:[]},wantToTry:[]})}}else console.log("No user authenticated"),t(null),o(null),_(!1)}catch(j){console.error("Auth state change error:",j),g("Authentication error")}finally{d(!1)}}),[]);const T={currentUser:e,userProfile:s,loading:c,error:m,profileCreating:y,refreshProfile:async()=>{if(e)try{const D=await ia(e.uid);o(D)}catch(D){console.error("Error refreshing profile:",D)}}};return u.jsx(wx.Provider,{value:T,children:r})}const bO=async(r,e)=>{try{const t=yt(qe,"users",r);return await Kn(t,{favorites:Cg(e),updatedAt:ln()}),!0}catch(t){throw console.error("Error removing from favorites:",t),t}},xO=async r=>{try{const e=await gn(yt(qe,"users",r));if(!e.exists())return[];const t=e.data().favorites||[];if(t.length===0)return[];const s=[];for(const o of t)try{const c=await gn(yt(qe,"chocolates",o));c.exists()&&s.push({id:c.id,...c.data()})}catch(c){console.error(`Error fetching chocolate ${o}:`,c)}return s}catch(e){throw console.error("Error getting favorite chocolates:",e),e}},AO=async(r,e)=>{try{const t=await gn(yt(qe,"users",r));return t.exists()?(t.data().favorites||[]).includes(e):!1}catch(t){return console.error("Error checking if chocolate is favorited:",t),!1}},SO=async(r,e)=>{try{const t=yt(qe,"users",r),s=await gn(t);if(!s.exists())throw new Error("User not found");return(s.data().favorites||[]).includes(e)?(await Kn(t,{favorites:Cg(e),updatedAt:ln()}),!1):(await Kn(t,{favorites:_b(e),updatedAt:ln()}),!0)}catch(t){throw console.error("Error toggling favorite:",t),t}},RO=async(r,e)=>{try{const t=yt(qe,"users",r),s={chocolateId:e.id,name:e.name,maker:e.maker,imageUrl:e.imageUrl||"https://placehold.co/300x300?text=Chocolate",addedAt:new Date};return await Kn(t,{wantToTry:_b(s)}),s}catch(t){throw console.error("Error adding to want to try:",t),t}},Tx=async(r,e)=>{var t;try{const s=yt(qe,"users",r),d=(((t=(await gn(s)).data())==null?void 0:t.wantToTry)||[]).find(m=>m.chocolateId===e.id);d&&await Kn(s,{wantToTry:Cg(d)})}catch(s){throw console.error("Error removing from want to try:",s),s}},CO=async(r,e)=>{var t;try{const s=yt(qe,"users",r);return(((t=(await gn(s)).data())==null?void 0:t.wantToTry)||[]).some(d=>d.chocolateId===e)}catch(s){return console.error("Error checking want to try status:",s),!1}},NO=async r=>{var e;try{const t=yt(qe,"users",r),s=await gn(t);return s.exists()?(((e=s.data())==null?void 0:e.wantToTry)||[]).sort((c,d)=>{const m=c.addedAt instanceof Date?c.addedAt:new Date(c.addedAt);return(d.addedAt instanceof Date?d.addedAt:new Date(d.addedAt))-m}):[]}catch(t){throw console.error("Error getting want to try list:",t),t}};function bx({chocolateId:r,size:e="medium",className:t="",showText:s=!1}){const{currentUser:o}=vs(),[c,d]=P.useState(!1),[m,g]=P.useState(!1),[y,_]=P.useState(!1);P.useEffect(()=>{(async()=>{if(o&&r)try{const j=await AO(o.uid,r);d(j)}catch(j){console.error("Error checking favorite status:",j)}})()},[o,r]);const x=async C=>{if(C.preventDefault(),C.stopPropagation(),!o){alert("Please sign in to save favorites!");return}if(!m)try{g(!0),_(!0);const j=await SO(o.uid,r);d(j),setTimeout(()=>_(!1),600)}catch(j){console.error("Error toggling favorite:",j),alert("Error updating favorite. Please try again.")}finally{g(!1)}};if(!o)return null;const T=()=>m?"Updating...":c?"Favorited":"Add to Favorites",D=t.includes("detail-page");return u.jsxs("button",{onClick:x,disabled:m,className:`
        favorite-button 
        ${e} 
        ${c?"favorited":""} 
        ${y?"animating":""} 
        ${m?"loading":""} 
        ${t}
      `,title:c?"Remove from favorites":"Add to favorites","aria-label":c?"Remove from favorites":"Add to favorites",children:[u.jsx("svg",{className:"heart-icon",viewBox:"0 0 24 24",fill:c?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),(s||D)&&u.jsx("span",{className:"button-text",children:T()}),m&&u.jsx("div",{className:"loading-spinner",children:u.jsx("svg",{className:"spinner",viewBox:"0 0 24 24",children:u.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"60",strokeDashoffset:"60",children:u.jsx("animate",{attributeName:"stroke-dashoffset",dur:"1s",values:"60;0",repeatCount:"indefinite"})})})})]})}function xx({chocolate:r,currentUser:e,className:t="",showText:s=!1,size:o="medium"}){const[c,d]=P.useState(!1),[m,g]=P.useState(!1),[y,_]=P.useState(!1);P.useEffect(()=>{e&&r&&x()},[e,r]);const x=async()=>{try{const j=await CO(e.uid,r.id);d(j)}catch(j){console.error("Error checking want to try status:",j)}},T=async j=>{if(j.preventDefault(),j.stopPropagation(),!e){alert("Please sign in to add chocolates to your want to try list");return}g(!0);try{c?(await Tx(e.uid,r),d(!1),s||(_(!0),setTimeout(()=>_(!1),2e3))):(await RO(e.uid,r),d(!0),s||(_(!0),setTimeout(()=>_(!1),2e3)))}catch(k){console.error("Error updating want to try list:",k),alert("Failed to update want to try list. Please try again.")}finally{g(!1)}};if(!e)return null;const D=()=>m?"Updating...":c?"Added to List":"Want to Try",C=t.includes("detail-page");return u.jsxs("div",{className:`want-to-try-container ${C?"detail-page":"relative"}`,children:[u.jsx("button",{onClick:T,disabled:m,className:`
          want-to-try-button
          ${s||C?"with-text":"icon-only"}
          ${o}
          ${c?"in-want-to-try":""}
          ${m?"loading":""}
          ${t}
        `,title:c?"Remove from want to try list":"Add to want to try list","aria-label":c?"Remove from want to try list":"Add to want to try list",children:m?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"loading-spinner"}),(s||C)&&u.jsx("span",{className:"button-text",children:"Updating..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{className:"bookmark-icon",fill:c?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),(s||C)&&u.jsx("span",{className:"button-text",children:D()})]})}),!s&&!C&&y&&u.jsxs("div",{className:"tooltip",children:[c?"Added to want to try!":"Removed from want to try!",u.jsx("div",{className:"tooltip-arrow"})]})]})}function Uc({chocolate:r,featured:e=!1}){const{currentUser:t}=vs(),s=d=>{const m=[],g=Math.floor(d),y=d%1!==0,x=(T=>T>=4.5?"filled-5":T>=3.5?"filled-4":T>=2.5?"filled-3":T>=1.5?"filled-2":"filled-1")(d);for(let T=1;T<=5;T++)T<=g?m.push(u.jsx("span",{className:`star ${x}`,children:"★"},T)):T===g+1&&y?m.push(u.jsx("span",{className:`star half ${x}`,children:"★"},T)):m.push(u.jsx("span",{className:"star empty",children:"★"},T));return m},o=()=>r.name,c=()=>r.maker||"Unknown Maker";return u.jsxs("div",{className:`chocolate-card ${e?"featured":""}`,children:[u.jsx(_e,{to:`/chocolate/${r.id}`,className:"chocolate-link",children:u.jsx("div",{className:"image-container",children:u.jsx("img",{src:r.imageUrl,alt:r.name,className:"card-image"})})}),u.jsxs("div",{className:"card-actions",children:[u.jsx(bx,{chocolateId:r.id,size:"medium",className:"card-overlay"}),u.jsx(xx,{chocolate:r,currentUser:t,className:"shadow-sm"})]}),u.jsxs("div",{className:"card-content",children:[u.jsx(_e,{to:`/maker?maker=${encodeURIComponent(c())}`,className:"card-maker-link",onClick:d=>d.stopPropagation(),children:u.jsx("p",{className:"card-maker",children:c()})}),u.jsx(_e,{to:`/chocolate/${r.id}`,className:"chocolate-title-link",onClick:d=>d.stopPropagation(),children:u.jsx("h3",{className:"card-title",children:o()})}),u.jsxs("div",{className:"card-details",children:[u.jsx("span",{className:"origin",children:r.origin}),u.jsxs("span",{className:"percentage",children:[r.cacaoPercentage,"% Cacao"]})]}),u.jsxs("div",{className:"card-rating",children:[u.jsx("span",{className:"rating-value",children:(r.averageRating||0).toFixed(1)}),u.jsx("div",{className:"stars",children:s(r.averageRating||0)}),u.jsxs("span",{className:"rating-count",children:["(",r.ratings||0,")"]})]})]})]})}const IO="/assets/Firefly%20hero%20image-DZhn2HXw.jpg",Zm=[{id:"1",name:"Madagascan Dark 72%",maker:"Terroir Artisan",type:"Dark",origin:"Madagascar",cacaoPercentage:72,averageRating:4.8,ratings:186,imageUrl:"/placeholder-chocolate.jpg",className:"madagascar-dark"},{id:"2",name:"Sea Salt Caramel",maker:"Wild Coast Chocolate",type:"Dark Milk",origin:"Ecuador",cacaoPercentage:55,averageRating:4.9,ratings:203,imageUrl:"/placeholder-chocolate.jpg",className:"sea-salt-caramel"},{id:"3",name:"Peruvian Single Origin",maker:"Craft Origins",type:"Dark",origin:"Peru",cacaoPercentage:70,averageRating:4.7,ratings:156,imageUrl:"/placeholder-chocolate.jpg",className:"peruvian-origin"},{id:"4",name:"Vanilla Bean White",maker:"Alpine Confections",type:"White",origin:"Various",cacaoPercentage:33,averageRating:4.5,ratings:98,imageUrl:"/placeholder-chocolate.jpg",className:"vanilla-white"},{id:"5",name:"Hazelnut Crunch",maker:"Artisan Delights",type:"Milk",origin:"Italy",cacaoPercentage:45,averageRating:4.6,ratings:124,imageUrl:"/placeholder-chocolate.jpg",className:"hazelnut-crunch"},{id:"6",name:"Truffle Collection",maker:"Premium Chocolatiers",type:"Dark",origin:"Belgium",cacaoPercentage:65,averageRating:4.9,ratings:234,imageUrl:"/placeholder-chocolate.jpg",className:"truffle-collection"}];function nw(){const[r,e]=P.useState(""),[t,s]=P.useState([]),[o,c]=P.useState([]),[d,m]=P.useState(!0),[g,y]=P.useState(null),[_,x]=P.useState(0),T=da(),D=J=>{J.preventDefault(),r.trim()&&T(`/search?query=${encodeURIComponent(r)}`)};P.useEffect(()=>{(async()=>{try{m(!0),console.log("Fetching homepage data...");const oe=["Lindt","Theo","Alter Eco","Hu"];try{const N=await rO(50);if(console.log("All chocolates fetched:",N),N&&N.length>0){const A=N.filter(I=>I.maker&&oe.some(L=>I.maker.toLowerCase().includes(L.toLowerCase())));console.log("Chocolates from preferred makers:",A);let S=[];if(A.length>=6)S=A.slice(0,6),console.log("Using 6 chocolates from preferred makers:",S.map(I=>`${I.name} by ${I.maker}`));else if(A.length>0){const I=6-A.length,L=N.filter(O=>!oe.some($e=>O.maker&&O.maker.toLowerCase().includes($e.toLowerCase()))).slice(0,I);S=[...A,...L],console.log(`Using ${A.length} from preferred makers and ${L.length} others:`,S.map(O=>`${O.name} by ${O.maker}`))}else S=N.slice(0,6),console.log("No preferred makers found, using top 6 overall:",S.map(I=>`${I.name} by ${I.maker}`));s(S),console.log("Final featured chocolates set")}else console.log("No real chocolates found, using sample data"),s(Zm)}catch(N){console.error("Error fetching real chocolates:",N),console.log("Falling back to sample chocolates"),s(Zm)}const U=await fO(3);console.log("Featured reviews:",U),c(U),m(!1)}catch(oe){console.error("Error fetching homepage data:",oe),y(oe.message),s(Zm),m(!1)}})()},[]);const C=Math.ceil(t.length/3),j=t.slice(_*3,_*3+3),k=()=>{x(J=>J>=C-1?0:J+1)},z=()=>{x(J=>J<=0?C-1:J-1)},X=J=>{x(J)},Q=J=>{const oe=[],U=Math.floor(J),N=J%1!==0;for(let A=1;A<=5;A++)A<=U?oe.push(u.jsx("span",{className:"star filled",children:"★"},A)):A===U+1&&N?oe.push(u.jsx("span",{className:"star half",children:"★"},A)):oe.push(u.jsx("span",{className:"star empty",children:"★"},A));return oe},ne=J=>{if(!J)return"";try{return(typeof J.toDate=="function"?J.toDate():new Date(J.seconds*1e3)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return""}};return d?u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Loading chocolatey goodness..."})]}):u.jsxs("div",{className:"home-page",children:[u.jsx("section",{className:"hero-section",style:{backgroundImage:`linear-gradient(rgba(93, 64, 55, 0.85), rgba(93, 64, 55, 0.85)), url(${IO})`},children:u.jsx("div",{className:"container",children:u.jsxs("div",{className:"hero-content",children:[u.jsx("h1",{className:"hero-title display-1",children:"Discover Your Perfect Chocolate"}),u.jsx("p",{className:"hero-subtitle",children:"Join our community of chocolate enthusiasts to explore, review, and share the world's finest chocolates"}),u.jsxs("form",{onSubmit:D,className:"search-container",children:[u.jsx("input",{type:"text",placeholder:"Search for a chocolate, origin, or maker...",className:"search-input",value:r,onChange:J=>e(J.target.value)}),u.jsx("button",{type:"submit",className:"search-button",children:"Search"})]}),u.jsxs("div",{className:"hero-actions",children:[u.jsx(_e,{to:"/browse",className:"btn btn-primary",children:"Explore Chocolates"}),u.jsx(_e,{to:"/signup",className:"btn btn-secondary",children:"Join Community"})]})]})})}),u.jsx("section",{className:"featured-section",children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"section-header",children:[u.jsx("h2",{className:"section-title display-2",children:"Featured Chocolates"}),u.jsx("p",{className:"section-subtitle",children:"Premium chocolates from renowned makers, curated for excellence"}),u.jsx(_e,{to:"/browse",className:"view-all",children:"View All Chocolates"})]}),u.jsxs("div",{className:"featured-container",children:[u.jsx("div",{className:"chocolate-cards",children:j.map(J=>u.jsx(Uc,{chocolate:J,featured:!0},J.id))}),C>1&&u.jsxs("div",{className:"carousel-controls",children:[u.jsx("button",{className:"carousel-btn",onClick:z,disabled:_===0,children:"←"}),u.jsx("div",{className:"carousel-indicators",children:Array.from({length:C},(J,oe)=>u.jsx("button",{className:`carousel-dot ${oe===_?"active":""}`,onClick:()=>X(oe)},oe))}),u.jsx("button",{className:"carousel-btn",onClick:k,disabled:_===C-1,children:"→"})]})]})]})}),u.jsx("section",{className:"how-it-works",children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"how-it-works-content",children:[u.jsx("h2",{className:"section-title",children:"How Chocly Works"}),u.jsx("p",{className:"section-subtitle",children:"Join our chocolate community in three simple steps"})]}),u.jsxs("div",{className:"steps-visual",children:[u.jsxs("div",{className:"step-card",children:[u.jsx("div",{className:"step-icon discover",children:u.jsx("svg",{viewBox:"0 0 24 24",children:u.jsx("path",{d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"})})}),u.jsxs("div",{className:"step-content",children:[u.jsx("h3",{className:"step-title",children:"Discover"}),u.jsx("p",{className:"step-description",children:"Explore our extensive chocolate database and find chocolates based on origin, flavor profile, or maker"})]})]}),u.jsxs("div",{className:"step-card",children:[u.jsx("div",{className:"step-icon taste",children:u.jsx("svg",{viewBox:"0 0 24 24",children:u.jsx("path",{d:"M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.5 16.5,17.4 13,17.9V21H11V17.9C7.5,17.4 5,14.5 5,11V10H7V11A5,5 0 0,0 12,16A5,5 0 0,0 17,11V10H19V11Z"})})}),u.jsxs("div",{className:"step-content",children:[u.jsx("h3",{className:"step-title",children:"Taste & Rate"}),u.jsx("p",{className:"step-description",children:"Develop your palate by tasting and rating chocolates, tracking your personal chocolate journey"})]})]}),u.jsxs("div",{className:"step-card",children:[u.jsx("div",{className:"step-icon connect",children:u.jsx("svg",{viewBox:"0 0 24 24",children:u.jsx("path",{d:"M16.5,6.5A2,2 0 0,1 18.5,8.5A2,2 0 0,1 16.5,10.5A2,2 0 0,1 14.5,8.5A2,2 0 0,1 16.5,6.5M16.5,12A3.5,3.5 0 0,0 20,8.5A3.5,3.5 0 0,0 16.5,5A3.5,3.5 0 0,0 13,8.5A3.5,3.5 0 0,0 16.5,12M7.5,6.5A2,2 0 0,1 9.5,8.5A2,2 0 0,1 7.5,10.5A2,2 0 0,1 5.5,8.5A2,2 0 0,1 7.5,6.5M7.5,12A3.5,3.5 0 0,0 11,8.5A3.5,3.5 0 0,0 7.5,5A3.5,3.5 0 0,0 4,8.5A3.5,3.5 0 0,0 7.5,12M21.5,17.5H14V16.25C14,14.75 13.75,13.5 11.75,13.5C10.5,13.5 9.25,14 7.75,14.5C6.25,15 5.25,15.25 4,15.25V17L4.75,17.25C5.5,17.5 5.75,17.75 6.25,18.25C6.75,18.75 7.5,19.5 8.5,20.25C9.5,21 9.75,21 11,21C12.25,21 12.5,21 13.5,20.25C14.5,19.5 15.25,18.75 15.75,18.25C16.25,17.75 16.5,17.5 17.25,17.25L18,17H21.5V17.5Z"})})}),u.jsxs("div",{className:"step-content",children:[u.jsx("h3",{className:"step-title",children:"Connect"}),u.jsx("p",{className:"step-description",children:"Share recommendations, follow fellow chocolate lovers, and join tasting events in your area"})]})]})]})]})}),u.jsx("section",{className:"reviews-section",children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"section-header",children:[u.jsx("h2",{className:"section-title display-2",children:"Community Reviews"}),u.jsx("p",{className:"section-subtitle",children:"Discover what chocolate lovers are saying"}),o.length>0&&u.jsx(_e,{to:"/browse",className:"view-all",children:"Explore More Chocolates"})]}),u.jsx("div",{className:"reviews-grid",children:o.length>0?o.map(J=>{var oe,U;return u.jsxs("div",{className:"review-card",children:[u.jsxs("div",{className:"review-header",children:[u.jsxs("div",{className:"review-user",children:[u.jsx("span",{className:"user-name",children:J.user||"Anonymous User"}),u.jsx("span",{className:"review-date",children:ne(J.createdAt)})]}),u.jsx("div",{className:"review-rating",children:Q(J.rating)})]}),u.jsxs("div",{className:"review-chocolate",children:[u.jsx("div",{className:"chocolate-image"}),u.jsxs("div",{className:"chocolate-info",children:[u.jsx("h4",{className:"chocolate-name",children:(oe=J.chocolate)==null?void 0:oe.name}),u.jsx("p",{className:"chocolate-maker",children:(U=J.chocolate)==null?void 0:U.maker})]})]}),u.jsx("p",{className:"review-text",children:J.text&&J.text.length>150?`${J.text.substring(0,150)}...`:J.text}),u.jsx(_e,{to:`/chocolate/${J.chocolateId}`,className:"read-more",children:"Read Full Review"})]},J.id)}):u.jsxs("div",{className:"no-reviews-message",children:[u.jsx("h3",{children:"Be the First to Review!"}),u.jsx("p",{children:"No reviews yet, but that's where you come in! Share your chocolate discoveries with the community."}),u.jsx(_e,{to:"/browse",className:"btn btn-primary btn-sm",children:"Find Chocolates to Review"})]})})]})}),u.jsx("section",{className:"cta-section",children:u.jsx("div",{className:"container",children:u.jsxs("div",{className:"cta-content",children:[u.jsx("h2",{className:"cta-title display-2",children:"Ready to join our chocolate community?"}),u.jsx("p",{className:"cta-text",children:"Create a free account to start tracking your tastings, save favorites, and connect with fellow chocolate enthusiasts"}),u.jsxs("div",{className:"cta-buttons",children:[u.jsx(_e,{to:"/login",className:"btn-sign-in",children:"Sign In"}),u.jsx(_e,{to:"/signup",className:"btn-create-account",children:"Create Account"})]})]})})})]})}function bc({rating:r,size:e="small",interactive:t=!1,onRatingChange:s}){const o=[],c=d=>{t&&s&&s(d)};for(let d=1;d<=5;d++){let m="star";d<=Math.floor(r)?m+=" filled":d-.5<=r&&(m+=" half-filled"),e==="large"&&(m+=" star-large"),t&&(m+=" interactive"),o.push(u.jsx("span",{className:m,onClick:()=>c(d),children:"★"},d))}return u.jsx("div",{className:"rating-stars",children:o})}function jO({review:r}){const e=r.createdAt?typeof r.createdAt.toDate=="function"?r.createdAt.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):new Date(r.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return u.jsxs("div",{className:"review-item",children:[u.jsxs("div",{className:"review-header",children:[u.jsx("span",{className:"username",children:r.user||"Anonymous User"}),u.jsx("div",{className:"review-rating-stars",children:u.jsx(bc,{rating:r.rating})}),e&&u.jsx("span",{className:"review-date",children:e})]}),u.jsx("p",{className:"review-text",children:r.text})]})}function DO({chocolateId:r,chocolateName:e,onQuickReview:t,hasUserReviewed:s}){const{currentUser:o}=vs(),[c,d]=P.useState(!1),[m,g]=P.useState(0),[y,_]=P.useState(""),[x,T]=P.useState(!1),D=async j=>{if(j.preventDefault(),m!==0){T(!0);try{await t({rating:m,text:y.trim(),chocolateId:r}),g(0),_(""),d(!1)}catch(k){console.error("Error submitting quick review:",k)}finally{T(!1)}}},C=async j=>{if(o){T(!0);try{await t({rating:j,text:"",chocolateId:r})}catch(k){console.error("Error submitting rating:",k)}finally{T(!1)}}};return s?u.jsxs("div",{className:"review-cta-completed",children:[u.jsx("div",{className:"cta-icon",children:"✅"}),u.jsx("span",{children:"Thanks for your review!"})]}):o?u.jsx("div",{className:"review-cta-banner",children:u.jsxs("div",{className:"cta-content",children:[u.jsx("div",{className:"cta-icon",children:"⭐"}),u.jsxs("div",{className:"cta-text",children:[u.jsx("h3",{children:"Rate this chocolate"}),u.jsx("p",{children:"Quick rating or full review - your choice!"})]}),c?u.jsxs("form",{onSubmit:D,className:"quick-review-form",children:[u.jsxs("div",{className:"form-rating",children:[u.jsx("label",{htmlFor:"quick-rating-stars",children:"Rating *"}),u.jsx("div",{id:"quick-rating-stars",role:"radiogroup","aria-label":"Rate this chocolate from 1 to 5 stars",children:u.jsx(bc,{rating:m,onRatingChange:g,interactive:!0,size:"medium"})})]}),u.jsxs("div",{className:"form-text",children:[u.jsx("label",{htmlFor:"quick-review-text",children:"Your thoughts (optional)"}),u.jsx("textarea",{id:"quick-review-text",value:y,onChange:j=>_(j.target.value),placeholder:"Share your thoughts (optional)...",rows:3,maxLength:500}),u.jsxs("div",{className:"char-count",children:[y.length,"/500"]})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",onClick:()=>d(!1),className:"btn-cancel",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:m===0||x,className:"btn-submit",children:x?"Submitting...":"Submit Review"})]})]}):u.jsxs("div",{className:"cta-actions",children:[u.jsxs("div",{className:"quick-rating",children:[u.jsx("span",{className:"quick-label",children:"Quick rate:"}),u.jsx(bc,{rating:0,onRatingChange:C,interactive:!0,size:"large"})]}),u.jsx("button",{onClick:()=>d(!0),className:"cta-button secondary",children:"Write Review"})]})]})}):u.jsx("div",{className:"review-cta-banner",children:u.jsxs("div",{className:"cta-content",children:[u.jsx("div",{className:"cta-icon",children:"⭐"}),u.jsxs("div",{className:"cta-text",children:[u.jsxs("h3",{children:["Share your experience with ",e]}),u.jsx("p",{children:"Help others discover great chocolate"})]}),u.jsx("div",{className:"cta-actions",children:u.jsx("a",{href:"/login",className:"cta-button primary",children:"Sign In to Review"})})]})})}function kO(){const{id:r}=kp(),[e,t]=P.useState(null),[s,o]=P.useState([]),[c,d]=P.useState([]),[m,g]=P.useState(!0),[y,_]=P.useState(null),[x,T]=P.useState(0),[D,C]=P.useState(""),[j,k]=P.useState(!1),{currentUser:z}=vs(),X=async()=>{try{const A=fs(On(qe,"reviews"),Vo("chocolateId","==",r),la("createdAt","desc")),I=(await or(A)).docs.map(L=>({id:L.id,...L.data()}));o(I)}catch(A){console.error("Error fetching reviews:",A)}};P.useEffect(()=>{r&&(async()=>{try{g(!0);const S=await vx(r);t(S),await X(),S!=null&&S.tags&&d(S.tags),g(!1)}catch(S){console.error("Error fetching chocolate details:",S),_(S.message),g(!1)}})()},[r]);const Q=A=>{T(A)},ne=async A=>{var S,I;if(A.preventDefault(),!z){alert("Please sign in to leave a review");return}if(x===0){alert("Please select a rating");return}if(!D.trim()){alert("Please write a review");return}try{const L={chocolateId:r,userId:z.uid,user:z.displayName||((S=z.email)==null?void 0:S.split("@")[0])||"Anonymous User",userName:z.displayName||((I=z.email)==null?void 0:I.split("@")[0])||"Anonymous User",userPhotoURL:z.photoURL||null,rating:x,text:D.trim(),helpful:0,chocolate:{id:e.id,name:e.name,maker:e.maker,imageUrl:e.imageUrl||"https://placehold.co/300x300?text=Chocolate"}};await Ip(L),T(0),C(""),k(!0),await X(),setTimeout(()=>k(!1),3e3)}catch(L){console.error("Error submitting review:",L),alert("Error submitting review. Please try again.")}},J=async A=>{var S,I;try{const L={chocolateId:A.chocolateId,userId:z.uid,rating:A.rating,text:A.text||"",user:z.displayName||((S=z.email)==null?void 0:S.split("@")[0])||"Anonymous User",userName:z.displayName||((I=z.email)==null?void 0:I.split("@")[0])||"Anonymous User",userPhotoURL:z.photoURL||null,helpful:0,createdAt:new Date,chocolate:{id:e.id,name:e.name,maker:e.maker,imageUrl:e.imageUrl||"https://placehold.co/300x300?text=Chocolate"}};await Ip(L),k(!0),await X(),setTimeout(()=>k(!1),3e3)}catch(L){console.error("Error submitting review:",L),alert("Error submitting review. Please try again.")}},oe=s.some(A=>A.userId===(z==null?void 0:z.uid));if(m)return u.jsxs("div",{className:"loading-container",children:[u.jsxs("div",{className:"loading-animation",children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]}),u.jsx("p",{children:"Loading chocolate details..."})]});if(y||!e)return u.jsx("div",{className:"chocolate-detail-page",children:u.jsx("div",{className:"container",children:u.jsxs("div",{className:"error-message",children:[u.jsx("h1",{children:"Chocolate Not Found"}),u.jsx("p",{children:"Sorry, we couldn't find the chocolate you're looking for."}),u.jsx(_e,{to:"/browse",className:"btn btn-primary",children:"Browse All Chocolates"})]})})});const U=e.flavorProfile||[{name:"Sweet",intensity:3},{name:"Bitter",intensity:3},{name:"Fruity",intensity:0},{name:"Nutty",intensity:0},{name:"Earthy",intensity:0}],N=Array.isArray(e.ingredients)?e.ingredients:e.ingredients?e.ingredients.split(",").map(A=>A.trim()):[];return u.jsxs("div",{className:"chocolate-detail-page",children:[u.jsx("div",{className:"detail-header",children:u.jsx("div",{className:"container",children:u.jsxs("div",{className:"detail-header-content",children:[u.jsx("div",{className:"detail-image",children:u.jsx("img",{src:e.imageUrl||"https://placehold.co/300x300?text=Chocolate",alt:e.name})}),u.jsxs("div",{className:"detail-info",children:[u.jsx(_e,{to:`/maker?maker=${encodeURIComponent(e.maker||"Unknown Maker")}`,className:"maker-link-prominent",children:u.jsx("h2",{className:"maker-name-prominent",children:e.maker||"Unknown Maker"})}),u.jsx("h1",{className:"chocolate-name",children:e.name}),u.jsxs("div",{className:"chocolate-specs",children:[u.jsx("span",{className:"origin",children:e.origin||"Origin Unknown"}),u.jsxs("span",{className:"percentage",children:[e.cacaoPercentage||0,"% Cacao"]}),e.type&&u.jsx("span",{className:"type",children:e.type})]}),(e.description||e.details||e.subtitle)&&u.jsx("div",{className:"chocolate-details",children:u.jsx("span",{className:"details-text",children:e.description||e.details||e.subtitle})}),u.jsx("div",{className:"rating-section",children:u.jsxs("div",{className:"average-rating",children:[u.jsx("span",{className:"rating-number",children:(e.averageRating||0).toFixed(1)}),u.jsx(bc,{rating:e.averageRating||0}),u.jsxs("span",{className:"rating-count",children:["(",s.length," review",s.length!==1?"s":"",")"]})]})}),u.jsx(DO,{chocolateId:e.id,chocolateName:e.name,onQuickReview:J,hasUserReviewed:oe}),u.jsxs("div",{className:"action-buttons",children:[u.jsx(bx,{chocolateId:e.id,size:"large",className:"detail-page-favorite",showText:!0}),u.jsx(xx,{chocolate:e,currentUser:z,className:"detail-page-want-to-try",showText:!0,size:"large"})]}),c.length>0&&u.jsxs("div",{className:"tags-section",children:[u.jsx("h3",{children:"Tags"}),u.jsx("div",{className:"tags-list",children:c.map((A,S)=>u.jsx("span",{className:"tag",children:A},S))})]})]})]})})}),u.jsxs("div",{className:"container",children:[e.description&&u.jsxs("section",{className:"description-section",children:[u.jsx("h2",{children:"About This Chocolate"}),u.jsx("p",{className:"description",children:e.description})]}),u.jsxs("section",{className:"flavor-section",children:[u.jsx("h2",{children:"Flavor Profile"}),u.jsx("div",{className:"flavor-list",children:U.map(A=>u.jsxs("div",{className:"flavor-item",children:[u.jsx("span",{className:"flavor-name",children:A.name}),u.jsx("div",{className:"flavor-bar",children:u.jsx("div",{className:"flavor-level",style:{width:`${(A.intensity||0)*20}%`}})})]},A.name))})]}),u.jsxs("section",{className:"ingredients-section",children:[u.jsx("h2",{children:"Ingredients"}),N.length>0?u.jsx("ul",{className:"ingredients-list",children:N.map((A,S)=>u.jsx("li",{children:A},S))}):u.jsx("p",{children:"Ingredients information not available."})]}),e.nutritionalInfo&&u.jsxs("section",{className:"nutrition-section",children:[u.jsx("h2",{children:"Nutritional Information"}),u.jsx("div",{className:"nutrition-info",children:Object.entries(e.nutritionalInfo).map(([A,S])=>u.jsxs("div",{className:"nutrition-item",children:[u.jsx("span",{className:"nutrition-label",children:A.charAt(0).toUpperCase()+A.slice(1).replace(/([A-Z])/g," $1")}),u.jsx("span",{className:"nutrition-value",children:typeof S=="number"?S+(A.includes("calories")?"":"g"):S})]},A))})]}),u.jsxs("section",{className:"reviews-section",children:[u.jsxs("h2",{children:["Reviews (",s.length,")"]}),j&&u.jsx("div",{className:"review-success-message",children:"✅ Your review has been added successfully!"}),z&&u.jsxs("div",{className:"add-review",children:[u.jsx("h3",{children:"Add Your Review"}),u.jsxs("form",{onSubmit:ne,children:[u.jsxs("div",{className:"rating-input",children:[u.jsx("label",{children:"Rating:"}),u.jsx(bc,{rating:x,onRatingChange:Q,interactive:!0})]}),u.jsx("textarea",{placeholder:"Share your thoughts on this chocolate...",value:D,onChange:A=>C(A.target.value),required:!0}),u.jsx("button",{type:"submit",className:"submit-review",children:"Submit Review"})]})]}),s.length>0?u.jsx("div",{className:"reviews-list",children:s.map(A=>u.jsx(jO,{review:A},A.id))}):u.jsxs("div",{className:"no-reviews",children:[u.jsx("p",{children:"No reviews yet. Be the first to review this chocolate!"}),!z&&u.jsxs("p",{children:[u.jsx(_e,{to:"/login",children:"Sign in"})," to write the first review."]})]})]})]})]})}function OO(){const[r]=Ew(),e=r.get("query")||"",[t,s]=P.useState([]),[o,c]=P.useState(!0),[d,m]=P.useState(null),[g,y]=P.useState("relevance"),[_,x]=P.useState("all");P.useEffect(()=>{(async()=>{if(!e.trim()){s([]),c(!1);return}try{c(!0);const z=await _x(e);s(z),c(!1)}catch(z){console.error("Search error:",z),m(z.message),c(!1)}})()},[e]);const D=[...t.filter(k=>_==="all"?!0:k.type&&k.type.toLowerCase()===_.toLowerCase())].sort((k,z)=>{switch(g){case"rating":return(z.averageRating||0)-(k.averageRating||0);case"cacao-high":return(z.cacaoPercentage||0)-(k.cacaoPercentage||0);case"cacao-low":return(k.cacaoPercentage||0)-(z.cacaoPercentage||0);case"name":return(k.name||"").localeCompare(z.name||"");default:return 0}}),C=k=>{y(k.target.value)},j=k=>{x(k.target.value)};return o?u.jsx("div",{className:"loading",children:"Searching..."}):d?u.jsxs("div",{className:"error",children:["Error: ",d]}):u.jsx("div",{className:"search-results-page",children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"search-header",children:[u.jsx("h1",{children:"Search Results"}),e&&u.jsxs("p",{className:"search-query",children:['Showing results for "',e,'"']})]}),t.length>0?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"search-filters",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{htmlFor:"type-filter",children:"Filter by:"}),u.jsxs("select",{id:"type-filter",value:_,onChange:j,children:[u.jsx("option",{value:"all",children:"All Types"}),u.jsx("option",{value:"dark",children:"Dark Chocolate"}),u.jsx("option",{value:"milk",children:"Milk Chocolate"}),u.jsx("option",{value:"white",children:"White Chocolate"}),u.jsx("option",{value:"ruby",children:"Ruby Chocolate"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{htmlFor:"sort-by",children:"Sort by:"}),u.jsxs("select",{id:"sort-by",value:g,onChange:C,children:[u.jsx("option",{value:"relevance",children:"Relevance"}),u.jsx("option",{value:"rating",children:"Highest Rating"}),u.jsx("option",{value:"cacao-high",children:"Cacao % (High to Low)"}),u.jsx("option",{value:"cacao-low",children:"Cacao % (Low to High)"}),u.jsx("option",{value:"name",children:"Name (A-Z)"})]})]})]}),u.jsxs("p",{className:"results-count",children:[D.length," chocolate",D.length!==1?"s":""," found"]}),u.jsx("div",{className:"results-grid",children:D.map(k=>u.jsx(Uc,{chocolate:k},k.id))})]}):u.jsxs("div",{className:"no-results",children:[u.jsx("p",{children:"No chocolates found matching your search."}),u.jsxs("p",{children:["Try different keywords or ",u.jsx(_e,{to:"/",children:"browse all chocolates"}),"."]})]})]})})}const PO=({name:r})=>({Newcomer:u.jsx("svg",{className:"badge-icon newcomer",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,17V16H9V14H13V13H10A1,1 0 0,1 9,12V9A1,1 0 0,1 10,8H11V7H13V8H15V10H11V11H14A1,1 0 0,1 15,12V15A1,1 0 0,1 14,16H13V17H11Z"})}),Reviewer:u.jsx("svg",{className:"badge-icon reviewer",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"})}),Enthusiast:u.jsx("svg",{className:"badge-icon enthusiast",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M16,5V11H21V5M10,11H15V5H10M16,18H21V12H16M10,18H15V12H10M4,18H9V12H4M4,11H9V5H4V11Z"})}),Connoisseur:u.jsx("svg",{className:"badge-icon connoisseur",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,10.84 21.79,9.69 21.39,8.61L19.79,10.21C19.93,10.8 20,11.4 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.6,4 13.2,4.07 13.79,4.21L15.4,2.6C14.31,2.21 13.16,2 12,2M19,2L15,6V7.5L12.45,10.05C12.3,10 12.15,10 12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12C14,11.85 14,11.7 13.95,11.55L16.5,9H18L22,5H19V2M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12H16A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8V6Z"})})})[r]||null;function MO(){var Ie,be,Et;const{currentUser:r,userProfile:e,loading:t,error:s,profileCreating:o,refreshProfile:c}=vs(),[d,m]=P.useState("overview"),[g,y]=P.useState([]),[_,x]=P.useState([]),[T,D]=P.useState(!1),[C,j]=P.useState(0),[k,z]=P.useState(!1),[X,Q]=P.useState([]),[ne,J]=P.useState({displayName:"",bio:"",location:"",favoriteChocolateTypes:[],isProfilePublic:!0,profilePicture:null}),[oe,U]=P.useState({favoriteTypes:[],dietaryRestrictions:[],flavorPreferences:[]});if(da(),!t&&!r)return u.jsx("div",{className:"profile-page",children:u.jsx("div",{className:"container",children:u.jsxs("div",{className:"profile-not-logged-in",children:[u.jsx("h2",{children:"You need to sign in"}),u.jsx("p",{children:"Please log in or create an account to view your profile."}),u.jsxs("div",{className:"auth-buttons",children:[u.jsx(_e,{to:"/auth",className:"auth-button",children:"Log In"}),u.jsx(_e,{to:"/auth",className:"auth-button signup",children:"Sign Up"})]})]})})});if(t)return u.jsx("div",{className:"profile-page",children:u.jsx("div",{className:"container",children:u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Loading your profile..."})]})})});if(r&&(!e||o))return u.jsx("div",{className:"profile-page",children:u.jsx("div",{className:"container",children:u.jsxs("div",{className:"profile-not-logged-in",children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[u.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"🍫"}),u.jsx("h2",{children:"Setting up your chocolate journey!"}),u.jsx("p",{children:"We're creating your profile. This should only take a moment."})]}),u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Creating your profile..."})]}),u.jsxs("div",{style:{textAlign:"center",marginTop:"2rem"},children:[u.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:"This is taking longer than expected."}),u.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[u.jsxs("button",{onClick:()=>{j(H=>H+1),c()},style:{color:"var(--primary)",background:"white",border:"2px solid var(--primary)",padding:"0.5rem 1rem",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem"},children:["Refresh Profile ",C>0&&`(${C})`]}),u.jsx("button",{onClick:()=>window.location.reload(),style:{color:"var(--primary)",background:"white",border:"2px solid var(--primary)",padding:"0.5rem 1rem",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem"},children:"Reload Page"}),u.jsx(_e,{to:"/",style:{color:"white",background:"var(--primary)",border:"2px solid var(--primary)",padding:"0.5rem 1rem",borderRadius:"8px",textDecoration:"none",fontSize:"0.9rem"},children:"Go to Homepage"})]}),s&&u.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#FEE2E2",color:"#DC2626",borderRadius:"8px",fontSize:"0.9rem"},children:[u.jsx("strong",{children:"Error:"})," ",s]})]})]})})});P.useEffect(()=>{r&&e&&(N(),J({displayName:e.displayName||"",bio:e.bio||"",location:e.location||"",favoriteChocolateTypes:e.favoriteChocolateTypes||[],isProfilePublic:e.isProfilePublic!==!1,profilePicture:null}))},[r,e]);const N=async()=>{D(!0);try{const[H,fe,He]=await Promise.all([uO(r.uid).catch(()=>[]),xO(r.uid).catch(()=>[]),NO(r.uid).catch(()=>[])]);y(H),x(fe),Q(He),e.preferences&&U(e.preferences)}catch(H){console.error("Error loading user data:",H)}finally{D(!1)}},A=async H=>{try{await Tx(r.uid,H),Q(fe=>fe.filter(He=>He.chocolateId!==H.id))}catch(fe){console.error("Error removing from want to try:",fe),alert("Error removing from want to try list. Please try again.")}},S=()=>({totalReviews:g.length,averageRating:g.length>0?(g.reduce((H,fe)=>H+fe.rating,0)/g.length).toFixed(1):0,favoriteChocolates:_.length,chocolatesDiscovered:g.length}),I=H=>{if(!H)return"Recently";try{let fe;if(H instanceof Date)fe=H;else if(H!=null&&H.toDate&&typeof H.toDate=="function")fe=H.toDate();else if(H!=null&&H.seconds)fe=new Date(H.seconds*1e3);else if(typeof H=="string"||typeof H=="number")fe=new Date(H);else return"Recently";if(isNaN(fe.getTime()))return"Recently";const Vt=new Date().getTime()-fe.getTime(),ct=Math.floor(Vt/(1e3*60*60*24));if(ct===0)return"Today";if(ct===1)return"Yesterday";if(ct<7)return`${ct} day${ct!==1?"s":""} ago`;if(ct<30){const en=Math.floor(ct/7);return`${en} week${en!==1?"s":""} ago`}else if(ct<365){const en=Math.floor(ct/30);return`${en} month${en!==1?"s":""} ago`}else return fe.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(fe){return console.error("Error formatting date:",fe,H),"Recently"}},L=H=>{if(!H)return"No date available";try{let fe;if(H.toDate&&typeof H.toDate=="function")fe=H.toDate();else if(H.seconds)fe=new Date(H.seconds*1e3);else if(typeof H=="string"||typeof H=="number")fe=new Date(H);else if(H instanceof Date)fe=H;else return"Invalid date";if(isNaN(fe.getTime()))return"Invalid date";const Vt=Math.abs(new Date-fe),ct=Math.ceil(Vt/(1e3*60*60*24));if(ct===1)return"Yesterday";if(ct<7)return`${ct} days ago`;if(ct<30){const en=Math.floor(ct/7);return`${en} week${en>1?"s":""} ago`}else return fe.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(fe){return console.error("Error formatting date:",fe,H),"Date unavailable"}},O=()=>{const H=["Newcomer"],fe=g.length;return fe>=5&&H.push("Reviewer"),fe>=20&&H.push("Enthusiast"),fe>=50&&H.push("Connoisseur"),H},$e=async H=>{try{await bO(r.uid,H),x(fe=>fe.filter(He=>He.id!==H))}catch(fe){console.error("Error removing favorite:",fe),alert("Error removing from favorites. Please try again.")}},Ke=(H,fe)=>{U(He=>({...He,[H]:He[H].includes(fe)?He[H].filter(Vt=>Vt!==fe):[...He[H],fe]}))},Z=async()=>{try{console.log("Saving preferences:",oe),alert("Preferences saved successfully!")}catch(H){console.error("Error saving preferences:",H),alert("Error saving preferences. Please try again.")}},ce=()=>{z(!0)},de=()=>{z(!1),J({displayName:e.displayName||"",bio:e.bio||"",location:e.location||"",favoriteChocolateTypes:e.favoriteChocolateTypes||[],isProfilePublic:e.isProfilePublic!==!1,profilePicture:null})},Se=(H,fe)=>{J(He=>({...He,[H]:fe}))},V=H=>{J(fe=>({...fe,favoriteChocolateTypes:fe.favoriteChocolateTypes.includes(H)?fe.favoriteChocolateTypes.filter(He=>He!==H):[...fe.favoriteChocolateTypes,H]}))},ae=H=>{const fe=H.target.files[0];if(fe){if(!fe.type.startsWith("image/")){alert("Please select an image file");return}if(fe.size>5*1024*1024){alert("Image must be smaller than 5MB");return}J(He=>({...He,profilePicture:fe}))}},he=async()=>{if(!ne.displayName.trim()){alert("Display name is required");return}D(!0);try{const H={displayName:ne.displayName.trim(),bio:ne.bio.trim(),location:ne.location.trim(),favoriteChocolateTypes:ne.favoriteChocolateTypes,isProfilePublic:ne.isProfilePublic};ne.profilePicture&&(H.profilePicture=ne.profilePicture),await vO(r.uid,H),await c(),alert("Profile updated successfully!"),z(!1)}catch(H){console.error("Error saving profile:",H),alert("Error saving profile: "+H.message)}finally{D(!1)}},le=S(),ve=O();return u.jsx("div",{className:"profile-page",children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"profile-header",children:[u.jsxs("div",{className:"profile-header-main",children:[u.jsx("div",{className:"profile-avatar",children:e!=null&&e.photoURL?u.jsx("img",{src:e.photoURL,alt:e.displayName||"User"}):u.jsx("div",{className:"avatar-placeholder",children:e!=null&&e.displayName?e.displayName.charAt(0).toUpperCase():"U"})}),u.jsxs("div",{className:"profile-info",children:[u.jsx("h1",{children:(e==null?void 0:e.displayName)||"User"}),u.jsxs("p",{className:"member-since",children:["Member since ",((Et=(be=(Ie=e==null?void 0:e.createdAt)==null?void 0:Ie.toDate)==null?void 0:be.call(Ie))==null?void 0:Et.toLocaleDateString())||"Recently"]}),(e==null?void 0:e.location)&&u.jsxs("p",{className:"user-location",children:["📍 ",e.location]}),(e==null?void 0:e.bio)&&u.jsx("p",{className:"user-bio",children:e.bio}),u.jsx("div",{className:"profile-badges",children:ve.map(H=>u.jsxs("div",{className:"badge",children:[u.jsx(PO,{name:H}),u.jsx("span",{children:H})]},H))})]})]}),u.jsx("div",{className:"profile-actions",children:u.jsx("button",{className:"edit-profile-button",onClick:ce,disabled:k,children:k?"Editing...":"Edit Profile"})})]}),k&&u.jsxs("div",{className:"edit-profile-section",children:[u.jsxs("div",{className:"edit-profile-header",children:[u.jsx("h3",{children:"Edit Your Profile"}),u.jsx("div",{className:"edit-actions",children:u.jsx("button",{className:"cancel-btn",onClick:de,disabled:T,children:"Cancel"})})]}),u.jsxs("div",{className:"edit-profile-form",children:[u.jsxs("div",{className:"form-section",children:[u.jsx("label",{className:"form-label",children:"Profile Picture"}),u.jsxs("div",{className:"profile-picture-upload",children:[u.jsx("div",{className:"current-picture",children:e!=null&&e.photoURL?u.jsx("img",{src:e.photoURL,alt:"Current profile"}):u.jsx("div",{className:"avatar-placeholder",children:e!=null&&e.displayName?e.displayName.charAt(0).toUpperCase():"U"})}),u.jsxs("div",{className:"upload-controls",children:[u.jsx("input",{type:"file",id:"profile-picture",accept:"image/*",onChange:ae,style:{display:"none"}}),u.jsx("label",{htmlFor:"profile-picture",className:"upload-btn",children:"Choose New Picture"}),ne.profilePicture&&u.jsxs("p",{className:"file-selected",children:["✓ ",ne.profilePicture.name]}),u.jsx("p",{className:"upload-hint",children:"JPG, PNG or GIF. Max 5MB."})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("label",{className:"form-label",children:"Display Name *"}),u.jsx("input",{type:"text",value:ne.displayName,onChange:H=>Se("displayName",H.target.value),placeholder:"Your display name",className:"form-input",maxLength:50}),u.jsx("p",{className:"form-hint",children:"This is how other users will see your name"})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("label",{className:"form-label",children:"Location"}),u.jsx("input",{type:"text",value:ne.location,onChange:H=>Se("location",H.target.value),placeholder:"City, Country",className:"form-input",maxLength:100}),u.jsx("p",{className:"form-hint",children:"Help others discover chocolate communities near you"})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("label",{className:"form-label",children:"About Me"}),u.jsx("textarea",{value:ne.bio,onChange:H=>Se("bio",H.target.value),placeholder:"Tell us about your chocolate journey...",className:"form-textarea",rows:4,maxLength:500}),u.jsxs("p",{className:"form-hint",children:[ne.bio.length,"/500 characters"]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("label",{className:"form-label",children:"Favorite Chocolate Types"}),u.jsx("div",{className:"checkbox-grid",children:["Dark Chocolate","Milk Chocolate","White Chocolate","Single Origin","Bean-to-Bar","Artisanal","Organic","Fair Trade"].map(H=>u.jsxs("label",{className:"checkbox-item",children:[u.jsx("input",{type:"checkbox",checked:ne.favoriteChocolateTypes.includes(H),onChange:()=>V(H)}),u.jsx("span",{children:H})]},H))}),u.jsx("p",{className:"form-hint",children:"These will be highlighted on your profile"})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("label",{className:"form-label",children:"Privacy Settings"}),u.jsxs("div",{className:"privacy-options",children:[u.jsxs("label",{className:"radio-item",children:[u.jsx("input",{type:"radio",name:"privacy",checked:ne.isProfilePublic===!0,onChange:()=>Se("isProfilePublic",!0)}),u.jsxs("div",{className:"radio-content",children:[u.jsx("span",{className:"radio-title",children:"🌍 Public Profile"}),u.jsx("span",{className:"radio-description",children:"Other users can see your profile, reviews, and favorites"})]})]}),u.jsxs("label",{className:"radio-item",children:[u.jsx("input",{type:"radio",name:"privacy",checked:ne.isProfilePublic===!1,onChange:()=>Se("isProfilePublic",!1)}),u.jsxs("div",{className:"radio-content",children:[u.jsx("span",{className:"radio-title",children:"🔒 Private Profile"}),u.jsx("span",{className:"radio-description",children:"Only you can see your profile details"})]})]})]})]}),u.jsx("div",{className:"form-actions-bottom",children:u.jsx("button",{className:"save-btn-bottom",onClick:he,disabled:T,children:T?"Saving Changes...":"Save Changes"})})]})]}),u.jsxs("div",{className:"profile-nav",children:[u.jsx("button",{className:`profile-nav-link ${d==="overview"?"active":""}`,onClick:()=>m("overview"),children:"Overview"}),u.jsxs("button",{className:`profile-nav-link ${d==="reviews"?"active":""}`,onClick:()=>m("reviews"),children:["Reviews (",le.totalReviews,")"]}),u.jsxs("button",{className:`profile-nav-link ${d==="favorites"?"active":""}`,onClick:()=>m("favorites"),children:["Favorites (",_.length,")"]}),u.jsxs("button",{className:`profile-nav-link ${d==="wantToTry"?"active":""}`,onClick:()=>m("wantToTry"),children:["Want to Try (",X.length,")"]}),u.jsx("button",{className:`profile-nav-link ${d==="preferences"?"active":""}`,onClick:()=>m("preferences"),children:"Preferences"})]}),u.jsxs("div",{className:"profile-content",children:[d==="overview"&&u.jsxs("div",{className:"overview-tab",children:[u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-number",children:le.totalReviews}),u.jsx("div",{className:"stat-label",children:"Reviews Written"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-number",children:le.averageRating}),u.jsx("div",{className:"stat-label",children:"Average Rating"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-number",children:le.favoriteChocolates}),u.jsx("div",{className:"stat-label",children:"Favorite Chocolates"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-number",children:le.chocolatesDiscovered}),u.jsx("div",{className:"stat-label",children:"Chocolates Discovered"})]})]}),u.jsxs("div",{className:"recent-activity",children:[u.jsx("h3",{children:"Recent Activity"}),g.length>0?u.jsx("div",{className:"activity-list",children:g.slice(0,3).map(H=>{var fe;return u.jsxs("div",{className:"activity-item",children:[u.jsxs("div",{className:"activity-content",children:[u.jsxs("p",{children:["Reviewed ",u.jsx("strong",{children:((fe=H.chocolate)==null?void 0:fe.name)||"Unknown Chocolate"})]}),u.jsx("p",{className:"activity-date",children:L(H.createdAt)})]}),u.jsx("div",{className:"activity-rating",children:[1,2,3,4,5].map(He=>u.jsx("span",{className:`star ${He<=H.rating?"filled":""}`,children:"★"},He))})]},H.id)})}):u.jsx("div",{className:"no-activity",children:u.jsxs("p",{children:["No recent activity. ",u.jsx(_e,{to:"/browse",children:"Start exploring chocolates!"})]})})]})]}),d==="reviews"&&u.jsxs("div",{className:"reviews-tab",children:[u.jsx("h3",{children:"Your Reviews"}),T?u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Loading reviews..."})]}):g.length>0?u.jsx("div",{className:"reviews-list",children:g.map(H=>{var fe,He;return u.jsxs("div",{className:"review-item",children:[u.jsxs("div",{className:"review-header",children:[u.jsx("h4",{className:"reviewed-chocolate",children:((fe=H.chocolate)==null?void 0:fe.name)||"Unknown Chocolate"}),u.jsx("div",{className:"review-rating",children:[1,2,3,4,5].map(Vt=>u.jsx("span",{className:`star ${Vt<=H.rating?"filled":""}`,children:"★"},Vt))})]}),u.jsx("p",{className:"review-maker",children:((He=H.chocolate)==null?void 0:He.maker)||"Unknown Maker"}),H.title&&u.jsxs("h5",{className:"review-title",children:['"',H.title,'"']}),u.jsx("p",{className:"review-text",children:H.text}),u.jsxs("div",{className:"review-footer",children:[u.jsx("p",{className:"review-date",children:L(H.createdAt)}),u.jsx(_e,{to:`/chocolate/${H.chocolateId}`,className:"view-chocolate-link",children:"View Chocolate"})]})]},H.id)})}):u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-icon",children:"📝"}),u.jsx("h4",{children:"No reviews yet"}),u.jsx("p",{children:"Share your chocolate experiences with the community!"}),u.jsx(_e,{to:"/browse",className:"btn btn-primary",children:"Find Chocolates to Review"})]})]}),d==="favorites"&&u.jsxs("div",{className:"favorites-tab",children:[u.jsx("h3",{children:"Your Favorite Chocolates"}),T?u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Loading favorites..."})]}):_.length>0?u.jsx("div",{className:"favorites-grid",children:_.map(H=>u.jsxs("div",{className:"favorite-chocolate-card",children:[u.jsx("div",{className:"favorite-image",children:H.imageUrl?u.jsx("img",{src:H.imageUrl,alt:H.name}):u.jsx("div",{className:"placeholder-image",children:u.jsx("span",{children:"🍫"})})}),u.jsxs("div",{className:"favorite-info",children:[u.jsx("h4",{className:"favorite-name",children:H.name}),u.jsx("p",{className:"favorite-maker",children:H.maker}),H.type&&u.jsx("span",{className:"favorite-type",children:H.type}),H.averageRating&&u.jsxs("div",{className:"favorite-rating",children:[u.jsx("span",{className:"rating-value",children:H.averageRating.toFixed(1)}),u.jsx("div",{className:"stars",children:[1,2,3,4,5].map(fe=>u.jsx("span",{className:`star ${fe<=Math.round(H.averageRating)?"filled":""}`,children:"★"},fe))})]})]}),u.jsxs("div",{className:"favorite-actions",children:[u.jsx(_e,{to:`/chocolate/${H.id}`,className:"view-chocolate-btn",children:"View"}),u.jsx("button",{onClick:()=>$e(H.id),className:"remove-favorite-btn",children:"Remove"})]})]},H.id))}):u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-icon",children:"💔"}),u.jsx("h4",{children:"No favorites yet"}),u.jsx("p",{children:"Start exploring chocolates and add some to your favorites!"}),u.jsx(_e,{to:"/browse",className:"btn btn-primary",children:"Discover Chocolates"})]})]}),d==="wantToTry"&&u.jsxs("div",{className:"profile-section",children:[u.jsxs("div",{className:"section-header",children:[u.jsxs("h3",{children:["Want to Try (",X.length,")"]}),u.jsx("p",{children:"Chocolates you're planning to taste"})]}),X.length>0?u.jsx("div",{className:"want-to-try-grid",children:X.map(H=>u.jsxs("div",{className:"want-to-try-card",children:[u.jsx("div",{className:"want-to-try-image",children:H.imageUrl?u.jsx("img",{src:H.imageUrl,alt:H.name}):u.jsx("div",{className:"placeholder-image",children:"🍫"})}),u.jsxs("div",{className:"want-to-try-info",children:[u.jsx("h4",{className:"want-to-try-name",children:H.name}),u.jsx("p",{className:"want-to-try-maker",children:H.maker}),u.jsxs("p",{className:"want-to-try-date",children:["Added ",I(H.addedAt)]})]}),u.jsxs("div",{className:"want-to-try-actions",children:[u.jsx(_e,{to:`/chocolate/${H.chocolateId}`,className:"view-chocolate-btn",children:"View Details"}),u.jsx("button",{onClick:()=>A(H),className:"remove-want-to-try-btn",children:"Remove"})]})]},H.chocolateId))}):u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-icon",children:"📝"}),u.jsx("h4",{children:"No chocolates in your want to try list yet"}),u.jsx("p",{children:"Start exploring chocolates and click the bookmark icon to add them here!"}),u.jsx(_e,{to:"/browse",className:"browse-chocolates-btn",children:"Browse Chocolates"})]})]}),d==="preferences"&&u.jsxs("div",{className:"preferences-tab",children:[u.jsx("h3",{children:"Your Preferences"}),u.jsxs("div",{className:"preferences-form",children:[u.jsxs("div",{className:"preference-section",children:[u.jsx("h4",{children:"Favorite Types"}),u.jsx("div",{className:"preference-options",children:["Dark","Milk","White","Single Origin","Bean-to-Bar"].map(H=>u.jsxs("label",{className:"preference-option",children:[u.jsx("input",{type:"checkbox",checked:oe.favoriteTypes.includes(H),onChange:()=>Ke("favoriteTypes",H)}),H]},H))})]}),u.jsxs("div",{className:"preference-section",children:[u.jsx("h4",{children:"Dietary Restrictions"}),u.jsx("div",{className:"preference-options",children:["Vegan","Gluten-Free","Nut-Free","Dairy-Free","Sugar-Free"].map(H=>u.jsxs("label",{className:"preference-option",children:[u.jsx("input",{type:"checkbox",checked:oe.dietaryRestrictions.includes(H),onChange:()=>Ke("dietaryRestrictions",H)}),H]},H))})]}),u.jsxs("div",{className:"preference-section",children:[u.jsx("h4",{children:"Flavor Preferences"}),u.jsx("div",{className:"preference-options",children:["Fruity","Nutty","Floral","Earthy","Spicy","Sweet"].map(H=>u.jsxs("label",{className:"preference-option",children:[u.jsx("input",{type:"checkbox",checked:oe.flavorPreferences.includes(H),onChange:()=>Ke("flavorPreferences",H)}),H]},H))})]}),u.jsx("button",{onClick:Z,className:"save-preferences-btn",children:"Save Preferences"})]})]})]})]})})}function UO(){const[r,e]=P.useState([]),[t,s]=P.useState([]),[o,c]=P.useState([]),[d,m]=P.useState(!0),[g,y]=P.useState(null),[_,x]=P.useState({maker:"",type:"",origin:"",tagId:"",minCacao:"",maxCacao:""}),[T,D]=P.useState("rating"),[C,j]=P.useState(!1),k=(S,I)=>{const L=S.map(O=>O[I]).filter(O=>O&&O.trim()!=="").map(O=>typeof O=="string"?O.trim():O);return[...new Set(L)].sort()};P.useEffect(()=>{(async()=>{try{m(!0);const[I,L]=await Promise.all([$g(),Ex()]);e(I),s(I),c(L),m(!1)}catch(I){y(I.message),m(!1)}})()},[]),P.useEffect(()=>{let S=[...r];_.maker&&(S=S.filter(I=>I.maker&&I.maker.toLowerCase().includes(_.maker.toLowerCase()))),_.type&&(S=S.filter(I=>I.type&&I.type.toLowerCase()===_.type.toLowerCase())),_.origin&&(S=S.filter(I=>I.origin&&I.origin.toLowerCase().includes(_.origin.toLowerCase()))),_.tagId&&(S=S.filter(I=>I.tagIds&&I.tagIds.includes(_.tagId))),_.minCacao&&(S=S.filter(I=>I.cacaoPercentage>=parseInt(_.minCacao))),_.maxCacao&&(S=S.filter(I=>I.cacaoPercentage<=parseInt(_.maxCacao))),s(S)},[_,r]);const z=()=>[...t].sort((S,I)=>{switch(T){case"rating":return(I.averageRating||0)-(S.averageRating||0);case"popularity":return(I.reviewCount||0)-(S.reviewCount||0);case"cacao-high":return(I.cacaoPercentage||0)-(S.cacaoPercentage||0);case"cacao-low":return(S.cacaoPercentage||0)-(I.cacaoPercentage||0);case"name":return S.name.localeCompare(I.name);case"maker":return(S.maker||"").localeCompare(I.maker||"");default:return 0}}),X=(S,I)=>{x(L=>({...L,[S]:I}))},Q=()=>{x({maker:"",type:"",origin:"",tagId:"",minCacao:"",maxCacao:""})},ne=Object.values(_).some(S=>S!==""),J=Object.values(_).filter(S=>S!=="").length;if(d)return u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Loading chocolates..."})]});if(g)return u.jsxs("div",{className:"error full-width",children:["Error: ",g]});const oe=z(),U=k(r,"maker"),N=k(r,"type"),A=k(r,"origin");return u.jsx("div",{className:"browse-page",children:u.jsxs("div",{className:"container",children:[u.jsx("div",{className:"modern-filter-bar",children:u.jsxs("div",{className:"filter-controls",children:[u.jsxs("button",{className:`filter-toggle ${C?"active":""}`,onClick:()=>j(!C),children:[u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("polygon",{points:"22,3 2,3 10,12.46 10,19 14,21 14,12.46"})}),u.jsx("span",{children:"Filters"}),J>0&&u.jsx("span",{className:"filter-badge",children:J})]}),u.jsx("div",{className:"sort-dropdown",children:u.jsxs("select",{value:T,onChange:S=>D(S.target.value),className:"modern-select",children:[u.jsx("option",{value:"rating",children:"⭐ Highest Rated"}),u.jsx("option",{value:"popularity",children:"🔥 Most Popular"}),u.jsx("option",{value:"cacao-high",children:"📈 Cacao % (High)"}),u.jsx("option",{value:"cacao-low",children:"📉 Cacao % (Low)"}),u.jsx("option",{value:"name",children:"🔤 Name (A-Z)"}),u.jsx("option",{value:"maker",children:"🏭 Maker (A-Z)"}),u.jsx("option",{value:"newest",children:"✨ Newest First"}),u.jsx("option",{value:"price-low",children:"💰 Price (Low)"}),u.jsx("option",{value:"price-high",children:"💎 Price (High)"})]})}),ne&&u.jsxs("button",{onClick:Q,className:"clear-filters-modern",children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"Clear All"]}),u.jsx("div",{className:"results-summary",children:u.jsxs("span",{className:"results-count",children:[t.length," chocolate",t.length!==1?"s":""]})})]})}),u.jsx("div",{className:`modern-filters ${C?"expanded":""}`,children:u.jsxs("div",{className:"filters-grid-modern",children:[u.jsxs("div",{className:"filter-card",children:[u.jsxs("label",{className:"filter-label",children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),u.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Chocolate Maker"]}),u.jsxs("select",{value:_.maker,onChange:S=>X("maker",S.target.value),className:"modern-filter-select",children:[u.jsxs("option",{value:"",children:["All Makers (",U.length,")"]}),U.map(S=>u.jsx("option",{value:S,children:S},S))]})]}),u.jsxs("div",{className:"filter-card",children:[u.jsxs("label",{className:"filter-label",children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"3"}),u.jsx("path",{d:"M12 1v6m0 6v6m11-7h-6m-6 0H1"})]}),"Chocolate Type"]}),u.jsxs("select",{value:_.type,onChange:S=>X("type",S.target.value),className:"modern-filter-select",children:[u.jsxs("option",{value:"",children:["All Types (",N.length,")"]}),N.map(S=>u.jsxs("option",{value:S,children:[S," ",S==="Dark"?"🍫":S==="Milk"?"🥛":S==="White"?"🤍":"✨"]},S))]})]}),u.jsxs("div",{className:"filter-card",children:[u.jsxs("label",{className:"filter-label",children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),u.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),"Origin Country"]}),u.jsxs("select",{value:_.origin,onChange:S=>X("origin",S.target.value),className:"modern-filter-select",children:[u.jsxs("option",{value:"",children:["All Origins (",A.length,")"]}),A.map(S=>u.jsxs("option",{value:S,children:["🌍 ",S]},S))]})]}),u.jsxs("div",{className:"filter-card",children:[u.jsxs("label",{className:"filter-label",children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),u.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),"Special Tags"]}),u.jsxs("select",{value:_.tagId,onChange:S=>X("tagId",S.target.value),className:"modern-filter-select",children:[u.jsx("option",{value:"",children:"All Tags"}),u.jsx("option",{value:"organic",children:"🌱 Organic"}),u.jsx("option",{value:"fair-trade",children:"🤝 Fair Trade"}),u.jsx("option",{value:"single-origin",children:"🎯 Single Origin"}),u.jsx("option",{value:"bean-to-bar",children:"🔄 Bean to Bar"}),u.jsx("option",{value:"raw",children:"⚡ Raw"}),u.jsx("option",{value:"vegan",children:"🌿 Vegan"}),u.jsx("option",{value:"sugar-free",children:"🚫 Sugar Free"}),u.jsx("option",{value:"award-winning",children:"🏆 Award Winning"})]})]}),u.jsxs("div",{className:"filter-card",children:[u.jsxs("label",{className:"filter-label",children:[u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"})}),"Minimum Rating"]}),u.jsxs("select",{value:_.minRating||"",onChange:S=>X("minRating",S.target.value),className:"modern-filter-select",children:[u.jsx("option",{value:"",children:"Any Rating"}),u.jsx("option",{value:"4.5",children:"⭐⭐⭐⭐⭐ 4.5+ Exceptional"}),u.jsx("option",{value:"4.0",children:"⭐⭐⭐⭐ 4.0+ Excellent"}),u.jsx("option",{value:"3.5",children:"⭐⭐⭐ 3.5+ Very Good"}),u.jsx("option",{value:"3.0",children:"⭐⭐ 3.0+ Good"})]})]}),u.jsxs("div",{className:"filter-card cacao-card",children:[u.jsxs("label",{className:"filter-label",children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M8 12h8M12 8v8"})]}),"Cacao Percentage Range"]}),u.jsxs("div",{className:"cacao-range",children:[u.jsx("input",{type:"number",placeholder:"Min %",value:_.cacaoMin||"",onChange:S=>X("cacaoMin",S.target.value),className:"cacao-input",min:"0",max:"100"}),u.jsx("span",{className:"cacao-separator",children:"to"}),u.jsx("input",{type:"number",placeholder:"Max %",value:_.cacaoMax||"",onChange:S=>X("cacaoMax",S.target.value),className:"cacao-input",min:"0",max:"100"})]}),u.jsx("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",color:"#6B7280",textAlign:"center"},children:"💡 Most dark chocolates: 70-85% • Milk chocolates: 30-50%"})]})]})}),oe.length>0?u.jsx("div",{className:"chocolate-grid",children:oe.map(S=>u.jsx(Uc,{chocolate:S},S.id))}):u.jsxs("div",{className:"no-results-modern",children:[u.jsx("div",{className:"no-results-icon",children:u.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M16 16s-1.5-2-4-2-4 2-4 2"}),u.jsx("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),u.jsx("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]})}),u.jsx("h3",{children:"No chocolates found"}),u.jsx("p",{children:"Try adjusting your filters to discover more chocolates"}),ne&&u.jsx("button",{onClick:Q,className:"btn btn-primary",children:"Clear All Filters"})]})]})})}function LO(){return u.jsx("div",{className:"barcode-search-page",children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"construction-banner",children:[u.jsx("div",{className:"construction-icon",children:"🚧"}),u.jsxs("div",{className:"construction-content",children:[u.jsx("h2",{children:"Under Construction"}),u.jsx("p",{children:"We're working hard to bring you an amazing barcode scanning experience!"})]}),u.jsx("div",{className:"construction-icon",children:"⚙️"})]}),u.jsxs("div",{className:"page-header",children:[u.jsx("h1",{children:"Find Chocolates by Barcode"}),u.jsx("p",{className:"page-description",children:"Scan or enter a barcode to quickly find information about a chocolate product."})]}),u.jsxs("div",{className:"scanner-preview",children:[u.jsx("div",{className:"coming-soon-overlay",children:u.jsxs("div",{className:"coming-soon-content",children:[u.jsx("div",{className:"coming-soon-icon",children:"📱"}),u.jsx("h3",{children:"Coming Soon!"}),u.jsx("p",{children:"We're building an advanced barcode scanning system that will include:"}),u.jsxs("ul",{className:"feature-list",children:[u.jsx("li",{children:"📸 Real-time camera scanning"}),u.jsx("li",{children:"🔍 Instant chocolate identification"}),u.jsx("li",{children:"📊 Automatic product details"}),u.jsx("li",{children:"⚡ Lightning-fast results"}),u.jsx("li",{children:"📱 Mobile app integration"})]}),u.jsx("div",{className:"eta-badge",children:u.jsx("span",{className:"eta-text",children:"Expected Launch: Coming Soon"})})]})}),u.jsxs("div",{className:"scanner-mockup",children:[u.jsx("div",{className:"mock-camera",children:u.jsxs("div",{className:"camera-viewfinder",children:[u.jsx("div",{className:"scan-line"}),u.jsx("div",{className:"corner top-left"}),u.jsx("div",{className:"corner top-right"}),u.jsx("div",{className:"corner bottom-left"}),u.jsx("div",{className:"corner bottom-right"})]})}),u.jsxs("div",{className:"mock-controls",children:[u.jsx("button",{className:"mock-btn",disabled:!0,children:"📸 Scan Barcode"}),u.jsx("button",{className:"mock-btn",disabled:!0,children:"📋 Enter Manually"})]})]})]}),u.jsxs("div",{className:"info-section",children:[u.jsx("h2",{children:"What's Coming"}),u.jsxs("div",{className:"info-grid",children:[u.jsxs("div",{className:"info-card",children:[u.jsx("div",{className:"info-icon",children:"🎯"}),u.jsx("h3",{children:"Instant Recognition"}),u.jsx("p",{children:"Point your camera at any chocolate barcode and get instant product information from our growing database."})]}),u.jsxs("div",{className:"info-card",children:[u.jsx("div",{className:"info-icon",children:"🌐"}),u.jsx("h3",{children:"Global Database"}),u.jsx("p",{children:"We're partnering with Open Food Facts and building our own comprehensive chocolate database."})]}),u.jsxs("div",{className:"info-card",children:[u.jsx("div",{className:"info-icon",children:"📱"}),u.jsx("h3",{children:"Mobile First"}),u.jsx("p",{children:"Our upcoming mobile app will make scanning barcodes as easy as taking a photo."})]}),u.jsxs("div",{className:"info-card",children:[u.jsx("div",{className:"info-icon",children:"⚡"}),u.jsx("h3",{children:"Smart Features"}),u.jsx("p",{children:"Get reviews, ratings, ingredients, and recommendations instantly after scanning."})]})]}),u.jsxs("div",{className:"current-alternative",children:[u.jsx("h3",{children:"In the Meantime"}),u.jsx("p",{children:"While we're building this feature, you can still discover amazing chocolates by:"}),u.jsxs("div",{className:"alternative-actions",children:[u.jsx("a",{href:"/browse",className:"action-btn primary",children:"🍫 Browse All Chocolates"}),u.jsx("a",{href:"/search",className:"action-btn secondary",children:"🔍 Search by Name"}),u.jsx("a",{href:"/add-chocolate",className:"action-btn secondary",children:"➕ Add New Chocolate"})]})]})]}),u.jsxs("div",{className:"progress-section",children:[u.jsx("h3",{children:"Development Progress"}),u.jsxs("div",{className:"progress-items",children:[u.jsxs("div",{className:"progress-item completed",children:[u.jsx("div",{className:"progress-icon",children:"✅"}),u.jsx("span",{children:"Database Architecture"})]}),u.jsxs("div",{className:"progress-item completed",children:[u.jsx("div",{className:"progress-icon",children:"✅"}),u.jsx("span",{children:"UI/UX Design"})]}),u.jsxs("div",{className:"progress-item in-progress",children:[u.jsx("div",{className:"progress-icon",children:"🔄"}),u.jsx("span",{children:"Barcode Recognition Engine"})]}),u.jsxs("div",{className:"progress-item pending",children:[u.jsx("div",{className:"progress-icon",children:"⏳"}),u.jsx("span",{children:"Mobile App Integration"})]}),u.jsxs("div",{className:"progress-item pending",children:[u.jsx("div",{className:"progress-icon",children:"⏳"}),u.jsx("span",{children:"Beta Testing"})]})]})]})]})})}function VO(){const{categorySlug:r}=kp(),[e,t]=P.useState([]),[s,o]=P.useState(!0),[c,d]=P.useState(null),[m,g]=P.useState("rating"),y=j=>j==="origin"?"Single Origin":j==="artisan"?"Artisan Craft":j.charAt(0).toUpperCase()+j.slice(1)+" Chocolate",_=j=>{switch(j){case"dark":return"Bold, intense flavors with higher cacao percentages, typically ranging from 55% to 100%.";case"milk":return"Smooth and creamy with a balance of cocoa and dairy notes, offering a more approachable chocolate experience.";case"white":return"Made with cocoa butter, sugar, and milk, without cocoa solids, creating a rich, sweet flavor profile.";case"origin":return"Chocolates made from beans sourced from a single region, showcasing the unique terroir of specific locations.";case"artisan":return"Small-batch chocolates crafted with meticulous attention to detail, often using traditional methods and premium ingredients.";default:return"Explore our chocolate collection"}},x=j=>{g(j.target.value)},T=j=>({dark:"/category-dark.jpg",milk:"/category-milk.jpg",white:"/category-white.jpg",origin:"/category-origin.jpg",artisan:"/category-artisan.jpg"})[j]||"/category-default.jpg";P.useEffect(()=>{(async()=>{try{o(!0);let k;r==="origin"?k={field:"tagIds",operator:"array-contains",value:"single-origin"}:r==="artisan"?k={field:"tagIds",operator:"array-contains",value:"bean-to-bar"}:k={field:"type",operator:"==",value:r.charAt(0).toUpperCase()+r.slice(1)};const z=await iO(k);t(z),o(!1)}catch(k){console.error("Error fetching category data:",k),d(k.message),o(!1)}})()},[r]);const D=()=>[...e].sort((j,k)=>{switch(m){case"rating":return(k.averageRating||0)-(j.averageRating||0);case"popularity":return(k.ratings||0)-(j.ratings||0);case"cacao-high":return(k.cacaoPercentage||0)-(j.cacaoPercentage||0);case"cacao-low":return(j.cacaoPercentage||0)-(k.cacaoPercentage||0);case"name":return j.name.localeCompare(k.name);default:return 0}});if(s)return u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"loading-spinner"}),u.jsxs("p",{children:["Loading ",y(r),"..."]})]});if(c)return u.jsxs("div",{className:"error-container",children:[u.jsxs("p",{children:["Error: ",c]}),u.jsx(_e,{to:"/",className:"btn btn-primary",children:"Return Home"})]});const C=D();return u.jsxs("div",{className:"category-page",children:[u.jsx("div",{className:"category-hero",style:{backgroundImage:`linear-gradient(rgba(58, 42, 31, 0.7), rgba(58, 42, 31, 0.7)), url(${T(r)})`},children:u.jsxs("div",{className:"container",children:[u.jsx("h1",{children:y(r)}),u.jsx("p",{className:"category-description",children:_(r)})]})}),u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"category-controls",children:[u.jsxs("div",{className:"results-count",children:[e.length," ",e.length===1?"chocolate":"chocolates"," found"]}),u.jsxs("div",{className:"sort-control",children:[u.jsx("label",{htmlFor:"sort-by",children:"Sort by:"}),u.jsxs("select",{id:"sort-by",value:m,onChange:x,children:[u.jsx("option",{value:"rating",children:"Highest Rated"}),u.jsx("option",{value:"popularity",children:"Most Popular"}),u.jsx("option",{value:"cacao-high",children:"Cacao % (High to Low)"}),u.jsx("option",{value:"cacao-low",children:"Cacao % (Low to High)"}),u.jsx("option",{value:"name",children:"Name (A-Z)"})]})]})]}),C.length>0?u.jsx("div",{className:"chocolates-grid",children:C.map(j=>u.jsx(Uc,{chocolate:j},j.id))}):u.jsxs("div",{className:"no-chocolates",children:[u.jsx("p",{children:"No chocolates found in this category."}),u.jsx(_e,{to:"/browse",className:"btn btn-primary",children:"Browse All Chocolates"})]})]})]})}function rw(){const{makerName:r}=kp(),[e]=Ew(),t=e.get("maker"),s=r||t,[o,c]=P.useState([]),[d,m]=P.useState(!0),[g,y]=P.useState(null),[_,x]=P.useState("rating");P.useEffect(()=>{(async()=>{if(s)try{m(!0),console.log("🔍 Searching for chocolates by maker:",s);const j=await $g();console.log("📊 Total chocolates retrieved:",j.length);const k=j.filter(z=>{if(!z.maker)return!1;const X=z.maker.toLowerCase().trim(),Q=s.toLowerCase().trim();return X===Q?(console.log("✅ Exact match found:",z.name,"by",z.maker),!0):X.includes(Q)||Q.includes(X)?(console.log("✅ Partial match found:",z.name,"by",z.maker),!0):!1});console.log("🎯 Chocolates found for maker:",k.length),console.log("📋 Maker chocolates:",k.map(z=>`${z.name} by ${z.maker}`)),c(k),m(!1)}catch(j){console.error("💥 Error fetching maker chocolates:",j),y(j.message),m(!1)}})()},[s]);const T=()=>[...o].sort((C,j)=>{switch(_){case"rating":return(j.averageRating||0)-(C.averageRating||0);case"popularity":return(j.ratings||j.reviewCount||0)-(C.ratings||C.reviewCount||0);case"cacao-high":return(j.cacaoPercentage||0)-(C.cacaoPercentage||0);case"cacao-low":return(C.cacaoPercentage||0)-(j.cacaoPercentage||0);case"name":return(C.name||"").localeCompare(j.name||"");default:return 0}});if(d)return u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"loading-spinner"}),u.jsxs("p",{children:["Loading chocolates by ",s,"..."]})]});if(g)return u.jsx("div",{className:"error-container",children:u.jsxs("p",{children:["Error: ",g]})});const D=T();return u.jsx("div",{className:"maker-page",children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"maker-header",children:[u.jsxs("h1",{children:["Chocolates by ",s]}),u.jsxs("p",{className:"maker-description",children:["Explore all chocolates made by ",s," in our collection"]})]}),u.jsxs("div",{className:"maker-controls",children:[u.jsxs("div",{className:"results-count",children:[o.length," ",o.length===1?"chocolate":"chocolates"," found"]}),u.jsxs("div",{className:"sort-control",children:[u.jsx("label",{htmlFor:"sort-by",children:"Sort by:"}),u.jsxs("select",{id:"sort-by",value:_,onChange:C=>x(C.target.value),children:[u.jsx("option",{value:"rating",children:"Highest Rated"}),u.jsx("option",{value:"popularity",children:"Most Popular"}),u.jsx("option",{value:"cacao-high",children:"Cacao % (High to Low)"}),u.jsx("option",{value:"cacao-low",children:"Cacao % (Low to High)"}),u.jsx("option",{value:"name",children:"Name (A-Z)"})]})]})]}),D.length>0?u.jsx("div",{className:"chocolates-grid",children:D.map(C=>u.jsx(Uc,{chocolate:C},C.id))}):u.jsxs("div",{className:"no-chocolates",children:[u.jsxs("p",{children:['No chocolates found for "',s,'".']}),u.jsx("p",{children:"This might be due to variations in how the maker name is stored."}),u.jsxs("div",{className:"debug-info",style:{marginTop:"1rem",padding:"1rem",background:"#f5f5f5",borderRadius:"8px"},children:[u.jsx("p",{children:u.jsx("strong",{children:"Debug Info:"})}),u.jsxs("p",{children:['Searched for: "',s,'"']}),u.jsx("p",{children:"Try searching for part of the maker name in the main search."})]})]})]})})}function Ax({onImageSelected:r,currentImageUrl:e=null}){const[t,s]=P.useState(e),[o,c]=P.useState(!1),[d,m]=P.useState(""),[g,y]=P.useState(""),_=async D=>new Promise((C,j)=>{const k=new Image,z=document.createElement("canvas"),X=z.getContext("2d");k.onload=()=>{try{let{width:J,height:oe}=k;J>oe?J>1200&&(oe=oe*1200/J,J=1200):oe>1200&&(J=J*1200/oe,oe=1200),z.width=J,z.height=oe,X.fillStyle="white",X.fillRect(0,0,J,oe),X.drawImage(k,0,0,J,oe),z.toBlob(U=>{U?C(U):j(new Error("Failed to convert image"))},"image/jpeg",.85)}catch(ne){j(ne)}},k.onerror=()=>j(new Error("Failed to load image"));const Q=URL.createObjectURL(D);k.src=Q,k.onload=(ne=>function(){return URL.revokeObjectURL(Q),ne.apply(this,arguments)})(k.onload)}),x=async D=>{if(D.target.files&&D.target.files[0]){const C=D.target.files[0];m(""),c(!0),y("Processing image...");try{if(C.size>15*1024*1024)throw new Error("File too large. Please choose an image under 15MB.");let j=C;const k=C.type==="image/heic"||C.type==="image/heif"||C.name.toLowerCase().endsWith(".heic")||C.name.toLowerCase().endsWith(".heif");if(k||C.size>3*1024*1024||C.type==="image/png"){y(k?"Converting HEIC to JPEG...":"Optimizing image...");try{const Q=await _(C),ne=C.name.replace(/\.(heic|heif|png)$/i,".jpg"),J=ne.includes(".jpg")?ne:ne+".jpg";j=new File([Q],J,{type:"image/jpeg",lastModified:Date.now()}),console.log("Image conversion successful:",{originalSize:(C.size/1024/1024).toFixed(2)+"MB",processedSize:(j.size/1024/1024).toFixed(2)+"MB",originalType:C.type,processedType:j.type})}catch(Q){throw console.error("Image conversion failed:",Q),new Error("Could not process image. Please try a different image or JPG format.")}}if(j.size>5*1024*1024)throw new Error("Processed image is still too large. Please try a smaller image.");y("Creating preview...");const X=new FileReader;X.onload=Q=>{s(Q.target.result),y("")},X.onerror=()=>{throw new Error("Failed to create image preview")},X.readAsDataURL(j),r(j),console.log("Image processing completed successfully")}catch(j){console.error("Error processing image:",j),m(j.message||"Error processing image. Please try again."),s(null),r(null)}finally{c(!1),y("")}}},T=()=>{s(null),m(""),r(null)};return u.jsxs("div",{className:"image-uploader",children:[u.jsx("div",{className:"image-preview-container",children:t?u.jsxs("div",{className:"preview-wrapper",children:[u.jsx("img",{src:t,alt:"Preview",className:"image-preview"}),u.jsx("button",{type:"button",className:"remove-image-btn",onClick:T,title:"Remove image",children:"×"})]}):u.jsxs("div",{className:"image-placeholder",children:[u.jsx("span",{children:"📷"}),u.jsx("span",{children:"No Image Selected"})]})}),u.jsx("div",{className:"upload-controls",children:u.jsxs("label",{className:`upload-button ${o?"disabled":""}`,children:[o?g||"Processing...":t?"Change Image":"Upload Label Image",u.jsx("input",{type:"file",accept:"image/*,.heic,.heif",onChange:x,disabled:o,style:{display:"none"}})]})}),d&&u.jsx("div",{className:"error-message",children:d}),u.jsxs("div",{className:"upload-info",children:["Supports JPG, PNG, WebP, and HEIC files up to 15MB",u.jsx("br",{}),u.jsx("small",{children:"HEIC files will be automatically converted to JPG"})]})]})}const BO=["Dark","Milk","White","Ruby","Dark Milk","Single Origin","Flavored"];function zO(){const{currentUser:r}=vs(),e=da();P.useEffect(()=>{r||e("/auth")},[r,e]);const[t,s]=P.useState({name:"",maker:"",type:"",origin:"",cacaoPercentage:"",flavorTags:[],attributeTags:[],customTags:""}),[o,c]=P.useState({rating:0,text:"",title:""}),[d,m]=P.useState(null),[g,y]=P.useState(!1),[_,x]=P.useState(!1),[T,D]=P.useState(!1),[C,j]=P.useState(null),[k,z]=P.useState(!1),[X,Q]=P.useState([]);P.useEffect(()=>{(async()=>{try{const L=await Ex();console.log("Available tags:",L)}catch(L){console.error("Error loading tags:",L)}})()},[]);const ne=async(I,L,O)=>{try{return(await _x(`${I} ${L}`)).filter(Z=>{const ce=Z.name.toLowerCase().includes(I.toLowerCase())||I.toLowerCase().includes(Z.name.toLowerCase()),de=Z.maker.toLowerCase()===L.toLowerCase(),Se=Z.type===O;return ce&&de||ce&&Se})}catch($e){return console.error("Error checking for duplicates:",$e),[]}},J=async()=>{if(!(!t.name.trim()||!t.maker.trim())){z(!0);try{const I=await ne(t.name.trim(),t.maker.trim(),t.type);I.length>0?(Q(I),j(`Found ${I.length} similar chocolate(s). Please review before continuing.`)):(j(null),Q([]))}catch(I){console.error("Error checking duplicates:",I)}finally{z(!1)}}};P.useEffect(()=>{const I=setTimeout(()=>{J()},1e3);return()=>clearTimeout(I)},[t.name,t.maker,t.type]);const oe=I=>{const{name:L,value:O}=I.target;s($e=>({...$e,[L]:O}))},U=I=>{const{name:L,value:O}=I.target;c($e=>({...$e,[L]:O}))},N=I=>{c(L=>({...L,rating:I}))},A=async I=>{var L,O,$e,Ke,Z;if(I.preventDefault(),!r){alert("Please sign in to add chocolates");return}if(!t.name.trim()){alert("Please enter a chocolate name");return}if(!t.maker.trim()){alert("Please enter a maker name");return}if(!t.type){alert("Please select a chocolate type");return}if(!o.rating){alert("Please select a rating");return}if(!o.text.trim()){alert("Please write a review");return}if(!(X.length>0&&!window.confirm(`Warning: Found ${X.length} similar chocolate(s). Are you sure this is a new, unique chocolate?`))){y(!0);try{console.log("🚀 Form submission started");const ce=[...t.flavorTags,...t.attributeTags,...t.customTags.split(",").map(ae=>ae.trim()).filter(ae=>ae)],de={name:t.name.trim(),maker:t.maker.trim(),type:t.type,origin:t.origin.trim()||"Unknown",cacaoPercentage:t.cacaoPercentage?parseInt(t.cacaoPercentage):0,description:"",tags:ce,createdBy:r.uid,createdByName:r.displayName||((L=r.email)==null?void 0:L.split("@")[0])||"Anonymous User"};console.log("📦 Prepared chocolate data:",de),console.log("🖼️ Selected image:",d?{name:d.name,size:`${(d.size/1024/1024).toFixed(2)}MB`,type:d.type}:"No image selected"),console.log("📤 Calling addUserChocolate...");const Se=await oO(de,d);console.log("✅ Upload completed successfully:",Se);const V={chocolateId:Se.id,userId:r.uid,user:r.displayName||((O=r.email)==null?void 0:O.split("@")[0])||"Anonymous User",userName:r.displayName||(($e=r.email)==null?void 0:$e.split("@")[0])||"Anonymous User",userPhotoURL:r.photoURL||null,rating:o.rating,text:o.text.trim(),title:o.title.trim()||void 0,isFirstReview:!0,helpful:0,chocolate:{id:Se.id,name:Se.name,maker:Se.maker,imageUrl:Se.imageUrl||"https://placehold.co/300x300?text=Chocolate"}};console.log("📝 Adding initial review:",V),console.log("🔍 Debug Current User Info:"),console.log("- UID:",r.uid),console.log("- Display Name:",r.displayName),console.log("- Email:",r.email),console.log("- Photo URL:",r.photoURL),await Ip(V),D(!0),setTimeout(()=>{console.log("🔄 Redirecting to chocolate page:",`/chocolate/${Se.id}`),e(`/chocolate/${Se.id}`)},3e3)}catch(ce){console.error("💥 Submit error:",ce);let de="Failed to add chocolate. ";ce.code==="storage/unauthorized"?de+="Storage permission denied. Please try signing out and back in.":ce.code==="storage/canceled"?de+="Upload was canceled.":ce.code==="storage/retry-limit-exceeded"?de+="Upload failed due to network issues. Please try again.":(Ke=ce.message)!=null&&Ke.includes("CORS")?de+="Network configuration issue. Please try again in a few minutes.":(Z=ce.message)!=null&&Z.includes("storage")?de+="Image upload failed. The chocolate data was saved but without the image.":ce.code==="permission-denied"?de+="Permission denied. Please make sure you are signed in.":de+=ce.message||"Unknown error occurred.",de+=`

Please try again or contact support if the problem persists.`,alert(de)}finally{y(!1)}}};if(!r)return null;if(T)return u.jsx("div",{className:"add-chocolate-success",children:u.jsx("div",{className:"container",children:u.jsxs("div",{className:"success-animation",children:[u.jsx("div",{className:"success-icon",children:"🍫"}),u.jsx("h1",{children:"Chocolate Added Successfully!"}),u.jsx("p",{children:"Thank you for contributing to our chocolate database!"}),u.jsxs("div",{className:"success-details",children:[u.jsxs("p",{children:['Your chocolate "',u.jsx("strong",{children:t.name}),'" has been added and is now available for everyone to discover and review.']}),u.jsx("p",{children:"Your review is now the first one for this chocolate!"})]}),u.jsxs("div",{className:"loading-redirect",children:[u.jsxs("div",{className:"loading-dots",children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]}),u.jsx("p",{children:"Redirecting to your chocolate..."})]})]})})});const S=t.name.trim()&&t.maker.trim()&&t.type&&o.rating>0&&o.text.trim();return u.jsx("div",{className:"add-chocolate-page",children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"page-header",children:[u.jsx("h1",{children:"Add Your Chocolate Discovery"}),u.jsx("p",{children:"Share a new chocolate and write the first review!"})]}),u.jsxs("form",{onSubmit:A,className:"add-chocolate-form",children:[u.jsxs("div",{className:"form-section",children:[u.jsxs("div",{className:"section-header",children:[u.jsx("span",{className:"section-icon",children:"✨"}),u.jsx("h2",{children:"Chocolate Details"})]}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"name",children:"Chocolate Name *"}),u.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:oe,placeholder:"e.g., Madagascar Dark 70%",required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"maker",children:"Maker/Brand *"}),u.jsx("input",{type:"text",id:"maker",name:"maker",value:t.maker,onChange:oe,placeholder:"e.g., Valrhona, Lindt",required:!0})]})]}),u.jsxs("div",{className:"form-grid-three",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"origin",children:"Origin"}),u.jsx("input",{type:"text",id:"origin",name:"origin",value:t.origin,onChange:oe,placeholder:"e.g., Ecuador"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"cacaoPercentage",children:"Cacao %"}),u.jsx("input",{type:"number",id:"cacaoPercentage",name:"cacaoPercentage",value:t.cacaoPercentage,onChange:oe,placeholder:"70",min:"1",max:"100"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"type",children:"Type *"}),u.jsx("div",{className:"type-selector",children:BO.map(I=>u.jsx("button",{type:"button",onClick:()=>s(L=>({...L,type:I})),className:`type-button ${t.type===I?"selected":""}`,children:I},I))})]})]})]}),u.jsxs("div",{className:"form-section review-section",children:[u.jsxs("div",{className:"section-header",children:[u.jsx("span",{className:"section-icon",children:"⭐"}),u.jsx("h3",{children:"Write the First Review *"})]}),u.jsx("p",{className:"review-intro",children:"As the contributor, your review will be the first one for this chocolate!"}),u.jsxs("div",{className:"form-group rating-group",children:[u.jsx("label",{children:"Your Rating *"}),u.jsxs("div",{className:"rating-input-container",children:[u.jsx("div",{className:"rating-input",role:"radiogroup","aria-label":"Rate this chocolate from 1 to 5 stars",children:[1,2,3,4,5].map(I=>u.jsx("button",{type:"button",onClick:()=>N(I),className:`star-button ${I<=o.rating?"filled":""}`,"aria-label":`${I} star${I!==1?"s":""}`,"aria-pressed":I<=o.rating,title:`Rate ${I} star${I!==1?"s":""}`,children:"★"},I))}),o.rating>0&&u.jsxs("div",{className:"rating-feedback",children:[u.jsxs("span",{className:"rating-text",children:[o.rating===1&&"Poor",o.rating===2&&"Fair",o.rating===3&&"Good",o.rating===4&&"Very Good",o.rating===5&&"Excellent"]}),u.jsxs("span",{className:"rating-description",children:["(",o.rating," star",o.rating!==1?"s":"",")"]})]})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"reviewTitle",children:"Review Title (Optional)"}),u.jsx("input",{type:"text",id:"reviewTitle",name:"title",value:o.title,onChange:U,placeholder:"e.g., Rich and complex with berry notes",maxLength:100}),u.jsx("small",{children:"Give your review a catchy title"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"reviewText",children:"Your Review *"}),u.jsx("textarea",{id:"reviewText",name:"text",value:o.text,onChange:U,placeholder:"Share your experience with this chocolate. What did you taste? How was the texture? Would you recommend it?",rows:"4",required:!0,maxLength:1e3}),u.jsxs("div",{className:"textarea-footer",children:[u.jsxs("small",{className:"character-count",children:[o.text.length,"/1000 characters"]}),u.jsx("small",{className:"helper-text",children:"This will become the first review for this chocolate and help others decide if they want to try it."})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsxs("div",{className:"section-header",children:[u.jsx("span",{className:"section-icon",children:"📸"}),u.jsx("h3",{children:"Add a Photo"})]}),u.jsx("p",{children:"Help others see what this chocolate looks like!"}),u.jsx(Ax,{onImageSelect:m,currentImage:d,accept:"image/*",maxSizeMB:5})]}),u.jsx("div",{className:"form-navigation",children:u.jsx("button",{type:"submit",className:`submit-button ${S&&!g?"ready":""}`,disabled:!S||g,children:g?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"button-spinner"}),"Adding Chocolate..."]}):"Add Chocolate & Review"})})]})]})})}function Jm(){const r=da();Or();const{currentUser:e,loading:t}=vs();P.useEffect(()=>{!t&&e&&(console.log("✅ User already logged in, redirecting to profile"),setTimeout(()=>{r("/profile",{replace:!0})},100))},[e,t,r]);const[s,o]=P.useState(!1),[c,d]=P.useState(""),[m,g]=P.useState(""),[y,_]=P.useState(""),[x,T]=P.useState(""),[D,C]=P.useState(!1),[j,k]=P.useState(""),[z,X]=P.useState(""),[Q,ne]=P.useState(!1),J=async A=>{console.log(`🔑 Starting ${A} authentication`),C(!0),k("");try{let S;A==="Google"&&(S=await gO()),console.log(`✅ ${A} auth successful:`,S.uid),ne(!0),setTimeout(()=>{console.log("🚀 Redirecting to profile after successful auth");try{r("/profile",{replace:!0})}catch(I){console.error("Navigation error:",I),window.location.href="/profile"}},1500)}catch(S){console.error(`❌ ${A} auth error:`,S),k(S.message||`Failed to sign in with ${A}`),ne(!1)}finally{C(!1)}},oe=async A=>{if(A.preventDefault(),console.log(`🔑 Starting ${s?"signup":"login"} with email`),s&&m!==y){k("Passwords do not match");return}C(!0),k("");try{let S;s?S=await mO(c,m,x):S=await pO(c,m),console.log("✅ Email auth successful:",S.uid),ne(!0),setTimeout(()=>{console.log("🚀 Redirecting to profile after successful auth");try{r("/profile",{replace:!0})}catch(I){console.error("Navigation error:",I),window.location.href="/profile"}},1500)}catch(S){console.error("❌ Email auth error:",S),k(S.message),ne(!1)}finally{C(!1)}},U=async()=>{if(!c){k("Please enter your email address first");return}try{await EO(c),X("Password reset email sent! Check your inbox."),k("")}catch{k("Error sending reset email. Please try again.")}},N=()=>{o(!s),k(""),X("")};return Q?u.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #FDFCFC 0%, #F8F9FA 100%)"},children:u.jsxs("div",{style:{background:"white",padding:"3rem",borderRadius:"20px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.1)",textAlign:"center",maxWidth:"400px",width:"90%"},children:[u.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem",animation:"bounce 2s infinite"},children:"🍫"}),u.jsx("h2",{style:{color:"#2D1810",marginBottom:"1rem"},children:"Welcome to Chocly!"}),u.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:"Successfully signed in. Redirecting to your profile..."}),u.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #F4A261",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}})]})}):u.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #FDFCFC 0%, #F8F9FA 100%)",padding:"1rem"},children:u.jsxs("div",{style:{background:"white",padding:"2.5rem",borderRadius:"20px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.1)",width:"100%",maxWidth:"400px"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[u.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"🍫"}),u.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",color:"#2D1810",marginBottom:"0.5rem"},children:s?"Join Chocly":"Welcome Back"}),u.jsx("p",{style:{color:"#666",fontSize:"1rem"},children:s?"Create your chocolate journey":"Sign in to continue your chocolate journey"})]}),j&&u.jsx("div",{style:{background:"#FEE2E2",border:"1px solid #FCA5A5",color:"#DC2626",padding:"0.875rem",borderRadius:"12px",marginBottom:"1rem",fontSize:"0.9rem"},children:j}),z&&u.jsx("div",{style:{background:"#D1FAE5",border:"1px solid #86EFAC",color:"#059669",padding:"0.875rem",borderRadius:"12px",marginBottom:"1rem",fontSize:"0.9rem"},children:z}),u.jsx("div",{style:{marginBottom:"1.5rem"},children:u.jsxs("button",{onClick:()=>J("Google"),disabled:D,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.875rem 0.75rem",borderRadius:"12px",fontWeight:600,fontSize:"0.9rem",cursor:D?"not-allowed":"pointer",transition:"all 0.3s ease",border:"2px solid #E5E7EB",minHeight:"48px",background:"white",color:"#374151",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)",opacity:D?.7:1},children:[u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M12.545 10.239v3.821h5.445c-0.712 2.315-2.647 3.972-5.445 3.972-3.332 0-6.033-2.701-6.033-6.032s2.701-6.032 6.033-6.032c1.498 0 2.866 0.549 3.921 1.453l2.814-2.814c-1.79-1.677-4.184-2.702-6.735-2.702-5.522 0-10 4.478-10 10s4.478 10 10 10c8.396 0 10.201-7.835 9.412-11.566l-9.412-0.1z"})}),"Google"]})}),u.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"1.5rem 0",fontSize:"0.875rem",color:"#9CA3AF"},children:[u.jsx("div",{style:{flex:1,height:"1px",background:"#E5E7EB"}}),u.jsx("span",{style:{padding:"0 1rem"},children:"or continue with email"}),u.jsx("div",{style:{flex:1,height:"1px",background:"#E5E7EB"}})]}),u.jsxs("form",{onSubmit:oe,children:[s&&u.jsx("input",{type:"text",placeholder:"Full Name",value:x,onChange:A=>T(A.target.value),style:{width:"100%",padding:"0.875rem",border:"2px solid #E5E7EB",borderRadius:"12px",fontSize:"1rem",marginBottom:"0.75rem",transition:"border-color 0.3s",outline:"none"},required:!0}),u.jsx("input",{type:"email",placeholder:"Email address",value:c,onChange:A=>d(A.target.value),style:{width:"100%",padding:"0.875rem",border:"2px solid #E5E7EB",borderRadius:"12px",fontSize:"1rem",marginBottom:"0.75rem",transition:"border-color 0.3s",outline:"none"},required:!0}),u.jsx("input",{type:"password",placeholder:"Password",value:m,onChange:A=>g(A.target.value),style:{width:"100%",padding:"0.875rem",border:"2px solid #E5E7EB",borderRadius:"12px",fontSize:"1rem",marginBottom:"0.75rem",transition:"border-color 0.3s",outline:"none"},required:!0}),s&&u.jsx("input",{type:"password",placeholder:"Confirm Password",value:y,onChange:A=>_(A.target.value),style:{width:"100%",padding:"0.875rem",border:"2px solid #E5E7EB",borderRadius:"12px",fontSize:"1rem",marginBottom:"0.75rem",transition:"border-color 0.3s",outline:"none"},required:!0}),u.jsx("button",{type:"submit",disabled:D,style:{width:"100%",background:"linear-gradient(135deg, #F4A261 0%, #F4D03F 100%)",color:"#2D1810",border:"none",padding:"0.875rem",borderRadius:"12px",fontSize:"1rem",fontWeight:700,cursor:D?"not-allowed":"pointer",transition:"all 0.3s ease",marginBottom:"1rem",opacity:D?.7:1},children:D?"Please wait...":s?"Create Account":"Sign In"})]}),u.jsxs("div",{style:{textAlign:"center",fontSize:"0.9rem"},children:[!s&&u.jsx("button",{onClick:U,style:{background:"none",border:"none",color:"#F4A261",cursor:"pointer",textDecoration:"underline",marginBottom:"1rem",fontSize:"0.9rem"},children:"Forgot your password?"}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"#666"},children:s?"Already have an account?":"Don't have an account?"})," ",u.jsx("button",{onClick:N,style:{background:"none",border:"none",color:"#F4A261",cursor:"pointer",fontWeight:600,textDecoration:"underline"},children:s?"Sign In":"Sign Up"})]})]})]})})}const FO="/assets/logo-B6Il3ES6.png";function qO(){const[r,e]=P.useState(""),[t,s]=P.useState(!1),[o,c]=P.useState(!1),[d,m]=P.useState(!1),g=P.useRef(null),y=P.useRef(null),_=P.useRef(null),x=P.useRef(null),T=da(),D=Or(),{currentUser:C,userProfile:j}=vs(),k=D.pathname==="/",z=A=>{A.preventDefault(),r.trim()&&(T(`/search?query=${encodeURIComponent(r)}`),e(""),m(!1))},X=()=>{s(!t),t||m(!1)},Q=()=>{c(!o),o||m(!1)},ne=()=>{m(!d),d||(s(!1),c(!1),setTimeout(()=>{x.current&&x.current.focus()},150))},J=async()=>{try{await _O(),c(!1),T("/")}catch(A){console.error("Error logging out:",A)}};P.useEffect(()=>{function A(S){g.current&&!g.current.contains(S.target)&&s(!1),y.current&&!y.current.contains(S.target)&&c(!1),_.current&&!_.current.contains(S.target)&&m(!1)}return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[]),P.useEffect(()=>{function A(S){S.key==="Escape"&&d&&(m(!1),e(""))}return document.addEventListener("keydown",A),()=>{document.removeEventListener("keydown",A)}},[d]);const oe=()=>j!=null&&j.displayName?j.displayName:C!=null&&C.displayName?C.displayName:C!=null&&C.email?C.email.split("@")[0]:"User",U=()=>j!=null&&j.photoURL||C!=null&&C.photoURL?(j==null?void 0:j.photoURL)||(C==null?void 0:C.photoURL):null,N=()=>oe().charAt(0).toUpperCase();return u.jsx("header",{className:"header",children:u.jsxs("div",{className:"container",children:[u.jsx(_e,{to:"/",className:"logo",children:u.jsx("img",{src:FO,alt:"Chocly",className:"logo-image"})}),!k&&u.jsxs("div",{className:"search-section",ref:_,children:[u.jsx("button",{className:`search-toggle ${d?"active":""}`,onClick:ne,"aria-label":d?"Close search":"Open search",children:u.jsxs("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),u.jsxs("form",{className:`search-form-expandable ${d?"open":""}`,onSubmit:z,children:[u.jsx("input",{ref:x,type:"text",placeholder:"Search chocolates, makers...",value:r,onChange:A=>e(A.target.value),className:"search-input-expandable"}),u.jsx("button",{type:"submit",className:"search-submit-btn",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("path",{d:"M21 21l-4.35-4.35"})]})})]})]}),u.jsxs("div",{className:"header-actions",children:[C&&u.jsxs(_e,{to:"/add-chocolate",className:"add-chocolate-btn",children:[u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),u.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),u.jsx("span",{className:"add-chocolate-text",children:"Add Chocolate"})]}),C?u.jsxs("div",{className:"user-menu-container",ref:y,children:[u.jsxs("button",{className:"user-menu-toggle",onClick:Q,children:[u.jsx("div",{className:"user-avatar",children:U()?u.jsx("img",{src:U(),alt:oe()}):u.jsx("span",{className:"user-initials",children:N()})}),u.jsx("span",{className:"user-name",children:oe()}),u.jsx("svg",{className:`chevron ${o?"open":""}`,width:"16",height:"16",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M7 10l5 5 5-5z",fill:"currentColor"})})]}),u.jsxs("div",{className:`user-dropdown ${o?"open":""}`,children:[u.jsxs(_e,{to:"/profile",onClick:()=>c(!1),className:"user-dropdown-item",children:[u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),u.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"My Profile"]}),u.jsxs(_e,{to:"/add-chocolate",onClick:()=>c(!1),className:"user-dropdown-item",children:[u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),u.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Add Chocolate"]}),u.jsxs("button",{onClick:J,className:"user-dropdown-item logout",children:[u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),u.jsx("polyline",{points:"16,17 21,12 16,7"}),u.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Sign Out"]})]})]}):u.jsx(_e,{to:"/auth",className:"auth-btn primary-btn",children:"Sign In"}),u.jsxs("div",{className:"nav-container",ref:g,children:[u.jsx("button",{className:"menu-toggle",onClick:X,"aria-label":"Menu",children:u.jsxs("span",{className:`menu-icon ${t?"open":""}`,children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]})}),u.jsxs("nav",{className:`nav ${t?"open":""}`,children:[u.jsxs("div",{className:"nav-section",children:[u.jsx("h3",{children:"Browse"}),u.jsx(_e,{to:"/",onClick:()=>s(!1),children:"Home"}),u.jsx(_e,{to:"/browse",onClick:()=>s(!1),children:"All Chocolates"}),u.jsxs(_e,{to:"/barcode",onClick:()=>s(!1),children:["Barcode Search",u.jsx("span",{className:"under-construction",children:"Under Construction"})]})]}),u.jsxs("div",{className:"nav-section",children:[u.jsx("h3",{children:"Community"}),C&&u.jsx(_e,{to:"/add-chocolate",onClick:()=>s(!1),children:"Add Chocolate"}),u.jsx(_e,{to:"/about",onClick:()=>s(!1),children:"About Us"}),u.jsx(_e,{to:"/contact",onClick:()=>s(!1),children:"Contact"})]}),!C&&u.jsxs("div",{className:"nav-section",children:[u.jsx("h3",{children:"Account"}),u.jsx(_e,{to:"/login",onClick:()=>s(!1),children:"Log In"}),u.jsx(_e,{to:"/signup",onClick:()=>s(!1),children:"Sign Up"})]})]})]})]})]})})}function HO(){const r=new Date().getFullYear();return u.jsx("footer",{className:"footer",children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"footer-content",children:[u.jsxs("div",{className:"footer-logo",children:[u.jsx(_e,{to:"/",className:"logo-link",children:u.jsx("h2",{children:"Chocly"})}),u.jsx("p",{className:"tagline",children:"Discover better chocolate."})]}),u.jsxs("div",{className:"footer-links",children:[u.jsxs("div",{className:"footer-links-column",children:[u.jsx("h3",{children:"Explore"}),u.jsxs("ul",{children:[u.jsx("li",{children:u.jsx(_e,{to:"/browse",children:"All Chocolates"})}),u.jsx("li",{children:u.jsxs(_e,{to:"/barcode",children:["Barcode Search ",u.jsx("span",{className:"footer-badge",children:"Under Construction"})]})}),u.jsx("li",{children:u.jsx(_e,{to:"/about",children:"About Us"})}),u.jsx("li",{children:u.jsx(_e,{to:"/contact",children:"Contact"})})]})]}),u.jsxs("div",{className:"footer-links-column",children:[u.jsx("h3",{children:"Account"}),u.jsxs("ul",{children:[u.jsx("li",{children:u.jsx(_e,{to:"/signup",children:"Sign Up"})}),u.jsx("li",{children:u.jsx(_e,{to:"/login",children:"Log In"})}),u.jsx("li",{children:u.jsx(_e,{to:"/profile",children:"My Profile"})})]})]}),u.jsxs("div",{className:"footer-links-column",children:[u.jsx("h3",{children:"Company"}),u.jsxs("ul",{children:[u.jsx("li",{children:u.jsx(_e,{to:"/privacy-policy",children:"Privacy Policy"})}),u.jsx("li",{children:u.jsx(_e,{to:"/terms-of-service",children:"Terms of Service"})})]})]})]})]}),u.jsxs("div",{className:"footer-bottom",children:[u.jsxs("p",{className:"copyright",children:["© ",r," Chocly. All rights reserved."]}),u.jsxs("div",{className:"social-icons",children:[u.jsx("a",{href:"#",className:"social-icon instagram","aria-label":"Instagram",children:u.jsx("span",{className:"sr-only",children:"Instagram"})}),u.jsx("a",{href:"#",className:"social-icon twitter","aria-label":"Twitter",children:u.jsx("span",{className:"sr-only",children:"Twitter"})}),u.jsx("a",{href:"#",className:"social-icon facebook","aria-label":"Facebook",children:u.jsx("span",{className:"sr-only",children:"Facebook"})})]})]})]})})}function GO(){const[r,e]=P.useState([]),[t,s]=P.useState(!0),[o,c]=P.useState({});P.useEffect(()=>{(async()=>{try{const g=await $g();g.sort((y,_)=>y.name.localeCompare(_.name)),e(g)}catch(g){console.error("Error fetching chocolates:",g)}finally{s(!1)}})()},[]);const d=async(m,g)=>{c(y=>({...y,[m]:"uploading"}));try{await aO(m,g),c(y=>({...y,[m]:"success"})),e(y=>y.map(_=>_.id===m?{..._,imageUrl:URL.createObjectURL(g)}:_))}catch(y){console.error("Error uploading image:",y),c(_=>({..._,[m]:"error"}))}};return u.jsx("div",{className:"batch-upload-page",children:u.jsxs("div",{className:"container",children:[u.jsx("h1",{children:"Batch Image Upload"}),u.jsx("p",{className:"page-description",children:"Upload label images for multiple chocolates"}),t?u.jsx("div",{className:"loading",children:"Loading chocolates..."}):u.jsx("div",{className:"chocolates-grid",children:r.map(m=>u.jsxs("div",{className:"chocolate-upload-card",children:[u.jsxs("div",{className:"chocolate-info",children:[u.jsx("h3",{children:m.name}),u.jsx("p",{children:m.maker})]}),u.jsx("div",{className:"chocolate-image-container",children:m.imageUrl?u.jsx("img",{src:m.imageUrl,alt:m.name,className:"chocolate-image"}):u.jsx("div",{className:"no-image-placeholder",children:"No label image"})}),u.jsxs("div",{className:"upload-controls",children:[u.jsxs("label",{className:`upload-button ${o[m.id]==="uploading"?"disabled":""}`,children:[m.imageUrl?"Change Image":"Upload Image",u.jsx("input",{type:"file",accept:"image/*",disabled:o[m.id]==="uploading",style:{display:"none"},onChange:g=>{g.target.files&&g.target.files[0]&&d(m.id,g.target.files[0])}})]}),o[m.id]==="uploading"&&u.jsx("span",{className:"status-text uploading",children:"Uploading..."}),o[m.id]==="success"&&u.jsx("span",{className:"status-text success",children:"✓ Uploaded"}),o[m.id]==="error"&&u.jsx("span",{className:"status-text error",children:"Error uploading"})]})]},m.id))})]})})}function $O(){const[r,e]=P.useState(!1),[t,s]=P.useState(""),[o,c]=P.useState({name:"",makerId:"",type:"",origin:"",cacaoPercentage:"",description:"",ingredients:""}),[d,m]=P.useState(null),[g,y]=P.useState(null),[_,x]=P.useState(!1),T=j=>{const{name:k,value:z}=j.target;c({...o,[k]:z})},D=j=>{m(j),y(URL.createObjectURL(j))},C=async j=>{j.preventDefault();try{x(!0),s("");const k={name:o.name,makerId:o.makerId,type:o.type,origin:o.origin,cacaoPercentage:parseFloat(o.cacaoPercentage)||0,description:o.description,ingredients:o.ingredients.split(",").map(z=>z.trim())};await sO(k,d),s("Chocolate added successfully!"),c({name:"",makerId:"",type:"",origin:"",cacaoPercentage:"",description:"",ingredients:""}),m(null),y(null)}catch(k){s(`Error adding chocolate: ${k.message}`),console.error("Error adding chocolate:",k)}finally{x(!1)}};return u.jsx("div",{className:"admin-page",children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"admin-header",children:[u.jsx("h1",{children:"Chocolate Admin Dashboard"}),u.jsxs("div",{className:"admin-links",children:[u.jsx(_e,{to:"/admin/batch-upload",className:"admin-link",children:"Batch Image Upload"}),u.jsx(_e,{to:"/",className:"back-link",children:"Back to Home"})]})]}),u.jsxs("div",{className:"admin-section",children:[u.jsx("h2",{children:"Admin Tools"}),u.jsxs("div",{className:"admin-actions",children:[u.jsx("p",{className:"info-text",children:"Use the form below to manually add new chocolates to the database. For bulk operations, use the Batch Image Upload tool."}),t&&u.jsx("div",{className:"message",children:t})]})]}),u.jsxs("div",{className:"admin-section",children:[u.jsx("h2",{children:"Add New Chocolate"}),u.jsxs("form",{onSubmit:C,className:"admin-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"name",children:"Chocolate Name"}),u.jsx("input",{type:"text",id:"name",name:"name",value:o.name,onChange:T,required:!0,placeholder:"e.g., Madagascar Dark 70%"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"makerId",children:"Maker"}),u.jsx("input",{type:"text",id:"makerId",name:"makerId",value:o.makerId,onChange:T,required:!0,placeholder:"e.g., Valrhona, Lindt, etc."})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"type",children:"Type"}),u.jsxs("select",{id:"type",name:"type",value:o.type,onChange:T,required:!0,children:[u.jsx("option",{value:"",children:"Select a type"}),u.jsx("option",{value:"Dark",children:"Dark"}),u.jsx("option",{value:"Milk",children:"Milk"}),u.jsx("option",{value:"White",children:"White"}),u.jsx("option",{value:"Ruby",children:"Ruby"}),u.jsx("option",{value:"Dark Milk",children:"Dark Milk"}),u.jsx("option",{value:"Single Origin",children:"Single Origin"}),u.jsx("option",{value:"Flavored",children:"Flavored"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"origin",children:"Origin"}),u.jsx("input",{type:"text",id:"origin",name:"origin",value:o.origin,onChange:T,placeholder:"e.g., Madagascar, Ecuador, Venezuela"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"cacaoPercentage",children:"Cacao Percentage"}),u.jsx("input",{type:"number",id:"cacaoPercentage",name:"cacaoPercentage",value:o.cacaoPercentage,onChange:T,min:"0",max:"100",placeholder:"e.g. 70"})]}),u.jsxs("div",{className:"form-group full-width",children:[u.jsx("label",{children:"Chocolate Label Image"}),u.jsx(Ax,{onImageSelected:D,currentImageUrl:g}),u.jsx("p",{className:"field-helper",children:"Upload a clear image of the chocolate label or packaging"})]}),u.jsxs("div",{className:"form-group full-width",children:[u.jsx("label",{htmlFor:"description",children:"Description"}),u.jsx("textarea",{id:"description",name:"description",value:o.description,onChange:T,rows:"4",required:!0,placeholder:"Describe the chocolate's taste, texture, and characteristics..."})]}),u.jsxs("div",{className:"form-group full-width",children:[u.jsx("label",{htmlFor:"ingredients",children:"Ingredients"}),u.jsx("textarea",{id:"ingredients",name:"ingredients",value:o.ingredients,onChange:T,rows:"2",placeholder:"Comma-separated list: cocoa beans, sugar, cocoa butter, vanilla, etc."}),u.jsx("p",{className:"field-helper",children:"Separate each ingredient with a comma"})]}),u.jsx("button",{type:"submit",className:"admin-button",disabled:_,children:_?"Adding Chocolate...":"Add Chocolate"})]})]}),u.jsxs("div",{className:"admin-section",children:[u.jsx("h2",{children:"Database Statistics"}),u.jsxs("div",{className:"stats-info",children:[u.jsx("p",{children:"Use your Firebase console to view detailed database statistics and manage your chocolate collection."}),u.jsx("p",{children:"For bulk image uploads, use the Batch Image Upload tool above."})]})]})]})})}const YO="/assets/About%20Us%20Image-DSbnjCR8.jpg";function KO(){return u.jsx("div",{className:"about-page",children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"about-header",children:[u.jsx("h1",{children:"About Chocly"}),u.jsx("p",{className:"tagline",children:"For the love of all things chocolate"})]}),u.jsxs("section",{className:"about-story",children:[u.jsxs("div",{className:"story-content",children:[u.jsx("h2",{children:"Our Story"}),u.jsx("p",{children:"Chocly was born from a personal journey of discovery and delight. Inspired by the cravings and curiosities of a chocolate-loving wife during pregnancy, our founder embarked on a quest to catalogue favorite bars, explore new and exciting flavors, and research the next must-try indulgence. What began as a loving endeavor has blossomed into Chocly, a platform for all chocolate enthusiasts to share their experiences, learn from others, and navigate the delicious world of premium chocolate together."})]}),u.jsx("div",{className:"story-image",children:u.jsx("img",{src:YO,alt:"Chocly founder and the inspiration behind our chocolate journey",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"12px"}})})]}),u.jsxs("section",{className:"mission-section",children:[u.jsx("div",{className:"mission-overlay"}),u.jsxs("div",{className:"mission-content",children:[u.jsx("h2",{children:"Our Mission"}),u.jsx("p",{className:"mission-statement",children:"To help everyone discover and enjoy better chocolate."}),u.jsx("p",{className:"mission-description",children:"We believe that chocolate is more than just a treat—it's an experience, an art form, and a connection to cultures and traditions around the world. Our aim is to make premium chocolate accessible to everyone, creating a community where chocolate lovers can share their discoveries and expand their palates."})]})]}),u.jsxs("section",{className:"values-section",children:[u.jsx("h2",{children:"What Drives Us"}),u.jsxs("div",{className:"values-grid",children:[u.jsxs("div",{className:"value-card",children:[u.jsx("div",{className:"value-icon quality"}),u.jsx("h3",{children:"Quality"}),u.jsx("p",{children:"We champion chocolate crafted with care, highlighting makers who prioritize quality ingredients and ethical practices."})]}),u.jsxs("div",{className:"value-card",children:[u.jsx("div",{className:"value-icon community"}),u.jsx("h3",{children:"Community"}),u.jsx("p",{children:"We believe in the power of shared experiences and diverse perspectives to enrich our chocolate journeys."})]}),u.jsxs("div",{className:"value-card",children:[u.jsx("div",{className:"value-icon discovery"}),u.jsx("h3",{children:"Discovery"}),u.jsx("p",{children:"We're committed to helping people break out of their chocolate comfort zones and discover new favorites."})]}),u.jsxs("div",{className:"value-card",children:[u.jsx("div",{className:"value-icon education"}),u.jsx("h3",{children:"Education"}),u.jsx("p",{children:"We seek to deepen understanding of chocolate—from bean to bar—empowering informed choices."})]})]})]}),u.jsxs("section",{className:"team-section",children:[u.jsx("h2",{children:"Meet Our Team"}),u.jsx("p",{className:"team-intro",children:"We're a group of passionate chocolate enthusiasts dedicated to building the best platform for chocolate lovers everywhere."}),u.jsx("div",{className:"team-grid",children:u.jsx("div",{className:"team-placeholder",children:u.jsx("p",{children:"Team photos coming soon!"})})})]}),u.jsxs("section",{className:"join-section",children:[u.jsx("h2",{children:"Join Our Chocolate Revolution"}),u.jsx("p",{children:"Whether you're a casual chocolate enjoyer or a dedicated connoisseur, Chocly is the place for you. Sign up today to start tracking your chocolate journey, sharing your discoveries, and connecting with fellow enthusiasts."}),u.jsxs("div",{className:"cta-buttons",children:[u.jsx("a",{href:"/signup",className:"cta-button primary",children:"Join Chocly"}),u.jsx("a",{href:"/browse",className:"cta-button secondary",children:"Explore Chocolates"})]})]})]})})}function QO(){const[r,e]=P.useState({name:"",email:"",subject:"",message:""}),[t,s]=P.useState(!1),[o,c]=P.useState(!1),d=g=>{const{name:y,value:_}=g.target;e(x=>({...x,[y]:_}))},m=g=>{g.preventDefault(),c(!0);const y=encodeURIComponent(`Chocly Contact: ${r.subject}`),_=encodeURIComponent(`Name: ${r.name}
Email: ${r.email}
Subject: ${r.subject}

Message:
${r.message}`),x=`mailto:paulemickan@gmail.com?subject=${y}&body=${_}`;window.location.href=x,s(!0),c(!1),e({name:"",email:"",subject:"",message:""}),setTimeout(()=>{s(!1)},5e3)};return u.jsx("div",{className:"contact-page",children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"contact-header",children:[u.jsx("h1",{children:"Get in Touch"}),u.jsx("p",{className:"tagline",children:"We'd love to hear from you!"})]}),u.jsxs("div",{className:"contact-content",children:[u.jsxs("div",{className:"contact-info",children:[u.jsxs("div",{className:"contact-section",children:[u.jsx("h2",{children:"Let's Connect"}),u.jsx("p",{children:"Have questions about chocolate? Want to suggest a new feature? Or maybe you just want to say hello? We're here for all your chocolate-related inquiries."})]}),u.jsxs("div",{className:"contact-section",children:[u.jsx("h3",{children:"Follow Us"}),u.jsxs("div",{className:"social-links",children:[u.jsxs("a",{href:"#",className:"social-link",children:[u.jsx("span",{className:"social-icon instagram"}),u.jsx("span",{children:"@chocly"})]}),u.jsxs("a",{href:"#",className:"social-link",children:[u.jsx("span",{className:"social-icon facebook"}),u.jsx("span",{children:"Chocly"})]})]})]}),u.jsxs("div",{className:"contact-section",children:[u.jsx("h3",{children:"Quick Response"}),u.jsx("p",{className:"email-note",children:"We aim to respond to all inquiries within 48 hours."})]}),u.jsx("div",{className:"contact-image",children:u.jsx("div",{className:"image-placeholder",children:u.jsx("span",{children:"Chocly Team"})})})]}),u.jsxs("div",{className:"contact-form-container",children:[u.jsx("h2",{children:"Send Us a Message"}),t&&u.jsx("div",{className:"success-message",children:u.jsx("p",{children:"Thank you for your message! Your email client should have opened with a pre-filled message. We'll be in touch soon."})}),u.jsxs("form",{className:"contact-form",onSubmit:m,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"name",children:"Your Name"}),u.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:d,required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"email",children:"Email Address"}),u.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:d,required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"subject",children:"Subject"}),u.jsx("input",{type:"text",id:"subject",name:"subject",value:r.subject,onChange:d,required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"message",children:"Your Message"}),u.jsx("textarea",{id:"message",name:"message",value:r.message,onChange:d,rows:"5",required:!0})]}),u.jsx("button",{type:"submit",className:"submit-button",disabled:o,children:o?"Sending...":"Send Message"})]})]})]}),u.jsxs("div",{className:"faq-section",children:[u.jsx("h2",{children:"Frequently Asked Questions"}),u.jsxs("div",{className:"faq-grid",children:[u.jsxs("div",{className:"faq-item",children:[u.jsx("h3",{children:"How do I create an account?"}),u.jsx("p",{children:'Click the "Sign Up" button in the top right corner of the page and follow the instructions to create your Chocly account.'})]}),u.jsxs("div",{className:"faq-item",children:[u.jsx("h3",{children:"Can I add a chocolate that's not in the database?"}),u.jsx("p",{children:'Absolutely! You can suggest new chocolates to add to our database. Look for the "Add Chocolate" option in your profile menu.'})]}),u.jsxs("div",{className:"faq-item",children:[u.jsx("h3",{children:"How do I leave a review?"}),u.jsx("p",{children:"Navigate to any chocolate's detail page and scroll down to the review section. You can rate the chocolate and share your thoughts there."})]}),u.jsxs("div",{className:"faq-item",children:[u.jsx("h3",{children:"Is Chocly available as a mobile app?"}),u.jsx("p",{children:"We're currently working on mobile apps for iOS and Android. Stay tuned for updates!"})]})]})]})]})})}function WO(){const e=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return u.jsx("div",{className:"legal-page privacy-policy",children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"legal-header",children:[u.jsx("h1",{children:"Privacy Policy"}),u.jsxs("p",{className:"last-updated",children:["Last Updated: ",e]})]}),u.jsxs("div",{className:"legal-content",children:[u.jsx("section",{className:"legal-section",children:u.jsx("p",{className:"intro-text",children:"At Chocly, we take your privacy seriously. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website and use our services. Please read this privacy policy carefully. If you do not agree with the terms of this privacy policy, please do not access the site."})}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"Information We Collect"}),u.jsx("h3",{children:"Personal Data"}),u.jsx("p",{children:"We may collect personal information that you voluntarily provide to us when you register on our platform, express interest in obtaining information about us or our products and services, participate in activities on the platform, or otherwise contact us. The personal information we collect may include:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Name and contact information (email address, phone number)"}),u.jsx("li",{children:"Account credentials (username, password)"}),u.jsx("li",{children:"Profile information (profile picture, biography)"}),u.jsx("li",{children:"User-generated content (reviews, ratings, comments, uploads)"}),u.jsx("li",{children:"Preferences and interests related to chocolate"})]}),u.jsx("h3",{children:"Automatically Collected Information"}),u.jsx("p",{children:"When you visit our platform, we may automatically collect certain information about your device and your interaction with our platform. This information might include:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Device information (IP address, browser type, operating system)"}),u.jsx("li",{children:"Usage data (pages visited, time spent on pages, links clicked)"}),u.jsx("li",{children:"Location data (country, city)"}),u.jsx("li",{children:"Cookies and similar tracking technologies"})]})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"How We Use Your Information"}),u.jsx("p",{children:"We may use the information we collect for various purposes, including to:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Create and manage your user account"}),u.jsx("li",{children:"Provide and maintain our services"}),u.jsx("li",{children:"Personalize your experience on our platform"}),u.jsx("li",{children:"Process transactions and send related information"}),u.jsx("li",{children:"Respond to your inquiries and provide customer support"}),u.jsx("li",{children:"Send you administrative information, updates, and marketing communications"}),u.jsx("li",{children:"Improve our platform, products, and services"}),u.jsx("li",{children:"Protect against fraudulent, unauthorized, or illegal activity"}),u.jsx("li",{children:"Comply with legal obligations"})]})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"Sharing Your Information"}),u.jsx("p",{children:"We may share your information in the following situations:"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"With Service Providers:"})," We may share your information with third-party vendors, service providers, contractors, or agents who perform services for us."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"For Business Transfers:"})," We may share or transfer your information in connection with, or during negotiations of, any merger, sale of company assets, financing, or acquisition of all or a portion of our business."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"With Your Consent:"})," We may disclose your information for any other purpose with your consent."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"With Other Users:"})," When you share personal information or interact in public areas of the platform, such information may be viewed by all users and may be publicly distributed."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"For Legal Compliance:"})," We may disclose your information where required to do so by law or in response to valid requests by public authorities."]})]})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"User-Generated Content"}),u.jsx("p",{children:"Our platform allows you to upload, post, and share content, including reviews, ratings, comments, and images. Any information you post or share through these activities will be available to other users of the platform and the public. You should be aware that any information you provide in these areas may be read, collected, and used by others who access them."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"Storage and Security"}),u.jsx("p",{children:"We use commercially reasonable measures to protect your personal information from unauthorized access, use, or disclosure. However, please be aware that no method of electronic transmission or storage is 100% secure, and we cannot guarantee absolute security of your data."}),u.jsx("p",{children:"We will retain your personal information only for as long as is necessary for the purposes set out in this privacy policy, unless a longer retention period is required or permitted by law."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"Your Privacy Rights"}),u.jsx("p",{children:"Depending on your location, you may have certain rights regarding your personal information, including:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"The right to access the personal information we have about you"}),u.jsx("li",{children:"The right to request correction of inaccurate personal information"}),u.jsx("li",{children:"The right to request deletion of your personal information"}),u.jsx("li",{children:"The right to object to processing of your personal information"}),u.jsx("li",{children:"The right to data portability"}),u.jsx("li",{children:"The right to withdraw consent"})]}),u.jsx("p",{children:"To exercise these rights, please contact us using the contact information provided below. Please note that we may ask you to verify your identity before responding to such requests."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"Cookies and Similar Technologies"}),u.jsx("p",{children:"We use cookies and similar tracking technologies to collect and use information about you and your interaction with our platform. We use these technologies to collect information about your browsing activities over time and across different websites. You can instruct your browser to refuse all cookies or to indicate when a cookie is being sent. However, if you do not accept cookies, you may not be able to use some portions of our platform."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"Children's Privacy"}),u.jsx("p",{children:"Our platform is not intended for individuals under the age of 13. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and you are aware that your child has provided us with personal information, please contact us."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"Changes to This Privacy Policy"}),u.jsx("p",{children:'We may update our privacy policy from time to time. We will notify you of any changes by posting the new privacy policy on this page and updating the "Last Updated" date at the top of this policy. You are advised to review this privacy policy periodically for any changes.'})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"Contact Us"}),u.jsx("p",{children:"If you have questions or comments about this privacy policy, please contact us at:"}),u.jsxs("p",{className:"contact-info",children:["Email: privacy@chocly.co",u.jsx("br",{}),"Address: 123 Chocolate Lane, Sweet City, CA 94000"]})]})]})]})})}function XO(){const e=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return u.jsx("div",{className:"legal-page terms-of-service",children:u.jsxs("div",{className:"container",children:[u.jsxs("div",{className:"legal-header",children:[u.jsx("h1",{children:"Terms of Service"}),u.jsxs("p",{className:"last-updated",children:["Last Updated: ",e]})]}),u.jsxs("div",{className:"legal-content",children:[u.jsx("section",{className:"legal-section",children:u.jsx("p",{className:"intro-text",children:'Welcome to Chocly! These Terms of Service ("Terms") govern your access to and use of the Chocly website and services. Please read these Terms carefully before using our services. By accessing or using our services, you agree to be bound by these Terms and our Privacy Policy.'})}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"1. Acceptance of Terms"}),u.jsx("p",{children:"By accessing or using Chocly, you agree to be bound by these Terms. If you do not agree to all the terms and conditions of this agreement, you may not access or use our services."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"2. Changes to Terms"}),u.jsx("p",{children:'We reserve the right to modify these Terms at any time. We will provide notice of significant changes by posting the updated Terms on this page with a new "Last Updated" date. Your continued use of Chocly after any changes to the Terms constitutes your acceptance of such changes.'})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"3. Account Registration and Security"}),u.jsx("p",{children:"To access certain features of Chocly, you may be required to register for an account. When registering, you agree to provide accurate, current, and complete information. You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account. You agree to notify us immediately of any unauthorized use of your account."}),u.jsx("p",{children:"We reserve the right to suspend or terminate your account at our discretion if we believe that you have violated these Terms or if your account shows signs of fraud, abuse, or suspicious activity."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"4. User Content"}),u.jsx("h3",{children:"4.1 Content Ownership"}),u.jsx("p",{children:'You retain all ownership rights to the content you post, upload, or share on Chocly ("User Content"). By submitting User Content, you grant Chocly a worldwide, non-exclusive, royalty-free, sublicensable, and transferable license to use, reproduce, distribute, prepare derivative works of, display, and perform the User Content in connection with the operation and promotion of Chocly.'}),u.jsx("h3",{children:"4.2 Content Restrictions"}),u.jsx("p",{children:"You agree not to post, upload, or share any User Content that:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Violates any law or regulation"}),u.jsx("li",{children:"Infringes upon the rights of any third party, including intellectual property rights"}),u.jsx("li",{children:"Is false, misleading, defamatory, or deceptive"}),u.jsx("li",{children:"Contains sexually explicit or pornographic material"}),u.jsx("li",{children:"Promotes discrimination, bigotry, racism, or hatred against any individual or group"}),u.jsx("li",{children:"Is threatening, abusive, or harassing toward any individual or group"}),u.jsx("li",{children:"Promotes illegal or harmful activities"}),u.jsx("li",{children:"Contains viruses, malware, or other harmful code"})]}),u.jsx("h3",{children:"4.3 Content Moderation"}),u.jsx("p",{children:"We reserve the right, but have no obligation, to monitor, edit, or remove any User Content that we determine, in our sole discretion, violates these Terms or is otherwise objectionable. We are not responsible for the accuracy, completeness, appropriateness, or legality of User Content."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"5. Intellectual Property Rights"}),u.jsx("p",{children:"The Chocly name, logo, and all related names, logos, product and service names, designs, and slogans are trademarks of Chocly or its affiliates or licensors. You may not use such marks without our prior written permission."}),u.jsx("p",{children:"All content, features, and functionality of Chocly that is not User Content, including but not limited to text, graphics, images, logos, button icons, software, and the compilation thereof, is the exclusive property of Chocly, its licensors, or its content suppliers and is protected by copyright, trademark, and other intellectual property laws."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"6. Prohibited Activities"}),u.jsx("p",{children:"You agree not to engage in any of the following prohibited activities:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Using Chocly for any illegal purpose or in violation of any local, state, national, or international law"}),u.jsx("li",{children:"Impersonating any person or entity, or falsely stating or otherwise misrepresenting your affiliation with a person or entity"}),u.jsx("li",{children:"Interfering with or disrupting the operation of Chocly or the servers or networks connected to Chocly"}),u.jsx("li",{children:"Attempting to gain unauthorized access to Chocly, user accounts, or computer systems or networks connected to Chocly"}),u.jsx("li",{children:"Collecting or storing personal data about other users without their permission"}),u.jsx("li",{children:"Using automated means, including spiders, robots, crawlers, or data mining tools, to download data from Chocly"}),u.jsx("li",{children:"Introducing any viruses, Trojan horses, worms, or other material that is malicious or technologically harmful"})]})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"7. Third-Party Links and Content"}),u.jsx("p",{children:"Chocly may contain links to third-party websites or services that are not owned or controlled by Chocly. We have no control over, and assume no responsibility for, the content, privacy policies, or practices of any third-party websites or services. You further acknowledge and agree that Chocly shall not be responsible or liable, directly or indirectly, for any damage or loss caused or alleged to be caused by or in connection with the use of or reliance on any such content, goods, or services available on or through any such websites or services."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"8. Disclaimer of Warranties"}),u.jsx("p",{children:'Chocly is provided on an "AS IS" and "AS AVAILABLE" basis, without warranties of any kind, either express or implied, including, but not limited to, implied warranties of merchantability, fitness for a particular purpose, non-infringement, or course of performance.'}),u.jsx("p",{children:"We do not warrant that (a) Chocly will function uninterrupted, secure, or available at any particular time or location; (b) any errors or defects will be corrected; (c) Chocly is free of viruses or other harmful components; or (d) the results of using Chocly will meet your requirements."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"9. Limitation of Liability"}),u.jsx("p",{children:"To the maximum extent permitted by applicable law, in no event shall Chocly, its directors, employees, partners, agents, suppliers, or affiliates be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from (a) your access to or use of or inability to access or use Chocly; (b) any conduct or content of any third party on Chocly; (c) any content obtained from Chocly; and (d) unauthorized access, use, or alteration of your transmissions or content, whether based on warranty, contract, tort (including negligence), or any other legal theory, whether or not we have been informed of the possibility of such damage."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"10. Indemnification"}),u.jsx("p",{children:"You agree to defend, indemnify, and hold harmless Chocly, its directors, employees, partners, agents, suppliers, and affiliates from and against any claims, liabilities, damages, judgments, awards, losses, costs, expenses, or fees (including reasonable attorneys' fees) arising out of or relating to your violation of these Terms or your use of Chocly, including, but not limited to, your User Content, any use of Chocly's content, services, and products other than as expressly authorized in these Terms, or your use of any information obtained from Chocly."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"11. Termination"}),u.jsx("p",{children:"We may terminate or suspend your account and bar access to Chocly immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach these Terms."}),u.jsx("p",{children:"If you wish to terminate your account, you may simply discontinue using Chocly or contact us to request account deletion. All provisions of the Terms which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity, and limitations of liability."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"12. Governing Law"}),u.jsx("p",{children:"These Terms shall be governed and construed in accordance with the laws of the State of California, United States, without regard to its conflict of law provisions. Our failure to enforce any right or provision of these Terms will not be considered a waiver of those rights."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"13. Dispute Resolution"}),u.jsx("p",{children:"Any disputes arising out of or relating to these Terms or your use of Chocly shall be resolved through binding arbitration in accordance with the rules of the American Arbitration Association, except that each party retains the right to seek injunctive or other equitable relief in a court of competent jurisdiction to prevent the actual or threatened infringement or misappropriation of intellectual property rights."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"14. Contact Information"}),u.jsx("p",{children:"If you have any questions about these Terms, please contact us at:"}),u.jsxs("p",{className:"contact-info",children:["Email: terms@chocly.com",u.jsx("br",{}),"Address: 123 Chocolate Lane, Sweet City, CA 94000"]})]})]})]})})}function ZO(){return u.jsx(wS,{basename:"/",children:u.jsx(TO,{children:u.jsxs("div",{className:"app",children:[u.jsx(qO,{}),u.jsx("main",{className:"main-content",children:u.jsxs(WA,{children:[u.jsx(xt,{path:"/",element:u.jsx(nw,{})}),u.jsx(xt,{path:"/chocolate/:id",element:u.jsx(kO,{})}),u.jsx(xt,{path:"/search",element:u.jsx(OO,{})}),u.jsx(xt,{path:"/browse",element:u.jsx(UO,{})}),u.jsx(xt,{path:"/barcode",element:u.jsx(LO,{})}),u.jsx(xt,{path:"/profile",element:u.jsx(MO,{})}),u.jsx(xt,{path:"/auth",element:u.jsx(Jm,{})}),u.jsx(xt,{path:"/login",element:u.jsx(Jm,{})}),u.jsx(xt,{path:"/signup",element:u.jsx(Jm,{})}),u.jsx(xt,{path:"/about",element:u.jsx(KO,{})}),u.jsx(xt,{path:"/contact",element:u.jsx(QO,{})}),u.jsx(xt,{path:"/privacy-policy",element:u.jsx(WO,{})}),u.jsx(xt,{path:"/terms-of-service",element:u.jsx(XO,{})}),u.jsx(xt,{path:"/admin",element:u.jsx($O,{})}),u.jsx(xt,{path:"/admin/batch-upload",element:u.jsx(GO,{})}),u.jsx(xt,{path:"/category/:categorySlug",element:u.jsx(VO,{})}),u.jsx(xt,{path:"/maker",element:u.jsx(rw,{})}),u.jsx(xt,{path:"/maker/:makerName",element:u.jsx(rw,{})}),u.jsx(xt,{path:"/add-chocolate",element:u.jsx(zO,{})}),u.jsx(xt,{path:"*",element:u.jsx(nw,{})})]})}),u.jsx(HO,{})]})})})}sA.createRoot(document.getElementById("root")).render(u.jsx(P.StrictMode,{children:u.jsx(ZO,{})}));
