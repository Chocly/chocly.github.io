(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();var vm={exports:{}},Fl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function IA(){if(L_)return Fl;L_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Fl.Fragment=e,Fl.jsx=t,Fl.jsxs=t,Fl}var B_;function jA(){return B_||(B_=1,vm.exports=IA()),vm.exports}var h=jA(),_m={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function DA(){if(z_)return Ne;z_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),A=Symbol.iterator;function b(M){return M===null||typeof M!="object"?null:(M=A&&M[A]||M["@@iterator"],typeof M=="function"?M:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,P={};function I(M,ie,le){this.props=M,this.context=ie,this.refs=P,this.updater=le||k}I.prototype.isReactComponent={},I.prototype.setState=function(M,ie){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ie,"setState")},I.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function G(){}G.prototype=I.prototype;function J(M,ie,le){this.props=M,this.context=ie,this.refs=P,this.updater=le||k}var X=J.prototype=new G;X.constructor=J,C(X,I.prototype),X.isPureReactComponent=!0;var oe=Array.isArray,ce={H:null,A:null,T:null,S:null,V:null},ye=Object.prototype.hasOwnProperty;function R(M,ie,le,re,ge,Ce){return le=Ce.ref,{$$typeof:i,type:M,key:ie,ref:le!==void 0?le:null,props:Ce}}function x(M,ie){return R(M.type,ie,void 0,void 0,void 0,M.props)}function N(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function O(M){var ie={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(le){return ie[le]})}var L=/\/+/g;function B(M,ie){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):ie.toString(36)}function D(){}function wt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(D,D):(M.status="pending",M.then(function(ie){M.status==="pending"&&(M.status="fulfilled",M.value=ie)},function(ie){M.status==="pending"&&(M.status="rejected",M.reason=ie)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function it(M,ie,le,re,ge){var Ce=typeof M;(Ce==="undefined"||Ce==="boolean")&&(M=null);var Te=!1;if(M===null)Te=!0;else switch(Ce){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(M.$$typeof){case i:case e:Te=!0;break;case _:return Te=M._init,it(Te(M._payload),ie,le,re,ge)}}if(Te)return ge=ge(M),Te=re===""?"."+B(M,0):re,oe(ge)?(le="",Te!=null&&(le=Te.replace(L,"$&/")+"/"),it(ge,ie,le,"",function(_n){return _n})):ge!=null&&(N(ge)&&(ge=x(ge,le+(ge.key==null||M&&M.key===ge.key?"":(""+ge.key).replace(L,"$&/")+"/")+Te)),ie.push(ge)),1;Te=0;var yt=re===""?".":re+":";if(oe(M))for(var Ye=0;Ye<M.length;Ye++)re=M[Ye],Ce=yt+B(re,Ye),Te+=it(re,ie,le,Ce,ge);else if(Ye=b(M),typeof Ye=="function")for(M=Ye.call(M),Ye=0;!(re=M.next()).done;)re=re.value,Ce=yt+B(re,Ye++),Te+=it(re,ie,le,Ce,ge);else if(Ce==="object"){if(typeof M.then=="function")return it(wt(M),ie,le,re,ge);throw ie=String(M),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Te}function $(M,ie,le){if(M==null)return M;var re=[],ge=0;return it(M,re,"","",function(Ce){return ie.call(le,Ce,ge++)}),re}function ae(M){if(M._status===-1){var ie=M._result;ie=ie(),ie.then(function(le){(M._status===0||M._status===-1)&&(M._status=1,M._result=le)},function(le){(M._status===0||M._status===-1)&&(M._status=2,M._result=le)}),M._status===-1&&(M._status=0,M._result=ie)}if(M._status===1)return M._result.default;throw M._result}var fe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Ve(){}return Ne.Children={map:$,forEach:function(M,ie,le){$(M,function(){ie.apply(this,arguments)},le)},count:function(M){var ie=0;return $(M,function(){ie++}),ie},toArray:function(M){return $(M,function(ie){return ie})||[]},only:function(M){if(!N(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ne.Component=I,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=J,Ne.StrictMode=s,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(M){return ce.H.useMemoCache(M)}},Ne.cache=function(M){return function(){return M.apply(null,arguments)}},Ne.cloneElement=function(M,ie,le){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var re=C({},M.props),ge=M.key,Ce=void 0;if(ie!=null)for(Te in ie.ref!==void 0&&(Ce=void 0),ie.key!==void 0&&(ge=""+ie.key),ie)!ye.call(ie,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&ie.ref===void 0||(re[Te]=ie[Te]);var Te=arguments.length-2;if(Te===1)re.children=le;else if(1<Te){for(var yt=Array(Te),Ye=0;Ye<Te;Ye++)yt[Ye]=arguments[Ye+2];re.children=yt}return R(M.type,ge,void 0,void 0,Ce,re)},Ne.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},Ne.createElement=function(M,ie,le){var re,ge={},Ce=null;if(ie!=null)for(re in ie.key!==void 0&&(Ce=""+ie.key),ie)ye.call(ie,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ge[re]=ie[re]);var Te=arguments.length-2;if(Te===1)ge.children=le;else if(1<Te){for(var yt=Array(Te),Ye=0;Ye<Te;Ye++)yt[Ye]=arguments[Ye+2];ge.children=yt}if(M&&M.defaultProps)for(re in Te=M.defaultProps,Te)ge[re]===void 0&&(ge[re]=Te[re]);return R(M,Ce,void 0,void 0,null,ge)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(M){return{$$typeof:m,render:M}},Ne.isValidElement=N,Ne.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:ae}},Ne.memo=function(M,ie){return{$$typeof:y,type:M,compare:ie===void 0?null:ie}},Ne.startTransition=function(M){var ie=ce.T,le={};ce.T=le;try{var re=M(),ge=ce.S;ge!==null&&ge(le,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(Ve,fe)}catch(Ce){fe(Ce)}finally{ce.T=ie}},Ne.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Ne.use=function(M){return ce.H.use(M)},Ne.useActionState=function(M,ie,le){return ce.H.useActionState(M,ie,le)},Ne.useCallback=function(M,ie){return ce.H.useCallback(M,ie)},Ne.useContext=function(M){return ce.H.useContext(M)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(M,ie){return ce.H.useDeferredValue(M,ie)},Ne.useEffect=function(M,ie,le){var re=ce.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(M,ie)},Ne.useId=function(){return ce.H.useId()},Ne.useImperativeHandle=function(M,ie,le){return ce.H.useImperativeHandle(M,ie,le)},Ne.useInsertionEffect=function(M,ie){return ce.H.useInsertionEffect(M,ie)},Ne.useLayoutEffect=function(M,ie){return ce.H.useLayoutEffect(M,ie)},Ne.useMemo=function(M,ie){return ce.H.useMemo(M,ie)},Ne.useOptimistic=function(M,ie){return ce.H.useOptimistic(M,ie)},Ne.useReducer=function(M,ie,le){return ce.H.useReducer(M,ie,le)},Ne.useRef=function(M){return ce.H.useRef(M)},Ne.useState=function(M){return ce.H.useState(M)},Ne.useSyncExternalStore=function(M,ie,le){return ce.H.useSyncExternalStore(M,ie,le)},Ne.useTransition=function(){return ce.H.useTransition()},Ne.version="19.1.0",Ne}var q_;function gp(){return q_||(q_=1,_m.exports=DA()),_m.exports}var U=gp(),Em={exports:{}},Gl={},Tm={exports:{}},wm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function kA(){return H_||(H_=1,function(i){function e($,ae){var fe=$.length;$.push(ae);e:for(;0<fe;){var Ve=fe-1>>>1,M=$[Ve];if(0<o(M,ae))$[Ve]=ae,$[fe]=M,fe=Ve;else break e}}function t($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var ae=$[0],fe=$.pop();if(fe!==ae){$[0]=fe;e:for(var Ve=0,M=$.length,ie=M>>>1;Ve<ie;){var le=2*(Ve+1)-1,re=$[le],ge=le+1,Ce=$[ge];if(0>o(re,fe))ge<M&&0>o(Ce,re)?($[Ve]=Ce,$[ge]=fe,Ve=ge):($[Ve]=re,$[le]=fe,Ve=le);else if(ge<M&&0>o(Ce,fe))$[Ve]=Ce,$[ge]=fe,Ve=ge;else break e}}return ae}function o($,ae){var fe=$.sortIndex-ae.sortIndex;return fe!==0?fe:$.id-ae.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var g=[],y=[],_=1,A=null,b=3,k=!1,C=!1,P=!1,I=!1,G=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function oe($){for(var ae=t(y);ae!==null;){if(ae.callback===null)s(y);else if(ae.startTime<=$)s(y),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=t(y)}}function ce($){if(P=!1,oe($),!C)if(t(g)!==null)C=!0,ye||(ye=!0,B());else{var ae=t(y);ae!==null&&it(ce,ae.startTime-$)}}var ye=!1,R=-1,x=5,N=-1;function O(){return I?!0:!(i.unstable_now()-N<x)}function L(){if(I=!1,ye){var $=i.unstable_now();N=$;var ae=!0;try{e:{C=!1,P&&(P=!1,J(R),R=-1),k=!0;var fe=b;try{t:{for(oe($),A=t(g);A!==null&&!(A.expirationTime>$&&O());){var Ve=A.callback;if(typeof Ve=="function"){A.callback=null,b=A.priorityLevel;var M=Ve(A.expirationTime<=$);if($=i.unstable_now(),typeof M=="function"){A.callback=M,oe($),ae=!0;break t}A===t(g)&&s(g),oe($)}else s(g);A=t(g)}if(A!==null)ae=!0;else{var ie=t(y);ie!==null&&it(ce,ie.startTime-$),ae=!1}}break e}finally{A=null,b=fe,k=!1}ae=void 0}}finally{ae?B():ye=!1}}}var B;if(typeof X=="function")B=function(){X(L)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,wt=D.port2;D.port1.onmessage=L,B=function(){wt.postMessage(null)}}else B=function(){G(L,0)};function it($,ae){R=G(function(){$(i.unstable_now())},ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function($){$.callback=null},i.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<$?Math.floor(1e3/$):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function($){switch(b){case 1:case 2:case 3:var ae=3;break;default:ae=b}var fe=b;b=ae;try{return $()}finally{b=fe}},i.unstable_requestPaint=function(){I=!0},i.unstable_runWithPriority=function($,ae){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var fe=b;b=$;try{return ae()}finally{b=fe}},i.unstable_scheduleCallback=function($,ae,fe){var Ve=i.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ve+fe:Ve):fe=Ve,$){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=fe+M,$={id:_++,callback:ae,priorityLevel:$,startTime:fe,expirationTime:M,sortIndex:-1},fe>Ve?($.sortIndex=fe,e(y,$),t(g)===null&&$===t(y)&&(P?(J(R),R=-1):P=!0,it(ce,fe-Ve))):($.sortIndex=M,e(g,$),C||k||(C=!0,ye||(ye=!0,B()))),$},i.unstable_shouldYield=O,i.unstable_wrapCallback=function($){var ae=b;return function(){var fe=b;b=ae;try{return $.apply(this,arguments)}finally{b=fe}}}}(wm)),wm}var F_;function OA(){return F_||(F_=1,Tm.exports=kA()),Tm.exports}var bm={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function PA(){if(G_)return en;G_=1;var i=gp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,_){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:g,containerInfo:y,implementation:_}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,en.createPortal=function(g,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,_)},en.flushSync=function(g){var y=d.T,_=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=_,s.d.f()}},en.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},en.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},en.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var _=y.as,A=m(_,y.crossOrigin),b=typeof y.integrity=="string"?y.integrity:void 0,k=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:b,fetchPriority:k}):_==="script"&&s.d.X(g,{crossOrigin:A,integrity:b,fetchPriority:k,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},en.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=m(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},en.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,A=m(_,y.crossOrigin);s.d.L(g,_,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},en.preloadModule=function(g,y){if(typeof g=="string")if(y){var _=m(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},en.requestFormReset=function(g){s.d.r(g)},en.unstable_batchedUpdates=function(g,y){return g(y)},en.useFormState=function(g,y,_){return d.H.useFormState(g,y,_)},en.useFormStatus=function(){return d.H.useHostTransitionStatus()},en.version="19.1.0",en}var Y_;function MA(){if(Y_)return bm.exports;Y_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),bm.exports=PA(),bm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function VA(){if(K_)return Gl;K_=1;var i=OA(),e=gp(),t=MA();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function d(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(s(188))}function g(n){var r=n.alternate;if(!r){if(r=c(n),r===null)throw Error(s(188));return r!==n?null:n}for(var a=n,l=r;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return m(f),n;if(p===l)return m(f),r;p=p.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=p;else{for(var T=!1,w=f.child;w;){if(w===a){T=!0,a=f,l=p;break}if(w===l){T=!0,l=f,a=p;break}w=w.sibling}if(!T){for(w=p.child;w;){if(w===a){T=!0,a=p,l=f;break}if(w===l){T=!0,l=p,a=f;break}w=w.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:r}function y(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=y(n),r!==null)return r;n=n.sibling}return null}var _=Object.assign,A=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),J=Symbol.for("react.consumer"),X=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(n){return n===null||typeof n!="object"?null:(n=L&&n[L]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function wt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case I:return"Profiler";case P:return"StrictMode";case ce:return"Suspense";case ye:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case k:return"Portal";case X:return(n.displayName||"Context")+".Provider";case J:return(n._context.displayName||"Context")+".Consumer";case oe:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return r=n.displayName||null,r!==null?r:wt(n.type)||"Memo";case x:r=n._payload,n=n._init;try{return wt(n(r))}catch{}}return null}var it=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Ve=[],M=-1;function ie(n){return{current:n}}function le(n){0>M||(n.current=Ve[M],Ve[M]=null,M--)}function re(n,r){M++,Ve[M]=n.current,n.current=r}var ge=ie(null),Ce=ie(null),Te=ie(null),yt=ie(null);function Ye(n,r){switch(re(Te,r),re(Ce,n),re(ge,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?f_(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=f_(r),n=m_(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}le(ge),re(ge,n)}function _n(){le(ge),le(Ce),le(Te)}function $n(n){n.memoizedState!==null&&re(yt,n);var r=ge.current,a=m_(r,n.type);r!==a&&(re(Ce,n),re(ge,a))}function kn(n){Ce.current===n&&(le(ge),le(Ce)),yt.current===n&&(le(yt),Ll._currentValue=fe)}var oi=Object.prototype.hasOwnProperty,li=i.unstable_scheduleCallback,ci=i.unstable_cancelCallback,Cr=i.unstable_shouldYield,Se=i.unstable_requestPaint,et=i.unstable_now,As=i.unstable_getCurrentPriorityLevel,Ui=i.unstable_ImmediatePriority,Li=i.unstable_UserBlockingPriority,En=i.unstable_NormalPriority,Ss=i.unstable_LowPriority,Bi=i.unstable_IdlePriority,an=i.log,Mt=i.unstable_setDisableYieldValue,ht=null,Ke=null;function Tn(n){if(typeof an=="function"&&Mt(n),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(ht,n)}catch{}}var Zt=Math.clz32?Math.clz32:xs,Pc=Math.log,_d=Math.LN2;function xs(n){return n>>>=0,n===0?32:31-(Pc(n)/_d|0)|0}var Rs=256,Cs=4194304;function Xn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ea(n,r,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,p=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var w=l&134217727;return w!==0?(l=w&~p,l!==0?f=Xn(l):(T&=w,T!==0?f=Xn(T):a||(a=w&~n,a!==0&&(f=Xn(a))))):(w=l&~p,w!==0?f=Xn(w):T!==0?f=Xn(T):a||(a=l&~n,a!==0&&(f=Xn(a)))),f===0?0:r!==0&&r!==f&&(r&p)===0&&(p=f&-f,a=r&-r,p>=a||p===32&&(a&4194048)!==0)?r:f}function Ns(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Lo(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bo(){var n=Rs;return Rs<<=1,(Rs&4194048)===0&&(Rs=256),n}function zo(){var n=Cs;return Cs<<=1,(Cs&62914560)===0&&(Cs=4194304),n}function zi(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function qi(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function qo(n,r,a,l,f,p){var T=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var w=n.entanglements,j=n.expirationTimes,F=n.hiddenUpdates;for(a=T&~a;0<a;){var W=31-Zt(a),te=1<<W;w[W]=0,j[W]=-1;var Y=F[W];if(Y!==null)for(F[W]=null,W=0;W<Y.length;W++){var K=Y[W];K!==null&&(K.lane&=-536870913)}a&=~te}l!==0&&ui(n,l,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(T&~r))}function ui(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var l=31-Zt(r);n.entangledLanes|=r,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function Ho(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var l=31-Zt(a),f=1<<l;f&r|n[l]&r&&(n[l]|=r),a&=~f}}function Nr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ta(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ir(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:k_(n.type))}function Mc(n,r){var a=ae.p;try{return ae.p=n,r()}finally{ae.p=a}}var at=Math.random().toString(36).slice(2),Nt="__reactFiber$"+at,bt="__reactProps$"+at,On="__reactContainer$"+at,Fo="__reactEvents$"+at,Ed="__reactListeners$"+at,jr="__reactHandles$"+at,Vc="__reactResources$"+at,Is="__reactMarker$"+at;function Dr(n){delete n[Nt],delete n[bt],delete n[Fo],delete n[Ed],delete n[jr]}function Hi(n){var r=n[Nt];if(r)return r;for(var a=n.parentNode;a;){if(r=a[On]||a[Nt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=v_(n);n!==null;){if(a=n[Nt])return a;n=v_(n)}return r}n=a,a=n.parentNode}return null}function hi(n){if(n=n[Nt]||n[On]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function di(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function on(n){var r=n[Vc];return r||(r=n[Vc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function vt(n){n[Is]=!0}var Go=new Set,wa={};function Wn(n,r){Fi(n,r),Fi(n+"Capture",r)}function Fi(n,r){for(wa[n]=r,n=0;n<r.length;n++)Go.add(r[n])}var Uc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lc={},js={};function Bc(n){return oi.call(js,n)?!0:oi.call(Lc,n)?!1:Uc.test(n)?js[n]=!0:(Lc[n]=!0,!1)}function kr(n,r,a){if(Bc(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function fi(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function Ft(n,r,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+l)}}var Ds,zc;function Gi(n){if(Ds===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ds=r&&r[1]||"",zc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ds+n+zc}var ba=!1;function Aa(n,r){if(!n||ba)return"";ba=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(K){var Y=K}Reflect.construct(n,[],te)}else{try{te.call()}catch(K){Y=K}n.call(te.prototype)}}else{try{throw Error()}catch(K){Y=K}(te=n())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),T=p[0],w=p[1];if(T&&w){var j=T.split(`
`),F=w.split(`
`);for(f=l=0;l<j.length&&!j[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===j.length||f===F.length)for(l=j.length-1,f=F.length-1;1<=l&&0<=f&&j[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(j[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||j[l]!==F[f]){var W=`
`+j[l].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=l&&0<=f);break}}}finally{ba=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Gi(a):""}function Yo(n){switch(n.tag){case 26:case 27:case 5:return Gi(n.type);case 16:return Gi("Lazy");case 13:return Gi("Suspense");case 19:return Gi("SuspenseList");case 0:case 15:return Aa(n.type,!1);case 11:return Aa(n.type.render,!1);case 1:return Aa(n.type,!0);case 31:return Gi("Activity");default:return""}}function Sa(n){try{var r="";do r+=Yo(n),n=n.return;while(n);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ln(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ko(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Td(n){var r=Ko(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),l=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(T){l=""+T,p.call(this,T)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function xa(n){n._valueTracker||(n._valueTracker=Td(n))}function Qo(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return n&&(l=Ko(n)?n.checked?"true":"false":n.value),n=l,n!==a?(r.setValue(n),!0):!1}function ks(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var wd=/[\n"\\]/g;function At(n){return n.replace(wd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function wn(n,r,a,l,f,p,T,w){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),r!=null?T==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+ln(r)):n.value!==""+ln(r)&&(n.value=""+ln(r)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),r!=null?Or(n,T,ln(r)):a!=null?Or(n,T,ln(a)):l!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+ln(w):n.removeAttribute("name")}function Os(n,r,a,l,f,p,T,w){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),r!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||r!=null))return;a=a!=null?""+ln(a):"",r=r!=null?""+ln(r):a,w||r===n.value||(n.value=r),n.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=w?n.checked:!!l,n.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T)}function Or(n,r,a){r==="number"&&ks(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Yi(n,r,a,l){if(n=n.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=r.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+ln(a),r=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Xe(n,r,a){if(r!=null&&(r=""+ln(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+ln(a):""}function Ps(n,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(it(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=ln(r),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Pn(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Ms=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qc(n,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":l?n.setProperty(r,a):typeof a!="number"||a===0||Ms.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function $o(n,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&qc(n,f,l)}else for(var p in r)r.hasOwnProperty(p)&&qc(n,p,r[p])}function Xo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ad=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ra(n){return Ad.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Ki=null;function Mn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Qi=null,$i=null;function Wo(n){var r=hi(n);if(r&&(n=r.stateNode)){var a=n[bt]||null;e:switch(n=r.stateNode,r.type){case"input":if(wn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+At(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==n&&l.form===n.form){var f=l[bt]||null;if(!f)throw Error(s(90));wn(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===n.form&&Qo(l)}break e;case"textarea":Xe(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Yi(n,!!a.multiple,r,!1)}}}var mi=!1;function Hc(n,r,a){if(mi)return n(r,a);mi=!0;try{var l=n(r);return l}finally{if(mi=!1,(Qi!==null||$i!==null)&&(Mu(),Qi&&(r=Qi,n=$i,$i=Qi=null,Wo(r),n)))for(r=0;r<n.length;r++)Wo(n[r])}}function Vs(n,r){var a=n.stateNode;if(a===null)return null;var l=a[bt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vn=!1;if(Zn)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){Vn=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{Vn=!1}var pi=null,Pr=null,Xi=null;function Zo(){if(Xi)return Xi;var n,r=Pr,a=r.length,l,f="value"in pi?pi.value:pi.textContent,p=f.length;for(n=0;n<a&&r[n]===f[n];n++);var T=a-n;for(l=1;l<=T&&r[a-l]===f[p-l];l++);return Xi=f.slice(n,1<l?1-l:void 0)}function gi(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function yi(){return!0}function Jo(){return!1}function Vt(n){function r(a,l,f,p,T){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?yi:Jo,this.isPropagationStopped=Jo,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=yi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=yi)},persist:function(){},isPersistent:yi}),r}var Fe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=Vt(Fe),Ls=_({},Fe,{view:0,detail:0}),Fc=Vt(Ls),Na,Ia,vi,Bs=_({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==vi&&(vi&&n.type==="mousemove"?(Na=n.screenX-vi.screenX,Ia=n.screenY-vi.screenY):Ia=Na=0,vi=n),Na)},movementY:function(n){return"movementY"in n?n.movementY:Ia}}),Un=Vt(Bs),Gc=_({},Bs,{dataTransfer:0}),Sd=Vt(Gc),zs=_({},Ls,{relatedTarget:0}),ja=Vt(zs),el=_({},Fe,{animationName:0,elapsedTime:0,pseudoElement:0}),Da=Vt(el),Yc=_({},Fe,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ka=Vt(Yc),xd=_({},Fe,{data:0}),tl=Vt(xd),qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Qc[n])?!!r[n]:!1}function Hs(){return nl}var $c=_({},Ls,{key:function(n){if(n.key){var r=qs[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=gi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Kc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hs,charCode:function(n){return n.type==="keypress"?gi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?gi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Oa=Vt($c),Xc=_({},Bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),il=Vt(Xc),Wi=_({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hs}),Wc=Vt(Wi),Zc=_({},Fe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jc=Vt(Zc),eu=_({},Bs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Pa=Vt(eu),cn=_({},Fe,{newState:0,oldState:0}),tu=Vt(cn),nu=[9,13,27,32],_i=Zn&&"CompositionEvent"in window,u=null;Zn&&"documentMode"in document&&(u=document.documentMode);var v=Zn&&"TextEvent"in window&&!u,E=Zn&&(!_i||u&&8<u&&11>=u),S=" ",q=!1;function Q(n,r){switch(n){case"keyup":return nu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function se(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ue=!1;function It(n,r){switch(n){case"compositionend":return se(r);case"keypress":return r.which!==32?null:(q=!0,S);case"textInput":return n=r.data,n===S&&q?null:n;default:return null}}function Le(n,r){if(Ue)return n==="compositionend"||!_i&&Q(n,r)?(n=Zo(),Xi=Pr=pi=null,Ue=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return E&&r.locale!=="ko"?null:r.data;default:return null}}var Ut={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jt(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Ut[n.type]:r==="textarea"}function Zi(n,r,a,l){Qi?$i?$i.push(l):$i=[l]:Qi=l,r=qu(r,"onChange"),0<r.length&&(a=new Ca("onChange","change",null,a,l),n.push({event:a,listeners:r}))}var Gt=null,Ei=null;function rl(n){l_(n,0)}function iu(n){var r=di(n);if(Qo(r))return n}function Ng(n,r){if(n==="change")return r}var Ig=!1;if(Zn){var Rd;if(Zn){var Cd="oninput"in document;if(!Cd){var jg=document.createElement("div");jg.setAttribute("oninput","return;"),Cd=typeof jg.oninput=="function"}Rd=Cd}else Rd=!1;Ig=Rd&&(!document.documentMode||9<document.documentMode)}function Dg(){Gt&&(Gt.detachEvent("onpropertychange",kg),Ei=Gt=null)}function kg(n){if(n.propertyName==="value"&&iu(Ei)){var r=[];Zi(r,Ei,n,Mn(n)),Hc(rl,r)}}function a1(n,r,a){n==="focusin"?(Dg(),Gt=r,Ei=a,Gt.attachEvent("onpropertychange",kg)):n==="focusout"&&Dg()}function o1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return iu(Ei)}function l1(n,r){if(n==="click")return iu(r)}function c1(n,r){if(n==="input"||n==="change")return iu(r)}function u1(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var bn=typeof Object.is=="function"?Object.is:u1;function sl(n,r){if(bn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!oi.call(r,f)||!bn(n[f],r[f]))return!1}return!0}function Og(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Pg(n,r){var a=Og(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=r&&l>=r)return{node:a,offset:r-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Og(a)}}function Mg(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Mg(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Vg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=ks(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=ks(n.document)}return r}function Nd(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var h1=Zn&&"documentMode"in document&&11>=document.documentMode,Ma=null,Id=null,al=null,jd=!1;function Ug(n,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;jd||Ma==null||Ma!==ks(l)||(l=Ma,"selectionStart"in l&&Nd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),al&&sl(al,l)||(al=l,l=qu(Id,"onSelect"),0<l.length&&(r=new Ca("onSelect","select",null,r,a),n.push({event:r,listeners:l}),r.target=Ma)))}function Fs(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Va={animationend:Fs("Animation","AnimationEnd"),animationiteration:Fs("Animation","AnimationIteration"),animationstart:Fs("Animation","AnimationStart"),transitionrun:Fs("Transition","TransitionRun"),transitionstart:Fs("Transition","TransitionStart"),transitioncancel:Fs("Transition","TransitionCancel"),transitionend:Fs("Transition","TransitionEnd")},Dd={},Lg={};Zn&&(Lg=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function Gs(n){if(Dd[n])return Dd[n];if(!Va[n])return n;var r=Va[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Lg)return Dd[n]=r[a];return n}var Bg=Gs("animationend"),zg=Gs("animationiteration"),qg=Gs("animationstart"),d1=Gs("transitionrun"),f1=Gs("transitionstart"),m1=Gs("transitioncancel"),Hg=Gs("transitionend"),Fg=new Map,kd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kd.push("scrollEnd");function Jn(n,r){Fg.set(n,r),Wn(r,[n])}var Gg=new WeakMap;function Ln(n,r){if(typeof n=="object"&&n!==null){var a=Gg.get(n);return a!==void 0?a:(r={value:n,source:r,stack:Sa(r)},Gg.set(n,r),r)}return{value:n,source:r,stack:Sa(r)}}var Bn=[],Ua=0,Od=0;function ru(){for(var n=Ua,r=Od=Ua=0;r<n;){var a=Bn[r];Bn[r++]=null;var l=Bn[r];Bn[r++]=null;var f=Bn[r];Bn[r++]=null;var p=Bn[r];if(Bn[r++]=null,l!==null&&f!==null){var T=l.pending;T===null?f.next=f:(f.next=T.next,T.next=f),l.pending=f}p!==0&&Yg(a,f,p)}}function su(n,r,a,l){Bn[Ua++]=n,Bn[Ua++]=r,Bn[Ua++]=a,Bn[Ua++]=l,Od|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Pd(n,r,a,l){return su(n,r,a,l),au(n)}function La(n,r){return su(n,null,null,r),au(n)}function Yg(n,r,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,p=n.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&r!==null&&(f=31-Zt(a),n=p.hiddenUpdates,l=n[f],l===null?n[f]=[r]:l.push(r),r.lane=a|536870912),p):null}function au(n){if(50<jl)throw jl=0,qf=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Ba={};function p1(n,r,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(n,r,a,l){return new p1(n,r,a,l)}function Md(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ji(n,r){var a=n.alternate;return a===null?(a=An(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Kg(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function ou(n,r,a,l,f,p){var T=0;if(l=n,typeof n=="function")Md(n)&&(T=1);else if(typeof n=="string")T=yA(n,a,ge.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=An(31,a,r,f),n.elementType=N,n.lanes=p,n;case C:return Ys(a.children,f,p,r);case P:T=8,f|=24;break;case I:return n=An(12,a,r,f|2),n.elementType=I,n.lanes=p,n;case ce:return n=An(13,a,r,f),n.elementType=ce,n.lanes=p,n;case ye:return n=An(19,a,r,f),n.elementType=ye,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case G:case X:T=10;break e;case J:T=9;break e;case oe:T=11;break e;case R:T=14;break e;case x:T=16,l=null;break e}T=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return r=An(T,a,r,f),r.elementType=n,r.type=l,r.lanes=p,r}function Ys(n,r,a,l){return n=An(7,n,l,r),n.lanes=a,n}function Vd(n,r,a){return n=An(6,n,null,r),n.lanes=a,n}function Ud(n,r,a){return r=An(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var za=[],qa=0,lu=null,cu=0,zn=[],qn=0,Ks=null,er=1,tr="";function Qs(n,r){za[qa++]=cu,za[qa++]=lu,lu=n,cu=r}function Qg(n,r,a){zn[qn++]=er,zn[qn++]=tr,zn[qn++]=Ks,Ks=n;var l=er;n=tr;var f=32-Zt(l)-1;l&=~(1<<f),a+=1;var p=32-Zt(r)+f;if(30<p){var T=f-f%5;p=(l&(1<<T)-1).toString(32),l>>=T,f-=T,er=1<<32-Zt(r)+f|a<<f|l,tr=p+n}else er=1<<p|a<<f|l,tr=n}function Ld(n){n.return!==null&&(Qs(n,1),Qg(n,1,0))}function Bd(n){for(;n===lu;)lu=za[--qa],za[qa]=null,cu=za[--qa],za[qa]=null;for(;n===Ks;)Ks=zn[--qn],zn[qn]=null,tr=zn[--qn],zn[qn]=null,er=zn[--qn],zn[qn]=null}var un=null,dt=null,He=!1,$s=null,Ti=!1,zd=Error(s(519));function Xs(n){var r=Error(s(418,""));throw cl(Ln(r,n)),zd}function $g(n){var r=n.stateNode,a=n.type,l=n.memoizedProps;switch(r[Nt]=n,r[bt]=l,a){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(a=0;a<kl.length;a++)Oe(kl[a],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),Os(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),xa(r);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),Ps(r,l.value,l.defaultValue,l.children),xa(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||d_(r.textContent,a)?(l.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),l.onScroll!=null&&Oe("scroll",r),l.onScrollEnd!=null&&Oe("scrollend",r),l.onClick!=null&&(r.onclick=Hu),r=!0):r=!1,r||Xs(n)}function Xg(n){for(un=n.return;un;)switch(un.tag){case 5:case 13:Ti=!1;return;case 27:case 3:Ti=!0;return;default:un=un.return}}function ol(n){if(n!==un)return!1;if(!He)return Xg(n),He=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||rm(n.type,n.memoizedProps)),a=!a),a&&dt&&Xs(n),Xg(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(r===0){dt=ti(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;n=n.nextSibling}dt=null}}else r===27?(r=dt,Wr(n.type)?(n=lm,lm=null,dt=n):dt=r):dt=un?ti(n.stateNode.nextSibling):null;return!0}function ll(){dt=un=null,He=!1}function Wg(){var n=$s;return n!==null&&(pn===null?pn=n:pn.push.apply(pn,n),$s=null),n}function cl(n){$s===null?$s=[n]:$s.push(n)}var qd=ie(null),Ws=null,nr=null;function Mr(n,r,a){re(qd,r._currentValue),r._currentValue=a}function ir(n){n._currentValue=qd.current,le(qd)}function Hd(n,r,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),n===a)break;n=n.return}}function Fd(n,r,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var T=f.child;p=p.firstContext;e:for(;p!==null;){var w=p;p=f;for(var j=0;j<r.length;j++)if(w.context===r[j]){p.lanes|=a,w=p.alternate,w!==null&&(w.lanes|=a),Hd(p.return,a,n),l||(T=null);break e}p=w.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(s(341));T.lanes|=a,p=T.alternate,p!==null&&(p.lanes|=a),Hd(T,a,n),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===n){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function ul(n,r,a,l){n=null;for(var f=r,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var w=f.type;bn(f.pendingProps.value,T.value)||(n!==null?n.push(w):n=[w])}}else if(f===yt.current){if(T=f.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Ll):n=[Ll])}f=f.return}n!==null&&Fd(r,n,a,l),r.flags|=262144}function uu(n){for(n=n.firstContext;n!==null;){if(!bn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Zs(n){Ws=n,nr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Jt(n){return Zg(Ws,n)}function hu(n,r){return Ws===null&&Zs(n),Zg(n,r)}function Zg(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},nr===null){if(n===null)throw Error(s(308));nr=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else nr=nr.next=r;return a}var g1=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},y1=i.unstable_scheduleCallback,v1=i.unstable_NormalPriority,Dt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gd(){return{controller:new g1,data:new Map,refCount:0}}function hl(n){n.refCount--,n.refCount===0&&y1(v1,function(){n.controller.abort()})}var dl=null,Yd=0,Ha=0,Fa=null;function _1(n,r){if(dl===null){var a=dl=[];Yd=0,Ha=$f(),Fa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Yd++,r.then(Jg,Jg),r}function Jg(){if(--Yd===0&&dl!==null){Fa!==null&&(Fa.status="fulfilled");var n=dl;dl=null,Ha=0,Fa=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function E1(n,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var ey=$.S;$.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&_1(n,r),ey!==null&&ey(n,r)};var Js=ie(null);function Kd(){var n=Js.current;return n!==null?n:nt.pooledCache}function du(n,r){r===null?re(Js,Js.current):re(Js,r.pool)}function ty(){var n=Kd();return n===null?null:{parent:Dt._currentValue,pool:n}}var fl=Error(s(460)),ny=Error(s(474)),fu=Error(s(542)),Qd={then:function(){}};function iy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function mu(){}function ry(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(mu,mu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,ay(n),n;default:if(typeof r.status=="string")r.then(mu,mu);else{if(n=nt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,ay(n),n}throw ml=r,fl}}var ml=null;function sy(){if(ml===null)throw Error(s(459));var n=ml;return ml=null,n}function ay(n){if(n===fl||n===fu)throw Error(s(483))}var Vr=!1;function $d(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ur(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Lr(n,r,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=au(n),Yg(n,null,a),r}return su(n,l,r,a),au(n)}function pl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,Ho(n,a)}}function Wd(n,r){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=T:p=p.next=T,a=a.next}while(a!==null);p===null?f=p=r:p=p.next=r}else f=p=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var Zd=!1;function gl(){if(Zd){var n=Fa;if(n!==null)throw n}}function yl(n,r,a,l){Zd=!1;var f=n.updateQueue;Vr=!1;var p=f.firstBaseUpdate,T=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var j=w,F=j.next;j.next=null,T===null?p=F:T.next=F,T=j;var W=n.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==T&&(w===null?W.firstBaseUpdate=F:w.next=F,W.lastBaseUpdate=j))}if(p!==null){var te=f.baseState;T=0,W=F=j=null,w=p;do{var Y=w.lane&-536870913,K=Y!==w.lane;if(K?(Be&Y)===Y:(l&Y)===Y){Y!==0&&Y===Ha&&(Zd=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ae=n,_e=w;Y=r;var Je=a;switch(_e.tag){case 1:if(Ae=_e.payload,typeof Ae=="function"){te=Ae.call(Je,te,Y);break e}te=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=_e.payload,Y=typeof Ae=="function"?Ae.call(Je,te,Y):Ae,Y==null)break e;te=_({},te,Y);break e;case 2:Vr=!0}}Y=w.callback,Y!==null&&(n.flags|=64,K&&(n.flags|=8192),K=f.callbacks,K===null?f.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(F=W=K,j=te):W=W.next=K,T|=Y;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;K=w,w=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);W===null&&(j=te),f.baseState=j,f.firstBaseUpdate=F,f.lastBaseUpdate=W,p===null&&(f.shared.lanes=0),Kr|=T,n.lanes=T,n.memoizedState=te}}function oy(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function ly(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)oy(a[n],r)}var Ga=ie(null),pu=ie(0);function cy(n,r){n=ur,re(pu,n),re(Ga,r),ur=n|r.baseLanes}function Jd(){re(pu,ur),re(Ga,Ga.current)}function ef(){ur=pu.current,le(Ga),le(pu)}var Br=0,Ie=null,We=null,St=null,gu=!1,Ya=!1,ea=!1,yu=0,vl=0,Ka=null,T1=0;function _t(){throw Error(s(321))}function tf(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!bn(n[a],r[a]))return!1;return!0}function nf(n,r,a,l,f,p){return Br=p,Ie=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=n===null||n.memoizedState===null?Yy:Ky,ea=!1,p=a(l,f),ea=!1,Ya&&(p=hy(r,a,l,f)),uy(n),p}function uy(n){$.H=bu;var r=We!==null&&We.next!==null;if(Br=0,St=We=Ie=null,gu=!1,vl=0,Ka=null,r)throw Error(s(300));n===null||Lt||(n=n.dependencies,n!==null&&uu(n)&&(Lt=!0))}function hy(n,r,a,l){Ie=n;var f=0;do{if(Ya&&(Ka=null),vl=0,Ya=!1,25<=f)throw Error(s(301));if(f+=1,St=We=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}$.H=C1,p=r(a,l)}while(Ya);return p}function w1(){var n=$.H,r=n.useState()[0];return r=typeof r.then=="function"?_l(r):r,n=n.useState()[0],(We!==null?We.memoizedState:null)!==n&&(Ie.flags|=1024),r}function rf(){var n=yu!==0;return yu=0,n}function sf(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function af(n){if(gu){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}gu=!1}Br=0,St=We=Ie=null,Ya=!1,vl=yu=0,Ka=null}function fn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Ie.memoizedState=St=n:St=St.next=n,St}function xt(){if(We===null){var n=Ie.alternate;n=n!==null?n.memoizedState:null}else n=We.next;var r=St===null?Ie.memoizedState:St.next;if(r!==null)St=r,We=n;else{if(n===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));We=n,n={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},St===null?Ie.memoizedState=St=n:St=St.next=n}return St}function of(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _l(n){var r=vl;return vl+=1,Ka===null&&(Ka=[]),n=ry(Ka,n,r),r=Ie,(St===null?r.memoizedState:St.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?Yy:Ky),n}function vu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return _l(n);if(n.$$typeof===X)return Jt(n)}throw Error(s(438,String(n)))}function lf(n){var r=null,a=Ie.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=of(),Ie.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),l=0;l<n;l++)a[l]=O;return r.index++,a}function rr(n,r){return typeof r=="function"?r(n):r}function _u(n){var r=xt();return cf(r,We,n)}function cf(n,r,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=n.baseQueue,p=l.pending;if(p!==null){if(f!==null){var T=f.next;f.next=p.next,p.next=T}r.baseQueue=f=p,l.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{r=f.next;var w=T=null,j=null,F=r,W=!1;do{var te=F.lane&-536870913;if(te!==F.lane?(Be&te)===te:(Br&te)===te){var Y=F.revertLane;if(Y===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),te===Ha&&(W=!0);else if((Br&Y)===Y){F=F.next,Y===Ha&&(W=!0);continue}else te={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},j===null?(w=j=te,T=p):j=j.next=te,Ie.lanes|=Y,Kr|=Y;te=F.action,ea&&a(p,te),p=F.hasEagerState?F.eagerState:a(p,te)}else Y={lane:te,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},j===null?(w=j=Y,T=p):j=j.next=Y,Ie.lanes|=te,Kr|=te;F=F.next}while(F!==null&&F!==r);if(j===null?T=p:j.next=w,!bn(p,n.memoizedState)&&(Lt=!0,W&&(a=Fa,a!==null)))throw a;n.memoizedState=p,n.baseState=T,n.baseQueue=j,l.lastRenderedState=p}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function uf(n){var r=xt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,p=r.memoizedState;if(f!==null){a.pending=null;var T=f=f.next;do p=n(p,T.action),T=T.next;while(T!==f);bn(p,r.memoizedState)||(Lt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,l]}function dy(n,r,a){var l=Ie,f=xt(),p=He;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=r();var T=!bn((We||f).memoizedState,a);T&&(f.memoizedState=a,Lt=!0),f=f.queue;var w=py.bind(null,l,f,n);if(El(2048,8,w,[n]),f.getSnapshot!==r||T||St!==null&&St.memoizedState.tag&1){if(l.flags|=2048,Qa(9,Eu(),my.bind(null,l,f,a,r),null),nt===null)throw Error(s(349));p||(Br&124)!==0||fy(l,r,a)}return a}function fy(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Ie.updateQueue,r===null?(r=of(),Ie.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function my(n,r,a,l){r.value=a,r.getSnapshot=l,gy(r)&&yy(n)}function py(n,r,a){return a(function(){gy(r)&&yy(n)})}function gy(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!bn(n,a)}catch{return!0}}function yy(n){var r=La(n,2);r!==null&&Nn(r,n,2)}function hf(n){var r=fn();if(typeof n=="function"){var a=n;if(n=a(),ea){Tn(!0);try{a()}finally{Tn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:n},r}function vy(n,r,a,l){return n.baseState=a,cf(n,We,typeof l=="function"?l:rr)}function b1(n,r,a,l,f){if(wu(n))throw Error(s(485));if(n=r.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};$.T!==null?a(!0):p.isTransition=!1,l(p),a=r.pending,a===null?(p.next=r.pending=p,_y(r,p)):(p.next=a.next,r.pending=a.next=p)}}function _y(n,r){var a=r.action,l=r.payload,f=n.state;if(r.isTransition){var p=$.T,T={};$.T=T;try{var w=a(f,l),j=$.S;j!==null&&j(T,w),Ey(n,r,w)}catch(F){df(n,r,F)}finally{$.T=p}}else try{p=a(f,l),Ey(n,r,p)}catch(F){df(n,r,F)}}function Ey(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Ty(n,r,l)},function(l){return df(n,r,l)}):Ty(n,r,a)}function Ty(n,r,a){r.status="fulfilled",r.value=a,wy(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,_y(n,a)))}function df(n,r,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,wy(r),r=r.next;while(r!==l)}n.action=null}function wy(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function by(n,r){return r}function Ay(n,r){if(He){var a=nt.formState;if(a!==null){e:{var l=Ie;if(He){if(dt){t:{for(var f=dt,p=Ti;f.nodeType!==8;){if(!p){f=null;break t}if(f=ti(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){dt=ti(f.nextSibling),l=f.data==="F!";break e}}Xs(l)}l=!1}l&&(r=a[0])}}return a=fn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:by,lastRenderedState:r},a.queue=l,a=Hy.bind(null,Ie,l),l.dispatch=a,l=hf(!1),p=yf.bind(null,Ie,!1,l.queue),l=fn(),f={state:r,dispatch:null,action:n,pending:null},l.queue=f,a=b1.bind(null,Ie,f,p,a),f.dispatch=a,l.memoizedState=n,[r,a,!1]}function Sy(n){var r=xt();return xy(r,We,n)}function xy(n,r,a){if(r=cf(n,r,by)[0],n=_u(rr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=_l(r)}catch(T){throw T===fl?fu:T}else l=r;r=xt();var f=r.queue,p=f.dispatch;return a!==r.memoizedState&&(Ie.flags|=2048,Qa(9,Eu(),A1.bind(null,f,a),null)),[l,p,n]}function A1(n,r){n.action=r}function Ry(n){var r=xt(),a=We;if(a!==null)return xy(r,a,n);xt(),r=r.memoizedState,a=xt();var l=a.queue.dispatch;return a.memoizedState=n,[r,l,!1]}function Qa(n,r,a,l){return n={tag:n,create:a,deps:l,inst:r,next:null},r=Ie.updateQueue,r===null&&(r=of(),Ie.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,r.lastEffect=n),n}function Eu(){return{destroy:void 0,resource:void 0}}function Cy(){return xt().memoizedState}function Tu(n,r,a,l){var f=fn();l=l===void 0?null:l,Ie.flags|=n,f.memoizedState=Qa(1|r,Eu(),a,l)}function El(n,r,a,l){var f=xt();l=l===void 0?null:l;var p=f.memoizedState.inst;We!==null&&l!==null&&tf(l,We.memoizedState.deps)?f.memoizedState=Qa(r,p,a,l):(Ie.flags|=n,f.memoizedState=Qa(1|r,p,a,l))}function Ny(n,r){Tu(8390656,8,n,r)}function Iy(n,r){El(2048,8,n,r)}function jy(n,r){return El(4,2,n,r)}function Dy(n,r){return El(4,4,n,r)}function ky(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Oy(n,r,a){a=a!=null?a.concat([n]):null,El(4,4,ky.bind(null,r,n),a)}function ff(){}function Py(n,r){var a=xt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&tf(r,l[1])?l[0]:(a.memoizedState=[n,r],n)}function My(n,r){var a=xt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&tf(r,l[1]))return l[0];if(l=n(),ea){Tn(!0);try{n()}finally{Tn(!1)}}return a.memoizedState=[l,r],l}function mf(n,r,a){return a===void 0||(Br&1073741824)!==0?n.memoizedState=r:(n.memoizedState=a,n=Lv(),Ie.lanes|=n,Kr|=n,a)}function Vy(n,r,a,l){return bn(a,r)?a:Ga.current!==null?(n=mf(n,a,l),bn(n,r)||(Lt=!0),n):(Br&42)===0?(Lt=!0,n.memoizedState=a):(n=Lv(),Ie.lanes|=n,Kr|=n,r)}function Uy(n,r,a,l,f){var p=ae.p;ae.p=p!==0&&8>p?p:8;var T=$.T,w={};$.T=w,yf(n,!1,r,a);try{var j=f(),F=$.S;if(F!==null&&F(w,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var W=E1(j,l);Tl(n,r,W,Cn(n))}else Tl(n,r,l,Cn(n))}catch(te){Tl(n,r,{then:function(){},status:"rejected",reason:te},Cn())}finally{ae.p=p,$.T=T}}function S1(){}function pf(n,r,a,l){if(n.tag!==5)throw Error(s(476));var f=Ly(n).queue;Uy(n,f,r,fe,a===null?S1:function(){return By(n),a(l)})}function Ly(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:fe},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function By(n){var r=Ly(n).next.queue;Tl(n,r,{},Cn())}function gf(){return Jt(Ll)}function zy(){return xt().memoizedState}function qy(){return xt().memoizedState}function x1(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=Cn();n=Ur(a);var l=Lr(r,n,a);l!==null&&(Nn(l,r,a),pl(l,r,a)),r={cache:Gd()},n.payload=r;return}r=r.return}}function R1(n,r,a){var l=Cn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},wu(n)?Fy(r,a):(a=Pd(n,r,a,l),a!==null&&(Nn(a,n,l),Gy(a,r,l)))}function Hy(n,r,a){var l=Cn();Tl(n,r,a,l)}function Tl(n,r,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(wu(n))Fy(r,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var T=r.lastRenderedState,w=p(T,a);if(f.hasEagerState=!0,f.eagerState=w,bn(w,T))return su(n,r,f,0),nt===null&&ru(),!1}catch{}finally{}if(a=Pd(n,r,f,l),a!==null)return Nn(a,n,l),Gy(a,r,l),!0}return!1}function yf(n,r,a,l){if(l={lane:2,revertLane:$f(),action:l,hasEagerState:!1,eagerState:null,next:null},wu(n)){if(r)throw Error(s(479))}else r=Pd(n,a,l,2),r!==null&&Nn(r,n,2)}function wu(n){var r=n.alternate;return n===Ie||r!==null&&r===Ie}function Fy(n,r){Ya=gu=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Gy(n,r,a){if((a&4194048)!==0){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,Ho(n,a)}}var bu={readContext:Jt,use:vu,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t},Yy={readContext:Jt,use:vu,useCallback:function(n,r){return fn().memoizedState=[n,r===void 0?null:r],n},useContext:Jt,useEffect:Ny,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,Tu(4194308,4,ky.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Tu(4194308,4,n,r)},useInsertionEffect:function(n,r){Tu(4,2,n,r)},useMemo:function(n,r){var a=fn();r=r===void 0?null:r;var l=n();if(ea){Tn(!0);try{n()}finally{Tn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(n,r,a){var l=fn();if(a!==void 0){var f=a(r);if(ea){Tn(!0);try{a(r)}finally{Tn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=R1.bind(null,Ie,n),[l.memoizedState,n]},useRef:function(n){var r=fn();return n={current:n},r.memoizedState=n},useState:function(n){n=hf(n);var r=n.queue,a=Hy.bind(null,Ie,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:ff,useDeferredValue:function(n,r){var a=fn();return mf(a,n,r)},useTransition:function(){var n=hf(!1);return n=Uy.bind(null,Ie,n.queue,!0,!1),fn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var l=Ie,f=fn();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),nt===null)throw Error(s(349));(Be&124)!==0||fy(l,r,a)}f.memoizedState=a;var p={value:a,getSnapshot:r};return f.queue=p,Ny(py.bind(null,l,p,n),[n]),l.flags|=2048,Qa(9,Eu(),my.bind(null,l,p,a,r),null),a},useId:function(){var n=fn(),r=nt.identifierPrefix;if(He){var a=tr,l=er;a=(l&~(1<<32-Zt(l)-1)).toString(32)+a,r=""+r+"R"+a,a=yu++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=T1++,r=""+r+"r"+a.toString(32)+"";return n.memoizedState=r},useHostTransitionStatus:gf,useFormState:Ay,useActionState:Ay,useOptimistic:function(n){var r=fn();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=yf.bind(null,Ie,!0,a),a.dispatch=r,[n,r]},useMemoCache:lf,useCacheRefresh:function(){return fn().memoizedState=x1.bind(null,Ie)}},Ky={readContext:Jt,use:vu,useCallback:Py,useContext:Jt,useEffect:Iy,useImperativeHandle:Oy,useInsertionEffect:jy,useLayoutEffect:Dy,useMemo:My,useReducer:_u,useRef:Cy,useState:function(){return _u(rr)},useDebugValue:ff,useDeferredValue:function(n,r){var a=xt();return Vy(a,We.memoizedState,n,r)},useTransition:function(){var n=_u(rr)[0],r=xt().memoizedState;return[typeof n=="boolean"?n:_l(n),r]},useSyncExternalStore:dy,useId:zy,useHostTransitionStatus:gf,useFormState:Sy,useActionState:Sy,useOptimistic:function(n,r){var a=xt();return vy(a,We,n,r)},useMemoCache:lf,useCacheRefresh:qy},C1={readContext:Jt,use:vu,useCallback:Py,useContext:Jt,useEffect:Iy,useImperativeHandle:Oy,useInsertionEffect:jy,useLayoutEffect:Dy,useMemo:My,useReducer:uf,useRef:Cy,useState:function(){return uf(rr)},useDebugValue:ff,useDeferredValue:function(n,r){var a=xt();return We===null?mf(a,n,r):Vy(a,We.memoizedState,n,r)},useTransition:function(){var n=uf(rr)[0],r=xt().memoizedState;return[typeof n=="boolean"?n:_l(n),r]},useSyncExternalStore:dy,useId:zy,useHostTransitionStatus:gf,useFormState:Ry,useActionState:Ry,useOptimistic:function(n,r){var a=xt();return We!==null?vy(a,We,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:lf,useCacheRefresh:qy},$a=null,wl=0;function Au(n){var r=wl;return wl+=1,$a===null&&($a=[]),ry($a,n,r)}function bl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Su(n,r){throw r.$$typeof===A?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Qy(n){var r=n._init;return r(n._payload)}function $y(n){function r(z,V){if(n){var H=z.deletions;H===null?(z.deletions=[V],z.flags|=16):H.push(V)}}function a(z,V){if(!n)return null;for(;V!==null;)r(z,V),V=V.sibling;return null}function l(z){for(var V=new Map;z!==null;)z.key!==null?V.set(z.key,z):V.set(z.index,z),z=z.sibling;return V}function f(z,V){return z=Ji(z,V),z.index=0,z.sibling=null,z}function p(z,V,H){return z.index=H,n?(H=z.alternate,H!==null?(H=H.index,H<V?(z.flags|=67108866,V):H):(z.flags|=67108866,V)):(z.flags|=1048576,V)}function T(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function w(z,V,H,Z){return V===null||V.tag!==6?(V=Vd(H,z.mode,Z),V.return=z,V):(V=f(V,H),V.return=z,V)}function j(z,V,H,Z){var de=H.type;return de===C?W(z,V,H.props.children,Z,H.key):V!==null&&(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===x&&Qy(de)===V.type)?(V=f(V,H.props),bl(V,H),V.return=z,V):(V=ou(H.type,H.key,H.props,null,z.mode,Z),bl(V,H),V.return=z,V)}function F(z,V,H,Z){return V===null||V.tag!==4||V.stateNode.containerInfo!==H.containerInfo||V.stateNode.implementation!==H.implementation?(V=Ud(H,z.mode,Z),V.return=z,V):(V=f(V,H.children||[]),V.return=z,V)}function W(z,V,H,Z,de){return V===null||V.tag!==7?(V=Ys(H,z.mode,Z,de),V.return=z,V):(V=f(V,H),V.return=z,V)}function te(z,V,H){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Vd(""+V,z.mode,H),V.return=z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case b:return H=ou(V.type,V.key,V.props,null,z.mode,H),bl(H,V),H.return=z,H;case k:return V=Ud(V,z.mode,H),V.return=z,V;case x:var Z=V._init;return V=Z(V._payload),te(z,V,H)}if(it(V)||B(V))return V=Ys(V,z.mode,H,null),V.return=z,V;if(typeof V.then=="function")return te(z,Au(V),H);if(V.$$typeof===X)return te(z,hu(z,V),H);Su(z,V)}return null}function Y(z,V,H,Z){var de=V!==null?V.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return de!==null?null:w(z,V,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return H.key===de?j(z,V,H,Z):null;case k:return H.key===de?F(z,V,H,Z):null;case x:return de=H._init,H=de(H._payload),Y(z,V,H,Z)}if(it(H)||B(H))return de!==null?null:W(z,V,H,Z,null);if(typeof H.then=="function")return Y(z,V,Au(H),Z);if(H.$$typeof===X)return Y(z,V,hu(z,H),Z);Su(z,H)}return null}function K(z,V,H,Z,de){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return z=z.get(H)||null,w(V,z,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return z=z.get(Z.key===null?H:Z.key)||null,j(V,z,Z,de);case k:return z=z.get(Z.key===null?H:Z.key)||null,F(V,z,Z,de);case x:var De=Z._init;return Z=De(Z._payload),K(z,V,H,Z,de)}if(it(Z)||B(Z))return z=z.get(H)||null,W(V,z,Z,de,null);if(typeof Z.then=="function")return K(z,V,H,Au(Z),de);if(Z.$$typeof===X)return K(z,V,H,hu(V,Z),de);Su(V,Z)}return null}function Ae(z,V,H,Z){for(var de=null,De=null,me=V,Ee=V=0,zt=null;me!==null&&Ee<H.length;Ee++){me.index>Ee?(zt=me,me=null):zt=me.sibling;var qe=Y(z,me,H[Ee],Z);if(qe===null){me===null&&(me=zt);break}n&&me&&qe.alternate===null&&r(z,me),V=p(qe,V,Ee),De===null?de=qe:De.sibling=qe,De=qe,me=zt}if(Ee===H.length)return a(z,me),He&&Qs(z,Ee),de;if(me===null){for(;Ee<H.length;Ee++)me=te(z,H[Ee],Z),me!==null&&(V=p(me,V,Ee),De===null?de=me:De.sibling=me,De=me);return He&&Qs(z,Ee),de}for(me=l(me);Ee<H.length;Ee++)zt=K(me,z,Ee,H[Ee],Z),zt!==null&&(n&&zt.alternate!==null&&me.delete(zt.key===null?Ee:zt.key),V=p(zt,V,Ee),De===null?de=zt:De.sibling=zt,De=zt);return n&&me.forEach(function(ns){return r(z,ns)}),He&&Qs(z,Ee),de}function _e(z,V,H,Z){if(H==null)throw Error(s(151));for(var de=null,De=null,me=V,Ee=V=0,zt=null,qe=H.next();me!==null&&!qe.done;Ee++,qe=H.next()){me.index>Ee?(zt=me,me=null):zt=me.sibling;var ns=Y(z,me,qe.value,Z);if(ns===null){me===null&&(me=zt);break}n&&me&&ns.alternate===null&&r(z,me),V=p(ns,V,Ee),De===null?de=ns:De.sibling=ns,De=ns,me=zt}if(qe.done)return a(z,me),He&&Qs(z,Ee),de;if(me===null){for(;!qe.done;Ee++,qe=H.next())qe=te(z,qe.value,Z),qe!==null&&(V=p(qe,V,Ee),De===null?de=qe:De.sibling=qe,De=qe);return He&&Qs(z,Ee),de}for(me=l(me);!qe.done;Ee++,qe=H.next())qe=K(me,z,Ee,qe.value,Z),qe!==null&&(n&&qe.alternate!==null&&me.delete(qe.key===null?Ee:qe.key),V=p(qe,V,Ee),De===null?de=qe:De.sibling=qe,De=qe);return n&&me.forEach(function(NA){return r(z,NA)}),He&&Qs(z,Ee),de}function Je(z,V,H,Z){if(typeof H=="object"&&H!==null&&H.type===C&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case b:e:{for(var de=H.key;V!==null;){if(V.key===de){if(de=H.type,de===C){if(V.tag===7){a(z,V.sibling),Z=f(V,H.props.children),Z.return=z,z=Z;break e}}else if(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===x&&Qy(de)===V.type){a(z,V.sibling),Z=f(V,H.props),bl(Z,H),Z.return=z,z=Z;break e}a(z,V);break}else r(z,V);V=V.sibling}H.type===C?(Z=Ys(H.props.children,z.mode,Z,H.key),Z.return=z,z=Z):(Z=ou(H.type,H.key,H.props,null,z.mode,Z),bl(Z,H),Z.return=z,z=Z)}return T(z);case k:e:{for(de=H.key;V!==null;){if(V.key===de)if(V.tag===4&&V.stateNode.containerInfo===H.containerInfo&&V.stateNode.implementation===H.implementation){a(z,V.sibling),Z=f(V,H.children||[]),Z.return=z,z=Z;break e}else{a(z,V);break}else r(z,V);V=V.sibling}Z=Ud(H,z.mode,Z),Z.return=z,z=Z}return T(z);case x:return de=H._init,H=de(H._payload),Je(z,V,H,Z)}if(it(H))return Ae(z,V,H,Z);if(B(H)){if(de=B(H),typeof de!="function")throw Error(s(150));return H=de.call(H),_e(z,V,H,Z)}if(typeof H.then=="function")return Je(z,V,Au(H),Z);if(H.$$typeof===X)return Je(z,V,hu(z,H),Z);Su(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,V!==null&&V.tag===6?(a(z,V.sibling),Z=f(V,H),Z.return=z,z=Z):(a(z,V),Z=Vd(H,z.mode,Z),Z.return=z,z=Z),T(z)):a(z,V)}return function(z,V,H,Z){try{wl=0;var de=Je(z,V,H,Z);return $a=null,de}catch(me){if(me===fl||me===fu)throw me;var De=An(29,me,null,z.mode);return De.lanes=Z,De.return=z,De}finally{}}}var Xa=$y(!0),Xy=$y(!1),Hn=ie(null),wi=null;function zr(n){var r=n.alternate;re(kt,kt.current&1),re(Hn,n),wi===null&&(r===null||Ga.current!==null||r.memoizedState!==null)&&(wi=n)}function Wy(n){if(n.tag===22){if(re(kt,kt.current),re(Hn,n),wi===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(wi=n)}}else qr()}function qr(){re(kt,kt.current),re(Hn,Hn.current)}function sr(n){le(Hn),wi===n&&(wi=null),le(kt)}var kt=ie(0);function xu(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||om(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function vf(n,r,a,l){r=n.memoizedState,a=a(l,r),a=a==null?r:_({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var _f={enqueueSetState:function(n,r,a){n=n._reactInternals;var l=Cn(),f=Ur(l);f.payload=r,a!=null&&(f.callback=a),r=Lr(n,f,l),r!==null&&(Nn(r,n,l),pl(r,n,l))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var l=Cn(),f=Ur(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=Lr(n,f,l),r!==null&&(Nn(r,n,l),pl(r,n,l))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Cn(),l=Ur(a);l.tag=2,r!=null&&(l.callback=r),r=Lr(n,l,a),r!==null&&(Nn(r,n,a),pl(r,n,a))}};function Zy(n,r,a,l,f,p,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,p,T):r.prototype&&r.prototype.isPureReactComponent?!sl(a,l)||!sl(f,p):!0}function Jy(n,r,a,l){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==n&&_f.enqueueReplaceState(r,r.state,null)}function ta(n,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(n=n.defaultProps){a===r&&(a=_({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var Ru=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function ev(n){Ru(n)}function tv(n){console.error(n)}function nv(n){Ru(n)}function Cu(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function iv(n,r,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Ef(n,r,a){return a=Ur(a),a.tag=3,a.payload={element:null},a.callback=function(){Cu(n,r)},a}function rv(n){return n=Ur(n),n.tag=3,n}function sv(n,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;n.payload=function(){return f(p)},n.callback=function(){iv(r,a,l)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){iv(r,a,l),typeof f!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function N1(n,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ul(r,a,f,!0),a=Hn.current,a!==null){switch(a.tag){case 13:return wi===null?Ff():a.alternate===null&&ft===0&&(ft=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Qd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Yf(n,l,f)),!1;case 22:return a.flags|=65536,l===Qd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Yf(n,l,f)),!1}throw Error(s(435,a.tag))}return Yf(n,l,f),Ff(),!1}if(He)return r=Hn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==zd&&(n=Error(s(422),{cause:l}),cl(Ln(n,a)))):(l!==zd&&(r=Error(s(423),{cause:l}),cl(Ln(r,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Ln(l,a),f=Ef(n.stateNode,l,f),Wd(n,f),ft!==4&&(ft=2)),!1;var p=Error(s(520),{cause:l});if(p=Ln(p,a),Il===null?Il=[p]:Il.push(p),ft!==4&&(ft=2),r===null)return!0;l=Ln(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Ef(a.stateNode,l,n),Wd(a,n),!1;case 1:if(r=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Qr===null||!Qr.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=rv(f),sv(f,n,a,l),Wd(a,f),!1}a=a.return}while(a!==null);return!1}var av=Error(s(461)),Lt=!1;function Yt(n,r,a,l){r.child=n===null?Xy(r,null,a,l):Xa(r,n.child,a,l)}function ov(n,r,a,l,f){a=a.render;var p=r.ref;if("ref"in l){var T={};for(var w in l)w!=="ref"&&(T[w]=l[w])}else T=l;return Zs(r),l=nf(n,r,a,T,p,f),w=rf(),n!==null&&!Lt?(sf(n,r,f),ar(n,r,f)):(He&&w&&Ld(r),r.flags|=1,Yt(n,r,l,f),r.child)}function lv(n,r,a,l,f){if(n===null){var p=a.type;return typeof p=="function"&&!Md(p)&&p.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=p,cv(n,r,p,l,f)):(n=ou(a.type,null,l,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(p=n.child,!Cf(n,f)){var T=p.memoizedProps;if(a=a.compare,a=a!==null?a:sl,a(T,l)&&n.ref===r.ref)return ar(n,r,f)}return r.flags|=1,n=Ji(p,l),n.ref=r.ref,n.return=r,r.child=n}function cv(n,r,a,l,f){if(n!==null){var p=n.memoizedProps;if(sl(p,l)&&n.ref===r.ref)if(Lt=!1,r.pendingProps=l=p,Cf(n,f))(n.flags&131072)!==0&&(Lt=!0);else return r.lanes=n.lanes,ar(n,r,f)}return Tf(n,r,a,l,f)}function uv(n,r,a){var l=r.pendingProps,f=l.children,p=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=p!==null?p.baseLanes|a:a,n!==null){for(f=r.child=n.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;r.childLanes=p&~l}else r.childLanes=0,r.child=null;return hv(n,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&du(r,p!==null?p.cachePool:null),p!==null?cy(r,p):Jd(),Wy(r);else return r.lanes=r.childLanes=536870912,hv(n,r,p!==null?p.baseLanes|a:a,a)}else p!==null?(du(r,p.cachePool),cy(r,p),qr(),r.memoizedState=null):(n!==null&&du(r,null),Jd(),qr());return Yt(n,r,f,a),r.child}function hv(n,r,a,l){var f=Kd();return f=f===null?null:{parent:Dt._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},n!==null&&du(r,null),Jd(),Wy(r),n!==null&&ul(n,r,l,!0),null}function Nu(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function Tf(n,r,a,l,f){return Zs(r),a=nf(n,r,a,l,void 0,f),l=rf(),n!==null&&!Lt?(sf(n,r,f),ar(n,r,f)):(He&&l&&Ld(r),r.flags|=1,Yt(n,r,a,f),r.child)}function dv(n,r,a,l,f,p){return Zs(r),r.updateQueue=null,a=hy(r,l,a,f),uy(n),l=rf(),n!==null&&!Lt?(sf(n,r,p),ar(n,r,p)):(He&&l&&Ld(r),r.flags|=1,Yt(n,r,a,p),r.child)}function fv(n,r,a,l,f){if(Zs(r),r.stateNode===null){var p=Ba,T=a.contextType;typeof T=="object"&&T!==null&&(p=Jt(T)),p=new a(l,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=_f,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=l,p.state=r.memoizedState,p.refs={},$d(r),T=a.contextType,p.context=typeof T=="object"&&T!==null?Jt(T):Ba,p.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(vf(r,a,T,l),p.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&_f.enqueueReplaceState(p,p.state,null),yl(r,l,p,f),gl(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(n===null){p=r.stateNode;var w=r.memoizedProps,j=ta(a,w);p.props=j;var F=p.context,W=a.contextType;T=Ba,typeof W=="object"&&W!==null&&(T=Jt(W));var te=a.getDerivedStateFromProps;W=typeof te=="function"||typeof p.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,W||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w||F!==T)&&Jy(r,p,l,T),Vr=!1;var Y=r.memoizedState;p.state=Y,yl(r,l,p,f),gl(),F=r.memoizedState,w||Y!==F||Vr?(typeof te=="function"&&(vf(r,a,te,l),F=r.memoizedState),(j=Vr||Zy(r,a,j,l,Y,F,T))?(W||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=F),p.props=l,p.state=F,p.context=T,l=j):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{p=r.stateNode,Xd(n,r),T=r.memoizedProps,W=ta(a,T),p.props=W,te=r.pendingProps,Y=p.context,F=a.contextType,j=Ba,typeof F=="object"&&F!==null&&(j=Jt(F)),w=a.getDerivedStateFromProps,(F=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==te||Y!==j)&&Jy(r,p,l,j),Vr=!1,Y=r.memoizedState,p.state=Y,yl(r,l,p,f),gl();var K=r.memoizedState;T!==te||Y!==K||Vr||n!==null&&n.dependencies!==null&&uu(n.dependencies)?(typeof w=="function"&&(vf(r,a,w,l),K=r.memoizedState),(W=Vr||Zy(r,a,W,l,Y,K,j)||n!==null&&n.dependencies!==null&&uu(n.dependencies))?(F||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,K,j),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,K,j)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===n.memoizedProps&&Y===n.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&Y===n.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=K),p.props=l,p.state=K,p.context=j,l=W):(typeof p.componentDidUpdate!="function"||T===n.memoizedProps&&Y===n.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&Y===n.memoizedState||(r.flags|=1024),l=!1)}return p=l,Nu(n,r),l=(r.flags&128)!==0,p||l?(p=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,n!==null&&l?(r.child=Xa(r,n.child,null,f),r.child=Xa(r,null,a,f)):Yt(n,r,a,f),r.memoizedState=p.state,n=r.child):n=ar(n,r,f),n}function mv(n,r,a,l){return ll(),r.flags|=256,Yt(n,r,a,l),r.child}var wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bf(n){return{baseLanes:n,cachePool:ty()}}function Af(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=Fn),n}function pv(n,r,a){var l=r.pendingProps,f=!1,p=(r.flags&128)!==0,T;if((T=p)||(T=n!==null&&n.memoizedState===null?!1:(kt.current&2)!==0),T&&(f=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,n===null){if(He){if(f?zr(r):qr(),He){var w=dt,j;if(j=w){e:{for(j=w,w=Ti;j.nodeType!==8;){if(!w){w=null;break e}if(j=ti(j.nextSibling),j===null){w=null;break e}}w=j}w!==null?(r.memoizedState={dehydrated:w,treeContext:Ks!==null?{id:er,overflow:tr}:null,retryLane:536870912,hydrationErrors:null},j=An(18,null,null,0),j.stateNode=w,j.return=r,r.child=j,un=r,dt=null,j=!0):j=!1}j||Xs(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return om(w)?r.lanes=32:r.lanes=536870912,null;sr(r)}return w=l.children,l=l.fallback,f?(qr(),f=r.mode,w=Iu({mode:"hidden",children:w},f),l=Ys(l,f,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,f=r.child,f.memoizedState=bf(a),f.childLanes=Af(n,T,a),r.memoizedState=wf,l):(zr(r),Sf(r,w))}if(j=n.memoizedState,j!==null&&(w=j.dehydrated,w!==null)){if(p)r.flags&256?(zr(r),r.flags&=-257,r=xf(n,r,a)):r.memoizedState!==null?(qr(),r.child=n.child,r.flags|=128,r=null):(qr(),f=l.fallback,w=r.mode,l=Iu({mode:"visible",children:l.children},w),f=Ys(f,w,a,null),f.flags|=2,l.return=r,f.return=r,l.sibling=f,r.child=l,Xa(r,n.child,null,a),l=r.child,l.memoizedState=bf(a),l.childLanes=Af(n,T,a),r.memoizedState=wf,r=f);else if(zr(r),om(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var F=T.dgst;T=F,l=Error(s(419)),l.stack="",l.digest=T,cl({value:l,source:null,stack:null}),r=xf(n,r,a)}else if(Lt||ul(n,r,a,!1),T=(a&n.childLanes)!==0,Lt||T){if(T=nt,T!==null&&(l=a&-a,l=(l&42)!==0?1:Nr(l),l=(l&(T.suspendedLanes|a))!==0?0:l,l!==0&&l!==j.retryLane))throw j.retryLane=l,La(n,l),Nn(T,n,l),av;w.data==="$?"||Ff(),r=xf(n,r,a)}else w.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=j.treeContext,dt=ti(w.nextSibling),un=r,He=!0,$s=null,Ti=!1,n!==null&&(zn[qn++]=er,zn[qn++]=tr,zn[qn++]=Ks,er=n.id,tr=n.overflow,Ks=r),r=Sf(r,l.children),r.flags|=4096);return r}return f?(qr(),f=l.fallback,w=r.mode,j=n.child,F=j.sibling,l=Ji(j,{mode:"hidden",children:l.children}),l.subtreeFlags=j.subtreeFlags&65011712,F!==null?f=Ji(F,f):(f=Ys(f,w,a,null),f.flags|=2),f.return=r,l.return=r,l.sibling=f,r.child=l,l=f,f=r.child,w=n.child.memoizedState,w===null?w=bf(a):(j=w.cachePool,j!==null?(F=Dt._currentValue,j=j.parent!==F?{parent:F,pool:F}:j):j=ty(),w={baseLanes:w.baseLanes|a,cachePool:j}),f.memoizedState=w,f.childLanes=Af(n,T,a),r.memoizedState=wf,l):(zr(r),a=n.child,n=a.sibling,a=Ji(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,n!==null&&(T=r.deletions,T===null?(r.deletions=[n],r.flags|=16):T.push(n)),r.child=a,r.memoizedState=null,a)}function Sf(n,r){return r=Iu({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Iu(n,r){return n=An(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function xf(n,r,a){return Xa(r,n.child,null,a),n=Sf(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function gv(n,r,a){n.lanes|=r;var l=n.alternate;l!==null&&(l.lanes|=r),Hd(n.return,r,a)}function Rf(n,r,a,l,f){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=a,p.tailMode=f)}function yv(n,r,a){var l=r.pendingProps,f=l.revealOrder,p=l.tail;if(Yt(n,r,l.children,a),l=kt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&gv(n,a,r);else if(n.tag===19)gv(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(re(kt,l),f){case"forwards":for(a=r.child,f=null;a!==null;)n=a.alternate,n!==null&&xu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),Rf(r,!1,f,a,p);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&xu(n)===null){r.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Rf(r,!0,a,null,p);break;case"together":Rf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ar(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Kr|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(ul(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,a=Ji(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Ji(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Cf(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&uu(n)))}function I1(n,r,a){switch(r.tag){case 3:Ye(r,r.stateNode.containerInfo),Mr(r,Dt,n.memoizedState.cache),ll();break;case 27:case 5:$n(r);break;case 4:Ye(r,r.stateNode.containerInfo);break;case 10:Mr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(zr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?pv(n,r,a):(zr(r),n=ar(n,r,a),n!==null?n.sibling:null);zr(r);break;case 19:var f=(n.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ul(n,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return yv(n,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),re(kt,kt.current),l)break;return null;case 22:case 23:return r.lanes=0,uv(n,r,a);case 24:Mr(r,Dt,n.memoizedState.cache)}return ar(n,r,a)}function vv(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)Lt=!0;else{if(!Cf(n,a)&&(r.flags&128)===0)return Lt=!1,I1(n,r,a);Lt=(n.flags&131072)!==0}else Lt=!1,He&&(r.flags&1048576)!==0&&Qg(r,cu,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var l=r.elementType,f=l._init;if(l=f(l._payload),r.type=l,typeof l=="function")Md(l)?(n=ta(l,n),r.tag=1,r=fv(null,r,l,n,a)):(r.tag=0,r=Tf(null,r,l,n,a));else{if(l!=null){if(f=l.$$typeof,f===oe){r.tag=11,r=ov(null,r,l,n,a);break e}else if(f===R){r.tag=14,r=lv(null,r,l,n,a);break e}}throw r=wt(l)||l,Error(s(306,r,""))}}return r;case 0:return Tf(n,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=ta(l,r.pendingProps),fv(n,r,l,f,a);case 3:e:{if(Ye(r,r.stateNode.containerInfo),n===null)throw Error(s(387));l=r.pendingProps;var p=r.memoizedState;f=p.element,Xd(n,r),yl(r,l,null,a);var T=r.memoizedState;if(l=T.cache,Mr(r,Dt,l),l!==p.cache&&Fd(r,[Dt],a,!0),gl(),l=T.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=mv(n,r,l,a);break e}else if(l!==f){f=Ln(Error(s(424)),r),cl(f),r=mv(n,r,l,a);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(dt=ti(n.firstChild),un=r,He=!0,$s=null,Ti=!0,a=Xy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ll(),l===f){r=ar(n,r,a);break e}Yt(n,r,l,a)}r=r.child}return r;case 26:return Nu(n,r),n===null?(a=w_(r.type,null,r.pendingProps,null))?r.memoizedState=a:He||(a=r.type,n=r.pendingProps,l=Fu(Te.current).createElement(a),l[Nt]=r,l[bt]=n,Qt(l,a,n),vt(l),r.stateNode=l):r.memoizedState=w_(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return $n(r),n===null&&He&&(l=r.stateNode=__(r.type,r.pendingProps,Te.current),un=r,Ti=!0,f=dt,Wr(r.type)?(lm=f,dt=ti(l.firstChild)):dt=f),Yt(n,r,r.pendingProps.children,a),Nu(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&He&&((f=l=dt)&&(l=rA(l,r.type,r.pendingProps,Ti),l!==null?(r.stateNode=l,un=r,dt=ti(l.firstChild),Ti=!1,f=!0):f=!1),f||Xs(r)),$n(r),f=r.type,p=r.pendingProps,T=n!==null?n.memoizedProps:null,l=p.children,rm(f,p)?l=null:T!==null&&rm(f,T)&&(r.flags|=32),r.memoizedState!==null&&(f=nf(n,r,w1,null,null,a),Ll._currentValue=f),Nu(n,r),Yt(n,r,l,a),r.child;case 6:return n===null&&He&&((n=a=dt)&&(a=sA(a,r.pendingProps,Ti),a!==null?(r.stateNode=a,un=r,dt=null,n=!0):n=!1),n||Xs(r)),null;case 13:return pv(n,r,a);case 4:return Ye(r,r.stateNode.containerInfo),l=r.pendingProps,n===null?r.child=Xa(r,null,l,a):Yt(n,r,l,a),r.child;case 11:return ov(n,r,r.type,r.pendingProps,a);case 7:return Yt(n,r,r.pendingProps,a),r.child;case 8:return Yt(n,r,r.pendingProps.children,a),r.child;case 12:return Yt(n,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Mr(r,r.type,l.value),Yt(n,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,Zs(r),f=Jt(f),l=l(f),r.flags|=1,Yt(n,r,l,a),r.child;case 14:return lv(n,r,r.type,r.pendingProps,a);case 15:return cv(n,r,r.type,r.pendingProps,a);case 19:return yv(n,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},n===null?(a=Iu(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Ji(n.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return uv(n,r,a);case 24:return Zs(r),l=Jt(Dt),n===null?(f=Kd(),f===null&&(f=nt,p=Gd(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),r.memoizedState={parent:l,cache:f},$d(r),Mr(r,Dt,f)):((n.lanes&a)!==0&&(Xd(n,r),yl(r,null,null,a),gl()),f=n.memoizedState,p=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Mr(r,Dt,l)):(l=p.cache,Mr(r,Dt,l),l!==f.cache&&Fd(r,[Dt],a,!0))),Yt(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function or(n){n.flags|=4}function _v(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!R_(r)){if(r=Hn.current,r!==null&&((Be&4194048)===Be?wi!==null:(Be&62914560)!==Be&&(Be&536870912)===0||r!==wi))throw ml=Qd,ny;n.flags|=8192}}function ju(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?zo():536870912,n.lanes|=r,eo|=r)}function Al(n,r){if(!He)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function lt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(r)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,r}function j1(n,r,a){var l=r.pendingProps;switch(Bd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(r),null;case 1:return lt(r),null;case 3:return a=r.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ir(Dt),_n(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(ol(r)?or(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Wg())),lt(r),null;case 26:return a=r.memoizedState,n===null?(or(r),a!==null?(lt(r),_v(r,a)):(lt(r),r.flags&=-16777217)):a?a!==n.memoizedState?(or(r),lt(r),_v(r,a)):(lt(r),r.flags&=-16777217):(n.memoizedProps!==l&&or(r),lt(r),r.flags&=-16777217),null;case 27:kn(r),a=Te.current;var f=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==l&&or(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return lt(r),null}n=ge.current,ol(r)?$g(r):(n=__(f,l,a),r.stateNode=n,or(r))}return lt(r),null;case 5:if(kn(r),a=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&or(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return lt(r),null}if(n=ge.current,ol(r))$g(r);else{switch(f=Fu(Te.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}n[Nt]=r,n[bt]=l;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=n;e:switch(Qt(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&or(r)}}return lt(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==l&&or(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(n=Te.current,ol(r)){if(n=r.stateNode,a=r.memoizedProps,l=null,f=un,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Nt]=r,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||d_(n.nodeValue,a)),n||Xs(r)}else n=Fu(n).createTextNode(l),n[Nt]=r,r.stateNode=n}return lt(r),null;case 13:if(l=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ol(r),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Nt]=r}else ll(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;lt(r),f=!1}else f=Wg(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(sr(r),r):(sr(r),null)}if(sr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var p=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)}return a!==n&&a&&(r.child.flags|=8192),ju(r,r.updateQueue),lt(r),null;case 4:return _n(),n===null&&Jf(r.stateNode.containerInfo),lt(r),null;case 10:return ir(r.type),lt(r),null;case 19:if(le(kt),f=r.memoizedState,f===null)return lt(r),null;if(l=(r.flags&128)!==0,p=f.rendering,p===null)if(l)Al(f,!1);else{if(ft!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(p=xu(n),p!==null){for(r.flags|=128,Al(f,!1),n=p.updateQueue,r.updateQueue=n,ju(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)Kg(a,n),a=a.sibling;return re(kt,kt.current&1|2),r.child}n=n.sibling}f.tail!==null&&et()>Ou&&(r.flags|=128,l=!0,Al(f,!1),r.lanes=4194304)}else{if(!l)if(n=xu(p),n!==null){if(r.flags|=128,l=!0,n=n.updateQueue,r.updateQueue=n,ju(r,n),Al(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!He)return lt(r),null}else 2*et()-f.renderingStartTime>Ou&&a!==536870912&&(r.flags|=128,l=!0,Al(f,!1),r.lanes=4194304);f.isBackwards?(p.sibling=r.child,r.child=p):(n=f.last,n!==null?n.sibling=p:r.child=p,f.last=p)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=et(),r.sibling=null,n=kt.current,re(kt,l?n&1|2:n&1),r):(lt(r),null);case 22:case 23:return sr(r),ef(),l=r.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(lt(r),r.subtreeFlags&6&&(r.flags|=8192)):lt(r),a=r.updateQueue,a!==null&&ju(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),n!==null&&le(Js),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ir(Dt),lt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function D1(n,r){switch(Bd(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return ir(Dt),_n(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return kn(r),null;case 13:if(sr(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));ll()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return le(kt),null;case 4:return _n(),null;case 10:return ir(r.type),null;case 22:case 23:return sr(r),ef(),n!==null&&le(Js),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return ir(Dt),null;case 25:return null;default:return null}}function Ev(n,r){switch(Bd(r),r.tag){case 3:ir(Dt),_n();break;case 26:case 27:case 5:kn(r);break;case 4:_n();break;case 13:sr(r);break;case 19:le(kt);break;case 10:ir(r.type);break;case 22:case 23:sr(r),ef(),n!==null&&le(Js);break;case 24:ir(Dt)}}function Sl(n,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var p=a.create,T=a.inst;l=p(),T.destroy=l}a=a.next}while(a!==f)}}catch(w){tt(r,r.return,w)}}function Hr(n,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&n)===n){var T=l.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,f=r;var j=a,F=w;try{F()}catch(W){tt(f,j,W)}}}l=l.next}while(l!==p)}}catch(W){tt(r,r.return,W)}}function Tv(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{ly(r,a)}catch(l){tt(n,n.return,l)}}}function wv(n,r,a){a.props=ta(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){tt(n,r,l)}}function xl(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){tt(n,r,f)}}function bi(n,r){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){tt(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){tt(n,r,f)}else a.current=null}function bv(n){var r=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){tt(n,n.return,f)}}function Nf(n,r,a){try{var l=n.stateNode;J1(l,n.type,a,r),l[bt]=r}catch(f){tt(n,n.return,f)}}function Av(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Wr(n.type)||n.tag===4}function If(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Av(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Wr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function jf(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Hu));else if(l!==4&&(l===27&&Wr(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(jf(n,r,a),n=n.sibling;n!==null;)jf(n,r,a),n=n.sibling}function Du(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(l!==4&&(l===27&&Wr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Du(n,r,a),n=n.sibling;n!==null;)Du(n,r,a),n=n.sibling}function Sv(n){var r=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Qt(r,l,a),r[Nt]=n,r[bt]=a}catch(p){tt(n,n.return,p)}}var lr=!1,Et=!1,Df=!1,xv=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function k1(n,r){if(n=n.containerInfo,nm=Xu,n=Vg(n),Nd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var T=0,w=-1,j=-1,F=0,W=0,te=n,Y=null;t:for(;;){for(var K;te!==a||f!==0&&te.nodeType!==3||(w=T+f),te!==p||l!==0&&te.nodeType!==3||(j=T+l),te.nodeType===3&&(T+=te.nodeValue.length),(K=te.firstChild)!==null;)Y=te,te=K;for(;;){if(te===n)break t;if(Y===a&&++F===f&&(w=T),Y===p&&++W===l&&(j=T),(K=te.nextSibling)!==null)break;te=Y,Y=te.parentNode}te=K}a=w===-1||j===-1?null:{start:w,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(im={focusedElem:n,selectionRange:a},Xu=!1,Bt=r;Bt!==null;)if(r=Bt,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,Bt=n;else for(;Bt!==null;){switch(r=Bt,p=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,a=r,f=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var Ae=ta(a.type,f,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Ae,p),l.__reactInternalSnapshotBeforeUpdate=n}catch(_e){tt(a,a.return,_e)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)am(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":am(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,Bt=n;break}Bt=r.return}}function Rv(n,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Fr(n,a),l&4&&Sl(5,a);break;case 1:if(Fr(n,a),l&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(T){tt(a,a.return,T)}else{var f=ta(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(T){tt(a,a.return,T)}}l&64&&Tv(a),l&512&&xl(a,a.return);break;case 3:if(Fr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ly(n,r)}catch(T){tt(a,a.return,T)}}break;case 27:r===null&&l&4&&Sv(a);case 26:case 5:Fr(n,a),r===null&&l&4&&bv(a),l&512&&xl(a,a.return);break;case 12:Fr(n,a);break;case 13:Fr(n,a),l&4&&Iv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=q1.bind(null,a),aA(n,a))));break;case 22:if(l=a.memoizedState!==null||lr,!l){r=r!==null&&r.memoizedState!==null||Et,f=lr;var p=Et;lr=l,(Et=r)&&!p?Gr(n,a,(a.subtreeFlags&8772)!==0):Fr(n,a),lr=f,Et=p}break;case 30:break;default:Fr(n,a)}}function Cv(n){var r=n.alternate;r!==null&&(n.alternate=null,Cv(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Dr(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ot=null,mn=!1;function cr(n,r,a){for(a=a.child;a!==null;)Nv(n,r,a),a=a.sibling}function Nv(n,r,a){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(ht,a)}catch{}switch(a.tag){case 26:Et||bi(a,r),cr(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Et||bi(a,r);var l=ot,f=mn;Wr(a.type)&&(ot=a.stateNode,mn=!1),cr(n,r,a),Pl(a.stateNode),ot=l,mn=f;break;case 5:Et||bi(a,r);case 6:if(l=ot,f=mn,ot=null,cr(n,r,a),ot=l,mn=f,ot!==null)if(mn)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(a.stateNode)}catch(p){tt(a,r,p)}else try{ot.removeChild(a.stateNode)}catch(p){tt(a,r,p)}break;case 18:ot!==null&&(mn?(n=ot,y_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Hl(n)):y_(ot,a.stateNode));break;case 4:l=ot,f=mn,ot=a.stateNode.containerInfo,mn=!0,cr(n,r,a),ot=l,mn=f;break;case 0:case 11:case 14:case 15:Et||Hr(2,a,r),Et||Hr(4,a,r),cr(n,r,a);break;case 1:Et||(bi(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&wv(a,r,l)),cr(n,r,a);break;case 21:cr(n,r,a);break;case 22:Et=(l=Et)||a.memoizedState!==null,cr(n,r,a),Et=l;break;default:cr(n,r,a)}}function Iv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Hl(n)}catch(a){tt(r,r.return,a)}}function O1(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new xv),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new xv),r;default:throw Error(s(435,n.tag))}}function kf(n,r){var a=O1(n);r.forEach(function(l){var f=H1.bind(null,n,l);a.has(l)||(a.add(l),l.then(f,f))})}function Sn(n,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],p=n,T=r,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(Wr(w.type)){ot=w.stateNode,mn=!1;break e}break;case 5:ot=w.stateNode,mn=!1;break e;case 3:case 4:ot=w.stateNode.containerInfo,mn=!0;break e}w=w.return}if(ot===null)throw Error(s(160));Nv(p,T,f),ot=null,mn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)jv(r,n),r=r.sibling}var ei=null;function jv(n,r){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Sn(r,n),xn(n),l&4&&(Hr(3,n,n.return),Sl(3,n),Hr(5,n,n.return));break;case 1:Sn(r,n),xn(n),l&512&&(Et||a===null||bi(a,a.return)),l&64&&lr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ei;if(Sn(r,n),xn(n),l&512&&(Et||a===null||bi(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Is]||p[Nt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),Qt(p,l,a),p[Nt]=n,vt(p),l=p;break e;case"link":var T=S_("link","href",f).get(l+(a.href||""));if(T){for(var w=0;w<T.length;w++)if(p=T[w],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(w,1);break t}}p=f.createElement(l),Qt(p,l,a),f.head.appendChild(p);break;case"meta":if(T=S_("meta","content",f).get(l+(a.content||""))){for(w=0;w<T.length;w++)if(p=T[w],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(w,1);break t}}p=f.createElement(l),Qt(p,l,a),f.head.appendChild(p);break;default:throw Error(s(468,l))}p[Nt]=n,vt(p),l=p}n.stateNode=l}else x_(f,n.type,n.stateNode);else n.stateNode=A_(f,l,n.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?x_(f,n.type,n.stateNode):A_(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Nf(n,n.memoizedProps,a.memoizedProps)}break;case 27:Sn(r,n),xn(n),l&512&&(Et||a===null||bi(a,a.return)),a!==null&&l&4&&Nf(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Sn(r,n),xn(n),l&512&&(Et||a===null||bi(a,a.return)),n.flags&32){f=n.stateNode;try{Pn(f,"")}catch(K){tt(n,n.return,K)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Nf(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Df=!0);break;case 6:if(Sn(r,n),xn(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(K){tt(n,n.return,K)}}break;case 3:if(Ku=null,f=ei,ei=Gu(r.containerInfo),Sn(r,n),ei=f,xn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Hl(r.containerInfo)}catch(K){tt(n,n.return,K)}Df&&(Df=!1,Dv(n));break;case 4:l=ei,ei=Gu(n.stateNode.containerInfo),Sn(r,n),xn(n),ei=l;break;case 12:Sn(r,n),xn(n);break;case 13:Sn(r,n),xn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Lf=et()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,kf(n,l)));break;case 22:f=n.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,F=lr,W=Et;if(lr=F||f,Et=W||j,Sn(r,n),Et=W,lr=F,xn(n),l&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||j||lr||Et||na(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){j=a=r;try{if(p=j.stateNode,f)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=j.stateNode;var te=j.memoizedProps.style,Y=te!=null&&te.hasOwnProperty("display")?te.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(K){tt(j,j.return,K)}}}else if(r.tag===6){if(a===null){j=r;try{j.stateNode.nodeValue=f?"":j.memoizedProps}catch(K){tt(j,j.return,K)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,kf(n,a))));break;case 19:Sn(r,n),xn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,kf(n,l)));break;case 30:break;case 21:break;default:Sn(r,n),xn(n)}}function xn(n){var r=n.flags;if(r&2){try{for(var a,l=n.return;l!==null;){if(Av(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,p=If(n);Du(n,p,f);break;case 5:var T=a.stateNode;a.flags&32&&(Pn(T,""),a.flags&=-33);var w=If(n);Du(n,w,T);break;case 3:case 4:var j=a.stateNode.containerInfo,F=If(n);jf(n,F,j);break;default:throw Error(s(161))}}catch(W){tt(n,n.return,W)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Dv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Dv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Fr(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Rv(n,r.alternate,r),r=r.sibling}function na(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Hr(4,r,r.return),na(r);break;case 1:bi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&wv(r,r.return,a),na(r);break;case 27:Pl(r.stateNode);case 26:case 5:bi(r,r.return),na(r);break;case 22:r.memoizedState===null&&na(r);break;case 30:na(r);break;default:na(r)}n=n.sibling}}function Gr(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=n,p=r,T=p.flags;switch(p.tag){case 0:case 11:case 15:Gr(f,p,a),Sl(4,p);break;case 1:if(Gr(f,p,a),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){tt(l,l.return,F)}if(l=p,f=l.updateQueue,f!==null){var w=l.stateNode;try{var j=f.shared.hiddenCallbacks;if(j!==null)for(f.shared.hiddenCallbacks=null,f=0;f<j.length;f++)oy(j[f],w)}catch(F){tt(l,l.return,F)}}a&&T&64&&Tv(p),xl(p,p.return);break;case 27:Sv(p);case 26:case 5:Gr(f,p,a),a&&l===null&&T&4&&bv(p),xl(p,p.return);break;case 12:Gr(f,p,a);break;case 13:Gr(f,p,a),a&&T&4&&Iv(f,p);break;case 22:p.memoizedState===null&&Gr(f,p,a),xl(p,p.return);break;case 30:break;default:Gr(f,p,a)}r=r.sibling}}function Of(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&hl(a))}function Pf(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&hl(n))}function Ai(n,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)kv(n,r,a,l),r=r.sibling}function kv(n,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Ai(n,r,a,l),f&2048&&Sl(9,r);break;case 1:Ai(n,r,a,l);break;case 3:Ai(n,r,a,l),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&hl(n)));break;case 12:if(f&2048){Ai(n,r,a,l),n=r.stateNode;try{var p=r.memoizedProps,T=p.id,w=p.onPostCommit;typeof w=="function"&&w(T,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(j){tt(r,r.return,j)}}else Ai(n,r,a,l);break;case 13:Ai(n,r,a,l);break;case 23:break;case 22:p=r.stateNode,T=r.alternate,r.memoizedState!==null?p._visibility&2?Ai(n,r,a,l):Rl(n,r):p._visibility&2?Ai(n,r,a,l):(p._visibility|=2,Wa(n,r,a,l,(r.subtreeFlags&10256)!==0)),f&2048&&Of(T,r);break;case 24:Ai(n,r,a,l),f&2048&&Pf(r.alternate,r);break;default:Ai(n,r,a,l)}}function Wa(n,r,a,l,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var p=n,T=r,w=a,j=l,F=T.flags;switch(T.tag){case 0:case 11:case 15:Wa(p,T,w,j,f),Sl(8,T);break;case 23:break;case 22:var W=T.stateNode;T.memoizedState!==null?W._visibility&2?Wa(p,T,w,j,f):Rl(p,T):(W._visibility|=2,Wa(p,T,w,j,f)),f&&F&2048&&Of(T.alternate,T);break;case 24:Wa(p,T,w,j,f),f&&F&2048&&Pf(T.alternate,T);break;default:Wa(p,T,w,j,f)}r=r.sibling}}function Rl(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,l=r,f=l.flags;switch(l.tag){case 22:Rl(a,l),f&2048&&Of(l.alternate,l);break;case 24:Rl(a,l),f&2048&&Pf(l.alternate,l);break;default:Rl(a,l)}r=r.sibling}}var Cl=8192;function Za(n){if(n.subtreeFlags&Cl)for(n=n.child;n!==null;)Ov(n),n=n.sibling}function Ov(n){switch(n.tag){case 26:Za(n),n.flags&Cl&&n.memoizedState!==null&&_A(ei,n.memoizedState,n.memoizedProps);break;case 5:Za(n);break;case 3:case 4:var r=ei;ei=Gu(n.stateNode.containerInfo),Za(n),ei=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=Cl,Cl=16777216,Za(n),Cl=r):Za(n));break;default:Za(n)}}function Pv(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Nl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Bt=l,Vv(l,n)}Pv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Mv(n),n=n.sibling}function Mv(n){switch(n.tag){case 0:case 11:case 15:Nl(n),n.flags&2048&&Hr(9,n,n.return);break;case 3:Nl(n);break;case 12:Nl(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,ku(n)):Nl(n);break;default:Nl(n)}}function ku(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Bt=l,Vv(l,n)}Pv(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Hr(8,r,r.return),ku(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,ku(r));break;default:ku(r)}n=n.sibling}}function Vv(n,r){for(;Bt!==null;){var a=Bt;switch(a.tag){case 0:case 11:case 15:Hr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:hl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Bt=l;else e:for(a=n;Bt!==null;){l=Bt;var f=l.sibling,p=l.return;if(Cv(l),l===a){Bt=null;break e}if(f!==null){f.return=p,Bt=f;break e}Bt=p}}}var P1={getCacheForType:function(n){var r=Jt(Dt),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a}},M1=typeof WeakMap=="function"?WeakMap:Map,Qe=0,nt=null,ke=null,Be=0,$e=0,Rn=null,Yr=!1,Ja=!1,Mf=!1,ur=0,ft=0,Kr=0,ia=0,Vf=0,Fn=0,eo=0,Il=null,pn=null,Uf=!1,Lf=0,Ou=1/0,Pu=null,Qr=null,Kt=0,$r=null,to=null,no=0,Bf=0,zf=null,Uv=null,jl=0,qf=null;function Cn(){if((Qe&2)!==0&&Be!==0)return Be&-Be;if($.T!==null){var n=Ha;return n!==0?n:$f()}return Ir()}function Lv(){Fn===0&&(Fn=(Be&536870912)===0||He?Bo():536870912);var n=Hn.current;return n!==null&&(n.flags|=32),Fn}function Nn(n,r,a){(n===nt&&($e===2||$e===9)||n.cancelPendingCommit!==null)&&(io(n,0),Xr(n,Be,Fn,!1)),qi(n,a),((Qe&2)===0||n!==nt)&&(n===nt&&((Qe&2)===0&&(ia|=a),ft===4&&Xr(n,Be,Fn,!1)),Si(n))}function Bv(n,r,a){if((Qe&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&n.expiredLanes)===0||Ns(n,r),f=l?L1(n,r):Gf(n,r,!0),p=l;do{if(f===0){Ja&&!l&&Xr(n,r,0,!1);break}else{if(a=n.current.alternate,p&&!V1(a)){f=Gf(n,r,!1),p=!1;continue}if(f===2){if(p=r,n.errorRecoveryDisabledLanes&p)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var w=n;f=Il;var j=w.current.memoizedState.isDehydrated;if(j&&(io(w,T).flags|=256),T=Gf(w,T,!1),T!==2){if(Mf&&!j){w.errorRecoveryDisabledLanes|=p,ia|=p,f=4;break e}p=pn,pn=f,p!==null&&(pn===null?pn=p:pn.push.apply(pn,p))}f=T}if(p=!1,f!==2)continue}}if(f===1){io(n,0),Xr(n,r,0,!0);break}e:{switch(l=n,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Xr(l,r,Fn,!Yr);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=Lf+300-et(),10<f)){if(Xr(l,r,Fn,!Yr),Ea(l,0,!0)!==0)break e;l.timeoutHandle=p_(zv.bind(null,l,a,pn,Pu,Uf,r,Fn,ia,eo,Yr,p,2,-0,0),f);break e}zv(l,a,pn,Pu,Uf,r,Fn,ia,eo,Yr,p,0,-0,0)}}break}while(!0);Si(n)}function zv(n,r,a,l,f,p,T,w,j,F,W,te,Y,K){if(n.timeoutHandle=-1,te=r.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Ul={stylesheets:null,count:0,unsuspend:vA},Ov(r),te=EA(),te!==null)){n.cancelPendingCommit=te(Qv.bind(null,n,r,p,a,l,f,T,w,j,W,1,Y,K)),Xr(n,p,T,!F);return}Qv(n,r,p,a,l,f,T,w,j)}function V1(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],p=f.getSnapshot;f=f.value;try{if(!bn(p(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Xr(n,r,a,l){r&=~Vf,r&=~ia,n.suspendedLanes|=r,n.pingedLanes&=~r,l&&(n.warmLanes|=r),l=n.expirationTimes;for(var f=r;0<f;){var p=31-Zt(f),T=1<<p;l[p]=-1,f&=~T}a!==0&&ui(n,a,r)}function Mu(){return(Qe&6)===0?(Dl(0),!1):!0}function Hf(){if(ke!==null){if($e===0)var n=ke.return;else n=ke,nr=Ws=null,af(n),$a=null,wl=0,n=ke;for(;n!==null;)Ev(n.alternate,n),n=n.return;ke=null}}function io(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,tA(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Hf(),nt=n,ke=a=Ji(n.current,null),Be=r,$e=0,Rn=null,Yr=!1,Ja=Ns(n,r),Mf=!1,eo=Fn=Vf=ia=Kr=ft=0,pn=Il=null,Uf=!1,(r&8)!==0&&(r|=r&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=r;0<l;){var f=31-Zt(l),p=1<<f;r|=n[f],l&=~p}return ur=r,ru(),a}function qv(n,r){Ie=null,$.H=bu,r===fl||r===fu?(r=sy(),$e=3):r===ny?(r=sy(),$e=4):$e=r===av?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Rn=r,ke===null&&(ft=1,Cu(n,Ln(r,n.current)))}function Hv(){var n=$.H;return $.H=bu,n===null?bu:n}function Fv(){var n=$.A;return $.A=P1,n}function Ff(){ft=4,Yr||(Be&4194048)!==Be&&Hn.current!==null||(Ja=!0),(Kr&134217727)===0&&(ia&134217727)===0||nt===null||Xr(nt,Be,Fn,!1)}function Gf(n,r,a){var l=Qe;Qe|=2;var f=Hv(),p=Fv();(nt!==n||Be!==r)&&(Pu=null,io(n,r)),r=!1;var T=ft;e:do try{if($e!==0&&ke!==null){var w=ke,j=Rn;switch($e){case 8:Hf(),T=6;break e;case 3:case 2:case 9:case 6:Hn.current===null&&(r=!0);var F=$e;if($e=0,Rn=null,ro(n,w,j,F),a&&Ja){T=0;break e}break;default:F=$e,$e=0,Rn=null,ro(n,w,j,F)}}U1(),T=ft;break}catch(W){qv(n,W)}while(!0);return r&&n.shellSuspendCounter++,nr=Ws=null,Qe=l,$.H=f,$.A=p,ke===null&&(nt=null,Be=0,ru()),T}function U1(){for(;ke!==null;)Gv(ke)}function L1(n,r){var a=Qe;Qe|=2;var l=Hv(),f=Fv();nt!==n||Be!==r?(Pu=null,Ou=et()+500,io(n,r)):Ja=Ns(n,r);e:do try{if($e!==0&&ke!==null){r=ke;var p=Rn;t:switch($e){case 1:$e=0,Rn=null,ro(n,r,p,1);break;case 2:case 9:if(iy(p)){$e=0,Rn=null,Yv(r);break}r=function(){$e!==2&&$e!==9||nt!==n||($e=7),Si(n)},p.then(r,r);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:iy(p)?($e=0,Rn=null,Yv(r)):($e=0,Rn=null,ro(n,r,p,7));break;case 5:var T=null;switch(ke.tag){case 26:T=ke.memoizedState;case 5:case 27:var w=ke;if(!T||R_(T)){$e=0,Rn=null;var j=w.sibling;if(j!==null)ke=j;else{var F=w.return;F!==null?(ke=F,Vu(F)):ke=null}break t}}$e=0,Rn=null,ro(n,r,p,5);break;case 6:$e=0,Rn=null,ro(n,r,p,6);break;case 8:Hf(),ft=6;break e;default:throw Error(s(462))}}B1();break}catch(W){qv(n,W)}while(!0);return nr=Ws=null,$.H=l,$.A=f,Qe=a,ke!==null?0:(nt=null,Be=0,ru(),ft)}function B1(){for(;ke!==null&&!Cr();)Gv(ke)}function Gv(n){var r=vv(n.alternate,n,ur);n.memoizedProps=n.pendingProps,r===null?Vu(n):ke=r}function Yv(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=dv(a,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=dv(a,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:af(r);default:Ev(a,r),r=ke=Kg(r,ur),r=vv(a,r,ur)}n.memoizedProps=n.pendingProps,r===null?Vu(n):ke=r}function ro(n,r,a,l){nr=Ws=null,af(r),$a=null,wl=0;var f=r.return;try{if(N1(n,f,r,a,Be)){ft=1,Cu(n,Ln(a,n.current)),ke=null;return}}catch(p){if(f!==null)throw ke=f,p;ft=1,Cu(n,Ln(a,n.current)),ke=null;return}r.flags&32768?(He||l===1?n=!0:Ja||(Be&536870912)!==0?n=!1:(Yr=n=!0,(l===2||l===9||l===3||l===6)&&(l=Hn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Kv(r,n)):Vu(r)}function Vu(n){var r=n;do{if((r.flags&32768)!==0){Kv(r,Yr);return}n=r.return;var a=j1(r.alternate,r,ur);if(a!==null){ke=a;return}if(r=r.sibling,r!==null){ke=r;return}ke=r=n}while(r!==null);ft===0&&(ft=5)}function Kv(n,r){do{var a=D1(n.alternate,n);if(a!==null){a.flags&=32767,ke=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){ke=n;return}ke=n=a}while(n!==null);ft=6,ke=null}function Qv(n,r,a,l,f,p,T,w,j){n.cancelPendingCommit=null;do Uu();while(Kt!==0);if((Qe&6)!==0)throw Error(s(327));if(r!==null){if(r===n.current)throw Error(s(177));if(p=r.lanes|r.childLanes,p|=Od,qo(n,a,p,T,w,j),n===nt&&(ke=nt=null,Be=0),to=r,$r=n,no=a,Bf=p,zf=f,Uv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,F1(En,function(){return Jv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=$.T,$.T=null,f=ae.p,ae.p=2,T=Qe,Qe|=4;try{k1(n,r,a)}finally{Qe=T,ae.p=f,$.T=l}}Kt=1,$v(),Xv(),Wv()}}function $v(){if(Kt===1){Kt=0;var n=$r,r=to,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var l=ae.p;ae.p=2;var f=Qe;Qe|=4;try{jv(r,n);var p=im,T=Vg(n.containerInfo),w=p.focusedElem,j=p.selectionRange;if(T!==w&&w&&w.ownerDocument&&Mg(w.ownerDocument.documentElement,w)){if(j!==null&&Nd(w)){var F=j.start,W=j.end;if(W===void 0&&(W=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min(W,w.value.length);else{var te=w.ownerDocument||document,Y=te&&te.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),Ae=w.textContent.length,_e=Math.min(j.start,Ae),Je=j.end===void 0?_e:Math.min(j.end,Ae);!K.extend&&_e>Je&&(T=Je,Je=_e,_e=T);var z=Pg(w,_e),V=Pg(w,Je);if(z&&V&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==V.node||K.focusOffset!==V.offset)){var H=te.createRange();H.setStart(z.node,z.offset),K.removeAllRanges(),_e>Je?(K.addRange(H),K.extend(V.node,V.offset)):(H.setEnd(V.node,V.offset),K.addRange(H))}}}}for(te=[],K=w;K=K.parentNode;)K.nodeType===1&&te.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<te.length;w++){var Z=te[w];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Xu=!!nm,im=nm=null}finally{Qe=f,ae.p=l,$.T=a}}n.current=r,Kt=2}}function Xv(){if(Kt===2){Kt=0;var n=$r,r=to,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var l=ae.p;ae.p=2;var f=Qe;Qe|=4;try{Rv(n,r.alternate,r)}finally{Qe=f,ae.p=l,$.T=a}}Kt=3}}function Wv(){if(Kt===4||Kt===3){Kt=0,Se();var n=$r,r=to,a=no,l=Uv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Kt=5:(Kt=0,to=$r=null,Zv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Qr=null),Ta(a),r=r.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(ht,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=$.T,f=ae.p,ae.p=2,$.T=null;try{for(var p=n.onRecoverableError,T=0;T<l.length;T++){var w=l[T];p(w.value,{componentStack:w.stack})}}finally{$.T=r,ae.p=f}}(no&3)!==0&&Uu(),Si(n),f=n.pendingLanes,(a&4194090)!==0&&(f&42)!==0?n===qf?jl++:(jl=0,qf=n):jl=0,Dl(0)}}function Zv(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,hl(r)))}function Uu(n){return $v(),Xv(),Wv(),Jv()}function Jv(){if(Kt!==5)return!1;var n=$r,r=Bf;Bf=0;var a=Ta(no),l=$.T,f=ae.p;try{ae.p=32>a?32:a,$.T=null,a=zf,zf=null;var p=$r,T=no;if(Kt=0,to=$r=null,no=0,(Qe&6)!==0)throw Error(s(331));var w=Qe;if(Qe|=4,Mv(p.current),kv(p,p.current,T,a),Qe=w,Dl(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(ht,p)}catch{}return!0}finally{ae.p=f,$.T=l,Zv(n,r)}}function e_(n,r,a){r=Ln(a,r),r=Ef(n.stateNode,r,2),n=Lr(n,r,2),n!==null&&(qi(n,2),Si(n))}function tt(n,r,a){if(n.tag===3)e_(n,n,a);else for(;r!==null;){if(r.tag===3){e_(r,n,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Qr===null||!Qr.has(l))){n=Ln(a,n),a=rv(2),l=Lr(r,a,2),l!==null&&(sv(a,l,r,n),qi(l,2),Si(l));break}}r=r.return}}function Yf(n,r,a){var l=n.pingCache;if(l===null){l=n.pingCache=new M1;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(Mf=!0,f.add(a),n=z1.bind(null,n,r,a),r.then(n,n))}function z1(n,r,a){var l=n.pingCache;l!==null&&l.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,nt===n&&(Be&a)===a&&(ft===4||ft===3&&(Be&62914560)===Be&&300>et()-Lf?(Qe&2)===0&&io(n,0):Vf|=a,eo===Be&&(eo=0)),Si(n)}function t_(n,r){r===0&&(r=zo()),n=La(n,r),n!==null&&(qi(n,r),Si(n))}function q1(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),t_(n,a)}function H1(n,r){var a=0;switch(n.tag){case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),t_(n,a)}function F1(n,r){return li(n,r)}var Lu=null,so=null,Kf=!1,Bu=!1,Qf=!1,ra=0;function Si(n){n!==so&&n.next===null&&(so===null?Lu=so=n:so=so.next=n),Bu=!0,Kf||(Kf=!0,Y1())}function Dl(n,r){if(!Qf&&Bu){Qf=!0;do for(var a=!1,l=Lu;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var T=l.suspendedLanes,w=l.pingedLanes;p=(1<<31-Zt(42|n)+1)-1,p&=f&~(T&~w),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,s_(l,p))}else p=Be,p=Ea(l,l===nt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||Ns(l,p)||(a=!0,s_(l,p));l=l.next}while(a);Qf=!1}}function G1(){n_()}function n_(){Bu=Kf=!1;var n=0;ra!==0&&(eA()&&(n=ra),ra=0);for(var r=et(),a=null,l=Lu;l!==null;){var f=l.next,p=i_(l,r);p===0?(l.next=null,a===null?Lu=f:a.next=f,f===null&&(so=a)):(a=l,(n!==0||(p&3)!==0)&&(Bu=!0)),l=f}Dl(n)}function i_(n,r){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var T=31-Zt(p),w=1<<T,j=f[T];j===-1?((w&a)===0||(w&l)!==0)&&(f[T]=Lo(w,r)):j<=r&&(n.expiredLanes|=w),p&=~w}if(r=nt,a=Be,a=Ea(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===r&&($e===2||$e===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&ci(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Ns(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(l!==null&&ci(l),Ta(a)){case 2:case 8:a=Li;break;case 32:a=En;break;case 268435456:a=Bi;break;default:a=En}return l=r_.bind(null,n),a=li(a,l),n.callbackPriority=r,n.callbackNode=a,r}return l!==null&&l!==null&&ci(l),n.callbackPriority=2,n.callbackNode=null,2}function r_(n,r){if(Kt!==0&&Kt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Uu()&&n.callbackNode!==a)return null;var l=Be;return l=Ea(n,n===nt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Bv(n,l,r),i_(n,et()),n.callbackNode!=null&&n.callbackNode===a?r_.bind(null,n):null)}function s_(n,r){if(Uu())return null;Bv(n,r,!0)}function Y1(){nA(function(){(Qe&6)!==0?li(Ui,G1):n_()})}function $f(){return ra===0&&(ra=Bo()),ra}function a_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ra(""+n)}function o_(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function K1(n,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var p=a_((f[bt]||null).action),T=l.submitter;T&&(r=(r=T[bt]||null)?a_(r.formAction):T.getAttribute("formAction"),r!==null&&(p=r,T=null));var w=new Ca("action","action",null,l,f);n.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ra!==0){var j=T?o_(f,T):new FormData(f);pf(a,{pending:!0,data:j,method:f.method,action:p},null,j)}}else typeof p=="function"&&(w.preventDefault(),j=T?o_(f,T):new FormData(f),pf(a,{pending:!0,data:j,method:f.method,action:p},p,j))},currentTarget:f}]})}}for(var Xf=0;Xf<kd.length;Xf++){var Wf=kd[Xf],Q1=Wf.toLowerCase(),$1=Wf[0].toUpperCase()+Wf.slice(1);Jn(Q1,"on"+$1)}Jn(Bg,"onAnimationEnd"),Jn(zg,"onAnimationIteration"),Jn(qg,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(d1,"onTransitionRun"),Jn(f1,"onTransitionStart"),Jn(m1,"onTransitionCancel"),Jn(Hg,"onTransitionEnd"),Fi("onMouseEnter",["mouseout","mouseover"]),Fi("onMouseLeave",["mouseout","mouseover"]),Fi("onPointerEnter",["pointerout","pointerover"]),Fi("onPointerLeave",["pointerout","pointerover"]),Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kl));function l_(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var p=void 0;if(r)for(var T=l.length-1;0<=T;T--){var w=l[T],j=w.instance,F=w.currentTarget;if(w=w.listener,j!==p&&f.isPropagationStopped())break e;p=w,f.currentTarget=F;try{p(f)}catch(W){Ru(W)}f.currentTarget=null,p=j}else for(T=0;T<l.length;T++){if(w=l[T],j=w.instance,F=w.currentTarget,w=w.listener,j!==p&&f.isPropagationStopped())break e;p=w,f.currentTarget=F;try{p(f)}catch(W){Ru(W)}f.currentTarget=null,p=j}}}}function Oe(n,r){var a=r[Fo];a===void 0&&(a=r[Fo]=new Set);var l=n+"__bubble";a.has(l)||(c_(r,n,2,!1),a.add(l))}function Zf(n,r,a){var l=0;r&&(l|=4),c_(a,n,l,r)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Jf(n){if(!n[zu]){n[zu]=!0,Go.forEach(function(a){a!=="selectionchange"&&(X1.has(a)||Zf(a,!1,n),Zf(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[zu]||(r[zu]=!0,Zf("selectionchange",!1,r))}}function c_(n,r,a,l){switch(k_(r)){case 2:var f=bA;break;case 8:f=AA;break;default:f=fm}a=f.bind(null,r,a,n),f=void 0,!Vn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(r,a,{capture:!0,passive:f}):n.addEventListener(r,a,!0):f!==void 0?n.addEventListener(r,a,{passive:f}):n.addEventListener(r,a,!1)}function em(n,r,a,l,f){var p=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var w=l.stateNode.containerInfo;if(w===f)break;if(T===4)for(T=l.return;T!==null;){var j=T.tag;if((j===3||j===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;w!==null;){if(T=Hi(w),T===null)return;if(j=T.tag,j===5||j===6||j===26||j===27){l=p=T;continue e}w=w.parentNode}}l=l.return}Hc(function(){var F=p,W=Mn(a),te=[];e:{var Y=Fg.get(n);if(Y!==void 0){var K=Ca,Ae=n;switch(n){case"keypress":if(gi(a)===0)break e;case"keydown":case"keyup":K=Oa;break;case"focusin":Ae="focus",K=ja;break;case"focusout":Ae="blur",K=ja;break;case"beforeblur":case"afterblur":K=ja;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Un;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Sd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Wc;break;case Bg:case zg:case qg:K=Da;break;case Hg:K=Jc;break;case"scroll":case"scrollend":K=Fc;break;case"wheel":K=Pa;break;case"copy":case"cut":case"paste":K=ka;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=il;break;case"toggle":case"beforetoggle":K=tu}var _e=(r&4)!==0,Je=!_e&&(n==="scroll"||n==="scrollend"),z=_e?Y!==null?Y+"Capture":null:Y;_e=[];for(var V=F,H;V!==null;){var Z=V;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||z===null||(Z=Vs(V,z),Z!=null&&_e.push(Ol(V,Z,H))),Je)break;V=V.return}0<_e.length&&(Y=new K(Y,Ae,null,a,W),te.push({event:Y,listeners:_e}))}}if((r&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",K=n==="mouseout"||n==="pointerout",Y&&a!==Ki&&(Ae=a.relatedTarget||a.fromElement)&&(Hi(Ae)||Ae[On]))break e;if((K||Y)&&(Y=W.window===W?W:(Y=W.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(Ae=a.relatedTarget||a.toElement,K=F,Ae=Ae?Hi(Ae):null,Ae!==null&&(Je=c(Ae),_e=Ae.tag,Ae!==Je||_e!==5&&_e!==27&&_e!==6)&&(Ae=null)):(K=null,Ae=F),K!==Ae)){if(_e=Un,Z="onMouseLeave",z="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(_e=il,Z="onPointerLeave",z="onPointerEnter",V="pointer"),Je=K==null?Y:di(K),H=Ae==null?Y:di(Ae),Y=new _e(Z,V+"leave",K,a,W),Y.target=Je,Y.relatedTarget=H,Z=null,Hi(W)===F&&(_e=new _e(z,V+"enter",Ae,a,W),_e.target=H,_e.relatedTarget=Je,Z=_e),Je=Z,K&&Ae)t:{for(_e=K,z=Ae,V=0,H=_e;H;H=ao(H))V++;for(H=0,Z=z;Z;Z=ao(Z))H++;for(;0<V-H;)_e=ao(_e),V--;for(;0<H-V;)z=ao(z),H--;for(;V--;){if(_e===z||z!==null&&_e===z.alternate)break t;_e=ao(_e),z=ao(z)}_e=null}else _e=null;K!==null&&u_(te,Y,K,_e,!1),Ae!==null&&Je!==null&&u_(te,Je,Ae,_e,!0)}}e:{if(Y=F?di(F):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var de=Ng;else if(jt(Y))if(Ig)de=c1;else{de=o1;var De=a1}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?F&&Xo(F.elementType)&&(de=Ng):de=l1;if(de&&(de=de(n,F))){Zi(te,de,a,W);break e}De&&De(n,Y,F),n==="focusout"&&F&&Y.type==="number"&&F.memoizedProps.value!=null&&Or(Y,"number",Y.value)}switch(De=F?di(F):window,n){case"focusin":(jt(De)||De.contentEditable==="true")&&(Ma=De,Id=F,al=null);break;case"focusout":al=Id=Ma=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,Ug(te,a,W);break;case"selectionchange":if(h1)break;case"keydown":case"keyup":Ug(te,a,W)}var me;if(_i)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Ue?Q(n,a)&&(Ee="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(E&&a.locale!=="ko"&&(Ue||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Ue&&(me=Zo()):(pi=W,Pr="value"in pi?pi.value:pi.textContent,Ue=!0)),De=qu(F,Ee),0<De.length&&(Ee=new tl(Ee,n,null,a,W),te.push({event:Ee,listeners:De}),me?Ee.data=me:(me=se(a),me!==null&&(Ee.data=me)))),(me=v?It(n,a):Le(n,a))&&(Ee=qu(F,"onBeforeInput"),0<Ee.length&&(De=new tl("onBeforeInput","beforeinput",null,a,W),te.push({event:De,listeners:Ee}),De.data=me)),K1(te,n,F,a,W)}l_(te,r)})}function Ol(n,r,a){return{instance:n,listener:r,currentTarget:a}}function qu(n,r){for(var a=r+"Capture",l=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Vs(n,a),f!=null&&l.unshift(Ol(n,f,p)),f=Vs(n,r),f!=null&&l.push(Ol(n,f,p))),n.tag===3)return l;n=n.return}return[]}function ao(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function u_(n,r,a,l,f){for(var p=r._reactName,T=[];a!==null&&a!==l;){var w=a,j=w.alternate,F=w.stateNode;if(w=w.tag,j!==null&&j===l)break;w!==5&&w!==26&&w!==27||F===null||(j=F,f?(F=Vs(a,p),F!=null&&T.unshift(Ol(a,F,j))):f||(F=Vs(a,p),F!=null&&T.push(Ol(a,F,j)))),a=a.return}T.length!==0&&n.push({event:r,listeners:T})}var W1=/\r\n?/g,Z1=/\u0000|\uFFFD/g;function h_(n){return(typeof n=="string"?n:""+n).replace(W1,`
`).replace(Z1,"")}function d_(n,r){return r=h_(r),h_(n)===r}function Hu(){}function Ze(n,r,a,l,f,p){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Pn(n,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Pn(n,""+l);break;case"className":fi(n,"class",l);break;case"tabIndex":fi(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":fi(n,a,l);break;case"style":$o(n,l,p);break;case"data":if(r!=="object"){fi(n,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ra(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(r!=="input"&&Ze(n,r,"name",f.name,f,null),Ze(n,r,"formEncType",f.formEncType,f,null),Ze(n,r,"formMethod",f.formMethod,f,null),Ze(n,r,"formTarget",f.formTarget,f,null)):(Ze(n,r,"encType",f.encType,f,null),Ze(n,r,"method",f.method,f,null),Ze(n,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ra(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Hu);break;case"onScroll":l!=null&&Oe("scroll",n);break;case"onScrollEnd":l!=null&&Oe("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ra(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Oe("beforetoggle",n),Oe("toggle",n),kr(n,"popover",l);break;case"xlinkActuate":Ft(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ft(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ft(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ft(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ft(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ft(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ft(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ft(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ft(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":kr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=bd.get(a)||a,kr(n,a,l))}}function tm(n,r,a,l,f,p){switch(a){case"style":$o(n,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Pn(n,l):(typeof l=="number"||typeof l=="bigint")&&Pn(n,""+l);break;case"onScroll":l!=null&&Oe("scroll",n);break;case"onScrollEnd":l!=null&&Oe("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Hu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),p=n[bt]||null,p=p!=null?p[a]:null,typeof p=="function"&&n.removeEventListener(r,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):kr(n,a,l)}}}function Qt(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",n),Oe("load",n);var l=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var T=a[p];if(T!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ze(n,r,p,T,a,null)}}f&&Ze(n,r,"srcSet",a.srcSet,a,null),l&&Ze(n,r,"src",a.src,a,null);return;case"input":Oe("invalid",n);var w=p=T=f=null,j=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":f=W;break;case"type":T=W;break;case"checked":j=W;break;case"defaultChecked":F=W;break;case"value":p=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:Ze(n,r,l,W,a,null)}}Os(n,p,w,j,F,T,f,!1),xa(n);return;case"select":Oe("invalid",n),l=T=p=null;for(f in a)if(a.hasOwnProperty(f)&&(w=a[f],w!=null))switch(f){case"value":p=w;break;case"defaultValue":T=w;break;case"multiple":l=w;default:Ze(n,r,f,w,a,null)}r=p,a=T,n.multiple=!!l,r!=null?Yi(n,!!l,r,!1):a!=null&&Yi(n,!!l,a,!0);return;case"textarea":Oe("invalid",n),p=f=l=null;for(T in a)if(a.hasOwnProperty(T)&&(w=a[T],w!=null))switch(T){case"value":l=w;break;case"defaultValue":f=w;break;case"children":p=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:Ze(n,r,T,w,a,null)}Ps(n,l,f,p),xa(n);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ze(n,r,j,l,a,null)}return;case"dialog":Oe("beforetoggle",n),Oe("toggle",n),Oe("cancel",n),Oe("close",n);break;case"iframe":case"object":Oe("load",n);break;case"video":case"audio":for(l=0;l<kl.length;l++)Oe(kl[l],n);break;case"image":Oe("error",n),Oe("load",n);break;case"details":Oe("toggle",n);break;case"embed":case"source":case"link":Oe("error",n),Oe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ze(n,r,F,l,a,null)}return;default:if(Xo(r)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&tm(n,r,W,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&Ze(n,r,w,l,a,null))}function J1(n,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,T=null,w=null,j=null,F=null,W=null;for(K in a){var te=a[K];if(a.hasOwnProperty(K)&&te!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":j=te;default:l.hasOwnProperty(K)||Ze(n,r,K,null,l,te)}}for(var Y in l){var K=l[Y];if(te=a[Y],l.hasOwnProperty(Y)&&(K!=null||te!=null))switch(Y){case"type":p=K;break;case"name":f=K;break;case"checked":F=K;break;case"defaultChecked":W=K;break;case"value":T=K;break;case"defaultValue":w=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:K!==te&&Ze(n,r,Y,K,l,te)}}wn(n,T,w,j,F,W,p,f);return;case"select":K=T=w=Y=null;for(p in a)if(j=a[p],a.hasOwnProperty(p)&&j!=null)switch(p){case"value":break;case"multiple":K=j;default:l.hasOwnProperty(p)||Ze(n,r,p,null,l,j)}for(f in l)if(p=l[f],j=a[f],l.hasOwnProperty(f)&&(p!=null||j!=null))switch(f){case"value":Y=p;break;case"defaultValue":w=p;break;case"multiple":T=p;default:p!==j&&Ze(n,r,f,p,l,j)}r=w,a=T,l=K,Y!=null?Yi(n,!!a,Y,!1):!!l!=!!a&&(r!=null?Yi(n,!!a,r,!0):Yi(n,!!a,a?[]:"",!1));return;case"textarea":K=Y=null;for(w in a)if(f=a[w],a.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Ze(n,r,w,null,l,f)}for(T in l)if(f=l[T],p=a[T],l.hasOwnProperty(T)&&(f!=null||p!=null))switch(T){case"value":Y=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&Ze(n,r,T,f,l,p)}Xe(n,Y,K);return;case"option":for(var Ae in a)if(Y=a[Ae],a.hasOwnProperty(Ae)&&Y!=null&&!l.hasOwnProperty(Ae))switch(Ae){case"selected":n.selected=!1;break;default:Ze(n,r,Ae,null,l,Y)}for(j in l)if(Y=l[j],K=a[j],l.hasOwnProperty(j)&&Y!==K&&(Y!=null||K!=null))switch(j){case"selected":n.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:Ze(n,r,j,Y,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)Y=a[_e],a.hasOwnProperty(_e)&&Y!=null&&!l.hasOwnProperty(_e)&&Ze(n,r,_e,null,l,Y);for(F in l)if(Y=l[F],K=a[F],l.hasOwnProperty(F)&&Y!==K&&(Y!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:Ze(n,r,F,Y,l,K)}return;default:if(Xo(r)){for(var Je in a)Y=a[Je],a.hasOwnProperty(Je)&&Y!==void 0&&!l.hasOwnProperty(Je)&&tm(n,r,Je,void 0,l,Y);for(W in l)Y=l[W],K=a[W],!l.hasOwnProperty(W)||Y===K||Y===void 0&&K===void 0||tm(n,r,W,Y,l,K);return}}for(var z in a)Y=a[z],a.hasOwnProperty(z)&&Y!=null&&!l.hasOwnProperty(z)&&Ze(n,r,z,null,l,Y);for(te in l)Y=l[te],K=a[te],!l.hasOwnProperty(te)||Y===K||Y==null&&K==null||Ze(n,r,te,Y,l,K)}var nm=null,im=null;function Fu(n){return n.nodeType===9?n:n.ownerDocument}function f_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m_(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function rm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var sm=null;function eA(){var n=window.event;return n&&n.type==="popstate"?n===sm?!1:(sm=n,!0):(sm=null,!1)}var p_=typeof setTimeout=="function"?setTimeout:void 0,tA=typeof clearTimeout=="function"?clearTimeout:void 0,g_=typeof Promise=="function"?Promise:void 0,nA=typeof queueMicrotask=="function"?queueMicrotask:typeof g_<"u"?function(n){return g_.resolve(null).then(n).catch(iA)}:p_;function iA(n){setTimeout(function(){throw n})}function Wr(n){return n==="head"}function y_(n,r){var a=r,l=0,f=0;do{var p=a.nextSibling;if(n.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<l&&8>l){a=l;var T=n.ownerDocument;if(a&1&&Pl(T.documentElement),a&2&&Pl(T.body),a&4)for(a=T.head,Pl(a),T=a.firstChild;T;){var w=T.nextSibling,j=T.nodeName;T[Is]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=w}}if(f===0){n.removeChild(p),Hl(r);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=p}while(a);Hl(r)}function am(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":am(a),Dr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function rA(n,r,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Is])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=ti(n.nextSibling),n===null)break}return null}function sA(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ti(n.nextSibling),n===null))return null;return n}function om(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function aA(n,r){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function ti(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var lm=null;function v_(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}function __(n,r,a){switch(r=Fu(a),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Pl(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Dr(n)}var Gn=new Map,E_=new Set;function Gu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var hr=ae.d;ae.d={f:oA,r:lA,D:cA,C:uA,L:hA,m:dA,X:mA,S:fA,M:pA};function oA(){var n=hr.f(),r=Mu();return n||r}function lA(n){var r=hi(n);r!==null&&r.tag===5&&r.type==="form"?By(r):hr.r(n)}var oo=typeof document>"u"?null:document;function T_(n,r,a){var l=oo;if(l&&typeof r=="string"&&r){var f=At(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),E_.has(f)||(E_.add(f),n={rel:n,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),Qt(r,"link",n),vt(r),l.head.appendChild(r)))}}function cA(n){hr.D(n),T_("dns-prefetch",n,null)}function uA(n,r){hr.C(n,r),T_("preconnect",n,r)}function hA(n,r,a){hr.L(n,r,a);var l=oo;if(l&&n&&r){var f='link[rel="preload"][as="'+At(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+At(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+At(a.imageSizes)+'"]')):f+='[href="'+At(n)+'"]';var p=f;switch(r){case"style":p=lo(n);break;case"script":p=co(n)}Gn.has(p)||(n=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),Gn.set(p,n),l.querySelector(f)!==null||r==="style"&&l.querySelector(Ml(p))||r==="script"&&l.querySelector(Vl(p))||(r=l.createElement("link"),Qt(r,"link",n),vt(r),l.head.appendChild(r)))}}function dA(n,r){hr.m(n,r);var a=oo;if(a&&n){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+At(l)+'"][href="'+At(n)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=co(n)}if(!Gn.has(p)&&(n=_({rel:"modulepreload",href:n},r),Gn.set(p,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Vl(p)))return}l=a.createElement("link"),Qt(l,"link",n),vt(l),a.head.appendChild(l)}}}function fA(n,r,a){hr.S(n,r,a);var l=oo;if(l&&n){var f=on(l).hoistableStyles,p=lo(n);r=r||"default";var T=f.get(p);if(!T){var w={loading:0,preload:null};if(T=l.querySelector(Ml(p)))w.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":r},a),(a=Gn.get(p))&&cm(n,a);var j=T=l.createElement("link");vt(j),Qt(j,"link",n),j._p=new Promise(function(F,W){j.onload=F,j.onerror=W}),j.addEventListener("load",function(){w.loading|=1}),j.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Yu(T,r,l)}T={type:"stylesheet",instance:T,count:1,state:w},f.set(p,T)}}}function mA(n,r){hr.X(n,r);var a=oo;if(a&&n){var l=on(a).hoistableScripts,f=co(n),p=l.get(f);p||(p=a.querySelector(Vl(f)),p||(n=_({src:n,async:!0},r),(r=Gn.get(f))&&um(n,r),p=a.createElement("script"),vt(p),Qt(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function pA(n,r){hr.M(n,r);var a=oo;if(a&&n){var l=on(a).hoistableScripts,f=co(n),p=l.get(f);p||(p=a.querySelector(Vl(f)),p||(n=_({src:n,async:!0,type:"module"},r),(r=Gn.get(f))&&um(n,r),p=a.createElement("script"),vt(p),Qt(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function w_(n,r,a,l){var f=(f=Te.current)?Gu(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=lo(a.href),a=on(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=lo(a.href);var p=on(f).hoistableStyles,T=p.get(n);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,T),(p=f.querySelector(Ml(n)))&&!p._p&&(T.instance=p,T.state.loading=5),Gn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gn.set(n,a),p||gA(f,n,a,T.state))),r&&l===null)throw Error(s(528,""));return T}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=co(a),a=on(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function lo(n){return'href="'+At(n)+'"'}function Ml(n){return'link[rel="stylesheet"]['+n+"]"}function b_(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function gA(n,r,a,l){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=n.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Qt(r,"link",a),vt(r),n.head.appendChild(r))}function co(n){return'[src="'+At(n)+'"]'}function Vl(n){return"script[async]"+n}function A_(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=n.querySelector('style[data-href~="'+At(a.href)+'"]');if(l)return r.instance=l,vt(l),l;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),vt(l),Qt(l,"style",f),Yu(l,a.precedence,n),r.instance=l;case"stylesheet":f=lo(a.href);var p=n.querySelector(Ml(f));if(p)return r.state.loading|=4,r.instance=p,vt(p),p;l=b_(a),(f=Gn.get(f))&&cm(l,f),p=(n.ownerDocument||n).createElement("link"),vt(p);var T=p;return T._p=new Promise(function(w,j){T.onload=w,T.onerror=j}),Qt(p,"link",l),r.state.loading|=4,Yu(p,a.precedence,n),r.instance=p;case"script":return p=co(a.src),(f=n.querySelector(Vl(p)))?(r.instance=f,vt(f),f):(l=a,(f=Gn.get(p))&&(l=_({},a),um(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),vt(f),Qt(f,"link",l),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Yu(l,a.precedence,n));return r.instance}function Yu(n,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,T=0;T<l.length;T++){var w=l[T];if(w.dataset.precedence===r)p=w;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function cm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function um(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Ku=null;function S_(n,r,a){if(Ku===null){var l=new Map,f=Ku=new Map;f.set(a,l)}else f=Ku,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var p=a[f];if(!(p[Is]||p[Nt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(r)||"";T=n+T;var w=l.get(T);w?w.push(p):l.set(T,[p])}}return l}function x_(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function yA(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function R_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Ul=null;function vA(){}function _A(n,r,a){if(Ul===null)throw Error(s(475));var l=Ul;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=lo(a.href),p=n.querySelector(Ml(f));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=Qu.bind(l),n.then(l,l)),r.state.loading|=4,r.instance=p,vt(p);return}p=n.ownerDocument||n,a=b_(a),(f=Gn.get(f))&&cm(a,f),p=p.createElement("link"),vt(p);var T=p;T._p=new Promise(function(w,j){T.onload=w,T.onerror=j}),Qt(p,"link",a),r.instance=p}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Qu.bind(l),n.addEventListener("load",r),n.addEventListener("error",r))}}function EA(){if(Ul===null)throw Error(s(475));var n=Ul;return n.stylesheets&&n.count===0&&hm(n,n.stylesheets),0<n.count?function(r){var a=setTimeout(function(){if(n.stylesheets&&hm(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Qu(){if(this.count--,this.count===0){if(this.stylesheets)hm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var $u=null;function hm(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,$u=new Map,r.forEach(TA,n),$u=null,Qu.call(n))}function TA(n,r){if(!(r.state.loading&4)){var a=$u.get(n);if(a)var l=a.get(null);else{a=new Map,$u.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var T=f[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),l=T)}l&&a.set(null,l)}f=r.instance,T=f.getAttribute("data-precedence"),p=a.get(T)||l,p===l&&a.set(null,f),a.set(T,f),this.count++,l=Qu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Ll={$$typeof:X,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function wA(n,r,a,l,f,p,T,w){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.hiddenUpdates=zi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function C_(n,r,a,l,f,p,T,w,j,F,W,te){return n=new wA(n,r,a,T,w,j,F,te),r=1,p===!0&&(r|=24),p=An(3,null,null,r),n.current=p,p.stateNode=n,r=Gd(),r.refCount++,n.pooledCache=r,r.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:r},$d(p),n}function N_(n){return n?(n=Ba,n):Ba}function I_(n,r,a,l,f,p){f=N_(f),l.context===null?l.context=f:l.pendingContext=f,l=Ur(r),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=Lr(n,l,r),a!==null&&(Nn(a,n,r),pl(a,n,r))}function j_(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function dm(n,r){j_(n,r),(n=n.alternate)&&j_(n,r)}function D_(n){if(n.tag===13){var r=La(n,67108864);r!==null&&Nn(r,n,67108864),dm(n,67108864)}}var Xu=!0;function bA(n,r,a,l){var f=$.T;$.T=null;var p=ae.p;try{ae.p=2,fm(n,r,a,l)}finally{ae.p=p,$.T=f}}function AA(n,r,a,l){var f=$.T;$.T=null;var p=ae.p;try{ae.p=8,fm(n,r,a,l)}finally{ae.p=p,$.T=f}}function fm(n,r,a,l){if(Xu){var f=mm(l);if(f===null)em(n,r,l,Wu,a),O_(n,l);else if(xA(f,n,r,a,l))l.stopPropagation();else if(O_(n,l),r&4&&-1<SA.indexOf(n)){for(;f!==null;){var p=hi(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=Xn(p.pendingLanes);if(T!==0){var w=p;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var j=1<<31-Zt(T);w.entanglements[1]|=j,T&=~j}Si(p),(Qe&6)===0&&(Ou=et()+500,Dl(0))}}break;case 13:w=La(p,2),w!==null&&Nn(w,p,2),Mu(),dm(p,2)}if(p=mm(l),p===null&&em(n,r,l,Wu,a),p===f)break;f=p}f!==null&&l.stopPropagation()}else em(n,r,l,null,a)}}function mm(n){return n=Mn(n),pm(n)}var Wu=null;function pm(n){if(Wu=null,n=Hi(n),n!==null){var r=c(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=d(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Wu=n,null}function k_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(As()){case Ui:return 2;case Li:return 8;case En:case Ss:return 32;case Bi:return 268435456;default:return 32}default:return 32}}var gm=!1,Zr=null,Jr=null,es=null,Bl=new Map,zl=new Map,ts=[],SA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O_(n,r){switch(n){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":Bl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(r.pointerId)}}function ql(n,r,a,l,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},r!==null&&(r=hi(r),r!==null&&D_(r)),n):(n.eventSystemFlags|=l,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function xA(n,r,a,l,f){switch(r){case"focusin":return Zr=ql(Zr,n,r,a,l,f),!0;case"dragenter":return Jr=ql(Jr,n,r,a,l,f),!0;case"mouseover":return es=ql(es,n,r,a,l,f),!0;case"pointerover":var p=f.pointerId;return Bl.set(p,ql(Bl.get(p)||null,n,r,a,l,f)),!0;case"gotpointercapture":return p=f.pointerId,zl.set(p,ql(zl.get(p)||null,n,r,a,l,f)),!0}return!1}function P_(n){var r=Hi(n.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){n.blockedOn=r,Mc(n.priority,function(){if(a.tag===13){var l=Cn();l=Nr(l);var f=La(a,l);f!==null&&Nn(f,a,l),dm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Zu(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=mm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Ki=l,a.target.dispatchEvent(l),Ki=null}else return r=hi(a),r!==null&&D_(r),n.blockedOn=a,!1;r.shift()}return!0}function M_(n,r,a){Zu(n)&&a.delete(r)}function RA(){gm=!1,Zr!==null&&Zu(Zr)&&(Zr=null),Jr!==null&&Zu(Jr)&&(Jr=null),es!==null&&Zu(es)&&(es=null),Bl.forEach(M_),zl.forEach(M_)}function Ju(n,r){n.blockedOn===r&&(n.blockedOn=null,gm||(gm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,RA)))}var eh=null;function V_(n){eh!==n&&(eh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){eh===n&&(eh=null);for(var r=0;r<n.length;r+=3){var a=n[r],l=n[r+1],f=n[r+2];if(typeof l!="function"){if(pm(l||a)===null)continue;break}var p=hi(a);p!==null&&(n.splice(r,3),r-=3,pf(p,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Hl(n){function r(j){return Ju(j,n)}Zr!==null&&Ju(Zr,n),Jr!==null&&Ju(Jr,n),es!==null&&Ju(es,n),Bl.forEach(r),zl.forEach(r);for(var a=0;a<ts.length;a++){var l=ts[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<ts.length&&(a=ts[0],a.blockedOn===null);)P_(a),a.blockedOn===null&&ts.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],p=a[l+1],T=f[bt]||null;if(typeof p=="function")T||V_(a);else if(T){var w=null;if(p&&p.hasAttribute("formAction")){if(f=p,T=p[bt]||null)w=T.formAction;else if(pm(f)!==null)continue}else w=T.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),V_(a)}}}function ym(n){this._internalRoot=n}th.prototype.render=ym.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Cn();I_(a,l,n,r,null,null)},th.prototype.unmount=ym.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;I_(n.current,2,null,n,null,null),Mu(),r[On]=null}};function th(n){this._internalRoot=n}th.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ir();n={blockedOn:null,target:n,priority:r};for(var a=0;a<ts.length&&r!==0&&r<ts[a].priority;a++);ts.splice(a,0,n),a===0&&P_(n)}};var U_=e.version;if(U_!=="19.1.0")throw Error(s(527,U_,"19.1.0"));ae.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=g(r),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var CA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{ht=nh.inject(CA),Ke=nh}catch{}}return Gl.createRoot=function(n,r){if(!o(n))throw Error(s(299));var a=!1,l="",f=ev,p=tv,T=nv,w=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=C_(n,1,!1,null,null,a,l,f,p,T,w,null),n[On]=r.current,Jf(n),new ym(r)},Gl.hydrateRoot=function(n,r,a){if(!o(n))throw Error(s(299));var l=!1,f="",p=ev,T=tv,w=nv,j=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(j=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),r=C_(n,1,!0,r,a??null,l,f,p,T,w,j,F),r.context=N_(null),a=r.current,l=Cn(),l=Nr(l),f=Ur(l),f.callback=null,Lr(a,f,l),a=l,r.current.lanes=a,qi(r,a),Si(r),n[On]=r.current,Jf(n),new th(r)},Gl.version="19.1.0",Gl}var Q_;function UA(){if(Q_)return Em.exports;Q_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Em.exports=VA(),Em.exports}var LA=UA(),Yl={},$_;function BA(){if($_)return Yl;$_=1,Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.parse=d,Yl.serialize=y;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,c=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function d(b,k){const C=new c,P=b.length;if(P<2)return C;const I=(k==null?void 0:k.decode)||_;let G=0;do{const J=b.indexOf("=",G);if(J===-1)break;const X=b.indexOf(";",G),oe=X===-1?P:X;if(J>oe){G=b.lastIndexOf(";",J-1)+1;continue}const ce=m(b,G,J),ye=g(b,J,ce),R=b.slice(ce,ye);if(C[R]===void 0){let x=m(b,J+1,oe),N=g(b,oe,x);const O=I(b.slice(x,N));C[R]=O}G=oe+1}while(G<P);return C}function m(b,k,C){do{const P=b.charCodeAt(k);if(P!==32&&P!==9)return k}while(++k<C);return C}function g(b,k,C){for(;k>C;){const P=b.charCodeAt(--k);if(P!==32&&P!==9)return k+1}return C}function y(b,k,C){const P=(C==null?void 0:C.encode)||encodeURIComponent;if(!i.test(b))throw new TypeError(`argument name is invalid: ${b}`);const I=P(k);if(!e.test(I))throw new TypeError(`argument val is invalid: ${k}`);let G=b+"="+I;if(!C)return G;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);G+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);G+="; Domain="+C.domain}if(C.path){if(!s.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);G+="; Path="+C.path}if(C.expires){if(!A(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);G+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(G+="; HttpOnly"),C.secure&&(G+="; Secure"),C.partitioned&&(G+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":G+="; Priority=Low";break;case"medium":G+="; Priority=Medium";break;case"high":G+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":G+="; SameSite=Strict";break;case"lax":G+="; SameSite=Lax";break;case"none":G+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return G}function _(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function A(b){return o.call(b)==="[object Date]"}return Yl}BA();var X_="popstate";function zA(i={}){function e(s,o){let{pathname:c,search:d,hash:m}=s.location;return Lm("",{pathname:c,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:lc(o)}return HA(e,t,null,i)}function ct(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function si(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qA(){return Math.random().toString(36).substring(2,10)}function W_(i,e){return{usr:i.state,key:i.key,idx:e}}function Lm(i,e,t=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Co(e):e,state:t,key:e&&e.key||s||qA()}}function lc({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Co(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function HA(i,e,t,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,d=o.history,m="POP",g=null,y=_();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function _(){return(d.state||{idx:null}).idx}function A(){m="POP";let I=_(),G=I==null?null:I-y;y=I,g&&g({action:m,location:P.location,delta:G})}function b(I,G){m="PUSH";let J=Lm(P.location,I,G);y=_()+1;let X=W_(J,y),oe=P.createHref(J);try{d.pushState(X,"",oe)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;o.location.assign(oe)}c&&g&&g({action:m,location:P.location,delta:1})}function k(I,G){m="REPLACE";let J=Lm(P.location,I,G);y=_();let X=W_(J,y),oe=P.createHref(J);d.replaceState(X,"",oe),c&&g&&g({action:m,location:P.location,delta:0})}function C(I){return FA(I)}let P={get action(){return m},get location(){return i(o,d)},listen(I){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(X_,A),g=I,()=>{o.removeEventListener(X_,A),g=null}},createHref(I){return e(o,I)},createURL:C,encodeLocation(I){let G=C(I);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:b,replace:k,go(I){return d.go(I)}};return P}function FA(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ct(t,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:lc(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function LE(i,e,t="/"){return GA(i,e,t,!1)}function GA(i,e,t,s){let o=typeof e=="string"?Co(e):e,c=_r(o.pathname||"/",t);if(c==null)return null;let d=BE(i);YA(d);let m=null;for(let g=0;m==null&&g<d.length;++g){let y=iS(c);m=tS(d[g],y,s)}return m}function BE(i,e=[],t=[],s=""){let o=(c,d,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};g.relativePath.startsWith("/")&&(ct(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length));let y=gr([s,g.relativePath]),_=t.concat(g);c.children&&c.children.length>0&&(ct(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),BE(c.children,e,_,y)),!(c.path==null&&!c.index)&&e.push({path:y,score:JA(y,c.index),routesMeta:_})};return i.forEach((c,d)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))o(c,d);else for(let g of zE(c.path))o(c,d,g)}),e}function zE(i){let e=i.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),c=t.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let d=zE(s.join("/")),m=[];return m.push(...d.map(g=>g===""?c:[c,g].join("/"))),o&&m.push(...d),m.map(g=>i.startsWith("/")&&g===""?"/":g)}function YA(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:eS(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var KA=/^:[\w-]+$/,QA=3,$A=2,XA=1,WA=10,ZA=-2,Z_=i=>i==="*";function JA(i,e){let t=i.split("/"),s=t.length;return t.some(Z_)&&(s+=ZA),e&&(s+=$A),t.filter(o=>!Z_(o)).reduce((o,c)=>o+(KA.test(c)?QA:c===""?XA:WA),s)}function eS(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function tS(i,e,t=!1){let{routesMeta:s}=i,o={},c="/",d=[];for(let m=0;m<s.length;++m){let g=s[m],y=m===s.length-1,_=c==="/"?e:e.slice(c.length)||"/",A=Ah({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},_),b=g.route;if(!A&&y&&t&&!s[s.length-1].route.index&&(A=Ah({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},_)),!A)return null;Object.assign(o,A.params),d.push({params:o,pathname:gr([c,A.pathname]),pathnameBase:oS(gr([c,A.pathnameBase])),route:b}),A.pathnameBase!=="/"&&(c=gr([c,A.pathnameBase]))}return d}function Ah(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,s]=nS(i.path,i.caseSensitive,i.end),o=e.match(t);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((y,{paramName:_,isOptional:A},b)=>{if(_==="*"){let C=m[b]||"";d=c.slice(0,c.length-C.length).replace(/(.)\/+$/,"$1")}const k=m[b];return A&&!k?y[_]=void 0:y[_]=(k||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:i}}function nS(i,e=!1,t=!0){si(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function iS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return si(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function _r(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=i.charAt(t);return s&&s!=="/"?null:i.slice(t)||"/"}function rS(i,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof i=="string"?Co(i):i;return{pathname:t?t.startsWith("/")?t:sS(t,e):e,search:lS(s),hash:cS(o)}}function sS(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Am(i,e,t,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function aS(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function qE(i){let e=aS(i);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function HE(i,e,t,s=!1){let o;typeof i=="string"?o=Co(i):(o={...i},ct(!o.pathname||!o.pathname.includes("?"),Am("?","pathname","search",o)),ct(!o.pathname||!o.pathname.includes("#"),Am("#","pathname","hash",o)),ct(!o.search||!o.search.includes("#"),Am("#","search","hash",o)));let c=i===""||o.pathname==="",d=c?"/":o.pathname,m;if(d==null)m=t;else{let A=e.length-1;if(!s&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),A-=1;o.pathname=b.join("/")}m=A>=0?e[A]:"/"}let g=rS(o,m),y=d&&d!=="/"&&d.endsWith("/"),_=(c||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||_)&&(g.pathname+="/"),g}var gr=i=>i.join("/").replace(/\/\/+/g,"/"),oS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),lS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,cS=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function uS(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var FE=["POST","PUT","PATCH","DELETE"];new Set(FE);var hS=["GET",...FE];new Set(hS);var No=U.createContext(null);No.displayName="DataRouter";var Gh=U.createContext(null);Gh.displayName="DataRouterState";var GE=U.createContext({isTransitioning:!1});GE.displayName="ViewTransition";var dS=U.createContext(new Map);dS.displayName="Fetchers";var fS=U.createContext(null);fS.displayName="Await";var Oi=U.createContext(null);Oi.displayName="Navigation";var _c=U.createContext(null);_c.displayName="Location";var Pi=U.createContext({outlet:null,matches:[],isDataRoute:!1});Pi.displayName="Route";var yp=U.createContext(null);yp.displayName="RouteError";function mS(i,{relative:e}={}){ct(Ec(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=U.useContext(Oi),{hash:o,pathname:c,search:d}=Tc(i,{relative:e}),m=c;return t!=="/"&&(m=c==="/"?t:gr([t,c])),s.createHref({pathname:m,search:d,hash:o})}function Ec(){return U.useContext(_c)!=null}function Sr(){return ct(Ec(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(_c).location}var YE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function KE(i){U.useContext(Oi).static||U.useLayoutEffect(i)}function Es(){let{isDataRoute:i}=U.useContext(Pi);return i?RS():pS()}function pS(){ct(Ec(),"useNavigate() may be used only in the context of a <Router> component.");let i=U.useContext(No),{basename:e,navigator:t}=U.useContext(Oi),{matches:s}=U.useContext(Pi),{pathname:o}=Sr(),c=JSON.stringify(qE(s)),d=U.useRef(!1);return KE(()=>{d.current=!0}),U.useCallback((g,y={})=>{if(si(d.current,YE),!d.current)return;if(typeof g=="number"){t.go(g);return}let _=HE(g,JSON.parse(c),o,y.relative==="path");i==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:gr([e,_.pathname])),(y.replace?t.replace:t.push)(_,y.state,y)},[e,t,c,o,i])}U.createContext(null);function vp(){let{matches:i}=U.useContext(Pi),e=i[i.length-1];return e?e.params:{}}function Tc(i,{relative:e}={}){let{matches:t}=U.useContext(Pi),{pathname:s}=Sr(),o=JSON.stringify(qE(t));return U.useMemo(()=>HE(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function gS(i,e){return QE(i,e)}function QE(i,e,t,s){var J;ct(Ec(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:c}=U.useContext(Oi),{matches:d}=U.useContext(Pi),m=d[d.length-1],g=m?m.params:{},y=m?m.pathname:"/",_=m?m.pathnameBase:"/",A=m&&m.route;{let X=A&&A.path||"";$E(y,!A||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let b=Sr(),k;if(e){let X=typeof e=="string"?Co(e):e;ct(_==="/"||((J=X.pathname)==null?void 0:J.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${X.pathname}" was given in the \`location\` prop.`),k=X}else k=b;let C=k.pathname||"/",P=C;if(_!=="/"){let X=_.replace(/^\//,"").split("/");P="/"+C.replace(/^\//,"").split("/").slice(X.length).join("/")}let I=!c&&t&&t.matches&&t.matches.length>0?t.matches:LE(i,{pathname:P});si(A||I!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),si(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=TS(I&&I.map(X=>Object.assign({},X,{params:Object.assign({},g,X.params),pathname:gr([_,o.encodeLocation?o.encodeLocation(X.pathname).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?_:gr([_,o.encodeLocation?o.encodeLocation(X.pathnameBase).pathname:X.pathnameBase])})),d,t,s);return e&&G?U.createElement(_c.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},G):G}function yS(){let i=xS(),e=uS(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",i),d=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:c},"ErrorBoundary")," or"," ",U.createElement("code",{style:c},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),t?U.createElement("pre",{style:o},t):null,d)}var vS=U.createElement(yS,null),_S=class extends U.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?U.createElement(Pi.Provider,{value:this.props.routeContext},U.createElement(yp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ES({routeContext:i,match:e,children:t}){let s=U.useContext(No);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(Pi.Provider,{value:i},t)}function TS(i,e=[],t=null,s=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let o=i,c=t==null?void 0:t.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);ct(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let d=!1,m=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=g),y.route.id){let{loaderData:_,errors:A}=t,b=y.route.loader&&!_.hasOwnProperty(y.route.id)&&(!A||A[y.route.id]===void 0);if(y.route.lazy||b){d=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((g,y,_)=>{let A,b=!1,k=null,C=null;t&&(A=c&&y.route.id?c[y.route.id]:void 0,k=y.route.errorElement||vS,d&&(m<0&&_===0?($E("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,C=null):m===_&&(b=!0,C=y.route.hydrateFallbackElement||null)));let P=e.concat(o.slice(0,_+1)),I=()=>{let G;return A?G=k:b?G=C:y.route.Component?G=U.createElement(y.route.Component,null):y.route.element?G=y.route.element:G=g,U.createElement(ES,{match:y,routeContext:{outlet:g,matches:P,isDataRoute:t!=null},children:G})};return t&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?U.createElement(_S,{location:t.location,revalidation:t.revalidation,component:k,error:A,children:I(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):I()},null)}function _p(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wS(i){let e=U.useContext(No);return ct(e,_p(i)),e}function bS(i){let e=U.useContext(Gh);return ct(e,_p(i)),e}function AS(i){let e=U.useContext(Pi);return ct(e,_p(i)),e}function Ep(i){let e=AS(i),t=e.matches[e.matches.length-1];return ct(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function SS(){return Ep("useRouteId")}function xS(){var s;let i=U.useContext(yp),e=bS("useRouteError"),t=Ep("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[t]}function RS(){let{router:i}=wS("useNavigate"),e=Ep("useNavigate"),t=U.useRef(!1);return KE(()=>{t.current=!0}),U.useCallback(async(o,c={})=>{si(t.current,YE),t.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var J_={};function $E(i,e,t){!e&&!J_[i]&&(J_[i]=!0,si(!1,t))}U.memo(CS);function CS({routes:i,future:e,state:t}){return QE(i,void 0,t,e)}function qt(i){ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function NS({basename:i="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:c=!1}){ct(!Ec(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=i.replace(/^\/*/,"/"),m=U.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof t=="string"&&(t=Co(t));let{pathname:g="/",search:y="",hash:_="",state:A=null,key:b="default"}=t,k=U.useMemo(()=>{let C=_r(g,d);return C==null?null:{location:{pathname:C,search:y,hash:_,state:A,key:b},navigationType:s}},[d,g,y,_,A,b,s]);return si(k!=null,`<Router basename="${d}"> is not able to match the URL "${g}${y}${_}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:U.createElement(Oi.Provider,{value:m},U.createElement(_c.Provider,{children:e,value:k}))}function IS({children:i,location:e}){return gS(Bm(i),e)}function Bm(i,e=[]){let t=[];return U.Children.forEach(i,(s,o)=>{if(!U.isValidElement(s))return;let c=[...e,o];if(s.type===U.Fragment){t.push.apply(t,Bm(s.props.children,c));return}ct(s.type===qt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ct(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Bm(s.props.children,c)),t.push(d)}),t}var dh="get",fh="application/x-www-form-urlencoded";function Yh(i){return i!=null&&typeof i.tagName=="string"}function jS(i){return Yh(i)&&i.tagName.toLowerCase()==="button"}function DS(i){return Yh(i)&&i.tagName.toLowerCase()==="form"}function kS(i){return Yh(i)&&i.tagName.toLowerCase()==="input"}function OS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function PS(i,e){return i.button===0&&(!e||e==="_self")&&!OS(i)}function zm(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,t)=>{let s=i[t];return e.concat(Array.isArray(s)?s.map(o=>[t,o]):[[t,s]])},[]))}function MS(i,e){let t=zm(i);return e&&e.forEach((s,o)=>{t.has(o)||e.getAll(o).forEach(c=>{t.append(o,c)})}),t}var ih=null;function VS(){if(ih===null)try{new FormData(document.createElement("form"),0),ih=!1}catch{ih=!0}return ih}var US=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sm(i){return i!=null&&!US.has(i)?(si(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fh}"`),null):i}function LS(i,e){let t,s,o,c,d;if(DS(i)){let m=i.getAttribute("action");s=m?_r(m,e):null,t=i.getAttribute("method")||dh,o=Sm(i.getAttribute("enctype"))||fh,c=new FormData(i)}else if(jS(i)||kS(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||m.getAttribute("action");if(s=g?_r(g,e):null,t=i.getAttribute("formmethod")||m.getAttribute("method")||dh,o=Sm(i.getAttribute("formenctype"))||Sm(m.getAttribute("enctype"))||fh,c=new FormData(m,i),!VS()){let{name:y,type:_,value:A}=i;if(_==="image"){let b=y?`${y}.`:"";c.append(`${b}x`,"0"),c.append(`${b}y`,"0")}else y&&c.append(y,A)}}else{if(Yh(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=dh,s=null,o=fh,d=i}return c&&o==="text/plain"&&(d=c,c=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:c,body:d}}function Tp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function BS(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zS(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function qS(i,e,t){let s=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await BS(c,t);return d.links?d.links():[]}return[]}));return YS(s.flat(1).filter(zS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function e0(i,e,t,s,o,c){let d=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,m=(g,y)=>{var _;return t[y].pathname!==g.pathname||((_=t[y].route.path)==null?void 0:_.endsWith("*"))&&t[y].params["*"]!==g.params["*"]};return c==="assets"?e.filter((g,y)=>d(g,y)||m(g,y)):c==="data"?e.filter((g,y)=>{var A;let _=s.routes[g.route.id];if(!_||!_.hasLoader)return!1;if(d(g,y)||m(g,y))return!0;if(g.route.shouldRevalidate){let b=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((A=t[0])==null?void 0:A.params)||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function HS(i,e,{includeHydrateFallback:t}={}){return FS(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function FS(i){return[...new Set(i)]}function GS(i){let e={},t=Object.keys(i).sort();for(let s of t)e[s]=i[s];return e}function YS(i,e){let t=new Set;return new Set(e),i.reduce((s,o)=>{let c=JSON.stringify(GS(o));return t.has(c)||(t.add(c),s.push({key:c,link:o})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var KS=new Set([100,101,204,205]);function QS(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&_r(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function XE(){let i=U.useContext(No);return Tp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function $S(){let i=U.useContext(Gh);return Tp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var wp=U.createContext(void 0);wp.displayName="FrameworkContext";function WE(){let i=U.useContext(wp);return Tp(i,"You must render this element inside a <HydratedRouter> element"),i}function XS(i,e){let t=U.useContext(wp),[s,o]=U.useState(!1),[c,d]=U.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:y,onMouseLeave:_,onTouchStart:A}=e,b=U.useRef(null);U.useEffect(()=>{if(i==="render"&&d(!0),i==="viewport"){let P=G=>{G.forEach(J=>{d(J.isIntersecting)})},I=new IntersectionObserver(P,{threshold:.5});return b.current&&I.observe(b.current),()=>{I.disconnect()}}},[i]),U.useEffect(()=>{if(s){let P=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(P)}}},[s]);let k=()=>{o(!0)},C=()=>{o(!1),d(!1)};return t?i!=="intent"?[c,b,{}]:[c,b,{onFocus:Kl(m,k),onBlur:Kl(g,C),onMouseEnter:Kl(y,k),onMouseLeave:Kl(_,C),onTouchStart:Kl(A,k)}]:[!1,b,{}]}function Kl(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function WS({page:i,...e}){let{router:t}=XE(),s=U.useMemo(()=>LE(t.routes,i,t.basename),[t.routes,i,t.basename]);return s?U.createElement(JS,{page:i,matches:s,...e}):null}function ZS(i){let{manifest:e,routeModules:t}=WE(),[s,o]=U.useState([]);return U.useEffect(()=>{let c=!1;return qS(i,e,t).then(d=>{c||o(d)}),()=>{c=!0}},[i,e,t]),s}function JS({page:i,matches:e,...t}){let s=Sr(),{manifest:o,routeModules:c}=WE(),{basename:d}=XE(),{loaderData:m,matches:g}=$S(),y=U.useMemo(()=>e0(i,e,g,o,s,"data"),[i,e,g,o,s]),_=U.useMemo(()=>e0(i,e,g,o,s,"assets"),[i,e,g,o,s]),A=U.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let C=new Set,P=!1;if(e.forEach(G=>{var X;let J=o.routes[G.route.id];!J||!J.hasLoader||(!y.some(oe=>oe.route.id===G.route.id)&&G.route.id in m&&((X=c[G.route.id])!=null&&X.shouldRevalidate)||J.hasClientLoader?P=!0:C.add(G.route.id))}),C.size===0)return[];let I=QS(i,d);return P&&C.size>0&&I.searchParams.set("_routes",e.filter(G=>C.has(G.route.id)).map(G=>G.route.id).join(",")),[I.pathname+I.search]},[d,m,s,o,y,e,i,c]),b=U.useMemo(()=>HS(_,o),[_,o]),k=ZS(_);return U.createElement(U.Fragment,null,A.map(C=>U.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),b.map(C=>U.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),k.map(({key:C,link:P})=>U.createElement("link",{key:C,...P})))}function ex(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ZE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ZE&&(window.__reactRouterVersion="7.6.0")}catch{}function tx({basename:i,children:e,window:t}){let s=U.useRef();s.current==null&&(s.current=zA({window:t,v5Compat:!0}));let o=s.current,[c,d]=U.useState({action:o.action,location:o.location}),m=U.useCallback(g=>{U.startTransition(()=>d(g))},[d]);return U.useLayoutEffect(()=>o.listen(m),[o,m]),U.createElement(NS,{basename:i,children:e,location:c.location,navigationType:c.action,navigator:o})}var JE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pe=U.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:c,replace:d,state:m,target:g,to:y,preventScrollReset:_,viewTransition:A,...b},k){let{basename:C}=U.useContext(Oi),P=typeof y=="string"&&JE.test(y),I,G=!1;if(typeof y=="string"&&P&&(I=y,ZE))try{let N=new URL(window.location.href),O=y.startsWith("//")?new URL(N.protocol+y):new URL(y),L=_r(O.pathname,C);O.origin===N.origin&&L!=null?y=L+O.search+O.hash:G=!0}catch{si(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let J=mS(y,{relative:o}),[X,oe,ce]=XS(s,b),ye=sx(y,{replace:d,state:m,target:g,preventScrollReset:_,relative:o,viewTransition:A});function R(N){e&&e(N),N.defaultPrevented||ye(N)}let x=U.createElement("a",{...b,...ce,href:I||J,onClick:G||c?e:R,ref:ex(k,oe),target:g,"data-discover":!P&&t==="render"?"true":void 0});return X&&!P?U.createElement(U.Fragment,null,x,U.createElement(WS,{page:J})):x});pe.displayName="Link";var nx=U.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:c,to:d,viewTransition:m,children:g,...y},_){let A=Tc(d,{relative:y.relative}),b=Sr(),k=U.useContext(Gh),{navigator:C,basename:P}=U.useContext(Oi),I=k!=null&&ux(A)&&m===!0,G=C.encodeLocation?C.encodeLocation(A).pathname:A.pathname,J=b.pathname,X=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;t||(J=J.toLowerCase(),X=X?X.toLowerCase():null,G=G.toLowerCase()),X&&P&&(X=_r(X,P)||X);const oe=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let ce=J===G||!o&&J.startsWith(G)&&J.charAt(oe)==="/",ye=X!=null&&(X===G||!o&&X.startsWith(G)&&X.charAt(G.length)==="/"),R={isActive:ce,isPending:ye,isTransitioning:I},x=ce?e:void 0,N;typeof s=="function"?N=s(R):N=[s,ce?"active":null,ye?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let O=typeof c=="function"?c(R):c;return U.createElement(pe,{...y,"aria-current":x,className:N,ref:_,style:O,to:d,viewTransition:m},typeof g=="function"?g(R):g)});nx.displayName="NavLink";var ix=U.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:c,method:d=dh,action:m,onSubmit:g,relative:y,preventScrollReset:_,viewTransition:A,...b},k)=>{let C=lx(),P=cx(m,{relative:y}),I=d.toLowerCase()==="get"?"get":"post",G=typeof m=="string"&&JE.test(m),J=X=>{if(g&&g(X),X.defaultPrevented)return;X.preventDefault();let oe=X.nativeEvent.submitter,ce=(oe==null?void 0:oe.getAttribute("formmethod"))||d;C(oe||X.currentTarget,{fetcherKey:e,method:ce,navigate:t,replace:o,state:c,relative:y,preventScrollReset:_,viewTransition:A})};return U.createElement("form",{ref:k,method:I,action:P,onSubmit:s?g:J,...b,"data-discover":!G&&i==="render"?"true":void 0})});ix.displayName="Form";function rx(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eT(i){let e=U.useContext(No);return ct(e,rx(i)),e}function sx(i,{target:e,replace:t,state:s,preventScrollReset:o,relative:c,viewTransition:d}={}){let m=Es(),g=Sr(),y=Tc(i,{relative:c});return U.useCallback(_=>{if(PS(_,e)){_.preventDefault();let A=t!==void 0?t:lc(g)===lc(y);m(i,{replace:A,state:s,preventScrollReset:o,relative:c,viewTransition:d})}},[g,m,y,t,s,e,i,o,c,d])}function tT(i){si(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=U.useRef(zm(i)),t=U.useRef(!1),s=Sr(),o=U.useMemo(()=>MS(s.search,t.current?null:e.current),[s.search]),c=Es(),d=U.useCallback((m,g)=>{const y=zm(typeof m=="function"?m(o):m);t.current=!0,c("?"+y,g)},[c,o]);return[o,d]}var ax=0,ox=()=>`__${String(++ax)}__`;function lx(){let{router:i}=eT("useSubmit"),{basename:e}=U.useContext(Oi),t=SS();return U.useCallback(async(s,o={})=>{let{action:c,method:d,encType:m,formData:g,body:y}=LS(s,e);if(o.navigate===!1){let _=o.fetcherKey||ox();await i.fetch(_,t,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,t])}function cx(i,{relative:e}={}){let{basename:t}=U.useContext(Oi),s=U.useContext(Pi);ct(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...Tc(i||".",{relative:e})},d=Sr();if(i==null){c.search=d.search;let m=new URLSearchParams(c.search),g=m.getAll("index");if(g.some(_=>_==="")){m.delete("index"),g.filter(A=>A).forEach(A=>m.append("index",A));let _=m.toString();c.search=_?`?${_}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:gr([t,c.pathname])),lc(c)}function ux(i,e={}){let t=U.useContext(GE);ct(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=eT("useViewTransitionState"),o=Tc(i,{relative:e.relative});if(!t.isTransitioning)return!1;let c=_r(t.currentLocation.pathname,s)||t.currentLocation.pathname,d=_r(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Ah(o.pathname,d)!=null||Ah(o.pathname,c)!=null}[...KS];const hx=()=>{};var t0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},dx=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const o=i[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[t++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[t++],d=i[t++],m=i[t++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=i[t++],d=i[t++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},iT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const c=i[o],d=o+1<i.length,m=d?i[o+1]:0,g=o+2<i.length,y=g?i[o+2]:0,_=c>>2,A=(c&3)<<4|m>>4;let b=(m&15)<<2|y>>6,k=y&63;g||(k=64,d||(b=64)),s.push(t[_],t[A],t[b],t[k])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(nT(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):dx(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const c=t[i.charAt(o++)],m=o<i.length?t[i.charAt(o)]:0;++o;const y=o<i.length?t[i.charAt(o)]:64;++o;const A=o<i.length?t[i.charAt(o)]:64;if(++o,c==null||m==null||y==null||A==null)throw new fx;const b=c<<2|m>>4;if(s.push(b),y!==64){const k=m<<4&240|y>>2;if(s.push(k),A!==64){const C=y<<6&192|A;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class fx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mx=function(i){const e=nT(i);return iT.encodeByteArray(e,!0)},Sh=function(i){return mx(i).replace(/\./g,"")},rT=function(i){try{return iT.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=()=>px().__FIREBASE_DEFAULTS__,yx=()=>{if(typeof process>"u"||typeof t0>"u")return;const i=t0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},vx=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&rT(i[1]);return e&&JSON.parse(e)},Kh=()=>{try{return hx()||gx()||yx()||vx()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},sT=i=>{var e,t;return(t=(e=Kh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},aT=i=>{const e=sT(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},oT=()=>{var i;return(i=Kh())===null||i===void 0?void 0:i.config},lT=i=>{var e;return(e=Kh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(i){return i.endsWith(".cloudworkstations.dev")}async function bp(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Sh(JSON.stringify(t)),Sh(JSON.stringify(d)),""].join(".")}const tc={};function Ex(){const i={prod:[],emulator:[]};for(const e of Object.keys(tc))tc[e]?i.emulator.push(e):i.prod.push(e);return i}function Tx(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let n0=!1;function Io(i,e){if(typeof window>"u"||typeof document>"u"||!ga(window.location.host)||tc[i]===e||tc[i]||n0)return;tc[i]=e;function t(b){return`__firebase__banner__${b}`}const s="__firebase__banner",c=Ex().prod.length>0;function d(){const b=document.getElementById(s);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function g(b,k){b.setAttribute("width","24"),b.setAttribute("id",k),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function y(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{n0=!0,d()},b}function _(b,k){b.setAttribute("id",k),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function A(){const b=Tx(s),k=t("text"),C=document.getElementById(k)||document.createElement("span"),P=t("learnmore"),I=document.getElementById(P)||document.createElement("a"),G=t("preprendIcon"),J=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const X=b.element;m(X),_(I,P);const oe=y();g(J,G),X.append(J,C,I,oe),document.body.appendChild(X)}c?(C.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function bx(){var i;const e=(i=Kh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ax(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Sx(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function xx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rx(){const i=sn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Cx(){return!bx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nx(){try{return typeof indexedDB=="object"}catch{return!1}}function Ix(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="FirebaseError";class Mi extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=jx,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wc.prototype.create)}}class wc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?Dx(c,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Mi(o,m,s)}}function Dx(i,e){return i.replace(kx,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const kx=/\{\$([^}]+)}/g;function Ox(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ca(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const c=i[o],d=e[o];if(i0(c)&&i0(d)){if(!ca(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function i0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function $l(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Xl(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function Px(i,e){const t=new Mx(i,e);return t.subscribe.bind(t)}class Mx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");Vx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=xm),o.error===void 0&&(o.error=xm),o.complete===void 0&&(o.complete=xm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vx(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function xm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(i){return i&&i._delegate?i._delegate:i}class ds{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new _x;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bx(e))try{this.getOrInitializeService({instanceIdentifier:sa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sa){return this.instances.has(e)}getOptions(e=sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&d.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),c=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(o,c);const d=this.instances.get(o);return d&&e(d,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Lx(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=sa){return this.component?this.component.multipleInstances?e:sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Lx(i){return i===sa?void 0:i}function Bx(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ux(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Pe||(Pe={}));const qx={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},Hx=Pe.INFO,Fx={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},Gx=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=Fx[e];if(o)console[o](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ap{constructor(e){this.name=e,this._logLevel=Hx,this._logHandler=Gx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const Yx=(i,e)=>e.some(t=>i instanceof t);let r0,s0;function Kx(){return r0||(r0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qx(){return s0||(s0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uT=new WeakMap,qm=new WeakMap,hT=new WeakMap,Rm=new WeakMap,Sp=new WeakMap;function $x(i){const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{t(ls(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&uT.set(t,i)}).catch(()=>{}),Sp.set(e,i),e}function Xx(i){if(qm.has(i))return;const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{t(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});qm.set(i,e)}let Hm={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return qm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||hT.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ls(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Wx(i){Hm=i(Hm)}function Zx(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(Cm(this),e,...t);return hT.set(s,e.sort?e.sort():[e]),ls(s)}:Qx().includes(i)?function(...e){return i.apply(Cm(this),e),ls(uT.get(this))}:function(...e){return ls(i.apply(Cm(this),e))}}function Jx(i){return typeof i=="function"?Zx(i):(i instanceof IDBTransaction&&Xx(i),Yx(i,Kx())?new Proxy(i,Hm):i)}function ls(i){if(i instanceof IDBRequest)return $x(i);if(Rm.has(i))return Rm.get(i);const e=Jx(i);return e!==i&&(Rm.set(i,e),Sp.set(e,i)),e}const Cm=i=>Sp.get(i);function eR(i,e,{blocked:t,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(i,e),m=ls(d);return s&&d.addEventListener("upgradeneeded",g=>{s(ls(d.result),g.oldVersion,g.newVersion,ls(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const tR=["get","getKey","getAll","getAllKeys","count"],nR=["put","add","delete","clear"],Nm=new Map;function a0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Nm.get(e))return Nm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=nR.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||tR.includes(t)))return;const c=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),o&&g.done]))[0]};return Nm.set(e,c),c}Wx(i=>({...i,get:(e,t,s)=>a0(e,t)||i.get(e,t,s),has:(e,t)=>!!a0(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(rR(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function rR(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fm="@firebase/app",o0="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new Ap("@firebase/app"),sR="@firebase/app-compat",aR="@firebase/analytics-compat",oR="@firebase/analytics",lR="@firebase/app-check-compat",cR="@firebase/app-check",uR="@firebase/auth",hR="@firebase/auth-compat",dR="@firebase/database",fR="@firebase/data-connect",mR="@firebase/database-compat",pR="@firebase/functions",gR="@firebase/functions-compat",yR="@firebase/installations",vR="@firebase/installations-compat",_R="@firebase/messaging",ER="@firebase/messaging-compat",TR="@firebase/performance",wR="@firebase/performance-compat",bR="@firebase/remote-config",AR="@firebase/remote-config-compat",SR="@firebase/storage",xR="@firebase/storage-compat",RR="@firebase/firestore",CR="@firebase/vertexai",NR="@firebase/firestore-compat",IR="firebase",jR="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]",DR={[Fm]:"fire-core",[sR]:"fire-core-compat",[oR]:"fire-analytics",[aR]:"fire-analytics-compat",[cR]:"fire-app-check",[lR]:"fire-app-check-compat",[uR]:"fire-auth",[hR]:"fire-auth-compat",[dR]:"fire-rtdb",[fR]:"fire-data-connect",[mR]:"fire-rtdb-compat",[pR]:"fire-fn",[gR]:"fire-fn-compat",[yR]:"fire-iid",[vR]:"fire-iid-compat",[_R]:"fire-fcm",[ER]:"fire-fcm-compat",[TR]:"fire-perf",[wR]:"fire-perf-compat",[bR]:"fire-rc",[AR]:"fire-rc-compat",[SR]:"fire-gcs",[xR]:"fire-gcs-compat",[RR]:"fire-fst",[NR]:"fire-fst-compat",[CR]:"fire-vertex","fire-js":"fire-js",[IR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Map,kR=new Map,Ym=new Map;function l0(i,e){try{i.container.addComponent(e)}catch(t){Er.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function ua(i){const e=i.name;if(Ym.has(e))return Er.debug(`There were multiple attempts to register component ${e}.`),!1;Ym.set(e,i);for(const t of xh.values())l0(t,i);for(const t of kR.values())l0(t,i);return!0}function Qh(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function yn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new wc("app","Firebase",OR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=jR;function dT(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Gm,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw cs.create("bad-app-name",{appName:String(o)});if(t||(t=oT()),!t)throw cs.create("no-options");const c=xh.get(o);if(c){if(ca(t,c.options)&&ca(s,c.config))return c;throw cs.create("duplicate-app",{appName:o})}const d=new zx(o);for(const g of Ym.values())d.addComponent(g);const m=new PR(t,s,d);return xh.set(o,m),m}function xp(i=Gm){const e=xh.get(i);if(!e&&i===Gm&&oT())return dT();if(!e)throw cs.create("no-app",{appName:i});return e}function Ci(i,e,t){var s;let o=(s=DR[i])!==null&&s!==void 0?s:i;t&&(o+=`-${t}`);const c=o.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const m=[`Unable to register library "${o}" with version "${e}":`];c&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Er.warn(m.join(" "));return}ua(new ds(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="firebase-heartbeat-database",VR=1,cc="firebase-heartbeat-store";let Im=null;function fT(){return Im||(Im=eR(MR,VR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(cc)}catch(t){console.warn(t)}}}}).catch(i=>{throw cs.create("idb-open",{originalErrorMessage:i.message})})),Im}async function UR(i){try{const t=(await fT()).transaction(cc),s=await t.objectStore(cc).get(mT(i));return await t.done,s}catch(e){if(e instanceof Mi)Er.warn(e.message);else{const t=cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Er.warn(t.message)}}}async function c0(i,e){try{const s=(await fT()).transaction(cc,"readwrite");await s.objectStore(cc).put(e,mT(i)),await s.done}catch(t){if(t instanceof Mi)Er.warn(t.message);else{const s=cs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Er.warn(s.message)}}}function mT(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=1024,BR=30;class zR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HR(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=u0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>BR){const d=FR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Er.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=u0(),{heartbeatsToSend:s,unsentEntries:o}=qR(this._heartbeatsCache.heartbeats),c=Sh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Er.warn(t),""}}}function u0(){return new Date().toISOString().substring(0,10)}function qR(i,e=LR){const t=[];let s=i.slice();for(const o of i){const c=t.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),h0(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),h0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class HR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nx()?Ix().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await UR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return c0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return c0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function h0(i){return Sh(JSON.stringify({version:2,heartbeats:i})).length}function FR(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(i){ua(new ds("platform-logger",e=>new iR(e),"PRIVATE")),ua(new ds("heartbeat",e=>new zR(e),"PRIVATE")),Ci(Fm,o0,i),Ci(Fm,o0,"esm2017"),Ci("fire-js","")}GR("");var YR="firebase",KR="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ci(YR,KR,"app");var d0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,pT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,x){function N(){}N.prototype=x.prototype,R.D=x.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(O,L,B){for(var D=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)D[wt-2]=arguments[wt];return x.prototype[L].apply(O,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,x,N){N||(N=0);var O=Array(16);if(typeof x=="string")for(var L=0;16>L;++L)O[L]=x.charCodeAt(N++)|x.charCodeAt(N++)<<8|x.charCodeAt(N++)<<16|x.charCodeAt(N++)<<24;else for(L=0;16>L;++L)O[L]=x[N++]|x[N++]<<8|x[N++]<<16|x[N++]<<24;x=R.g[0],N=R.g[1],L=R.g[2];var B=R.g[3],D=x+(B^N&(L^B))+O[0]+3614090360&4294967295;x=N+(D<<7&4294967295|D>>>25),D=B+(L^x&(N^L))+O[1]+3905402710&4294967295,B=x+(D<<12&4294967295|D>>>20),D=L+(N^B&(x^N))+O[2]+606105819&4294967295,L=B+(D<<17&4294967295|D>>>15),D=N+(x^L&(B^x))+O[3]+3250441966&4294967295,N=L+(D<<22&4294967295|D>>>10),D=x+(B^N&(L^B))+O[4]+4118548399&4294967295,x=N+(D<<7&4294967295|D>>>25),D=B+(L^x&(N^L))+O[5]+1200080426&4294967295,B=x+(D<<12&4294967295|D>>>20),D=L+(N^B&(x^N))+O[6]+2821735955&4294967295,L=B+(D<<17&4294967295|D>>>15),D=N+(x^L&(B^x))+O[7]+4249261313&4294967295,N=L+(D<<22&4294967295|D>>>10),D=x+(B^N&(L^B))+O[8]+1770035416&4294967295,x=N+(D<<7&4294967295|D>>>25),D=B+(L^x&(N^L))+O[9]+2336552879&4294967295,B=x+(D<<12&4294967295|D>>>20),D=L+(N^B&(x^N))+O[10]+4294925233&4294967295,L=B+(D<<17&4294967295|D>>>15),D=N+(x^L&(B^x))+O[11]+2304563134&4294967295,N=L+(D<<22&4294967295|D>>>10),D=x+(B^N&(L^B))+O[12]+1804603682&4294967295,x=N+(D<<7&4294967295|D>>>25),D=B+(L^x&(N^L))+O[13]+4254626195&4294967295,B=x+(D<<12&4294967295|D>>>20),D=L+(N^B&(x^N))+O[14]+2792965006&4294967295,L=B+(D<<17&4294967295|D>>>15),D=N+(x^L&(B^x))+O[15]+1236535329&4294967295,N=L+(D<<22&4294967295|D>>>10),D=x+(L^B&(N^L))+O[1]+4129170786&4294967295,x=N+(D<<5&4294967295|D>>>27),D=B+(N^L&(x^N))+O[6]+3225465664&4294967295,B=x+(D<<9&4294967295|D>>>23),D=L+(x^N&(B^x))+O[11]+643717713&4294967295,L=B+(D<<14&4294967295|D>>>18),D=N+(B^x&(L^B))+O[0]+3921069994&4294967295,N=L+(D<<20&4294967295|D>>>12),D=x+(L^B&(N^L))+O[5]+3593408605&4294967295,x=N+(D<<5&4294967295|D>>>27),D=B+(N^L&(x^N))+O[10]+38016083&4294967295,B=x+(D<<9&4294967295|D>>>23),D=L+(x^N&(B^x))+O[15]+3634488961&4294967295,L=B+(D<<14&4294967295|D>>>18),D=N+(B^x&(L^B))+O[4]+3889429448&4294967295,N=L+(D<<20&4294967295|D>>>12),D=x+(L^B&(N^L))+O[9]+568446438&4294967295,x=N+(D<<5&4294967295|D>>>27),D=B+(N^L&(x^N))+O[14]+3275163606&4294967295,B=x+(D<<9&4294967295|D>>>23),D=L+(x^N&(B^x))+O[3]+4107603335&4294967295,L=B+(D<<14&4294967295|D>>>18),D=N+(B^x&(L^B))+O[8]+1163531501&4294967295,N=L+(D<<20&4294967295|D>>>12),D=x+(L^B&(N^L))+O[13]+2850285829&4294967295,x=N+(D<<5&4294967295|D>>>27),D=B+(N^L&(x^N))+O[2]+4243563512&4294967295,B=x+(D<<9&4294967295|D>>>23),D=L+(x^N&(B^x))+O[7]+1735328473&4294967295,L=B+(D<<14&4294967295|D>>>18),D=N+(B^x&(L^B))+O[12]+2368359562&4294967295,N=L+(D<<20&4294967295|D>>>12),D=x+(N^L^B)+O[5]+4294588738&4294967295,x=N+(D<<4&4294967295|D>>>28),D=B+(x^N^L)+O[8]+2272392833&4294967295,B=x+(D<<11&4294967295|D>>>21),D=L+(B^x^N)+O[11]+1839030562&4294967295,L=B+(D<<16&4294967295|D>>>16),D=N+(L^B^x)+O[14]+4259657740&4294967295,N=L+(D<<23&4294967295|D>>>9),D=x+(N^L^B)+O[1]+2763975236&4294967295,x=N+(D<<4&4294967295|D>>>28),D=B+(x^N^L)+O[4]+1272893353&4294967295,B=x+(D<<11&4294967295|D>>>21),D=L+(B^x^N)+O[7]+4139469664&4294967295,L=B+(D<<16&4294967295|D>>>16),D=N+(L^B^x)+O[10]+3200236656&4294967295,N=L+(D<<23&4294967295|D>>>9),D=x+(N^L^B)+O[13]+681279174&4294967295,x=N+(D<<4&4294967295|D>>>28),D=B+(x^N^L)+O[0]+3936430074&4294967295,B=x+(D<<11&4294967295|D>>>21),D=L+(B^x^N)+O[3]+3572445317&4294967295,L=B+(D<<16&4294967295|D>>>16),D=N+(L^B^x)+O[6]+76029189&4294967295,N=L+(D<<23&4294967295|D>>>9),D=x+(N^L^B)+O[9]+3654602809&4294967295,x=N+(D<<4&4294967295|D>>>28),D=B+(x^N^L)+O[12]+3873151461&4294967295,B=x+(D<<11&4294967295|D>>>21),D=L+(B^x^N)+O[15]+530742520&4294967295,L=B+(D<<16&4294967295|D>>>16),D=N+(L^B^x)+O[2]+3299628645&4294967295,N=L+(D<<23&4294967295|D>>>9),D=x+(L^(N|~B))+O[0]+4096336452&4294967295,x=N+(D<<6&4294967295|D>>>26),D=B+(N^(x|~L))+O[7]+1126891415&4294967295,B=x+(D<<10&4294967295|D>>>22),D=L+(x^(B|~N))+O[14]+2878612391&4294967295,L=B+(D<<15&4294967295|D>>>17),D=N+(B^(L|~x))+O[5]+4237533241&4294967295,N=L+(D<<21&4294967295|D>>>11),D=x+(L^(N|~B))+O[12]+1700485571&4294967295,x=N+(D<<6&4294967295|D>>>26),D=B+(N^(x|~L))+O[3]+2399980690&4294967295,B=x+(D<<10&4294967295|D>>>22),D=L+(x^(B|~N))+O[10]+4293915773&4294967295,L=B+(D<<15&4294967295|D>>>17),D=N+(B^(L|~x))+O[1]+2240044497&4294967295,N=L+(D<<21&4294967295|D>>>11),D=x+(L^(N|~B))+O[8]+1873313359&4294967295,x=N+(D<<6&4294967295|D>>>26),D=B+(N^(x|~L))+O[15]+4264355552&4294967295,B=x+(D<<10&4294967295|D>>>22),D=L+(x^(B|~N))+O[6]+2734768916&4294967295,L=B+(D<<15&4294967295|D>>>17),D=N+(B^(L|~x))+O[13]+1309151649&4294967295,N=L+(D<<21&4294967295|D>>>11),D=x+(L^(N|~B))+O[4]+4149444226&4294967295,x=N+(D<<6&4294967295|D>>>26),D=B+(N^(x|~L))+O[11]+3174756917&4294967295,B=x+(D<<10&4294967295|D>>>22),D=L+(x^(B|~N))+O[2]+718787259&4294967295,L=B+(D<<15&4294967295|D>>>17),D=N+(B^(L|~x))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+x&4294967295,R.g[1]=R.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+L&4294967295,R.g[3]=R.g[3]+B&4294967295}s.prototype.u=function(R,x){x===void 0&&(x=R.length);for(var N=x-this.blockSize,O=this.B,L=this.h,B=0;B<x;){if(L==0)for(;B<=N;)o(this,R,B),B+=this.blockSize;if(typeof R=="string"){for(;B<x;)if(O[L++]=R.charCodeAt(B++),L==this.blockSize){o(this,O),L=0;break}}else for(;B<x;)if(O[L++]=R[B++],L==this.blockSize){o(this,O),L=0;break}}this.h=L,this.o+=x},s.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var x=1;x<R.length-8;++x)R[x]=0;var N=8*this.o;for(x=R.length-8;x<R.length;++x)R[x]=N&255,N/=256;for(this.u(R),R=Array(16),x=N=0;4>x;++x)for(var O=0;32>O;O+=8)R[N++]=this.g[x]>>>O&255;return R};function c(R,x){var N=m;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=x(R)}function d(R,x){this.h=x;for(var N=[],O=!0,L=R.length-1;0<=L;L--){var B=R[L]|0;O&&B==x||(N[L]=B,O=!1)}this.g=N}var m={};function g(R){return-128<=R&&128>R?c(R,function(x){return new d([x|0],0>x?-1:0)}):new d([R|0],0>R?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return A;if(0>R)return I(y(-R));for(var x=[],N=1,O=0;R>=N;O++)x[O]=R/N|0,N*=4294967296;return new d(x,0)}function _(R,x){if(R.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(R.charAt(0)=="-")return I(_(R.substring(1),x));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=y(Math.pow(x,8)),O=A,L=0;L<R.length;L+=8){var B=Math.min(8,R.length-L),D=parseInt(R.substring(L,L+B),x);8>B?(B=y(Math.pow(x,B)),O=O.j(B).add(y(D))):(O=O.j(N),O=O.add(y(D)))}return O}var A=g(0),b=g(1),k=g(16777216);i=d.prototype,i.m=function(){if(P(this))return-I(this).m();for(var R=0,x=1,N=0;N<this.g.length;N++){var O=this.i(N);R+=(0<=O?O:4294967296+O)*x,x*=4294967296}return R},i.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(C(this))return"0";if(P(this))return"-"+I(this).toString(R);for(var x=y(Math.pow(R,6)),N=this,O="";;){var L=oe(N,x).g;N=G(N,L.j(x));var B=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=L,C(N))return B+O;for(;6>B.length;)B="0"+B;O=B+O}},i.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function C(R){if(R.h!=0)return!1;for(var x=0;x<R.g.length;x++)if(R.g[x]!=0)return!1;return!0}function P(R){return R.h==-1}i.l=function(R){return R=G(this,R),P(R)?-1:C(R)?0:1};function I(R){for(var x=R.g.length,N=[],O=0;O<x;O++)N[O]=~R.g[O];return new d(N,~R.h).add(b)}i.abs=function(){return P(this)?I(this):this},i.add=function(R){for(var x=Math.max(this.g.length,R.g.length),N=[],O=0,L=0;L<=x;L++){var B=O+(this.i(L)&65535)+(R.i(L)&65535),D=(B>>>16)+(this.i(L)>>>16)+(R.i(L)>>>16);O=D>>>16,B&=65535,D&=65535,N[L]=D<<16|B}return new d(N,N[N.length-1]&-2147483648?-1:0)};function G(R,x){return R.add(I(x))}i.j=function(R){if(C(this)||C(R))return A;if(P(this))return P(R)?I(this).j(I(R)):I(I(this).j(R));if(P(R))return I(this.j(I(R)));if(0>this.l(k)&&0>R.l(k))return y(this.m()*R.m());for(var x=this.g.length+R.g.length,N=[],O=0;O<2*x;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<R.g.length;L++){var B=this.i(O)>>>16,D=this.i(O)&65535,wt=R.i(L)>>>16,it=R.i(L)&65535;N[2*O+2*L]+=D*it,J(N,2*O+2*L),N[2*O+2*L+1]+=B*it,J(N,2*O+2*L+1),N[2*O+2*L+1]+=D*wt,J(N,2*O+2*L+1),N[2*O+2*L+2]+=B*wt,J(N,2*O+2*L+2)}for(O=0;O<x;O++)N[O]=N[2*O+1]<<16|N[2*O];for(O=x;O<2*x;O++)N[O]=0;return new d(N,0)};function J(R,x){for(;(R[x]&65535)!=R[x];)R[x+1]+=R[x]>>>16,R[x]&=65535,x++}function X(R,x){this.g=R,this.h=x}function oe(R,x){if(C(x))throw Error("division by zero");if(C(R))return new X(A,A);if(P(R))return x=oe(I(R),x),new X(I(x.g),I(x.h));if(P(x))return x=oe(R,I(x)),new X(I(x.g),x.h);if(30<R.g.length){if(P(R)||P(x))throw Error("slowDivide_ only works with positive integers.");for(var N=b,O=x;0>=O.l(R);)N=ce(N),O=ce(O);var L=ye(N,1),B=ye(O,1);for(O=ye(O,2),N=ye(N,2);!C(O);){var D=B.add(O);0>=D.l(R)&&(L=L.add(N),B=D),O=ye(O,1),N=ye(N,1)}return x=G(R,L.j(x)),new X(L,x)}for(L=A;0<=R.l(x);){for(N=Math.max(1,Math.floor(R.m()/x.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),B=y(N),D=B.j(x);P(D)||0<D.l(R);)N-=O,B=y(N),D=B.j(x);C(B)&&(B=b),L=L.add(B),R=G(R,D)}return new X(L,R)}i.A=function(R){return oe(this,R).h},i.and=function(R){for(var x=Math.max(this.g.length,R.g.length),N=[],O=0;O<x;O++)N[O]=this.i(O)&R.i(O);return new d(N,this.h&R.h)},i.or=function(R){for(var x=Math.max(this.g.length,R.g.length),N=[],O=0;O<x;O++)N[O]=this.i(O)|R.i(O);return new d(N,this.h|R.h)},i.xor=function(R){for(var x=Math.max(this.g.length,R.g.length),N=[],O=0;O<x;O++)N[O]=this.i(O)^R.i(O);return new d(N,this.h^R.h)};function ce(R){for(var x=R.g.length+1,N=[],O=0;O<x;O++)N[O]=R.i(O)<<1|R.i(O-1)>>>31;return new d(N,R.h)}function ye(R,x){var N=x>>5;x%=32;for(var O=R.g.length-N,L=[],B=0;B<O;B++)L[B]=0<x?R.i(B+N)>>>x|R.i(B+N+1)<<32-x:R.i(B+N);return new d(L,R.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,pT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=_,us=d}).apply(typeof d0<"u"?d0:typeof self<"u"?self:typeof window<"u"?window:{});var rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gT,Wl,yT,mh,Km,vT,_T,ET;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,v,E){return u==Array.prototype||u==Object.prototype||(u[v]=E.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof rh=="object"&&rh];for(var v=0;v<u.length;++v){var E=u[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=t(this);function o(u,v){if(v)e:{var E=s;u=u.split(".");for(var S=0;S<u.length-1;S++){var q=u[S];if(!(q in E))break e;E=E[q]}u=u[u.length-1],S=E[u],v=v(S),v!=S&&v!=null&&e(E,u,{configurable:!0,writable:!0,value:v})}}function c(u,v){u instanceof String&&(u+="");var E=0,S=!1,q={next:function(){if(!S&&E<u.length){var Q=E++;return{value:v(Q,u[Q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(u){return u||function(){return c(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function g(u){var v=typeof u;return v=v!="object"?v:u?Array.isArray(u)?"array":v:"null",v=="array"||v=="object"&&typeof u.length=="number"}function y(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function _(u,v,E){return u.call.apply(u.bind,arguments)}function A(u,v,E){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,S),u.apply(v,q)}}return function(){return u.apply(v,arguments)}}function b(u,v,E){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:A,b.apply(null,arguments)}function k(u,v){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function C(u,v){function E(){}E.prototype=v.prototype,u.aa=v.prototype,u.prototype=new E,u.prototype.constructor=u,u.Qb=function(S,q,Q){for(var se=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)se[Ue-2]=arguments[Ue];return v.prototype[q].apply(S,se)}}function P(u){const v=u.length;if(0<v){const E=Array(v);for(let S=0;S<v;S++)E[S]=u[S];return E}return[]}function I(u,v){for(let E=1;E<arguments.length;E++){const S=arguments[E];if(g(S)){const q=u.length||0,Q=S.length||0;u.length=q+Q;for(let se=0;se<Q;se++)u[q+se]=S[se]}else u.push(S)}}class G{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function J(u){return/^[\s\xa0]*$/.test(u)}function X(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var ce=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function ye(u,v,E){for(const S in u)v.call(E,u[S],S,u)}function R(u,v){for(const E in u)v.call(void 0,u[E],E,u)}function x(u){const v={};for(const E in u)v[E]=u[E];return v}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,v){let E,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(E in S)u[E]=S[E];for(let Q=0;Q<N.length;Q++)E=N[Q],Object.prototype.hasOwnProperty.call(S,E)&&(u[E]=S[E])}}function L(u){var v=1;u=u.split(":");const E=[];for(;0<v&&u.length;)E.push(u.shift()),v--;return u.length&&E.push(u.join(":")),E}function B(u){m.setTimeout(()=>{throw u},0)}function D(){var u=Ve;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class wt{constructor(){this.h=this.g=null}add(v,E){const S=it.get();S.set(v,E),this.h?this.h.next=S:this.g=S,this.h=S}}var it=new G(()=>new $,u=>u.reset());class ${constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,fe=!1,Ve=new wt,M=()=>{const u=m.Promise.resolve(void 0);ae=()=>{u.then(ie)}};var ie=()=>{for(var u;u=D();){try{u.h.call(u.g)}catch(E){B(E)}var v=it;v.j(u),100>v.h&&(v.h++,u.next=v.g,v.g=u)}fe=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};m.addEventListener("test",E,v),m.removeEventListener("test",E,v)}catch{}return u}();function Ce(u,v){if(re.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var E=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget){if(ce){e:{try{oe(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else E=="mouseover"?v=u.fromElement:E=="mouseout"&&(v=u.toElement);this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Te[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}C(Ce,re);var Te={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var yt="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function _n(u,v,E,S,q){this.listener=u,this.proxy=null,this.src=v,this.type=E,this.capture=!!S,this.ha=q,this.key=++Ye,this.da=this.fa=!1}function $n(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function kn(u){this.src=u,this.g={},this.h=0}kn.prototype.add=function(u,v,E,S,q){var Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);var se=li(u,v,S,q);return-1<se?(v=u[se],E||(v.fa=!1)):(v=new _n(v,this.src,Q,!!S,q),v.fa=E,u.push(v)),v};function oi(u,v){var E=v.type;if(E in u.g){var S=u.g[E],q=Array.prototype.indexOf.call(S,v,void 0),Q;(Q=0<=q)&&Array.prototype.splice.call(S,q,1),Q&&($n(v),u.g[E].length==0&&(delete u.g[E],u.h--))}}function li(u,v,E,S){for(var q=0;q<u.length;++q){var Q=u[q];if(!Q.da&&Q.listener==v&&Q.capture==!!E&&Q.ha==S)return q}return-1}var ci="closure_lm_"+(1e6*Math.random()|0),Cr={};function Se(u,v,E,S,q){if(Array.isArray(v)){for(var Q=0;Q<v.length;Q++)Se(u,v[Q],E,S,q);return null}return E=Mt(E),u&&u[yt]?u.K(v,E,y(S)?!!S.capture:!1,q):et(u,v,E,!1,S,q)}function et(u,v,E,S,q,Q){if(!v)throw Error("Invalid event type");var se=y(q)?!!q.capture:!!q,Ue=Bi(u);if(Ue||(u[ci]=Ue=new kn(u)),E=Ue.add(v,E,S,se,Q),E.proxy)return E;if(S=As(),E.proxy=S,S.src=u,S.listener=E,u.addEventListener)ge||(q=se),q===void 0&&(q=!1),u.addEventListener(v.toString(),S,q);else if(u.attachEvent)u.attachEvent(En(v.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function As(){function u(E){return v.call(u.src,u.listener,E)}const v=Ss;return u}function Ui(u,v,E,S,q){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)Ui(u,v[Q],E,S,q);else S=y(S)?!!S.capture:!!S,E=Mt(E),u&&u[yt]?(u=u.i,v=String(v).toString(),v in u.g&&(Q=u.g[v],E=li(Q,E,S,q),-1<E&&($n(Q[E]),Array.prototype.splice.call(Q,E,1),Q.length==0&&(delete u.g[v],u.h--)))):u&&(u=Bi(u))&&(v=u.g[v.toString()],u=-1,v&&(u=li(v,E,S,q)),(E=-1<u?v[u]:null)&&Li(E))}function Li(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[yt])oi(v.i,u);else{var E=u.type,S=u.proxy;v.removeEventListener?v.removeEventListener(E,S,u.capture):v.detachEvent?v.detachEvent(En(E),S):v.addListener&&v.removeListener&&v.removeListener(S),(E=Bi(v))?(oi(E,u),E.h==0&&(E.src=null,v[ci]=null)):$n(u)}}}function En(u){return u in Cr?Cr[u]:Cr[u]="on"+u}function Ss(u,v){if(u.da)u=!0;else{v=new Ce(v,this);var E=u.listener,S=u.ha||u.src;u.fa&&Li(u),u=E.call(S,v)}return u}function Bi(u){return u=u[ci],u instanceof kn?u:null}var an="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mt(u){return typeof u=="function"?u:(u[an]||(u[an]=function(v){return u.handleEvent(v)}),u[an])}function ht(){le.call(this),this.i=new kn(this),this.M=this,this.F=null}C(ht,le),ht.prototype[yt]=!0,ht.prototype.removeEventListener=function(u,v,E,S){Ui(this,u,v,E,S)};function Ke(u,v){var E,S=u.F;if(S)for(E=[];S;S=S.F)E.push(S);if(u=u.M,S=v.type||v,typeof v=="string")v=new re(v,u);else if(v instanceof re)v.target=v.target||u;else{var q=v;v=new re(S,u),O(v,q)}if(q=!0,E)for(var Q=E.length-1;0<=Q;Q--){var se=v.g=E[Q];q=Tn(se,S,!0,v)&&q}if(se=v.g=u,q=Tn(se,S,!0,v)&&q,q=Tn(se,S,!1,v)&&q,E)for(Q=0;Q<E.length;Q++)se=v.g=E[Q],q=Tn(se,S,!1,v)&&q}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,v;for(v in u.g){for(var E=u.g[v],S=0;S<E.length;S++)$n(E[S]);delete u.g[v],u.h--}}this.F=null},ht.prototype.K=function(u,v,E,S){return this.i.add(String(u),v,!1,E,S)},ht.prototype.L=function(u,v,E,S){return this.i.add(String(u),v,!0,E,S)};function Tn(u,v,E,S){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,Q=0;Q<v.length;++Q){var se=v[Q];if(se&&!se.da&&se.capture==E){var Ue=se.listener,It=se.ha||se.src;se.fa&&oi(u.i,se),q=Ue.call(It,S)!==!1&&q}}return q&&!S.defaultPrevented}function Zt(u,v,E){if(typeof u=="function")E&&(u=b(u,E));else if(u&&typeof u.handleEvent=="function")u=b(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:m.setTimeout(u,v||0)}function Pc(u){u.g=Zt(()=>{u.g=null,u.i&&(u.i=!1,Pc(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class _d extends le{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Pc(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xs(u){le.call(this),this.h=u,this.g={}}C(xs,le);var Rs=[];function Cs(u){ye(u.g,function(v,E){this.g.hasOwnProperty(E)&&Li(v)},u),u.g={}}xs.prototype.N=function(){xs.aa.N.call(this),Cs(this)},xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xn=m.JSON.stringify,Ea=m.JSON.parse,Ns=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function Lo(){}Lo.prototype.h=null;function Bo(u){return u.h||(u.h=u.i())}function zo(){}var zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qi(){re.call(this,"d")}C(qi,re);function qo(){re.call(this,"c")}C(qo,re);var ui={},Ho=null;function Nr(){return Ho=Ho||new ht}ui.La="serverreachability";function Ta(u){re.call(this,ui.La,u)}C(Ta,re);function Ir(u){const v=Nr();Ke(v,new Ta(v))}ui.STAT_EVENT="statevent";function Mc(u,v){re.call(this,ui.STAT_EVENT,u),this.stat=v}C(Mc,re);function at(u){const v=Nr();Ke(v,new Mc(v,u))}ui.Ma="timingevent";function Nt(u,v){re.call(this,ui.Ma,u),this.size=v}C(Nt,re);function bt(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},v)}function On(){this.g=!0}On.prototype.xa=function(){this.g=!1};function Fo(u,v,E,S,q,Q){u.info(function(){if(u.g)if(Q)for(var se="",Ue=Q.split("&"),It=0;It<Ue.length;It++){var Le=Ue[It].split("=");if(1<Le.length){var Ut=Le[0];Le=Le[1];var jt=Ut.split("_");se=2<=jt.length&&jt[1]=="type"?se+(Ut+"="+Le+"&"):se+(Ut+"=redacted&")}}else se=null;else se=Q;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+v+`
`+E+`
`+se})}function Ed(u,v,E,S,q,Q,se){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+v+`
`+E+`
`+Q+" "+se})}function jr(u,v,E,S){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+Is(u,E)+(S?" "+S:"")})}function Vc(u,v){u.info(function(){return"TIMEOUT: "+v})}On.prototype.info=function(){};function Is(u,v){if(!u.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(u=0;u<E.length;u++)if(Array.isArray(E[u])){var S=E[u];if(!(2>S.length)){var q=S[1];if(Array.isArray(q)&&!(1>q.length)){var Q=q[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var se=1;se<q.length;se++)q[se]=""}}}}return Xn(E)}catch{return v}}var Dr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hi;function di(){}C(di,Lo),di.prototype.g=function(){return new XMLHttpRequest},di.prototype.i=function(){return{}},hi=new di;function on(u,v,E,S){this.j=u,this.i=v,this.l=E,this.R=S||1,this.U=new xs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vt}function vt(){this.i=null,this.g="",this.h=!1}var Go={},wa={};function Wn(u,v,E){u.L=1,u.v=Ps(wn(v)),u.m=E,u.P=!0,Fi(u,null)}function Fi(u,v){u.F=Date.now(),js(u),u.A=wn(u.v);var E=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),Wo(E.i,"t",S),u.C=0,E=u.j.J,u.h=new vt,u.g=Jc(u.j,E?v:null,!u.m),0<u.O&&(u.M=new _d(b(u.Y,u,u.g),u.O)),v=u.U,E=u.g,S=u.ca;var q="readystatechange";Array.isArray(q)||(q&&(Rs[0]=q.toString()),q=Rs);for(var Q=0;Q<q.length;Q++){var se=Se(E,q[Q],S||v.handleEvent,!1,v.h||v);if(!se)break;v.g[se.key]=se}v=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,v)):(u.u="GET",u.g.ea(u.A,u.u,null,v)),Ir(),Fo(u.i,u.u,u.A,u.l,u.R,u.m)}on.prototype.ca=function(u){u=u.target;const v=this.M;v&&Un(u)==3?v.j():this.Y(u)},on.prototype.Y=function(u){try{if(u==this.g)e:{const jt=Un(this.g);var v=this.g.Ba();const Zi=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||Gc(this.g)))){this.J||jt!=4||v==7||(v==8||0>=Zi?Ir(3):Ir(2)),kr(this);var E=this.g.Z();this.X=E;t:if(Uc(this)){var S=Gc(this.g);u="";var q=S.length,Q=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ft(this),fi(this);var se="";break t}this.h.i=new m.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,u+=this.h.i.decode(S[v],{stream:!(Q&&v==q-1)});S.length=0,this.h.g+=u,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=E==200,Ed(this.i,this.u,this.A,this.l,this.R,jt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,It=this.g;if((Ue=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(Ue)){var Le=Ue;break t}}Le=null}if(E=Le)jr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ds(this,E);else{this.o=!1,this.s=3,at(12),Ft(this),fi(this);break e}}if(this.P){E=!0;let Gt;for(;!this.J&&this.C<se.length;)if(Gt=Lc(this,se),Gt==wa){jt==4&&(this.s=4,at(14),E=!1),jr(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==Go){this.s=4,at(15),jr(this.i,this.l,se,"[Invalid Chunk]"),E=!1;break}else jr(this.i,this.l,Gt,null),Ds(this,Gt);if(Uc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||se.length!=0||this.h.h||(this.s=1,at(16),E=!1),this.o=this.o&&E,!E)jr(this.i,this.l,se,"[Invalid Chunked Response]"),Ft(this),fi(this);else if(0<se.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Hs(Ut),Ut.M=!0,at(11))}}else jr(this.i,this.l,se,null),Ds(this,se);jt==4&&Ft(this),this.o&&!this.J&&(jt==4?Xc(this.j,this):(this.o=!1,js(this)))}else Sd(this.g),E==400&&0<se.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),Ft(this),fi(this)}}}catch{}finally{}};function Uc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Lc(u,v){var E=u.C,S=v.indexOf(`
`,E);return S==-1?wa:(E=Number(v.substring(E,S)),isNaN(E)?Go:(S+=1,S+E>v.length?wa:(v=v.slice(S,S+E),u.C=S+E,v)))}on.prototype.cancel=function(){this.J=!0,Ft(this)};function js(u){u.S=Date.now()+u.I,Bc(u,u.I)}function Bc(u,v){if(u.B!=null)throw Error("WatchDog timer not null");u.B=bt(b(u.ba,u),v)}function kr(u){u.B&&(m.clearTimeout(u.B),u.B=null)}on.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Vc(this.i,this.A),this.L!=2&&(Ir(),at(17)),Ft(this),this.s=2,fi(this)):Bc(this,this.S-u)};function fi(u){u.j.G==0||u.J||Xc(u.j,u)}function Ft(u){kr(u);var v=u.M;v&&typeof v.ma=="function"&&v.ma(),u.M=null,Cs(u.U),u.g&&(v=u.g,u.g=null,v.abort(),v.ma())}function Ds(u,v){try{var E=u.j;if(E.G!=0&&(E.g==u||Yo(E.h,u))){if(!u.K&&Yo(E.h,u)&&E.G==3){try{var S=E.Da.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<u.F)Oa(E),Da(E);else break e;nl(E),at(18)}}else E.za=q[1],0<E.za-E.T&&37500>q[2]&&E.F&&E.v==0&&!E.C&&(E.C=bt(b(E.Za,E),6e3));if(1>=Aa(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Wi(E,11)}else if((u.K||E.g==u)&&Oa(E),!J(v))for(q=E.Da.g.parse(v),v=0;v<q.length;v++){let Le=q[v];if(E.T=Le[0],Le=Le[1],E.G==2)if(Le[0]=="c"){E.K=Le[1],E.ia=Le[2];const Ut=Le[3];Ut!=null&&(E.la=Ut,E.j.info("VER="+E.la));const jt=Le[4];jt!=null&&(E.Aa=jt,E.j.info("SVER="+E.Aa));const Zi=Le[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(S=1.5*Zi,E.L=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const Gt=u.g;if(Gt){const Ei=Gt.g?Gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ei){var Q=S.h;Q.g||Ei.indexOf("spdy")==-1&&Ei.indexOf("quic")==-1&&Ei.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Sa(Q,Q.h),Q.h=null))}if(S.D){const rl=Gt.g?Gt.g.getResponseHeader("X-HTTP-Session-Id"):null;rl&&(S.ya=rl,Xe(S.I,S.D,rl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-u.F,E.j.info("Handshake RTT: "+E.R+"ms")),S=E;var se=u;if(S.qa=Zc(S,S.J?S.ia:null,S.W),se.K){ln(S.h,se);var Ue=se,It=S.L;It&&(Ue.I=It),Ue.B&&(kr(Ue),js(Ue)),S.g=se}else Qc(S);0<E.i.length&&ka(E)}else Le[0]!="stop"&&Le[0]!="close"||Wi(E,7);else E.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Wi(E,7):el(E):Le[0]!="noop"&&E.l&&E.l.ta(Le),E.v=0)}}Ir(4)}catch{}}var zc=class{constructor(u,v){this.g=u,this.map=v}};function Gi(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ba(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Aa(u){return u.h?1:u.g?u.g.size:0}function Yo(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function Sa(u,v){u.g?u.g.add(v):u.h=v}function ln(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}Gi.prototype.cancel=function(){if(this.i=Ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ko(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const E of u.g.values())v=v.concat(E.D);return v}return P(u.i)}function Td(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var v=[],E=u.length,S=0;S<E;S++)v.push(u[S]);return v}v=[],E=0;for(S in u)v[E++]=u[S];return v}function xa(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var v=[];u=u.length;for(var E=0;E<u;E++)v.push(E);return v}v=[],E=0;for(const S in u)v[E++]=S;return v}}}function Qo(u,v){if(u.forEach&&typeof u.forEach=="function")u.forEach(v,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,v,void 0);else for(var E=xa(u),S=Td(u),q=S.length,Q=0;Q<q;Q++)v.call(void 0,S[Q],E&&E[Q],u)}var ks=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wd(u,v){if(u){u=u.split("&");for(var E=0;E<u.length;E++){var S=u[E].indexOf("="),q=null;if(0<=S){var Q=u[E].substring(0,S);q=u[E].substring(S+1)}else Q=u[E];v(Q,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function At(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof At){this.h=u.h,Os(this,u.j),this.o=u.o,this.g=u.g,Or(this,u.s),this.l=u.l;var v=u.i,E=new Ki;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),Yi(this,E),this.m=u.m}else u&&(v=String(u).match(ks))?(this.h=!1,Os(this,v[1]||"",!0),this.o=Pn(v[2]||""),this.g=Pn(v[3]||"",!0),Or(this,v[4]),this.l=Pn(v[5]||"",!0),Yi(this,v[6]||"",!0),this.m=Pn(v[7]||"")):(this.h=!1,this.i=new Ki(null,this.h))}At.prototype.toString=function(){var u=[],v=this.j;v&&u.push(Ms(v,$o,!0),":");var E=this.g;return(E||v=="file")&&(u.push("//"),(v=this.o)&&u.push(Ms(v,$o,!0),"@"),u.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&u.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(Ms(E,E.charAt(0)=="/"?bd:Xo,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",Ms(E,Ra)),u.join("")};function wn(u){return new At(u)}function Os(u,v,E){u.j=E?Pn(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function Or(u,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);u.s=v}else u.s=null}function Yi(u,v,E){v instanceof Ki?(u.i=v,Hc(u.i,u.h)):(E||(v=Ms(v,Ad)),u.i=new Ki(v,u.h))}function Xe(u,v,E){u.i.set(v,E)}function Ps(u){return Xe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Pn(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ms(u,v,E){return typeof u=="string"?(u=encodeURI(u).replace(v,qc),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function qc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var $o=/[#\/\?@]/g,Xo=/[#\?:]/g,bd=/[#\?]/g,Ad=/[#\?@]/g,Ra=/#/g;function Ki(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function Mn(u){u.g||(u.g=new Map,u.h=0,u.i&&wd(u.i,function(v,E){u.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}i=Ki.prototype,i.add=function(u,v){Mn(this),this.i=null,u=mi(this,u);var E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(v),this.h+=1,this};function Qi(u,v){Mn(u),v=mi(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function $i(u,v){return Mn(u),v=mi(u,v),u.g.has(v)}i.forEach=function(u,v){Mn(this),this.g.forEach(function(E,S){E.forEach(function(q){u.call(v,q,S,this)},this)},this)},i.na=function(){Mn(this);const u=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let S=0;S<v.length;S++){const q=u[S];for(let Q=0;Q<q.length;Q++)E.push(v[S])}return E},i.V=function(u){Mn(this);let v=[];if(typeof u=="string")$i(this,u)&&(v=v.concat(this.g.get(mi(this,u))));else{u=Array.from(this.g.values());for(let E=0;E<u.length;E++)v=v.concat(u[E])}return v},i.set=function(u,v){return Mn(this),this.i=null,u=mi(this,u),$i(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},i.get=function(u,v){return u?(u=this.V(u),0<u.length?String(u[0]):v):v};function Wo(u,v,E){Qi(u,v),0<E.length&&(u.i=null,u.g.set(mi(u,v),P(E)),u.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var S=v[E];const Q=encodeURIComponent(String(S)),se=this.V(S);for(S=0;S<se.length;S++){var q=Q;se[S]!==""&&(q+="="+encodeURIComponent(String(se[S]))),u.push(q)}}return this.i=u.join("&")};function mi(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function Hc(u,v){v&&!u.j&&(Mn(u),u.i=null,u.g.forEach(function(E,S){var q=S.toLowerCase();S!=q&&(Qi(this,S),Wo(this,q,E))},u)),u.j=v}function Vs(u,v){const E=new On;if(m.Image){const S=new Image;S.onload=k(Vn,E,"TestLoadImage: loaded",!0,v,S),S.onerror=k(Vn,E,"TestLoadImage: error",!1,v,S),S.onabort=k(Vn,E,"TestLoadImage: abort",!1,v,S),S.ontimeout=k(Vn,E,"TestLoadImage: timeout",!1,v,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else v(!1)}function Zn(u,v){const E=new On,S=new AbortController,q=setTimeout(()=>{S.abort(),Vn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:S.signal}).then(Q=>{clearTimeout(q),Q.ok?Vn(E,"TestPingServer: ok",!0,v):Vn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),Vn(E,"TestPingServer: error",!1,v)})}function Vn(u,v,E,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(E)}catch{}}function Us(){this.g=new Ns}function pi(u,v,E){const S=E||"";try{Qo(u,function(q,Q){let se=q;y(q)&&(se=Xn(q)),v.push(S+Q+"="+encodeURIComponent(se))})}catch(q){throw v.push(S+"type="+encodeURIComponent("_badmap")),q}}function Pr(u){this.l=u.Ub||null,this.j=u.eb||!1}C(Pr,Lo),Pr.prototype.g=function(){return new Xi(this.l,this.j)},Pr.prototype.i=function(u){return function(){return u}}({});function Xi(u,v){ht.call(this),this.D=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Xi,ht),i=Xi.prototype,i.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=v,this.readyState=1,yi(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(v.body=u),(this.D||m).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,yi(this)),this.g&&(this.readyState=3,yi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?gi(this):yi(this),this.readyState==3&&Zo(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,gi(this))},i.Qa=function(u){this.g&&(this.response=u,gi(this))},i.ga=function(){this.g&&gi(this)};function gi(u){u.readyState=4,u.l=null,u.j=null,u.v=null,yi(u)}i.setRequestHeader=function(u,v){this.u.append(u,v)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=v.next();return u.join(`\r
`)};function yi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Jo(u){let v="";return ye(u,function(E,S){v+=S,v+=":",v+=E,v+=`\r
`}),v}function Vt(u,v,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=Jo(E),typeof u=="string"?E!=null&&encodeURIComponent(String(E)):Xe(u,v,E))}function Fe(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Fe,ht);var Ca=/^https?$/i,Ls=["POST","PUT"];i=Fe.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,v,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hi.g(),this.v=this.o?Bo(this.o):Bo(hi),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(Q){Fc(this,Q);return}if(u=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)E.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())E.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ls,v,void 0))||S||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,se]of E)this.g.setRequestHeader(Q,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bs(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){Fc(this,Q)}};function Fc(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.m=5,Na(u),vi(u)}function Na(u){u.A||(u.A=!0,Ke(u,"complete"),Ke(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ke(this,"complete"),Ke(this,"abort"),vi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vi(this,!0)),Fe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ia(this):this.bb())},i.bb=function(){Ia(this)};function Ia(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Un(u)!=4||u.Z()!=2)){if(u.u&&Un(u)==4)Zt(u.Ea,0,u);else if(Ke(u,"readystatechange"),Un(u)==4){u.h=!1;try{const se=u.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var S;if(S=se===0){var q=String(u.D).match(ks)[1]||null;!q&&m.self&&m.self.location&&(q=m.self.location.protocol.slice(0,-1)),S=!Ca.test(q?q.toLowerCase():"")}E=S}if(E)Ke(u,"complete"),Ke(u,"success");else{u.m=6;try{var Q=2<Un(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",Na(u)}}finally{vi(u)}}}}function vi(u,v){if(u.g){Bs(u);const E=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,v||Ke(u,"ready");try{E.onreadystatechange=S}catch{}}}function Bs(u){u.I&&(m.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function Un(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),Ea(v)}};function Gc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Sd(u){const v={};u=(u.g&&2<=Un(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(J(u[S]))continue;var E=L(u[S]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=v[q]||[];v[q]=Q,Q.push(E)}R(v,function(S){return S.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zs(u,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||v}function ja(u){this.Aa=0,this.i=[],this.j=new On,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zs("baseRetryDelayMs",5e3,u),this.cb=zs("retryDelaySeedMs",1e4,u),this.Wa=zs("forwardChannelMaxRetries",2,u),this.wa=zs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Gi(u&&u.concurrentRequestLimit),this.Da=new Us,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ja.prototype,i.la=8,i.G=1,i.connect=function(u,v,E,S){at(0),this.W=u,this.H=v||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.I=Zc(this,null,this.W),ka(this)};function el(u){if(Yc(u),u.G==3){var v=u.U++,E=wn(u.I);if(Xe(E,"SID",u.K),Xe(E,"RID",v),Xe(E,"TYPE","terminate"),qs(u,E),v=new on(u,u.j,v),v.L=2,v.v=Ps(wn(E)),E=!1,m.navigator&&m.navigator.sendBeacon)try{E=m.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&m.Image&&(new Image().src=v.v,E=!0),E||(v.g=Jc(v.j,null),v.g.ea(v.v)),v.F=Date.now(),js(v)}Wc(u)}function Da(u){u.g&&(Hs(u),u.g.cancel(),u.g=null)}function Yc(u){Da(u),u.u&&(m.clearTimeout(u.u),u.u=null),Oa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function ka(u){if(!ba(u.h)&&!u.s){u.s=!0;var v=u.Ga;ae||M(),fe||(ae(),fe=!0),Ve.add(v,u),u.B=0}}function xd(u,v){return Aa(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=v.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=bt(b(u.Ga,u,v),il(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const q=new on(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=x(Q),O(Q,this.S)):Q=this.S),this.m!==null||this.O||(q.H=Q,Q=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Kc(this,q,v),E=wn(this.I),Xe(E,"RID",u),Xe(E,"CVER",22),this.D&&Xe(E,"X-HTTP-Session-Id",this.D),qs(this,E),Q&&(this.O?v="headers="+encodeURIComponent(String(Jo(Q)))+"&"+v:this.m&&Vt(E,this.m,Q)),Sa(this.h,q),this.Ua&&Xe(E,"TYPE","init"),this.P?(Xe(E,"$req",v),Xe(E,"SID","null"),q.T=!0,Wn(q,E,null)):Wn(q,E,v),this.G=2}}else this.G==3&&(u?tl(this,u):this.i.length==0||ba(this.h)||tl(this))};function tl(u,v){var E;v?E=v.l:E=u.U++;const S=wn(u.I);Xe(S,"SID",u.K),Xe(S,"RID",E),Xe(S,"AID",u.T),qs(u,S),u.m&&u.o&&Vt(S,u.m,u.o),E=new on(u,u.j,E,u.B+1),u.m===null&&(E.H=u.o),v&&(u.i=v.D.concat(u.i)),v=Kc(u,E,1e3),E.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Sa(u.h,E),Wn(E,S,v)}function qs(u,v){u.H&&ye(u.H,function(E,S){Xe(v,S,E)}),u.l&&Qo({},function(E,S){Xe(v,S,E)})}function Kc(u,v,E){E=Math.min(u.i.length,E);var S=u.l?b(u.l.Na,u.l,u):null;e:{var q=u.i;let Q=-1;for(;;){const se=["count="+E];Q==-1?0<E?(Q=q[0].g,se.push("ofs="+Q)):Q=0:se.push("ofs="+Q);let Ue=!0;for(let It=0;It<E;It++){let Le=q[It].g;const Ut=q[It].map;if(Le-=Q,0>Le)Q=Math.max(0,q[It].g-100),Ue=!1;else try{pi(Ut,se,"req"+Le+"_")}catch{S&&S(Ut)}}if(Ue){S=se.join("&");break e}}}return u=u.i.splice(0,E),v.D=u,S}function Qc(u){if(!u.g&&!u.u){u.Y=1;var v=u.Fa;ae||M(),fe||(ae(),fe=!0),Ve.add(v,u),u.v=0}}function nl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=bt(b(u.Fa,u),il(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,$c(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=bt(b(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Da(this),$c(this))};function Hs(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function $c(u){u.g=new on(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var v=wn(u.qa);Xe(v,"RID","rpc"),Xe(v,"SID",u.K),Xe(v,"AID",u.T),Xe(v,"CI",u.F?"0":"1"),!u.F&&u.ja&&Xe(v,"TO",u.ja),Xe(v,"TYPE","xmlhttp"),qs(u,v),u.m&&u.o&&Vt(v,u.m,u.o),u.L&&(u.g.I=u.L);var E=u.g;u=u.ia,E.L=1,E.v=Ps(wn(v)),E.m=null,E.P=!0,Fi(E,u)}i.Za=function(){this.C!=null&&(this.C=null,Da(this),nl(this),at(19))};function Oa(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function Xc(u,v){var E=null;if(u.g==v){Oa(u),Hs(u),u.g=null;var S=2}else if(Yo(u.h,v))E=v.D,ln(u.h,v),S=1;else return;if(u.G!=0){if(v.o)if(S==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var q=u.B;S=Nr(),Ke(S,new Nt(S,E)),ka(u)}else Qc(u);else if(q=v.s,q==3||q==0&&0<v.X||!(S==1&&xd(u,v)||S==2&&nl(u)))switch(E&&0<E.length&&(v=u.h,v.i=v.i.concat(E)),q){case 1:Wi(u,5);break;case 4:Wi(u,10);break;case 3:Wi(u,6);break;default:Wi(u,2)}}}function il(u,v){let E=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(E*=2),E*v}function Wi(u,v){if(u.j.info("Error code "+v),v==2){var E=b(u.fb,u),S=u.Xa;const q=!S;S=new At(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Os(S,"https"),Ps(S),q?Vs(S.toString(),E):Zn(S.toString(),E)}else at(2);u.G=0,u.l&&u.l.sa(v),Wc(u),Yc(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function Wc(u){if(u.G=0,u.ka=[],u.l){const v=Ko(u.h);(v.length!=0||u.i.length!=0)&&(I(u.ka,v),I(u.ka,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.ra()}}function Zc(u,v,E){var S=E instanceof At?wn(E):new At(E);if(S.g!="")v&&(S.g=v+"."+S.g),Or(S,S.s);else{var q=m.location;S=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var Q=new At(null);S&&Os(Q,S),v&&(Q.g=v),q&&Or(Q,q),E&&(Q.l=E),S=Q}return E=u.D,v=u.ya,E&&v&&Xe(S,E,v),Xe(S,"VER",u.la),qs(u,S),S}function Jc(u,v,E){if(v&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Ca&&!u.pa?new Fe(new Pr({eb:E})):new Fe(u.pa),v.Ha(u.J),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function eu(){}i=eu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Pa(){}Pa.prototype.g=function(u,v){return new cn(u,v)};function cn(u,v){ht.call(this),this.g=new ja(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(u?u["X-WebChannel-Client-Profile"]=v.va:u={"X-WebChannel-Client-Profile":v.va}),this.g.S=u,(u=v&&v.Sb)&&!J(u)&&(this.g.m=u),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!J(v)&&(this.g.D=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new _i(this)}C(cn,ht),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){el(this.g)},cn.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.u&&(E={},E.__data__=Xn(u),u=E);v.i.push(new zc(v.Ya++,u)),v.G==3&&ka(v)},cn.prototype.N=function(){this.g.l=null,delete this.j,el(this.g),delete this.g,cn.aa.N.call(this)};function tu(u){qi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const E in v){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}C(tu,qi);function nu(){qo.call(this),this.status=1}C(nu,qo);function _i(u){this.g=u}C(_i,eu),_i.prototype.ua=function(){Ke(this.g,"a")},_i.prototype.ta=function(u){Ke(this.g,new tu(u))},_i.prototype.sa=function(u){Ke(this.g,new nu)},_i.prototype.ra=function(){Ke(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,ET=function(){return new Pa},_T=function(){return Nr()},vT=ui,Km={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dr.NO_ERROR=0,Dr.TIMEOUT=8,Dr.HTTP_ERROR=6,mh=Dr,Hi.COMPLETE="complete",yT=Hi,zo.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Wl=zo,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,gT=Fe}).apply(typeof rh<"u"?rh:typeof self<"u"?self:typeof window<"u"?window:{});const f0="@firebase/firestore",m0="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new Ap("@firebase/firestore");function uo(){return ha.logLevel}function he(i,...e){if(ha.logLevel<=Pe.DEBUG){const t=e.map(Rp);ha.debug(`Firestore (${jo}): ${i}`,...t)}}function Tr(i,...e){if(ha.logLevel<=Pe.ERROR){const t=e.map(Rp);ha.error(`Firestore (${jo}): ${i}`,...t)}}function _o(i,...e){if(ha.logLevel<=Pe.WARN){const t=e.map(Rp);ha.warn(`Firestore (${jo}): ${i}`,...t)}}function Rp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(i,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,TT(i,s,t)}function TT(i,e,t){let s=`FIRESTORE (${jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Tr(s),new Error(s)}function Ge(i,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,i||TT(e,o,s)}function Re(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Mi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nn.UNAUTHENTICATED))}shutdown(){}}class $R{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class XR{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ge(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let c=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new yr,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new yr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ge(typeof s.accessToken=="string",31837,{l:s}),new wT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class WR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new WR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ge(this.o===void 0,3512);const s=c=>{c.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,he("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const o=c=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new p0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new p0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=eC(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<t&&(s+=e.charAt(o[c]%62))}return s}}function je(i,e){return i<e?-1:i>e?1:0}function Qm(i,e){let t=0;for(;t<i.length&&t<e.length;){const s=i.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return je(s,o);{const c=bT(),d=tC(c.encode(g0(i,t)),c.encode(g0(e,t)));return d!==0?d:je(s,o)}}t+=s>65535?2:1}return je(i.length,e.length)}function g0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function tC(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return je(i[t],e[t]);return je(i.length,e.length)}function Eo(i,e,t){return i.length===e.length&&i.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=-62135596800,v0=1e6;class Ot{static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*v0);return new Ot(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<y0)throw new ue(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/v0}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-y0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Ot(0,0))}static max(){return new xe(new Ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="__name__";class xi{constructor(e,t,s){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&be(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return xi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xi?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const c=xi.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return je(e.length,t.length)}static compareSegments(e,t){const s=xi.isNumericId(e),o=xi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?xi.extractNumericId(e).compare(xi.extractNumericId(t)):Qm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return us.fromString(e.substring(4,e.length-2))}}class rt extends xi{construct(e,t,s){return new rt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ue(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new rt(t)}static emptyPath(){return new rt([])}}const nC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends xi{construct(e,t,s){return new Xt(e,t,s)}static isValidIdentifier(e){return nC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_0}static keyField(){return new Xt([_0])}static fromServerFormat(e){const t=[];let s="",o=0;const c=()=>{if(s.length===0)throw new ue(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ue(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ue(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(c(),o++)}if(c(),d)throw new ue(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(rt.fromString(e))}static fromName(e){return new ve(rt.fromString(e).popFirst(5))}static empty(){return new ve(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new rt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=-1;function iC(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(s===1e9?new Ot(t+1,0):new Ot(t,s));return new fs(o,ve.empty(),e)}function rC(i){return new fs(i.readTime,i.key,uc)}class fs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new fs(xe.min(),ve.empty(),uc)}static max(){return new fs(xe.max(),ve.empty(),uc)}}function sC(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(i.documentKey,e.documentKey),t!==0?t:je(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(i){if(i.code!==ee.FAILED_PRECONDITION||i.message!==aC)throw i;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,s)=>{t(e)})}static reject(e){return new ne((t,s)=>{s(e)})}static waitFor(e){return new ne((t,s)=>{let o=0,c=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++c,d&&c===o&&t()},g=>s(g))}),d=!0,c===o&&t()})}static or(e){let t=ne.resolve(!1);for(const s of e)t=t.next(o=>o?ne.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,c)=>{s.push(t.call(this,o,c))}),this.waitFor(s)}static mapArray(e,t){return new ne((s,o)=>{const c=e.length,d=new Array(c);let m=0;for(let g=0;g<c;g++){const y=g;t(e[y]).next(_=>{d[y]=_,++m,m===c&&s(d)},_=>o(_))}})}static doWhile(e,t){return new ne((s,o)=>{const c=()=>{e()===!0?t().next(()=>{c()},o):s()};c()})}}function lC(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ko(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>t.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}$h.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp=-1;function Xh(i){return i==null}function Rh(i){return i===0&&1/i==-1/0}function cC(i){return typeof i=="number"&&Number.isInteger(i)&&!Rh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="";function uC(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=E0(e)),e=hC(i.get(t),e);return E0(e)}function hC(i,e){let t=e;const s=i.length;for(let o=0;o<s;o++){const c=i.charAt(o);switch(c){case"\0":t+="";break;case ST:t+="";break;default:t+=c}}return t}function E0(i){return i+ST+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ts(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function xT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.comparator=e,this.root=t||$t.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}}class sh{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,t,s,o,c){this.key=e,this.value=t,this.color=s??$t.RED,this.left=o??$t.EMPTY,this.right=c??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,c){return new $t(e??this.key,t??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,s),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return $t.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,s,o,c){return this}insert(e,t,s){return new $t(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new w0(this.data.getIterator())}getIteratorFrom(e){return new w0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pt(this.comparator);return t.data=e,t}}class w0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new In([])}unionWith(e){let t=new Pt(Xt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new In(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Eo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new RT("Invalid base64 string: "+c):c}}(e);return new Wt(t)}static fromUint8Array(e){const t=function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c}(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const dC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(i){if(Ge(!!i,39018),typeof i=="string"){let e=0;const t=dC.exec(i);if(Ge(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Tt(i.seconds),nanos:Tt(i.nanos)}}function Tt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ps(i){return typeof i=="string"?Wt.fromBase64String(i):Wt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="server_timestamp",NT="__type__",IT="__previous_value__",jT="__local_write_time__";function Np(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[NT])===null||t===void 0?void 0:t.stringValue)===CT}function Wh(i){const e=i.mapValue.fields[IT];return Np(e)?Wh(e):e}function hc(i){const e=ms(i.mapValue.fields[jT].timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t,s,o,c,d,m,g,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=_}}const Ch="(default)";class dc{constructor(e,t){this.projectId=e,this.database=t||Ch}static empty(){return new dc("","")}get isDefaultDatabase(){return this.database===Ch}isEqual(e){return e instanceof dc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="__type__",mC="__max__",ah={mapValue:{}},kT="__vector__",Nh="value";function gs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Np(i)?4:gC(i)?9007199254740991:pC(i)?10:11:be(28295,{value:i})}function Di(i,e){if(i===e)return!0;const t=gs(i);if(t!==gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return hc(i).isEqual(hc(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=ms(o.timestampValue),m=ms(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,c){return ps(o.bytesValue).isEqual(ps(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,c){return Tt(o.geoPointValue.latitude)===Tt(c.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(c.geoPointValue.longitude)}(i,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return Tt(o.integerValue)===Tt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=Tt(o.doubleValue),m=Tt(c.doubleValue);return d===m?Rh(d)===Rh(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return Eo(i.arrayValue.values||[],e.arrayValue.values||[],Di);case 10:case 11:return function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(T0(d)!==T0(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!Di(d[g],m[g])))return!1;return!0}(i,e);default:return be(52216,{left:i})}}function fc(i,e){return(i.values||[]).find(t=>Di(t,e))!==void 0}function To(i,e){if(i===e)return 0;const t=gs(i),s=gs(e);if(t!==s)return je(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(i.booleanValue,e.booleanValue);case 2:return function(c,d){const m=Tt(c.integerValue||c.doubleValue),g=Tt(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(i,e);case 3:return b0(i.timestampValue,e.timestampValue);case 4:return b0(hc(i),hc(e));case 5:return Qm(i.stringValue,e.stringValue);case 6:return function(c,d){const m=ps(c),g=ps(d);return m.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(c,d){const m=c.split("/"),g=d.split("/");for(let y=0;y<m.length&&y<g.length;y++){const _=je(m[y],g[y]);if(_!==0)return _}return je(m.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,d){const m=je(Tt(c.latitude),Tt(d.latitude));return m!==0?m:je(Tt(c.longitude),Tt(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return A0(i.arrayValue,e.arrayValue);case 10:return function(c,d){var m,g,y,_;const A=c.fields||{},b=d.fields||{},k=(m=A[Nh])===null||m===void 0?void 0:m.arrayValue,C=(g=b[Nh])===null||g===void 0?void 0:g.arrayValue,P=je(((y=k==null?void 0:k.values)===null||y===void 0?void 0:y.length)||0,((_=C==null?void 0:C.values)===null||_===void 0?void 0:_.length)||0);return P!==0?P:A0(k,C)}(i.mapValue,e.mapValue);case 11:return function(c,d){if(c===ah.mapValue&&d===ah.mapValue)return 0;if(c===ah.mapValue)return 1;if(d===ah.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),y=d.fields||{},_=Object.keys(y);g.sort(),_.sort();for(let A=0;A<g.length&&A<_.length;++A){const b=Qm(g[A],_[A]);if(b!==0)return b;const k=To(m[g[A]],y[_[A]]);if(k!==0)return k}return je(g.length,_.length)}(i.mapValue,e.mapValue);default:throw be(23264,{Pe:t})}}function b0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return je(i,e);const t=ms(i),s=ms(e),o=je(t.seconds,s.seconds);return o!==0?o:je(t.nanos,s.nanos)}function A0(i,e){const t=i.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const c=To(t[o],s[o]);if(c)return c}return je(t.length,s.length)}function wo(i){return $m(i)}function $m(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const s=ms(t);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return ps(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return ve.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let s="[",o=!0;for(const c of t.values||[])o?o=!1:s+=",",s+=$m(c);return s+"]"}(i.arrayValue):"mapValue"in i?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const d of s)c?c=!1:o+=",",o+=`${d}:${$m(t.fields[d])}`;return o+"}"}(i.mapValue):be(61005,{value:i})}function ph(i){switch(gs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wh(i);return e?16+ph(e):16;case 5:return 2*i.stringValue.length;case 6:return ps(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,c)=>o+ph(c),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return Ts(s.fields,(c,d)=>{o+=c.length+ph(d)}),o}(i.mapValue);default:throw be(13486,{value:i})}}function S0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Xm(i){return!!i&&"integerValue"in i}function Ip(i){return!!i&&"arrayValue"in i}function x0(i){return!!i&&"nullValue"in i}function R0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function gh(i){return!!i&&"mapValue"in i}function pC(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[DT])===null||t===void 0?void 0:t.stringValue)===kT}function nc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ts(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=nc(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nc(i.arrayValue.values[t]);return e}return Object.assign({},i)}function gC(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===mC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!gh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(t)}setAll(e){let t=Xt.emptyPath(),s={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}d?s[m.lastSegment()]=nc(d):o.push(m.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,s,o)}delete(e){const t=this.field(e.popLast());gh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Di(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];gh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ts(t,(o,c)=>e[o]=c);for(const o of s)delete e[o]}clone(){return new vn(nc(this.value))}}function OT(i){const e=[];return Ts(i.fields,(t,s)=>{const o=new Xt([t]);if(gh(s)){const c=OT(s.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t,s,o,c,d,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new rn(e,0,xe.min(),xe.min(),xe.min(),vn.empty(),0)}static newFoundDocument(e,t,s,o){return new rn(e,1,t,xe.min(),s,o,0)}static newNoDocument(e,t){return new rn(e,2,t,xe.min(),xe.min(),vn.empty(),0)}static newUnknownDocument(e,t){return new rn(e,3,t,xe.min(),xe.min(),vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,t){this.position=e,this.inclusive=t}}function C0(i,e,t){let s=0;for(let o=0;o<i.position.length;o++){const c=e[o],d=i.position[o];if(c.field.isKeyField()?s=ve.comparator(ve.fromName(d.referenceValue),t.key):s=To(d,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function N0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Di(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t="asc"){this.field=e,this.dir=t}}function yC(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{}class Ct extends PT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new _C(e,t,s):t==="array-contains"?new wC(e,s):t==="in"?new bC(e,s):t==="not-in"?new AC(e,s):t==="array-contains-any"?new SC(e,s):new Ct(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new EC(e,s):new TC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(To(t,this.value)):t!==null&&gs(this.value)===gs(t)&&this.matchesComparison(To(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends PT{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ai(e,t)}matches(e){return MT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function MT(i){return i.op==="and"}function VT(i){return vC(i)&&MT(i)}function vC(i){for(const e of i.filters)if(e instanceof ai)return!1;return!0}function Wm(i){if(i instanceof Ct)return i.field.canonicalString()+i.op.toString()+wo(i.value);if(VT(i))return i.filters.map(e=>Wm(e)).join(",");{const e=i.filters.map(t=>Wm(t)).join(",");return`${i.op}(${e})`}}function UT(i,e){return i instanceof Ct?function(s,o){return o instanceof Ct&&s.op===o.op&&s.field.isEqual(o.field)&&Di(s.value,o.value)}(i,e):i instanceof ai?function(s,o){return o instanceof ai&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((c,d,m)=>c&&UT(d,o.filters[m]),!0):!1}(i,e):void be(19439)}function LT(i){return i instanceof Ct?function(t){return`${t.field.canonicalString()} ${t.op} ${wo(t.value)}`}(i):i instanceof ai?function(t){return t.op.toString()+" {"+t.getFilters().map(LT).join(" ,")+"}"}(i):"Filter"}class _C extends Ct{constructor(e,t,s){super(e,t,s),this.key=ve.fromName(s.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class EC extends Ct{constructor(e,t){super(e,"in",t),this.keys=BT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class TC extends Ct{constructor(e,t){super(e,"not-in",t),this.keys=BT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BT(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>ve.fromName(s.referenceValue))}class wC extends Ct{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ip(t)&&fc(t.arrayValue,this.value)}}class bC extends Ct{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fc(this.value.arrayValue,t)}}class AC extends Ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fc(this.value.arrayValue,t)}}class SC extends Ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ip(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>fc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,t=null,s=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.Ie=null}}function I0(i,e=null,t=[],s=[],o=null,c=null,d=null){return new xC(i,e,t,s,o,c,d)}function jp(i){const e=Re(i);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Wm(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),Xh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>wo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>wo(s)).join(",")),e.Ie=t}return e.Ie}function Dp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!yC(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!UT(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!N0(i.startAt,e.startAt)&&N0(i.endAt,e.endAt)}function Zm(i){return ve.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t=null,s=[],o=[],c=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function RC(i,e,t,s,o,c,d,m){return new Oo(i,e,t,s,o,c,d,m)}function kp(i){return new Oo(i)}function j0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function zT(i){return i.collectionGroup!==null}function ic(i){const e=Re(i);if(e.Ee===null){e.Ee=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ee.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Pt(Xt.comparator);return d.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ee.push(new mc(c,s))}),t.has(Xt.keyField().canonicalString())||e.Ee.push(new mc(Xt.keyField(),s))}return e.Ee}function Ni(i){const e=Re(i);return e.de||(e.de=CC(e,ic(i))),e.de}function CC(i,e){if(i.limitType==="F")return I0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new mc(o.field,c)});const t=i.endAt?new Ih(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Ih(i.startAt.position,i.startAt.inclusive):null;return I0(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function Jm(i,e){const t=i.filters.concat([e]);return new Oo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function jh(i,e,t){return new Oo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Zh(i,e){return Dp(Ni(i),Ni(e))&&i.limitType===e.limitType}function qT(i){return`${jp(Ni(i))}|lt:${i.limitType}`}function ho(i){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>LT(o)).join(", ")}]`),Xh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>wo(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>wo(o)).join(",")),`Target(${s})`}(Ni(i))}; limitType=${i.limitType})`}function Jh(i,e){return e.isFoundDocument()&&function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ve.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(i,e)&&function(s,o){for(const c of ic(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(d,m,g){const y=C0(d,m,g);return d.inclusive?y<=0:y<0}(s.startAt,ic(s),o)||s.endAt&&!function(d,m,g){const y=C0(d,m,g);return d.inclusive?y>=0:y>0}(s.endAt,ic(s),o))}(i,e)}function NC(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function HT(i){return(e,t)=>{let s=!1;for(const o of ic(i)){const c=IC(o,e,t);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function IC(i,e,t){const s=i.field.isKeyField()?ve.comparator(e.key,t.key):function(c,d,m){const g=d.data.field(c),y=m.data.field(c);return g!==null&&y!==null?To(g,y):be(42886)}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return be(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ts(this.inner,(t,s)=>{for(const[o,c]of s)e(o,c)})}isEmpty(){return xT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new ut(ve.comparator);function wr(){return jC}const FT=new ut(ve.comparator);function Zl(...i){let e=FT;for(const t of i)e=e.insert(t.key,t);return e}function GT(i){let e=FT;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function aa(){return rc()}function YT(){return rc()}function rc(){return new va(i=>i.toString(),(i,e)=>i.isEqual(e))}const DC=new ut(ve.comparator),kC=new Pt(ve.comparator);function Me(...i){let e=kC;for(const t of i)e=e.add(t);return e}const OC=new Pt(je);function PC(){return OC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function KT(i){return{integerValue:""+i}}function MC(i,e){return cC(e)?KT(e):Op(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this._=void 0}}function VC(i,e,t){return i instanceof pc?function(o,c){const d={fields:{[NT]:{stringValue:CT},[jT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Np(c)&&(c=Wh(c)),c&&(d.fields[IT]=c),{mapValue:d}}(t,e):i instanceof gc?$T(i,e):i instanceof yc?XT(i,e):function(o,c){const d=QT(o,c),m=D0(d)+D0(o.Re);return Xm(d)&&Xm(o.Re)?KT(m):Op(o.serializer,m)}(i,e)}function UC(i,e,t){return i instanceof gc?$T(i,e):i instanceof yc?XT(i,e):t}function QT(i,e){return i instanceof Dh?function(s){return Xm(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class pc extends ed{}class gc extends ed{constructor(e){super(),this.elements=e}}function $T(i,e){const t=WT(e);for(const s of i.elements)t.some(o=>Di(o,s))||t.push(s);return{arrayValue:{values:t}}}class yc extends ed{constructor(e){super(),this.elements=e}}function XT(i,e){let t=WT(e);for(const s of i.elements)t=t.filter(o=>!Di(o,s));return{arrayValue:{values:t}}}class Dh extends ed{constructor(e,t){super(),this.serializer=e,this.Re=t}}function D0(i){return Tt(i.integerValue||i.doubleValue)}function WT(i){return Ip(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,t){this.field=e,this.transform=t}}function BC(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof gc&&o instanceof gc||s instanceof yc&&o instanceof yc?Eo(s.elements,o.elements,Di):s instanceof Dh&&o instanceof Dh?Di(s.Re,o.Re):s instanceof pc&&o instanceof pc}(i.transform,e.transform)}class zC{constructor(e,t){this.version=e,this.transformResults=t}}class ii{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ii}static exists(e){return new ii(void 0,e)}static updateTime(e){return new ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class td{}function ZT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new ew(i.key,ii.none()):new Ac(i.key,i.data,ii.none());{const t=i.data,s=vn.empty();let o=new Pt(Xt.comparator);for(let c of e.fields)if(!o.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?s.delete(c):s.set(c,d),o=o.add(c)}return new ws(i.key,s,new In(o.toArray()),ii.none())}}function qC(i,e,t){i instanceof Ac?function(o,c,d){const m=o.value.clone(),g=O0(o.fieldTransforms,c,d.transformResults);m.setAll(g),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,t):i instanceof ws?function(o,c,d){if(!yh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=O0(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(JT(o)),g.setAll(m),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(i,e,t):function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function sc(i,e,t,s){return i instanceof Ac?function(c,d,m,g){if(!yh(c.precondition,d))return m;const y=c.value.clone(),_=P0(c.fieldTransforms,g,d);return y.setAll(_),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null}(i,e,t,s):i instanceof ws?function(c,d,m,g){if(!yh(c.precondition,d))return m;const y=P0(c.fieldTransforms,g,d),_=d.data;return _.setAll(JT(c)),_.setAll(y),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(A=>A.field))}(i,e,t,s):function(c,d,m){return yh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(i,e,t)}function HC(i,e){let t=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),c=QT(s.transform,o||null);c!=null&&(t===null&&(t=vn.empty()),t.set(s.field,c))}return t||null}function k0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Eo(s,o,(c,d)=>BC(c,d))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ac extends td{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ws extends td{constructor(e,t,s,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function JT(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function O0(i,e,t){const s=new Map;Ge(i.length===t.length,32656,{Ve:t.length,me:i.length});for(let o=0;o<t.length;o++){const c=i[o],d=c.transform,m=e.data.field(c.field);s.set(c.field,UC(d,m,t[o]))}return s}function P0(i,e,t){const s=new Map;for(const o of i){const c=o.transform,d=t.data.field(o.field);s.set(o.field,VC(c,d,e))}return s}class ew extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FC extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&qC(c,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=sc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=sc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=YT();return this.mutations.forEach(o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(o.key)?null:m;const g=ZT(d,m);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(xe.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Me())}isEqual(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,(t,s)=>k0(t,s))&&Eo(this.baseMutations,e.baseMutations,(t,s)=>k0(t,s))}}class Pp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ge(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return DC}();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,s[d].version);return new Pp(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt,ze;function QC(i){switch(i){case ee.OK:return be(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return be(15467,{code:i})}}function tw(i){if(i===void 0)return Tr("GRPC error has no .code"),ee.UNKNOWN;switch(i){case Rt.OK:return ee.OK;case Rt.CANCELLED:return ee.CANCELLED;case Rt.UNKNOWN:return ee.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return ee.INTERNAL;case Rt.UNAVAILABLE:return ee.UNAVAILABLE;case Rt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Rt.NOT_FOUND:return ee.NOT_FOUND;case Rt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Rt.ABORTED:return ee.ABORTED;case Rt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Rt.DATA_LOSS:return ee.DATA_LOSS;default:return be(39323,{code:i})}}(ze=Rt||(Rt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=new us([4294967295,4294967295],0);function M0(i){const e=bT().encode(i),t=new pT;return t.update(e),new Uint8Array(t.digest())}function V0(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new us([t,s],0),new us([o,c],0)]}class Mp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Jl(`Invalid padding: ${t}`);if(s<0)throw new Jl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Jl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Jl(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=us.fromNumber(this.pe)}we(e,t,s){let o=e.add(t.multiply(us.fromNumber(s)));return o.compare($C)===1&&(o=new us([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=M0(e),[s,o]=V0(t);for(let c=0;c<this.hashCount;c++){const d=this.we(s,o,c);if(!this.be(d))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Mp(c,o,t);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.pe===0)return;const t=M0(e),[s,o]=V0(t);for(let c=0;c<this.hashCount;c++){const d=this.we(s,o,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t,s,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Sc.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new nd(xe.min(),o,new ut(je),wr(),Me())}}class Sc{constructor(e,t,s,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Sc(s,t,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t,s,o){this.De=e,this.removedTargetIds=t,this.key=s,this.ve=o}}class nw{constructor(e,t){this.targetId=e,this.Ce=t}}class iw{constructor(e,t,s=Wt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class U0{constructor(){this.Fe=0,this.Me=L0(),this.xe=Wt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Me(),t=Me(),s=Me();return this.Me.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:be(38017,{changeType:c})}}),new Sc(this.xe,this.Oe,e,t,s)}Qe(){this.Ne=!1,this.Me=L0()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ge(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class XC{constructor(e){this.ze=e,this.je=new Map,this.He=wr(),this.Je=oh(),this.Ye=oh(),this.Ze=new ut(je)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const s=this.rt(t);switch(e.state){case 0:this.it(t)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(t);break;case 3:this.it(t)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),s.ke(e.resumeToken));break;default:be(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((s,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,s=e.Ce.count,o=this._t(t);if(o){const c=o.target;if(Zm(c))if(s===0){const d=new ve(c.path);this.tt(t,d,rn.newNoDocument(d,xe.min()))}else Ge(s===1,20013,{expectedCount:s});else{const d=this.ut(t);if(d!==s){const m=this.ct(e),g=m?this.lt(m,e,d):1;if(g!==0){this.st(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=t;let d,m;try{d=ps(s).toUint8Array()}catch(g){if(g instanceof RT)return _o("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Mp(d,o,c)}catch(g){return _o(g instanceof Jl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.pe===0?null:m}lt(e,t,s){return t.Ce.count===s-this.Tt(e,t.targetId)?0:2}Tt(e,t){const s=this.ze.getRemoteKeysForTarget(t);let o=0;return s.forEach(c=>{const d=this.ze.Pt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.tt(t,c,null),o++)}),o}It(e){const t=new Map;this.je.forEach((c,d)=>{const m=this._t(d);if(m){if(c.current&&Zm(m.target)){const g=new ve(m.target.path);this.Et(g).has(d)||this.dt(d,g)||this.tt(d,g,rn.newNoDocument(g,e))}c.Le&&(t.set(d,c.qe()),c.Qe())}});let s=Me();this.Ye.forEach((c,d)=>{let m=!0;d.forEachWhile(g=>{const y=this._t(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.He.forEach((c,d)=>d.setReadTime(e));const o=new nd(e,t,this.Ze,this.He,s);return this.He=wr(),this.Je=oh(),this.Ye=oh(),this.Ze=new ut(je),o}et(e,t){if(!this.it(e))return;const s=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,s),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),s&&(this.He=this.He.insert(t,s))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new U0,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Pt(je),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Pt(je),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new U0),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function oh(){return new ut(ve.comparator)}function L0(){return new ut(ve.comparator)}const WC={asc:"ASCENDING",desc:"DESCENDING"},ZC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JC={and:"AND",or:"OR"};class eN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ep(i,e){return i.useProto3Json||Xh(e)?e:{value:e}}function kh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function tN(i,e){return kh(i,e.toTimestamp())}function Ii(i){return Ge(!!i,49232),xe.fromTimestamp(function(t){const s=ms(t);return new Ot(s.seconds,s.nanos)}(i))}function Vp(i,e){return tp(i,e).canonicalString()}function tp(i,e){const t=function(o){return new rt(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?t:t.child(e)}function sw(i){const e=rt.fromString(i);return Ge(uw(e),10190,{key:e.toString()}),e}function np(i,e){return Vp(i.databaseId,e.path)}function jm(i,e){const t=sw(e);if(t.get(1)!==i.databaseId.projectId)throw new ue(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ue(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ve(ow(t))}function aw(i,e){return Vp(i.databaseId,e)}function nN(i){const e=sw(i);return e.length===4?rt.emptyPath():ow(e)}function ip(i){return new rt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ow(i){return Ge(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function B0(i,e,t){return{name:np(i,e),fields:t.value.mapValue.fields}}function iN(i,e){let t;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:be(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(y,_){return y.useProto3Json?(Ge(_===void 0||typeof _=="string",58123),Wt.fromBase64String(_||"")):(Ge(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Wt.fromUint8Array(_||new Uint8Array))}(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(y){const _=y.code===void 0?ee.UNKNOWN:tw(y.code);return new ue(_,y.message||"")}(d);t=new iw(s,o,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=jm(i,s.document.name),c=Ii(s.document.updateTime),d=s.document.createTime?Ii(s.document.createTime):xe.min(),m=new vn({mapValue:{fields:s.document.fields}}),g=rn.newFoundDocument(o,c,d,m),y=s.targetIds||[],_=s.removedTargetIds||[];t=new vh(y,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=jm(i,s.document),c=s.readTime?Ii(s.readTime):xe.min(),d=rn.newNoDocument(o,c),m=s.removedTargetIds||[];t=new vh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=jm(i,s.document),c=s.removedTargetIds||[];t=new vh([],c,o,null)}else{if(!("filter"in e))return be(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,d=new KC(o,c),m=s.targetId;t=new nw(m,d)}}return t}function rN(i,e){let t;if(e instanceof Ac)t={update:B0(i,e.key,e.value)};else if(e instanceof ew)t={delete:np(i,e.key)};else if(e instanceof ws)t={update:B0(i,e.key,e.data),updateMask:fN(e.fieldMask)};else{if(!(e instanceof FC))return be(16599,{ft:e.type});t={verify:np(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,d){const m=d.transform;if(m instanceof pc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof gc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof yc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Dh)return{fieldPath:d.field.canonicalString(),increment:m.Re};throw be(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:tN(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:be(27497)}(i,e.precondition)),t}function sN(i,e){return i&&i.length>0?(Ge(e!==void 0,14353),i.map(t=>function(o,c){let d=o.updateTime?Ii(o.updateTime):Ii(c);return d.isEqual(xe.min())&&(d=Ii(c)),new zC(d,o.transformResults||[])}(t,e))):[]}function aN(i,e){return{documents:[aw(i,e.path)]}}function oN(i,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=aw(i,o);const c=function(y){if(y.length!==0)return cw(ai.create(y,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const d=function(y){if(y.length!==0)return y.map(_=>function(b){return{field:fo(b.field),direction:uN(b.dir)}}(_))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=ep(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:o}}function lN(i){let e=nN(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ge(s===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let c=[];t.where&&(c=function(A){const b=lw(A);return b instanceof ai&&VT(b)?b.getFilters():[b]}(t.where));let d=[];t.orderBy&&(d=function(A){return A.map(b=>function(C){return new mc(mo(C.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(b))}(t.orderBy));let m=null;t.limit&&(m=function(A){let b;return b=typeof A=="object"?A.value:A,Xh(b)?null:b}(t.limit));let g=null;t.startAt&&(g=function(A){const b=!!A.before,k=A.values||[];return new Ih(k,b)}(t.startAt));let y=null;return t.endAt&&(y=function(A){const b=!A.before,k=A.values||[];return new Ih(k,b)}(t.endAt)),RC(e,o,d,c,m,"F",g,y)}function cN(i,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lw(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=mo(t.unaryFilter.field);return Ct.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=mo(t.unaryFilter.field);return Ct.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=mo(t.unaryFilter.field);return Ct.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=mo(t.unaryFilter.field);return Ct.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}}(i):i.fieldFilter!==void 0?function(t){return Ct.create(mo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return ai.create(t.compositeFilter.filters.map(s=>lw(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}}(t.compositeFilter.op))}(i):be(30097,{filter:i})}function uN(i){return WC[i]}function hN(i){return ZC[i]}function dN(i){return JC[i]}function fo(i){return{fieldPath:i.canonicalString()}}function mo(i){return Xt.fromServerFormat(i.fieldPath)}function cw(i){return i instanceof Ct?function(t){if(t.op==="=="){if(R0(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NAN"}};if(x0(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(R0(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NOT_NAN"}};if(x0(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(t.field),op:hN(t.op),value:t.value}}}(i):i instanceof ai?function(t){const s=t.getFilters().map(o=>cw(o));return s.length===1?s[0]:{compositeFilter:{op:dN(t.op),filters:s}}}(i):be(54877,{filter:i})}function fN(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,t,s,o,c=xe.min(),d=xe.min(),m=Wt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.wt=e}}function pN(i){const e=lN({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?jh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this.yn=new yN}addToCollectionParentIndex(e,t){return this.yn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(fs.min())}updateCollectionGroup(e,t,s){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class yN{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Pt(rt.comparator),c=!o.has(s);return this.index[t]=o.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Pt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hw=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(hw,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new bo(0)}static ir(){return new bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="LruGarbageCollector",vN=1048576;function H0([i,e],[t,s]){const o=je(i,t);return o===0?je(e,s):o}class _N{constructor(e){this.cr=e,this.buffer=new Pt(H0),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();H0(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class EN{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){he(q0,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ko(t)?he(q0,"Ignoring IndexedDB error during garbage collection: ",t):await Do(t)}await this.Ir(3e5)})}}class TN{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return ne.resolve($h.le);const s=new _N(t);return this.Er.forEachTarget(e,o=>s.Pr(o.sequenceNumber)).next(()=>this.Er.Ar(e,o=>s.Pr(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Er.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(z0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z0):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let s,o,c,d,m,g,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(s=A,m=Date.now(),this.removeTargets(e,s,t))).next(A=>(c=A,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(A=>(y=Date.now(),uo()<=Pe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${A} documents in `+(y-g)+`ms
Total Duration: ${y-_}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A})))}}function wN(i,e){return new TN(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.changes=new va(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ne.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&sc(s.mutation,o,In.empty(),Ot.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Me()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Me()){const o=aa();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(c=>{let d=Zl();return c.forEach((m,g)=>{d=d.insert(m,g.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const s=aa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Me()))}populateOverlays(e,t,s){const o=[];return s.forEach(c=>{t.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,s,o){let c=wr();const d=rc(),m=function(){return rc()}();return t.forEach((g,y)=>{const _=s.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof ws)?c=c.insert(y.key,y):_!==void 0?(d.set(y.key,_.mutation.getFieldMask()),sc(_.mutation,y,_.mutation.getFieldMask(),Ot.now())):d.set(y.key,In.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((y,_)=>d.set(y,_)),t.forEach((y,_)=>{var A;return m.set(y,new AN(_,(A=d.get(y))!==null&&A!==void 0?A:null))}),m))}recalculateAndSaveOverlays(e,t){const s=rc();let o=new ut((d,m)=>d-m),c=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(g=>{const y=t.get(g);if(y===null)return;let _=s.get(g)||In.empty();_=m.applyToLocalView(y,_),s.set(g,_);const A=(o.get(m.batchId)||Me()).add(g);o=o.insert(m.batchId,A)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,_=g.value,A=YT();_.forEach(b=>{if(!c.has(b)){const k=ZT(t.get(b),s.get(b));k!==null&&A.set(b,k),c=c.add(b)}}),d.push(this.documentOverlayCache.saveOverlays(e,y,A))}return ne.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(d){return ve.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-c.size):ne.resolve(aa());let m=uc,g=c;return d.next(y=>ne.forEach(y,(_,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),c.get(_)?ne.resolve():this.remoteDocumentCache.getEntry(e,_).next(b=>{g=g.insert(_,b)}))).next(()=>this.populateOverlays(e,y,c)).next(()=>this.computeViews(e,g,y,Me())).next(_=>({batchId:m,changes:GT(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(s=>{let o=Zl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const c=t.collectionGroup;let d=Zl();return this.indexManager.getCollectionParents(e,c).next(m=>ne.forEach(m,g=>{const y=function(A,b){return new Oo(b,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(_=>{_.forEach((A,b)=>{d=d.insert(A,b)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,o))).next(d=>{c.forEach((g,y)=>{const _=y.getKey();d.get(_)===null&&(d=d.insert(_,rn.newInvalidDocument(_)))});let m=Zl();return d.forEach((g,y)=>{const _=c.get(g);_!==void 0&&sc(_.mutation,y,In.empty(),Ot.now()),Jh(t,y)&&(m=m.insert(g,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Ii(o.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(o){return{name:o.name,query:pN(o.bundledQuery),readTime:Ii(o.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.overlays=new ut(ve.comparator),this.Or=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const s=aa();return ne.forEach(t,o=>this.getOverlay(e,o).next(c=>{c!==null&&s.set(o,c)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,c)=>{this.St(e,t,c)}),ne.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Or.get(s);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Or.delete(s)),ne.resolve()}getOverlaysForCollection(e,t,s){const o=aa(),c=t.length+1,d=new ve(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let c=new ut((y,_)=>y-_);const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let _=c.get(y.largestBatchId);_===null&&(_=aa(),c=c.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const m=aa(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,_)=>m.set(y,_)),!(m.size()>=o)););return ne.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Or.get(o.largestBatchId).delete(s.key);this.Or.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new YC(t,s));let c=this.Or.get(t);c===void 0&&(c=Me(),this.Or.set(t,c)),this.Or.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.Nr=new Pt(Ht.Br),this.Lr=new Pt(Ht.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const s=new Ht(e,t);this.Nr=this.Nr.add(s),this.Lr=this.Lr.add(s)}qr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Qr(new Ht(e,t))}$r(e,t){e.forEach(s=>this.removeReference(s,t))}Ur(e){const t=new ve(new rt([])),s=new Ht(t,e),o=new Ht(t,e+1),c=[];return this.Lr.forEachInRange([s,o],d=>{this.Qr(d),c.push(d.key)}),c}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new ve(new rt([])),s=new Ht(t,e),o=new Ht(t,e+1);let c=Me();return this.Lr.forEachInRange([s,o],d=>{c=c.add(d.key)}),c}containsKey(e){const t=new Ht(e,0),s=this.Nr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ht{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return ve.comparator(e.key,t.key)||je(e.Gr,t.Gr)}static kr(e,t){return je(e.Gr,t.Gr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Pt(Ht.Br)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const c=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new GC(c,t,s,o);this.mutationQueue.push(d);for(const m of o)this.zr=this.zr.add(new Ht(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(d)}lookupMutationBatch(e,t){return ne.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Hr(s),c=o<0?0:o;return ne.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Cp:this.Jn-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ht(t,0),o=new Ht(t,Number.POSITIVE_INFINITY),c=[];return this.zr.forEachInRange([s,o],d=>{const m=this.jr(d.Gr);c.push(m)}),ne.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Pt(je);return t.forEach(o=>{const c=new Ht(o,0),d=new Ht(o,Number.POSITIVE_INFINITY);this.zr.forEachInRange([c,d],m=>{s=s.add(m.Gr)})}),ne.resolve(this.Jr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let c=s;ve.isDocumentKey(c)||(c=c.child(""));const d=new Ht(new ve(c),0);let m=new Pt(je);return this.zr.forEachWhile(g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Gr)),!0)},d),ne.resolve(this.Jr(m))}Jr(e){const t=[];return e.forEach(s=>{const o=this.jr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ge(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.zr;return ne.forEach(t.mutations,o=>{const c=new Ht(o.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.zr=s})}Xn(e){}containsKey(e,t){const s=new Ht(t,0),o=this.zr.firstAfterOrEqual(s);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.Zr=e,this.docs=function(){return new ut(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),c=o?o.size:0,d=this.Zr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ne.resolve(s?s.document.mutableCopy():rn.newInvalidDocument(t))}getEntries(e,t){let s=wr();return t.forEach(o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():rn.newInvalidDocument(o))}),ne.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let c=wr();const d=t.path,m=new ve(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:_}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||sC(rC(_),s)<=0||(o.has(_.key)||Jh(t,_))&&(c=c.insert(_.key,_.mutableCopy()))}return ne.resolve(c)}getAllFromCollectionGroup(e,t,s,o){be(9500)}Xr(e,t){return ne.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new jN(this)}getSize(e){return ne.resolve(this.size)}}class jN extends bN{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.vr.addEntry(e,o)):this.vr.removeEntry(s)}),ne.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.persistence=e,this.ei=new va(t=>jp(t),Dp),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.ti=0,this.ni=new Up,this.targetCount=0,this.ri=bo.rr()}forEachTarget(e,t){return this.ei.forEach((s,o)=>t(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ti&&(this.ti=t),ne.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new bo(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.ar(t),ne.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,s){let o=0;const c=[];return this.ei.forEach((d,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.ei.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ne.waitFor(c).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const s=this.ei.get(t)||null;return ne.resolve(s)}addMatchingKeys(e,t,s){return this.ni.qr(t,s),ne.resolve()}removeMatchingKeys(e,t,s){this.ni.$r(t,s);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach(d=>{c.push(o.markPotentiallyOrphaned(e,d))}),ne.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ni.Wr(t);return ne.resolve(s)}containsKey(e,t){return ne.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t){this.ii={},this.overlays={},this.si=new $h(0),this.oi=!1,this.oi=!0,this._i=new CN,this.referenceDelegate=e(this),this.ai=new DN(this),this.indexManager=new gN,this.remoteDocumentCache=function(o){return new IN(o)}(s=>this.referenceDelegate.ui(s)),this.serializer=new mN(t),this.ci=new xN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ii[e.toKey()];return s||(s=new NN(t,this.referenceDelegate),this.ii[e.toKey()]=s),s}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,s){he("MemoryPersistence","Starting transaction:",e);const o=new kN(this.si.next());return this.referenceDelegate.li(),s(o).next(c=>this.referenceDelegate.hi(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Pi(e,t){return ne.or(Object.values(this.ii).map(s=>()=>s.containsKey(e,t)))}}class kN extends oC{constructor(e){super(),this.currentSequenceNumber=e}}class Lp{constructor(e){this.persistence=e,this.Ti=new Up,this.Ii=null}static Ei(e){return new Lp(e)}get di(){if(this.Ii)return this.Ii;throw be(60996)}addReference(e,t,s){return this.Ti.addReference(s,t),this.di.delete(s.toString()),ne.resolve()}removeReference(e,t,s){return this.Ti.removeReference(s,t),this.di.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(o=>this.di.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(c=>this.di.add(c.toString()))}).next(()=>s.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.di,s=>{const o=ve.fromPath(s);return this.Ai(e,o).next(c=>{c||t.removeEntry(o,xe.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return ne.or([()=>ne.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Oh{constructor(e,t){this.persistence=e,this.Ri=new va(s=>uC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=wN(this,t)}static Ei(e,t){return new Oh(e,t)}li(){}hi(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}Vr(e){let t=0;return this.Ar(e,s=>{t++}).next(()=>t)}Ar(e,t){return ne.forEach(this.Ri,(s,o)=>this.gr(e,s,o).next(c=>c?ne.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.Xr(e,d=>this.gr(e,d,t).next(m=>{m||(s++,c.removeEntry(d,xe.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.Ri.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,s){return this.Ri.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),ne.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ph(e.data.value)),t}gr(e,t,s){return ne.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.Ri.get(t);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.ls=s,this.hs=o}static Ps(e,t){let s=Me(),o=Me();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Bp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return Cx()?8:lC(sn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,s,o){const c={result:null};return this.Rs(e,t).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.Vs(e,t,o,s).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new ON;return this.fs(e,t,d).next(m=>{if(c.result=m,this.Is)return this.gs(e,t,d,m.size)})}).next(()=>c.result)}gs(e,t,s,o){return s.documentReadCount<this.Es?(uo()<=Pe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",ho(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ne.resolve()):(uo()<=Pe.DEBUG&&he("QueryEngine","Query:",ho(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(uo()<=Pe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",ho(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(t))):ne.resolve())}Rs(e,t){if(j0(t))return ne.resolve(null);let s=Ni(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=jh(t,null,"F"),s=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const d=Me(...c);return this.As.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(g=>{const y=this.ps(t,m);return this.ys(t,y,d,g.readTime)?this.Rs(e,jh(t,null,"F")):this.ws(e,y,t,g)}))})))}Vs(e,t,s,o){return j0(t)||o.isEqual(xe.min())?ne.resolve(null):this.As.getDocuments(e,s).next(c=>{const d=this.ps(t,c);return this.ys(t,d,s,o)?ne.resolve(null):(uo()<=Pe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ho(t)),this.ws(e,d,t,iC(o,uc)).next(m=>m))})}ps(e,t){let s=new Pt(HT(e));return t.forEach((o,c)=>{Jh(e,c)&&(s=s.add(c))}),s}ys(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}fs(e,t,s){return uo()<=Pe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",ho(t)),this.As.getDocumentsMatchingQuery(e,t,fs.min(),s)}ws(e,t,s,o){return this.As.getDocumentsMatchingQuery(e,s,o).next(c=>(t.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="LocalStore",MN=3e8;class VN{constructor(e,t,s,o){this.persistence=e,this.bs=t,this.serializer=o,this.Ss=new ut(je),this.Ds=new va(c=>jp(c),Dp),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(s)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SN(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function UN(i,e,t,s){return new VN(i,e,t,s)}async function fw(i,e){const t=Re(i);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(c=>(o=c,t.Fs(e),t.mutationQueue.getAllMutationBatches(s))).next(c=>{const d=[],m=[];let g=Me();for(const y of o){d.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}for(const y of c){m.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(s,g).next(y=>({Ms:y,removedBatchIds:d,addedBatchIds:m}))})})}function LN(i,e){const t=Re(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),c=t.Cs.newChangeBuffer({trackRemovals:!0});return function(m,g,y,_){const A=y.batch,b=A.keys();let k=ne.resolve();return b.forEach(C=>{k=k.next(()=>_.getEntry(g,C)).next(P=>{const I=y.docVersions.get(C);Ge(I!==null,48541),P.version.compareTo(I)<0&&(A.applyToRemoteDocument(P,y),P.isValidDocument()&&(P.setReadTime(y.commitVersion),_.addEntry(P)))})}),k.next(()=>m.mutationQueue.removeMutationBatch(g,A))}(t,s,e,c).next(()=>c.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let g=Me();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function mw(i){const e=Re(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function BN(i,e){const t=Re(i),s=e.snapshotVersion;let o=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=t.Cs.newChangeBuffer({trackRemovals:!0});o=t.Ss;const m=[];e.targetChanges.forEach((_,A)=>{const b=o.get(A);if(!b)return;m.push(t.ai.removeMatchingKeys(c,_.removedDocuments,A).next(()=>t.ai.addMatchingKeys(c,_.addedDocuments,A)));let k=b.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?k=k.withResumeToken(Wt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):_.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(_.resumeToken,s)),o=o.insert(A,k),function(P,I,G){return P.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=MN?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(b,k,_)&&m.push(t.ai.updateTargetData(c,k))});let g=wr(),y=Me();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,_))}),m.push(zN(c,d,e.documentUpdates).next(_=>{g=_.xs,y=_.Os})),!s.isEqual(xe.min())){const _=t.ai.getLastRemoteSnapshotVersion(c).next(A=>t.ai.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(_)}return ne.waitFor(m).next(()=>d.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,g,y)).next(()=>g)}).then(c=>(t.Ss=o,c))}function zN(i,e,t){let s=Me(),o=Me();return t.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let d=wr();return t.forEach((m,g)=>{const y=c.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(xe.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):he(zp,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)}),{xs:d,Os:o}})}function qN(i,e){const t=Re(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Cp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function HN(i,e){const t=Re(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.ai.getTargetData(s,e).next(c=>c?(o=c,ne.resolve(o)):t.ai.allocateTargetId(s).next(d=>(o=new os(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.ai.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Ss.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(s.targetId,s),t.Ds.set(e,s.targetId)),s})}async function rp(i,e,t){const s=Re(i),o=s.Ss.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!ko(d))throw d;he(zp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ss=s.Ss.remove(e),s.Ds.delete(o.target)}function F0(i,e,t){const s=Re(i);let o=xe.min(),c=Me();return s.persistence.runTransaction("Execute query","readwrite",d=>function(g,y,_){const A=Re(g),b=A.Ds.get(_);return b!==void 0?ne.resolve(A.Ss.get(b)):A.ai.getTargetData(y,_)}(s,d,Ni(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.ai.getMatchingKeysForTargetId(d,m.targetId).next(g=>{c=g})}).next(()=>s.bs.getDocumentsMatchingQuery(d,e,t?o:xe.min(),t?c:Me())).next(m=>(FN(s,NC(e),m),{documents:m,Ns:c})))}function FN(i,e,t){let s=i.vs.get(e)||xe.min();t.forEach((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.vs.set(e,s)}class G0{constructor(){this.activeTargetIds=PC()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GN{constructor(){this.So=new G0,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,s){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new G0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="ConnectivityMonitor";class K0{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){he(Y0,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){he(Y0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh=null;function sp(){return lh===null?lh=function(){return 268435456+Math.round(2147483648*Math.random())}():lh++,"0x"+lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="RestConnection",KN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QN{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${s}/databases/${o}`,this.qo=this.databaseId.database===Ch?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Qo(e,t,s,o,c){const d=sp(),m=this.$o(e,t.toUriEncodedString());he(Dm,`Sending RPC '${e}' ${d}:`,m,s);const g={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(g,o,c);const{host:y}=new URL(m),_=ga(y);return this.Ko(e,m,g,s,_).then(A=>(he(Dm,`Received RPC '${e}' ${d}: `,A),A),A=>{throw _o(Dm,`RPC '${e}' ${d} failed with error: `,A,"url: ",m,"request:",s),A})}Wo(e,t,s,o,c,d){return this.Qo(e,t,s,o,c)}Uo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,c)=>e[c]=o),s&&s.headers.forEach((o,c)=>e[c]=o)}$o(e,t){const s=KN[e];return`${this.Lo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class XN extends QN{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,s,o,c){const d=sp();return new Promise((m,g)=>{const y=new gT;y.setWithCredentials(!0),y.listenOnce(yT.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case mh.NO_ERROR:const A=y.getResponseJson();he(tn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(A)),m(A);break;case mh.TIMEOUT:he(tn,`RPC '${e}' ${d} timed out`),g(new ue(ee.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const b=y.getStatus();if(he(tn,`RPC '${e}' ${d} failed with status:`,b,"response text:",y.getResponseText()),b>0){let k=y.getResponseJson();Array.isArray(k)&&(k=k[0]);const C=k==null?void 0:k.error;if(C&&C.status&&C.message){const P=function(G){const J=G.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(J)>=0?J:ee.UNKNOWN}(C.status);g(new ue(P,C.message))}else g(new ue(ee.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ue(ee.UNAVAILABLE,"Connection failed."));break;default:be(9055,{s_:e,streamId:d,o_:y.getLastErrorCode(),__:y.getLastError()})}}finally{he(tn,`RPC '${e}' ${d} completed.`)}});const _=JSON.stringify(o);he(tn,`RPC '${e}' ${d} sending request:`,o),y.send(t,"POST",_,s,15)})}a_(e,t,s){const o=sp(),c=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=ET(),m=_T(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Uo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const _=c.join("");he(tn,`Creating RPC '${e}' stream ${o}: ${_}`,g);const A=d.createWebChannel(_,g);let b=!1,k=!1;const C=new $N({Go:I=>{k?he(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,I):(b||(he(tn,`Opening RPC '${e}' stream ${o} transport.`),A.open(),b=!0),he(tn,`RPC '${e}' stream ${o} sending:`,I),A.send(I))},zo:()=>A.close()}),P=(I,G,J)=>{I.listen(G,X=>{try{J(X)}catch(oe){setTimeout(()=>{throw oe},0)}})};return P(A,Wl.EventType.OPEN,()=>{k||(he(tn,`RPC '${e}' stream ${o} transport opened.`),C.t_())}),P(A,Wl.EventType.CLOSE,()=>{k||(k=!0,he(tn,`RPC '${e}' stream ${o} transport closed`),C.r_())}),P(A,Wl.EventType.ERROR,I=>{k||(k=!0,_o(tn,`RPC '${e}' stream ${o} transport errored. Name:`,I.name,"Message:",I.message),C.r_(new ue(ee.UNAVAILABLE,"The operation could not be completed")))}),P(A,Wl.EventType.MESSAGE,I=>{var G;if(!k){const J=I.data[0];Ge(!!J,16349);const X=J,oe=(X==null?void 0:X.error)||((G=X[0])===null||G===void 0?void 0:G.error);if(oe){he(tn,`RPC '${e}' stream ${o} received error:`,oe);const ce=oe.status;let ye=function(N){const O=Rt[N];if(O!==void 0)return tw(O)}(ce),R=oe.message;ye===void 0&&(ye=ee.INTERNAL,R="Unknown error status: "+ce+" with message "+oe.message),k=!0,C.r_(new ue(ye,R)),A.close()}else he(tn,`RPC '${e}' stream ${o} received:`,J),C.i_(J)}}),P(m,vT.STAT_EVENT,I=>{I.stat===Km.PROXY?he(tn,`RPC '${e}' stream ${o} detected buffering proxy`):I.stat===Km.NOPROXY&&he(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{C.n_()},0),C}}function km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(i){return new eN(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,t,s=1e3,o=1.5,c=6e4){this.bi=e,this.timerId=t,this.u_=s,this.c_=o,this.l_=c,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),s=Math.max(0,Date.now()-this.T_),o=Math.max(0,t-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,o,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="PersistentStream";class gw{constructor(e,t,s,o,c,d,m,g){this.bi=e,this.R_=s,this.V_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new pw(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Tr(t.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.m_===t&&this.B_(s,o)},s=>{e(()=>{const o=new ue(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.L_(o)})})}B_(e,t){const s=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{s(()=>this.listener.jo())}),this.stream.Jo(()=>{s(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(o=>{s(()=>this.L_(o))}),this.stream.onMessage(o=>{s(()=>++this.p_==1?this.q_(o):this.onNext(o))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return he(Q0,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(he(Q0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WN extends gw{constructor(e,t,s,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,d),this.serializer=c}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=iN(this.serializer,e),s=function(c){if(!("targetChange"in c))return xe.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?xe.min():d.readTime?Ii(d.readTime):xe.min()}(e);return this.listener.Q_(t,s)}U_(e){const t={};t.database=ip(this.serializer),t.addTarget=function(c,d){let m;const g=d.target;if(m=Zm(g)?{documents:aN(c,g)}:{query:oN(c,g).gt},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=rw(c,d.resumeToken);const y=ep(c,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(xe.min())>0){m.readTime=kh(c,d.snapshotVersion.toTimestamp());const y=ep(c,d.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const s=cN(this.serializer,e);s&&(t.labels=s),this.F_(t)}K_(e){const t={};t.database=ip(this.serializer),t.removeTarget=e,this.F_(t)}}class ZN extends gw{constructor(e,t,s,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,d),this.serializer=c}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=sN(e.writeResults,e.commitTime),s=Ii(e.commitTime);return this.listener.j_(s,t)}H_(){const e={};e.database=ip(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>rN(this.serializer,s))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{}class eI extends JN{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.J_=!1}Y_(){if(this.J_)throw new ue(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,s,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Qo(e,tp(t,s),o,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(ee.UNKNOWN,c.toString())})}Wo(e,t,s,o,c){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Wo(e,tp(t,s),o,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ue(ee.UNKNOWN,d.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class tI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Tr(t),this.ea=!1):he("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="RemoteStore";class nI{constructor(e,t,s,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=c,this.ca.vo(d=>{s.enqueueAndForget(async()=>{_a(this)&&(he(da,"Restarting streams for network reachability change."),await async function(g){const y=Re(g);y.aa.add(4),await xc(y),y.la.set("Unknown"),y.aa.delete(4),await rd(y)}(this))})}),this.la=new tI(s,o)}}async function rd(i){if(_a(i))for(const e of i.ua)await e(!0)}async function xc(i){for(const e of i.ua)await e(!1)}function yw(i,e){const t=Re(i);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Gp(t)?Fp(t):Po(t).b_()&&Hp(t,e))}function qp(i,e){const t=Re(i),s=Po(t);t._a.delete(e),s.b_()&&vw(t,e),t._a.size===0&&(s.b_()?s.v_():_a(t)&&t.la.set("Unknown"))}function Hp(i,e){if(i.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Po(i).U_(e)}function vw(i,e){i.ha.Ke(e),Po(i).K_(e)}function Fp(i){i.ha=new XC({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i._a.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),Po(i).start(),i.la.ta()}function Gp(i){return _a(i)&&!Po(i).w_()&&i._a.size>0}function _a(i){return Re(i).aa.size===0}function _w(i){i.ha=void 0}async function iI(i){i.la.set("Online")}async function rI(i){i._a.forEach((e,t)=>{Hp(i,e)})}async function sI(i,e){_w(i),Gp(i)?(i.la.ia(e),Fp(i)):i.la.set("Unknown")}async function aI(i,e,t){if(i.la.set("Online"),e instanceof iw&&e.state===2&&e.cause)try{await async function(o,c){const d=c.cause;for(const m of c.targetIds)o._a.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o._a.delete(m),o.ha.removeTarget(m))}(i,e)}catch(s){he(da,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ph(i,s)}else if(e instanceof vh?i.ha.Xe(e):e instanceof nw?i.ha.ot(e):i.ha.nt(e),!t.isEqual(xe.min()))try{const s=await mw(i.localStore);t.compareTo(s)>=0&&await function(c,d){const m=c.ha.It(d);return m.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const _=c._a.get(y);_&&c._a.set(y,_.withResumeToken(g.resumeToken,d))}}),m.targetMismatches.forEach((g,y)=>{const _=c._a.get(g);if(!_)return;c._a.set(g,_.withResumeToken(Wt.EMPTY_BYTE_STRING,_.snapshotVersion)),vw(c,g);const A=new os(_.target,g,y,_.sequenceNumber);Hp(c,A)}),c.remoteSyncer.applyRemoteEvent(m)}(i,t)}catch(s){he(da,"Failed to raise snapshot:",s),await Ph(i,s)}}async function Ph(i,e,t){if(!ko(e))throw e;i.aa.add(1),await xc(i),i.la.set("Offline"),t||(t=()=>mw(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{he(da,"Retrying IndexedDB access"),await t(),i.aa.delete(1),await rd(i)})}function Ew(i,e){return e().catch(t=>Ph(i,t,e))}async function sd(i){const e=Re(i),t=ys(e);let s=e.oa.length>0?e.oa[e.oa.length-1].batchId:Cp;for(;oI(e);)try{const o=await qN(e.localStore,s);if(o===null){e.oa.length===0&&t.v_();break}s=o.batchId,lI(e,o)}catch(o){await Ph(e,o)}Tw(e)&&ww(e)}function oI(i){return _a(i)&&i.oa.length<10}function lI(i,e){i.oa.push(e);const t=ys(i);t.b_()&&t.W_&&t.G_(e.mutations)}function Tw(i){return _a(i)&&!ys(i).w_()&&i.oa.length>0}function ww(i){ys(i).start()}async function cI(i){ys(i).H_()}async function uI(i){const e=ys(i);for(const t of i.oa)e.G_(t.mutations)}async function hI(i,e,t){const s=i.oa.shift(),o=Pp.from(s,e,t);await Ew(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await sd(i)}async function dI(i,e){e&&ys(i).W_&&await async function(s,o){if(function(d){return QC(d)&&d!==ee.ABORTED}(o.code)){const c=s.oa.shift();ys(s).D_(),await Ew(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o)),await sd(s)}}(i,e),Tw(i)&&ww(i)}async function $0(i,e){const t=Re(i);t.asyncQueue.verifyOperationInProgress(),he(da,"RemoteStore received new credentials");const s=_a(t);t.aa.add(3),await xc(t),s&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await rd(t)}async function fI(i,e){const t=Re(i);e?(t.aa.delete(2),await rd(t)):e||(t.aa.add(2),await xc(t),t.la.set("Unknown"))}function Po(i){return i.Pa||(i.Pa=function(t,s,o){const c=Re(t);return c.Y_(),new WN(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(i.datastore,i.asyncQueue,{jo:iI.bind(null,i),Jo:rI.bind(null,i),Zo:sI.bind(null,i),Q_:aI.bind(null,i)}),i.ua.push(async e=>{e?(i.Pa.D_(),Gp(i)?Fp(i):i.la.set("Unknown")):(await i.Pa.stop(),_w(i))})),i.Pa}function ys(i){return i.Ta||(i.Ta=function(t,s,o){const c=Re(t);return c.Y_(),new ZN(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(i.datastore,i.asyncQueue,{jo:()=>Promise.resolve(),Jo:cI.bind(null,i),Zo:dI.bind(null,i),z_:uI.bind(null,i),j_:hI.bind(null,i)}),i.ua.push(async e=>{e?(i.Ta.D_(),await sd(i)):(await i.Ta.stop(),i.oa.length>0&&(he(da,`Stopping write stream with ${i.oa.length} pending writes`),i.oa=[]))})),i.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t,s,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,c){const d=Date.now()+s,m=new Yp(e,t,d,o,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(i,e){if(Tr("AsyncQueue",`${e}: ${i}`),ko(i))return new ue(ee.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{static emptySet(e){return new po(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ve.comparator(t.key,s.key):(t,s)=>ve.comparator(t.key,s.key),this.keyedMap=Zl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new po;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.Ia=new ut(ve.comparator)}track(e){const t=e.doc.key,s=this.Ia.get(t);s?e.type!==0&&s.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&s.type!==1?this.Ia=this.Ia.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Ia=this.Ia.remove(t):e.type===1&&s.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):be(63341,{Vt:e,Ea:s}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,s)=>{e.push(s)}),e}}class Ao{constructor(e,t,s,o,c,d,m,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,c){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new Ao(e,t,po.emptySet(t),d,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class pI{constructor(){this.queries=W0(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,s){const o=Re(t),c=o.queries;o.queries=W0(),c.forEach((d,m)=>{for(const g of m.Ra)g.onError(s)})})(this,new ue(ee.ABORTED,"Firestore shutting down"))}}function W0(){return new va(i=>qT(i),Zh)}async function bw(i,e){const t=Re(i);let s=3;const o=e.query;let c=t.queries.get(o);c?!c.Va()&&e.ma()&&(s=2):(c=new mI,s=e.ma()?0:1);try{switch(s){case 0:c.Aa=await t.onListen(o,!0);break;case 1:c.Aa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=Kp(d,`Initialization of query '${ho(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Ra.push(e),e.ga(t.onlineState),c.Aa&&e.pa(c.Aa)&&Qp(t)}async function Aw(i,e){const t=Re(i),s=e.query;let o=3;const c=t.queries.get(s);if(c){const d=c.Ra.indexOf(e);d>=0&&(c.Ra.splice(d,1),c.Ra.length===0?o=e.ma()?0:1:!c.Va()&&e.ma()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function gI(i,e){const t=Re(i);let s=!1;for(const o of e){const c=o.query,d=t.queries.get(c);if(d){for(const m of d.Ra)m.pa(o)&&(s=!0);d.Aa=o}}s&&Qp(t)}function yI(i,e,t){const s=Re(i),o=s.queries.get(e);if(o)for(const c of o.Ra)c.onError(t);s.queries.delete(e)}function Qp(i){i.fa.forEach(e=>{e.next()})}var ap,Z0;(Z0=ap||(ap={})).ya="default",Z0.Cache="cache";class Sw{constructor(e,t,s){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=s||{}}pa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ao(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const s=t!=="Offline";return(!this.options.Fa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e){this.key=e}}class Rw{constructor(e){this.key=e}}class vI{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Me(),this.mutatedKeys=Me(),this.Ua=HT(e),this.Ka=new po(this.Ua)}get Wa(){return this.qa}Ga(e,t){const s=t?t.za:new X0,o=t?t.Ka:this.Ka;let c=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,A)=>{const b=o.get(_),k=Jh(this.query,A)?A:null,C=!!b&&this.mutatedKeys.has(b.key),P=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let I=!1;b&&k?b.data.isEqual(k.data)?C!==P&&(s.track({type:3,doc:k}),I=!0):this.ja(b,k)||(s.track({type:2,doc:k}),I=!0,(g&&this.Ua(k,g)>0||y&&this.Ua(k,y)<0)&&(m=!0)):!b&&k?(s.track({type:0,doc:k}),I=!0):b&&!k&&(s.track({type:1,doc:b}),I=!0,(g||y)&&(m=!0)),I&&(k?(d=d.add(k),c=P?c.add(_):c.delete(_)):(d=d.delete(_),c=c.delete(_)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),c=c.delete(_.key),s.track({type:1,doc:_})}return{Ka:d,za:s,ys:m,mutatedKeys:c}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const c=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const d=e.za.da();d.sort((_,A)=>function(k,C){const P=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Vt:I})}};return P(k)-P(C)}(_.type,A.type)||this.Ua(_.doc,A.doc)),this.Ha(s),o=o!=null&&o;const m=t&&!o?this.Ja():[],g=this.$a.size===0&&this.current&&!o?1:0,y=g!==this.Qa;return this.Qa=g,d.length!==0||y?{snapshot:new Ao(this.query,e.Ka,c,d,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ya:m}:{Ya:m}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new X0,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Me(),this.Ka.forEach(s=>{this.Za(s.key)&&(this.$a=this.$a.add(s.key))});const t=[];return e.forEach(s=>{this.$a.has(s)||t.push(new Rw(s))}),this.$a.forEach(s=>{e.has(s)||t.push(new xw(s))}),t}Xa(e){this.qa=e.Ns,this.$a=Me();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Ao.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const $p="SyncEngine";class _I{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class EI{constructor(e){this.key=e,this.tu=!1}}class TI{constructor(e,t,s,o,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.nu={},this.ru=new va(m=>qT(m),Zh),this.iu=new Map,this.su=new Set,this.ou=new ut(ve.comparator),this._u=new Map,this.au=new Up,this.uu={},this.cu=new Map,this.lu=bo.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function wI(i,e,t=!0){const s=kw(i);let o;const c=s.ru.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.eu()):o=await Cw(s,e,t,!0),o}async function bI(i,e){const t=kw(i);await Cw(t,e,!0,!1)}async function Cw(i,e,t,s){const o=await HN(i.localStore,Ni(e)),c=o.targetId,d=i.sharedClientState.addLocalQueryTarget(c,t);let m;return s&&(m=await AI(i,e,c,d==="current",o.resumeToken)),i.isPrimaryClient&&t&&yw(i.remoteStore,o),m}async function AI(i,e,t,s,o){i.Pu=(A,b,k)=>async function(P,I,G,J){let X=I.view.Ga(G);X.ys&&(X=await F0(P.localStore,I.query,!1).then(({documents:R})=>I.view.Ga(R,X)));const oe=J&&J.targetChanges.get(I.targetId),ce=J&&J.targetMismatches.get(I.targetId)!=null,ye=I.view.applyChanges(X,P.isPrimaryClient,oe,ce);return eE(P,I.targetId,ye.Ya),ye.snapshot}(i,A,b,k);const c=await F0(i.localStore,e,!0),d=new vI(e,c.Ns),m=d.Ga(c.documents),g=Sc.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",o),y=d.applyChanges(m,i.isPrimaryClient,g);eE(i,t,y.Ya);const _=new _I(e,t,d);return i.ru.set(e,_),i.iu.has(t)?i.iu.get(t).push(e):i.iu.set(t,[e]),y.snapshot}async function SI(i,e,t){const s=Re(i),o=s.ru.get(e),c=s.iu.get(o.targetId);if(c.length>1)return s.iu.set(o.targetId,c.filter(d=>!Zh(d,e))),void s.ru.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await rp(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&qp(s.remoteStore,o.targetId),op(s,o.targetId)}).catch(Do)):(op(s,o.targetId),await rp(s.localStore,o.targetId,!0))}async function xI(i,e){const t=Re(i),s=t.ru.get(e),o=t.iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),qp(t.remoteStore,s.targetId))}async function RI(i,e,t){const s=OI(i);try{const o=await function(d,m){const g=Re(d),y=Ot.now(),_=m.reduce((k,C)=>k.add(C.key),Me());let A,b;return g.persistence.runTransaction("Locally write mutations","readwrite",k=>{let C=wr(),P=Me();return g.Cs.getEntries(k,_).next(I=>{C=I,C.forEach((G,J)=>{J.isValidDocument()||(P=P.add(G))})}).next(()=>g.localDocuments.getOverlayedDocuments(k,C)).next(I=>{A=I;const G=[];for(const J of m){const X=HC(J,A.get(J.key).overlayedDocument);X!=null&&G.push(new ws(J.key,X,OT(X.value.mapValue),ii.exists(!0)))}return g.mutationQueue.addMutationBatch(k,y,G,m)}).next(I=>{b=I;const G=I.applyToLocalDocumentSet(A,P);return g.documentOverlayCache.saveOverlays(k,I.batchId,G)})}).then(()=>({batchId:b.batchId,changes:GT(A)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,m,g){let y=d.uu[d.currentUser.toKey()];y||(y=new ut(je)),y=y.insert(m,g),d.uu[d.currentUser.toKey()]=y}(s,o.batchId,t),await Rc(s,o.changes),await sd(s.remoteStore)}catch(o){const c=Kp(o,"Failed to persist write");t.reject(c)}}async function Nw(i,e){const t=Re(i);try{const s=await BN(t.localStore,e);e.targetChanges.forEach((o,c)=>{const d=t._u.get(c);d&&(Ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.tu=!0:o.modifiedDocuments.size>0?Ge(d.tu,14607):o.removedDocuments.size>0&&(Ge(d.tu,42227),d.tu=!1))}),await Rc(t,s,e)}catch(s){await Do(s)}}function J0(i,e,t){const s=Re(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.ru.forEach((c,d)=>{const m=d.view.ga(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const g=Re(d);g.onlineState=m;let y=!1;g.queries.forEach((_,A)=>{for(const b of A.Ra)b.ga(m)&&(y=!0)}),y&&Qp(g)}(s.eventManager,e),o.length&&s.nu.Q_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function CI(i,e,t){const s=Re(i);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s._u.get(e),c=o&&o.key;if(c){let d=new ut(ve.comparator);d=d.insert(c,rn.newNoDocument(c,xe.min()));const m=Me().add(c),g=new nd(xe.min(),new Map,new ut(je),d,m);await Nw(s,g),s.ou=s.ou.remove(c),s._u.delete(e),Xp(s)}else await rp(s.localStore,e,!1).then(()=>op(s,e,t)).catch(Do)}async function NI(i,e){const t=Re(i),s=e.batch.batchId;try{const o=await LN(t.localStore,e);jw(t,s,null),Iw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Rc(t,o)}catch(o){await Do(o)}}async function II(i,e,t){const s=Re(i);try{const o=await function(d,m){const g=Re(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let _;return g.mutationQueue.lookupMutationBatch(y,m).next(A=>(Ge(A!==null,37113),_=A.keys(),g.mutationQueue.removeMutationBatch(y,A))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,_,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_)).next(()=>g.localDocuments.getDocuments(y,_))})}(s.localStore,e);jw(s,e,t),Iw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Rc(s,o)}catch(o){await Do(o)}}function Iw(i,e){(i.cu.get(e)||[]).forEach(t=>{t.resolve()}),i.cu.delete(e)}function jw(i,e,t){const s=Re(i);let o=s.uu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),s.uu[s.currentUser.toKey()]=o}}function op(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.iu.get(e))i.ru.delete(s),t&&i.nu.Tu(s,t);i.iu.delete(e),i.isPrimaryClient&&i.au.Ur(e).forEach(s=>{i.au.containsKey(s)||Dw(i,s)})}function Dw(i,e){i.su.delete(e.path.canonicalString());const t=i.ou.get(e);t!==null&&(qp(i.remoteStore,t),i.ou=i.ou.remove(e),i._u.delete(t),Xp(i))}function eE(i,e,t){for(const s of t)s instanceof xw?(i.au.addReference(s.key,e),jI(i,s)):s instanceof Rw?(he($p,"Document no longer in limbo: "+s.key),i.au.removeReference(s.key,e),i.au.containsKey(s.key)||Dw(i,s.key)):be(19791,{Iu:s})}function jI(i,e){const t=e.key,s=t.path.canonicalString();i.ou.get(t)||i.su.has(s)||(he($p,"New document in limbo: "+t),i.su.add(s),Xp(i))}function Xp(i){for(;i.su.size>0&&i.ou.size<i.maxConcurrentLimboResolutions;){const e=i.su.values().next().value;i.su.delete(e);const t=new ve(rt.fromString(e)),s=i.lu.next();i._u.set(s,new EI(t)),i.ou=i.ou.insert(t,s),yw(i.remoteStore,new os(Ni(kp(t.path)),s,"TargetPurposeLimboResolution",$h.le))}}async function Rc(i,e,t){const s=Re(i),o=[],c=[],d=[];s.ru.isEmpty()||(s.ru.forEach((m,g)=>{d.push(s.Pu(g,e,t).then(y=>{var _;if((y||t)&&s.isPrimaryClient){const A=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))===null||_===void 0?void 0:_.current;s.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(y){o.push(y);const A=Bp.Ps(g.targetId,y);c.push(A)}}))}),await Promise.all(d),s.nu.Q_(o),await async function(g,y){const _=Re(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ne.forEach(y,b=>ne.forEach(b.ls,k=>_.persistence.referenceDelegate.addReference(A,b.targetId,k)).next(()=>ne.forEach(b.hs,k=>_.persistence.referenceDelegate.removeReference(A,b.targetId,k)))))}catch(A){if(!ko(A))throw A;he(zp,"Failed to update sequence numbers: "+A)}for(const A of y){const b=A.targetId;if(!A.fromCache){const k=_.Ss.get(b),C=k.snapshotVersion,P=k.withLastLimboFreeSnapshotVersion(C);_.Ss=_.Ss.insert(b,P)}}}(s.localStore,c))}async function DI(i,e){const t=Re(i);if(!t.currentUser.isEqual(e)){he($p,"User change. New user:",e.toKey());const s=await fw(t.localStore,e);t.currentUser=e,function(c,d){c.cu.forEach(m=>{m.forEach(g=>{g.reject(new ue(ee.CANCELLED,d))})}),c.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Rc(t,s.Ms)}}function kI(i,e){const t=Re(i),s=t._u.get(e);if(s&&s.tu)return Me().add(s.key);{let o=Me();const c=t.iu.get(e);if(!c)return o;for(const d of c){const m=t.ru.get(d);o=o.unionWith(m.view.Wa)}return o}}function kw(i){const e=Re(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CI.bind(null,e),e.nu.Q_=gI.bind(null,e.eventManager),e.nu.Tu=yI.bind(null,e.eventManager),e}function OI(i){const e=Re(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=II.bind(null,e),e}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=id(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return UN(this.persistence,new PN,e.initialUser,this.serializer)}Ru(e){return new dw(Lp.Ei,this.serializer)}Au(e){return new GN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class PI extends Mh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Ge(this.persistence.referenceDelegate instanceof Oh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new EN(s,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new dw(s=>Oh.Ei(s,t),this.serializer)}}class lp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>J0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=DI.bind(null,this.syncEngine),await fI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new pI}()}createDatastore(e){const t=id(e.databaseInfo.databaseId),s=function(c){return new XN(c)}(e.databaseInfo);return function(c,d,m,g){return new eI(c,d,m,g)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,c,d,m){return new nI(s,o,c,d,m)}(this.localStore,this.datastore,e.asyncQueue,t=>J0(this.syncEngine,t,0),function(){return K0.C()?new K0:new YN}())}createSyncEngine(e,t){return function(o,c,d,m,g,y,_){const A=new TI(o,c,d,m,g,y);return _&&(A.hu=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const c=Re(o);he(da,"RemoteStore shutting down."),c.aa.add(5),await xc(c),c.ca.shutdown(),c.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}lp.provider={build:()=>new lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="FirestoreClient";class MI{constructor(e,t,s,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=AT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async d=>{he(vs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(he(vs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Kp(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Om(i,e){i.asyncQueue.verifyOperationInProgress(),he(vs,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await fw(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function tE(i,e){i.asyncQueue.verifyOperationInProgress();const t=await VI(i);he(vs,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(s=>$0(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>$0(e.remoteStore,o)),i._onlineComponents=e}async function VI(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){he(vs,"Using user provided OfflineComponentProvider");try{await Om(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;_o("Error using user provided cache. Falling back to memory cache: "+t),await Om(i,new Mh)}}else he(vs,"Using default OfflineComponentProvider"),await Om(i,new PI(void 0));return i._offlineComponents}async function Pw(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(he(vs,"Using user provided OnlineComponentProvider"),await tE(i,i._uninitializedComponentsProvider._online)):(he(vs,"Using default OnlineComponentProvider"),await tE(i,new lp))),i._onlineComponents}function UI(i){return Pw(i).then(e=>e.syncEngine)}async function Mw(i){const e=await Pw(i),t=e.eventManager;return t.onListen=wI.bind(null,e.syncEngine),t.onUnlisten=SI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=xI.bind(null,e.syncEngine),t}function LI(i,e,t={}){const s=new yr;return i.asyncQueue.enqueueAndForget(async()=>function(c,d,m,g,y){const _=new Ow({next:b=>{_.yu(),d.enqueueAndForget(()=>Aw(c,A));const k=b.docs.has(m);!k&&b.fromCache?y.reject(new ue(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&b.fromCache&&g&&g.source==="server"?y.reject(new ue(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(b)},error:b=>y.reject(b)}),A=new Sw(kp(m.path),_,{includeMetadataChanges:!0,Fa:!0});return bw(c,A)}(await Mw(i),i.asyncQueue,e,t,s)),s.promise}function BI(i,e,t={}){const s=new yr;return i.asyncQueue.enqueueAndForget(async()=>function(c,d,m,g,y){const _=new Ow({next:b=>{_.yu(),d.enqueueAndForget(()=>Aw(c,A)),b.fromCache&&g.source==="server"?y.reject(new ue(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(b)},error:b=>y.reject(b)}),A=new Sw(m,_,{includeMetadataChanges:!0,Fa:!0});return bw(c,A)}(await Mw(i),i.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(i,e,t){if(!t)throw new ue(ee.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function zI(i,e,t,s){if(e===!0&&s===!0)throw new ue(ee.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function iE(i){if(!ve.isDocumentKey(i))throw new ue(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function rE(i){if(ve.isDocumentKey(i))throw new ue(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ad(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":be(12329,{type:typeof i})}function ki(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ue(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ad(i);throw new ue(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function qI(i,e){if(e<=0)throw new ue(ee.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="firestore.googleapis.com",sE=!0;class aE{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Lw,this.ssl=sE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:sE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vN)throw new ue(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new QR;switch(s.type){case"firstParty":return new ZR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ue(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Io("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=nE.get(t);s&&(he("ComponentProvider","Removing Datastore"),nE.delete(t),s.terminate())}(this),Promise.resolve()}}function HI(i,e,t,s={}){var o;i=ki(i,od);const c=ga(e),d=i._getSettings(),m=Object.assign(Object.assign({},d),{emulatorOptions:i._getEmulatorOptions()}),g=`${e}:${t}`;d.host!==Lw&&d.host!==g&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},d),{host:g,ssl:c,emulatorOptions:s});if(!ca(y,m)&&(i._setSettings(y),c&&(bp(`https://${g}`),Io("Firestore",!0)),s.mockUserToken)){let _,A;if(typeof s.mockUserToken=="string")_=s.mockUserToken,A=nn.MOCK_USER;else{_=cT(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new ue(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new nn(b)}i._authCredentials=new $R(new wT(_,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new bs(this.firestore,e,this._query)}}class dn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dn(this.firestore,e,this._key)}}class hs extends bs{constructor(e,t,s){super(e,t,kp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new ve(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function Dn(i,e,...t){if(i=mt(i),Uw("collection","path",e),i instanceof od){const s=rt.fromString(e,...t);return rE(s),new hs(i,null,s)}{if(!(i instanceof dn||i instanceof hs))throw new ue(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(rt.fromString(e,...t));return rE(s),new hs(i.firestore,null,s)}}function Yn(i,e,...t){if(i=mt(i),arguments.length===1&&(e=AT.newId()),Uw("doc","path",e),i instanceof od){const s=rt.fromString(e,...t);return iE(s),new dn(i,null,new ve(s))}{if(!(i instanceof dn||i instanceof hs))throw new ue(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(rt.fromString(e,...t));return iE(s),new dn(i.firestore,i instanceof hs?i.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="AsyncQueue";class lE{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new pw(this,"async_queue_retry"),this.ju=()=>{const s=km();s&&he(oE,"Visibility state changed to "+s.visibilityState),this.y_.A_()},this.Hu=e;const t=km();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=km();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new yr;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!ko(e))throw e;he(oE,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(s=>{throw this.Ku=s,this.Wu=!1,Tr("INTERNAL UNHANDLED ERROR: ",cE(s)),s}).then(s=>(this.Wu=!1,s))));return this.Hu=t,t}enqueueAfterDelay(e,t,s){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const o=Yp.createAndSchedule(this,e,t,s,c=>this.Xu(c));return this.Uu.push(o),o}Ju(){this.Ku&&be(47125,{ec:cE(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function cE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Mo extends od{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new lE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lE(e),this._firestoreClient=void 0,await e}}}function FI(i,e){const t=typeof i=="object"?i:xp(),s=typeof i=="string"?i:Ch,o=Qh(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=aT("firestore");c&&HI(o,...c)}return o}function Wp(i){if(i._terminated)throw new ue(ee.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||GI(i),i._firestoreClient}function GI(i){var e,t,s;const o=i._freezeSettings(),c=function(m,g,y,_){return new fC(m,g,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Vw(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new MI(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this._byteString=e}static fromBase64String(e){try{return new So(Wt.fromBase64String(e))}catch(t){throw new ue(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new So(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=/^__.*__$/;class KI{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ws(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ac(e,this.data,t,this.fieldTransforms)}}class Bw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ws(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{oc:i})}}class eg{constructor(e,t,s,o,c,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this._c(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new eg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ac({path:s,cc:!1});return o.lc(e),o}hc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ac({path:s,cc:!1});return o._c(),o}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Vh(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(zw(this.oc)&&YI.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class QI{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||id(e)}dc(e,t,s,o=!1){return new eg({oc:e,methodName:t,Ec:s,path:Xt.emptyPath(),cc:!1,Ic:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ud(i){const e=i._freezeSettings(),t=id(i._databaseId);return new QI(i._databaseId,!!e.ignoreUndefinedProperties,t)}function qw(i,e,t,s,o,c={}){const d=i.dc(c.merge||c.mergeFields?2:0,e,t,o);ng("Data must be an object, but it was:",d,s);const m=Hw(s,d);let g,y;if(c.merge)g=new In(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const _=[];for(const A of c.mergeFields){const b=cp(e,A,t);if(!d.contains(b))throw new ue(ee.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Gw(_,b)||_.push(b)}g=new In(_),y=d.fieldTransforms.filter(A=>g.covers(A.field))}else g=null,y=d.fieldTransforms;return new KI(new vn(m),g,y)}class hd extends cd{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hd}}class tg extends cd{_toFieldTransform(e){return new LC(e.path,new pc)}isEqual(e){return e instanceof tg}}function $I(i,e,t,s){const o=i.dc(1,e,t);ng("Data must be an object, but it was:",o,s);const c=[],d=vn.empty();Ts(s,(g,y)=>{const _=ig(e,g,t);y=mt(y);const A=o.hc(_);if(y instanceof hd)c.push(_);else{const b=Cc(y,A);b!=null&&(c.push(_),d.set(_,b))}});const m=new In(c);return new Bw(d,m,o.fieldTransforms)}function XI(i,e,t,s,o,c){const d=i.dc(1,e,t),m=[cp(e,s,t)],g=[o];if(c.length%2!=0)throw new ue(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<c.length;b+=2)m.push(cp(e,c[b])),g.push(c[b+1]);const y=[],_=vn.empty();for(let b=m.length-1;b>=0;--b)if(!Gw(y,m[b])){const k=m[b];let C=g[b];C=mt(C);const P=d.hc(k);if(C instanceof hd)y.push(k);else{const I=Cc(C,P);I!=null&&(y.push(k),_.set(k,I))}}const A=new In(y);return new Bw(_,A,d.fieldTransforms)}function WI(i,e,t,s=!1){return Cc(t,i.dc(s?4:3,e))}function Cc(i,e){if(Fw(i=mt(i)))return ng("Unsupported field value:",e,i),Hw(i,e);if(i instanceof cd)return function(s,o){if(!zw(o.oc))throw o.Tc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Tc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(s,o){const c=[];let d=0;for(const m of s){let g=Cc(m,o.Pc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}}(i,e)}return function(s,o){if((s=mt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return MC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Ot.fromDate(s);return{timestampValue:kh(o.serializer,c)}}if(s instanceof Ot){const c=new Ot(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:kh(o.serializer,c)}}if(s instanceof Zp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof So)return{bytesValue:rw(o.serializer,s._byteString)};if(s instanceof dn){const c=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw o.Tc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Vp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Jp)return function(d,m){return{mapValue:{fields:{[DT]:{stringValue:kT},[Nh]:{arrayValue:{values:d.toArray().map(y=>{if(typeof y!="number")throw m.Tc("VectorValues must only contain numeric values.");return Op(m.serializer,y)})}}}}}}(s,o);throw o.Tc(`Unsupported field value: ${ad(s)}`)}(i,e)}function Hw(i,e){const t={};return xT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ts(i,(s,o)=>{const c=Cc(o,e.uc(s));c!=null&&(t[s]=c)}),{mapValue:{fields:t}}}function Fw(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ot||i instanceof Zp||i instanceof So||i instanceof dn||i instanceof cd||i instanceof Jp)}function ng(i,e,t){if(!Fw(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=ad(t);throw s==="an object"?e.Tc(i+" a custom object"):e.Tc(i+" "+s)}}function cp(i,e,t){if((e=mt(e))instanceof ld)return e._internalPath;if(typeof e=="string")return ig(i,e);throw Vh("Field path arguments must be of type string or ",i,!1,void 0,t)}const ZI=new RegExp("[~\\*/\\[\\]]");function ig(i,e,t){if(e.search(ZI)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new ld(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Vh(i,e,t,s,o){const c=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new ue(ee.INVALID_ARGUMENT,m+i+g)}function Gw(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,t,s,o,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class JI extends Yw{data(){return super.data()}}function dd(i,e){return typeof e=="string"?ig(i,e):e instanceof ld?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ue(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rg{}class sg extends rg{}function _s(i,e,...t){let s=[];e instanceof rg&&s.push(e),s=s.concat(t),function(c){const d=c.filter(g=>g instanceof ag).length,m=c.filter(g=>g instanceof fd).length;if(d>1||d>0&&m>0)throw new ue(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class fd extends sg{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new fd(e,t,s)}_apply(e){const t=this._parse(e);return Kw(e._query,t),new bs(e.firestore,e.converter,Jm(e._query,t))}_parse(e){const t=ud(e.firestore);return function(c,d,m,g,y,_,A){let b;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ue(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){hE(A,_);const C=[];for(const P of A)C.push(uE(g,c,P));b={arrayValue:{values:C}}}else b=uE(g,c,A)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||hE(A,_),b=WI(m,d,A,_==="in"||_==="not-in");return Ct.create(y,_,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Nc(i,e,t){const s=e,o=dd("where",i);return fd._create(o,s,t)}class ag extends rg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ag(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:ai.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,c){let d=o;const m=c.getFlattenedFilters();for(const g of m)Kw(d,g),d=Jm(d,g)}(e._query,t),new bs(e.firestore,e.converter,Jm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class og extends sg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new og(e,t)}_apply(e){const t=function(o,c,d){if(o.startAt!==null)throw new ue(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ue(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mc(c,d)}(e._query,this._field,this._direction);return new bs(e.firestore,e.converter,function(o,c){const d=o.explicitOrderBy.concat([c]);return new Oo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function xo(i,e="asc"){const t=e,s=dd("orderBy",i);return og._create(s,t)}class lg extends sg{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new lg(e,t,s)}_apply(e){return new bs(e.firestore,e.converter,jh(e._query,this._limit,this._limitType))}}function up(i){return qI("limit",i),lg._create("limit",i,"F")}function uE(i,e,t){if(typeof(t=mt(t))=="string"){if(t==="")throw new ue(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zT(e)&&t.indexOf("/")!==-1)throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(rt.fromString(t));if(!ve.isDocumentKey(s))throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return S0(i,new ve(s))}if(t instanceof dn)return S0(i,t._key);throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ad(t)}.`)}function hE(i,e){if(!Array.isArray(i)||i.length===0)throw new ue(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Kw(i,e){const t=function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ue(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class t2{convertValue(e,t="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ts(e,(o,c)=>{s[o]=this.convertValue(c,t)}),s}convertVectorValue(e){var t,s,o;const c=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[Nh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>Tt(d.doubleValue));return new Jp(c)}convertGeoPoint(e){return new Zp(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Wh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(hc(e));default:return null}}convertTimestamp(e){const t=ms(e);return new Ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=rt.fromString(e);Ge(uw(s),9688,{name:e});const o=new dc(s.get(1),s.get(3)),c=new ve(s.popFirst(5));return o.isEqual(t)||Tr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(i,e,t){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $w extends Yw{constructor(e,t,s,o,c,d){super(e,t,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(dd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class _h extends $w{data(e={}){return super.data(e)}}class n2{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ec(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new _h(this._firestore,this._userDataWriter,s.key,s,new ec(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const g=new _h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ec(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const g=new _h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ec(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),_=d.indexOf(m.doc.key)),{type:i2(m.type),doc:g,oldIndex:y,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function i2(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(i){i=ki(i,dn);const e=ki(i.firestore,Mo);return LI(Wp(e),i._key).then(t=>s2(e,i,t))}class Xw extends t2{constructor(e){super(),this.firestore=e}convertBytes(e){return new So(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,t)}}function Kn(i){i=ki(i,bs);const e=ki(i.firestore,Mo),t=Wp(e),s=new Xw(e);return e2(i._query),BI(t,i._query).then(o=>new n2(e,s,i,o))}function r2(i,e,t){i=ki(i,dn);const s=ki(i.firestore,Mo),o=Qw(i.converter,e);return ug(s,[qw(ud(s),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,ii.none())])}function cg(i,e,t,...s){i=ki(i,dn);const o=ki(i.firestore,Mo),c=ud(o);let d;return d=typeof(e=mt(e))=="string"||e instanceof ld?XI(c,"updateDoc",i._key,e,t,s):$I(c,"updateDoc",i._key,e),ug(o,[d.toMutation(i._key,ii.exists(!0))])}function Ww(i,e){const t=ki(i.firestore,Mo),s=Yn(i),o=Qw(i.converter,e);return ug(t,[qw(ud(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,ii.exists(!1))]).then(()=>s)}function ug(i,e){return function(s,o){const c=new yr;return s.asyncQueue.enqueueAndForget(async()=>RI(await UI(s),o,c)),c.promise}(Wp(i),e)}function s2(i,e,t){const s=t.docs.get(e._key),o=new Xw(i);return new $w(i,o,e._key,s,new ec(t.hasPendingWrites,t.fromCache),e.converter)}function md(){return new tg("serverTimestamp")}(function(e,t=!0){(function(o){jo=o})(ya),ua(new ds("firestore",(s,{instanceIdentifier:o,options:c})=>{const d=s.getProvider("app").getImmediate(),m=new Mo(new XR(s.getProvider("auth-internal")),new JR(d,s.getProvider("app-check-internal")),function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ue(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dc(y.options.projectId,_)}(d,o),d);return c=Object.assign({useFetchStreams:t},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Ci(f0,m0,e),Ci(f0,m0,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="firebasestorage.googleapis.com",Jw="storageBucket",a2=2*60*1e3,o2=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt extends Mi{constructor(e,t,s=0){super(Pm(e),`Firebase Storage: ${t} (${Pm(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Pm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pt;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pt||(pt={}));function Pm(i){return"storage/"+i}function hg(){const i="An unknown error occurred, please check the error payload for server response.";return new gt(pt.UNKNOWN,i)}function l2(i){return new gt(pt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function c2(i){return new gt(pt.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function u2(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new gt(pt.UNAUTHENTICATED,i)}function h2(){return new gt(pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function d2(i){return new gt(pt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function f2(){return new gt(pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function m2(){return new gt(pt.CANCELED,"User canceled the upload/download.")}function p2(i){return new gt(pt.INVALID_URL,"Invalid URL '"+i+"'.")}function g2(i){return new gt(pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function y2(){return new gt(pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Jw+"' property when initializing the app?")}function v2(){return new gt(pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _2(){return new gt(pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function E2(i){return new gt(pt.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function hp(i){return new gt(pt.INVALID_ARGUMENT,i)}function eb(){return new gt(pt.APP_DELETED,"The Firebase app was deleted.")}function T2(i){return new gt(pt.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ac(i,e){return new gt(pt.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function Ql(i){throw new gt(pt.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=jn.makeFromUrl(e,t)}catch{return new jn(e,"")}if(s.path==="")return s;throw g2(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function c(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function y(oe){oe.path_=decodeURIComponent(oe.path)}const _="v[A-Za-z0-9_]+",A=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",k=new RegExp(`^https?://${A}/${_}/b/${o}/o${b}`,"i"),C={bucket:1,path:3},P=t===Zw?"(?:storage.googleapis.com|storage.cloud.google.com)":t,I="([^?#]*)",G=new RegExp(`^https?://${P}/${o}/${I}`,"i"),X=[{regex:m,indices:g,postModify:c},{regex:k,indices:C,postModify:y},{regex:G,indices:{bucket:1,path:2},postModify:y}];for(let oe=0;oe<X.length;oe++){const ce=X[oe],ye=ce.regex.exec(e);if(ye){const R=ye[ce.indices.bucket];let x=ye[ce.indices.path];x||(x=""),s=new jn(R,x),ce.postModify(s);break}}if(s==null)throw p2(e);return s}}class w2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(i,e,t){let s=1,o=null,c=null,d=!1,m=0;function g(){return m===2}let y=!1;function _(...I){y||(y=!0,e.apply(null,I))}function A(I){o=setTimeout(()=>{o=null,i(k,g())},I)}function b(){c&&clearTimeout(c)}function k(I,...G){if(y){b();return}if(I){b(),_.call(null,I,...G);return}if(g()||d){b(),_.call(null,I,...G);return}s<64&&(s*=2);let X;m===1?(m=2,X=0):X=(s+Math.random())*1e3,A(X)}let C=!1;function P(I){C||(C=!0,b(),!y&&(o!==null?(I||(m=2),clearTimeout(o),A(0)):I||(m=1)))}return A(0),c=setTimeout(()=>{d=!0,P(!0)},t),P}function A2(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(i){return i!==void 0}function x2(i){return typeof i=="object"&&!Array.isArray(i)}function dg(i){return typeof i=="string"||i instanceof String}function dE(i){return fg()&&i instanceof Blob}function fg(){return typeof Blob<"u"}function fE(i,e,t,s){if(s<e)throw hp(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>t)throw hp(`Invalid value for '${i}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(i,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${i}`}function tb(i){const e=encodeURIComponent;let t="?";for(const s in i)if(i.hasOwnProperty(s)){const o=e(s)+"="+e(i[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var la;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(la||(la={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(i,e){const t=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return t||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,t,s,o,c,d,m,g,y,_,A,b=!0,k=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=_,this.connectionFactory_=A,this.retry=b,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,P)=>{this.resolve_=C,this.reject_=P,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new ch(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const g=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===la.NO_ERROR,g=c.getStatus();if(!m||R2(g,this.additionalRetryCodes_)&&this.retry){const _=c.getErrorCode()===la.ABORT;s(!1,new ch(!1,null,_));return}const y=this.successCodes_.indexOf(g)!==-1;s(!0,new ch(y,c))})},t=(s,o)=>{const c=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());S2(g)?c(g):c()}catch(g){d(g)}else if(m!==null){const g=hg();g.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,g)):d(g)}else if(o.canceled){const g=this.appDelete_?eb():m2();d(g)}else{const g=f2();d(g)}};this.canceled_?t(!1,new ch(!1,null,!0)):this.backoffId_=b2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&A2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ch{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function N2(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function I2(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function j2(i,e){e&&(i["X-Firebase-GMPID"]=e)}function D2(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function k2(i,e,t,s,o,c,d=!0,m=!1){const g=tb(i.urlParams),y=i.url+g,_=Object.assign({},i.headers);return j2(_,e),N2(_,t),I2(_,c),D2(_,s),new C2(y,i.method,_,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,d,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function P2(...i){const e=O2();if(e!==void 0){const t=new e;for(let s=0;s<i.length;s++)t.append(i[s]);return t.getBlob()}else{if(fg())return new Blob(i);throw new gt(pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function M2(i,e,t){return i.webkitSlice?i.webkitSlice(e,t):i.mozSlice?i.mozSlice(e,t):i.slice?i.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(i){if(typeof atob>"u")throw E2("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Mm{constructor(e,t){this.data=e,this.contentType=t||null}}function U2(i,e){switch(i){case Ri.RAW:return new Mm(nb(e));case Ri.BASE64:case Ri.BASE64URL:return new Mm(ib(i,e));case Ri.DATA_URL:return new Mm(B2(e),z2(e))}throw hg()}function nb(i){const e=[];for(let t=0;t<i.length;t++){let s=i.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<i.length-1&&(i.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const c=s,d=i.charCodeAt(++t);s=65536|(c&1023)<<10|d&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function L2(i){let e;try{e=decodeURIComponent(i)}catch{throw ac(Ri.DATA_URL,"Malformed data URL.")}return nb(e)}function ib(i,e){switch(i){case Ri.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw ac(i,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ri.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw ac(i,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=V2(e)}catch(o){throw o.message.includes("polyfill")?o:ac(i,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class rb{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ac(Ri.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=q2(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function B2(i){const e=new rb(i);return e.base64?ib(Ri.BASE64,e.rest):L2(e.rest)}function z2(i){return new rb(i).contentType}function q2(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,t){let s=0,o="";dE(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(dE(this.data_)){const s=this.data_,o=M2(s,e,t);return o===null?null:new rs(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new rs(s,!0)}}static getBlob(...e){if(fg()){const t=e.map(s=>s instanceof rs?s.data_:s);return new rs(P2.apply(null,t))}else{const t=e.map(d=>dg(d)?U2(Ri.RAW,d).data:d.data_);let s=0;t.forEach(d=>{s+=d.byteLength});const o=new Uint8Array(s);let c=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)o[c++]=d[m]}),new rs(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(i){let e;try{e=JSON.parse(i)}catch{return null}return x2(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function F2(i,e){const t=e.split("/").filter(s=>s.length>0).join("/");return i.length===0?t:i+"/"+t}function ab(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(i,e){return e}class hn{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||G2}}let uh=null;function Y2(i){return!dg(i)||i.length<2?i:ab(i)}function ob(){if(uh)return uh;const i=[];i.push(new hn("bucket")),i.push(new hn("generation")),i.push(new hn("metageneration")),i.push(new hn("name","fullPath",!0));function e(c,d){return Y2(d)}const t=new hn("name");t.xform=e,i.push(t);function s(c,d){return d!==void 0?Number(d):d}const o=new hn("size");return o.xform=s,i.push(o),i.push(new hn("timeCreated")),i.push(new hn("updated")),i.push(new hn("md5Hash",null,!0)),i.push(new hn("cacheControl",null,!0)),i.push(new hn("contentDisposition",null,!0)),i.push(new hn("contentEncoding",null,!0)),i.push(new hn("contentLanguage",null,!0)),i.push(new hn("contentType",null,!0)),i.push(new hn("metadata","customMetadata",!0)),uh=i,uh}function K2(i,e){function t(){const s=i.bucket,o=i.fullPath,c=new jn(s,o);return e._makeStorageReference(c)}Object.defineProperty(i,"ref",{get:t})}function Q2(i,e,t){const s={};s.type="file";const o=t.length;for(let c=0;c<o;c++){const d=t[c];s[d.local]=d.xform(s,e[d.server])}return K2(s,i),s}function lb(i,e,t){const s=sb(e);return s===null?null:Q2(i,s,t)}function $2(i,e,t,s){const o=sb(e);if(o===null||!dg(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const d=encodeURIComponent;return c.split(",").map(y=>{const _=i.bucket,A=i.fullPath,b="/b/"+d(_)+"/o/"+d(A),k=mg(b,t,s),C=tb({alt:"media",token:y});return k+C})[0]}function X2(i,e){const t={},s=e.length;for(let o=0;o<s;o++){const c=e[o];c.writable&&(t[c.server]=i[c.local])}return JSON.stringify(t)}class cb{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(i){if(!i)throw hg()}function W2(i,e){function t(s,o){const c=lb(i,o,e);return ub(c!==null),c}return t}function Z2(i,e){function t(s,o){const c=lb(i,o,e);return ub(c!==null),$2(c,o,i.host,i._protocol)}return t}function hb(i){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=h2():o=u2():t.getStatus()===402?o=c2(i.bucket):t.getStatus()===403?o=d2(i.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function J2(i){const e=hb(i);function t(s,o){let c=e(s,o);return s.getStatus()===404&&(c=l2(i.path)),c.serverResponse=o.serverResponse,c}return t}function ej(i,e,t){const s=e.fullServerUrl(),o=mg(s,i.host,i._protocol),c="GET",d=i.maxOperationRetryTime,m=new cb(o,c,Z2(i,t),d);return m.errorHandler=J2(e),m}function tj(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function nj(i,e,t){const s=Object.assign({},t);return s.fullPath=i.path,s.size=e.size(),s.contentType||(s.contentType=tj(null,e)),s}function ij(i,e,t,s,o){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function m(){let X="";for(let oe=0;oe<2;oe++)X=X+Math.random().toString().slice(2);return X}const g=m();d["Content-Type"]="multipart/related; boundary="+g;const y=nj(e,s,o),_=X2(y,t),A="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,b=`\r
--`+g+"--",k=rs.getBlob(A,s,b);if(k===null)throw v2();const C={name:y.fullPath},P=mg(c,i.host,i._protocol),I="POST",G=i.maxUploadRetryTime,J=new cb(P,I,W2(i,t),G);return J.urlParams=C,J.headers=d,J.body=k.uploadData(),J.errorHandler=hb(e),J}class rj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=la.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=la.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=la.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o,c){if(this.sent_)throw Ql("cannot .send() more than once");if(ga(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),c!==void 0)for(const d in c)c.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,c[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ql("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ql("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ql("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ql("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class sj extends rj{initXhr(){this.xhr_.responseType="text"}}function db(){return new sj}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,t){this._service=e,t instanceof jn?this._location=t:this._location=jn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new fa(e,t)}get root(){const e=new jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ab(this._location.path)}get storage(){return this._service}get parent(){const e=H2(this._location.path);if(e===null)return null;const t=new jn(this._location.bucket,e);return new fa(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw T2(e)}}function aj(i,e,t){i._throwIfRoot("uploadBytes");const s=ij(i.storage,i._location,ob(),new rs(e,!0),t);return i.storage.makeRequestWithTokens(s,db).then(o=>({metadata:o,ref:i}))}function oj(i){i._throwIfRoot("getDownloadURL");const e=ej(i.storage,i._location,ob());return i.storage.makeRequestWithTokens(e,db).then(t=>{if(t===null)throw _2();return t})}function lj(i,e){const t=F2(i._location.path,e),s=new jn(i._location.bucket,t);return new fa(i.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(i){return/^[A-Za-z]+:\/\//.test(i)}function uj(i,e){return new fa(i,e)}function fb(i,e){if(i instanceof pg){const t=i;if(t._bucket==null)throw y2();const s=new fa(t,t._bucket);return e!=null?fb(s,e):s}else return e!==void 0?lj(i,e):i}function hj(i,e){if(e&&cj(e)){if(i instanceof pg)return uj(i,e);throw hp("To use ref(service, url), the first argument must be a Storage instance.")}else return fb(i,e)}function mE(i,e){const t=e==null?void 0:e[Jw];return t==null?null:jn.makeFromBucketSpec(t,i)}function dj(i,e,t,s={}){i.host=`${e}:${t}`;const o=ga(e);o&&(bp(`https://${i.host}`),Io("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:c}=s;c&&(i._overrideAuthToken=typeof c=="string"?c:cT(c,i.app.options.projectId))}class pg{constructor(e,t,s,o,c,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=Zw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a2,this._maxUploadRetryTime=o2,this._requests=new Set,o!=null?this._bucket=jn.makeFromBucketSpec(o,this._host):this._bucket=mE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jn.makeFromBucketSpec(this._url,e):this._bucket=mE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fa(this,e)}_makeRequest(e,t,s,o,c=!0){if(this._deleted)return new w2(eb());{const d=k2(e,this._appId,s,o,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const pE="@firebase/storage",gE="0.13.10";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="storage";function pb(i,e,t){return i=mt(i),aj(i,e,t)}function gb(i){return i=mt(i),oj(i)}function yb(i,e){return i=mt(i),hj(i,e)}function fj(i=xp(),e){i=mt(i),Io("Storage",!1);const s=Qh(i,mb).getImmediate({identifier:e}),o=aT("storage");return o&&mj(s,...o),s}function mj(i,e,t,s={}){dj(i,e,t,s)}function pj(i,{instanceIdentifier:e}){const t=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new pg(t,s,o,e,ya)}function gj(){ua(new ds(mb,pj,"PUBLIC").setMultipleInstances(!0)),Ci(pE,gE,""),Ci(pE,gE,"esm2017")}gj();function gg(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function vb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yj=vb,_b=new wc("auth","Firebase",vb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new Ap("@firebase/auth");function vj(i,...e){Uh.logLevel<=Pe.WARN&&Uh.warn(`Auth (${ya}): ${i}`,...e)}function Eh(i,...e){Uh.logLevel<=Pe.ERROR&&Uh.error(`Auth (${ya}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(i,...e){throw vg(i,...e)}function ri(i,...e){return vg(i,...e)}function yg(i,e,t){const s=Object.assign(Object.assign({},yj()),{[e]:t});return new wc("auth","Firebase",s).create(e,{appName:i.name})}function vr(i){return yg(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _j(i,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Qn(i,"argument-error"),yg(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vg(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return _b.create(i,...e)}function we(i,e,...t){if(!i)throw vg(e,...t)}function mr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Eh(e),new Error(e)}function Ar(i,e){i||mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function Ej(){return yE()==="http:"||yE()==="https:"}function yE(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ej()||Sx()||"connection"in navigator)?navigator.onLine:!0}function wj(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ar(t>e,"Short delay should be less than long delay!"),this.isMobile=wx()||xx()}get(){return Tj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(i,e){Ar(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Sj=new Ic(3e4,6e4);function xr(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Vi(i,e,t,s,o={}){return Tb(i,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const m=bc(Object.assign({key:i.config.apiKey},d)).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y=Object.assign({method:e,headers:g},c);return Ax()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&ga(i.emulatorConfig.host)&&(y.credentials="include"),Eb.fetch()(await wb(i,i.config.apiHost,t,m),y)})}async function Tb(i,e,t){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},bj),e);try{const o=new Rj(i),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw hh(i,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw hh(i,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw hh(i,"email-already-in-use",d);if(g==="USER_DISABLED")throw hh(i,"user-disabled",d);const _=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw yg(i,_,y);Qn(i,_)}}catch(o){if(o instanceof Mi)throw o;Qn(i,"network-request-failed",{message:String(o)})}}async function jc(i,e,t,s,o={}){const c=await Vi(i,e,t,s,o);return"mfaPendingCredential"in c&&Qn(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function wb(i,e,t,s){const o=`${e}${t}?${s}`,c=i,d=c.config.emulator?_g(i.config,o):`${i.config.apiScheme}://${o}`;return Aj.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function xj(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Rj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ri(this.auth,"network-request-failed")),Sj.get())})}}function hh(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=ri(i,e,s);return o.customData._tokenResponse=t,o}function vE(i){return i!==void 0&&i.enterprise!==void 0}class Cj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xj(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Nj(i,e){return Vi(i,"GET","/v2/recaptchaConfig",xr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ij(i,e){return Vi(i,"POST","/v1/accounts:delete",e)}async function Lh(i,e){return Vi(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jj(i,e=!1){const t=mt(i),s=await t.getIdToken(e),o=Eg(s);we(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:s,authTime:oc(Vm(o.auth_time)),issuedAtTime:oc(Vm(o.iat)),expirationTime:oc(Vm(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Vm(i){return Number(i)*1e3}function Eg(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return Eh("JWT malformed, contained fewer than 3 sections"),null;try{const o=rT(t);return o?JSON.parse(o):(Eh("Failed to decode base64 JWT payload"),null)}catch(o){return Eh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function _E(i){const e=Eg(i);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Mi&&Dj(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function Dj({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bh(i){var e;const t=i.auth,s=await i.getIdToken(),o=await Ro(i,Lh(t,{idToken:s}));we(o==null?void 0:o.users.length,t,"internal-error");const c=o.users[0];i._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?bb(c.providerUserInfo):[],m=Pj(i.providerData,d),g=i.isAnonymous,y=!(i.email&&c.passwordHash)&&!(m!=null&&m.length),_=g?y:!1,A={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:m,metadata:new fp(c.createdAt,c.lastLoginAt),isAnonymous:_};Object.assign(i,A)}async function Oj(i){const e=mt(i);await Bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Pj(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function bb(i){return i.map(e=>{var{providerId:t}=e,s=gg(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mj(i,e){const t=await Tb(i,{},async()=>{const s=bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,d=await wb(i,o,"/v1/token",`key=${c}`),m=await i._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",Eb.fetch()(d,{method:"POST",headers:m,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Vj(i,e){return Vi(i,"POST","/v2/accounts:revokeToken",xr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_E(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=_E(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:c}=await Mj(e,t);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:c}=t,d=new go;return s&&(we(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(we(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(we(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new go,this.toJSON())}_performRefresh(){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(i,e){we(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ni{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,c=gg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new fp(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await Ro(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jj(this,e)}reload(){return Oj(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ni(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Bh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(vr(this.auth));const e=await this.getIdToken();return await Ro(this,Ij(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,c,d,m,g,y,_;const A=(s=t.displayName)!==null&&s!==void 0?s:void 0,b=(o=t.email)!==null&&o!==void 0?o:void 0,k=(c=t.phoneNumber)!==null&&c!==void 0?c:void 0,C=(d=t.photoURL)!==null&&d!==void 0?d:void 0,P=(m=t.tenantId)!==null&&m!==void 0?m:void 0,I=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,G=(y=t.createdAt)!==null&&y!==void 0?y:void 0,J=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:X,emailVerified:oe,isAnonymous:ce,providerData:ye,stsTokenManager:R}=t;we(X&&R,e,"internal-error");const x=go.fromJSON(this.name,R);we(typeof X=="string",e,"internal-error"),is(A,e.name),is(b,e.name),we(typeof oe=="boolean",e,"internal-error"),we(typeof ce=="boolean",e,"internal-error"),is(k,e.name),is(C,e.name),is(P,e.name),is(I,e.name),is(G,e.name),is(J,e.name);const N=new ni({uid:X,auth:e,email:b,emailVerified:oe,displayName:A,isAnonymous:ce,photoURL:C,phoneNumber:k,tenantId:P,stsTokenManager:x,createdAt:G,lastLoginAt:J});return ye&&Array.isArray(ye)&&(N.providerData=ye.map(O=>Object.assign({},O))),I&&(N._redirectEventId=I),N}static async _fromIdTokenResponse(e,t,s=!1){const o=new go;o.updateFromServerResponse(t);const c=new ni({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Bh(c),c}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];we(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?bb(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new go;m.updateFromIdToken(s);const g=new ni({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new fp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new Map;function pr(i){Ar(i instanceof Function,"Expected a class definition");let e=EE.get(i);return e?(Ar(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,EE.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ab.type="NONE";const TE=Ab;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(i,e,t){return`firebase:${i}:${e}:${t}`}class yo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=Th(this.userKey,o.apiKey,c),this.fullPersistenceKey=Th("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Lh(this.auth,{idToken:e}).catch(()=>{});return t?ni._fromGetAccountInfoResponse(this.auth,t,e):null}return ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new yo(pr(TE),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||pr(TE);const d=Th(s,e.config.apiKey,e.name);let m=null;for(const y of t)try{const _=await y._get(d);if(_){let A;if(typeof _=="string"){const b=await Lh(e,{idToken:_}).catch(()=>{});if(!b)break;A=await ni._fromGetAccountInfoResponse(e,b,_)}else A=ni._fromJSON(e,_);y!==c&&(m=A),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new yo(c,e,s):(c=g[0],m&&await c._set(d,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new yo(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Cb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ib(e))return"Blackberry";if(jb(e))return"Webos";if(xb(e))return"Safari";if((e.includes("chrome/")||Rb(e))&&!e.includes("edge/"))return"Chrome";if(Nb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Sb(i=sn()){return/firefox\//i.test(i)}function xb(i=sn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rb(i=sn()){return/crios\//i.test(i)}function Cb(i=sn()){return/iemobile/i.test(i)}function Nb(i=sn()){return/android/i.test(i)}function Ib(i=sn()){return/blackberry/i.test(i)}function jb(i=sn()){return/webos/i.test(i)}function Tg(i=sn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function Uj(i=sn()){var e;return Tg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Lj(){return Rx()&&document.documentMode===10}function Db(i=sn()){return Tg(i)||Nb(i)||jb(i)||Ib(i)||/windows phone/i.test(i)||Cb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(i,e=[]){let t;switch(i){case"Browser":t=wE(sn());break;case"Worker":t=`${wE(sn())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ya}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((d,m)=>{try{const g=e(c);d(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zj(i,e={}){return Vi(i,"GET","/v2/passwordPolicy",xr(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=6;class Hj{constructor(e){var t,s,o,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:qj,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,c,d,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bE(this),this.idTokenSubscription=new bE(this),this.beforeStateQueue=new Bj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_b,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pr(t)),this._initializationPromise=this.queue(async()=>{var s,o,c;if(!this._deleted&&(this.persistenceManager=await yo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Lh(this,{idToken:e}),s=await ni._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(yn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===m)&&(g!=null&&g.user)&&(o=g.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(vr(this));const t=e?mt(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zj(this),t=new Hj(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Vj(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pr(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await yo.create(this,[pr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&vj(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Rr(i){return mt(i)}class bE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Px(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gj(i){pd=i}function Ob(i){return pd.loadJS(i)}function Yj(){return pd.recaptchaEnterpriseScript}function Kj(){return pd.gapiScript}function Qj(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class $j{constructor(){this.enterprise=new Xj}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Xj{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Wj="recaptcha-enterprise",Pb="NO_RECAPTCHA";class Zj{constructor(e){this.type=Wj,this.auth=Rr(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{Nj(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new Cj(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(g=>{m(g)})})}function o(c,d,m){const g=window.grecaptcha;vE(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(Pb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $j().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(m=>{if(!t&&vE(window.grecaptcha))o(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Yj();g.length!==0&&(g+=m),Ob(g).then(()=>{o(m,c,d)}).catch(y=>{d(y)})}}).catch(m=>{d(m)})})}}async function AE(i,e,t,s=!1,o=!1){const c=new Zj(i);let d;if(o)d=Pb;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const m=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function zh(i,e,t,s,o){var c;if(!((c=i._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await AE(i,e,t,t==="getOobCode");return s(i,d)}else return s(i,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await AE(i,e,t,t==="getOobCode");return s(i,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(i,e){const t=Qh(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(ca(c,e??{}))return o;Qn(o,"already-initialized")}return t.initialize({options:e})}function eD(i,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(pr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function tD(i,e,t){const s=Rr(i);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=Mb(e),{host:d,port:m}=nD(e),g=m===null?"":`:${m}`,y={url:`${c}//${d}${g}/`},_=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(ca(y,s.config.emulator)&&ca(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,ga(d)?(Io("Auth",!0),bp(`${c}//${d}${g}`)):iD()}function Mb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function nD(i){const e=Mb(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:SE(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:SE(d)}}}function SE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function iD(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mr("not implemented")}_getIdTokenResponse(e){return mr("not implemented")}_linkToIdToken(e,t){return mr("not implemented")}_getReauthenticationResolver(e){return mr("not implemented")}}async function rD(i,e){return Vi(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(i,e){return jc(i,"POST","/v1/accounts:signInWithPassword",xr(i,e))}async function aD(i,e){return Vi(i,"POST","/v1/accounts:sendOobCode",xr(i,e))}async function oD(i,e){return aD(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lD(i,e){return jc(i,"POST","/v1/accounts:signInWithEmailLink",xr(i,e))}async function cD(i,e){return jc(i,"POST","/v1/accounts:signInWithEmailLink",xr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends wg{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new vc(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new vc(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zh(e,t,"signInWithPassword",sD);case"emailLink":return lD(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zh(e,s,"signUpPassword",rD);case"emailLink":return cD(e,{idToken:t,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(i,e){return jc(i,"POST","/v1/accounts:signInWithIdp",xr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="http://localhost";class ma extends wg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,c=gg(t,["providerId","signInMethod"]);if(!s||!o)return null;const d=new ma(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return vo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,vo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vo(e,t)}buildRequest(){const e={requestUri:uD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dD(i){const e=$l(Xl(i)).link,t=e?$l(Xl(e)).deep_link_id:null,s=$l(Xl(i)).deep_link_id;return(s?$l(Xl(s)).link:null)||s||t||e||i}class bg{constructor(e){var t,s,o,c,d,m;const g=$l(Xl(e)),y=(t=g.apiKey)!==null&&t!==void 0?t:null,_=(s=g.oobCode)!==null&&s!==void 0?s:null,A=hD((o=g.mode)!==null&&o!==void 0?o:null);we(y&&_&&A,"argument-error"),this.apiKey=y,this.operation=A,this.code=_,this.continueUrl=(c=g.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(d=g.lang)!==null&&d!==void 0?d:null,this.tenantId=(m=g.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=dD(e);try{return new bg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.providerId=Vo.PROVIDER_ID}static credential(e,t){return vc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=bg.parseLink(t);return we(s,"argument-error"),vc._fromEmailAndCode(e,s.code,s.tenantId)}}Vo.PROVIDER_ID="password";Vo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends Ag{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends Dc{constructor(){super("facebook.com")}static credential(e){return ma._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Dc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ma._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return fr.credential(t,s)}catch{return null}}}fr.GOOGLE_SIGN_IN_METHOD="google.com";fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Dc{constructor(){super("github.com")}static credential(e){return ma._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.GITHUB_SIGN_IN_METHOD="github.com";ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends Dc{constructor(){super("twitter.com")}static credential(e,t){return ma._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return as.credential(t,s)}catch{return null}}}as.TWITTER_SIGN_IN_METHOD="twitter.com";as.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(i,e){return jc(i,"POST","/v1/accounts:signUp",xr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const c=await ni._fromIdTokenResponse(e,s,o),d=xE(s);return new pa({user:c,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=xE(s);return new pa({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function xE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh extends Mi{constructor(e,t,s,o){var c;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,qh.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new qh(e,t,s,o)}}function Vb(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?qh._fromErrorAndOperation(i,c,e,s):c})}async function mD(i,e,t=!1){const s=await Ro(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return pa._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(i,e,t=!1){const{auth:s}=i;if(yn(s.app))return Promise.reject(vr(s));const o="reauthenticate";try{const c=await Ro(i,Vb(s,o,e,i),t);we(c.idToken,s,"internal-error");const d=Eg(c.idToken);we(d,s,"internal-error");const{sub:m}=d;return we(i.uid===m,s,"user-mismatch"),pa._forOperation(i,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Qn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ub(i,e,t=!1){if(yn(i.app))return Promise.reject(vr(i));const s="signIn",o=await Vb(i,s,e),c=await pa._fromIdTokenResponse(i,s,o);return t||await i._updateCurrentUser(c.user),c}async function gD(i,e){return Ub(Rr(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(i){const e=Rr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yD(i,e,t){const s=Rr(i);await zh(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",oD)}async function vD(i,e,t){if(yn(i.app))return Promise.reject(vr(i));const s=Rr(i),d=await zh(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fD).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Lb(i),g}),m=await pa._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function _D(i,e,t){return yn(i.app)?Promise.reject(vr(i)):gD(mt(i),Vo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Lb(i),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(i,e){return Vi(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=mt(i),c={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await Ro(s,ED(s.auth,c));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const m=s.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function wD(i,e,t,s){return mt(i).onIdTokenChanged(e,t,s)}function bD(i,e,t){return mt(i).beforeAuthStateChanged(e,t)}function AD(i,e,t,s){return mt(i).onAuthStateChanged(e,t,s)}const Hh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hh,"1"),this.storage.removeItem(Hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=1e3,xD=10;class zb extends Bb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Db(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);Lj()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,xD):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},SD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}zb.type="LOCAL";const RD=zb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb extends Bb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qb.type="SESSION";const Hb=qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new gd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:c}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async y=>y(t.origin,c)),g=await CD(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,g)=>{const y=Sg("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(A){const b=A;if(b.data.eventId===y)switch(b.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(b.data.response);break;default:clearTimeout(_),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(){return window}function ID(i){ji().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(){return typeof ji().WorkerGlobalScope<"u"&&typeof ji().importScripts=="function"}async function jD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DD(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function kD(){return Fb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="firebaseLocalStorageDb",OD=1,Fh="firebaseLocalStorage",Yb="fbase_key";class kc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function yd(i,e){return i.transaction([Fh],e?"readwrite":"readonly").objectStore(Fh)}function PD(){const i=indexedDB.deleteDatabase(Gb);return new kc(i).toPromise()}function mp(){const i=indexedDB.open(Gb,OD);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Fh,{keyPath:Yb})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Fh)?e(s):(s.close(),await PD(),e(await mp()))})})}async function RE(i,e,t){const s=yd(i,!0).put({[Yb]:e,value:t});return new kc(s).toPromise()}async function MD(i,e){const t=yd(i,!1).get(e),s=await new kc(t).toPromise();return s===void 0?null:s.value}function CE(i,e){const t=yd(i,!0).delete(e);return new kc(t).toPromise()}const VD=800,UD=3;class Kb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>UD)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gd._getInstance(kD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await jD(),!this.activeServiceWorker)return;this.sender=new ND(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mp();return await RE(e,Hh,"1"),await CE(e,Hh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>RE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>MD(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>CE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=yd(o,!1).getAll();return new kc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Kb.type="LOCAL";const LD=Kb;new Ic(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(i,e){return e?pr(e):(we(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg extends wg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BD(i){return Ub(i.auth,new xg(i),i.bypassAuthState)}function zD(i){const{auth:e,user:t}=i;return we(t,e,"internal-error"),pD(t,new xg(i),i.bypassAuthState)}async function qD(i){const{auth:e,user:t}=i;return we(t,e,"internal-error"),mD(t,new xg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,t,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BD;case"linkViaPopup":case"linkViaRedirect":return qD;case"reauthViaPopup":case"reauthViaRedirect":return zD;default:Qn(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=new Ic(2e3,1e4);async function Xb(i,e,t){if(yn(i.app))return Promise.reject(ri(i,"operation-not-supported-in-this-environment"));const s=Rr(i);_j(i,e,Ag);const o=Qb(s,t);return new oa(s,"signInViaPopup",e,o).executeNotNull()}class oa extends $b{constructor(e,t,s,o,c){super(e,t,o,c),this.provider=s,this.authWindow=null,this.pollId=null,oa.currentPopupAction&&oa.currentPopupAction.cancel(),oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=Sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HD.get())};e()}}oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="pendingRedirect",wh=new Map;class GD extends $b{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=wh.get(this.auth._key());if(!e){try{const s=await YD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}wh.set(this.auth._key(),e)}return this.bypassAuthState||wh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YD(i,e){const t=$D(e),s=QD(i);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function KD(i,e){wh.set(i._key(),e)}function QD(i){return pr(i._redirectPersistence)}function $D(i){return Th(FD,i.config.apiKey,i.name)}async function XD(i,e,t=!1){if(yn(i.app))return Promise.reject(vr(i));const s=Rr(i),o=Qb(s,e),d=await new GD(s,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=10*60*1e3;class ZD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Wb(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(ri(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WD&&this.cachedEventUids.clear(),this.cachedEventUids.has(NE(e))}saveEventToCache(e){this.cachedEventUids.add(NE(e)),this.lastProcessedEventTime=Date.now()}}function NE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Wb({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JD(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wb(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(i,e={}){return Vi(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nk=/^https?/;async function ik(i){if(i.config.emulator)return;const{authorizedDomains:e}=await ek(i);for(const t of e)try{if(rk(t))return}catch{}Qn(i,"unauthorized-domain")}function rk(i){const e=dp(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!nk.test(t))return!1;if(tk.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=new Ic(3e4,6e4);function IE(){const i=ji().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function ak(i){return new Promise((e,t)=>{var s,o,c;function d(){IE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IE(),t(ri(i,"network-request-failed"))},timeout:sk.get()})}if(!((o=(s=ji().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=ji().gapi)===null||c===void 0)&&c.load)d();else{const m=Qj("iframefcb");return ji()[m]=()=>{gapi.load?d():t(ri(i,"network-request-failed"))},Ob(`${Kj()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw bh=null,e})}let bh=null;function ok(i){return bh=bh||ak(i),bh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=new Ic(5e3,15e3),ck="__/auth/iframe",uk="emulator/auth/iframe",hk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fk(i){const e=i.config;we(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?_g(e,uk):`https://${i.config.authDomain}/${ck}`,s={apiKey:e.apiKey,appName:i.name,v:ya},o=dk.get(i.config.apiHost);o&&(s.eid=o);const c=i._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${bc(s).slice(1)}`}async function mk(i){const e=await ok(i),t=ji().gapi;return we(t,i,"internal-error"),e.open({where:document.body,url:fk(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hk,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=ri(i,"network-request-failed"),m=ji().setTimeout(()=>{c(d)},lk.get());function g(){ji().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gk=500,yk=600,vk="_blank",_k="http://localhost";class jE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ek(i,e,t,s=gk,o=yk){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g=Object.assign(Object.assign({},pk),{width:s.toString(),height:o.toString(),top:c,left:d}),y=sn().toLowerCase();t&&(m=Rb(y)?vk:t),Sb(y)&&(e=e||_k,g.scrollbars="yes");const _=Object.entries(g).reduce((b,[k,C])=>`${b}${k}=${C},`,"");if(Uj(y)&&m!=="_self")return Tk(e||"",m),new jE(null);const A=window.open(e||"",m,_);we(A,i,"popup-blocked");try{A.focus()}catch{}return new jE(A)}function Tk(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="__/auth/handler",bk="emulator/auth/handler",Ak=encodeURIComponent("fac");async function DE(i,e,t,s,o,c){we(i.config.authDomain,i,"auth-domain-config-required"),we(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:ya,eventId:o};if(e instanceof Ag){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",Ox(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,A]of Object.entries({}))d[_]=A}if(e instanceof Dc){const _=e.getScopes().filter(A=>A!=="");_.length>0&&(d.scopes=_.join(","))}i.tenantId&&(d.tid=i.tenantId);const m=d;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await i._getAppCheckToken(),y=g?`#${Ak}=${encodeURIComponent(g)}`:"";return`${Sk(i)}?${bc(m).slice(1)}${y}`}function Sk({config:i}){return i.emulator?_g(i,bk):`https://${i.authDomain}/${wk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="webStorageSupport";class xk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hb,this._completeRedirectFn=XD,this._overrideRedirectResult=KD}async _openPopup(e,t,s,o){var c;Ar((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await DE(e,t,s,dp(),o);return Ek(e,d,Sg())}async _openRedirect(e,t,s,o){await this._originValidation(e);const c=await DE(e,t,s,dp(),o);return ID(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(Ar(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await mk(e),s=new ZD(e);return t.register("authEvent",o=>(we(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Um,{type:Um},o=>{var c;const d=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[Um];d!==void 0&&t(!!d),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ik(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Db()||xb()||Tg()}}const Rk=xk;var kE="@firebase/auth",OE="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ik(i){ua(new ds("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;we(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kb(i)},y=new Fj(s,o,c,g);return eD(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ua(new ds("auth-internal",e=>{const t=Rr(e.getProvider("auth").getImmediate());return(s=>new Ck(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ci(kE,OE,Nk(i)),Ci(kE,OE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=5*60,Dk=lT("authIdTokenMaxAge")||jk;let PE=null;const kk=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Dk)return;const o=t==null?void 0:t.token;PE!==o&&(PE=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Ok(i=xp()){const e=Qh(i,"auth");if(e.isInitialized())return e.getImmediate();const t=Jj(i,{popupRedirectResolver:Rk,persistence:[LD,RD,Hb]}),s=lT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=kk(c.toString());bD(t,d,()=>d(t.currentUser)),wD(t,m=>d(m))}}const o=sT("auth");return o?tD(t,`http://${o}`):Io("Auth",!1),t}function Pk(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}Gj({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const c=ri("internal-error");c.customData=o,t(c)},s.type="text/javascript",s.charset="UTF-8",Pk().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ik("Browser");const Mk={apiKey:"AIzaSyAMKxVJqQyhB726ZIpqzrnlJwlVMEompzI",authDomain:"chocolate-review-web.firebaseapp.com",projectId:"chocolate-review-web",storageBucket:"chocolate-review-web.firebasestorage.app",messagingSenderId:"40760554846",appId:"1:40760554846:web:af7701c50e3a44c13acbcf",measurementId:"G-CQXWMKJDQW"},Rg=dT(Mk),st=FI(Rg),Zb=fj(Rg),Uo=Ok(Rg),vd=Dn(st,"chocolates");Dn(st,"makers");Dn(st,"reviews");const Jb=Dn(st,"tags"),e1=async()=>(await Kn(vd)).docs.map(e=>({id:e.id,...e.data()})),t1=async i=>{try{const e=await Kn(Jb),t={};e.docs.forEach(d=>{const m=d.data();t[d.id]=m.name.toLowerCase()});const o=(await Kn(vd)).docs.map(d=>({id:d.id,...d.data()})),c=i.toLowerCase();return o.filter(d=>{const m=d.name&&d.name.toLowerCase().includes(c),g=d.maker&&(typeof d.maker=="string"?d.maker.toLowerCase().includes(c):d.maker.name&&d.maker.name.toLowerCase().includes(c)),y=d.origin&&d.origin.toLowerCase().includes(c),_=d.type&&d.type.toLowerCase().includes(c);let A=!1;return d.tagIds&&Array.isArray(d.tagIds)&&(A=d.tagIds.some(b=>t[b]&&t[b].includes(c))),m||g||y||_||A})}catch(e){throw console.error("Error searching chocolates:",e),e}},Vk=async(i,e)=>{let t=null;if(e){const o=yb(Zb,`chocolate-images/${Date.now()}_${e.name}`);await pb(o,e),t=await gb(o)}return{id:(await Ww(vd,{...i,imageUrl:t,createdAt:new Date,updatedAt:new Date,averageRating:0,reviewCount:0})).id,...i,imageUrl:t}},Uk=async()=>(await Kn(Jb)).docs.map(e=>({id:e.id,...e.data()})),Lk=async(i=6)=>{try{const e=await Kn(vd);if(!e.empty){const t=e.docs.map(m=>({id:m.id,...m.data()})),s=_s(Dn(st,"reviews"),xo("createdAt","desc"),i(50)),o=await Kn(s),c=new Set;return o.docs.forEach(m=>{c.add(m.data().chocolateId)}),t.map(m=>{const g=m.averageRating||0,y=m.reviewCount||0,_=c.has(m.id),A=g*.4+Math.min(y/10,1)*.4+(_?.2:0);return{...m,featuredScore:A}}).sort((m,g)=>g.featuredScore-m.featuredScore).slice(0,i)}return ME(i)}catch(e){return console.error("Error getting featured chocolates:",e),ME(i)}},ME=i=>[{id:"sample-godiva-1",name:"Dark Chocolate 72% Cacao",maker:"Godiva",type:"Dark",origin:"Ecuador",cacaoPercentage:72,averageRating:4.6,reviewCount:342,ratings:342,imageUrl:"https://images.unsplash.com/photo-1549007992-85de76ce6969?w=300&h=300&fit=crop",description:"Rich and sophisticated dark chocolate with notes of dried fruit and subtle spice.",featuredScore:4.2},{id:"sample-lindt-1",name:"Excellence 85% Cocoa Dark Chocolate",maker:"Lindt",type:"Dark",origin:"Various",cacaoPercentage:85,averageRating:4.8,reviewCount:567,ratings:567,imageUrl:"https://images.unsplash.com/photo-1511381939415-e44015466834?w=300&h=300&fit=crop",description:"Intense dark chocolate with complex flavor notes for the true connoisseur.",featuredScore:4.5},{id:"sample-hu-1",name:"Vanilla Crunch Dark Chocolate",maker:"Hu Kitchen",type:"Dark",origin:"Peru",cacaoPercentage:70,averageRating:4.7,reviewCount:289,ratings:289,imageUrl:"https://images.unsplash.com/photo-1606312619070-d48b4c652a52?w=300&h=300&fit=crop",description:"Organic, paleo-friendly dark chocolate with real vanilla and crunchy cacao nibs.",featuredScore:4.3},{id:"sample-theo-1",name:"Salted Almond 70% Dark Chocolate",maker:"Theo Chocolate",type:"Dark",origin:"Madagascar",cacaoPercentage:70,averageRating:4.5,reviewCount:198,ratings:198,imageUrl:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=300&fit=crop",description:"Fair trade dark chocolate with roasted almonds and a touch of sea salt.",featuredScore:4.1},{id:"sample-green-1",name:"Mint Dark Chocolate",maker:"Green & Black's",type:"Dark",origin:"Various",cacaoPercentage:70,averageRating:4.4,reviewCount:156,ratings:156,imageUrl:"https://images.unsplash.com/photo-1587736793421-4c5c5b6bf4d7?w=300&h=300&fit=crop",description:"Organic dark chocolate with refreshing natural mint flavor.",featuredScore:4},{id:"sample-ghirardelli-1",name:"Sea Salt Soire Dark Chocolate",maker:"Ghirardelli",type:"Dark",origin:"Various",cacaoPercentage:72,averageRating:4.3,reviewCount:423,ratings:423,imageUrl:"https://images.unsplash.com/photo-1585065763852-4cc3bc97e8b0?w=300&h=300&fit=crop",description:"Premium dark chocolate with roasted almonds and sea salt crystals.",featuredScore:3.9},{id:"sample-valrhona-1",name:"Guanaja 70% Dark Chocolate",maker:"Valrhona",type:"Dark",origin:"South America",cacaoPercentage:70,averageRating:4.9,reviewCount:234,ratings:234,imageUrl:"https://images.unsplash.com/photo-1606890737304-57a1ca8a5b62?w=300&h=300&fit=crop",description:"Professional-grade dark chocolate with exceptional balance and complexity.",featuredScore:4.6},{id:"sample-endangered-1",name:"Dark Chocolate + Sea Salt + Caramel",maker:"Endangered Species",type:"Dark",origin:"Various",cacaoPercentage:72,averageRating:4.4,reviewCount:312,ratings:312,imageUrl:"https://images.unsplash.com/photo-1571197102-95815e6a2769?w=300&h=300&fit=crop",description:"Ethically sourced dark chocolate with gooey caramel and sea salt.",featuredScore:4}].sort((t,s)=>s.featuredScore-t.featuredScore).slice(0,i),Bk=async(i,e)=>{try{const t=yb(Zb,`chocolate-images/${i}_${Date.now()}`);await pb(t,e);const s=await gb(t),o=Yn(st,"chocolates",i);return await cg(o,{imageUrl:s,updatedAt:new Date}),s}catch(t){throw console.error("Error updating chocolate image:",t),t}},zk=async i=>{try{let e;i?e=_s(Dn(st,"chocolates"),Nc(i.field,i.operator,i.value),xo("averageRating","desc"),up(100)):e=_s(Dn(st,"chocolates"),xo("averageRating","desc"),up(100));const t=await Kn(e);return t.empty?VE(i==null?void 0:i.value):t.docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Error getting chocolates by category:",e),VE(i==null?void 0:i.value)}},VE=i=>{const e=[{id:"d1",name:"Madagascar 72% Dark",maker:"Terroir Artisan",type:"Dark",origin:"Madagascar",cacaoPercentage:72,averageRating:4.8,ratings:186,imageUrl:"/placeholder-chocolate.jpg"},{id:"d2",name:"Ecuador 85% Dark",maker:"Wild Coast Chocolate",type:"Dark",origin:"Ecuador",cacaoPercentage:85,averageRating:4.6,ratings:142,imageUrl:"/placeholder-chocolate.jpg"},{id:"d3",name:"Venezuela 70% Dark",maker:"Craft Origins",type:"Dark",origin:"Venezuela",cacaoPercentage:70,averageRating:4.7,ratings:163,imageUrl:"/placeholder-chocolate.jpg"}],t=[{id:"m1",name:"Classic Milk Chocolate",maker:"Alpine Confections",type:"Milk",origin:"Various",cacaoPercentage:39,averageRating:4.5,ratings:210,imageUrl:"/placeholder-chocolate.jpg"},{id:"m2",name:"Creamy Milk Hazelnut",maker:"Artisan Delights",type:"Milk",origin:"Italy",cacaoPercentage:42,averageRating:4.7,ratings:178,imageUrl:"/placeholder-chocolate.jpg"},{id:"m3",name:"Toffee Milk Chocolate",maker:"Sweet Traditions",type:"Milk",origin:"Belgium",cacaoPercentage:36,averageRating:4.4,ratings:156,imageUrl:"/placeholder-chocolate.jpg"}],s=[{id:"w1",name:"Vanilla Bean White",maker:"Alpine Confections",type:"White",origin:"Various",cacaoPercentage:33,averageRating:4.5,ratings:98,imageUrl:"/placeholder-chocolate.jpg"},{id:"w2",name:"Raspberry White Chocolate",maker:"Sweet Traditions",type:"White",origin:"Belgium",cacaoPercentage:30,averageRating:4.3,ratings:87,imageUrl:"/placeholder-chocolate.jpg"}],o=[{id:"so1",name:"Peru Single Origin 70%",maker:"Bean Masters",type:"Dark",origin:"Peru",cacaoPercentage:70,averageRating:4.9,ratings:132,imageUrl:"/placeholder-chocolate.jpg"},{id:"so2",name:"Tanzania Single Origin 75%",maker:"Origin Craft",type:"Dark",origin:"Tanzania",cacaoPercentage:75,averageRating:4.7,ratings:105,imageUrl:"/placeholder-chocolate.jpg"},{id:"so3",name:"Dominican Republic Single Origin 65%",maker:"Terroir Artisan",type:"Dark",origin:"Dominican Republic",cacaoPercentage:65,averageRating:4.6,ratings:91,imageUrl:"/placeholder-chocolate.jpg"}],c=[{id:"a1",name:"Small Batch Espresso",maker:"Craft Origins",type:"Dark",origin:"Colombia",cacaoPercentage:68,averageRating:4.8,ratings:76,imageUrl:"/placeholder-chocolate.jpg"},{id:"a2",name:"Handcrafted Sea Salt",maker:"Artisan Delights",type:"Milk",origin:"Ecuador",cacaoPercentage:45,averageRating:4.6,ratings:82,imageUrl:"/placeholder-chocolate.jpg"},{id:"a3",name:"Stone Ground 85%",maker:"Bean Masters",type:"Dark",origin:"Mexico",cacaoPercentage:85,averageRating:4.7,ratings:64,imageUrl:"/placeholder-chocolate.jpg"}];return i==="Dark"||i==="dark"?e:i==="Milk"||i==="milk"?t:i==="White"||i==="white"?s:i==="single-origin"?o:i==="bean-to-bar"?c:[...e.slice(0,1),...t.slice(0,1),...s.slice(0,1),...o.slice(0,1),...c.slice(0,1)]},qk=async i=>{try{const e=_s(Dn(st,"reviews"),Nc("userId","==",i),xo("createdAt","desc")),t=await Kn(e);return t.empty?Yk():t.docs.map(s=>({id:s.id,...s.data()}))}catch(e){throw console.error("Error getting user reviews:",e),e}},Hk=async i=>{try{const e={...i,createdAt:md()},t=await Ww(Dn(st,"reviews"),e);return await Fk(i.chocolateId),await Gk(i.userId),{id:t.id,...e}}catch(e){throw console.error("Error adding review:",e),e}},Fk=async i=>{try{const e=_s(Dn(st,"reviews"),Nc("chocolateId","==",i)),t=await Kn(e);if(!t.empty){const s=t.docs.map(m=>m.data()),c=s.reduce((m,g)=>m+g.rating,0)/s.length,d=Yn(st,"chocolates",i);await cg(d,{averageRating:c,reviewCount:s.length,updatedAt:md()})}}catch(e){throw console.error("Error updating chocolate rating:",e),e}},Gk=async i=>{try{const e=_s(Dn(st,"reviews"),Nc("userId","==",i)),s=(await Kn(e)).size,o=Yn(st,"users",i);await cg(o,{reviewCount:s,updatedAt:md()})}catch(e){console.error("Error updating user review count:",e)}},Yk=()=>[{id:"sample1",userId:"currentUser",chocolateId:"1",rating:4,text:"This dark chocolate has a wonderful depth of flavor with notes of cherry and a hint of vanilla. The texture is smooth with a clean snap. I particularly enjoyed the long finish that develops additional complexity over time.",createdAt:{toDate:()=>new Date(Date.now()-7*24*60*60*1e3)},chocolate:{id:"1",name:"Valrhona Guanaja 70%",maker:"Valrhona",imageUrl:"https://placehold.co/300x300?text=Chocolate"}},{id:"sample2",userId:"currentUser",chocolateId:"2",rating:5,text:"Absolutely perfect balance of creaminess and cocoa flavor! This milk chocolate has a silky texture that melts beautifully on the tongue. There are subtle caramel notes and a hint of malt that make it incredibly satisfying. Will definitely purchase again.",createdAt:{toDate:()=>new Date(Date.now()-14*24*60*60*1e3)},chocolate:{id:"2",name:"Lindt Excellence Milk Chocolate",maker:"Lindt & Sprngli",imageUrl:"https://placehold.co/300x300?text=Chocolate"}},{id:"sample3",userId:"currentUser",chocolateId:"3",rating:3,text:"An interesting single-origin bar with bright acidity and prominent fruity notes. While the quality is apparent, I found the texture slightly grainy and the finish a bit too acidic for my taste. Still worth trying for chocolate enthusiasts interested in exploring different flavor profiles.",createdAt:{toDate:()=>new Date(Date.now()-30*24*60*60*1e3)},chocolate:{id:"3",name:"Dandelion Madagascar",maker:"Dandelion Chocolate",imageUrl:"https://placehold.co/300x300?text=Chocolate"}}],Kk=async(i=3)=>{try{const e=_s(Dn(st,"reviews"),xo("createdAt","desc"),up(10)),t=await Kn(e);if(!t.empty){const s=[];for(const m of t.docs){const g={id:m.id,...m.data()};try{const y=await br(m(st,"chocolates",g.chocolateId));y.exists()&&(g.chocolate={id:y.id,...y.data()},s.push(g))}catch(y){console.error("Error fetching chocolate for review:",y)}}const o=s.map(m=>{const g=m.rating||0,y=m.text?m.text.length:0,_=m.createdAt?(Date.now()-m.createdAt.toDate().getTime())/(1e3*60*60*24):999,A=g*.4+Math.min(y/200,1)*.3+Math.max(0,(30-_)/30)*.3;return{...m,featuredScore:A}}),c=[],d=new Set;return o.sort((m,g)=>g.featuredScore-m.featuredScore).forEach(m=>{!d.has(m.chocolateId)&&c.length<i&&(c.push(m),d.add(m.chocolateId))}),c}return[]}catch(e){return console.error("Error getting featured reviews:",e),[]}};function Oc({chocolate:i,featured:e=!1}){const t=_=>{const A=[],b=Math.floor(_||0),k=(_||0)%1!==0;for(let C=1;C<=5;C++)C<=b?A.push(h.jsx("span",{className:"star filled",children:""},C)):C===b+1&&k?A.push(h.jsx("span",{className:"star half",children:""},C)):A.push(h.jsx("span",{className:"star empty",children:""},C));return A},s=i.averageRating||0,o=i.reviewCount||i.ratings||0,c=()=>i.imageUrl&&i.imageUrl!=="https://placehold.co/300x300?text=Chocolate"?i.imageUrl:"https://images.unsplash.com/photo-1606890737304-57a1ca8a5b62?w=300&h=300&fit=crop&crop=center",d=()=>(e||!i.maker||i.name.toLowerCase().includes(i.maker.toLowerCase()),i.name),m=()=>typeof i.maker=="string"?i.maker:i.maker&&i.maker.name?i.maker.name:"Unknown Maker",g=()=>i.origin||"Various",y=()=>{const _=i.cacaoPercentage||0;return _>0?`${_}%`:"N/A"};return h.jsxs(pe,{to:`/chocolate/${i.id}`,className:`chocolate-card ${e?"featured":""}`,children:[h.jsxs("div",{className:"image-container",children:[h.jsx("img",{src:c(),alt:i.name,className:"card-image",onError:_=>{_.target.src="https://images.unsplash.com/photo-1606890737304-57a1ca8a5b62?w=300&h=300&fit=crop&crop=center"}}),e&&h.jsx("div",{className:"featured-badge",children:"Featured"})]}),h.jsxs("div",{className:"card-content",children:[h.jsx("h3",{className:"card-title",title:i.name,children:d()}),h.jsx("p",{className:"card-maker",children:m()}),h.jsxs("div",{className:"card-details",children:[h.jsx("span",{className:"card-origin",children:g()}),h.jsxs("span",{className:"card-percentage",children:[y()," Cacao"]})]}),h.jsxs("div",{className:"card-rating",children:[h.jsx("span",{className:"rating-value",children:s.toFixed(1)}),h.jsx("div",{className:"stars",children:t(s)}),h.jsx("span",{className:"rating-count",children:o>0?`(${o})`:"(New)"})]}),i.type&&h.jsx("div",{className:"card-type",children:h.jsx("span",{className:"type-badge",children:i.type})})]})]})}const Qk="/assets/Stock-Photo-Preview-BjW_iiiO.jpeg";function $k(){const[i,e]=U.useState(""),[t,s]=U.useState([]),[o,c]=U.useState([]),[d,m]=U.useState(!0),[g,y]=U.useState(null),_=Es(),A=C=>{C.preventDefault(),i.trim()&&_(`/search?query=${encodeURIComponent(i)}`)};U.useEffect(()=>{(async()=>{try{m(!0),console.log("Fetching homepage data...");const P=await Lk(6);console.log("Featured chocolates:",P),s(P);const I=await Kk(3);console.log("Featured reviews:",I),c(I),m(!1)}catch(P){console.error("Error fetching homepage data:",P),y(P.message),m(!1)}})()},[]);const b=C=>{const P=[],I=Math.floor(C),G=C%1!==0;for(let J=1;J<=5;J++)J<=I?P.push(h.jsx("span",{className:"star filled",children:""},J)):J===I+1&&G?P.push(h.jsx("span",{className:"star half",children:""},J)):P.push(h.jsx("span",{className:"star empty",children:""},J));return P},k=C=>{if(!C)return"";try{return(typeof C.toDate=="function"?C.toDate():new Date(C.seconds*1e3)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return""}};return d?h.jsxs("div",{className:"loading-container",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Loading chocolatey goodness..."})]}):h.jsxs("div",{className:"home-page",children:[h.jsx("section",{className:"hero-section",style:{backgroundImage:`linear-gradient(rgba(93, 64, 55, 0.85), rgba(93, 64, 55, 0.85)), url(${Qk})`},children:h.jsx("div",{className:"container",children:h.jsxs("div",{className:"hero-content",children:[h.jsx("h1",{className:"hero-title",children:"Discover Your Perfect Chocolate"}),h.jsx("p",{className:"hero-subtitle",children:"Join our community of chocolate enthusiasts to explore, review, and share the world's finest chocolates"}),h.jsxs("form",{onSubmit:A,className:"search-container",children:[h.jsx("input",{type:"text",placeholder:"Search for a chocolate, origin, or maker...",className:"search-input",value:i,onChange:C=>e(C.target.value)}),h.jsx("button",{type:"submit",className:"search-button",children:"Search"})]}),h.jsxs("div",{className:"hero-actions",children:[h.jsx(pe,{to:"/browse",className:"btn btn-primary",children:"Explore Chocolates"}),h.jsx(pe,{to:"/signup",className:"btn btn-secondary",children:"Join Community"})]})]})})}),h.jsx("section",{className:"featured-section",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"section-header",children:[h.jsx("h2",{className:"section-title",children:"Featured Chocolates"}),h.jsx("p",{className:"section-subtitle",children:"Premium chocolates from renowned makers, curated for excellence"}),h.jsx(pe,{to:"/browse",className:"view-all",children:"View All Chocolates"})]}),h.jsx("div",{className:"chocolate-cards",children:t.length>0?t.map(C=>h.jsx(Oc,{chocolate:C,featured:!0},C.id)):h.jsxs("div",{className:"no-chocolates-message",children:[h.jsx("p",{children:"Featured chocolates are being curated. Check back soon!"}),h.jsx(pe,{to:"/browse",className:"btn btn-primary btn-sm",children:"Browse All Chocolates"})]})})]})}),h.jsx("section",{className:"categories-section",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"section-header",children:[h.jsx("h2",{className:"section-title",children:"Explore by Category"}),h.jsx("p",{className:"section-subtitle",children:"Find chocolates that match your preferences"})]}),h.jsxs("div",{className:"categories-grid",children:[h.jsxs(pe,{to:"/category/dark",className:"category-tile",children:[h.jsx("h3",{className:"category-title",children:"Dark Chocolate"}),h.jsx("p",{className:"category-description",children:"Bold & intense profiles"})]}),h.jsxs(pe,{to:"/category/milk",className:"category-tile",children:[h.jsx("h3",{className:"category-title",children:"Milk Chocolate"}),h.jsx("p",{className:"category-description",children:"Creamy & approachable"})]}),h.jsxs(pe,{to:"/category/origin",className:"category-tile",children:[h.jsx("h3",{className:"category-title",children:"Single Origin"}),h.jsx("p",{className:"category-description",children:"Distinctive terroir"})]}),h.jsxs(pe,{to:"/category/artisan",className:"category-tile",children:[h.jsx("h3",{className:"category-title",children:"Artisan Craft"}),h.jsx("p",{className:"category-description",children:"Small batch excellence"})]})]})]})}),h.jsx("section",{className:"how-it-works",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"section-header",children:[h.jsx("h2",{className:"section-title",children:"How Chocly Works"}),h.jsx("p",{className:"section-subtitle",children:"Join our chocolate community in three simple steps"})]}),h.jsxs("div",{className:"steps-container",children:[h.jsxs("div",{className:"step-card",children:[h.jsx("div",{className:"step-icon discover",children:h.jsx("svg",{viewBox:"0 0 24 24",children:h.jsx("path",{d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"})})}),h.jsx("h3",{className:"step-title",children:"Discover"}),h.jsx("p",{className:"step-description",children:"Explore our extensive chocolate database and find chocolates based on origin, flavor profile, or maker"})]}),h.jsxs("div",{className:"step-card",children:[h.jsx("div",{className:"step-icon taste",children:h.jsx("svg",{viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.5 16.5,17.4 13,17.9V21H11V17.9C7.5,17.4 5,14.5 5,11V10H7V11A5,5 0 0,0 12,16A5,5 0 0,0 17,11V10H19V11Z"})})}),h.jsx("h3",{className:"step-title",children:"Taste & Rate"}),h.jsx("p",{className:"step-description",children:"Develop your palate by tasting and rating chocolates, tracking your personal chocolate journey"})]}),h.jsxs("div",{className:"step-card",children:[h.jsx("div",{className:"step-icon connect",children:h.jsx("svg",{viewBox:"0 0 24 24",children:h.jsx("path",{d:"M16.5,6.5A2,2 0 0,1 18.5,8.5A2,2 0 0,1 16.5,10.5A2,2 0 0,1 14.5,8.5A2,2 0 0,1 16.5,6.5M16.5,12A3.5,3.5 0 0,0 20,8.5A3.5,3.5 0 0,0 16.5,5A3.5,3.5 0 0,0 13,8.5A3.5,3.5 0 0,0 16.5,12M7.5,6.5A2,2 0 0,1 9.5,8.5A2,2 0 0,1 7.5,10.5A2,2 0 0,1 5.5,8.5A2,2 0 0,1 7.5,6.5M7.5,12A3.5,3.5 0 0,0 11,8.5A3.5,3.5 0 0,0 7.5,5A3.5,3.5 0 0,0 4,8.5A3.5,3.5 0 0,0 7.5,12M21.5,17.5H14V16.25C14,14.75 13.75,13.5 11.75,13.5C10.5,13.5 9.25,14 7.75,14.5C6.25,15 5.25,15.25 4,15.25V17L4.75,17.25C5.5,17.5 5.75,17.75 6.25,18.25C6.75,18.75 7.5,19.5 8.5,20.25C9.5,21 9.75,21 11,21C12.25,21 12.5,21 13.5,20.25C14.5,19.5 15.25,18.75 15.75,18.25C16.25,17.75 16.5,17.5 17.25,17.25L18,17H21.5V17.5Z"})})}),h.jsx("h3",{className:"step-title",children:"Connect"}),h.jsx("p",{className:"step-description",children:"Share recommendations, follow fellow chocolate lovers, and join tasting events in your area"})]})]})]})}),h.jsx("section",{className:"reviews-section",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"section-header",children:[h.jsx("h2",{className:"section-title",children:"Community Reviews"}),h.jsx("p",{className:"section-subtitle",children:"Discover what chocolate lovers are saying"}),o.length>0&&h.jsx(pe,{to:"/browse",className:"view-all",children:"Explore More Chocolates"})]}),h.jsx("div",{className:"reviews-grid",children:o.length>0?o.map(C=>{var P,I,G,J;return h.jsxs("div",{className:"review-card",children:[h.jsxs("div",{className:"review-header",children:[h.jsxs("div",{className:"review-user",children:[h.jsx("span",{className:"user-name",children:C.user||"Anonymous User"}),h.jsx("span",{className:"review-date",children:k(C.createdAt)})]}),h.jsx("div",{className:"review-rating",children:b(C.rating)})]}),h.jsxs("div",{className:"review-chocolate",children:[h.jsx("img",{src:((P=C.chocolate)==null?void 0:P.imageUrl)||"https://images.unsplash.com/photo-1606890737304-57a1ca8a5b62?w=60&h=60&fit=crop",alt:(I=C.chocolate)==null?void 0:I.name,className:"chocolate-image"}),h.jsxs("div",{className:"chocolate-info",children:[h.jsx("h4",{className:"chocolate-name",children:(G=C.chocolate)==null?void 0:G.name}),h.jsx("p",{className:"chocolate-maker",children:(J=C.chocolate)==null?void 0:J.maker})]})]}),h.jsx("p",{className:"review-text",children:C.text&&C.text.length>150?`${C.text.substring(0,150)}...`:C.text}),h.jsx(pe,{to:`/chocolate/${C.chocolateId}`,className:"read-more",children:"Read Full Review"})]},C.id)}):h.jsxs("div",{className:"no-reviews-message",children:[h.jsx("h3",{children:"Be the First to Review!"}),h.jsx("p",{children:"No reviews yet, but that's where you come in! Share your chocolate discoveries with the community."}),h.jsx(pe,{to:"/browse",className:"btn btn-primary btn-sm",children:"Find Chocolates to Review"})]})})]})}),h.jsx("section",{className:"cta-section",children:h.jsx("div",{className:"container",children:h.jsxs("div",{className:"cta-content",children:[h.jsx("h2",{className:"cta-title",children:"Ready to join our chocolate community?"}),h.jsx("p",{className:"cta-text",children:"Create a free account to start tracking your tastings, save favorites, and connect with fellow chocolate enthusiasts"}),h.jsxs("div",{className:"cta-buttons",children:[h.jsx(pe,{to:"/signup",className:"btn btn-primary",children:"Create Account"}),h.jsx(pe,{to:"/browse",className:"btn btn-tertiary",children:"Explore First"})]})]})})})]})}function pp({rating:i,size:e="small",interactive:t=!1,onRatingChange:s}){const o=[],c=d=>{t&&s&&s(d)};for(let d=1;d<=5;d++){let m="star";d<=Math.floor(i)?m+=" filled":d-.5<=i&&(m+=" half-filled"),e==="large"&&(m+=" star-large"),t&&(m+=" interactive"),o.push(h.jsx("span",{className:m,onClick:()=>c(d),children:""},d))}return h.jsx("div",{className:"rating-stars",children:o})}function Xk({review:i}){const e=i.createdAt?typeof i.createdAt.toDate=="function"?i.createdAt.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):new Date(i.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return h.jsxs("div",{className:"review-item",children:[h.jsxs("div",{className:"review-header",children:[h.jsx("span",{className:"username",children:i.user||"Anonymous User"}),h.jsx("div",{className:"review-rating-stars",children:h.jsx(pp,{rating:i.rating})}),e&&h.jsx("span",{className:"review-date",children:e})]}),h.jsx("p",{className:"review-text",children:i.text})]})}const Wk=async(i,e,t)=>{try{const s=await vD(Uo,i,e);return await TD(s.user,{displayName:t}),await Cg(s.user,{displayName:t}),s.user}catch(s){throw s}},Zk=async(i,e)=>{try{return(await _D(Uo,i,e)).user}catch(t){throw t}},Jk=async()=>{try{console.log("Starting Google sign-in process");const i=new fr;i.setCustomParameters({prompt:"select_account"}),console.log("Initialized Google provider");const e=await Xb(Uo,i);return console.log("Google sign-in successful",e.user.uid),console.log("Checking if user profile exists"),(await br(Yn(st,"users",e.user.uid))).exists()?console.log("User profile already exists"):(console.log("Creating new user profile"),await Cg(e.user)),e.user}catch(i){throw console.error("Google sign-in error:",i),i.code==="auth/popup-closed-by-user"?new Error("Sign-in cancelled. You closed the login popup."):i.code==="auth/popup-blocked"?new Error("Login popup was blocked. Please enable popups for this site."):i.code==="auth/cancelled-popup-request"?new Error("Sign-in cancelled."):i}},n1=async()=>{try{console.log("Starting Facebook sign-in process");const i=new dr;console.log("Initialized Facebook provider");const e=await Xb(Uo,i);return console.log("Facebook sign-in successful",e.user.uid),console.log("Checking if user profile exists"),(await br(Yn(st,"users",e.user.uid))).exists()?console.log("User profile already exists"):(console.log("Creating new user profile"),await Cg(e.user)),e.user}catch(i){throw console.error("Facebook sign-in error:",i),i}},Cg=async(i,e={})=>{if(!i)return;const t=Yn(st,"users",i.uid);if(!(await br(t)).exists()){const{displayName:o,email:c,photoURL:d}=i;try{await r2(t,{displayName:o||e.displayName||"",email:c,photoURL:d||"",createdAt:md(),reviewCount:0,tastingCount:0,favorites:[],badges:["Newcomer"],preferences:{favoriteTypes:[],dietaryRestrictions:[],flavorPreferences:[]},...e})}catch(m){throw console.error("Error creating user profile",m),m}}return i1(i.uid)},i1=async i=>{try{const e=await br(Yn(st,"users",i));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw e}},eO=async i=>{try{return await yD(Uo,i),!0}catch(e){throw e}},tO=i=>AD(Uo,i),r1=U.createContext();function s1(){return U.useContext(r1)}function nO({children:i}){const[e,t]=U.useState(null),[s,o]=U.useState(null),[c,d]=U.useState(!0),[m,g]=U.useState(null);U.useEffect(()=>tO(async A=>{d(!0),g(null);try{if(A){console.log("User authenticated:",A.uid),t(A);try{const b=await i1(A.uid);console.log("User profile loaded:",b?"success":"not found"),o(b)}catch(b){console.error("Error loading user profile:",b),g("Failed to load user profile")}}else console.log("No user authenticated"),t(null),o(null)}catch(b){console.error("Auth state change error:",b),g("Authentication error")}finally{d(!1)}}),[]);const y={currentUser:e,userProfile:s,loading:c,error:m};return h.jsx(r1.Provider,{value:y,children:!c&&i})}function iO(){const{id:i}=vp(),[e,t]=U.useState(null),[s,o]=U.useState([]),[c,d]=U.useState([]),[m,g]=U.useState(!0),[y,_]=U.useState(null),[A,b]=U.useState(0),[k,C]=U.useState(""),[P,I]=U.useState(!1),{currentUser:G}=s1(),J=async()=>{try{const R=_s(Dn(st,"reviews"),Nc("chocolateId","==",i),xo("createdAt","desc")),N=(await Kn(R)).docs.map(O=>({id:O.id,...O.data()}));o(N)}catch(R){console.error("Error fetching reviews:",R)}};U.useEffect(()=>{(async()=>{try{g(!0);const x=Yn(st,"chocolates",i),N=await br(x);if(!N.exists()){_("Chocolate not found"),g(!1);return}const O={id:N.id,...N.data()};if(console.log("Chocolate data received:",O),t(O),O.tagIds&&O.tagIds.length>0){const L=[];for(const B of O.tagIds)try{const D=await br(Yn(st,"tags",B));D.exists()&&L.push(D.data().name)}catch(D){console.error("Error fetching tag:",D)}d(L)}await J(),g(!1)}catch(x){console.error("Error fetching chocolate details:",x),_(x.message),g(!1)}})()},[i]);const X=R=>{b(R)},oe=async R=>{if(R.preventDefault(),!G){alert("Please sign in to leave a review");return}if(A===0){alert("Please select a rating");return}if(!k.trim()){alert("Please write a review");return}try{g(!0);const x={chocolateId:i,userId:G.uid,user:G.displayName||"Anonymous User",userPhotoURL:G.photoURL||null,rating:A,text:k,chocolate:{id:e.id,name:e.name,maker:e.maker,imageUrl:e.imageUrl||"https://placehold.co/300x300?text=Chocolate"}};await Hk(x),I(!0),b(0),C(""),await J(),setTimeout(()=>{I(!1)},3e3)}catch(x){console.error("Error submitting review:",x),alert(`Error submitting review: ${x.message}`)}finally{g(!1)}};if(m)return h.jsxs("div",{className:"loading-container",children:[h.jsxs("div",{className:"loading-animation",children:[h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{})]}),h.jsx("p",{children:"Loading chocolate details..."})]});if(y||!e)return h.jsxs("div",{className:"error",children:["Error: ",y||"Chocolate not found"]});const ce=e.flavorProfile||[{name:"Sweet",intensity:3},{name:"Bitter",intensity:3},{name:"Fruity",intensity:0},{name:"Nutty",intensity:0},{name:"Earthy",intensity:0}],ye=Array.isArray(e.ingredients)?e.ingredients:typeof e.ingredients=="string"?e.ingredients.split(",").map(R=>R.trim()):[];return h.jsxs("div",{className:"chocolate-detail-page",children:[h.jsx("div",{className:"detail-header",children:h.jsx("div",{className:"container",children:h.jsxs("div",{className:"detail-header-content",children:[h.jsxs("div",{className:"detail-image",children:[h.jsx("img",{src:e.imageUrl||"https://placehold.co/300x300?text=Chocolate",alt:e.name,className:"chocolate-label-image"}),h.jsx("div",{className:"image-caption",children:"Product Label"})]}),h.jsxs("div",{className:"detail-info",children:[h.jsx(pe,{to:`/maker?maker=${encodeURIComponent(e.maker)}`,className:"maker-link-prominent",children:h.jsx("p",{className:"maker-name-prominent",children:e.maker})}),h.jsx("h1",{className:"chocolate-name",children:e.name}),h.jsxs("div",{className:"rating-section",children:[h.jsxs("div",{className:"average-rating",children:[h.jsx("span",{className:"rating-number",children:(e.averageRating||0).toFixed(1)}),h.jsx(pp,{rating:e.averageRating||0,size:"large"}),h.jsxs("span",{className:"rating-count",children:["(",e.reviewCount||0," ratings)"]})]}),h.jsxs("div",{className:"user-rating",children:[h.jsx("p",{children:"Your Rating:"}),h.jsx(pp,{rating:A,size:"large",interactive:!0,onRatingChange:X})]})]}),h.jsxs("div",{className:"chocolate-meta",children:[h.jsxs("div",{className:"meta-item",children:[h.jsx("span",{className:"meta-label",children:"Origin"}),h.jsx("span",{className:"meta-value",children:e.origin||"Various"})]}),h.jsxs("div",{className:"meta-item",children:[h.jsx("span",{className:"meta-label",children:"Cacao"}),h.jsxs("span",{className:"meta-value",children:[e.cacaoPercentage||0,"%"]})]}),h.jsxs("div",{className:"meta-item",children:[h.jsx("span",{className:"meta-label",children:"Type"}),h.jsx("span",{className:"meta-value",children:e.type||"N/A"})]})]}),c.length>0&&h.jsx("div",{className:"chocolate-tags",children:c.map(R=>h.jsx("span",{className:"tag",children:R},R))})]})]})})}),h.jsxs("div",{className:"container",children:[h.jsxs("section",{className:"description-section",children:[h.jsx("h2",{children:"Description"}),h.jsx("p",{children:e.description||"No description available."})]}),h.jsxs("section",{className:"flavor-section",children:[h.jsx("h2",{children:"Flavor Profile"}),h.jsx("div",{className:"flavor-list",children:ce.map(R=>h.jsxs("div",{className:"flavor-item",children:[h.jsx("span",{className:"flavor-name",children:R.name}),h.jsx("div",{className:"flavor-bar",children:h.jsx("div",{className:"flavor-level",style:{width:`${(R.intensity||0)*20}%`}})})]},R.name))})]}),h.jsxs("section",{className:"ingredients-section",children:[h.jsx("h2",{children:"Ingredients"}),ye.length>0?h.jsx("ul",{className:"ingredients-list",children:ye.map((R,x)=>h.jsx("li",{children:R},x))}):h.jsx("p",{children:"Ingredients information not available."})]}),e.nutritionalInfo&&h.jsxs("section",{className:"nutrition-section",children:[h.jsx("h2",{children:"Nutritional Information"}),h.jsx("div",{className:"nutrition-info",children:Object.entries(e.nutritionalInfo).map(([R,x])=>h.jsxs("div",{className:"nutrition-item",children:[h.jsx("span",{className:"nutrition-label",children:R.charAt(0).toUpperCase()+R.slice(1).replace(/([A-Z])/g," $1")}),h.jsx("span",{className:"nutrition-value",children:typeof x=="number"?x+(R.includes("calories")?"":"g"):x})]},R))})]}),h.jsxs("section",{className:"reviews-section",children:[h.jsx("h2",{children:"Reviews"}),s.length>0?h.jsx("div",{className:"reviews-list",children:s.map(R=>h.jsx(Xk,{review:R},R.id))}):h.jsx("p",{className:"no-reviews",children:"No reviews yet. Be the first to review this chocolate!"}),h.jsxs("div",{className:"add-review",children:[h.jsx("h3",{children:"Add Your Review"}),P&&h.jsx("div",{className:"review-success",children:"Your review has been submitted successfully!"}),h.jsxs("form",{onSubmit:oe,children:[h.jsx("textarea",{placeholder:"Share your thoughts on this chocolate...",value:k,onChange:R=>C(R.target.value),required:!0}),h.jsx("button",{type:"submit",className:"submit-review",disabled:!G||m,children:m?"Submitting...":"Submit Review"})]})]})]})]})]})}function rO(){const[i]=tT(),e=i.get("query")||"",[t,s]=U.useState([]),[o,c]=U.useState(!0),[d,m]=U.useState(null),[g,y]=U.useState("relevance"),[_,A]=U.useState("all");U.useEffect(()=>{(async()=>{if(!e.trim()){s([]),c(!1);return}try{c(!0);const G=await t1(e);s(G),c(!1)}catch(G){console.error("Search error:",G),m(G.message),c(!1)}})()},[e]);const k=[...t.filter(I=>_==="all"?!0:I.type&&I.type.toLowerCase()===_.toLowerCase())].sort((I,G)=>{switch(g){case"rating":return(G.averageRating||0)-(I.averageRating||0);case"cacao-high":return(G.cacaoPercentage||0)-(I.cacaoPercentage||0);case"cacao-low":return(I.cacaoPercentage||0)-(G.cacaoPercentage||0);case"name":return(I.name||"").localeCompare(G.name||"");default:return 0}}),C=I=>{y(I.target.value)},P=I=>{A(I.target.value)};return o?h.jsx("div",{className:"loading",children:"Searching..."}):d?h.jsxs("div",{className:"error",children:["Error: ",d]}):h.jsx("div",{className:"search-results-page",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"search-header",children:[h.jsx("h1",{children:"Search Results"}),e&&h.jsxs("p",{className:"search-query",children:['Showing results for "',e,'"']})]}),t.length>0?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"search-filters",children:[h.jsxs("div",{className:"filter-group",children:[h.jsx("label",{htmlFor:"type-filter",children:"Filter by:"}),h.jsxs("select",{id:"type-filter",value:_,onChange:P,children:[h.jsx("option",{value:"all",children:"All Types"}),h.jsx("option",{value:"dark",children:"Dark Chocolate"}),h.jsx("option",{value:"milk",children:"Milk Chocolate"}),h.jsx("option",{value:"white",children:"White Chocolate"}),h.jsx("option",{value:"ruby",children:"Ruby Chocolate"})]})]}),h.jsxs("div",{className:"filter-group",children:[h.jsx("label",{htmlFor:"sort-by",children:"Sort by:"}),h.jsxs("select",{id:"sort-by",value:g,onChange:C,children:[h.jsx("option",{value:"relevance",children:"Relevance"}),h.jsx("option",{value:"rating",children:"Highest Rating"}),h.jsx("option",{value:"cacao-high",children:"Cacao % (High to Low)"}),h.jsx("option",{value:"cacao-low",children:"Cacao % (Low to High)"}),h.jsx("option",{value:"name",children:"Name (A-Z)"})]})]})]}),h.jsxs("p",{className:"results-count",children:[k.length," chocolate",k.length!==1?"s":""," found"]}),h.jsx("div",{className:"results-grid",children:k.map(I=>h.jsx(Oc,{chocolate:I},I.id))})]}):h.jsxs("div",{className:"no-results",children:[h.jsx("p",{children:"No chocolates found matching your search."}),h.jsxs("p",{children:["Try different keywords or ",h.jsx(pe,{to:"/",children:"browse all chocolates"}),"."]})]})]})})}const sO=async i=>{try{const e=await br(Yn(st,"users",i));if(!e.exists())return[];const t=e.data().favorites||[];if(t.length===0)return aO();const s=[];for(const o of t){const c=await br(Yn(st,"chocolates",o));c.exists()&&s.push({id:c.id,...c.data()})}return s}catch(e){throw console.error("Error getting favorite chocolates:",e),e}},aO=()=>[{id:"1",name:"Valrhona Guanaja 70%",maker:"Valrhona",type:"Dark",origin:"Blend (South America and Caribbean)",cacaoPercentage:70,averageRating:4.5,ratings:356,imageUrl:"https://placehold.co/300x300?text=Chocolate"},{id:"5",name:"Sea Salt Caramel Crunch",maker:"Coastal Confections",type:"Dark Milk",origin:"Belgium",cacaoPercentage:55,averageRating:4.8,ratings:425,imageUrl:"https://placehold.co/300x300?text=Chocolate"},{id:"3",name:"Dandelion Madagascar",maker:"Dandelion Chocolate",type:"Dark",origin:"Madagascar",cacaoPercentage:70,averageRating:4.7,ratings:178,imageUrl:"https://placehold.co/300x300?text=Chocolate"}],oO=({name:i})=>({Newcomer:h.jsx("svg",{className:"badge-icon newcomer",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,17V16H9V14H13V13H10A1,1 0 0,1 9,12V9A1,1 0 0,1 10,8H11V7H13V8H15V10H11V11H14A1,1 0 0,1 15,12V15A1,1 0 0,1 14,16H13V17H11Z"})}),Reviewer:h.jsx("svg",{className:"badge-icon reviewer",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"})}),Enthusiast:h.jsx("svg",{className:"badge-icon enthusiast",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M16,5V11H21V5M10,11H15V5H10M16,18H21V12H16M10,18H15V12H10M4,18H9V12H4M4,11H9V5H4V11Z"})}),Connoisseur:h.jsx("svg",{className:"badge-icon connoisseur",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,10.84 21.79,9.69 21.39,8.61L19.79,10.21C19.93,10.8 20,11.4 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.6,4 13.2,4.07 13.79,4.21L15.4,2.6C14.31,2.21 13.16,2 12,2M19,2L15,6V7.5L12.45,10.05C12.3,10 12.15,10 12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12C14,11.85 14,11.7 13.95,11.55L16.5,9H18L22,5H19V2M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12H16A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8V6Z"})})})[i]||null;function lO(){var P,I,G,J,X,oe,ce,ye,R,x,N,O,L,B,D,wt,it,$,ae,fe,Ve,M,ie,le,re,ge,Ce,Te,yt,Ye,_n,$n,kn,oi,li,ci,Cr;const{currentUser:i,userProfile:e}=s1(),[t,s]=U.useState("overview"),[o,c]=U.useState([]),[d,m]=U.useState([]),[g,y]=U.useState(!0),_=Es();U.useEffect(()=>{if(!i&&!g){_("/login");return}(async()=>{try{if(y(!0),i){const[et,As]=await Promise.all([qk(i.uid),sO(i.uid)]);c(et),m(As)}}catch(et){console.error("Error loading user data:",et)}finally{y(!1)}})()},[i,_,g]);const A=()=>{if(!e)return{};const Se=o.length,et=o.length,As=Se>0?o.reduce((an,Mt)=>an+Mt.rating,0)/Se:0,Ui={};o.forEach(an=>{const Mt=an.chocolate.type;Ui[Mt]=(Ui[Mt]||0)+1});let Li="None yet",En=0;Object.entries(Ui).forEach(([an,Mt])=>{Mt>En&&(En=Mt,Li=an)});const Ss={};o.forEach(an=>{const Mt=an.chocolate.maker;Ss[Mt]=(Ss[Mt]||0)+1});let Bi="None yet";return En=0,Object.entries(Ss).forEach(([an,Mt])=>{Mt>En&&(En=Mt,Bi=an)}),{totalReviews:Se,totalTasted:et,averageRating:As,favoriteType:Li,favoriteMaker:Bi}},b=()=>e?e.badges||["Newcomer"]:[],k=A(),C=b();return!i||!e?h.jsx("div",{className:"container",children:h.jsxs("div",{className:"profile-not-logged-in",children:[h.jsx("h2",{children:"You need to sign in"}),h.jsx("p",{children:"Please log in or create an account to view your profile."}),h.jsxs("div",{className:"auth-buttons",children:[h.jsx(pe,{to:"/login",className:"auth-button",children:"Log In"}),h.jsx(pe,{to:"/signup",className:"auth-button signup",children:"Sign Up"})]})]})}):h.jsx("div",{className:"profile-page",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"profile-header",children:[h.jsxs("div",{className:"profile-header-main",children:[h.jsx("div",{className:"profile-avatar",children:e.photoURL?h.jsx("img",{src:e.photoURL,alt:e.displayName}):h.jsx("div",{className:"avatar-placeholder",children:e.displayName.charAt(0)})}),h.jsxs("div",{className:"profile-info",children:[h.jsx("h1",{children:e.displayName}),h.jsxs("p",{className:"member-since",children:["Member since ",((P=e.createdAt)==null?void 0:P.toDate().toLocaleDateString())||"Recently"]}),h.jsx("div",{className:"profile-badges",children:C.map(Se=>h.jsxs("div",{className:"badge",children:[h.jsx(oO,{name:Se}),h.jsx("span",{children:Se})]},Se))})]})]}),h.jsx("div",{className:"profile-actions",children:h.jsx("button",{className:"edit-profile-button",children:"Edit Profile"})})]}),h.jsxs("div",{className:"profile-nav",children:[h.jsx("button",{className:`profile-nav-link ${t==="overview"?"active":""}`,onClick:()=>s("overview"),children:"Overview"}),h.jsxs("button",{className:`profile-nav-link ${t==="reviews"?"active":""}`,onClick:()=>s("reviews"),children:["Reviews (",o.length,")"]}),h.jsxs("button",{className:`profile-nav-link ${t==="favorites"?"active":""}`,onClick:()=>s("favorites"),children:["Favorites (",d.length,")"]}),h.jsx("button",{className:`profile-nav-link ${t==="preferences"?"active":""}`,onClick:()=>s("preferences"),children:"Preferences"})]}),h.jsxs("div",{className:"profile-content",children:[t==="overview"&&h.jsxs("div",{className:"overview-tab",children:[h.jsxs("div",{className:"stats-section",children:[h.jsx("h2",{children:"Your Chocolate Journey"}),h.jsxs("div",{className:"stats-grid",children:[h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-value",children:k.totalTasted}),h.jsx("div",{className:"stat-label",children:"Chocolates Tasted"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-value",children:k.totalReviews}),h.jsx("div",{className:"stat-label",children:"Reviews Written"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-value",children:k.averageRating.toFixed(1)}),h.jsx("div",{className:"stat-label",children:"Average Rating"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-value",children:d.length}),h.jsx("div",{className:"stat-label",children:"Favorites"})]})]})]}),h.jsxs("div",{className:"profile-sections",children:[h.jsxs("div",{className:"profile-section",children:[h.jsx("div",{className:"section-header",children:h.jsx("h3",{children:"Your Taste Profile"})}),h.jsxs("div",{className:"taste-profile",children:[h.jsxs("div",{className:"taste-item",children:[h.jsx("span",{className:"taste-label",children:"Favorite Chocolate Type:"}),h.jsx("span",{className:"taste-value",children:k.favoriteType})]}),h.jsxs("div",{className:"taste-item",children:[h.jsx("span",{className:"taste-label",children:"Favorite Maker:"}),h.jsx("span",{className:"taste-value",children:k.favoriteMaker})]}),h.jsxs("div",{className:"taste-item",children:[h.jsx("span",{className:"taste-label",children:"Top Flavor Notes:"}),h.jsx("span",{className:"taste-value",children:((G=(I=e.preferences)==null?void 0:I.flavorPreferences)==null?void 0:G.length)>0?e.preferences.flavorPreferences.join(", "):"Not specified yet"})]})]})]}),h.jsxs("div",{className:"profile-section",children:[h.jsx("div",{className:"section-header",children:h.jsx("h3",{children:"Recent Activity"})}),o.length>0?h.jsxs("div",{className:"recent-reviews",children:[o.slice(0,3).map(Se=>h.jsxs("div",{className:"recent-review",children:[h.jsxs(pe,{to:`/chocolate/${Se.chocolate.id}`,className:"review-chocolate",children:[h.jsx("img",{src:Se.chocolate.imageUrl,alt:Se.chocolate.name}),h.jsxs("div",{className:"review-chocolate-info",children:[h.jsx("h4",{children:Se.chocolate.name}),h.jsx("p",{children:Se.chocolate.maker})]})]}),h.jsxs("div",{className:"review-content",children:[h.jsxs("div",{className:"review-rating",children:[[1,2,3,4,5].map(et=>h.jsx("span",{className:`star ${et<=Se.rating?"filled":""}`,children:""},et)),h.jsx("span",{className:"review-date",children:new Date(Se.createdAt.toDate()).toLocaleDateString()})]}),h.jsxs("p",{className:"review-text",children:[Se.text.substring(0,120),"..."]})]})]},Se.id)),h.jsx(pe,{to:"#",onClick:()=>s("reviews"),className:"see-all-link",children:"See all reviews"})]}):h.jsxs("div",{className:"empty-state",children:[h.jsx("p",{children:"You haven't written any reviews yet."}),h.jsx(pe,{to:"/",className:"action-button",children:"Discover Chocolates to Review"})]})]})]}),h.jsxs("div",{className:"recommendations-section",children:[h.jsx("div",{className:"section-header",children:h.jsx("h3",{children:"Recommended For You"})}),h.jsx("div",{className:"recommendation-message",children:h.jsx("p",{children:"Keep reviewing chocolates to get personalized recommendations based on your taste preferences!"})})]})]}),t==="reviews"&&h.jsxs("div",{className:"reviews-tab",children:[h.jsx("div",{className:"section-header",children:h.jsx("h2",{children:"Your Reviews"})}),o.length>0?h.jsx("div",{className:"reviews-list",children:o.map(Se=>h.jsxs("div",{className:"review-card",children:[h.jsxs("div",{className:"review-card-header",children:[h.jsxs(pe,{to:`/chocolate/${Se.chocolate.id}`,className:"review-chocolate",children:[h.jsx("img",{src:Se.chocolate.imageUrl,alt:Se.chocolate.name}),h.jsxs("div",{className:"review-chocolate-info",children:[h.jsx("h3",{children:Se.chocolate.name}),h.jsx("p",{children:Se.chocolate.maker})]})]}),h.jsxs("div",{className:"review-meta",children:[h.jsx("div",{className:"review-rating-large",children:[1,2,3,4,5].map(et=>h.jsx("span",{className:`star ${et<=Se.rating?"filled":""}`,children:""},et))}),h.jsx("div",{className:"review-date",children:new Date(Se.createdAt.toDate()).toLocaleDateString()})]})]}),h.jsx("div",{className:"review-card-body",children:h.jsx("p",{className:"review-text",children:Se.text})}),h.jsxs("div",{className:"review-card-actions",children:[h.jsx("button",{className:"edit-review",children:"Edit"}),h.jsx("button",{className:"delete-review",children:"Delete"})]})]},Se.id))}):h.jsxs("div",{className:"empty-state",children:[h.jsx("p",{children:"You haven't written any reviews yet."}),h.jsx(pe,{to:"/",className:"action-button",children:"Discover Chocolates to Review"})]})]}),t==="favorites"&&h.jsxs("div",{className:"favorites-tab",children:[h.jsx("div",{className:"section-header",children:h.jsx("h2",{children:"Your Favorite Chocolates"})}),d.length>0?h.jsx("div",{className:"favorites-grid",children:d.map(Se=>h.jsxs("div",{className:"favorite-card",children:[h.jsxs(pe,{to:`/chocolate/${Se.id}`,className:"favorite-link",children:[h.jsx("div",{className:"favorite-image",children:h.jsx("img",{src:Se.imageUrl,alt:Se.name})}),h.jsxs("div",{className:"favorite-info",children:[h.jsx("h3",{children:Se.name}),h.jsx("p",{children:Se.maker}),h.jsxs("div",{className:"favorite-details",children:[h.jsx("span",{children:Se.type}),h.jsxs("span",{children:[Se.cacaoPercentage,"% Cacao"]})]}),h.jsxs("div",{className:"favorite-rating",children:[[1,2,3,4,5].map(et=>h.jsx("span",{className:`star ${et<=Se.averageRating?"filled":""}`,children:""},et)),h.jsxs("span",{className:"rating-count",children:["(",Se.ratings,")"]})]})]})]}),h.jsx("button",{className:"remove-favorite",children:"Remove"})]},Se.id))}):h.jsxs("div",{className:"empty-state",children:[h.jsx("p",{children:"You haven't added any favorites yet."}),h.jsx(pe,{to:"/",className:"action-button",children:"Find Chocolates to Love"})]})]}),t==="preferences"&&h.jsxs("div",{className:"preferences-tab",children:[h.jsx("div",{className:"section-header",children:h.jsx("h2",{children:"Taste Preferences"})}),h.jsxs("form",{className:"preferences-form",children:[h.jsxs("div",{className:"preference-section",children:[h.jsx("h3",{children:"Chocolate Types You Enjoy"}),h.jsxs("div",{className:"checkbox-group",children:[h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(X=(J=e.preferences)==null?void 0:J.favoriteTypes)==null?void 0:X.includes("Dark"),onChange:()=>{}}),"Dark Chocolate"]}),h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(ce=(oe=e.preferences)==null?void 0:oe.favoriteTypes)==null?void 0:ce.includes("Milk"),onChange:()=>{}}),"Milk Chocolate"]}),h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(R=(ye=e.preferences)==null?void 0:ye.favoriteTypes)==null?void 0:R.includes("White"),onChange:()=>{}}),"White Chocolate"]}),h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(N=(x=e.preferences)==null?void 0:x.favoriteTypes)==null?void 0:N.includes("Single Origin"),onChange:()=>{}}),"Single Origin"]}),h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(L=(O=e.preferences)==null?void 0:O.favoriteTypes)==null?void 0:L.includes("Flavored"),onChange:()=>{}}),"Flavored/Infused"]})]})]}),h.jsxs("div",{className:"preference-section",children:[h.jsx("h3",{children:"Flavor Notes You Prefer"}),h.jsxs("div",{className:"checkbox-group",children:[h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(D=(B=e.preferences)==null?void 0:B.flavorPreferences)==null?void 0:D.includes("Fruity"),onChange:()=>{}}),"Fruity"]}),h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(it=(wt=e.preferences)==null?void 0:wt.flavorPreferences)==null?void 0:it.includes("Nutty"),onChange:()=>{}}),"Nutty"]}),h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(ae=($=e.preferences)==null?void 0:$.flavorPreferences)==null?void 0:ae.includes("Floral"),onChange:()=>{}}),"Floral"]}),h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(Ve=(fe=e.preferences)==null?void 0:fe.flavorPreferences)==null?void 0:Ve.includes("Spicy"),onChange:()=>{}}),"Spicy"]}),h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(ie=(M=e.preferences)==null?void 0:M.flavorPreferences)==null?void 0:ie.includes("Earthy"),onChange:()=>{}}),"Earthy"]}),h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(re=(le=e.preferences)==null?void 0:le.flavorPreferences)==null?void 0:re.includes("Caramel"),onChange:()=>{}}),"Caramel"]})]})]}),h.jsxs("div",{className:"preference-section",children:[h.jsx("h3",{children:"Dietary Preferences"}),h.jsxs("div",{className:"checkbox-group",children:[h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(Ce=(ge=e.preferences)==null?void 0:ge.dietaryRestrictions)==null?void 0:Ce.includes("Dairy-Free"),onChange:()=>{}}),"Dairy-Free"]}),h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(yt=(Te=e.preferences)==null?void 0:Te.dietaryRestrictions)==null?void 0:yt.includes("Vegan"),onChange:()=>{}}),"Vegan"]}),h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(_n=(Ye=e.preferences)==null?void 0:Ye.dietaryRestrictions)==null?void 0:_n.includes("Gluten-Free"),onChange:()=>{}}),"Gluten-Free"]}),h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(kn=($n=e.preferences)==null?void 0:$n.dietaryRestrictions)==null?void 0:kn.includes("Nut-Free"),onChange:()=>{}}),"Nut-Free"]}),h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(li=(oi=e.preferences)==null?void 0:oi.dietaryRestrictions)==null?void 0:li.includes("Sugar-Free"),onChange:()=>{}}),"Sugar-Free"]}),h.jsxs("label",{className:"checkbox-label",children:[h.jsx("input",{type:"checkbox",checked:(Cr=(ci=e.preferences)==null?void 0:ci.dietaryRestrictions)==null?void 0:Cr.includes("Fair Trade"),onChange:()=>{}}),"Fair Trade"]})]})]}),h.jsx("button",{type:"submit",className:"save-preferences",children:"Save Preferences"})]})]})]})]})})}function cO(){const[i,e]=U.useState([]),[t,s]=U.useState([]),[o,c]=U.useState([]),[d,m]=U.useState(!0),[g,y]=U.useState(null),[_,A]=U.useState({maker:"",type:"",origin:"",tagId:"",minCacao:"",maxCacao:""}),[b,k]=U.useState("rating"),C=(R,x)=>{const N=R.map(O=>O[x]).filter(O=>O&&O.trim()!=="").map(O=>typeof O=="string"?O.trim():O);return[...new Set(N)].sort()};U.useEffect(()=>{(async()=>{try{m(!0);const[x,N]=await Promise.all([e1(),Uk()]);e(x),s(x),c(N),m(!1)}catch(x){y(x.message),m(!1)}})()},[]),U.useEffect(()=>{let R=[...i];_.maker&&(R=R.filter(x=>x.maker&&x.maker.toLowerCase().includes(_.maker.toLowerCase()))),_.type&&(R=R.filter(x=>x.type&&x.type.toLowerCase()===_.type.toLowerCase())),_.origin&&(R=R.filter(x=>x.origin&&x.origin.toLowerCase().includes(_.origin.toLowerCase()))),_.tagId&&(R=R.filter(x=>x.tagIds&&x.tagIds.includes(_.tagId))),_.minCacao&&(R=R.filter(x=>x.cacaoPercentage>=parseInt(_.minCacao))),_.maxCacao&&(R=R.filter(x=>x.cacaoPercentage<=parseInt(_.maxCacao))),s(R)},[_,i]);const P=()=>[...t].sort((R,x)=>{switch(b){case"rating":return(x.averageRating||0)-(R.averageRating||0);case"popularity":return(x.reviewCount||0)-(R.reviewCount||0);case"cacao-high":return(x.cacaoPercentage||0)-(R.cacaoPercentage||0);case"cacao-low":return(R.cacaoPercentage||0)-(x.cacaoPercentage||0);case"name":return R.name.localeCompare(x.name);case"maker":return(R.maker||"").localeCompare(x.maker||"");default:return 0}}),I=(R,x)=>{A(N=>({...N,[R]:x}))},G=()=>{A({maker:"",type:"",origin:"",tagId:"",minCacao:"",maxCacao:""})},J=Object.values(_).some(R=>R!=="");if(d)return h.jsx("div",{className:"loading full-width",children:"Loading chocolates..."});if(g)return h.jsxs("div",{className:"error full-width",children:["Error: ",g]});const X=P(),oe=C(i,"maker"),ce=C(i,"type"),ye=C(i,"origin");return h.jsx("div",{className:"browse-page full-page",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"browse-header",children:[h.jsx("h1",{children:"Browse All Chocolates"}),h.jsxs("p",{className:"browse-description",children:["Discover chocolates from our collection of ",i.length," chocolates.",J&&` Showing ${t.length} results.`]})]}),h.jsxs("div",{className:"filter-section",children:[h.jsxs("div",{className:"filter-header",children:[h.jsx("h2",{children:"Filter & Sort"}),J&&h.jsx("button",{onClick:G,className:"clear-filters-btn",children:"Clear All Filters"})]}),h.jsxs("div",{className:"filters-grid",children:[h.jsxs("div",{className:"filter-group",children:[h.jsx("label",{htmlFor:"maker-filter",children:"Maker/Brand:"}),h.jsxs("select",{id:"maker-filter",value:_.maker,onChange:R=>I("maker",R.target.value),children:[h.jsx("option",{value:"",children:"All Makers"}),oe.map(R=>h.jsx("option",{value:R,children:R},R))]})]}),h.jsxs("div",{className:"filter-group",children:[h.jsx("label",{htmlFor:"type-filter",children:"Chocolate Type:"}),h.jsxs("select",{id:"type-filter",value:_.type,onChange:R=>I("type",R.target.value),children:[h.jsx("option",{value:"",children:"All Types"}),ce.map(R=>h.jsx("option",{value:R,children:R},R))]})]}),h.jsxs("div",{className:"filter-group",children:[h.jsx("label",{htmlFor:"origin-filter",children:"Origin:"}),h.jsxs("select",{id:"origin-filter",value:_.origin,onChange:R=>I("origin",R.target.value),children:[h.jsx("option",{value:"",children:"All Origins"}),ye.map(R=>h.jsx("option",{value:R,children:R},R))]})]}),h.jsxs("div",{className:"filter-group",children:[h.jsx("label",{htmlFor:"tag-filter",children:"Special Tags:"}),h.jsxs("select",{id:"tag-filter",value:_.tagId,onChange:R=>I("tagId",R.target.value),children:[h.jsx("option",{value:"",children:"All Tags"}),o.map(R=>h.jsx("option",{value:R.id,children:R.name},R.id))]})]}),h.jsxs("div",{className:"filter-group cacao-range",children:[h.jsx("label",{children:"Cacao Percentage:"}),h.jsxs("div",{className:"range-inputs",children:[h.jsx("input",{type:"number",placeholder:"Min %",min:"0",max:"100",value:_.minCacao,onChange:R=>I("minCacao",R.target.value)}),h.jsx("span",{children:"to"}),h.jsx("input",{type:"number",placeholder:"Max %",min:"0",max:"100",value:_.maxCacao,onChange:R=>I("maxCacao",R.target.value)})]})]}),h.jsxs("div",{className:"filter-group",children:[h.jsx("label",{htmlFor:"sort-option",children:"Sort by:"}),h.jsxs("select",{id:"sort-option",value:b,onChange:R=>k(R.target.value),children:[h.jsx("option",{value:"rating",children:"Highest Rated"}),h.jsx("option",{value:"popularity",children:"Most Popular"}),h.jsx("option",{value:"cacao-high",children:"Cacao % (High to Low)"}),h.jsx("option",{value:"cacao-low",children:"Cacao % (Low to High)"}),h.jsx("option",{value:"name",children:"Name (A-Z)"}),h.jsx("option",{value:"maker",children:"Maker (A-Z)"})]})]})]})]}),X.length>0?h.jsx("div",{className:"chocolate-grid",children:X.map(R=>h.jsx(Oc,{chocolate:R},R.id))}):h.jsxs("div",{className:"no-results",children:[h.jsx("h3",{children:"No chocolates found"}),h.jsx("p",{children:"Try adjusting your filters or browse all chocolates."}),J&&h.jsx("button",{onClick:G,className:"btn btn-primary",children:"Clear Filters"})]})]})})}function uO(){const[i,e]=U.useState(!1),[t,s]=U.useState(""),[o,c]=U.useState(""),[d,m]=U.useState(!1),g=U.useRef(null),y=Es(),_=async b=>{if(b.preventDefault(),!!t)try{m(!0),c(""),y(`/search?query=${t}`)}catch{c("Could not find a chocolate with this barcode. Please try another.")}finally{m(!1)}},A=b=>{b.target.files[0]&&(m(!0),setTimeout(()=>{s("3017620422003"),m(!1)},1500))};return h.jsxs("div",{className:"barcode-scanner",children:[h.jsx("h2",{children:"Scan Chocolate Barcode"}),h.jsxs("div",{className:"scan-options",children:[h.jsxs("div",{className:"manual-entry",children:[h.jsx("h3",{children:"Enter Barcode Manually"}),h.jsxs("form",{onSubmit:_,children:[h.jsx("input",{type:"text",value:t,onChange:b=>s(b.target.value),placeholder:"Enter barcode number",required:!0}),h.jsx("button",{type:"submit",disabled:d||!t,children:d?"Searching...":"Find Chocolate"})]})]}),h.jsxs("div",{className:"scan-image",children:[h.jsx("h3",{children:"Scan Barcode Image"}),h.jsx("p",{children:"Upload an image of a barcode to scan"}),h.jsx("input",{type:"file",accept:"image/*",onChange:A,ref:g,style:{display:"none"}}),h.jsx("button",{onClick:()=>g.current.click(),disabled:d,children:d?"Processing...":"Upload Barcode Image"}),h.jsx("p",{className:"hint",children:"For a mobile app, we would use the device camera"})]})]}),o&&h.jsx("div",{className:"error-message",children:o})]})}function hO(){return h.jsx("div",{className:"barcode-search-page",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"page-header",children:[h.jsx("h1",{children:"Find Chocolates by Barcode"}),h.jsx("p",{className:"page-description",children:"Scan or enter a barcode to quickly find information about a chocolate product."})]}),h.jsx(uO,{}),h.jsxs("div",{className:"info-section",children:[h.jsx("h2",{children:"About Barcode Scanning"}),h.jsx("p",{children:"Our barcode scanning feature allows you to quickly look up chocolates by their barcode. We use the Open Food Facts database to find products that might not be in our system yet."}),h.jsx("p",{children:"In the future, our mobile app will allow you to scan barcodes directly with your phone's camera!"})]})]})})}function dO(){const{categorySlug:i}=vp(),[e,t]=U.useState([]),[s,o]=U.useState(!0),[c,d]=U.useState(null),[m,g]=U.useState("rating"),y=P=>P==="origin"?"Single Origin":P==="artisan"?"Artisan Craft":P.charAt(0).toUpperCase()+P.slice(1)+" Chocolate",_=P=>{switch(P){case"dark":return"Bold, intense flavors with higher cacao percentages, typically ranging from 55% to 100%.";case"milk":return"Smooth and creamy with a balance of cocoa and dairy notes, offering a more approachable chocolate experience.";case"white":return"Made with cocoa butter, sugar, and milk, without cocoa solids, creating a rich, sweet flavor profile.";case"origin":return"Chocolates made from beans sourced from a single region, showcasing the unique terroir of specific locations.";case"artisan":return"Small-batch chocolates crafted with meticulous attention to detail, often using traditional methods and premium ingredients.";default:return"Explore our chocolate collection"}},A=P=>{g(P.target.value)},b=P=>({dark:"/category-dark.jpg",milk:"/category-milk.jpg",white:"/category-white.jpg",origin:"/category-origin.jpg",artisan:"/category-artisan.jpg"})[P]||"/category-default.jpg";U.useEffect(()=>{(async()=>{try{o(!0);let I;i==="origin"?I={field:"tagIds",operator:"array-contains",value:"single-origin"}:i==="artisan"?I={field:"tagIds",operator:"array-contains",value:"bean-to-bar"}:I={field:"type",operator:"==",value:i.charAt(0).toUpperCase()+i.slice(1)};const G=await zk(I);t(G),o(!1)}catch(I){console.error("Error fetching category data:",I),d(I.message),o(!1)}})()},[i]);const k=()=>[...e].sort((P,I)=>{switch(m){case"rating":return(I.averageRating||0)-(P.averageRating||0);case"popularity":return(I.ratings||0)-(P.ratings||0);case"cacao-high":return(I.cacaoPercentage||0)-(P.cacaoPercentage||0);case"cacao-low":return(P.cacaoPercentage||0)-(I.cacaoPercentage||0);case"name":return P.name.localeCompare(I.name);default:return 0}});if(s)return h.jsxs("div",{className:"loading-container",children:[h.jsx("div",{className:"loading-spinner"}),h.jsxs("p",{children:["Loading ",y(i),"..."]})]});if(c)return h.jsxs("div",{className:"error-container",children:[h.jsxs("p",{children:["Error: ",c]}),h.jsx(pe,{to:"/",className:"btn btn-primary",children:"Return Home"})]});const C=k();return h.jsxs("div",{className:"category-page",children:[h.jsx("div",{className:"category-hero",style:{backgroundImage:`linear-gradient(rgba(58, 42, 31, 0.7), rgba(58, 42, 31, 0.7)), url(${b(i)})`},children:h.jsxs("div",{className:"container",children:[h.jsx("h1",{children:y(i)}),h.jsx("p",{className:"category-description",children:_(i)})]})}),h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"category-controls",children:[h.jsxs("div",{className:"results-count",children:[e.length," ",e.length===1?"chocolate":"chocolates"," found"]}),h.jsxs("div",{className:"sort-control",children:[h.jsx("label",{htmlFor:"sort-by",children:"Sort by:"}),h.jsxs("select",{id:"sort-by",value:m,onChange:A,children:[h.jsx("option",{value:"rating",children:"Highest Rated"}),h.jsx("option",{value:"popularity",children:"Most Popular"}),h.jsx("option",{value:"cacao-high",children:"Cacao % (High to Low)"}),h.jsx("option",{value:"cacao-low",children:"Cacao % (Low to High)"}),h.jsx("option",{value:"name",children:"Name (A-Z)"})]})]})]}),C.length>0?h.jsx("div",{className:"chocolates-grid",children:C.map(P=>h.jsx(Oc,{chocolate:P},P.id))}):h.jsxs("div",{className:"no-chocolates",children:[h.jsx("p",{children:"No chocolates found in this category."}),h.jsx(pe,{to:"/browse",className:"btn btn-primary",children:"Browse All Chocolates"})]})]})]})}function UE(){const{makerName:i}=vp(),[e]=tT(),t=e.get("maker"),s=i||t,[o,c]=U.useState([]),[d,m]=U.useState(!0),[g,y]=U.useState(null),[_,A]=U.useState("rating");U.useEffect(()=>{(async()=>{if(s)try{m(!0);const I=(await t1(s)).filter(G=>G.maker&&G.maker.toLowerCase()===s.toLowerCase());c(I),m(!1)}catch(P){console.error("Error fetching maker chocolates:",P),y(P.message),m(!1)}})()},[s]);const b=()=>[...o].sort((C,P)=>{switch(_){case"rating":return(P.averageRating||0)-(C.averageRating||0);case"popularity":return(P.ratings||0)-(C.ratings||0);case"cacao-high":return(P.cacaoPercentage||0)-(C.cacaoPercentage||0);case"cacao-low":return(C.cacaoPercentage||0)-(P.cacaoPercentage||0);case"name":return C.name.localeCompare(P.name);default:return 0}});if(d)return h.jsxs("div",{className:"loading-container",children:[h.jsx("div",{className:"loading-spinner"}),h.jsxs("p",{children:["Loading chocolates by ",s,"..."]})]});if(g)return h.jsx("div",{className:"error-container",children:h.jsxs("p",{children:["Error: ",g]})});const k=b();return h.jsx("div",{className:"maker-page",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"maker-header",children:[h.jsxs("h1",{children:["Chocolates by ",s]}),h.jsxs("p",{className:"maker-description",children:["Explore all chocolates made by ",s," in our collection"]})]}),h.jsxs("div",{className:"maker-controls",children:[h.jsxs("div",{className:"results-count",children:[o.length," ",o.length===1?"chocolate":"chocolates"," found"]}),h.jsxs("div",{className:"sort-control",children:[h.jsx("label",{htmlFor:"sort-by",children:"Sort by:"}),h.jsxs("select",{id:"sort-by",value:_,onChange:C=>A(C.target.value),children:[h.jsx("option",{value:"rating",children:"Highest Rated"}),h.jsx("option",{value:"popularity",children:"Most Popular"}),h.jsx("option",{value:"cacao-high",children:"Cacao % (High to Low)"}),h.jsx("option",{value:"cacao-low",children:"Cacao % (Low to High)"}),h.jsx("option",{value:"name",children:"Name (A-Z)"})]})]})]}),k.length>0?h.jsx("div",{className:"chocolates-grid",children:k.map(C=>h.jsx(Oc,{chocolate:C},C.id))}):h.jsxs("div",{className:"no-chocolates",children:[h.jsxs("p",{children:["No chocolates found for ",s,"."]}),h.jsx("p",{children:"This might be due to variations in how the maker name is stored in our database."})]})]})})}function fO(){const[i,e]=U.useState(""),[t,s]=U.useState(""),[o,c]=U.useState(""),[d,m]=U.useState(""),[g,y]=U.useState(""),[_,A]=U.useState(!1),b=Es(),k=()=>(y(""),i.trim()?t.trim()?o.length<6?(y("Password must be at least 6 characters"),!1):o!==d?(y("Passwords do not match"),!1):!0:(y("Please enter your email"),!1):(y("Please enter your name"),!1)),C=async I=>{if(I.preventDefault(),!!k())try{A(!0),await Wk(t,o,i),b("/profile")}catch(G){y(G.message)}finally{A(!1)}},P=async()=>{try{A(!0),await n1(),b("/profile")}catch(I){y(I.message)}finally{A(!1)}};return h.jsxs("div",{className:"auth-form-container",children:[h.jsx("h2",{children:"Join the Chocolate Community"}),h.jsx("p",{className:"auth-subtitle",children:"Sign up to review chocolates, track favorites, and get personalized recommendations."}),g&&h.jsx("div",{className:"auth-error",children:g}),h.jsxs("form",{onSubmit:C,className:"auth-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"displayName",children:"Name"}),h.jsx("input",{type:"text",id:"displayName",value:i,onChange:I=>e(I.target.value),required:!0})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"email",children:"Email"}),h.jsx("input",{type:"email",id:"email",value:t,onChange:I=>s(I.target.value),required:!0})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"password",children:"Password"}),h.jsx("input",{type:"password",id:"password",value:o,onChange:I=>c(I.target.value),required:!0,minLength:"6"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),h.jsx("input",{type:"password",id:"confirmPassword",value:d,onChange:I=>m(I.target.value),required:!0})]}),h.jsx("button",{type:"submit",className:"auth-button",disabled:_,children:_?"Creating Account...":"Sign Up"})]}),h.jsx("div",{className:"auth-divider",children:h.jsx("span",{children:"or"})}),h.jsxs("div",{className:"social-buttons",children:[h.jsxs("button",{type:"button",className:"social-button google",onClick:handleGoogleSignUp,disabled:_,children:[h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12.545 10.239v3.821h5.445c-0.712 2.315-2.647 3.972-5.445 3.972-3.332 0-6.033-2.701-6.033-6.032s2.701-6.032 6.033-6.032c1.498 0 2.866 0.549 3.921 1.453l2.814-2.814c-1.79-1.677-4.184-2.702-6.735-2.702-5.522 0-10 4.478-10 10s4.478 10 10 10c8.396 0 10.201-7.835 9.412-11.566l-9.412-0.1z"})}),"Continue with Google"]}),h.jsxs("button",{type:"button",className:"social-button facebook",onClick:P,disabled:_,children:[h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M13.397 20.997v-8.196h2.765l0.411-3.209h-3.176v-2.044c0-0.926 0.258-1.559 1.587-1.559h1.684v-2.861c-0.82-0.088-1.643-0.13-2.467-0.131-2.446 0-4.13 1.495-4.13 4.231v2.355h-2.777v3.209h2.777v8.202c2.379 0.253 4.268 0.13 3.326-0.003z"})}),"Continue with Facebook"]})]}),h.jsxs("p",{className:"auth-link",children:["Already have an account? ",h.jsx(pe,{to:"/login",children:"Log in"})]})]})}function mO(){const[i,e]=U.useState(""),[t,s]=U.useState(""),[o,c]=U.useState(""),[d,m]=U.useState(""),[g,y]=U.useState(!1),_=Es(),A=async P=>{P.preventDefault();try{y(!0),await Zk(i,t),_("/profile")}catch{c("Invalid email or password")}finally{y(!1)}},b=async()=>{try{y(!0),c("");const P=await Jk();console.log("Google login successful:",P==null?void 0:P.uid),_("/profile")}catch(P){console.error("Google login error:",P),c(P.message||"Failed to log in with Google")}finally{y(!1)}},k=async()=>{try{y(!0),await n1(),_("/profile")}catch(P){c(P.message)}finally{y(!1)}},C=async()=>{if(!i){c("Please enter your email address");return}try{await eO(i),m("Password reset email sent. Check your inbox."),c("")}catch{c("Error sending reset email. Please try again.")}};return h.jsxs("div",{className:"auth-form-container",children:[h.jsx("h2",{children:"Welcome Back"}),h.jsx("p",{className:"auth-subtitle",children:"Log in to continue your chocolate journey"}),o&&h.jsx("div",{className:"auth-error",children:o}),d&&h.jsx("div",{className:"auth-success",children:d}),h.jsxs("form",{onSubmit:A,className:"auth-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"email",children:"Email"}),h.jsx("input",{type:"email",id:"email",value:i,onChange:P=>e(P.target.value),required:!0})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"password",children:"Password"}),h.jsx("input",{type:"password",id:"password",value:t,onChange:P=>s(P.target.value),required:!0})]}),h.jsx("div",{className:"forgot-password",children:h.jsx("button",{type:"button",onClick:C,className:"reset-button",children:"Forgot password?"})}),h.jsx("button",{type:"submit",className:"auth-button",disabled:g,children:g?"Logging in...":"Log In"})]}),h.jsx("div",{className:"auth-divider",children:h.jsx("span",{children:"or"})}),h.jsxs("div",{className:"social-buttons",children:[h.jsxs("button",{type:"button",className:"social-button google",onClick:b,disabled:g,children:[h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12.545 10.239v3.821h5.445c-0.712 2.315-2.647 3.972-5.445 3.972-3.332 0-6.033-2.701-6.033-6.032s2.701-6.032 6.033-6.032c1.498 0 2.866 0.549 3.921 1.453l2.814-2.814c-1.79-1.677-4.184-2.702-6.735-2.702-5.522 0-10 4.478-10 10s4.478 10 10 10c8.396 0 10.201-7.835 9.412-11.566l-9.412-0.1z"})}),"Continue with Google"]}),h.jsxs("button",{type:"button",className:"social-button facebook",onClick:k,disabled:g,children:[h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M13.397 20.997v-8.196h2.765l0.411-3.209h-3.176v-2.044c0-0.926 0.258-1.559 1.587-1.559h1.684v-2.861c-0.82-0.088-1.643-0.13-2.467-0.131-2.446 0-4.13 1.495-4.13 4.231v2.355h-2.777v3.209h2.777v8.202c2.379 0.253 4.268 0.13 3.326-0.003z"})}),"Continue with Facebook"]})]}),h.jsxs("p",{className:"auth-link",children:["Don't have an account? ",h.jsx(pe,{to:"/signup",children:"Sign up"})]})]})}function pO(){const[i,e]=U.useState(""),[t,s]=U.useState(!1),o=U.useRef(null),c=Es(),m=Sr().pathname==="/",g=_=>{_.preventDefault(),i.trim()&&(c(`/search?query=${encodeURIComponent(i)}`),e(""))},y=()=>{s(!t)};return U.useEffect(()=>{function _(A){o.current&&!o.current.contains(A.target)&&s(!1)}return document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[o]),h.jsx("header",{className:"header",children:h.jsxs("div",{className:"container",children:[h.jsx(pe,{to:"/",className:"logo",children:h.jsx("h1",{children:"Chocly"})}),!m&&h.jsxs("form",{className:"search-form",onSubmit:g,children:[h.jsx("input",{type:"text",placeholder:"Search chocolates, makers...",value:i,onChange:_=>e(_.target.value)}),h.jsx("button",{type:"submit",children:"Search"})]}),h.jsxs("div",{className:"nav-container",ref:o,children:[h.jsxs("button",{className:"menu-toggle",onClick:y,children:["Menu",h.jsxs("span",{className:`menu-icon ${t?"open":""}`,children:[h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{})]})]}),h.jsxs("nav",{className:`nav ${t?"open":""}`,children:[h.jsxs("div",{className:"nav-section",children:[h.jsx("h3",{children:"Browse"}),h.jsx(pe,{to:"/",onClick:()=>s(!1),children:"Home"}),h.jsx(pe,{to:"/browse",onClick:()=>s(!1),children:"All Chocolates"}),h.jsx(pe,{to:"/barcode",onClick:()=>s(!1),children:"Barcode Search"}),h.jsx(pe,{to:"/category/dark",onClick:()=>s(!1),children:"Dark Chocolate"}),h.jsx(pe,{to:"/category/milk",onClick:()=>s(!1),children:"Milk Chocolate"}),h.jsx(pe,{to:"/category/white",onClick:()=>s(!1),children:"White Chocolate"})]}),h.jsxs("div",{className:"nav-section",children:[h.jsx("h3",{children:"Account"}),h.jsx(pe,{to:"/profile",onClick:()=>s(!1),children:"My Profile"}),h.jsx(pe,{to:"/favorites",onClick:()=>s(!1),children:"My Favorites"})]}),h.jsxs("div",{className:"nav-section",children:[h.jsx("h3",{children:"About"}),h.jsx(pe,{to:"/about",onClick:()=>s(!1),children:"About Us"}),h.jsx(pe,{to:"/contact",onClick:()=>s(!1),children:"Contact"})]})]})]})]})})}function gO(){const i=new Date().getFullYear();return h.jsx("footer",{className:"footer",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"footer-content",children:[h.jsxs("div",{className:"footer-logo",children:[h.jsx(pe,{to:"/",className:"logo-link",children:h.jsx("h2",{children:"Chocly"})}),h.jsx("p",{className:"tagline",children:"Discover better chocolate."})]}),h.jsxs("div",{className:"footer-links",children:[h.jsxs("div",{className:"footer-links-column",children:[h.jsx("h3",{children:"Explore"}),h.jsxs("ul",{children:[h.jsx("li",{children:h.jsx(pe,{to:"/browse",children:"All Chocolates"})}),h.jsx("li",{children:h.jsx(pe,{to:"/category/dark",children:"Dark Chocolate"})}),h.jsx("li",{children:h.jsx(pe,{to:"/category/milk",children:"Milk Chocolate"})}),h.jsx("li",{children:h.jsx(pe,{to:"/category/origin",children:"Single Origin"})})]})]}),h.jsxs("div",{className:"footer-links-column",children:[h.jsx("h3",{children:"Account"}),h.jsxs("ul",{children:[h.jsx("li",{children:h.jsx(pe,{to:"/signup",children:"Sign Up"})}),h.jsx("li",{children:h.jsx(pe,{to:"/login",children:"Log In"})}),h.jsx("li",{children:h.jsx(pe,{to:"/profile",children:"My Profile"})}),h.jsx("li",{children:h.jsx(pe,{to:"/favorites",children:"My Favorites"})})]})]}),h.jsxs("div",{className:"footer-links-column",children:[h.jsx("h3",{children:"Company"}),h.jsxs("ul",{children:[h.jsx("li",{children:h.jsx(pe,{to:"/about",children:"About Us"})}),h.jsx("li",{children:h.jsx(pe,{to:"/contact",children:"Contact"})}),h.jsx("li",{children:h.jsx(pe,{to:"/privacy-policy",children:"Privacy Policy"})}),h.jsx("li",{children:h.jsx(pe,{to:"/terms-of-service",children:"Terms of Service"})})]})]})]})]}),h.jsxs("div",{className:"footer-bottom",children:[h.jsxs("p",{className:"copyright",children:[" ",i," Chocly. All rights reserved."]}),h.jsxs("div",{className:"social-icons",children:[h.jsx("a",{href:"#",className:"social-icon instagram","aria-label":"Instagram",children:h.jsx("span",{className:"sr-only",children:"Instagram"})}),h.jsx("a",{href:"#",className:"social-icon twitter","aria-label":"Twitter",children:h.jsx("span",{className:"sr-only",children:"Twitter"})}),h.jsx("a",{href:"#",className:"social-icon facebook","aria-label":"Facebook",children:h.jsx("span",{className:"sr-only",children:"Facebook"})})]})]})]})})}function yO(){const[i,e]=U.useState([]),[t,s]=U.useState(!0),[o,c]=U.useState({});U.useEffect(()=>{(async()=>{try{const g=await e1();g.sort((y,_)=>y.name.localeCompare(_.name)),e(g)}catch(g){console.error("Error fetching chocolates:",g)}finally{s(!1)}})()},[]);const d=async(m,g)=>{c(y=>({...y,[m]:"uploading"}));try{await Bk(m,g),c(y=>({...y,[m]:"success"})),e(y=>y.map(_=>_.id===m?{..._,imageUrl:URL.createObjectURL(g)}:_))}catch(y){console.error("Error uploading image:",y),c(_=>({..._,[m]:"error"}))}};return h.jsx("div",{className:"batch-upload-page",children:h.jsxs("div",{className:"container",children:[h.jsx("h1",{children:"Batch Image Upload"}),h.jsx("p",{className:"page-description",children:"Upload label images for multiple chocolates"}),t?h.jsx("div",{className:"loading",children:"Loading chocolates..."}):h.jsx("div",{className:"chocolates-grid",children:i.map(m=>h.jsxs("div",{className:"chocolate-upload-card",children:[h.jsxs("div",{className:"chocolate-info",children:[h.jsx("h3",{children:m.name}),h.jsx("p",{children:m.maker})]}),h.jsx("div",{className:"chocolate-image-container",children:m.imageUrl?h.jsx("img",{src:m.imageUrl,alt:m.name,className:"chocolate-image"}):h.jsx("div",{className:"no-image-placeholder",children:"No label image"})}),h.jsxs("div",{className:"upload-controls",children:[h.jsxs("label",{className:`upload-button ${o[m.id]==="uploading"?"disabled":""}`,children:[m.imageUrl?"Change Image":"Upload Image",h.jsx("input",{type:"file",accept:"image/*",disabled:o[m.id]==="uploading",style:{display:"none"},onChange:g=>{g.target.files&&g.target.files[0]&&d(m.id,g.target.files[0])}})]}),o[m.id]==="uploading"&&h.jsx("span",{className:"status-text uploading",children:"Uploading..."}),o[m.id]==="success"&&h.jsx("span",{className:"status-text success",children:" Uploaded"}),o[m.id]==="error"&&h.jsx("span",{className:"status-text error",children:"Error uploading"})]})]},m.id))})]})})}function vO({onImageSelected:i,currentImageUrl:e=null}){const[t,s]=U.useState(e),[o,c]=U.useState(!1),d=m=>{if(m.target.files&&m.target.files[0]){const g=m.target.files[0],y=new FileReader;y.onload=_=>{s(_.target.result)},y.readAsDataURL(g),i(g)}};return h.jsxs("div",{className:"image-uploader",children:[h.jsx("div",{className:"image-preview-container",children:t?h.jsx("img",{src:t,alt:"Preview",className:"image-preview"}):h.jsx("div",{className:"image-placeholder",children:h.jsx("span",{children:"No Image Selected"})})}),h.jsxs("div",{className:"upload-controls",children:[h.jsxs("label",{className:"upload-button",children:[e?"Change Image":"Upload Label Image",h.jsx("input",{type:"file",accept:"image/*",onChange:d,disabled:o,style:{display:"none"}})]}),o&&h.jsx("span",{className:"uploading-text",children:"Uploading..."})]})]})}function _O(){const[i,e]=U.useState(!1),[t,s]=U.useState(""),[o,c]=U.useState({name:"",makerId:"",type:"",origin:"",cacaoPercentage:"",description:"",ingredients:""}),[d,m]=U.useState(null),[g,y]=U.useState(null),[_,A]=U.useState(!1),b=P=>{const{name:I,value:G}=P.target;c({...o,[I]:G})},k=P=>{m(P),y(URL.createObjectURL(P))},C=async P=>{P.preventDefault();try{A(!0),s("");const I={name:o.name,makerId:o.makerId,type:o.type,origin:o.origin,cacaoPercentage:parseFloat(o.cacaoPercentage)||0,description:o.description,ingredients:o.ingredients.split(",").map(G=>G.trim())};await Vk(I,d),s("Chocolate added successfully!"),c({name:"",makerId:"",type:"",origin:"",cacaoPercentage:"",description:"",ingredients:""}),m(null),y(null)}catch(I){s(`Error adding chocolate: ${I.message}`),console.error("Error adding chocolate:",I)}finally{A(!1)}};return h.jsx("div",{className:"admin-page",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"admin-header",children:[h.jsx("h1",{children:"Chocolate Admin Dashboard"}),h.jsxs("div",{className:"admin-links",children:[h.jsx(pe,{to:"/admin/batch-upload",className:"admin-link",children:"Batch Image Upload"}),h.jsx(pe,{to:"/",className:"back-link",children:"Back to Home"})]})]}),h.jsxs("div",{className:"admin-section",children:[h.jsx("h2",{children:"Admin Tools"}),h.jsxs("div",{className:"admin-actions",children:[h.jsx("p",{className:"info-text",children:"Use the form below to manually add new chocolates to the database. For bulk operations, use the Batch Image Upload tool."}),t&&h.jsx("div",{className:"message",children:t})]})]}),h.jsxs("div",{className:"admin-section",children:[h.jsx("h2",{children:"Add New Chocolate"}),h.jsxs("form",{onSubmit:C,className:"admin-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"name",children:"Chocolate Name"}),h.jsx("input",{type:"text",id:"name",name:"name",value:o.name,onChange:b,required:!0,placeholder:"e.g., Madagascar Dark 70%"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"makerId",children:"Maker"}),h.jsx("input",{type:"text",id:"makerId",name:"makerId",value:o.makerId,onChange:b,required:!0,placeholder:"e.g., Valrhona, Lindt, etc."})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"type",children:"Type"}),h.jsxs("select",{id:"type",name:"type",value:o.type,onChange:b,required:!0,children:[h.jsx("option",{value:"",children:"Select a type"}),h.jsx("option",{value:"Dark",children:"Dark"}),h.jsx("option",{value:"Milk",children:"Milk"}),h.jsx("option",{value:"White",children:"White"}),h.jsx("option",{value:"Ruby",children:"Ruby"}),h.jsx("option",{value:"Dark Milk",children:"Dark Milk"}),h.jsx("option",{value:"Single Origin",children:"Single Origin"}),h.jsx("option",{value:"Flavored",children:"Flavored"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"origin",children:"Origin"}),h.jsx("input",{type:"text",id:"origin",name:"origin",value:o.origin,onChange:b,placeholder:"e.g., Madagascar, Ecuador, Venezuela"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"cacaoPercentage",children:"Cacao Percentage"}),h.jsx("input",{type:"number",id:"cacaoPercentage",name:"cacaoPercentage",value:o.cacaoPercentage,onChange:b,min:"0",max:"100",placeholder:"e.g. 70"})]}),h.jsxs("div",{className:"form-group full-width",children:[h.jsx("label",{children:"Chocolate Label Image"}),h.jsx(vO,{onImageSelected:k,currentImageUrl:g}),h.jsx("p",{className:"field-helper",children:"Upload a clear image of the chocolate label or packaging"})]}),h.jsxs("div",{className:"form-group full-width",children:[h.jsx("label",{htmlFor:"description",children:"Description"}),h.jsx("textarea",{id:"description",name:"description",value:o.description,onChange:b,rows:"4",required:!0,placeholder:"Describe the chocolate's taste, texture, and characteristics..."})]}),h.jsxs("div",{className:"form-group full-width",children:[h.jsx("label",{htmlFor:"ingredients",children:"Ingredients"}),h.jsx("textarea",{id:"ingredients",name:"ingredients",value:o.ingredients,onChange:b,rows:"2",placeholder:"Comma-separated list: cocoa beans, sugar, cocoa butter, vanilla, etc."}),h.jsx("p",{className:"field-helper",children:"Separate each ingredient with a comma"})]}),h.jsx("button",{type:"submit",className:"admin-button",disabled:_,children:_?"Adding Chocolate...":"Add Chocolate"})]})]}),h.jsxs("div",{className:"admin-section",children:[h.jsx("h2",{children:"Database Statistics"}),h.jsxs("div",{className:"stats-info",children:[h.jsx("p",{children:"Use your Firebase console to view detailed database statistics and manage your chocolate collection."}),h.jsx("p",{children:"For bulk image uploads, use the Batch Image Upload tool above."})]})]})]})})}function EO(){return h.jsx("div",{className:"about-page",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"about-header",children:[h.jsx("h1",{children:"About Chocly"}),h.jsx("p",{className:"tagline",children:"For the love of all things chocolate"})]}),h.jsxs("section",{className:"about-story",children:[h.jsxs("div",{className:"story-content",children:[h.jsx("h2",{children:"Our Story"}),h.jsx("p",{children:"Chocly was born from a personal journey of discovery and delight. Inspired by the cravings and curiosities of a chocolate-loving wife during pregnancy, our founder embarked on a quest to catalogue favorite bars, explore new and exciting flavors, and research the next must-try indulgence. What began as a loving endeavor has blossomed into Chocly, a platform for all chocolate enthusiasts to share their experiences, learn from others, and navigate the delicious world of premium chocolate together."})]}),h.jsx("div",{className:"story-image",children:h.jsx("div",{className:"image-placeholder",children:h.jsx("span",{children:"Our Founder's Story"})})})]}),h.jsxs("section",{className:"mission-section",children:[h.jsx("div",{className:"mission-overlay"}),h.jsxs("div",{className:"mission-content",children:[h.jsx("h2",{children:"Our Mission"}),h.jsx("p",{className:"mission-statement",children:"To help everyone discover and enjoy better chocolate."}),h.jsx("p",{className:"mission-description",children:"We believe that chocolate is more than just a treatit's an experience, an art form, and a connection to cultures and traditions around the world. Our aim is to make premium chocolate accessible to everyone, creating a community where chocolate lovers can share their discoveries and expand their palates."})]})]}),h.jsxs("section",{className:"values-section",children:[h.jsx("h2",{children:"What Drives Us"}),h.jsxs("div",{className:"values-grid",children:[h.jsxs("div",{className:"value-card",children:[h.jsx("div",{className:"value-icon quality"}),h.jsx("h3",{children:"Quality"}),h.jsx("p",{children:"We champion chocolate crafted with care, highlighting makers who prioritize quality ingredients and ethical practices."})]}),h.jsxs("div",{className:"value-card",children:[h.jsx("div",{className:"value-icon community"}),h.jsx("h3",{children:"Community"}),h.jsx("p",{children:"We believe in the power of shared experiences and diverse perspectives to enrich our chocolate journeys."})]}),h.jsxs("div",{className:"value-card",children:[h.jsx("div",{className:"value-icon discovery"}),h.jsx("h3",{children:"Discovery"}),h.jsx("p",{children:"We're committed to helping people break out of their chocolate comfort zones and discover new favorites."})]}),h.jsxs("div",{className:"value-card",children:[h.jsx("div",{className:"value-icon education"}),h.jsx("h3",{children:"Education"}),h.jsx("p",{children:"We seek to deepen understanding of chocolatefrom bean to barempowering informed choices."})]})]})]}),h.jsxs("section",{className:"team-section",children:[h.jsx("h2",{children:"Meet Our Team"}),h.jsx("p",{className:"team-intro",children:"We're a group of passionate chocolate enthusiasts dedicated to building the best platform for chocolate lovers everywhere."}),h.jsx("div",{className:"team-grid",children:h.jsx("div",{className:"team-placeholder",children:h.jsx("p",{children:"Team photos coming soon!"})})})]}),h.jsxs("section",{className:"join-section",children:[h.jsx("h2",{children:"Join Our Chocolate Revolution"}),h.jsx("p",{children:"Whether you're a casual chocolate enjoyer or a dedicated connoisseur, Chocly is the place for you. Sign up today to start tracking your chocolate journey, sharing your discoveries, and connecting with fellow enthusiasts."}),h.jsxs("div",{className:"cta-buttons",children:[h.jsx("a",{href:"/signup",className:"cta-button primary",children:"Join Chocly"}),h.jsx("a",{href:"/browse",className:"cta-button secondary",children:"Explore Chocolates"})]})]})]})})}function TO(){const[i,e]=U.useState({name:"",email:"",subject:"",message:""}),[t,s]=U.useState(!1),o=d=>{const{name:m,value:g}=d.target;e(y=>({...y,[m]:g}))},c=d=>{d.preventDefault(),console.log("Form submitted:",i),s(!0),e({name:"",email:"",subject:"",message:""}),setTimeout(()=>{s(!1)},5e3)};return h.jsx("div",{className:"contact-page",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"contact-header",children:[h.jsx("h1",{children:"Contact Us"}),h.jsx("p",{className:"tagline",children:"We'd love to hear from you!"})]}),h.jsxs("div",{className:"contact-content",children:[h.jsxs("div",{className:"contact-info",children:[h.jsxs("div",{className:"contact-section",children:[h.jsx("h2",{children:"Get in Touch"}),h.jsx("p",{children:"Have questions about chocolate? Want to suggest a new feature? Or maybe you just want to say hello? We're here for all your chocolate-related inquiries."})]}),h.jsxs("div",{className:"contact-section",children:[h.jsx("h3",{children:"Connect With Us"}),h.jsxs("div",{className:"social-links",children:[h.jsxs("a",{href:"#",className:"social-link",children:[h.jsx("span",{className:"social-icon instagram"}),h.jsx("span",{children:"@chocly"})]}),h.jsxs("a",{href:"#",className:"social-link",children:[h.jsx("span",{className:"social-icon twitter"}),h.jsx("span",{children:"@choclyapp"})]}),h.jsxs("a",{href:"#",className:"social-link",children:[h.jsx("span",{className:"social-icon facebook"}),h.jsx("span",{children:"Chocly"})]})]})]}),h.jsxs("div",{className:"contact-section",children:[h.jsx("h3",{children:"Email Us"}),h.jsx("p",{className:"email-address",children:"hello@chocly.co"}),h.jsx("p",{className:"email-note",children:"We aim to respond to all inquiries within 48 hours."})]}),h.jsx("div",{className:"contact-image",children:h.jsx("div",{className:"image-placeholder",children:h.jsx("span",{children:"Chocly Team"})})})]}),h.jsxs("div",{className:"contact-form-container",children:[h.jsx("h2",{children:"Send Us a Message"}),t&&h.jsx("div",{className:"success-message",children:h.jsx("p",{children:"Thank you for your message! We'll be in touch soon."})}),h.jsxs("form",{className:"contact-form",onSubmit:c,children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"name",children:"Your Name"}),h.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:o,required:!0})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"email",children:"Email Address"}),h.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:o,required:!0})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"subject",children:"Subject"}),h.jsx("input",{type:"text",id:"subject",name:"subject",value:i.subject,onChange:o,required:!0})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"message",children:"Your Message"}),h.jsx("textarea",{id:"message",name:"message",value:i.message,onChange:o,rows:"5",required:!0})]}),h.jsx("button",{type:"submit",className:"submit-button",children:"Send Message"})]})]})]}),h.jsxs("div",{className:"faq-section",children:[h.jsx("h2",{children:"Frequently Asked Questions"}),h.jsxs("div",{className:"faq-grid",children:[h.jsxs("div",{className:"faq-item",children:[h.jsx("h3",{children:"How do I create an account?"}),h.jsx("p",{children:'Click the "Sign Up" button in the top right corner of the page and follow the instructions to create your Chocly account.'})]}),h.jsxs("div",{className:"faq-item",children:[h.jsx("h3",{children:"Can I add a chocolate that's not in the database?"}),h.jsx("p",{children:'Absolutely! You can suggest new chocolates to add to our database. Look for the "Add Chocolate" option in your profile menu.'})]}),h.jsxs("div",{className:"faq-item",children:[h.jsx("h3",{children:"How do I leave a review?"}),h.jsx("p",{children:"Navigate to any chocolate's detail page and scroll down to the review section. You can rate the chocolate and share your thoughts there."})]}),h.jsxs("div",{className:"faq-item",children:[h.jsx("h3",{children:"Is Chocly available as a mobile app?"}),h.jsx("p",{children:"We're currently working on mobile apps for iOS and Android. Stay tuned for updates!"})]})]})]})]})})}function wO(){const e=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return h.jsx("div",{className:"legal-page privacy-policy",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"legal-header",children:[h.jsx("h1",{children:"Privacy Policy"}),h.jsxs("p",{className:"last-updated",children:["Last Updated: ",e]})]}),h.jsxs("div",{className:"legal-content",children:[h.jsx("section",{className:"legal-section",children:h.jsx("p",{className:"intro-text",children:"At Chocly, we take your privacy seriously. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website and use our services. Please read this privacy policy carefully. If you do not agree with the terms of this privacy policy, please do not access the site."})}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"Information We Collect"}),h.jsx("h3",{children:"Personal Data"}),h.jsx("p",{children:"We may collect personal information that you voluntarily provide to us when you register on our platform, express interest in obtaining information about us or our products and services, participate in activities on the platform, or otherwise contact us. The personal information we collect may include:"}),h.jsxs("ul",{children:[h.jsx("li",{children:"Name and contact information (email address, phone number)"}),h.jsx("li",{children:"Account credentials (username, password)"}),h.jsx("li",{children:"Profile information (profile picture, biography)"}),h.jsx("li",{children:"User-generated content (reviews, ratings, comments, uploads)"}),h.jsx("li",{children:"Preferences and interests related to chocolate"})]}),h.jsx("h3",{children:"Automatically Collected Information"}),h.jsx("p",{children:"When you visit our platform, we may automatically collect certain information about your device and your interaction with our platform. This information might include:"}),h.jsxs("ul",{children:[h.jsx("li",{children:"Device information (IP address, browser type, operating system)"}),h.jsx("li",{children:"Usage data (pages visited, time spent on pages, links clicked)"}),h.jsx("li",{children:"Location data (country, city)"}),h.jsx("li",{children:"Cookies and similar tracking technologies"})]})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"How We Use Your Information"}),h.jsx("p",{children:"We may use the information we collect for various purposes, including to:"}),h.jsxs("ul",{children:[h.jsx("li",{children:"Create and manage your user account"}),h.jsx("li",{children:"Provide and maintain our services"}),h.jsx("li",{children:"Personalize your experience on our platform"}),h.jsx("li",{children:"Process transactions and send related information"}),h.jsx("li",{children:"Respond to your inquiries and provide customer support"}),h.jsx("li",{children:"Send you administrative information, updates, and marketing communications"}),h.jsx("li",{children:"Improve our platform, products, and services"}),h.jsx("li",{children:"Protect against fraudulent, unauthorized, or illegal activity"}),h.jsx("li",{children:"Comply with legal obligations"})]})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"Sharing Your Information"}),h.jsx("p",{children:"We may share your information in the following situations:"}),h.jsxs("ul",{children:[h.jsxs("li",{children:[h.jsx("strong",{children:"With Service Providers:"})," We may share your information with third-party vendors, service providers, contractors, or agents who perform services for us."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"For Business Transfers:"})," We may share or transfer your information in connection with, or during negotiations of, any merger, sale of company assets, financing, or acquisition of all or a portion of our business."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"With Your Consent:"})," We may disclose your information for any other purpose with your consent."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"With Other Users:"})," When you share personal information or interact in public areas of the platform, such information may be viewed by all users and may be publicly distributed."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"For Legal Compliance:"})," We may disclose your information where required to do so by law or in response to valid requests by public authorities."]})]})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"User-Generated Content"}),h.jsx("p",{children:"Our platform allows you to upload, post, and share content, including reviews, ratings, comments, and images. Any information you post or share through these activities will be available to other users of the platform and the public. You should be aware that any information you provide in these areas may be read, collected, and used by others who access them."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"Storage and Security"}),h.jsx("p",{children:"We use commercially reasonable measures to protect your personal information from unauthorized access, use, or disclosure. However, please be aware that no method of electronic transmission or storage is 100% secure, and we cannot guarantee absolute security of your data."}),h.jsx("p",{children:"We will retain your personal information only for as long as is necessary for the purposes set out in this privacy policy, unless a longer retention period is required or permitted by law."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"Your Privacy Rights"}),h.jsx("p",{children:"Depending on your location, you may have certain rights regarding your personal information, including:"}),h.jsxs("ul",{children:[h.jsx("li",{children:"The right to access the personal information we have about you"}),h.jsx("li",{children:"The right to request correction of inaccurate personal information"}),h.jsx("li",{children:"The right to request deletion of your personal information"}),h.jsx("li",{children:"The right to object to processing of your personal information"}),h.jsx("li",{children:"The right to data portability"}),h.jsx("li",{children:"The right to withdraw consent"})]}),h.jsx("p",{children:"To exercise these rights, please contact us using the contact information provided below. Please note that we may ask you to verify your identity before responding to such requests."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"Cookies and Similar Technologies"}),h.jsx("p",{children:"We use cookies and similar tracking technologies to collect and use information about you and your interaction with our platform. We use these technologies to collect information about your browsing activities over time and across different websites. You can instruct your browser to refuse all cookies or to indicate when a cookie is being sent. However, if you do not accept cookies, you may not be able to use some portions of our platform."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"Children's Privacy"}),h.jsx("p",{children:"Our platform is not intended for individuals under the age of 13. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and you are aware that your child has provided us with personal information, please contact us."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"Changes to This Privacy Policy"}),h.jsx("p",{children:'We may update our privacy policy from time to time. We will notify you of any changes by posting the new privacy policy on this page and updating the "Last Updated" date at the top of this policy. You are advised to review this privacy policy periodically for any changes.'})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"Contact Us"}),h.jsx("p",{children:"If you have questions or comments about this privacy policy, please contact us at:"}),h.jsxs("p",{className:"contact-info",children:["Email: privacy@chocly.co",h.jsx("br",{}),"Address: 123 Chocolate Lane, Sweet City, CA 94000"]})]})]})]})})}function bO(){const e=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return h.jsx("div",{className:"legal-page terms-of-service",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"legal-header",children:[h.jsx("h1",{children:"Terms of Service"}),h.jsxs("p",{className:"last-updated",children:["Last Updated: ",e]})]}),h.jsxs("div",{className:"legal-content",children:[h.jsx("section",{className:"legal-section",children:h.jsx("p",{className:"intro-text",children:'Welcome to Chocly! These Terms of Service ("Terms") govern your access to and use of the Chocly website and services. Please read these Terms carefully before using our services. By accessing or using our services, you agree to be bound by these Terms and our Privacy Policy.'})}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"1. Acceptance of Terms"}),h.jsx("p",{children:"By accessing or using Chocly, you agree to be bound by these Terms. If you do not agree to all the terms and conditions of this agreement, you may not access or use our services."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"2. Changes to Terms"}),h.jsx("p",{children:'We reserve the right to modify these Terms at any time. We will provide notice of significant changes by posting the updated Terms on this page with a new "Last Updated" date. Your continued use of Chocly after any changes to the Terms constitutes your acceptance of such changes.'})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"3. Account Registration and Security"}),h.jsx("p",{children:"To access certain features of Chocly, you may be required to register for an account. When registering, you agree to provide accurate, current, and complete information. You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account. You agree to notify us immediately of any unauthorized use of your account."}),h.jsx("p",{children:"We reserve the right to suspend or terminate your account at our discretion if we believe that you have violated these Terms or if your account shows signs of fraud, abuse, or suspicious activity."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"4. User Content"}),h.jsx("h3",{children:"4.1 Content Ownership"}),h.jsx("p",{children:'You retain all ownership rights to the content you post, upload, or share on Chocly ("User Content"). By submitting User Content, you grant Chocly a worldwide, non-exclusive, royalty-free, sublicensable, and transferable license to use, reproduce, distribute, prepare derivative works of, display, and perform the User Content in connection with the operation and promotion of Chocly.'}),h.jsx("h3",{children:"4.2 Content Restrictions"}),h.jsx("p",{children:"You agree not to post, upload, or share any User Content that:"}),h.jsxs("ul",{children:[h.jsx("li",{children:"Violates any law or regulation"}),h.jsx("li",{children:"Infringes upon the rights of any third party, including intellectual property rights"}),h.jsx("li",{children:"Is false, misleading, defamatory, or deceptive"}),h.jsx("li",{children:"Contains sexually explicit or pornographic material"}),h.jsx("li",{children:"Promotes discrimination, bigotry, racism, or hatred against any individual or group"}),h.jsx("li",{children:"Is threatening, abusive, or harassing toward any individual or group"}),h.jsx("li",{children:"Promotes illegal or harmful activities"}),h.jsx("li",{children:"Contains viruses, malware, or other harmful code"})]}),h.jsx("h3",{children:"4.3 Content Moderation"}),h.jsx("p",{children:"We reserve the right, but have no obligation, to monitor, edit, or remove any User Content that we determine, in our sole discretion, violates these Terms or is otherwise objectionable. We are not responsible for the accuracy, completeness, appropriateness, or legality of User Content."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"5. Intellectual Property Rights"}),h.jsx("p",{children:"The Chocly name, logo, and all related names, logos, product and service names, designs, and slogans are trademarks of Chocly or its affiliates or licensors. You may not use such marks without our prior written permission."}),h.jsx("p",{children:"All content, features, and functionality of Chocly that is not User Content, including but not limited to text, graphics, images, logos, button icons, software, and the compilation thereof, is the exclusive property of Chocly, its licensors, or its content suppliers and is protected by copyright, trademark, and other intellectual property laws."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"6. Prohibited Activities"}),h.jsx("p",{children:"You agree not to engage in any of the following prohibited activities:"}),h.jsxs("ul",{children:[h.jsx("li",{children:"Using Chocly for any illegal purpose or in violation of any local, state, national, or international law"}),h.jsx("li",{children:"Impersonating any person or entity, or falsely stating or otherwise misrepresenting your affiliation with a person or entity"}),h.jsx("li",{children:"Interfering with or disrupting the operation of Chocly or the servers or networks connected to Chocly"}),h.jsx("li",{children:"Attempting to gain unauthorized access to Chocly, user accounts, or computer systems or networks connected to Chocly"}),h.jsx("li",{children:"Collecting or storing personal data about other users without their permission"}),h.jsx("li",{children:"Using automated means, including spiders, robots, crawlers, or data mining tools, to download data from Chocly"}),h.jsx("li",{children:"Introducing any viruses, Trojan horses, worms, or other material that is malicious or technologically harmful"})]})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"7. Third-Party Links and Content"}),h.jsx("p",{children:"Chocly may contain links to third-party websites or services that are not owned or controlled by Chocly. We have no control over, and assume no responsibility for, the content, privacy policies, or practices of any third-party websites or services. You further acknowledge and agree that Chocly shall not be responsible or liable, directly or indirectly, for any damage or loss caused or alleged to be caused by or in connection with the use of or reliance on any such content, goods, or services available on or through any such websites or services."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"8. Disclaimer of Warranties"}),h.jsx("p",{children:'Chocly is provided on an "AS IS" and "AS AVAILABLE" basis, without warranties of any kind, either express or implied, including, but not limited to, implied warranties of merchantability, fitness for a particular purpose, non-infringement, or course of performance.'}),h.jsx("p",{children:"We do not warrant that (a) Chocly will function uninterrupted, secure, or available at any particular time or location; (b) any errors or defects will be corrected; (c) Chocly is free of viruses or other harmful components; or (d) the results of using Chocly will meet your requirements."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"9. Limitation of Liability"}),h.jsx("p",{children:"To the maximum extent permitted by applicable law, in no event shall Chocly, its directors, employees, partners, agents, suppliers, or affiliates be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from (a) your access to or use of or inability to access or use Chocly; (b) any conduct or content of any third party on Chocly; (c) any content obtained from Chocly; and (d) unauthorized access, use, or alteration of your transmissions or content, whether based on warranty, contract, tort (including negligence), or any other legal theory, whether or not we have been informed of the possibility of such damage."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"10. Indemnification"}),h.jsx("p",{children:"You agree to defend, indemnify, and hold harmless Chocly, its directors, employees, partners, agents, suppliers, and affiliates from and against any claims, liabilities, damages, judgments, awards, losses, costs, expenses, or fees (including reasonable attorneys' fees) arising out of or relating to your violation of these Terms or your use of Chocly, including, but not limited to, your User Content, any use of Chocly's content, services, and products other than as expressly authorized in these Terms, or your use of any information obtained from Chocly."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"11. Termination"}),h.jsx("p",{children:"We may terminate or suspend your account and bar access to Chocly immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach these Terms."}),h.jsx("p",{children:"If you wish to terminate your account, you may simply discontinue using Chocly or contact us to request account deletion. All provisions of the Terms which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity, and limitations of liability."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"12. Governing Law"}),h.jsx("p",{children:"These Terms shall be governed and construed in accordance with the laws of the State of California, United States, without regard to its conflict of law provisions. Our failure to enforce any right or provision of these Terms will not be considered a waiver of those rights."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"13. Dispute Resolution"}),h.jsx("p",{children:"Any disputes arising out of or relating to these Terms or your use of Chocly shall be resolved through binding arbitration in accordance with the rules of the American Arbitration Association, except that each party retains the right to seek injunctive or other equitable relief in a court of competent jurisdiction to prevent the actual or threatened infringement or misappropriation of intellectual property rights."})]}),h.jsxs("section",{className:"legal-section",children:[h.jsx("h2",{children:"14. Contact Information"}),h.jsx("p",{children:"If you have any questions about these Terms, please contact us at:"}),h.jsxs("p",{className:"contact-info",children:["Email: terms@chocly.com",h.jsx("br",{}),"Address: 123 Chocolate Lane, Sweet City, CA 94000"]})]})]})]})})}function AO(){return h.jsx(tx,{basename:"/",children:h.jsx(nO,{children:h.jsxs("div",{className:"app",children:[h.jsx(pO,{}),h.jsx("main",{className:"main-content",children:h.jsxs(IS,{children:[h.jsx(qt,{path:"/",element:h.jsx($k,{})}),h.jsx(qt,{path:"/chocolate/:id",element:h.jsx(iO,{})}),h.jsx(qt,{path:"/search",element:h.jsx(rO,{})}),h.jsx(qt,{path:"/browse",element:h.jsx(cO,{})}),h.jsx(qt,{path:"/barcode",element:h.jsx(hO,{})}),h.jsx(qt,{path:"/profile",element:h.jsx(lO,{})}),h.jsx(qt,{path:"/signup",element:h.jsx(fO,{})}),h.jsx(qt,{path:"/login",element:h.jsx(mO,{})}),h.jsx(qt,{path:"/about",element:h.jsx(EO,{})}),h.jsx(qt,{path:"/contact",element:h.jsx(TO,{})}),h.jsx(qt,{path:"/privacy-policy",element:h.jsx(wO,{})}),h.jsx(qt,{path:"/terms-of-service",element:h.jsx(bO,{})}),h.jsx(qt,{path:"/admin",element:h.jsx(_O,{})}),h.jsx(qt,{path:"/admin/batch-upload",element:h.jsx(yO,{})}),h.jsx(qt,{path:"/category/:categorySlug",element:h.jsx(dO,{})}),h.jsx(qt,{path:"/maker",element:h.jsx(UE,{})}),h.jsx(qt,{path:"/maker/:makerName",element:h.jsx(UE,{})})]})}),h.jsx(gO,{})]})})})}LA.createRoot(document.getElementById("root")).render(h.jsx(U.StrictMode,{children:h.jsx(AO,{})}));
